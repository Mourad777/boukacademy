(this["webpackJsonpe-learn"]=this["webpackJsonpe-learn"]||[]).push([[42],{1352:function(e,r,o){"use strict";o.r(r);var t=o(63),a=o(0),c=o.n(a),n=o(31),s=o(4),u=o(106),i=o(38),l=o(830),m=o(422),f=o(250),d=o(798),p=o(740),b=o(152),v=o.n(b),g=o(199),h=o(243),j=o(7),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={isValid:!0,resourcesAreValid:!0};return r.resources=(e.resources||[]).map((function(o,t){var a;return(o||{}).resourceName&&(o.resourceName||"").trim()||(a=j.a.t("resources.errors.giveResourceName")),(o||{}).resource||(a=j.a.t("resources.errors.selectResource")),(o||{}).resource instanceof File&&(o||{}).resource.size>1e6*e.instructorFileSizeLimit&&(a=j.a.t("resources.errors.fileSize",{size:"".concat(e.instructorFileSizeLimit,"MB")})),(a||a)&&(r.resourcesAreValid=!1,r.isValid=!1),{resourceName:a}})),r},O=o(338),k=o(339),N=o(27),F=o(341),R=o(337),x=o(256),y=o.n(x),w=function(e){var r=e.fields,o=e.formValues,t=void 0===o?{}:o,a=e.changeDocument,n=e.openModal,s=e.t,l=e.isDarkTheme;return c.a.createElement(i.a,null,c.a.createElement(u.a,{align:"center",variant:"h4",gutterBottom:!0},s("layout.drawer.resources")),c.a.createElement(d.a,null,r.map((function(e,o){var u,i=((t.resources||[])[o]||{}).loadedResource,l=((t.resources||[])[o]||{}).resource instanceof File?((((t.resources||[])[o]||{}).resource||{}).name||"").toLowerCase().split(".").pop():(((t.resources||[])[o]||{}).resource||"").toLowerCase().split(".").pop();return"pdf"===l&&(u=c.a.createElement("i",{className:"far fa-file-pdf fa-2x"})),"docx"!==l&&"doc"!==l||(u=c.a.createElement("i",{className:"fas fa-file-word fa-2x"})),"jpeg"!==l&&"jpg"!==l&&"jfif"!==l||(u=c.a.createElement("i",{className:"fas fa-file-image fa-2x"})),"avi"!==l&&"mp4"!==l||(u=c.a.createElement("i",{className:"far fa-file-video fa-2x"})),c.a.createElement(p.a,{key:o},i&&u&&c.a.createElement("span",{style:{marginRight:20,cursor:"pointer"},onClick:function(e){e.stopPropagation(),n({loadedFile:i,ext:l},"courseResource")}},u),c.a.createElement(O.a,{simple:!0,label:s("resources.buttons.resourceName"),name:"resources.".concat(o,".resourceName"),component:g.a,errorAbsolutePosition:!0}),c.a.createElement(O.a,{name:"resources.".concat(o,".resource"),component:f.a,loadedFile:i,mimeTypesAllowed:"video/*, image/jpeg, application/pdf, .doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",extensionsAllowed:["jpeg","jpg","jfif","pdf","docx","doc","mp4","avi"],onChangeFile:function(e){a("resources.".concat(o,".loadedResource"),e)},preview:!1,compressImage:!0,index:o,uploadButtonText:s("resources.buttons.select")}),c.a.createElement(h.a,{onClick:function(e){e.stopPropagation(),r.remove(o)}},c.a.createElement(v.a,{fontSize:"small",style:{color:"red"}})))}))),c.a.createElement(p.a,{button:!0,onClick:function(){return r.push()}},c.a.createElement(y.a,{style:{color:l?"#2196f3":"#0058AE"}}),c.a.createElement(u.a,{style:{color:l?"#2196f3":"#0058AE"}},s("resources.buttons.addResource"))))},V=Object(R.a)({form:"courseResources",enableReinitialize:!0,destroyOnUnmount:!0,validate:E})((function(e){var r=e.token,o=e.course,n=void 0===o?{}:o,s=e.formValues,u=e.updateResources,f=e.changeDocument,d=e.initialValues,p=e.openModal,b=e.touchField,v=e.configuration,g=e.isDarkTheme,h=Object(a.useState)(null),j=Object(t.a)(h,2),O=j[0],N=j[1],F=Object(a.useState)(!1),R=Object(t.a)(F,2),x=R[0],y=R[1];console.log("initialUrls",O),Object(a.useEffect)((function(){var e=d.resources.map((function(e){return e.resource}));N(e)}),[d]);var V=Object(m.a)().t,C=E(s,v).isValid;return c.a.createElement(i.a,null,c.a.createElement(k.a,{name:"resources",formValues:s,component:w,changeDocument:f,openModal:p,isDarkTheme:g,t:V}),c.a.createElement(l.a,{clicked:function(){var e=E(s,v).isValid;if(s.resources.forEach((function(e,r){b("resources.".concat(r,".resourceName")),b("resources.".concat(r,".resource"))})),y(!0),e){var o=s.resources.map((function(e){return e.resource})),t=(O||[]).filter((function(e){if(!o.includes(e))return e}));u(n._id,s.resources,t,r)}},isError:x&&!C},V("resources.buttons.updateResources")))}));r.default=Object(n.b)((function(e){var r=(e.common.courses||[]).find((function(r){return r._id===e.common.selectedCourse}));console.log("course: ",r);var o=(r||{}).resources||[],t=e.common.configuration.instructorFileSizeLimit,a=0===o.length?[{resourceName:""}]:o;return{formValues:Object(F.a)("courseResources")(e),modalDocument:e.common.modalDocument,configuration:e.common.configuration,token:e.authentication.token,initialValues:{resources:a,instructorFileSizeLimit:t},isDarkTheme:e.common.isDarkTheme,course:r}}),(function(e){return{updateResources:function(r,o,t,a){return e(s.Fd(r,o,t,a))},changeDocument:function(r,o){e(Object(N.a)("courseResources",r,o))},openModal:function(r,o){e(s.Bc(r,o))},touchField:function(r){e(Object(N.d)("courseResources",r))}}}))(V)},830:function(e,r,o){"use strict";var t=o(0),a=o.n(t),c=o(438),n=o(869),s=o(444),u=Object(c.a)((function(e){return{SuccessButton:{background:"#4caf50","&:hover":{backgroundColor:"#388e3c",color:"#FFF"}},ErrorButton:{background:"#c62828","&:hover":{backgroundColor:"#b71c1c",color:"#FFF"}}}})),i=Object(n.a)(s.a)({border:0,borderRadius:3,color:"white",height:48,padding:"0 30px"});r.a=function(e){var r=e.isError,o=e.children,c=e.clicked,n=e.disabled,s=u();return a.a.createElement(t.Fragment,null,a.a.createElement(i,{disabled:n,onClick:c,fullWidth:!0,className:r?s.ErrorButton:s.SuccessButton},o))}},869:function(e,r,o){"use strict";var t=o(5),a=o(11),c=o(0),n=o.n(c),s=o(10),u=(o(2),o(249)),i=o.n(u),l=o(746);function m(e,r){var o={};return Object.keys(e).forEach((function(t){-1===r.indexOf(t)&&(o[t]=e[t])})),o}var f=o(109);r.a=function(e){var r=function(e){return function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=o.name,u=Object(a.a)(o,["name"]);var f,d=c,p="function"===typeof r?function(e){return{root:function(o){return r(Object(t.a)({theme:e},o))}}}:{root:r},b=Object(l.a)(p,Object(t.a)({Component:e,name:c||e.displayName,classNamePrefix:d},u));r.filterProps&&(f=r.filterProps,delete r.filterProps),r.propTypes&&(r.propTypes,delete r.propTypes);var v=n.a.forwardRef((function(r,o){var c=r.children,u=r.className,i=r.clone,l=r.component,d=Object(a.a)(r,["children","className","clone","component"]),p=b(r),v=Object(s.a)(p.root,u),g=d;if(f&&(g=m(g,f)),i)return n.a.cloneElement(c,Object(t.a)({className:Object(s.a)(c.props.className,v)},g));if("function"===typeof c)return c(Object(t.a)({className:v},g));var h=l||e;return n.a.createElement(h,Object(t.a)({ref:o,className:v},g),c)}));return i()(v,e),v}}(e);return function(e,o){return r(e,Object(t.a)({defaultTheme:f.a},o))}}}}]);
(this["webpackJsonpe-learn"]=this["webpackJsonpe-learn"]||[]).push([[44],{1350:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(63),s=a(0),l=a.n(s),u=a(31),o=a(438),d=a(842),i=a(843),c=a(845),m=a(5),f=a(11),g=(a(2),a(10)),p=a(13),b=s.forwardRef((function(e,t){var a=e.classes,n=e.className,r=e.component,l=void 0===r?"div":r,u=Object(f.a)(e,["classes","className","component"]);return s.createElement(l,Object(m.a)({ref:t,className:Object(g.a)(a.root,n)},u))})),E=Object(p.a)({root:{width:"100%",overflowX:"auto"}},{name:"MuiTableContainer"})(b),v=a(844),k=a(444),N=a(199),h=a(273),_=a(910),R=a(38),x=a(69),D=a.n(x),W=a(4),y=a(422),O=a(244),M=a(106),T=Object(o.a)({table:{minWidth:200},MuiTableRowBlue:{background:"#2196f3"},MuiTableRowDanger:{background:"#f44336"},WhiteText:{color:"white"},DangerText:{color:"#f44336"},SuccessText:{color:"#4caf50"},MuiButton:{marginLeft:"20px","&:hover":{border:"1px solid #1976d2",backgroundColor:"#e3f2fd",color:"#1976d2"}},MuiButtonDark:{backgroundColor:"#595959",marginLeft:"20px","&:hover":{border:"1px solid #1976d2",backgroundColor:"#424242",color:"#1976d2"}},studentFilterContainer:{width:"100%",display:"flex",justifyContent:"space-around",marginBottom:10,marginTop:30}});t.default=Object(u.b)((function(e){var t=e.common.selectedCourse,a=e.common.courses,n=Object(O.a)(a,t),r=[];return n&&(n.studentsEnrollRequests||[]).forEach((function(e){return r.push(e.student)})),{token:e.authentication.token,selectedTest:e.instructorTest.selectedTest,testGrading:e.instructorTest.testGrading,course:n,students:r,initialGradeValues:e.instructorTest.initialGradeValues,isDarkTheme:e.common.isDarkTheme}}),(function(e){return{setTestToGrade:function(t,a){return e(W.id(t,a))},setInitialGradeValues:function(t){return e(W.Zc(t))},closeTest:function(t,a,n,r,s,l){e(W.w(t,a,n,r,s,l))},openModal:function(t,a){return e(W.Bc(t,a))}}}))((function(e){var t=e.isTest,a=e.isAssignment,u=e.course,o=e.students,m=void 0===o?[]:o,f=e.token,g=e.closeTest,p=e.openModal,b=e.isDarkTheme,x=e.history,W=Object(y.a)().t,O=Object(s.useState)(""),w=Object(r.a)(O,2),j=w[0],C=w[1],I=Object(s.useState)(""),Y=Object(r.a)(I,2),S=Y[0],B=Y[1],q=Object(s.useState)(""),H=Object(r.a)(q,2),G=H[0],A=H[1],L=Object(s.useState)("studentName"),z=Object(r.a)(L,2),F=z[0],P=z[1],J=Object(s.useState)("all"),V=Object(r.a)(J,2),X=V[0],Z=V[1];Object(s.useEffect)((function(){var e=(m||[])[0];if(e){C("".concat(e.firstName," ").concat(e.lastName)),A(e._id.replace(/\D/g,""));var a=t?(u.tests||[]).filter((function(e){return!e.assignment}))[0]:(u.tests||[]).filter((function(e){return e.assignment}))[0];B((a||{}).testName)}}),[JSON.stringify(m)]);var K=T();function Q(e,t){return{info:e,value:t}}var U=u.tests.filter((function(e){return!e.assignment&&e.published}))||[],$=function(e){return u.tests.find((function(t){return t._id===e}))},ee=u.tests.filter((function(e){return e.assignment&&e.published}))||[],te=U.map((function(e){return e._id})),ae=ee.map((function(e){return e._id})),ne=[],re=U.filter((function(e){var t=parseInt(e.dueDate);return Date.now()>t?e:null})).map((function(e){return e._id})),se=ee.filter((function(e){var t=parseInt(e.dueDate);return Math.ceil((Date.now()-t)/864e5)>(e.lateDaysAllowed||0)?e:null})).map((function(e){return e._id})),le=[],ue=[];t&&((m||[]).forEach((function(e){e.testResults.forEach((function(t){var a={student:e,testResult:t,test:U.find((function(e){return e._id===t.test}))};te.includes(t.test)&&t.closed&&ne.push(a),(te.includes(t.test)&&!t.closed||(t||{}).test===(e.testInSession||{}).test)&&ue.push(a)}))})),re.forEach((function(e){(m||[]).forEach((function(t){var a={student:t,test:U.find((function(t){return t._id===e}))};t.testResults.map((function(e){return e.test})).includes(e)||le.push(a)}))})));var oe=[],de=[];a&&((m||[]).forEach((function(e){return e.testResults.forEach((function(t){var a={student:e,testResult:t,test:ee.find((function(e){return e._id===t.test}))};ae.includes(t.test)&&t.closed&&ne.push(a),ae.includes(t.test)&&!t.closed&&de.push(a)}))})),se.forEach((function(e){(m||[]).forEach((function(t){var a={student:t,test:ee.find((function(t){return t._id===e}))};t.testResults.map((function(e){return e.test})).includes(e)||oe.push(a)}))})));var ie=(m||[]).map((function(e){return"".concat(e.firstName," ").concat(e.lastName)})),ce=(U||[]).map((function(e){return e.testName})),me=(ee||[]).map((function(e){return e.testName})),fe=[{label:W("gradeWork.all"),value:"all",placement:"end",color:"primary"},{label:W("gradeWork.toReview"),value:"toReview",placement:"end",color:"primary"},{label:W("gradeWork.graded"),value:"graded",placement:"end",color:"primary"}],ge=[{label:W("gradeWork.studentName"),value:"studentName",placement:"end",color:"primary"},{label:W("gradeWork.studentId"),value:"studentId",placement:"end",color:"primary"},{label:"".concat(W(t?"gradeWork.test":"gradeWork.assignment")),value:"testName",placement:"end",color:"primary"}];return l.a.createElement(R.a,null,l.a.createElement(M.a,{align:"center",variant:"h4",gutterBottom:!0},W("layout.drawer.grades")),l.a.createElement("div",{className:K.studentFilterContainer},"studentName"===F&&l.a.createElement(h.a,{id:"student-autocomplete",selectedOption:j,onOptionChange:function(e,t){C(t)},options:ie,label:W("gradeWork.student"),width:300,margin:"0 0 22px 0"}),"testName"===F&&l.a.createElement(h.a,{id:"test-autocomplete",selectedOption:S,onOptionChange:function(e,t){B(t)},options:t?ce:me,label:"".concat(W(t?"gradeWork.test":"gradeWork.assignment")),width:300,margin:"0 0 22px 0"}),"studentId"===F&&l.a.createElement(N.a,{fullWidth:!0,type:"text",label:W("gradeWork.studentId"),input:{value:G,onChange:function(e,t){A(e.target.value)}}})),l.a.createElement("div",{className:K.studentFilterContainer},l.a.createElement(_.a,{title:W("gradeWork.searchBy"),options:ge,input:{value:F,onChange:function(e){P(e.target.value)}}}),l.a.createElement(_.a,{title:W(t?"gradeWork.filterTests":"gradeWork.filterAssignments"),options:fe,input:{value:X,onChange:function(e){Z(e.target.value)}}})),l.a.createElement(E,null,ne.map((function(e,t){var a=(u.studentsEnrollRequests||[]).find((function(t){return t.student._id===e.student._id&&t.droppedOut})),r=(u.studentsEnrollRequests||[]).find((function(t){return t.student._id===e.student._id&&t.denied})),s=(u.studentsEnrollRequests||[]).find((function(t){return t.student._id===e.student._id&&t.approved})),o="";if(a&&(o="Dropped out"),r&&(o="Access denied"),s||a||r){if(j!=="".concat(e.student.firstName," ").concat(e.student.lastName)&&"studentName"===F)return null;if(S!==e.test.testName&&"testName"===F)return null;if(G.replace(/\D/g,"")!==e.student._id.replace(/\D/g,"")&&"studentId"===F)return null;if("toReview"===X&&(e.testResult||{}).graded)return null;if("graded"===X&&!(e.testResult||{}).graded)return null;var m=(e.testResult||{}).graded,E=[Q("",e.test.testName),Q(W("gradeWork.studentName"),"".concat(e.student.firstName," ").concat(e.student.lastName," ").concat(o?"- "+o:"")),e.test.gradeReleaseDate?Q(W("gradeWork.gradeExpectedOn"),e.test.gradeReleaseDate?D()(parseInt(e.test.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,Q(W("gradeWork.submittedOn"),(e.testResult||{}).submittedOn?D()(parseInt((e.testResult||{}).submittedOn)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""),Q(W("gradeWork.status"),(e.testResult||{}).isExcused?W("gradeWork.buttons.excused"):(e.testResult||{}).graded?"".concat(W("gradeWork.graded")," ").concat((e.testResult||{}).grade,"%"):W("gradeWork.gradePending"))],N=(e.testResult||{}).isExcused;return l.a.createElement(R.a,{key:e.testResult._id},l.a.createElement(d.a,{className:K.table,"aria-label":"simple table"},l.a.createElement(i.a,null,E.map((function(t,n){var u;if(0===n&&(u="WhiteText"),2===n&&parseInt(e.test.gradeReleaseDate)<Date.now()+864e5&&!m&&(u="DangerText"),4===n&&m&&!e.testResult.isExcused&&(u="SuccessText"),4===n&&m&&e.testResult.isExcused&&(u="DangerText"),4===n&&N&&(u="DangerText"),t)return l.a.createElement(v.a,{key:t.info+n,className:0===n?K.MuiTableRowBlue:""},l.a.createElement(c.a,{className:0===n?K.WhiteText:"",component:"th",scope:"row"},t.info,0===n&&l.a.createElement(k.a,{size:"small",className:!s&&b?K.MuiButtonDark:K.MuiButton,variant:"outlined",color:"primary",type:"button",title:"Grade",disabled:!!r||!!a,onClick:function(){x.push("/instructor-panel/course/".concat(e.test.course,"/grade-").concat(e.test.assignment?"assignment":"test","s/student/").concat(e.student._id,"/").concat(e.test.assignment?"assignment":"test","/").concat(e.test._id))}},(e.testResult||{}).graded||(e.testResult||{}).gradingInProgress?W("gradeWork.buttons.editGrade"):W("gradeWork.buttons.grade"))),l.a.createElement(c.a,{className:K[u],align:"right"},t.value))})))),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},l.a.createElement(k.a,{style:{width:"40%"},disabled:!!r||!!a,color:"secondary",onClick:function(t){t.stopPropagation(),p(Object(n.a)(Object(n.a)({},e.test),{},{student:e.student}),"resetTest")}},W("gradeWork.buttons.reset")),l.a.createElement(k.a,{color:"secondary",style:{width:"40%"},disabled:!!r||!!a||!!e.testResult.isExcused,onClick:function(){var t=e.student._id,a=e.test._id;g(a,t,f,$(a),!0,x)}},e.testResult.isExcused?W("gradeWork.buttons.excused"):W("gradeWork.buttons.excuse"))))}})),(t?ue:de).map((function(e){var t=(u.studentsEnrollRequests||[]).find((function(t){return t.student._id===e.student._id&&t.droppedOut})),a=(u.studentsEnrollRequests||[]).find((function(t){return t.student._id===e.student._id&&t.denied})),r=(u.studentsEnrollRequests||[]).find((function(t){return t.student._id===e.student._id&&t.approved})),s="";if(t&&(s="Dropped out"),a&&(s="Access denied"),r||t||a){var o=e.test||{};if(j!=="".concat(e.student.firstName," ").concat(e.student.lastName)&&"studentName"===F)return null;if(S!==o.testName&&"testName"===F)return null;if(G.replace(/\D/g,"")!==e.student._id.replace(/\D/g,"")&&"studentId"===F)return null;if("graded"===X)return null;var m=[Q("",o.testName),Q(W("gradeWork.student"),"".concat(e.student.firstName," ").concat(e.student.lastName," ").concat(s?"- "+s:"")),o.gradeReleaseDate?Q(W("gradeWork.gradeExpectedOn"),o.gradeReleaseDate?D()(parseInt(o.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,o.lastSavedOn?Q(W("gradeWork.lastSavedOn"),(e.testResult||{}).lastSavedOn?D()(parseInt((e.testResult||{}).lastSavedOn)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,Q(W("gradeWork.status"),W("gradeWork.inProgress"))];return l.a.createElement(R.a,{key:e.testResult._id},l.a.createElement(d.a,{key:e.testResult._id,className:K.table,"aria-label":"simple table"},l.a.createElement(i.a,null,m.map((function(n,s){var u;if(0===s&&(u="WhiteText"),4===s&&(u="DangerText"),n)return l.a.createElement(v.a,{key:n.info+s,className:0===s?K.MuiTableRowBlue:""},l.a.createElement(c.a,{className:0===s?K.WhiteText:"",component:"th",scope:"row"},n.info,0===s&&l.a.createElement(k.a,{disabled:!!a||!!t,size:"small",className:!r&&b?K.MuiButtonDark:K.MuiButton,variant:"outlined",color:"primary",type:"button",title:"Grade",onClick:function(){var t=e.student._id,a=o._id;g(a,t,f,$(a),!1,x)}},W("gradeWork.buttons.closeAndGrade"))),l.a.createElement(c.a,{className:K[u],align:"right"},n.value))})))),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},l.a.createElement(k.a,{disabled:!!a||!!t,color:"secondary",style:{width:"40%"},onClick:function(t){t.stopPropagation(),p(Object(n.a)(Object(n.a)({},e.test),{},{student:e.student}),"resetTest")}},W("gradeWork.buttons.reset")),l.a.createElement(k.a,{color:"secondary",style:{width:"40%"},disabled:!!e.testResult.isExcused||!!a||!!t,onClick:function(){var t=e.student._id,a=e.test._id;g(a,t,f,$(a),!0,x)}},e.testResult.isExcused?W("gradeWork.buttons.excused"):W("gradeWork.buttons.excuse"))))}})),(t?le:oe).map((function(e){var t=(u.studentsEnrollRequests||[]).find((function(t){return t.student._id===e.student._id&&t.droppedOut})),a=(u.studentsEnrollRequests||[]).find((function(t){return t.student._id===e.student._id&&t.denied})),n=(u.studentsEnrollRequests||[]).find((function(t){return t.student._id===e.student._id&&t.approved})),r="";if(t&&(r="Dropped out"),a&&(r="Access denied"),n||t||a){if(j!=="".concat(e.student.firstName," ").concat(e.student.lastName)&&"studentName"===F)return null;if(S!==e.test.testName&&"testName"===F)return null;if(G.replace(/\D/g,"")!==e.student._id.replace(/\D/g,"")&&"studentId"===F)return null;if("graded"===X)return null;var s=[Q("",e.test.testName),Q(W("gradeWork.student"),"".concat(e.student.firstName," ").concat(e.student.lastName," ").concat(r?"- "+r:"")),e.test.gradeReleaseDate?Q(W("gradeWork.gradeExpectedOn"),e.test.gradeReleaseDate?D()(parseInt(e.test.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,Q(W("gradeWork.status"),W("gradeWork.missed"))];return l.a.createElement(R.a,{key:"".concat(e.student.firstName,"[").concat(e.test._id,"]")},l.a.createElement(d.a,{className:K.table,"aria-label":"simple table"},l.a.createElement(i.a,null,s.map((function(r,s){var u,o;if(0===s&&(u="MuiTableRowBlue"),0===s&&(o="WhiteText"),3===s&&(o="DangerText"),r)return l.a.createElement(v.a,{key:r.info+s,className:K[u]},l.a.createElement(c.a,{className:0===s?K.WhiteText:"",component:"th",scope:"row"},r.info,0===s&&l.a.createElement(R.a,null,l.a.createElement(k.a,{size:"small",disabled:!!a||!!t,className:!n&&b?K.MuiButtonDark:K.MuiButton,variant:"outlined",color:"primary",onClick:function(){var t=e.student._id,a=e.test._id;g(a,t,f,$(a),!1,x)}},W("gradeWork.buttons.closeAndGrade")))),l.a.createElement(c.a,{className:K[o],align:"right"},r.value))})))),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},l.a.createElement(k.a,{disabled:!!a||!!t||!!(e.testResult||{}).isExcused,color:"secondary",style:{width:"40%"},onClick:function(){var t=e.student._id,a=e.test._id;g(a,t,f,$(a),!0,x)}},W("gradeWork.buttons.excuse"))))}})),(m||[]).map((function(e){var a=(u.studentsEnrollRequests||[]).find((function(t){return t.student._id===e._id&&t.droppedOut})),n=(u.studentsEnrollRequests||[]).find((function(t){return t.student._id===e._id&&t.denied})),r=(u.studentsEnrollRequests||[]).find((function(t){return t.student._id===e._id&&t.approved})),s="";if(a&&(s="Dropped out"),n&&(s="Access denied"),r||a||n){var o=u.tests.filter((function(e){return e.published}));return l.a.createElement(R.a,{key:e._id},o.map((function(r){if(!!e.testResults.find((function(t){return t.student===e._id&&t.test===r._id})))return null;var u=le.find((function(e){return e.test._id===r._id})),o=oe.find((function(e){return e.test._id===r._id})),m=ue.find((function(e){return e.test._id===r._id})),p=de.find((function(e){return e.test._id===r._id}));if((!t||!r.assignment)&&(t||r.assignment)&&!(u||o||m||p)){if(j!=="".concat(e.firstName," ").concat(e.lastName)&&"studentName"===F)return null;if(S!==r.testName&&"testName"===F)return null;if(G.replace(/\D/g,"")!==e._id.replace(/\D/g,"")&&"studentId"===F)return null;if("all"!==X)return null;var b=[Q("",r.testName),Q(W("gradeWork.student"),"".concat(e.firstName," ").concat(e.lastName," ").concat(s?"- "+s:"")),r.gradeReleaseDate?Q(W("gradeWork.gradeExpectedOn"),r.gradeReleaseDate?D()(parseInt(r.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,Q(W("gradeWork.status"),W("gradeWork.notAttempted"))];return l.a.createElement(R.a,{key:"".concat(e.firstName,"[").concat(r._id,"]")},l.a.createElement(d.a,{className:K.table,"aria-label":"simple table"},l.a.createElement(i.a,null,b.map((function(e,t){var a,n;if(0===t&&(a="MuiTableRowBlue"),0===t&&(n="WhiteText"),e)return l.a.createElement(v.a,{key:e.info+t,className:K[a]},l.a.createElement(c.a,{className:0===t?K.WhiteText:"",component:"th",scope:"row"},e.info),l.a.createElement(c.a,{className:K[n],align:"right"},e.value))})))),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},l.a.createElement(k.a,{disabled:!!n||!!a,color:"secondary",style:{width:"40%"},onClick:function(){var t=e._id,a=r._id;g(a,t,f,$(a),!0,x)}},W("gradeWork.buttons.excuse"))))}})))}}))))}))},910:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(1078),l=a(1066),u=a(734),o=a(441),d=a(733),i=a(438),c=Object(i.a)((function(e){return{margin:{marginBottom:"15px"},MuiFormLabel:{fontSize:"1.2em"},errorText:{color:"#e91313",fontFamily:"Helvetica",fontSize:"0.75rem"},font:{fontSize:"0.7em !important"}}}));t.a=function(e){var t=e.input,a=e.meta,n=void 0===a?{}:a,i=e.options,m=e.title,f=e.error,g=e.row,p=void 0!==g&&g,b=c(),E=n.touched&&(n.error||f),v=i.map((function(e){return r.a.createElement(u.a,Object.assign({key:e.label},t,{value:e.value,control:r.a.createElement(s.a,{color:e.color}),label:e.label,labelPlacement:e.placement,checked:e.checked,className:b.font}))}));return r.a.createElement("div",{className:b.margin},r.a.createElement(o.a,{margin:"dense",component:"fieldset"},r.a.createElement(d.a,{className:b.MuiFormLabel},m),r.a.createElement(l.a,{row:p,value:t.value,"aria-label":"gender"},v),r.a.createElement("span",{className:b.errorText},E?n.error||f:""," ")))}}}]);
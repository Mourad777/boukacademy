(this["webpackJsonpe-learn"]=this["webpackJsonpe-learn"]||[]).push([[21],{1e3:function(e,t,n){e.exports={TextEditor:"QuestionForm_TextEditor__u_r-v",AudioAlignment:"QuestionForm_AudioAlignment__3BWyX",TextField:"QuestionForm_TextField__2Sda1",flexPositioningEven:"QuestionForm_flexPositioningEven__2KLVv",QuestionCustomizationContainer:"QuestionForm_QuestionCustomizationContainer__22hEj",questionFormList:"QuestionForm_questionFormList__1M4KE",PreviewContainer:"QuestionForm_PreviewContainer__2wPZw",CorrectAnswer:"QuestionForm_CorrectAnswer__2C-Al",button:"QuestionForm_button__8Jwdx",FullWidthImg:"QuestionForm_FullWidthImg__2mnOy",Inline:"QuestionForm_Inline__FRbqS",center:"QuestionForm_center__28Lc8",TestTypeRadio:"QuestionForm_TestTypeRadio__1ecGu",ListHorizontalDisplay:"QuestionForm_ListHorizontalDisplay__w7l8y",TestFormList:"QuestionForm_TestFormList__3N75r",greenIcon:"QuestionForm_greenIcon__3WzQM",redIcon:"QuestionForm_redIcon__2Ywa9",CorrectAnswerHighlight:"QuestionForm_CorrectAnswerHighlight__6kSke",BlankPreview:"QuestionForm_BlankPreview__3ZErm",InputField:"QuestionForm_InputField__2KEI9",FullWidth:"QuestionForm_FullWidth__xmZJy",InputFieldBottomMargin:"QuestionForm_InputFieldBottomMargin__g_527",SelectField:"QuestionForm_SelectField__16Pop",Pointer:"QuestionForm_Pointer__3kPMX",audioPlayerPreview:"QuestionForm_audioPlayerPreview__3tdXT",Editor:"QuestionForm_Editor__fcayJ"}},1030:function(e,t,n){"use strict";var a=n(24),r=n(62),o=n(0),i=n.n(o),s=n(31),c=n(344),u=n(347),l=n(349),m=n(27),d=n(343),f=n(30),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,o=t.length-e.length;if(t.length!==e.length){var i={marks:1,incorrectAnswerOptions:{incorrectAnswerOne:"",incorrectAnswerTwo:"",incorrectAnswerThree:""},selectableAnswer:!1,audio:!1,browserAudioFile:null,audioFile:null},s={marks:null,answerOptions:{incorrectAnswerThree:null},browserAudioFile:null};if(e.length<t.length){var c=t.findIndex((function(t,n){return!e.includes(t)}));if(t.length>0){if(0!==c){var u=function(e,t,n){return[].concat(Object(f.a)(e.slice(0,t)),[n],Object(f.a)(e.slice(t)))},l=e.length-1;t.splice.apply(e,[l,0].concat(e));new Array(o);var m=u(n,c,Object(a.a)(Object(a.a)({},i),{},{answer:t[c]})),d=u(r,c,s);return{answersToUpdate:m.map((function(e,n){return Object(a.a)(Object(a.a)({},e),{},{answer:t[n]})})),errorsToUpdate:d}}n.unshift(Object(a.a)(Object(a.a)({},i),{},{answer:t[0]})),r.unshift(s)}}if(e.length>t.length){var p=function(e,t){var n=[];return e.forEach((function(a,r){t.includes(e[r])||n.push(r)})),n},b=p(e,t);if(1===b.length)n.splice(b[0],1),r.splice(b[0],1);else{var g=b[0],v=b.length;n.splice(g,v),r.splice(g,v)}}if(e.length<t.length&&!n){var w=e.length-1;t.splice.apply(e,[w,0].concat(e));var k=new Array(o);n=k.map((function(e){return i})),r=k.map((function(e){return s}))}return{answersToUpdate:n.map((function(e,n){return Object(a.a)(Object(a.a)({},e),{},{answer:t[n]})})),errorsToUpdate:r}}},b=n(150),g=n(248),v=n(198),w=n(247),k=n(917),F=n(39),h=n(250),Q=n(853),E=n.n(Q),y=n(249),O=n(252),_=n(107),j=n(428),q=function(e){var t=e.blankIndex,n=e.t,a=e.answers,r=e.meta,o=void 0===r?{}:r,s=e.error;return i.a.createElement(F.a,null,i.a.createElement("select",{readOnly:!0,value:"select the correct answer",className:E.a.SelectField},["select the correct answer","Correct option","Incorrect option 1","Incorrect option 2","Incorrect option 3"].map((function(e,r){var o,s=(a[t]||{}).answerOptions||{};return 0===r&&(o=n("testForm.fields.selectCorrectAnswerInline")),1===r&&(o=(a[t]||{}).answer),2===r&&(o=s.incorrectAnswerOne),3===r&&(o=s.incorrectAnswerTwo),4===r&&(o=s.incorrectAnswerThree),i.a.createElement("option",{key:"".concat(e,"[").concat(r,"]"),className:1===r?E.a.CorrectAnswerHighlight:null,disabled:!0,value:e},o)}))),i.a.createElement("div",{className:E.a.flexPositioningEven},i.a.createElement("span",{className:E.a.errorText},(o.error||s)&&o.touched?o.error||s:""," ")))},x=n(940),T=n(941),A=n.n(T),B=n(859),C=n.n(B),I=n(857),R=n.n(I),S=n(826),P=n.n(S),N=function(e,t,n,a,r,o,i,s,c){if(a){var u="fillBlankQuestions.answers";r(o,"".concat(u,".").concat(n,".recordingQuestion"),a),r(o,"".concat(u,".").concat(n,".questionRecorder"),e),r(o,"".concat(u,".").concat(n,".questionRecordingTimeout"),t)}else!function(e,t,n){clearTimeout(e),t(!0),n(setTimeout((function(){t(!1)}),5e3))}(i,s,c)},L=function(e,t,n,a,r,o){var i="fillBlankQuestions.answers";a(o,"".concat(i,".").concat(n,".recordingQuestion"),!1),a(o,"".concat(i,".").concat(n,".browserAudioFile"),e),a(o,"".concat(i,".").concat(n,".audioFile"),t),r(o,"".concat(i,".").concat(n,".browserAudioFile"))},z=function(e,t){return(((t.fillBlankQuestions||[]).answers||[])[e]||{}).questionRecordingTimeout},D=function(e,t){return(((t.fillBlankQuestions||[]).answers||[])[e]||{}).questionRecorder},M=function(e,t,n){var a="fillBlankQuestions.answers.".concat(e,".answerOptions.incorrectAnswer");["One","Two","Three"].forEach((function(e){t(n,a+e)}))},W=n(6),U=n.n(W),V=n(41),H=n(825),J=n(851),X=Object(s.b)((function(e,t){var n=t.form;return{formValues:Object(u.a)(n)(e)}}),(function(e){return{changeField:function(t,n,a){e(Object(m.a)(t,n,a))},touchField:function(t,n){e(Object(m.d)(t,n))}}}))((function(e){var t=e.blankIndex,n=e.FileInput,a=e.form,s=e.answers,u=e.changeField,l=e.touchField,m=e.formValues,d=Object(o.useState)(!1),f=Object(r.a)(d,2),p=f[0],b=f[1],g=Object(o.useState)([]),v=Object(r.a)(g,2),w=v[0],k=v[1];Object(o.useEffect)((function(){return function(){clearTimeout(w)}}),[]);var h=Object(j.a)("common").t;return i.a.createElement(F.a,null,i.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},i.a.createElement(c.a,{name:"fillBlankQuestions.answers.".concat(t,".audioFile"),component:n,uploadButtonText:h("testForm.buttons.selectAudioFile"),index:t,onChangeFile:function(e,t){u(a,"fillBlankQuestions.answers.".concat(t,".browserAudioFile"),e)},mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]})),i.a.createElement(c.a,{component:J.a,name:"fillBlankQuestions.answers.".concat(t,".browserAudioFile"),onStart:function(){var e=Object(V.a)(U.a.mark((function e(n){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.c)(n,null,t,null,function(){var e=Object(V.a)(U.a.mark((function e(n){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:r=e.sent,L(r.blob,r.file,t,u,l,a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:r=e.t0,N(r.recorder,r.recordingTimeout,t,r.isRecording,u,a,w,b,k);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onStop:function(){var e=Object(V.a)(U.a.mark((function e(n){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.d)(n,null,t,z(t,m),D(t,m));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:r=e.t0,L(r.blob,r.file,t,u,l,a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPreview:function(){Object(H.b)("audioQuestion[".concat(t,"]"))},onClear:function(){return L(null,null,t,u,l,a)},id:"audioQuestion[".concat(t,"]"),recordDisabled:(s[t]||{}).recordingQuestion,audioSource:(s[t]||{}).browserAudioFile,isMicAlert:p}))})),K=Object(d.a)({destroyOnUnmount:!1,forceUnregisterOnUnmount:!1,validate:b.a})((function(e){var t=e.formValues,n=e.updateErrors,s=e.formErrors,u=e.touchField,l=e.changeField,m=e.form,d=e.isModal,f=e.path,Q=Object(j.a)("common").t,T=Object(o.useState)([]),B=Object(r.a)(T,2),I=B[0],S=B[1];Object(o.useEffect)((function(){var e=Object(b.a)(t);n("testForm",e)}),[]);var N=(t.fillBlankQuestions||{}).answers,L=(t.fillBlankQuestions||{}).correctAnswers,z=function(e){var t=Object(o.useRef)();return Object(o.useEffect)((function(){t.current=e})),t.current}(L),D=Object(o.useRef)();Object(o.useEffect)((function(){D.current?I&&S(!1):D.current=!0}));var W=(t.fillBlankQuestions||{}).answers||[],U=(s.fillBlankQuestions||{}).answers||[];if((z||[]).findIndex((function(e,t){return e!==L[t]?e:null}))>-1){var V=(N||[]).map((function(e,t){return Object(a.a)(Object(a.a)({},e),{},{answer:L[t]})}));l(m,"fillBlankQuestions.answers",V)}var H=(t.fillBlankQuestions||{}).correctAnswers;if((L||[]).length!==(z||[]).length&&!I){var J=p(z,H,N,U),K=J.answersToUpdate,Z=J.errorsToUpdate;l(m,"fillBlankQuestions.answers",K),n(m,Object(a.a)(Object(a.a)({},s),{},{fillBlankQuestions:{question:(s.fillBlankQuestions||{}).question,answers:Z}})),L.forEach((function(e,t){var n={fillBlankQuestions:{answers:K}};e.marks||u("fillBlankQuestions.answers.".concat(t,".marks"));var a=Object(b.a)(n);((a.fillBlankQuestions.answers[t]||{}).answerOptions||{}).incorrectAnswerThree&&M(t,u,m),(a.fillBlankQuestions.answers[t]||{}).browserAudioFile&&u("fillBlankQuestions.answers.".concat(t,".browserAudioFile"))}))}var G=(t.fillBlankQuestions||{}).question||"",Y=(G.match(/<mark [^>]+>(.*?)<\/mark>/g)||[]).map((function(e){return e.replace(/<[^>]+>/g,"")}));Object(o.useEffect)((function(){l(m,"fillBlankQuestions.correctAnswers",Y)}),[t]);var $=function(e,t,n){var a=C()(e,/<mark [^>]+>(.*?)<\/mark>/g,(function(e,a){var r=a/2-.5,o=((t||[])[r]||{}).answer,s=(t[r]||{}).browserAudioFile,c=((t||[])[r]||{}).selectableAnswer;return!0===c?i.a.createElement(F.a,{key:e+r},i.a.createElement("span",{className:E.a.BlankPreview},r+1," "),(t[r]||{}).audio&&s&&i.a.createElement(x.a,{id:"audio[".concat(r,"]"),source:s}),i.a.createElement(q,{blankIndex:r,answers:t,t:n})):!1===c?i.a.createElement(F.a,{key:e+r},i.a.createElement("span",{className:E.a.Inline},i.a.createElement("span",{className:E.a.BlankPreview},r+1," "),(t[r]||{}).audio&&s&&i.a.createElement(x.a,{id:"audio[".concat(r,"]"),source:s}),i.a.createElement("input",{readOnly:!0,type:"text",className:E.a.InputField,value:"".concat(A()(o))}))):void 0})),r=[];a.forEach((function(e,t){"string"===typeof e?r.push(e):r.push(R.a.renderToString(e))}));var o=(r||[]).join("").replace(/<img/g,'<img style="width:100%"');return P.a.sanitize(o,{ALLOW_UNKNOWN_PROTOCOLS:!0,ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}(G,W,Q);return i.a.createElement(F.a,null,"testForm"===m&&i.a.createElement(_.a,{variant:"h4",gutterBottom:!0,paragraph:!0},Q("testForm.fillblanksSection")),i.a.createElement("div",{className:E.a.TextEditor},i.a.createElement(c.a,{component:h.a,isModal:d,name:"fillBlankQuestions.question",label:Q("testForm.fillblanksText"),field:"fillBlankQuestions.question",reduxForm:m,error:(s.fillBlankQuestions||{}).question,path:f,blockFillblankSynchronization:I})),$&&i.a.createElement("div",{className:E.a.PreviewContainer},i.a.createElement(_.a,{paragraph:!0,variant:"h6"},Q("testForm.preview")),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:$}})),"testForm"===m&&i.a.createElement(w.a,{summary:Q("testForm.textFromQuestionbank"),index:0},i.a.createElement(k.default,{questionType:"Fill-in-the-blanks questions",selecting:!0,onBlockSync:function(){return function(e,t){t(!!e)}(!0,S)}})),W.length>0?i.a.createElement(_.a,{style:{marginTop:20},variant:"h6",gutterBottom:!0,paragraph:!0},Q("testForm.customizeAnswers")):"",i.a.createElement("ul",{className:E.a.TestFormList},W.map((function(e,t){return i.a.createElement("li",{key:"blanks[".concat(t,"]")},i.a.createElement("div",{className:E.a.QuestionCustomizationContainer},i.a.createElement(_.a,{variant:"h6",gutterBottom:!0},"".concat(Q("testForm.blank")," ").concat(t+1)),i.a.createElement(_.a,{className:E.a.CorrectAnswer,variant:"body1",gutterBottom:!0,paragraph:!0},"".concat(Q("testForm.correctAnswer"),": "),W[t]?W[t].answer.replace(/&nbsp;/g," "):""),i.a.createElement(c.a,{name:"fillBlankQuestions.answers.".concat(t,".selectableAnswer"),options:{checked:!1,label:Q("testForm.fields.selectableAnswer")},component:y.a,type:"checkbox"}),i.a.createElement(c.a,{name:"fillBlankQuestions.answers.".concat(t,".audio"),type:"checkbox",options:{checked:!1,label:Q("testForm.audio")},component:y.a}),W[t].selectableAnswer&&i.a.createElement(F.a,null,i.a.createElement(_.a,{variant:"body1",gutterBottom:!0,paragraph:!0},Q("testForm.incorrectAnswerOptions")),["incorrectAnswerOne","incorrectAnswerTwo","incorrectAnswerThree"].map((function(e,n){return i.a.createElement("div",{key:"".concat(e,"[").concat(n,"]"),className:E.a.TextField},i.a.createElement(c.a,{wait:250,component:g.a,name:"fillBlankQuestions.answers.".concat(t,".answerOptions.").concat(e),label:"".concat(Q("testForm.incorrectOption")," ").concat(n+1),margin:"dense",variant:"outlined",size:"small",simple:!0,width:"95%",debounce:!0,onChange:function(){return M(n,u,m)}}))}))),(W[t]||{}).audio&&i.a.createElement(X,{blankIndex:t,FileInput:O.a,form:m,answers:W}),"testForm"===m&&i.a.createElement("div",{style:{marginTop:15}},i.a.createElement(c.a,{name:"fillBlankQuestions.answers.".concat(t,".marks"),component:v.a,error:(U[t]||{}).marks,options:{label:Q("testForm.fields.marks"),size:"small"}}))))}))))}));t.a=Object(s.b)((function(e,t){var n=t.form;return{formValues:Object(u.a)(n)(e),formErrors:Object(l.a)(n)(e)}}),(function(e){return{touchField:function(t,n){e(Object(m.d)(t,n))},changeField:function(t,n,a){e(Object(m.a)(t,n,a))},updateErrors:function(t,n){e(Object(m.e)(t,n))}}}))(K)},1237:function(e,t,n){e.exports={spacing:"TagInput_spacing__1d-u8",inputContainer:"TagInput_inputContainer__1rikX"}},1352:function(e,t,n){"use strict";n.r(t);var a=n(24),r=n(62),o=n(0),i=n.n(o),s=n(31),c=n(39),u=n(344),l=n(345),m=n(27),d=n(347),f=n(343),p=n(250),b=n(927),g=n(1e3),v=n.n(g),w=n(449),k=n(823),F=n(107),h=n(428),Q=n(245),E=n(803),y=n(745),O=n(153),_=n.n(O),j=n(259),q=n.n(j),x=function(e){var t=e.input,n=e.label,a=e.type,r=e.meta,o=r.touched,s=r.error;return i.a.createElement("div",null,i.a.createElement("label",null,n),i.a.createElement("div",null,i.a.createElement("input",Object.assign({className:[v.a.InputField,v.a.FullWidth].join(" ")},t,{placeholder:n,type:a})),o&&s&&i.a.createElement("span",null,s)))},T=function(e){var t=e.clearAnswers,n=e.fields,a=e.t,r=e.meta.error;return i.a.createElement(c.a,null,i.a.createElement(Q.a,{fullWidth:!0,type:"button",color:"primary",onClick:function(){return n.push()},startIcon:i.a.createElement(q.a,null),size:"small"},a("questionForm.buttons.addAnswer")),i.a.createElement(F.a,{variant:"body1",style:{fontSize:"0.8rem"},gutterBottom:!0},a("questionForm.writeAnswers")),i.a.createElement(E.a,null,n.map((function(e,a){return i.a.createElement(y.a,{key:a},i.a.createElement(Q.a,{onClick:function(){n.remove(a),t()},color:"secondary",startIcon:i.a.createElement(_.a,null)},""),i.a.createElement(u.a,{name:e,type:"text",component:x,label:""}))})),r&&i.a.createElement(y.a,{className:"error"},r)))},A=Object(f.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.clearAnswers,n=e.touchCheckboxes,a=e.formValues,r=void 0===a?{}:a,o=e.path,s=Object(h.a)().t,m=((r.mcQuestion||{}).answers||[]).map((function(e,t){return{label:"".concat(e||""),value:"".concat(t+1),placement:"start",color:"primary",name:"mcQuestion.correctAnswers"}})),d=i.a.createElement(c.a,null,i.a.createElement(F.a,{variant:"body1",style:{fontSize:"0.8rem"},gutterBottom:!0},s("questionForm.selectCorrectAnswers")),i.a.createElement(u.a,{name:"mcQuestion.correctAnswers",component:b.a,options:m,column:!0,required:!1,onChange:function(){return n("mcQuestion.correctAnswers")}}));return i.a.createElement("div",{className:v.a.QuestionCustomizationContainer},i.a.createElement("div",{className:v.a.TextEditor},i.a.createElement(u.a,{name:"mcQuestion.question",component:p.a,reduxForm:"questionForm",field:"mcQuestion.question",label:s("questionForm.question"),path:o})),d,i.a.createElement(l.a,{name:"mcQuestion.answers",clearAnswers:t,component:T,t:s}),i.a.createElement(u.a,{name:"mcQuestion.solution",component:k.a,label:s("questionForm.fields.solution"),options:{multiline:!0,rows:3,variant:w.a},textLabel:!0}))})),B=Object(s.b)((function(e){return{formValues:Object(d.a)("questionForm")(e)}}),(function(e){return{updateTags:function(t){e(Object(m.a)("questionForm","tags",t))},clearAnswers:function(){e(Object(m.a)("questionForm","mcQuestion.correctAnswers]",[]))},touchCheckboxes:function(t){e(Object(m.d)("questionForm",t))}}}))(A),C=Object(f.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.path,n=Object(h.a)().t;return i.a.createElement(c.a,null,i.a.createElement("div",{className:v.a.TextEditor},i.a.createElement(u.a,{name:"essayQuestion.question",component:p.a,reduxForm:"questionForm",field:"essayQuestion.question",label:n("questionForm.question"),path:t})),i.a.createElement(u.a,{name:"essayQuestion.solution",component:k.a,label:n("questionForm.fields.solution"),options:{multiline:!0,rows:3,variant:w.a},textLabel:!0}))})),I=n(349),R=n(249),S=n(252),P=n(6),N=n.n(P),L=n(41),z=n(851),D=n(825),M=function(e,t,n,a,r,o,i,s,c){r?("question"===a&&(c("speakingQuestion.".concat(n,".isRecordingQuestion"),r),c("speakingQuestion.".concat(n,".questionRecorder"),e),c("speakingQuestion.".concat(n,".questionRecordingTimeout"),t)),"answer"===a&&(c("speakingQuestion.".concat(n,".isRecording"),!0),c("speakingQuestion.".concat(n,".recorder"),e),c("speakingQuestion.".concat(n,".recordingTimeout"),t))):function(e,t,n){clearTimeout(e),t(!0),n(setTimeout((function(){t(!1)}),5e3))}(o,i,s)},W=function(e,t,n,a,r,o){"question"===a&&(r("speakingQuestion.".concat(n,".isRecordingQuestion"),!1),r("speakingQuestion.".concat(n,".questionRecordedBlob"),e),r("speakingQuestion.".concat(n,".audioFileQuestion"),t),o("speakingQuestion.".concat(n,".questionRecordedBlob"))),"answer"===a&&(r("speakingQuestion.".concat(n,".isRecording"),!1),r("speakingQuestion.".concat(n,".recordedBlob"),e),r("speakingQuestion.".concat(n,".audioFile"),t),o("speakingQuestion.".concat(n,".recordedBlob")))},U=Object(s.b)((function(e,t){return{formValues:Object(d.a)("questionForm")(e)}}),(function(e){return{changeField:function(t,n){e(Object(m.a)("questionForm",t,n))},makeAudioFieldTouched:function(t){e(Object(m.d)("questionForm",t))}}}))((function(e){var t=e.formValues,n=e.makeAudioFieldTouched,a=e.changeField,s=e.index,l=e.isQuestion,m=(e.isAnswer,Object(h.a)().t,Object(o.useState)(!1)),d=Object(r.a)(m,2),f=d[0],p=d[1],b=Object(o.useState)(!1),g=Object(r.a)(b,2),v=g[0],w=g[1];Object(o.useEffect)((function(){return function(){clearTimeout(v)}}),[]);var k=(t.speakingQuestion||[])[s]||{},F=k.recordingTimeout,Q=k.questionRecordingTimeout,E=k.recorder,y=k.questionRecorder,O=k.questionRecordedBlob,_=k.recordedBlob,j=k.isRecordingQuestion,q=k.isRecording;return i.a.createElement(c.a,null,[l?"question":"answer"].map((function(e){return i.a.createElement(u.a,{component:z.a,name:"speakingQuestion.".concat(s,".").concat(l?"questionRecordedBlob":"recordedBlob"),onStart:function(){var t=Object(L.a)(N.a.mark((function t(r){var o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(D.c)(r,e,s,null,function(){var t=Object(L.a)(N.a.mark((function t(r){var o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r;case 2:o=t.sent,W(o.blob,o.file,s,e,a,n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:o=t.t0,M(o.recorder,o.recordingTimeout,s,e,o.isRecording,v,p,w,a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onStop:function(){var t=Object(L.a)(N.a.mark((function t(r){var o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(D.d)(r,null,s,l?Q:F,l?y:E);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:o=t.t0,W(o.blob,o.file,s,e,a,n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onPreview:function(){Object(D.b)(l?"audioQuestion[".concat(s,"]"):"audioAnswer[".concat(s,"]"))},onClear:function(){return W(null,null,s,e,a,n)},id:l?"audioQuestion[".concat(s,"]"):"audioAnswer[".concat(s,"]"),recordDisabled:l?j:q,audioSource:l?O:_,isMicAlert:f})})))})),V=Object(f.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.changeField,n=e.formValues,a=void 0===n?{}:n,r=e.formErrors,o=void 0===r?{}:r,s=e.path,l=Object(h.a)("common").t,m={label:l("questionForm.fields.audioQuestion"),checked:!1},d={label:l("questionForm.fields.audioAnswer"),checked:!1},f=(a.speakingQuestion||[])[0]||{},b=["question","answer"].map((function(e){return i.a.createElement(u.a,{name:"speakingQuestion.".concat(0,".").concat("question"===e?"audioQuestion":"audioAnswer"),options:"question"===e?m:d,component:R.a,type:"checkbox"})}));return i.a.createElement(c.a,{className:v.a.QuestionCustomizationContainer},i.a.createElement(c.a,null,b[0],f.audioQuestion?i.a.createElement(c.a,null,i.a.createElement("div",{className:v.a.flexPositioningEven},i.a.createElement(u.a,{name:"speakingQuestion.".concat(0,".audioFileQuestion"),index:"q".concat(0),onChangeFile:function(e){t("speakingQuestion.".concat(0,".questionRecordedBlob"),e)},component:S.a,loadedFile:f.questionRecordedBlob,mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]})),i.a.createElement(U,{isQuestion:!0,index:0})):i.a.createElement("div",{className:v.a.TextEditor},i.a.createElement(u.a,{name:"speakingQuestion.".concat(0,".question"),field:"speakingQuestion.".concat(0,".question"),reduxForm:"questionForm",component:p.a,label:l("questionForm.question"),path:s,error:(o.speakingQuestion||{}).question})),i.a.createElement("div",null,b[1],!0===f.audioAnswer&&i.a.createElement(c.a,null,i.a.createElement("div",{className:v.a.flexPositioningEven},i.a.createElement(u.a,{name:"speakingQuestion.".concat(0,".audioFile"),component:S.a,index:"a".concat(0),onChangeFile:function(e){t("speakingQuestion.".concat(0,".recordedBlob"),e)},loadedFile:f.recordedBlob,mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]})),i.a.createElement(U,{isAnswer:!0,index:0})))))})),H=Object(s.b)((function(e){return{formValues:Object(d.a)("questionForm")(e),formErrors:Object(I.a)("questionForm")(e)}}),(function(e){return{changeField:function(t,n){e(Object(m.a)("questionForm",t,n))}}}))(V),J=n(1030),X=n(253),K=n(4),Z=n(130),G=n(131),Y=n(147),$=n(148),ee=n(1236),te=n.n(ee),ne=n(1237),ae=n.n(ne),re=(n(1238),function(e){Object(Y.a)(n,e);var t=Object($.a)(n);function n(){return Object(Z.a)(this,n),t.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:ae.a.spacing},i.a.createElement("span",null,this.props.label),i.a.createElement("div",{className:ae.a.inputContainer},i.a.createElement(te.a,{inputProps:{placeholder:""},value:this.props.tagValues,onChange:this.props.onTagChange})))}}]),n}(o.Component)),oe=n(843),ie=n(248),se=n(1203),ce=n(7),ue=function(e){var t={mcQuestion:{},essayQuestion:{},speakingQuestion:[{}],fillBlankQuestions:{}};if(e.mcQuestion){var n,a=e.mcQuestion;e.mcQuestion.question||(t.mcQuestion.question=ce.a.t("questionForm.errors.required")),((a.answers||[]).includes(void 0)||(a.answers||[]).includes(""))&&(a.answers||[]).length>1&&(n=ce.a.t("questionForm.errors.answersCantBeEmpty")),(a.answers||[]).length<2&&(n=ce.a.t("questionForm.errors.atleastTwoAnswers")),(a.answers||[]).length===(a.correctAnswers||[]).length&&(a.answers||[]).length>1&&(n=ce.a.t("questionForm.errors.atleastOneUnchecked")),(!a.correctAnswers||0===(a.correctAnswers||[]).length)&&(a.answers||[]).length>1&&(n=ce.a.t("questionForm.errors.selectAtleastOneAnswer"));var r=(a.answers||[]).map((function(e){return(e||"").trim()})),o=(r||[]).reduce((function(e,t,n,a){return a.indexOf(t)!==n&&e.indexOf(t)<0&&e.push(t),e}),[]);(a.answers||[]).length>1&&(o||[]).length>0&&(n=ce.a.t("questionForm.errors.answersDifferent")),t.mcQuestion.correctAnswers=n,(n||t.mcQuestion.question)&&(t.mcQuestionError=!0)}if(e.essayQuestion&&(e.essayQuestion.question||(t.essayQuestion.question=ce.a.t("questionForm.errors.required"),t.essayQuestionError=!0)),e.speakingQuestion){var i=(e.speakingQuestion||{})[0]||{};i.question||i.audioQuestion||(t.speakingQuestion[0].question=ce.a.t("questionForm.errors.requiredOrMakeAudioQuestion")),!i.questionRecordedBlob&&i.audioQuestion&&(t.speakingQuestion[0].questionRecordedBlob=ce.a.t("questionForm.errors.requiredOrMakeTextQuestion")),i.audioFileQuestion instanceof File&&i.audioFileQuestion.size>1e3*e.instructorFileSizeLimit*1e3&&i.audioQuestion&&(t.speakingQuestion[0].questionRecordedBlob="".concat(ce.a.t("questionForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),i.audioFile instanceof File&&i.audioFile.size>1e3*e.instructorFileSizeLimit*1e3&&i.audioAnswer&&(t.speakingQuestion[0].recordedBlob="".concat(ce.a.t("questionForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),!i.recordedBlob&&i.audioAnswer&&(t.speakingQuestion[0].recordedBlob=ce.a.t("questionForm.errors.requiredOrDisableAudioAnswer")),(t.speakingQuestion[0].question||t.speakingQuestion[0].questionRecordedBlob||t.speakingQuestion[0].recordedBlob)&&(t.speakingQuestionError=!0)}return t},le=n(72),me=n(149),de=n(134),fe=n(246),pe=n(205),be=function(e,t,n,a,r,o,i,s,c){n||Object(pe.a)(e,t,n,a,r,o,i,s,c)},ge=Object(f.a)({form:"questionForm",enableReinitialize:!0,validate:ue})((function(e){var t=e.editing,n=e.formValues,s=void 0===n?{}:n,l=e.formErrors,m=e.course,d=e.selectedCourse,f=e.questions,p=e.submitQuestion,b=e.deleteQuestion,g=e.questionType,v=e.changeField,w=e.touchField,k=e.loadedQuestion,E=e.loading,y=e.deleteImg,O=e.clearQuestionForm,_=e.setQuestionForm,j=e.fetchQuestionBank,q=e.match,x=(e.history,Object(h.a)().t),T=m.tests,A=Object(o.useState)([]),I=Object(r.a)(A,2),R=I[0],S=I[1],P=Object(o.useState)(!0),N=Object(r.a)(P,2),L=N[0],z=N[1],D=Object(o.useState)(!1),M=Object(r.a)(D,2),W=M[0],U=M[1],V=Object(o.useState)([]),K=Object(r.a)(V,2),Z=K[0],G=K[1],Y=Object(o.useState)([]),$=Object(r.a)(Y,2),ee=$[0],te=$[1],ne=Object(o.useState)(null),ae=Object(r.a)(ne,2),ce=ae[0],ue=ae[1],fe=localStorage.getItem("token"),ge=Object(o.useRef)(),ve=Object(o.useRef)(),we=Object(o.useRef)();we.current=R;var ke=Object(o.useRef)();ke.current=T;var Fe=Object(o.useRef)();Fe.current=g,Object(o.useEffect)((function(){return window.addEventListener("beforeunload",(function(e){be(ge.current,we.current,ve.current,fe,y,"questionForm",null,ke.current,Fe.current)})),j(d,fe),ue(t?null:(new de.a.ObjectId).toHexString()),function(){window.removeEventListener("beforeunload",be),ve.current||Object(pe.a)(ge.current,we.current,ve.current,fe,y,"questionForm",null,ke.current,Fe.current),O()}}),[]),Object(o.useEffect)((function(){ge.current=s,ve.current=W}),[s,W]),Object(o.useEffect)((function(){var e=q.params.questionId;if(f){var t=q.params.qType;if(t&&_(t,!1,function(e,t){var n=t("questionForm.fillblanksSectionDefaultText"),r={difficulty:"medium",language:t("questionForm.english")};return"mc"===e&&(r=Object(a.a)(Object(a.a)({},r),{},{mcQuestion:{answers:["".concat(t("questionForm.option")," 1"),"".concat(t("questionForm.option")," 2")],correctAnswers:["1"]}})),"essay"===e&&(r=Object(a.a)(Object(a.a)({},r),{},{essayQuestion:{question:""}})),"speaking"===e&&(r=Object(a.a)(Object(a.a)({},r),{},{speakingQuestion:[{audioAnswer:!1,audioQuestion:!1}]})),"fillInBlank"===e&&(r=Object(a.a)(Object(a.a)({},r),{},{fillBlankQuestions:{question:n,answers:[{marks:1,selectableAnswer:!1,answer:t("questionForm.pieceOfText")}],correctAnswers:[t("questionForm.pieceOfText")]}})),r}(t,x)),e){var n=(f||[]).find((function(t){return t._id===e}));n&&_(n.type,!1,function(e){var t=(e||{}).speakingQuestion||{},n=e;"speaking"===(e||{}).type&&(n=Object(a.a)(Object(a.a)({},e),{},{speakingQuestion:[{question:t.question,questionRecordedBlob:t.audioQuestion?t.audioQuestion:"",recordedBlob:t.audio?t.audio:"",audioFileQuestion:t.audioQuestion,audioFile:t.audio,audioAnswer:!(!t.audio||""===t.audio),audioQuestion:!(!t.audioQuestion||""===t.audioQuestion)}]}));var r=(e||{}).fillBlankQuestions||{},o=r.blanks||[];return"fillInBlank"===(e||{}).type&&(n=Object(a.a)(Object(a.a)({},e),{},{fillBlankQuestions:{question:r.question,answers:o.map((function(e){var t=(e.incorrectAnswers||[]).filter((function(e){return e})).reduce((function(e,t,n){var a;return 0===n&&(a="One"),1===n&&(a="Two"),2===n&&(a="Three"),e["incorrectAnswer".concat(a)]=t,e}),{});return{answer:e.correctAnswer,audioFile:e.audio,browserAudioFile:e.audio?e.audio:"",audio:!(!e.audio||""===e.audio),selectableAnswer:e.selectableAnswer,answerOptions:t}})),correctAnswers:o.map((function(e){return e.correctAnswer}))}})),n}(n))}}}),[f]),Object(o.useEffect)((function(){if(W){var e=Object(le.a)(T,"courseTests")||[],n=Object(le.a)(s,"questionForm",g).filter((function(t){return e.includes(t)?null:t})),r=(R||[]).filter((function(e){return n.includes(e)?null:e})).filter((function(t){return e.includes(t)?null:t}));p(t?s:Object(a.a)(Object(a.a)({},s),{},{_id:ce}),fe,t,m._id,r,g)}}),[W]);var he=[{value:"easy",primaryText:x("questionForm.fields.easy")},{value:"medium",primaryText:x("questionForm.fields.medium")},{value:"hard",primaryText:x("questionForm.fields.hard")}];Object(o.useEffect)((function(){var e=Object(le.a)(k,"questionForm",g);S(e)}),[k]),Object(o.useEffect)((function(){var e=(s.fillBlankQuestions||{}).answers,t=(l.fillBlankQuestions||{}).answers;G(e),te(t)}),[s,l]);var Qe=function(){if(s.mcQuestion&&(w("mcQuestion.question"),w("mcQuestion.correctAnswers")),s.essayQuestion&&w("essayQuestion.question"),s.speakingQuestion&&(w("speakingQuestion.0.question"),w("speakingQuestion.0.recordedBlob"),w("speakingQuestion.0.questionRecordedBlob")),s.fillBlankQuestions&&Array.from(Z).forEach((function(e,t){w("fillBlankQuestions.answers.".concat(t,".browserAudioFile")),w("fillBlankQuestions.answers.".concat(t,".answerOptions.incorrectAnswerThree"))})),s.mcQuestion&&l.mcQuestionError)return!1;if(s.essayQuestion&&l.essayQuestionError)return!1;if(s.speakingQuestion&&l.speakingQuestionError)return!1;if(s.fillBlankQuestions){var e=Z.map((function(e,t){return(((ee||[])[t]||{}).answerOptions||{}).incorrectAnswerThree||((ee||[])[t]||{}).browserAudioFile?"error":null})),t=(l.fillBlankQuestions||{}).question;if(e.includes("error")||t)return!1}return!0},Ee=t?s._id:ce,ye="courses/".concat(m._id,"/questions/").concat(Ee);return(m||{})._id&&Ee?i.a.createElement(c.a,null,i.a.createElement(me.a,{active:E,transparent:!0}),"mc"===g&&i.a.createElement(B,{path:ye,question:g}),"essay"===g&&i.a.createElement(C,{path:ye,question:g}),"speaking"===g&&i.a.createElement(H,{path:ye,question:g}),"fillInBlank"===g&&i.a.createElement(J.a,{path:ye,isModal:!0,form:"questionForm",question:g}),i.a.createElement(se.a,null),i.a.createElement("div",{style:{display:"flex",marginTop:10}},i.a.createElement(u.a,{name:"difficulty",simple:!0,component:oe.a,options:he,textLabel:x("questionForm.fields.difficulty"),defaultValue:"medium"}),i.a.createElement(u.a,{component:ie.a,name:"language",label:x("questionForm.fields.language"),simple:!0,textLabel:!0,language:!0,fullWidth:!0})),i.a.createElement(u.a,{name:"tags",label:x("questionForm.fields.tags"),component:re,onTagChange:function(e){v("tags",e)},tagValues:(s||{}).tags||[]}),i.a.createElement(se.a,null),!L&&!Qe()&&i.a.createElement(F.a,{style:{textAlign:"center",marginBottom:"20px"},gutterBottom:!0,color:"error"},x("questionForm.errors.correctForm")),i.a.createElement(X.a,{isError:!(L||Qe()),clicked:function(){Qe()?U(!0):z(!1)}},x(t?"questionForm.buttons.updateQuestion":"questionForm.buttons.saveQuestion")),t&&i.a.createElement(Q.a,{fullWidth:!0,color:"secondary",onClick:function(){return b((s||{})._id,fe,m._id)}},x("questionForm.buttons.removeQuestion"))):null}));t.default=Object(s.b)((function(e){var t=e.common.configuration.instructorFileSizeLimit,n=Object(fe.a)(e.common.courses,e.common.selectedCourse);return{formValues:Object(d.a)("questionForm")(e),formErrors:Object(I.a)("questionForm")(e),token:e.authentication.token,selectedCourse:e.common.selectedCourse,course:n,questionType:e.instructorQuestion.creatingQuestionType,initialValues:Object(a.a)(Object(a.a)({},e.instructorQuestion.loadedQuestionFormData),{},{instructorFileSizeLimit:t}),loading:e.instructorQuestion.loading,loadedQuestion:e.instructorQuestion.loadedQuestionFormData,questions:e.instructorQuestion.questionBank}}),(function(e){return{changeField:function(t,n){e(Object(m.a)("questionForm",t,n))},touchField:function(t){e(Object(m.d)("questionForm",t))},submitQuestion:function(t,n,a,r,o,i){e(K.H(t,i,n,a,r,o))},deleteQuestion:function(t,n,a){e(K.W(t,n,a))},deleteImg:function(t,n){e(K.Q(t),n)},clearQuestionForm:function(){return e(K.q())},setQuestionForm:function(t,n,a){e(K.Zc(t,!!n,a))},fetchQuestionBank:function(t,n){return e(K.Pb(t,n))}}}))(ge)},823:function(e,t,n){"use strict";var a=n(19),r=n(0),o=n.n(r),i=n(31),s=n(741),c=n(243),u=Object(c.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},textField:{width:"100%",borderRadius:"1px",margin:"0 auto 5px"},textLabel:{margin:"0 3px 10px 3px"},marginTop:{marginTop:"5px"},darkBackground:{background:"#424242",color:"white"},lightBackground:{background:"white"}}}));t.a=Object(i.b)((function(e){return{isDarkTheme:e.common.isDarkTheme}}))((function(e){var t,n=e.input,i=e.label,c=(e.meta,e.options),l=void 0===c?{}:c,m=e.placeholder,d=e.textLabel,f=e.isDarkTheme,p=u();return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:[p.root,l.marginTop?p.marginTop:null].join(" ")},d?o.a.createElement("div",{className:p.textLabel},"".concat(i,":")):null,o.a.createElement(s.a,Object.assign({className:[p.textField,f?p.darkBackground:p.lightBackground].join(" "),autoComplete:"off"},n,(t={rows:l.rows,variant:l.variant,multiline:!0},Object(a.a)(t,"variant","outlined"),Object(a.a)(t,"placeholder",m),Object(a.a)(t,"InputProps",{readOnly:l.readOnly}),Object(a.a)(t,"disabled",l.disabled),t)))))}))},825:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return g}));var a=n(6),r=n.n(a),o=n(62),i=n(41),s=n(915),c=n.n(s),u=n(458),l=n(916),m=n.n(l),d=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,i){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("saving"),s=new c.a({bitRate:128}),(i||{}).lameEncoder&&(s=i),(t||{}).lameEncoder&&(s=t),console.log("is recorder: ",s),!s){e.next=9;break}return e.next=8,s.stop().getMp3().then((function(e){var t=Object(o.a)(e,2),r=t[0],i=t[1];return{blob:URL.createObjectURL(i),file:new File(r,n?"".concat(a,"-[").concat(n,"]recording.mp3"):"".concat(a,"-recording.mp3"),{type:i.type,lastModified:Date.now()}),index:a}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),f=function(e,t,n,a,r){if(e){e.preventDefault();var o=d(null,t,n,r);return clearTimeout(a),o}},p=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,o,i){var s,l,m,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=new c.a({bitRate:128}),t){e.next=3;break}return e.abrupt("return");case 3:return t.preventDefault(),e.prev=4,e.next=7,s.start();case 7:return l=u.store.getState(),m=l.common.configuration.voiceRecordTimeLimit||60,f=setTimeout((function(){var e=d(s,n,a);i(e)}),1e3*m),e.abrupt("return",{recordingTimeout:f,isRecording:!0,recorder:s,index:a});case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",{isRecording:!1});case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),b=function(e){var t=document.getElementById(e);t&&t.play()},g=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 3:a=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("e: ",e.t0);case 9:return o=m()(a,{type:"video",mimeType:"video/webm;codecs=h264",canvas:{width:640,height:480}}),t({recorder:o,stream:a}),o.startRecording(),s=function(e){return new Promise((function(t){return setTimeout(t,e)}))},6e4,e.next=16,s(6e4);case 16:o.stopRecording(Object(i.a)(r.a.mark((function e(){var i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=o.getBlob(),s=new File([i],"video-recording.webm",{type:"video/webm"}),n(s),t({recorder:null,stream:null}),a.stop();case 5:case"end":return e.stop()}}),e)}))));case 17:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},843:function(e,t,n){"use strict";var a=n(62),r=n(0),o=n.n(r),i=n(31),s=n(753),c=n(447),u=n(448),l=n(446),m=n(243),d=Object(m.a)((function(e){return{formControl:{minWidth:80,width:"100%",marginBottom:"20px"},textLabel:{margin:"0 3px 10px 3px"},SelectField:{boxSizing:"border-box",border:"1px solid #C2C2C2",borderRadius:"3px",padding:"7px",outline:"none",margin:"0 3px 0 0",cursor:"pointer"},SelectFieldDark:{background:"transparent",color:"white"}}}));t.a=Object(i.b)((function(e){return{isDarkTheme:e.common.isDarkTheme}}))((function(e){var t=e.input,n=e.meta,r=void 0===n?{}:n,i=e.options,m=e.label,f=e.fullWidth,p=e.simple,b=e.textLabel,g=e.error,v=e.disabled,w=e.isDarkTheme,k=d(),F=i.map((function(e){return o.a.createElement("option",{style:w?{background:"#424242",color:"white"}:{},key:e.primaryText,value:e.value},e.primaryText)})),h=o.a.useRef(null),Q=o.a.useState(0),E=Object(a.a)(Q,2),y=E[0],O=E[1];o.a.useEffect((function(){O((h.current||200).offsetWidth)}),[]);var _=o.a.createElement(l.a,{variant:"outlined",className:k.formControl},o.a.createElement(c.a,{ref:h},m),o.a.createElement(s.a,Object.assign({disabled:v,native:!0,renderValue:function(){return t.value},labelWidth:y,className:k.cssOutlinedInput},t),F),o.a.createElement(u.a,null,(r.error||g)&&r.touched?r.error||g:""));return p&&(_=o.a.createElement("div",null,b&&o.a.createElement("div",{className:k.textLabel},"".concat(b)),o.a.createElement("select",Object.assign({value:b?"":m,className:[k.SelectField,w?k.SelectFieldDark:""].join(" "),style:f?{width:"95%"}:null},t),!b&&o.a.createElement("option",{style:w?{background:"#424242",color:"white"}:{},hidden:!0,key:-1,value:m},m),F),r.error&&r.touched&&o.a.createElement("span",{style:{color:"#E91313",fontSize:"0.7em",display:"block"}},r.error))),_}))},851:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return v}));var a=n(0),r=n.n(a),o=n(245),i=n(863),s=n.n(i),c=n(864),u=n.n(c),l=n(852),m=n.n(l),d=n(39),f=n(107),p=n(428),b=function(e){var t=e.onPreview,n=e.audioSource,a=e.id,i=e.previewType,s=e.previewText,c=e.disabled,u=e.fullWidth,l=Object(p.a)().t;return r.a.createElement(d.a,null,"button"===i?r.a.createElement(d.a,null,r.a.createElement("audio",{id:a,src:n}),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(o.a,{fullWidth:u,onClick:t,color:"primary",disabled:!n||""===n||c},s||l("audioRecorder.buttons.preview")))):r.a.createElement("div",{className:m.a.AudioAlignment},r.a.createElement("audio",{id:a,src:n}),r.a.createElement("span",{className:m.a.Pointer,onClick:t},r.a.createElement("i",{className:"fa fa-volume-down fa-2x ".concat(n?m.a.greenIcon:m.a.redIcon)}))))},g=function(e){var t=e.onClear,n=e.clearDisabled,a=Object(p.a)().t;return r.a.createElement("div",{className:m.a.flexPositioningEven},r.a.createElement(o.a,{color:"secondary",onClick:t,disabled:n},a("audioRecorder.buttons.clearAudio")))},v=function(e){var t=e.onStart,n=e.onStop,a=e.onPreview,i=e.recordDisabled,c=e.audioSource,l=e.id,v=e.meta,w=void 0===v?{}:v,k=e.error,F=e.onClear,h=e.clearDisabled,Q=e.recordButtonText,E=e.previewType,y=e.isMicAlert,O=Object(p.a)().t;return r.a.createElement(d.a,null,"button"===E&&r.a.createElement("div",{className:m.a.flexPositioningEven},r.a.createElement(o.a,{onClick:t,disabled:i||y,startIcon:r.a.createElement(s.a,null),color:"primary"},Q||O("audioRecorder.buttons.record"))),r.a.createElement("div",{style:{margin:"auto",display:"block",width:"60%"}},y&&r.a.createElement(f.a,{style:{textAlign:"center"},variant:"caption",color:"error"},O("audioRecorder.errors.micBlocked"))),r.a.createElement("div",{className:m.a.flexPositioningEven},"button"!==E&&r.a.createElement(o.a,{onClick:t,disabled:i||y,startIcon:r.a.createElement(s.a,null)},Q||O("audioRecorder.buttons.record")),r.a.createElement(o.a,{onClick:n,disabled:!i||y,startIcon:r.a.createElement(u.a,null)},O("audioRecorder.buttons.stop")),r.a.createElement(b,{onPreview:c?a:null,audioSource:c,id:l,previewType:E})),r.a.createElement("div",{className:m.a.flexPositioningEven},r.a.createElement("span",{className:m.a.errorText},(w.error||k)&&w.touched?w.error||k:""," ")),r.a.createElement("div",{className:m.a.flexPositioningEven},r.a.createElement(g,{onClear:F,clearDisabled:h})))}},852:function(e,t,n){e.exports={greenIcon:"AudioPlayer_greenIcon__knaj_",redIcon:"AudioPlayer_redIcon__VtpzN",flexPositioningEven:"AudioPlayer_flexPositioningEven__mBu5R",AudioAlignment:"AudioPlayer_AudioAlignment__1RjTd",Pointer:"AudioPlayer_Pointer__3IoHf",errorText:"AudioPlayer_errorText__1KeLa",advancedAudioPlayer:"AudioPlayer_advancedAudioPlayer__2hxRe","audio-player":"AudioPlayer_audio-player__q667P"}},853:function(e,t,n){e.exports={QuestionCustomizationContainer:"TestForm_QuestionCustomizationContainer__1B5i8",AudioAlignment:"TestForm_AudioAlignment__2xVul",TextField:"TestForm_TextField__DjIDS",TextEditor:"TestForm_TextEditor__1VHzk",PreviewContainer:"TestForm_PreviewContainer__1YEM_",CorrectAnswer:"TestForm_CorrectAnswer__25di7",button:"TestForm_button__1y61_",FullWidthImg:"TestForm_FullWidthImg__1kaKf",Inline:"TestForm_Inline__MsvQq",center:"TestForm_center__1TCAd",TestTypeRadio:"TestForm_TestTypeRadio__2Hne_",ListHorizontalDisplay:"TestForm_ListHorizontalDisplay__-8t6U",TestFormList:"TestForm_TestFormList__3NFzO",greenIcon:"TestForm_greenIcon__JFFFl",redIcon:"TestForm_redIcon__1BnKX",CorrectAnswerHighlight:"TestForm_CorrectAnswerHighlight__3vZHd",BlankPreview:"TestForm_BlankPreview__3XprO",InputField:"TestForm_InputField__2kwvJ",FullWidth:"TestForm_FullWidth__1FYZJ",InputFieldBottomMargin:"TestForm_InputFieldBottomMargin__1OX1E",SelectField:"TestForm_SelectField__1FMX6",Pointer:"TestForm_Pointer__36bgT",audioPlayerPreview:"TestForm_audioPlayerPreview__2N6du",errorText:"TestForm_errorText__1QR7G",Editor:"TestForm_Editor__3WwHp"}},917:function(e,t,n){"use strict";n.r(t);var a=n(30),r=n(62),o=n(0),i=n.n(o),s=n(31),c=n(27),u=n(39),l=n(843),m=n(248),d=n(803),f=n(745),p=n(885),b=n(806),g=n(827),v=n.n(g),w=n(107),k=n(245),F=n(259),h=n.n(F),Q=n(243),E=n(24),y=n(428),O=n(82),_=Object(Q.a)((function(e){return{root:{width:"100%",marginBottom:"20px"},heading:{fontSize:e.typography.pxToRem(15),flexShrink:0},headingModules:{fontSize:e.typography.pxToRem(18),flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,marginLeft:"10px"},flex:{display:"flex",marginTop:10,justifyContent:"space-between"},searchItem:{flexGrow:1,width:"98%"},createButton:{margin:"20px 0 20px 0"}}}));t.default=Object(s.b)((function(e){return{course:e.common.selectedCourse,questions:e.instructorQuestion.questionBank,questionEditing:e.instructorQuestion.questionEditing,editing:e.common.editing,creatingQuestionType:e.instructorQuestion.creatingQuestionType}}),(function(e){return{addQToTest:function(t,n){e(Object(c.a)("testForm",t,n))}}}))((function(e){var t=e.questions,n=e.selecting,o=e.questionType,s=e.indexToAdd,c=e.onBlockSync,g=e.addQToTest,F=e.course,Q=e.isTest,j=Object(O.g)(),q=Object(y.a)().t,x=_(),T=i.a.useState(""),A=Object(r.a)(T,2),B=A[0],C=A[1],I=i.a.useState(""),R=Object(r.a)(I,2),S=R[0],P=R[1],N=i.a.useState(""),L=Object(r.a)(N,2),z=L[0],D=L[1],M=[{value:"",primaryText:""},{value:"easy",primaryText:q("questions.easy")},{value:"medium",primaryText:q("questions.medium")},{value:"hard",primaryText:q("questions.hard")}],W=(t||[]).filter((function(e){return""!==e.language||null!==e.language})).reduce((function(e,t){return e.map((function(e){return e.language})).indexOf(t.language)<0&&e.push(t),e}),[]).map((function(e){return{value:e.language,primaryText:e.language}})),U=0,V=0,H=0,J=0;return i.a.createElement(u.a,null,!n&&i.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},i.a.createElement(k.a,{color:"primary",className:x.createButton,onClick:function(e){var t;e.stopPropagation(),"Multiple-choice questions"===o&&(t="mc"),"Essay questions"===o&&(t="essay"),"Speaking questions"===o&&(t="speaking"),"Fill-in-the-blanks questions"===o&&(t="fillInBlank"),j.push("/instructor-panel/course/".concat(F,"/").concat(Q?"tests":"assignments","/question-bank/new/").concat(t))}},q("questions.buttons.createQuestion"))),i.a.createElement(w.a,{variant:"subtitle1"},q("questions.filterQuestions")),i.a.createElement("div",{className:x.flex},i.a.createElement("div",{className:x.searchItem},i.a.createElement(l.a,{fullWidth:!0,simple:!0,textLabel:q("questions.difficulty"),label:"difficulty",options:M,input:{onChange:function(e){C(e.target.value)},value:B}})),i.a.createElement("div",{className:x.searchItem}," ",i.a.createElement(l.a,{fullWidth:!0,simple:!0,textLabel:q("questions.language"),label:"language",options:[{primaryText:"",value:""}].concat(Object(a.a)(W)),input:{onChange:function(e){D(e.target.value)},value:z}})),i.a.createElement("div",{className:x.searchItem}," ",i.a.createElement(m.a,{label:"Tag",width:"97.5%",simple:!0,textLabel:q("questions.tag"),input:{onChange:function(e){P(e.target.value)},value:S}}))),i.a.createElement(k.a,{fullWidth:!0,color:"secondary",size:"small",onClick:function(){C(""),P(""),D("")},style:{margin:"5px 0 0 0"}},q("questions.buttons.resetFilters")),(t||[]).filter((function(e){if(""===z||e.language===z)return e})).filter((function(e){if(""===B||e.difficulty===B)return e})).filter((function(e){if((e.tags||[]).find((function(e){if(e.toLowerCase().includes(S.toLowerCase()))return e}))||""===S)return e})).map((function(e,a){var r;if("mc"===e.type&&(U+=1),"essay"===e.type&&(V+=1),"speaking"===e.type&&(H+=1),"fillInBlank"===e.type&&(J+=1),"Multiple-choice questions"===o&&(r="mc"),"Essay questions"===o&&(r="essay"),"Speaking questions"===o&&(r="speaking"),"Fill-in-the-blanks questions"===o&&(r="fillInBlank"),e.type===r)return i.a.createElement(d.a,{key:e._id},i.a.createElement(f.a,{dense:!0,button:!0,onClick:function(a){var r;n?(a.stopPropagation(),function(e,t,n,a){if("mc"===e.type&&n("mcQuestions.".concat(t),Object(E.a)(Object(E.a)({},e.mcQuestion),{},{marks:1})),"essay"===e.type&&n("essayQuestions.".concat(t),Object(E.a)(Object(E.a)({},e.essayQuestion),{},{marks:1})),"speaking"===e.type){var r={questionRecordedBlob:(e.speakingQuestion||{}).audioQuestion&&""!==(e.speakingQuestion||{}).audioQuestion?(e.speakingQuestion||{}).audioQuestion:"",recordedBlob:(e.speakingQuestion||{}).audio&&""!==(e.speakingQuestion||{}).audio?(e.speakingQuestion||{}).audio:"",question:(e.speakingQuestion||{}).question,audioAnswer:!!(e.speakingQuestion||{}).audio,audioQuestion:!!(e.speakingQuestion||{}).audioQuestion,audioFile:(e.speakingQuestion||{}).audio,audioFileQuestion:(e.speakingQuestion||{}).audioQuestion,marks:1};n("speakingQuestions.".concat(t),r)}"fillInBlank"===e.type&&(n("fillBlankQuestions",function(e){var t=(e.fillBlankQuestions||{}).blanks||[],n=t.map((function(e,t){var n=e.audio&&""!==e.audio,a=(e.incorrectAnswers||[]).filter((function(e){return e})).reduce((function(e,t,n){var a;return 0===n&&(a="One"),1===n&&(a="Two"),2===n&&(a="Three"),e["incorrectAnswer".concat(a)]=t,e}),{});return{answer:e.correctAnswer,selectableAnswer:e.selectableAnswer,answerOptions:a,marks:1,audio:n,browserAudioFile:n?e.audio:"",audioFile:n?e.audio:null}}));return{question:(e.fillBlankQuestions||{}).question,answers:n,correctAnswers:t.map((function(e){return e.correctAnswer}))}}(e)),a())}((r=e._id,(t||[]).find((function(e){return r===e._id}))),s,(function(e,t){g(e,t)}),c)):j.push("/instructor-panel/course/".concat(F,"/").concat(Q?"tests":"assignments","/question-bank/edit/").concat(e._id))}},n?i.a.createElement(p.a,null,i.a.createElement(h.a,null)):i.a.createElement(p.a,null,i.a.createElement(v.a,null)),"mc"===e.type&&i.a.createElement(b.a,{primary:U+" "+((e.mcQuestion||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."}),"essay"===e.type&&i.a.createElement(b.a,{primary:V+" "+((e.essayQuestion||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."}),"speaking"===e.type&&i.a.createElement(b.a,{primary:(H+" "+(e.speakingQuestion||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."}),"fillInBlank"===e.type&&i.a.createElement(b.a,{primary:(J+" "+(e.fillBlankQuestions||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."})))})))}))},927:function(e,t,n){"use strict";var a=n(30),r=n(130),o=n(131),i=n(147),s=n(148),c=n(0),u=n.n(c),l=n(344),m=n(13),d=n(996),f=n(739),p=n(446),b=n(448),g=n(816),v=n(107),w=(n(39),function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).field=function(t){var n=t.input,r=t.meta,o=t.options,i=t.classes,s=t.column,c=t.error,l=(n.name,n.onChange),m=n.value,w=o.map((function(t,n){var r=t.label,o=t.value,i=t.name,s=m.includes(o);return u.a.createElement("div",{key:r+n,style:{display:"flex",alignItems:"center"}},e.props.numbered&&u.a.createElement(v.a,{style:{marginRight:10},variant:"subtitle1"},n+1),u.a.createElement(f.a,{key:"checkbox-".concat(n),control:u.a.createElement(g.a,{name:"".concat(i,"[").concat(n,"]"),value:o,checked:s,onChange:function(e){var t=Object(a.a)(m);return e.target.checked?t.push(o):t.splice(t.indexOf(o),1),l(t)}}),label:r}))}));return u.a.createElement(p.a,{component:"fieldset"},u.a.createElement(v.a,{variant:"h6"},e.props.title),u.a.createElement(d.a,{row:!s,className:i.Margin},w),u.a.createElement(b.a,null,(r.error||c)&&r.touched?c||r.error:""))},e}return Object(o.a)(n,[{key:"render",value:function(){return u.a.createElement(l.a,Object.assign({name:"checkbox"},this.props,{type:"checkbox",component:this.field}))}}]),n}(c.Component));t.a=Object(m.a)((function(){return{MuiFormLabel:{fontSize:"1.2em"},Margin:{marginBottom:"15px"}}}))(w)},940:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(852),i=n.n(o);t.a=function(e){var t=e.source,n=e.id;return r.a.createElement("td",{dangerouslySetInnerHTML:{__html:'\n        <audio id="'.concat(n,'" src="').concat(t,'">\n        </audio>\n        <span class="').concat(i.a.Pointer,'" onClick="(function(){\n        const audio = document.getElementById(\'').concat(n,'\');\n        audio.play()\n        return false;\n        })();return false;" >\n        <i class="fa fa-volume-down"></i>\n        </span>\n        ')}})}},966:function(e,t){}}]);
(this["webpackJsonpe-learn"]=this["webpackJsonpe-learn"]||[]).push([[48],{1332:function(n,t,e){"use strict";e.r(t);var o=e(0),r=e.n(o),u=e(31),c=e(4),i=e(39),s=e(113),a=e.n(s),f=e(149),d=e(82);t.default=Object(u.b)((function(n){return{token:n.authentication.token,userId:n.authentication.userId,notification:n.common.notification,selectedCourse:n.common.selectedCourse,courses:n.common.courses,tab:n.common.tab,initialPath:n.authentication.initialPath,loading:n.authentication.loading||n.instructorCourse.loading||n.common.loading,instructorLoggedIn:n.authentication.instructorLoggedIn}}),(function(n){return{fetchUser:function(t){return n(c.ec(t))},fetchInstructors:function(t){return n(c.Db(t))},fetchAllStudents:function(t,e){return n(c.ob(t,e))},fetchStudents:function(t,e){return n(c.Sb(t,e))},fetchConfig:function(t){return n(c.rb(t))},fetchCourses:function(t,e){return n(c.xb(t,e))},fetchNotifications:function(t,e){n(c.Mb(t,e))},logout:function(t){n(c.qc(t))}}}))((function(n){var t=n.loading,e=n.token,u=n.fetchUser,c=n.fetchAllStudents,s=n.fetchStudents,l=n.fetchInstructors,p=n.fetchNotifications,h=n.fetchCourses,g=n.fetchConfig,m=n.selectedCourse,S=n.logout,b=Object(d.g)();return Object(o.useEffect)((function(){var n=localStorage.getItem("token"),t=localStorage.getItem("userId");if(n){var e=a()("https://www.boukacademy.com/",{query:{token:n}}),o=function(){e.emit("loggedOut",{user:t})};return window.addEventListener("beforeunload",o),e.open(),e.on("newAccount",(function(t){c(n,"noSpinner"),l(n,"noSpinner"),p(n,"noSpinner")})),e.on("updateCourses",(function(t){"instructor"!==t.userType&&"all"!==t.userType||h(n,"noSpinner"),p(n)})),e.on("updateStudents",(function(e){"instructor"!==e.userType&&"all"!==e.userType||e.userId!==t&&e.courseId!==m||(m&&s(m,n,"noSpinner"),h(n,"noSpinner")),e.userId===t&&e.fetchNotifications&&p(n,"noSpinner")})),e.on("activateAccount",(function(e){e.userId===t&&(u(n,"noSpinner"),g(n,"noSpinner"),p(n,"noSpinner"),h(n,"noSpinner"),l(n,"noSpinner"))})),e.on("suspendAccount",(function(n){n.userId===t&&S(b)})),e.emit("loggedIn",{user:t}),e.on("alert",(function(t){p(n,"noSpinner")})),function(){e.emit("loggedOut",{user:t}),window.removeEventListener("beforeunload",o),e.disconnect()}}}),[e]),Object(o.useEffect)((function(){if(e){var n=a()("https://www.boukacademy.com/",{query:{token:e}});return n.on("updateConfig",(function(n){"all"===n.userType&&g(e)})),function(){n.disconnect()}}}),[m,e]),r.a.createElement(i.a,null,r.a.createElement(f.a,{active:t,transparent:!0}))}))}}]);
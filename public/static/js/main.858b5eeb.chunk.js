(this["webpackJsonpe-learn"]=this["webpackJsonpe-learn"]||[]).push([[0],{1027:function(e,t){},1029:function(e,t){},1030:function(e,t){},1031:function(e,t){},1032:function(e,t){},106:function(e,t,n){e.exports={greenIcon:"AudioPlayer_greenIcon__knaj_",redIcon:"AudioPlayer_redIcon__VtpzN",flexPositioningEven:"AudioPlayer_flexPositioningEven__mBu5R",AudioAlignment:"AudioPlayer_AudioAlignment__1RjTd",Pointer:"AudioPlayer_Pointer__3IoHf",errorText:"AudioPlayer_errorText__1KeLa",advancedAudioPlayer:"AudioPlayer_advancedAudioPlayer__2hxRe","audio-player":"AudioPlayer_audio-player__q667P"}},1061:function(e,t,n){},1090:function(e,t){},1107:function(e,t,n){},1119:function(e,t,n){},1125:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return FS}));var a=n(0),r=n.n(a),o=n(53),s=n.n(o),i=n(118),c=n(8),l=n(56),u=n(670),d=(n(753),n(186)),m=n(665),p=n(1257),f=n(1218),g=n(19),b=n(17),h=n(28),E=n(27),v=function(e){return e.children},y=(n(754),function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return r.a.createElement(v,null,r.a.createElement("h1",null,"Admin Panel"))}}]),n}(a.Component)),T=y,S="LOGOUT",k="CLEAR_ALERT",w=function(e,t){return{type:"FETCH_TEST_RESULTS_START",payload:{token:e,spinner:t}}},O=function(e,t){return{type:"SUBMIT_TEST_SUCCESS",testClosed:e,message:t}},C=function(e){return{type:"SUBMIT_TEST_FAIL",message:e}},x=function(e){return{type:"MARK_SLIDE_AS_SEEN_FAIL",message:e}},A=function(e){return{type:"ENROLL_REQUEST_FAIL",message:e}},F=function(e,t,n){return{type:"ENROLL_COURSE_START",payload:{studentId:e,courseId:t,token:n}}},D=function(e){return{type:"ENROLL_COURSE_FAIL",message:e}},_=function(e,t,n,a,r){return{type:"ENROLL_DENY_START",payload:{student:e,course:t,token:n,reason:a,allowResubmission:r}}},I=function(e){return{type:"ENROLL_DENY_FAIL",message:e}},j=function(e){return{type:"DROP_COURSE_FAIL",message:e}},R=function(e){return{type:"SET_COURSE_FORM_PAGE",page:e}},N=function(e,t){return{type:"FETCH_COURSE_SUCCESS",formData:e,courseId:t}},L=function(e){return{type:"GRADE_COURSE_FAIL",message:e}},P=function(e){return{type:"UPDATE_COURSE_RESOURCES_FAIL",message:e}},B=function(e,t){return{type:"TOGGLE_COURSE_STATE_START",payload:{courseId:e,token:t}}},M=function(e,t,n,a,r,o){return{type:"CREATE_UPDATE_COURSE_START",payload:{formData:e,token:t,editing:n,courseId:a,changeStatus:r,filesToDelete:o}}},q=function(e){return{type:"CREATE_UPDATE_COURSE_SUCCESS",message:e}},U=function(e){return{type:"CREATE_UPDATE_COURSE_FAIL",message:e}},Q=function(e){return{type:"DELETE_COURSE_FAIL",message:e}},W=function(){return console.log("clear data in actions"),{type:"CLEAR_LOADED_INSTRUCTOR_DATA"}},H=function(e){return{type:"FETCH_INSTRUCTORS_START",payload:{token:e}}},z=function(e,t){return{type:"FETCH_LESSON_SUCCESS",formData:e,lessonId:t}},G=function(e){return{type:"CREATE_LESSON_FAIL",message:e}},V=function(e){return{type:"DELETE_LESSON_FAIL",message:e}},$=function(e){return{type:"SET_QUESTION_EDITING",question:e}},Y=function(e,t){return{type:"FETCH_QUESTION_BANK_START",payload:{courseId:e,token:t}}},J=function(e){return{type:"FETCH_QUESTION_BANK_SUCCESS",questions:e}},K=function(e){return{type:"CREATE_UPDATE_QUESTION_FAIL",message:e}},Z=function(e){return{type:"DELETE_QUESTION_FAIL",message:e}},X=function(e,t,n,a){return{type:"MODULES_CHANGE_START",payload:{formValues:e,token:t,editing:n,courseId:a}}},ee=function(e){return{type:"SET_INITIAL_GRADE_VALUES",gradeValues:e}},te=function(e){return{type:"CREATE_UPDATE_TEST_FAIL",message:e}},ne=function(e,t){return{type:"DELETE_TEST_START",payload:{testId:e,token:t}}},ae=function(e){return{type:"DELETE_TEST_FAIL",message:e}},re=function(e){return{type:"RESET_TEST_SUCCESS",message:e}},oe=function(e){return{type:"RESET_TEST_FAIL",message:e}},se=function(e){return{type:"GRADE_TEST_FAIL",message:e}},ie=function(e,t){return e&&e.preventDefault(),{type:"TOGGLE_FORM",form:t}},ce=function(e){return{type:"CREATE_ACCOUNT_FAIL",message:e}},le=function(e){return{type:"UPDATE_ACCOUNT_FAIL",message:e}},ue=function(e){return{type:"ACCOUNT_VERIFICATION_FAIL",message:e}},de=function(e){return{type:"RESEND_EMAIL_VERIFICATION_FAIL",message:e}},me=function(e){return{type:"FETCH_USER_START",payload:{token:e}}},pe=function(e){return{type:"FETCH_USER_SUCCESS",user:e}},fe=function(e){return{type:"FETCH_USER_FAIL",message:e}},ge=function(e){return{type:"AUTHENTICATION_SUCCESS",authData:e}},be=function(e){return{type:"AUTHENTICATION_FAIL",message:e}},he=function(e){return{type:"PASSWORD_RESET_LINK_FAIL",message:e}},Ee=function(e){return{type:"CHANGE_PASSWORD_FAIL",message:e}},ve=function(e){return{type:"SET_SIGNUP_FORM_PAGE",page:e}},ye=function(e){return{type:"REFRESH_TOKEN_START",payload:{token:e}}},Te=function(){return{type:S}},Se=function(e,t,n){return{type:"UPDATE_ACTIVITY_START",payload:{userId:e,token:t,activity:n}}},ke=function(e,t){return console.log("file urls: ",e),{type:"DELETE_FILES_START",payload:{fileUrls:e,token:t}}},we=function(e){return{type:"SET_CHAT_USER",user:e}},Oe=function(e){return{type:"FETCH_CONFIG_START",payload:{token:e}}},Ce=function(e){return{type:"UPDATE_CONFIG_SUCCESS",message:e}},xe=function(e,t){return{type:"SET_NOTIFICATION",notification:e,timeoutId:t}},Ae=function(e){return{type:"FETCH_NOTIFICATIONS_START",payload:{token:e}}},Fe=function(e){return{type:"FETCH_NOTIFICATIONS_SUCCESS",notifications:e}},De=function(e,t){return{type:"MARK_AS_SEEN_START",payload:{notificationId:e,token:t}}},_e=function(e,t,n){return{type:"FETCH_MODULES_START",payload:{token:t,courseId:e,spinner:n}}},Ie=function(e){return{type:"FETCH_MODULES_SUCCESS",modules:e}},je=function(e){return{type:"SET_TAB_LABELS",tabLabels:e}},Re=function(e){return{type:"SET_TAB",tab:e}},Ne=function(e,t){return{type:"OPEN_MODAL",modalDocument:e,modalType:t}},Le=function(){return{type:k}},Pe=function(e){return{type:"SET_SESSION_ALERT",alert:e}},Be=function(e){return{type:"SET_COURSE",course:e}},Me=function(e,t){return{type:"FETCH_COURSES_START",payload:{token:e,spinner:t}}},qe=function(e){return{type:"FETCH_COURSES_SUCCESS",courses:e}},Ue=function(e){return{type:"SET_COURSE_PANEL",panel:e}},Qe=function(e,t,n,a){return{type:"FETCH_STUDENTS_START",payload:{token:t,courseId:e,action:n,spinner:a}}},We=function(e){return{type:"FETCH_STUDENTS_SUCCESS",students:e}},He=function(e,t,n,a,r,o){return{type:"FETCH_TEST_START",payload:{testId:e,isStudent:t,token:n,testDataInProgress:a,studentResult:r,password:o}}},ze=function(e,t){return{type:"FETCH_TEST_SUCCESS",test:e,formData:t}},Ge=function(e){return{type:"FETCH_TEST_FAIL",message:e}},Ve=n(540),$e=n(10),Ye=n(1221),Je=n(1225),Ke=n(1226),Ze=n(1228),Xe=n(1229),et=n(165),tt=n(548),nt=n.n(tt),at=n(547),rt=n.n(at),ot=n(1223),st=n(1224),it=n(21),ct=n.n(it),lt=n(667),ut=Object(lt.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FF4136"}},overrides:{MuiSvgIcon:{colorPrimary:{color:"#4caf50"}},MuiGrid:{item:{minWidth:"270px !important",maxWidth:"350px !important"}},MuiCardHeader:{root:{display:"flex",padding:"5px",alignItems:"center"}},MuiButton:{root:{marginBottom:"10px",marginTop:"10px",backgroundColor:"white"},startIcon:{marginLeft:"0",marginRight:"0"}}}}),dt=function(e){return r.a.createElement(f.a,{theme:ut},e.children)},mt=n(1227),pt=n(1222),ft=n(544),gt=n.n(ft),bt=n(1129),ht=n(1259);function Et(e){var t=e.value,n=e.withLabel;return r.a.createElement(ht.a,{display:"flex",alignItems:"center"},r.a.createElement(ht.a,{width:"100%",mr:1},r.a.createElement(bt.a,{variant:"determinate",value:t})),n&&r.a.createElement(ht.a,{minWidth:35},r.a.createElement(et.a,{variant:"body2",color:"textSecondary"},"".concat(Math.round(t),"%"))))}var vt=Object(Ye.a)({root:{width:"100%"}});function yt(e){var t=e.progress,n=e.withoutLabel,a=vt();return r.a.createElement("div",{className:a.root},r.a.createElement(Et,{value:t,withLabel:!n}))}var Tt=function(e){var t=(e.lessons||[]).reduce((function(e,t){return e+t.lessonSlides.length}),0),n=(e.lessons||[]).reduce((function(e,t){return t.lessonSlides.filter((function(e){return e.seen})).length+e}),0),a=e.tests.length,r=e.tests.filter((function(e){return e.completed})).length+n,o=t+a;return isNaN(parseInt(r/o*100))?0:parseInt(r/o*100)},St=n(545),kt=Object($e.a)({switchBase:{color:"#64b5f6","&$checked":{color:"#2196f3"},"&$checked + $track":{backgroundColor:"#2196f3"}},colorSecondary:{"&$checked":{"&:hover":{backgroundColor:"#64b5f6"}}},checked:{},track:{}})(pt.a),wt=Object(Ye.a)((function(e){return{root:{flexGrow:1},courseTitle:{textAlign:"center",cursor:"pointer"},button:{marginBottom:"10px"},media:{height:0,paddingTop:"56.25%",cursor:"pointer"},gridContainer:{gridTemplateAreas:"Card Card"},gridItem:{gridArea:"Card"},smallFont:{fontSize:"0.8em"},redText:{color:"#F44336"}}})),Ot=Object(c.b)((function(e){return{course:e.common.selectedCourse,courses:e.common.courses,tab:e.common.tab,studentLoggedIn:e.authentication.studentLoggedIn,instructorLoggedIn:e.authentication.instructorLoggedIn,token:e.authentication.token,studentId:e.authentication.userId}}),(function(e){return{setTabLabels:function(t){return e(je(t))},setPanel:function(t){return e(Ue(t))},setTab:function(t){return e(Re(t))},editCourse:function(t,n){return e(function(e,t,n){return{type:"FETCH_COURSE_START",payload:{courseId:e,token:t,changeStatus:n}}}(t,n))},changeStatus:function(t,n){return e(B(t,n))},fetchQuestionBank:function(t,n){return e(Y(t,n))},fetchModules:function(t,n){return e(_e(t,n))},fetchStudents:function(t,n){return e(Qe(t,n))},onSelectCourse:function(t){e(Be(t)),e(Ue("modules"))},openModal:function(t,n){return e(Ne(t,n))}}}))((function(e){var t=e.studentLoggedIn,n=e.instructorLoggedIn,o=e.token,s=e.tab,i=e.courses,c=e.openModal,l=e.editCourse,u=e.changeStatus,m=e.onSelectCourse,p=e.fetchModules,f=e.fetchStudents,g=e.setTab,b=e.fetchQuestionBank,h=Object(St.a)().t,E=Object(d.g)(),y=function(e){var a=(i||[]).find((function(t){return t._id===e}))||{};m(a),p(e,o),f(e,o),g(0),E.push("/student-panel/course/".concat(e)),n&&(b(e,o),E.push("/instructor-panel/course/".concat(e))),t&&E.push("/student-panel/course/".concat(e))},T=wt(),S=(i||[]).filter((function(e){return e.enrolled})),k=(i||[]).filter((function(e){return e.completed})).map((function(e){return e._id}));if(0===(i||[]).length)return r.a.createElement(et.a,{align:"center"},h("courseCards.noCourses"));var w=(0===s?i||[]:S||[]).map((function(e,a){var s,i=e.prerequisites.findIndex((function(e){if(!k.includes(e._id))return e}));if(t){var d=parseInt(e.enrollmentStartDate),m=parseInt(e.enrollmentEndDate),p=Date.now()>d&&Date.now()<m;s=r.a.createElement(v,null,(i>-1&&!e.enrolled||e.enrolled||e.enrollmentRequested)&&r.a.createElement(ot.a,{size:"small",variant:"outlined",color:"primary",type:"button",title:"Course syllabus",onClick:function(){return c(e,"syllabus")},fullWidth:!0},h("courseCards.buttons.syllabus")),!e.enrolled&&!e.accessDenied&&!e.enrollmentRequested&&!(i>-1)&&(e.studentCapacity>e.numberOfStudents&&e.studentCapacity||!e.studentCapacity)&&r.a.createElement(ot.a,{size:"small",variant:"outlined",color:"primary",type:"button",title:"Enroll in Course",onClick:function(){return c(e,"enrollRequest")},fullWidth:!0,disabled:!e.courseActive||!p&&!!d&&!!m||i>-1},h("courseCards.buttons.enroll")),e.enrolled&&r.a.createElement(v,null,r.a.createElement(ot.a,{size:"small",variant:"outlined",color:"secondary",type:"button",title:"Drop Course",fullWidth:!0,onClick:function(){return c(e,"dropConfirmation")},disabled:!e.courseActive},h("courseCards.buttons.drop"))),e.enrollmentRequested&&r.a.createElement(et.a,{style:{textAlign:"center"},paragraph:!0,color:"error",variant:"caption"},h("courseCards.enrollmentRequested")),i>-1&&!e.enrolled&&r.a.createElement(et.a,{paragraph:!0,color:"error",variant:"caption"},h("courseCards.completePrereqs")))}return n&&(s=r.a.createElement(v,null,r.a.createElement(ot.a,{size:"small",className:T.button,variant:"outlined",color:"primary",type:"button",title:"Edit Course",onClick:function(){l(e._id,o),g(1)},fullWidth:!0},h("courseCards.buttons.edit")),r.a.createElement(ot.a,{size:"small",className:T.button,variant:"outlined",color:"secondary",type:"button",title:"Delete Course",onClick:function(){return c(e,"deleteCourse")},fullWidth:!0},h("courseCards.buttons.delete")))),r.a.createElement(st.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:e._id},r.a.createElement(Je.a,null,r.a.createElement(Ke.a,{action:t?r.a.createElement(v,null,e.courseActive?r.a.createElement(rt.a,{style:{margin:"5px"},color:"primary"}):r.a.createElement(nt.a,{style:{margin:"5px"},color:"error"})):r.a.createElement(mt.a,{checked:e.courseActive,onChange:function(){u(e._id,o)},control:r.a.createElement(kt,null),label:e.courseActive?r.a.createElement(et.a,{variant:"body1"}," ",h("courseCards.fields.courseActive")):r.a.createElement(et.a,{variant:"body1",className:T.redText},h("courseCards.fields.courseInactive"))}),subheader:t&&r.a.createElement(v,null,e.courseActive?r.a.createElement(et.a,{variant:"body1"}," ",h("courseCards.fields.courseActive")):r.a.createElement(et.a,{variant:"body1",className:T.redText},h("courseCards.fields.courseInactive")))}),r.a.createElement(Ze.a,{style:e.enrolled&&e.courseActive||!t?null:{opacity:.2,cursor:"auto"},onClick:function(){(e.enrolled&&e.courseActive||!t)&&y(e._id)},className:T.media,image:e.courseImage?e.courseImage:gt.a,title:"Course Image"}),r.a.createElement(Xe.a,null,r.a.createElement("h2",{style:e.enrolled&&e.courseActive||!t?null:{opacity:.2,cursor:"auto"},onClick:function(){(e.enrolled&&e.courseActive||!t)&&y(e._id)},className:T.courseTitle},e.courseName),e.enrolled&&r.a.createElement(yt,{progress:Tt(e)}),t&&r.a.createElement(et.a,{paragraph:!0,variant:"caption"},h("courseCards.instructor")+":"," ".concat(e.courseInstructor.firstName," ").concat(e.courseInstructor.lastName)),e.courseActive&&t?r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"caption"},h("courseCards.studentsEnrolled")+":"," ".concat(e.numberOfStudents," ").concat(e.studentCapacity?"/ "+e.studentCapacity:"")),e.enrollmentStartDate&&r.a.createElement(et.a,{paragraph:!0,variant:"caption"},h("courseCards.enrollmentStart")+":"," ".concat(ct()(parseInt(e.enrollmentStartDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")," ")),e.enrollmentEndDate&&r.a.createElement(et.a,{paragraph:!0,variant:"caption"},h("courseCards.enrollmentDeadline")+":"," ".concat(ct()(parseInt(e.enrollmentEndDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")," "))):t&&r.a.createElement(et.a,{paragraph:!0,color:"error",variant:"caption"},h("courseCards.courseNotActivated")),e.accessDenied&&r.a.createElement(et.a,{paragraph:!0,color:"error",variant:"caption"},h("courseCards.deniedRequest")),n&&r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"caption"},h("courseCards.studentsEnrolled")+":"," ".concat(e.numberOfStudents," ").concat(e.studentCapacity?"/ "+e.studentCapacity:""))),s)))}));return r.a.createElement(dt,null,r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:T.root},r.a.createElement(st.a,{container:!0,justify:"space-around",spacing:3},w))))})),Ct=n(1),xt=n.n(Ct),At=n(12),Ft=n(542),Dt=n(9),_t=n(537),It=n(412),jt=n(549),Rt=n(45),Nt=n(46),Lt=n(550),Pt=n(551),Bt=n(552),Mt=n(553),qt=n(554),Ut=n(555),Qt=n(556),Wt=n(557),Ht=n(558),zt=n(559),Gt=n(560),Vt=n(561),$t=n(562),Yt=n(563),Jt=n(564),Kt=n(565),Zt=n(566),Xt=n(567),en=n(568),tn=n(569),nn=n(570),an=n(571),rn=n(572),on=n(573),sn=n(574),cn=n(575),ln=n(576),un=n(577),dn=n(578),mn=n(579),pn=n(580),fn=n(581),gn=n(582),bn=n(583),hn=n(584),En=n(585),vn=n(586),yn=n(587),Tn=n(588),Sn=n(589),kn=n(590),wn=n(591),On=n(592),Cn=n(593),xn=n(594),An=n(595),Fn=n(596),Dn=n(597),_n=n(598),In=n(599),jn=n(600),Rn=n(601),Nn=n(602),Ln=n(603),Pn=n(604),Bn=n(605),Mn=n(606),qn=n(607),Un=n(608),Qn=n(609),Wn=n(610),Hn=n(611),zn=n(612),Gn=n(613),Vn=n(614),$n=n(615),Yn=n(616),Jn=n(617),Kn=n(618),Zn=n(619),Xn=n(620),ea=n(621);Rt.es.testInfo=Rn.es,Rt.es.testMaterials=Ln.es,Rt.es.pdf=In.es,Rt.es.modal=Dn.es,Rt.es.questions=wn.es,Rt.es.resources=An.es,Rt.es.courseCards=Sn.es,Rt.es.syllabus=Hn.es,Rt.es.confirmations=Gn.es,Rt.es.gradeBook=Zn.es,Rt.es.students=qn.es,Rt.es.studentSummary=ea.es,Rt.es.gradeWork=Bn.es,Rt.es.progressReport=yn.es,Rt.es.modalHeaders=Qn.es,Rt.es.audioRecorder=sn.es,Rt.es.fileInput=un.es,Rt.es.layout=Lt.es,Rt.es.lessons=Jn.es,Rt.es.tests=$n.es,Rt.es.account=Ht.es,Rt.es.config=Cn.es,Rt.es.auth=Qt.es,Rt.es.courseForm=Gt.es,Rt.es.testForm=$t.es,Rt.es.questionForm=Jt.es,Rt.es.lessonForm=en.es,Rt.es.gradeTestForm=Zt.es,Rt.es.testReview=rn.es,Rt.es.testSession=an.es,Rt.es.instructorModules=Bt.es,Rt.es.studentModules=qt.es,Rt.es.chat=En.es,Rt.es.alerts=bn.es,Rt.es.notifications=mn.es,Rt.es.calendar=fn.es,Nt.en.testInfo=jn.en,Nt.en.testMaterials=Nn.en,Nt.en.pdf=_n.en,Nt.en.modal=Fn.en,Nt.en.questions=kn.en,Nt.en.resources=xn.en,Nt.en.courseCards=Tn.en,Nt.en.syllabus=Wn.en,Nt.en.confirmations=zn.en,Nt.en.gradeBook=Kn.en,Nt.en.students=Mn.en,Nt.en.studentSummary=Xn.en,Nt.en.gradeWork=Pn.en,Nt.en.progressReport=vn.en,Nt.en.modalHeaders=Un.en,Nt.en.audioRecorder=cn.en,Nt.en.fileInput=ln.en,Nt.en.layout=Pt.en,Nt.en.lessons=Yn.en,Nt.en.tests=Vn.en,Nt.en.account=zt.en,Nt.en.config=On.en,Nt.en.auth=Wt.en,Nt.en.courseForm=Vt.en,Nt.en.testForm=Yt.en,Nt.en.questionForm=Kt.en,Nt.en.lessonForm=tn.en,Nt.en.gradeTestForm=Xt.en,Nt.en.testReview=on.en,Nt.en.testSession=nn.en,Nt.en.instructorModules=Mt.en,Nt.en.studentModules=Ut.en,Nt.en.chat=hn.en,Nt.en.alerts=gn.en,Nt.en.notifications=dn.en,Nt.en.calendar=pn.en;var ta={interpolation:{escapeValue:!1,load:"languageOnly"},debug:!0,resources:{es:{common:Rt.es},en:{common:Nt.en}},fallbackLng:"en",ns:["common"],defaultNS:"common",react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}};It.a.use(jt.a).init(ta);var na=It.a,aa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={pageOne:!1,pageTwo:!1,pageThree:!1,pageFour:!1,regularOfficeHours:{times:{Monday:{timeRange:null},Tuesday:{timeRange:null},Wednesday:{timeRange:null},Thursday:{timeRange:null},Friday:{timeRange:null},Saturday:{timeRange:null},Sunday:{timeRange:null}}}};(e.instructorCourses||[]).forEach((function(n){n._id!==e._id&&(n.courseName||"").toLowerCase().trim()===(e.courseName||"").toLowerCase().trim()&&(t.courseName=na.t("courseForm.errors.noDuplicateNames"),t.pageOne=!0)})),e.courseName&&(e.courseName||"").trim()||(t.courseName=na.t("courseForm.errors.enterCourseName"),t.pageOne=!0),e.studentCapacity<=0&&""!==e.studentCapacity&&null!==e.studentCapacity&&(t.studentCapacity=na.t("courseForm.errors.studentCapacityGreaterThanZero"),t.pageOne=!0);var n=(e.instructorCourses||[]).find((function(t){return t._id===e._id}))||{},a=(n.studentsEnrollRequests||[]).filter((function(e){return e.approved})).length;e.studentCapacity&&(Number.isInteger(parseFloat(e.studentCapacity))||(t.studentCapacity=na.t("courseForm.errors.studentCapacityInteger"),t.pageOne=!0),a>e.studentCapacity&&a>=1&&(t.studentCapacity=na.t("courseForm.errors.studentCapacityGreaterThanOrEqualTo"),t.pageOne=!0));var r=new Date((e.enrollmentPeriod||[])[0]).getTime(),o=new Date((e.enrollmentPeriod||[])[1]).getTime(),s=new Date((e.courseTimeline||[])[0]).getTime(),i=new Date((e.courseTimeline||[])[1]).getTime(),c=new Date(e.courseDropDeadline).getTime(),l=new Date(e.createdAt).getTime();return!r||!e.editing||l<=r||(t.enrollmentPeriod=na.t("courseForm.errors.laterDate"),t.pageTwo=!0),!r||!o||o>r||(t.enrollmentPeriod=na.t("courseForm.errors.startDateNotBeforeEndDate"),t.pageTwo=!0),!s||!e.editing||l<=s||(t.courseTimeline=na.t("courseForm.errors.laterDate"),t.pageTwo=!0),!s||!i||i>s||(t.courseTimeline=na.t("courseForm.errors.startDateNotBeforeEndDate"),t.pageTwo=!0),!c||!e.editing||l<=c||(t.courseDropDeadline=na.t("courseForm.errors.laterDate"),t.pageTwo=!0),r&&s&&s<r&&(t.courseTimeline=na.t("courseForm.errors.courseStartDateNotBeforeEnrollmentStartDate"),t.pageTwo=!0),c&&r&&c<r&&(t.courseDropDeadline=na.t("courseForm.errors.courseDropDateNotBeforeEnrollmentStartDate"),t.pageTwo=!0),i&&c&&c>i&&(t.courseDropDeadline=na.t("courseForm.errors.courseDropDateNotAfterCourseEndDate"),t.pageTwo=!0),i&&r&&o&&(r>i||o>i)&&(t.enrollmentPeriod=na.t("courseForm.errors.enrollmentStartAndEndDateNotAfterCourseEndDate"),t.pageTwo=!0),Array.from(n.tests||[]).forEach((function(e){!(e.availableOnDate&&s&&i)||parseInt(e.availableOnDate)>=s&&parseInt(e.availableOnDate)<=i||(t.courseTimeline="".concat(na.t("courseForm.errors.testsHasAvailableOnDate")," ").concat(ct()(parseInt(e.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")).concat(na.t("courseForm.errors.fallsOutsideCourseDuration"),"."),t.pageTwo=!0),!(e.dueDate&&s&&i)||parseInt(e.dueDate)>=s&&parseInt(e.dueDate)<=i||(t.courseTimeline="".concat(na.t("courseForm.errors.testsHasDueDate")," ").concat(ct()(parseInt(e.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")).concat(na.t("courseForm.errors.fallsOutsideCourseDuration"),"."),t.pageTwo=!0),!e.gradeReleaseDate||!s||parseInt(e.gradeReleaseDate)>=s||(t.courseTimeline="".concat(na.t("courseForm.errors.testsHasGradeReleaseDate")," ").concat(ct()(parseInt(e.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")).concat(na.t("courseForm.errors.isBeforeStartDateOfCourse")),t.pageTwo=!0)})),Array.from(n.lessons||[]).forEach((function(e){!(e.availableOnDate&&s&&i)||parseInt(e.availableOnDate)>=s&&parseInt(e.availableOnDate)<=i||(t.courseTimeline="".concat(na.t("courseForm.errors.lessonsHasAvailableOnDate")," ").concat(ct()(parseInt(e.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")).concat(na.t("courseForm.errors.fallsOutsideCourseDuration"),"."),t.pageTwo=!0)})),t.irregularOfficeHours=(e.irregularOfficeHours||[]).map((function(e){if(!e)return t.pageThree=!0,{date:na.t("courseForm.errors.enterDateOrRemove")};var n,a,r=new Date(e.date).getTime();r<l&&(n=na.t("courseForm.errors.laterDate")),i&&s&&(r<i||(n=na.t("courseForm.errors.enterDateBeforeCourseEndDate")),r>s||(n=na.t("courseForm.errors.enterDateAfterCourseStartDate"))),e.date||(n=na.t("courseForm.errors.enterDateOrRemove"));var o=e.timeRange||[];return Date.parse("01/01/2011 ".concat(o[0]))===Date.parse("01/01/2011 ".concat(o[1]))&&(a=na.t("courseForm.errors.startTimeEndTimeCannotBeSame")),Date.parse("01/01/2011 ".concat(o[0]))>Date.parse("01/01/2011 ".concat(o[1]))&&(a=na.t("courseForm.errors.startTimeCannotBeAfterEndTime")),o[0]&&o[1]||(a=na.t("courseForm.errors.enterCompleteTimeInterval")),(a||n)&&(t.pageThree=!0),{date:n,timeRange:a}})),Array.from((e.regularOfficeHours||{}).days||[]).forEach((function(n){var a,r=(((e.regularOfficeHours||{}).times||{})[n]||{}).timeRange||"";Date.parse("01/01/2011 ".concat(r[0]))>Date.parse("01/01/2011 ".concat(r[1]))&&(a=na.t("courseForm.errors.startTimeCannotBeAfterEndTime")),Date.parse("01/01/2011 ".concat(r[0]))===Date.parse("01/01/2011 ".concat(r[1]))&&(a=na.t("courseForm.errors.startTimeEndTimeCannotBeSame")),r[0]&&r[1]||(a=na.t("courseForm.errors.enterCompleteTimeInterval")),(((e.regularOfficeHours||{}).times||{})[n]||{}).timeRange||(a="".concat(na.t("courseForm.errors.enterTimeIntervalOrUncheck")," ").concat("en"===localStorage.getItem("i18nextLng")?na.t("courseForm.days.".concat(n.toLowerCase())):na.t("courseForm.days.".concat(n.toLowerCase())).toLowerCase())),a&&(t.pageThree=!0),t.regularOfficeHours.times[n].timeRange=a})),t},ra=n(180),oa=n.n(ra),sa=n(179),ia=n.n(sa),ca=n(392),la=n(1130),ua=n(1133),da=n(1131),ma=n(1154),pa=Object(Ye.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},textField:{minWidth:"80px",width:"100%",marginBottom:"20px"},InputField:{boxSizing:"border-box",border:"1px solid #C2C2C2",margin:"0 3px",flexGrow:1,borderRadius:"3px",padding:"7px",outline:"none",width:"100%"},InputFieldBlueShadow:{boxSizing:"border-box",border:"1px solid #C2C2C2",margin:"0 3px",flexGrow:1,borderRadius:"3px",padding:"7px",outline:"none",width:"100%"},textLabel:{margin:"0 3px 10px 3px"},languageContainer:{paddingRight:"4px",width:"100%"},errorText:{color:"#e91313",fontFamily:"Helvetica",fontSize:"0.75rem"},errorTextContainer:{marginLeft:"13px"}}})),fa=function(e){var t=e.input,n=e.label,a=e.meta,o=void 0===a?{}:a,s=e.options,i=e.disabled,c=e.size,l=e.error,u=e.type,d=e.fullWidth,m=e.simple,p=e.blueBackground,f=e.textLabel,g=e.language,b=e.width,h=e.required,E=e.errorAbsolutePosition,v=pa(),y=r.a.createElement("div",{style:d?{width:"100%"}:{}},r.a.createElement(la.a,{className:v.textField,variant:"outlined"},r.a.createElement(da.a,{required:h,htmlFor:"component-outlined"},n),r.a.createElement(ma.a,Object.assign({error:(o.error||l)&&o.touched,type:u,size:c||"medium",label:n,disabled:i,autoComplete:"off"},t,s)),r.a.createElement(ua.a,null,(o.error||l)&&o.touched?l||o.error:"")));if(m){var T=d?"100%":b;y=r.a.createElement("div",{className:g?v.languageContainer:""},f&&r.a.createElement("div",{className:v.textLabel},"".concat(n)),r.a.createElement("input",Object.assign({onClick:function(e){e.stopPropagation()},type:u||"text",style:{width:T||"95%"},className:p?v.InputFieldBlueShadow:v.InputField,placeholder:f?"":n},t,{disabled:i})),r.a.createElement("div",{style:{position:E?"absolute":"relative"},className:v.errorTextContainer},r.a.createElement("span",{className:v.errorText}," ",(o.error||l)&&o.touched?l||o.error:"")))}return y},ga=n(199),ba=n.n(ga),ha=Object($e.a)({switchBase:{color:"#64b5f6","&$checked":{color:"#2196f3"},"&$checked + $track":{backgroundColor:"#2196f3"}},colorSecondary:{"&$checked":{"&:hover":{backgroundColor:"#64b5f6"}}},checked:{},track:{}})(pt.a);function Ea(e){var t=e.input,n=e.options,a=(t.name,t.onChange);return r.a.createElement("div",{className:n.label?ba.a.Margin:ba.a.MarginNoLabel},r.a.createElement("span",{className:ba.a.Label},n.optionOne),r.a.createElement("div",{className:ba.a.Inline},r.a.createElement(mt.a,{className:ba.a.noMargin,onChange:function(e){a(e.target.checked)},disabled:n.disabled,checked:!!t.value&&t.value,control:r.a.createElement(ha,null),label:n.label})),r.a.createElement("span",{className:ba.a.Label},n.optionTwo))}var va=n(1232),ya=n(1262);function Ta(e){var t=e.options,n=e.label,a=e.onOptionChange,o=e.selectedOption,s=(e.input,e.id),i=e.size;e.minWidth,e.width,e.margin;return r.a.createElement(ya.a,{style:{width:"100%",marginBottom:23},id:s,size:i||"medium",value:o||null,onChange:a,options:t,getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(va.a,Object.assign({},e,{label:n,variant:"outlined"}))}})}var Sa=Object(lt.a)({overrides:{PrivateNotchedOutline:{legendLabelled:{fontSize:"0.65em"}},MuiOutlinedInput:{root:{borderRadius:"4px",position:"relative","& $notchedOutline":{borderColor:"rgba(0, 0, 0, 0.23)"},"&:hover:not($disabled):not($focused):not($error) $notchedOutline":{borderColor:"#2196f3","@media (hover: none)":{borderColor:"rgba(0, 0, 0, 0.23)"}},"&$focused $notchedOutline":{borderColor:"#2196f3",borderWidth:2}}},MuiFormLabel:{root:{"&$focused":{color:"#2196f3"}}},MuiFormHelperText:{root:{color:"#e91313"}}}}),ka=function(e){return r.a.createElement(f.a,{theme:Sa},e.children)},wa=Object(Ye.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},textField:{width:"180px",marginBottom:"20px"},fullWidth:{minWidth:"180px",width:"100%",marginBottom:"20px"},InputField:{boxSizing:"border-box",border:"1px solid #C2C2C2",boxShadow:"1px 1px 4px #EBEBEB",borderRadius:"3px",padding:"7px",outline:"none"},position:{display:"block",marginRight:10},errorText:{color:"red",fontSize:"0.7em",display:"block"},minWidth:{minWidth:250}}}));function Oa(e){var t=e.options,n=e.readOnly,a=e.input,o=e.disabled,s=e.fullWidth,i=e.simple,c=e.width,l=e.meta,u=void 0===l?{}:l,d=e.error,m=(e.customMargin,e.borderColor),p=e.compact,f=e.minWidth;console.log("compact,",p);var g=wa(),b=r.a.createElement("div",{style:{marginBottom:20}},r.a.createElement(va.a,Object.assign({className:g.position},a,t,{type:"number",helperText:(u.error||d)&&u.touched?d||u.error:null,variant:"outlined"})));if(p&&(b=r.a.createElement(ka,null,r.a.createElement(va.a,Object.assign({style:{marginBottom:20},inputProps:{style:{fontSize:14,minWidth:t.minWidth||f}},InputLabelProps:{style:{fontSize:14}},className:[s,g.position].join(" ")},a,t,{type:"number",helperText:(u.error||d)&&u.touched?d||u.error:null,variant:"outlined"})))),i){var h={width:c,borderColor:m};b=r.a.createElement(v,null,r.a.createElement("span",{className:g.errorText},(u.error||d)&&u.touched?d||u.error:null," "),r.a.createElement("input",Object.assign({disabled:o,type:"number",className:g.InputField},a,{style:h}))),n&&(b=r.a.createElement("input",{type:"number",className:g.InputField,value:a.value,readOnly:!0,style:h}))}return b}var Ca=n(4),xa=n.n(Ca),Aa=n(35),Fa=n(317),Da=n(142),_a=n.n(Da),Ia=n(1234),ja=n(624),Ra=n.n(ja),Na=n(673),La=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).handleFileChange=function(){var e=Object(Aa.a)(xa.a.mark((function e(t,n){var r,o,s,i,c,l,u,d;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({changingDoc:!0}),console.log("handling file change: ",t.target.files[0]),t.target.files[0]){e.next=4;break}return e.abrupt("return");case 4:if(r=a.props,o=r.extensionsAllowed,s=r.input,i=s.onChange,s.value,c=t.target.files[0].name.toLowerCase().split(".").pop(),console.log("extension: ",c),o.includes(c)){e.next=9;break}return e.abrupt("return");case 9:if(l={maxSizeMB:2,maxWidthOrHeight:1920,useWebWorker:!0},u=t.target.files[0],!a.props.compressImage||"jpeg"!==c&&"jpg"!==c&&"jfif"!==c){e.next=16;break}return e.next=14,Object(Fa.a)(t.target.files[0],l);case 14:d=e.sent,u=new File([d],d.name);case 16:try{a.props.onChangeFile(URL.createObjectURL(u),n),console.log("changing file: ",u),i(u),t.target.value=null}catch(m){console.log("err: ",m)}case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.handleDocChange=function(e){a.setState({changingDoc:e})},a.componentDidUpdate=function(e,t,n){!0===t.changingDoc&&a.handleDocChange(!1)},a.state={changingDoc:!1},a}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,o=n.index,s=n.meta,i=void 0===s?{}:s,c=n.videoFile,l=n.loadedFile,u=n.onClear,d=n.source,m=n.children,p=n.uploadButtonText,f=n.circle,g=n.fullSizeImage,b=n.mimeTypesAllowed,h=n.input,E=n.preview,v=n.uploadButtonMinWidth,y=n.attachIcon,T=n.disabled,S=n.t;return e=h.value instanceof File?(h.value||{}).name.toLowerCase().split(".").pop():(h.value||"").toLowerCase().split(".").pop(),r.a.createElement(a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{disabled:T,accept:b,type:"file",onChange:function(e){console.log("e: ",e.target.files),e&&e.persist(),t.handleFileChange(e,o)},style:{display:"none"},id:"fileInput".concat(o)||!1})),l&&!1!==E&&("jpeg"===e||"jpg"===e||"jfif"===e)&&r.a.createElement("div",{style:{backgroundImage:'url("'.concat(l,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:g?"400px":"200px",borderRadius:f?"50%":"3px",maxWidth:g?"800px":f?"200px":"300px",width:"100%",margin:"auto"}}),r.a.createElement("label",{style:{textAlign:"center",display:"block"},htmlFor:"fileInput".concat(o)||!1},y?r.a.createElement(Na.a,{style:{opacity:T?.3:1},onClick:function(){},disabled:T,component:"span"},r.a.createElement(Ra.a,{style:{color:"white"}})):r.a.createElement(ot.a,{style:{minWidth:v},variant:"contained",color:"primary",component:"span"},p||S("fileInput.buttons.upload"))),r.a.createElement("div",null,l&&!1!==E&&!1===this.state.changingDoc&&("docx"===e||"doc"===e)&&r.a.createElement("div",{id:"doc[".concat(o,"]")},r.a.createElement(_a.a,{fileType:e,filePath:l}))),i.error&&i.touched&&r.a.createElement("span",{style:{color:"#E91313",fontSize:"0.7em",display:"block"}},i.error)),m,c&&r.a.createElement(ot.a,{type:"button",onClick:u,color:"secondary",disabled:!d},S("fileInput.buttons.clearVideo")))}}]),n}(a.Component),Pa=Object(Ia.a)("common")(La),Ba=n(80),Ma=n.n(Ba),qa=["English","French","Spanish","Russian","Arabic","Hindi","Italian","Mandarin","Bengali","Portuguese","Japanese","Vietnamese","German","Ukranian","Dutch","Czech","Polish","Indonesian","Thai","Romanian","Persian","Javanese","Turkish","Korean","Urdu","Punjabi","Tagalog","Amharic","Igbo","Somali","Bavarian","Kazakh","Hungarian","Zulu","Rundi","Greek","Swedish","Creole","Nepali","Croatian","Uzbek"],Ua=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSelectedLanguage=function(t,n){e.props.changeField("language",n)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.formValues,n=void 0===t?{}:t,a=e.changeField,o=e.isImage,s=e.clearImage,i=e.editing,c=e.t,l={label:c("courseForm.fields.courseActive"),checked:!1};return r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"h5",gutterBottom:!0},c("courseForm.courseCustomization")),r.a.createElement(ca.a,{name:"courseActive",options:l,component:Ea}),r.a.createElement(ca.a,{name:"courseName",type:"text",component:fa,label:c("courseForm.fields.courseName")}),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"}},r.a.createElement(ca.a,{name:"studentCapacity",component:Oa,fullWidth:!0,compact:!0,options:{label:c("courseForm.fields.maxStudents"),size:"small"},customMargin:"0 5px 0 0"}),r.a.createElement(ca.a,{name:"language",component:Ta,id:"language-autocomplete",selectedOption:n.language,onOptionChange:this.handleSelectedLanguage,options:qa,label:c("courseForm.fields.taughtIn"),size:"small",minWidth:135})),r.a.createElement(et.a,{paragraph:!0,variant:"h5",gutterBottom:!0},c("courseForm.courseThumbnail")),r.a.createElement(ca.a,{name:"courseImage",onChangeFile:function(e){a("loadedCourseImage",e)},uploadButtonText:c("courseForm.fields.chooseImage"),uploadButtonMinWidth:200,compressImage:!0,editing:i,loadedFile:n.loadedCourseImage,component:Pa,imageFile:!0,type:"file",mimeTypesAllowed:"image/jpeg",extensionsAllowed:["jpeg","jpg","jfif"]}),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ot.a,{style:{minWidth:200},startIcon:r.a.createElement(Ma.a,null),disabled:!o,variant:"outlined",color:"secondary",type:"button",onClick:function(){return s()}},c("courseForm.buttons.clearImage"))))}}]),n}(a.Component),Qa=Object(_t.a)({form:"courseForm",validate:aa,destroyOnUnmount:!1})(Object(Ia.a)("common")(Ua)),Wa=Object(c.b)((function(e){return{editing:e.common.editing,formValues:Object(Ve.a)("courseForm")(e)}}),(function(e){return{changeField:function(t,n){e(Object(Dt.a)("courseForm",t,n))},clearImage:function(){e(Object(Dt.a)("courseForm","courseImage",null)),e(Object(Dt.a)("courseForm","loadedCourseImage",null))}}}))(Qa),Ha=n(72),za=n.n(Ha),Ga=(n(836),n(626)),Va=n.n(Ga),$a=n(627),Ya=n.n($a),Ja=n(628),Ka=n.n(Ja),Za=n(629),Xa=n.n(Za);var er=Object(c.b)((function(e){return{width:e.common.width}}))((function(e){var t,n=e.input,a=e.type,o=e.error,s=e.handleChange,i=e.options,c=e.fullWidth,l=e.meta,u=(e.noPaddingBottom,e.maxDate),d=e.account,m=e.width,p=i.disablePast,f=i.minDate,g=localStorage.getItem("i18nextLng");return"date"===a&&(t=r.a.createElement(Va.a,{format:"y/MM/dd",locale:g,className:[d?za.a.accountGeneral:za.a.general,za.a.noPaddingWrapper,c?za.a.fullWidth:"",m<360?za.a.smallWidth:""].join(" "),value:n.value,onChange:s,minDate:f?new Date(f):p?new Date:null,maxDate:u})),"dateTime"===a&&(t=r.a.createElement(Ya.a,{locale:g,format:"y/MM/dd h:mm a",className:[za.a.general,za.a.wrapper,m<360?za.a.smallWidth:"",c?za.a.fullWidth:""].join(" "),value:n.value,onChange:s,disableClock:!0,minDate:f?new Date(f):p?new Date:null})),"timeRange"===a&&(t=r.a.createElement(Ka.a,{locale:g,className:[za.a.general,za.a.timeRangeWrapper,c?za.a.fullWidth:"",m<360?za.a.smallWidth:""].join(" "),value:n.value,onChange:s,format:"h:mm a",disableClock:!0,minDate:f?new Date(f):p?new Date:null})),"dateTimeRange"===a&&(t=r.a.createElement(Xa.a,{locale:g,format:"y/MM/dd h:mm a",className:[za.a.general,za.a.wrapper,c?za.a.fullWidth:"",m<360?za.a.smallWidth:""].join(" "),value:n.value,onChange:s,disableClock:!0,minDate:f?new Date(f):p?new Date:null})),r.a.createElement(v,null,i.label&&r.a.createElement("span",{className:za.a.label},"".concat(i.label,":")),t,r.a.createElement("span",{className:za.a.errorText},(l.error||o)&&l.touched?l.error||o:""))})),tr=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props.t;return r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"h5",gutterBottom:!0},t("courseForm.importantDates")),r.a.createElement(ca.a,{name:"enrollmentPeriod",component:er,fullWidth:!0,options:{minDate:this.props.createdAt,disablePast:!0,label:t("courseForm.fields.enrollmentPeriod")},type:"dateTimeRange",handleChange:function(t){return e.props.changeDateTime(t,"enrollmentPeriod")}}),r.a.createElement(ca.a,{name:"courseTimeline",component:er,fullWidth:!0,options:{disablePast:!0,label:t("courseForm.fields.courseDuration"),minDate:this.props.createdAt},type:"dateTimeRange",handleChange:function(t){return e.props.changeDateTime(t,"courseTimeline")}}),r.a.createElement(ca.a,{name:"courseDropDeadline",component:er,fullWidth:!0,options:{disablePast:!0,label:t("courseForm.fields.deadlineToDrop"),minDate:this.props.createdAt},type:"dateTime",handleChange:function(t){return e.props.changeDateTime(t,"courseDropDeadline")}}))}}]),n}(a.Component),nr=Object(_t.a)({form:"courseForm",validate:aa,destroyOnUnmount:!1})(Object(Ia.a)("common")(tr)),ar=Object(c.b)(null,(function(e){return{changeDateTime:function(t,n){e(Object(Dt.a)("courseForm",n,t))}}}))(nr),rr=n(538),or=n(541),sr=n(121),ir=n.n(sr),cr=n(1235),lr=n(1236),ur=n(1153),dr=n(1268),mr=Object(lt.a)({overrides:{MuiFormControl:{root:{width:"100%"}},MuiOutlinedInput:{root:{position:"relative","& $notchedOutline":{borderColor:"rgba(0, 0, 0, 0.23)"},"&:hover:not($disabled):not($focused):not($error) $notchedOutline":{borderColor:"#2196f3","@media (hover: none)":{borderColor:"rgba(0, 0, 0, 0.23)"}},"&$focused $notchedOutline":{borderColor:"#2196f3",borderWidth:1.5}}},MuiFormLabel:{root:{"&$focused":{color:"#2196f3"}}},MuiCheckbox:{colorSecondary:{"&$checked":{color:"#2196f3","&:hover":{backgroundColor:"rgba(33,150,243,0.4)"}}}},MuiIconButton:{colorSecondary:{"&:hover":{backgroundColor:"rgba(33,150,243,0.4)"}}}}}),pr=function(e){return r.a.createElement(f.a,{theme:mr},e.children)},fr=Object(Ye.a)((function(e){return{root:{marginLeft:25,maxWidth:574},formControl:{margin:e.spacing(1),minWidth:220,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),gr={PaperProps:{style:{maxHeight:224,width:250}}};function br(e){var t=e.input,n=e.label,o=Object(St.a)("common"),s=o.t,i=(o.i18n,fr()),c=r.a.useRef(null),l=n,u=t.value;return r.a.createElement(pr,null,r.a.createElement(a.Fragment,null,r.a.createElement(la.a,{className:i.root,variant:"outlined"},r.a.createElement(da.a,{htmlFor:"select-multiple-chip",ref:c,shrink:n&&(!!l||void 0!==u)},n),r.a.createElement(ur.a,Object.assign({},t,{labelId:"demo-mutiple-checkbox-label",id:"demo-mutiple-checkbox",multiple:!0,ref:c,value:t.value||[],input:r.a.createElement(ma.a,{label:n,notched:!0}),renderValue:function(e){return console.log("selected: ",e),(e||[]).map((function(e){return s("courseForm.days.".concat(e.toLowerCase()))})).join(", ")},MenuProps:gr}),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((function(e){return r.a.createElement(cr.a,{key:e,value:e},r.a.createElement(dr.a,{checked:(t.value||[]).indexOf(e)>-1}),r.a.createElement(lr.a,{primary:s("courseForm.days.".concat(e.toLowerCase()))}))}))))))}var hr=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).renderRegularOfficeHours=function(t){t.fields;var n=t.meta,a=(n.error,n.submitFailed,e.props.t);return r.a.createElement("div",null,["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((function(t,n){if(((e.props.regularOfficeHours||{}).days||[]).includes(t))return r.a.createElement("div",{style:{padding:"5px",margin:"15px 0 0 25px",backgroundColor:"#f5f5f5",borderRadius:"4px"},key:"".concat(t,"[").concat(n,"]")},r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},a("courseForm.fields.weeklyOfficeHours.".concat(t.toLowerCase(),"OfficeHours"))),r.a.createElement(v,null,r.a.createElement(ca.a,{name:"regularOfficeHours.times.".concat(t,".timeRange"),type:"timeRange",component:er,handleChange:function(n){return e.props.changeDateTime(n,"regularOfficeHours.times.".concat(t,".timeRange"))},options:{label:a("courseForm.fields.timeRange")}})))})))},e.renderIrregularOfficeHours=function(t){var n=t.fields,a=t.meta,o=(a.error,a.submitFailed,e.props.t);return r.a.createElement("div",null,(n||[]).map((function(t,a){return r.a.createElement("div",{style:{padding:"5px",margin:"15px 0 0 25px",backgroundColor:"#f5f5f5",borderRadius:"4px"},key:t},r.a.createElement(ca.a,{name:"irregularOfficeHours.".concat(a,".date"),type:"date",component:er,handleChange:function(t){return e.props.changeDateTime(t,"irregularOfficeHours.".concat(a,".date"))},options:{label:o("courseForm.fields.date"),disablePast:!0,minDate:e.props.createdAt}}),r.a.createElement(ca.a,{name:"irregularOfficeHours.".concat(a,".timeRange"),type:"timeRange",component:er,handleChange:function(t){return e.props.changeDateTime(t,"irregularOfficeHours.".concat(a,".timeRange"))},options:{label:o("courseForm.fields.timeRange")}}),r.a.createElement(ot.a,{color:"secondary",fullWidth:!0,startIcon:r.a.createElement(Ma.a,null),onClick:function(e){e.preventDefault(),n.remove(a)},"aria-label":"delete"},o("courseForm.buttons.removeDate")))})),r.a.createElement(ot.a,{startIcon:r.a.createElement(ir.a,null),color:"primary",onClick:function(e){e.preventDefault(),n.push()},"aria-label":"delete",fullWidth:!0},o("courseForm.buttons.addDate")))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.t;return r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"h5",gutterBottom:!0,style:{marginTop:"40px"}},e("courseForm.weeklyOfficeHours")),r.a.createElement(ca.a,{name:"regularOfficeHours.days",label:e("courseForm.fields.daysOfWeek"),component:br}),r.a.createElement(rr.a,{name:"times",component:this.renderRegularOfficeHours}),r.a.createElement(et.a,{paragraph:!0,variant:"h5",style:{marginTop:"40px"},gutterBottom:!0},e("courseForm.specificDateOfficeHours")),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(rr.a,{name:"irregularOfficeHours",component:this.renderIrregularOfficeHours})))}}]),n}(a.Component),Er=Object(_t.a)({form:"courseForm",validate:aa,destroyOnUnmount:!1})(Object(Ia.a)("common")(hr)),vr=Object(c.b)((function(e){var t=Object(or.a)("courseForm");return{regularOfficeHours:t(e,"regularOfficeHours"),irregularOfficeHours:t(e,"irregularOfficeHours")}}),(function(e){return{changeDateTime:function(t,n){e(Object(Dt.a)("courseForm",n,t))}}}))(Er),yr=function(e,t){var n={toolbar:{viewportTopOffset:56,items:t?["highlight","bold","imageTextAlternative","numberedList","bulletedList","heading"]:["highlight","imageUpload","bold","imageTextAlternative","imageStyle:full","imageStyle:side","numberedList","bulletedList","heading"]},highlight:{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"}]}};return e.testPanelFormFillBlankSection&&e.fillInBlankTestFormTextEditorContent&&(n.maxWidth="50%",n.placeholder="Write some text..",n.highlight.options=[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"}],n.toolbar={viewportTopOffset:56,items:["highlight","undo","redo","imageUpload","imageTextAlternative","imageStyle:full","imageStyle:side","bold","italic","numberedList","bulletedList","heading"]}),!e.courseDetailSection&&e.instructorLoggedIn&&(n.placeholder="Write a syllabus so that students will know what to expect in the course..."),(e.lessonFormTextEditorContent||[])[e.index]&&(n.placeholder=""),e.testPanelFormEssaySection&&e.essayTestFormTextEditorContent&&e.essayTestFormTextEditorContent[e.index]&&(n.placeholder="Start writing a question..."),e.testPanelFormMcSection&&e.mcTestFormTextEditorContent&&e.mcTestFormTextEditorContent[e.index]&&(n.placeholder="Start writing a question..."),e.testPanelFormSpeakingSection&&e.speakingTestFormTextEditorContent&&e.speakingTestFormTextEditorContent[e.index]&&(n.placeholder="Start writing some text, use the yellow marker to highlight text that needs to be pronounced by the student"),n},Tr=n(630),Sr=n.n(Tr),kr=n(102),wr=n.n(kr),Or=n(395),Cr=function(e,t){return Object(At.a)(Object(At.a)({},e),t)},xr=n(330),Ar=n.n(xr),Fr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={mcQuestions:[],essayQuestions:[],speakingQuestions:[],fillBlankQuestions:{answers:[]},infoPageOneError:!1,infoPageTwoError:!1,infoPageThreeError:!1,infoPageFourError:!1,mcSectionPageError:!1,essayPageError:!1,speakingPageError:!1,fillblankPageError:!1,readingMaterial:{multipleChoice:{},essay:{},speaking:{},fillInTheBlanks:{},test:{}},audioMaterial:{multipleChoice:{},essay:{},speaking:{},fillInTheBlanks:{},test:{}}},n=function(e){return(e||[]).reduce((function(e,t,n,a){return a.indexOf(t)!==n&&e.indexOf(t)<0&&e.push(t),e}),[])};(e.testName||e.assignment)&&((e.testName||"").trim()||e.assignment)||(t.testName=na.t("testForm.errors.required"),t.infoPageOneError=!0),(e.tests||[]).forEach((function(n){e._id===n._id||e.assignment||(n.testName||"").toLowerCase().trim()!==(e.testName||"").toLowerCase().trim()||(t.testName=na.t("testForm.errors.noDuplicateTestNames"),t.infoPageOneError=!0)})),(e.assignments||[]).forEach((function(n){e._id!==n._id&&e.assignment&&(n.testName||"").toLowerCase().trim()===(e.assignmentName||"").toLowerCase().trim()&&(t.assignmentName=na.t("testForm.errors.noDuplicateAssignmentNames"))})),(!e.assignmentName&&e.assignment||!(e.assignmentName||"").trim()&&e.assignment)&&(t.assignmentName=na.t("testForm.errors.required"),t.infoPageOneError=!0),!(e.testWeight>1e3)&&e.testWeight>0||e.assignment||(t.testWeight=na.t("testForm.errors.mustBeBetweenZeroAndThousand"),t.infoPageOneError=!0),!e.passingGrade||!(e.passingGrade>100)&&e.passingGrade>=1||(t.passingGrade=na.t("testForm.errors.mustBeBetweenOneAndHundred"),t.infoPageOneError=!0),!e.passingGrade&&e.passingRequired&&(t.passingGrade=na.t("testForm.errors.specifyPassGrade"),t.infoPageOneError=!0),e.testWeight||e.assignment||(t.testWeight=na.t("testForm.errors.required"),t.infoPageOneError=!0),!(e.assignmentWeight>1e3)&&e.assignmentWeight>0||!e.assignment||(t.assignmentWeight=na.t("testForm.errors.mustBeBetweenZeroAndThousand"),t.infoPageOneError=!0),!e.assignmentWeight&&e.assignment&&(t.assignmentWeight=na.t("testForm.errors.required"),t.infoPageOneError=!0),!e.allowLateSubmission||e.latePenalty<100&&e.latePenalty>0||(t.latePenalty=na.t("testForm.errors.mustBeGreaterThanZeroAndLessThanHundred"),t.infoPageOneError=!0),e.allowLateSubmission&&!e.latePenalty&&(t.latePenalty=na.t("testForm.errors.required"),t.infoPageOneError=!0),e.allowLateSubmission&&(parseFloat(e.lateDaysAllowed)<=0||!Number.isInteger(parseFloat(e.lateDaysAllowed)))&&(t.lateDaysAllowed=na.t("testForm.errors.intGreaterThanZero"),t.infoPageOneError=!0),e.allowLateSubmission&&!e.lateDaysAllowed&&(t.lateDaysAllowed=na.t("testForm.errors.required"),t.infoPageOneError=!0),e.assignment||!e.timedTest||0!==parseFloat(e.testTime)&&Number.isInteger(parseFloat(e.testTime))||(t.testTime=na.t("testForm.errors.intGreaterThanZero"),t.infoPageOneError=!0),e.assignment||!e.timedTest||e.testTime||(t.testTime=na.t("testForm.errors.requiredOrDisableTimedTest"),t.infoPageOneError=!0),e.testType||e.assignment||(t.testType=na.t("testForm.errors.required"),t.infoPageOneError=!0);var a=(e.tests||[]).find((function(e){return"final"===e.testType}));a&&"final"===e.testType&&a._id!==e._id&&(t.testType=na.t("testForm.errors.onlyOneFinal"),t.infoPageOneError=!0),!(e.testSections||[]).includes("mc")||e.mcSectionWeight>0||(t.mcSectionWeight=na.t("testForm.errors.greaterThanZero"),t.infoPageTwoError=!0),(e.testSections||[]).includes("mc")&&!e.mcSectionWeight&&(t.mcSectionWeight=na.t("testForm.errors.required"),t.infoPageTwoError=!0),!(e.testSections||[]).includes("essay")||e.essaySectionWeight>0||(t.essaySectionWeight=na.t("testForm.errors.greaterThanZero"),t.infoPageTwoError=!0),(e.testSections||[]).includes("essay")&&!e.essaySectionWeight&&(t.essaySectionWeight=na.t("testForm.errors.required"),t.infoPageTwoError=!0),!(e.testSections||[]).includes("speaking")||e.speakingSectionWeight>0||(t.speakingSectionWeight=na.t("testForm.errors.greaterThanZero"),t.infoPageTwoError=!0),(e.testSections||[]).includes("speaking")&&!e.speakingSectionWeight&&(t.speakingSectionWeight=na.t("testForm.errors.required"),t.infoPageTwoError=!0),!(e.testSections||[]).includes("fillblanks")||e.fillBlankSectionWeight>0||(t.fillBlankSectionWeight=na.t("testForm.errors.greaterThanZero"),t.infoPageTwoError=!0),(e.testSections||[]).includes("fillblanks")&&!e.fillBlankSectionWeight&&(t.fillBlankSectionWeight=na.t("testForm.errors.required"),t.infoPageTwoError=!0);var r=[(e.testSections||[]).includes("mc")?parseFloat(e.mcSectionWeight):0,(e.testSections||[]).includes("essay")?parseFloat(e.essaySectionWeight):0,(e.testSections||[]).includes("speaking")?parseFloat(e.speakingSectionWeight):0,(e.testSections||[]).includes("fillblanks")?parseFloat(e.fillBlankSectionWeight):0].reduce((function(e,t){return e+t}),0);(r<99.99||r>100)&&(!e.testSections||(e.testSections||[]).length>0)&&(t.testSections=na.t("testForm.errors.addToHundred"),t.infoPageTwoError=!0),e.testSections&&0!==(e.testSections||[]).length||(t.testSections=na.t("testForm.errors.selectSections"),t.infoPageTwoError=!0),!e.dueDate||(e.editing||Date.now()<=new Date(e.dueDate).getTime())&&(!e.editing||new Date(e.createdAt).getTime()<=new Date(e.dueDate).getTime())||(t.dueDate=na.t("testForm.errors.laterDate"),t.infoPageThreeError=!0),!e.gradeReleaseDate||(e.editing||Date.now()<=new Date(e.gradeReleaseDate).getTime())&&(!e.editing||new Date(e.createdAt).getTime()<=new Date(e.gradeReleaseDate).getTime())||(t.gradeReleaseDate=na.t("testForm.errors.laterDate"),t.infoPageThreeError=!0),!e.availableOnDate||(e.editing||Date.now()<=new Date(e.availableOnDate).getTime())&&(!e.editing||new Date(e.createdAt).getTime()<=new Date(e.availableOnDate).getTime())||(t.availableOnDate=na.t("testForm.errors.laterDate"),t.infoPageThreeError=!0),e.allowLateSubmission&&!e.dueDate&&(t.dueDate=na.t("testForm.errors.disableLateSubmission"),t.infoPageThreeError=!0);var o=parseInt((e.course||{}).courseStartDate),s=parseInt((e.course||{}).courseEndDate),i=new Date(e.availableOnDate).getTime(),c=new Date(e.dueDate).getTime(),l=new Date(e.gradeReleaseDate).getTime();!(o&&s&&i)||i>o&&i<s||(t.availableOnDate=na.t("testForm.errors.availableOnDateInCourseDuration"),t.infoPageThreeError=!0),!(o&&s&&c)||c>o&&c<s||(t.dueDate=na.t("testForm.errors.dueDateInCourseDuration"),t.infoPageThreeError=!0),o&&s&&l&&!(l>o)&&(t.gradeReleaseDate=na.t("testForm.errors.gradeReleaseDateAfterCourseStart"),t.infoPageThreeError=!0),!c||!i||i<c||(t.dueDate=na.t("testForm.errors.dueDateAfterAvailableOnDate"),t.availableOnDate=e.assignment?na.t("testForm.errors.availableOnDateBeforeDueDate"):na.t("testForm.errors.availableOnDateBeforeCloseDate"),t.infoPageThreeError=!0),!l||!i||i<l||(t.gradeReleaseDate=na.t("testForm.errors.gradeReleaseDateAfterAvailableOnDate"),t.availableOnDate=na.t("testForm.errors.availableOnDateBeforeGradeReleaseDate"),t.infoPageThreeError=!0),!l||!c||c<l||(t.gradeReleaseDate=e.assignment?na.t("testForm.errors.gradeReleaseDateAfterDueDate"):na.t("testForm.errors.gradeReleaseDateAfterCloseDate"),t.dueDate=e.assignment?na.t("testForm.errors.dueDateBeforeGradeReleaseDate"):na.t("testForm.errors.closeDateBeforeGradeReleaseDate"),t.infoPageThreeError=!0);var u=["multipleChoice","essay","speaking","fillInTheBlanks","test"];u.forEach((function(n){var a=((e.readingMaterial||{})[n]||{}).file,r=((e.readingMaterial||{})[n]||{}).fileUpload,o=((e.audioMaterial||{})[n]||{}).audioFile,s=((e.audioMaterial||{})[n]||{}).fileUpload;a instanceof File&&!(a.size<1e3*e.instructorFileSizeLimit*1e3)&&r&&((t.readingMaterial[n]||{}).file="".concat(na.t("testForm.errors.docCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB"),t.infoPageFourError=!0),o instanceof File&&!(o.size<1e3*e.instructorFileSizeLimit*1e3)&&s&&((t.audioMaterial[n]||{}).audioFile="".concat(na.t("testForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB"),t.infoPageFourError=!0)})),t.mcQuestions=(e.mcQuestions||[]).map((function(e,a){var r;((e.answers||[]).includes(void 0)||(e.answers||[]).includes(""))&&(e.answers||[]).length>1&&(r=na.t("testForm.errors.answersCantBeEmpty")),(e.answers||[]).length<2&&(r=na.t("testForm.errors.atleastTwoAnswers")),(e.answers||[]).length===(e.correctAnswers||[]).length&&(e.answers||[]).length>1&&(r=na.t("testForm.errors.atleastOneUnchecked")),(!e.correctAnswers||0===(e.correctAnswers||[]).length)&&(e.answers||[]).length>1&&(r=na.t("testForm.errors.selectAtleastOneAnswer"));var o=(e.answers||[]).map((function(e){return(e||"").trim()})),s=n(o);(e.answers||[]).length>1&&(s||[]).length>0&&(r=na.t("testForm.errors.answersDifferent"));var i=null;parseFloat(e.marks)>0||(i=na.t("testForm.errors.greaterThanZero")),e.marks&&""!==e.marks||(i=na.t("testForm.errors.required"));var c=null;return e.question&&""!==e.question||(c=na.t("testForm.errors.required"),t.mcSectionPageError=!0),(i||c||r)&&(t.mcSectionPageError=!0),{question:c,marks:i,correctAnswers:r}})),t.essayQuestions=(e.essayQuestions||[]).map((function(e,t){var n;return parseFloat(e.marks)>0||(n=na.t("testForm.errors.greaterThanZero")),e.marks&&""!==e.marks||(n=na.t("testForm.errors.required")),{question:e.question&&""!==e.question?null:na.t("testForm.errors.required"),marks:n}})),t.essayQuestions.map((function(e){(e.question||e.marks)&&(t.essayPageError=!0)})),t.speakingQuestions=(e.speakingQuestions||[]).map((function(n,a){var r=null;n.question&&""!==n.question||n.audioQuestion||(r=na.t("testForm.errors.requiredOrMakeAudioQuestion"));var o=null;!n.audioQuestion||n.questionRecordedBlob&&""!==n.questionRecordedBlob||(o=na.t("testForm.errors.requiredOrMakeTextQuestion"));var s=null;!n.audioAnswer||n.recordedBlob&&""!==n.recordedBlob||(s=na.t("testForm.errors.requiredOrDisableAudioAnswer")),n.audioFile instanceof File&&n.audioFile.size>1e3*e.instructorFileSizeLimit*1e3&&n.audioAnswer&&(s="".concat(na.t("testForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),n.audioFileQuestion instanceof File&&n.audioFileQuestion.size>1e3*e.instructorFileSizeLimit*1e3&&n.audioQuestion&&(o="".concat(na.t("testForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),!n.audioAnswer||n.recordedBlob&&""!==n.recordedBlob||(s=na.t("testForm.errors.requiredOrDisableAudioAnswer"));var i=null;return parseFloat(n.marks)>0||(i=na.t("testForm.errors.greaterThanZero")),n.marks&&""!==n.marks||(i=na.t("testForm.errors.required")),(i||o||r||s)&&(t.speakingPageError=!0),{question:r,marks:i,questionRecordedBlob:o,recordedBlob:s}})),t.speakingQuestions.map((function(e){(e.audioQuestion||e.marks||e.questionRecordedBlob)&&(t.speakingSectionPageError=!0)}));var d=(e.fillBlankQuestions||{}).answers||[];t.fillBlankQuestions.answers=d.map((function(a,r){var o;((Object.values(a.answerOptions||{})||[]).map((function(e){return(e||"").trim()}))||[]).includes((a.answer||"").trim())&&(o=na.t("testForm.errors.incorrectAnswersCantBeSameAsCorrectAnswer"));var s=((Object.values(a.answerOptions||{})||[]).map((function(e){return(e||"").trim()}))||[]).filter((function(e){return""!==e}));!(s.findIndex((function(e){return""!==e&&e}))>-1)&&a.selectableAnswer&&(o=na.t("testForm.errors.atLeastOneIncorrectAnswer")),n(s).length>0&&(o=na.t("testForm.errors.noDuplicateIncorrectAnswers"));var i=null;parseFloat(a.marks)>0||(i=na.t("testForm.errors.greaterThanZero")),a.marks&&""!==a.marks||(i=na.t("testForm.errors.required"));var c=null;a.audio&&!a.browserAudioFile&&(c=na.t("testForm.errors.requiredAudioOrDisableAudio")),a.audioFile instanceof File&&a.audioFile.size>1e3*e.instructorFileSizeLimit*1e3&&a.audio&&(c="".concat(na.t("testForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB"));var l=null;return a.selectableAnswer&&o&&(l=o),(c||i||l)&&(t.fillblankPageError=!0),{marks:i,answerOptions:{incorrectAnswerThree:o},browserAudioFile:c}}));var m=null;return((e.fillBlankQuestions||{}).question||"").includes("-BLANK-")&&(m=na.t("testForm.errors.blankIsReserved")),d.length>0||(m=na.t("testForm.errors.createAtleastOneBlank")),((!e.fillBlankQuestions||{}).question||""===(e.fillBlankQuestions||{}).question)&&(m=na.t("testForm.errors.required")),m&&(t.fillBlankQuestions.question=m,t.fillblankPageError=!0),(e.testSections||[]).includes("mc")||(t.mcSectionPageError=!1),(e.testSections||[]).includes("essay")||(t.essayPageError=!1),(e.testSections||[]).includes("speaking")||(t.speakingPageError=!1),(e.testSections||[]).includes("fillblanks")||(t.fillblankPageError=!1),t},Dr=function(){var e=Object(Aa.a)(xa.a.mark((function e(t,n,a){var r,o;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(o=new FormData).append("key",t),e.next=5,wr()({url:"".concat("https://mernstackelearn.herokuapp.com/","get-file"),method:"PUT",headers:{Authorization:"Bearer "+a},data:o});case 5:r=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getting file failed: ",e.t0);case 11:return e.abrupt("return",r.data);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),_r=n(1263),Ir=function(e,t){console.log("v1()",Object(_r.a)());var n=(e||{}).name||"",a=n.substring(n.lastIndexOf(".")+1,n.length)||n;return"".concat(t,"/").concat(Object(_r.a)()+"."+a)},jr=function(){var e=Object(Aa.a)(xa.a.mark((function e(t,n){var a,r,o,s,i,c,l=arguments;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:"",r=l.length>3&&void 0!==l[3]?l[3]:"NA",(o=new FormData).append("key",n),o.append("fileType",r),e.next=7,wr()({url:"".concat("https://mernstackelearn.herokuapp.com/","upload"),method:"PUT",headers:{Authorization:"Bearer "+a},data:o});case 7:return s=e.sent,console.log("Get pre-signed url response: ",s),e.prev=9,i=new FormData,Object.keys(s.data.presignedUrl.fields).forEach((function(e){i.append(e,s.data.presignedUrl.fields[e])})),i.append("file",t),e.next=15,wr.a.post(s.data.presignedUrl.url,i);case 15:c=e.sent,console.log("Upload file response: ",c),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),console.log("Upload file error: ",e.t0);case 22:return e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t,n){return e.apply(this,arguments)}}(),Rr=function(){function e(t,n,a){Object(g.a)(this,e),this.loader=t,this.token=n,this.path=a}return Object(b.a)(e,[{key:"upload",value:function(){var e=Object(Aa.a)(xa.a.mark((function e(){var t,n=this;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){e(n.loader.file)})).then(function(){var e=Object(Aa.a)(xa.a.mark((function e(t){var a,r,o,s;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={maxSizeMB:2,maxWidthOrHeight:1920,useWebWorker:!0},e.next=3,Object(Fa.a)(t,a);case 3:return r=e.sent,o=new File([r],r.name),e.next=7,new Promise(function(){var e=Object(Aa.a)(xa.a.mark((function e(a,r){var s,i,c,l,u,d;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Ir(o,n.path),(i=new FormData).append("key",s),e.next=5,wr()({url:"".concat("https://mernstackelearn.herokuapp.com/","upload"),method:"PUT",headers:{Authorization:"Bearer "+n.token},data:i});case 5:return c=e.sent,l=new FormData,Object.keys(c.data.presignedUrl.fields).forEach((function(e){l.append(e,c.data.presignedUrl.fields[e])})),l.append("file",t),e.next=11,wr.a.post(c.data.presignedUrl.url,l);case 11:return u=e.sent,console.log("Image upload adapter response: ",u),e.next=15,Dr(s,"image/jpeg",n.token);case 15:d=e.sent,a(Object(At.a)(Object(At.a)({},c),{},{default:d.toString()}));case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"abort",value:function(){}}]),e}(),Nr=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e,a){var r;return Object(g.a)(this,n),(r=t.call(this,e,a)).handleContentStringChange=function(e){r.setState({editorContent:e})},r.getImgUrl=function(e){if(!r.props.testReviewing){var t=Array.from((new DOMParser).parseFromString(e,"text/html").querySelectorAll("img")).map((function(e){return e.getAttribute("src")})).map((function(e){return e&&e.includes("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/")?e.match(new RegExp("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/(.*)\\?X-Amz"))[1]:e})),n=r.state.previousImages;r.setState({previousImages:t});var a=r.state.previousImages,o=n.find((function(e){return!a.includes(e)}));!r.state.editingImages.includes(o)&&o&&r.props.deleteImg(o,r.props.token)}},r.state={previousImages:[],editingImages:[],latestTestFormValues:{},keys:[],editorContent:null},r}return Object(b.a)(n,[{key:"componentDidMount",value:function(){console.log("ck editor mounted");var e=Array.from((new DOMParser).parseFromString((this.props.input||{}).value,"text/html").querySelectorAll("img")).map((function(e){return e.getAttribute("src")})).map((function(e){return(e||"").includes("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/")?e.match(new RegExp("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/(.*)\\?X-Amz"))[1]:e}));this.setState({editingImages:e})}},{key:"componentWillReceiveProps",value:function(e){var t=e.testFormValues;this.setState({latestTestFormValues:t})}},{key:"getEditorType",value:function(e){return"balloon"===e?Or.BalloonEditor:Or.ClassicEditor}},{key:"componentWillUnmount",value:function(){console.log("unmounting")}},{key:"render",value:function(){var e,t,n=this,a=this.props,o=a.meta,s=void 0===o?{}:o,i=a.error,c=a.input,l=void 0===c?{}:c,u=a.field,d=void 0===u?"":u,m=a.reduxForm,p=void 0===m?"":m,f=a.testFormErrors,g=a.updateTestFormErrors,b=a.changeField,h=a.questionType,E=a.type,v=a.border,y=(a.isModal,a.token),T=a.path,S=a.readOnly,k=a.testFormSection,w=a.noImage,O=a.blockFillblankSynchronization;if("studentTest"!==p){var C=Fr(this.state.latestTestFormValues)||{},x=((f||{}).fillBlankQuestions||{}).question;e=(Fr(this.state.latestTestFormValues)||{}).fillBlankQuestions.question;var A=(Fr(this.state.latestTestFormValues)||{}).fillBlankQuestions.answers;(A||[]).length>0&&(e||"").includes("Create at least 1 blank")&&(s.error=""),t="testForm"===p&&"fillblanks"===k||"questionForm"===p&&"fillInBlank"===h?e:s.error||i,e===x||!e||"fillInBlank"!==h&&"fillblanks"!==k||"testForm"!==p&&"questionForm"!==p||g(p,Object(At.a)(Object(At.a)({},C),{},{fillBlankQuestions:{question:e,answers:A},fillblankPageError:f.fillblankPageError}))}var F=(l||{}).value||"";return r.a.createElement("div",{className:["App",Ar.a[v]].join(" ")},this.props.label&&r.a.createElement("div",{className:Ar.a.textLabel},"".concat(this.props.label,":")),r.a.createElement(Sr.a,{config:yr(this.props,w),editor:this.getEditorType(E),data:F||"",onInit:function(e){e.isReadOnly=S;e.plugins.get("FileRepository").createUploadAdapter=function(e){return new Rr(e,y,T)}},onChange:function(e,t){console.log("meta.form",s.form),n.props.makeTouched(s.form,d);var a=t.getData();n.handleContentStringChange(a),p&&b(p,d,a),n.getImgUrl(a)}}),r.a.createElement("span",{className:Ar.a.errorText},(s.error||i)&&s.touched&&!O?t:""))}}]),n}(a.Component),Lr=Object(c.b)((function(e,t){return{testFormValues:Object(Ve.a)(t.reduxForm)(e),testFormErrors:Object(Ft.a)(t.reduxForm)(e),testReviewing:e.studentTesttestReviewing,questionType:e.instructorQuestion.creatingQuestionType,fillBlankSection:e.instructorTest.testPanelFormFillInBlanksSection,token:e.authentication.token,testFormSection:e.instructorTest.testFormSection}}),(function(e){return{changeField:function(t,n,a){e(Object(Dt.a)(t,n,a))},makeTouched:function(t,n){e(Object(Dt.d)(t,n))},deleteImg:function(t,n){e(ke([t]),n)},updateTestFormErrors:function(t,n){console.log("form in sync error"),e(Object(Dt.e)(t,n))}}}))(Nr),Pr=n(26),Br=n(1233),Mr=n(1136),qr=n(1231),Ur=Object(Ye.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0}}}));var Qr=function(e){var t=e.input,n=t.onChange,a=t.value,o=(e.meta,e.instructors),s=e.courseEditing,i=e.currentInstructorId,c=Ur(),l=Object(St.a)("common"),u=l.t;return l.i18n,r.a.createElement(Br.a,{className:c.root,subheader:r.a.createElement("li",null)},(o||[]).map((function(e){return r.a.createElement("li",{key:"section-".concat(e._id),className:c.listSection},r.a.createElement("ul",{className:c.ul},(e.coursesTeaching||[]).length>0||(e.coursesTeaching||[]).length>1&&e._id===i?r.a.createElement(v,null,r.a.createElement(qr.a,null,"".concat(u("courseForm.instructor"),": ").concat(e.firstName)),(e.coursesTeaching||[]).map((function(t,o){if(t._id!==s){var i=a.includes(t._id);return r.a.createElement(Mr.a,{key:"item-".concat(e._id,"-").concat(t._id)},r.a.createElement(mt.a,{key:"checkbox-".concat(o),control:r.a.createElement(dr.a,{name:"".concat(t.courseName,"[").concat(o,"]"),value:t._id,checked:i,onChange:function(e){var r=Object(Pr.a)(a);return e.target.checked?r.push(t._id):r.splice(r.indexOf(t._id),1),n(r)}}),label:"Course ".concat(t.courseName)}))}}))):null))})))},Wr=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=(e.formValues,e.courseId),a=e.userId,o=e.instructors,s=e.newCourseId,i=e.t,c=o.findIndex((function(e){return!e.coursesTeaching.includes(n)&&e.coursesTeaching.length>0}))>-1;return r.a.createElement(v,null,c&&r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"h5",gutterBottom:!0},i("courseForm.coursePrerequisites")),r.a.createElement(ca.a,{name:"prerequisites",component:Qr,instructors:o,courseEditing:n,currentInstructorId:a,courseForm:!0})),r.a.createElement(et.a,{paragraph:!0,variant:"h5",gutterBottom:!0},i("courseForm.courseSyllabus")),r.a.createElement("div",{className:t.editor},r.a.createElement(ca.a,{name:"syllabus",reduxForm:"courseForm",field:"syllabus",component:Lr,path:"courses/".concat(n||s,"/syllabus")})))}}]),n}(a.Component),Hr=Object(_t.a)({form:"courseForm",validate:aa,destroyOnUnmount:!1})(Object(Ia.a)("common")(Wr)),zr=Object(c.b)((function(e){return{courseId:e.instructorCourse.loadedCourseFormData._id,instructors:e.instructorCourse.instructors,formValues:Object(Ve.a)("courseForm")(e),userId:e.authentication.userId}}),null)(Object($e.a)((function(){return{editor:{width:"100%",margin:"auto"}}}))(Hr)),Gr=n(1271),Vr=n(1237),$r=n(1269),Yr=n(1238),Jr=Object(lt.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FF4136"}},overrides:{MuiLinearProgress:{colorPrimary:{backgroundColor:"#ff8a80"},barColorPrimary:{backgroundColor:"#d32f2f"}}}}),Kr=function(e){return r.a.createElement(f.a,{theme:Jr},e.children)},Zr=Object($e.a)({rootProgress:{width:"200%",flexGrow:1,padding:0,marginBottom:"10px",backgroundColor:"white"},root:{MuiLinearProgress:{backgroundColor:"red !important"}},Danger:{backgroundColor:"red !important"}})((function(e){var t=e.activeStep,n=e.completed,a=e.stepsLabels,o=e.error,s=e.steps,i=e.progress,c=e.classes,l=e.danger,u=r.a.createElement("div",{className:c.root},r.a.createElement(Gr.a,{activeStep:t,alternativeLabel:!0},(a||[]).map((function(e,a){return r.a.createElement(Vr.a,{completed:!!(n||[]).includes(a)||a<=t-1,key:e},r.a.createElement($r.a,{error:o===a},""))}))));return i&&(u=r.a.createElement("div",{style:{overflowX:"hidden"}},r.a.createElement(Yr.a,{variant:"progress",steps:s,position:"static",activeStep:t,className:c.rootProgress}))),i&&l&&(u=r.a.createElement(Kr,null,r.a.createElement(Yr.a,{variant:"progress",steps:s,position:"static",activeStep:t,className:c.rootProgress}))),u})),Xr=n(331),eo=n.n(Xr),to=function(e){var t=e.active,n=e.transparent;return t?r.a.createElement("div",{className:n?eo.a.Backdrop:null},r.a.createElement("div",{className:n?eo.a.loader:eo.a.Loader},"Loading...")):null},no=n(143),ao=function(e){return e&&"string"===typeof e?e.includes("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/")?e.match(new RegExp("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/(.*)\\?X-Amz"))[1]:e:null},ro=function(e,t,n){var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Array.from((new DOMParser).parseFromString(e,"text/html").querySelectorAll("img")).map((function(e){return e.getAttribute("src")}));return t};if("gradeTestAnswers"===t){var r=[];return(((e||{}).essaySection||{}).answers||[]).map((function(e){return e.answer})).forEach((function(e){a(e).forEach((function(e){r.push(ao(e))}))})),r}if("gradeTest"===t){var o=[];return((e||{}).essaySection||[]).map((function(e){return e.instructorCorrection})).forEach((function(e){a(e).forEach((function(e){o.push(ao(e))}))})),((e||{}).speakingSection||[]).map((function(e){return e.audioFile})).forEach((function(e){return o.push(ao(e))})),o}if("studentTest"===t){var s=[];return((e||{}).essayQuestions||[]).forEach((function(e){a(e).forEach((function(e){s.push(ao(e))}))})),((e||{}).speakingQuestions||[]).filter((function(e){return e})).map((function(e){return e.audioFile})).forEach((function(e){return s.push(ao(e))})),s}if("courseQuestions"===t){var i=[];return(e||[]).forEach((function(e){"mc"===e.type&&(a((e.mcQuestion||{}).question)||[]).forEach((function(e){return i.push(ao(e))}));"essay"===e.type&&(a((e.essayQuestion||{}).question)||[]).forEach((function(e){return i.push(ao(e))}));if("speaking"===e.type){(a((e.speakingQuestion||{}).question)||[]).forEach((function(e){return i.push(ao(e))}));var t=(e.speakingQuestion||{}).audioQuestion;t&&""!==t&&i.push(ao(t));var n=(e.speakingQuestion||{}).audio;n&&""!==n&&i.push(ao(n))}"fillInBlank"===e.type&&((a((e.fillBlankQuestions||{}).question)||[]).forEach((function(e){return i.push(ao(e))})),Array.from((e.fillBlankQuestions||{}).blanks||[]).forEach((function(e){e.audio&&i.push(ao(e.audio))})))})),i}if("courseTests"===t){var c=[];return(e||[]).forEach((function(e){(e.multipleChoiceQuestions||[]).forEach((function(e){(a(e.question)||[]).forEach((function(e){return c.push(ao(e))}))})),(e.essayQuestions||[]).forEach((function(e){(a(e.question)||[]).forEach((function(e){return c.push(ao(e))}))})),(e.speakingQuestions||[]).forEach((function(e){(a(e.question)||[]).forEach((function(e){return c.push(ao(e))})),e.questionAudio&&""!==e.questionAudio&&c.push(ao(e.questionAudio)),e.audio&&""!==e.audio&&c.push(ao(e.audio))}));var t=(e.fillInBlanksQuestions||{}).text,n=(e.fillInBlanksQuestions||{}).blanks||[];(a(t)||[]).forEach((function(e){return c.push(ao(e))})),n.forEach((function(e){e.audio&&c.push(ao(e.audio))}))})),c}if("testForm"===t){var l=e||{},u=[];(l.mcQuestions||[]).map((function(e){return e.question})).forEach((function(e){a(e).forEach((function(e){u.push(ao(e))}))})),(l.essayQuestions||[]).map((function(e){return e.question})).forEach((function(e){a(e).forEach((function(e){u.push(ao(e))}))})),(l.speakingQuestions||[]).map((function(e){if(!e.audioQuestion)return e.question})).forEach((function(e){a(e).forEach((function(e){u.push(ao(e))}))}));var d=(l.speakingQuestions||[]).filter((function(e){if(e.audioQuestion)return e})).map((function(e){return e.questionRecordedBlob})),m=(l.speakingQuestions||[]).filter((function(e){if(e.audioAnswer)return e})).map((function(e){return e.recordedBlob}));d.forEach((function(e){return u.push(ao(e))})),m.forEach((function(e){return u.push(ao(e))}));var p=(l.fillBlankQuestions||{}).question,f=a(p)||[],g=((l.fillBlankQuestions||{}).answers||[]).map((function(e){return e.browserAudioFile})).filter((function(e,t){if((((l.fillBlankQuestions||{}).answers||[])[t]||{}).audio)return e}));return f.forEach((function(e){u.push(ao(e))})),g.forEach((function(e){u.push(ao(e))})),Object.values(l.readingMaterial||{}).forEach((function(e){e.fileUpload&&e.loadedPDF&&u.push(ao(e.loadedPDF)),!e.fileUpload&&e.content&&(a(e.content)||[]).forEach((function(e){return u.push(ao(e))}))})),Object.values(l.audioMaterial||{}).forEach((function(e){e.recordedBlob&&u.push(ao(e.recordedBlob))})),u}if("questionForm"===t){var b="",h=["mcQuestion","essayQuestion","speakingQuestion","fillBlankQuestions"],E=e||{},v=[];["mc","essay","speaking","fillInBlank"].forEach((function(e,t){e===n&&(b=h[t])}));var y=(E[b]||{}).question;if("speakingQuestion"===b&&(y=((E.speakingQuestion||[])[0]||{}).audioQuestion?null:((E.speakingQuestion||[])[0]||{}).question),a(y).forEach((function(e){v.push(ao(e))})),"speaking"===n){var T=((E.speakingQuestion||[])[0]||{}).questionRecordedBlob;T&&!1!==(((e||{}).speakingQuestion||[])[0]||{}).audioQuestion&&v.push(ao(T));var S=((E.speakingQuestion||[])[0]||{}).recordedBlob;S&&!1!==(((e||{}).speakingQuestion||[])[0]||{}).audioAnswer&&v.push(ao(S))}if("fillInBlank"===n){var k=(E.fillBlankQuestions||{}).answers||[];k.forEach((function(e,t){e.browserAudioFile&&(k[t]||{}).audio&&v.push(ao(e.browserAudioFile))}))}return v}if("lessonForm"===t){var w=[];((e||{}).slides||[]).filter((function(e){return!e.videoContent})).map((function(e){return e.slideContent})).forEach((function(e){a(e).forEach((function(e){w.push(ao(e))}))}));var O=(e.slides||[]).filter((function(e){if(e.recordedBlob&&!e.videoContent)return e})).map((function(e){return e.recordedBlob})),C=(e.slides||[]).filter((function(e){if(e.loadedVideo&&e.videoContent)return e})).map((function(e){return e.loadedVideo}));return O.forEach((function(e){return w.push(ao(e))})),C.forEach((function(e){return w.push(ao(e))})),w}return a(e)},oo=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).handleWindowClose=function(e){e.preventDefault(),a.state.isUpdating||a.handleDeleteUnsavedImages()},a.handleDeleteUnsavedImages=function(){var e=a.getCourseUrls(a.props.formValues),t=[];(e||[]).forEach((function(e){-1===a.state.initialUrls.findIndex((function(t){return t===e}))&&t.push(e)})),t.length>0&&a.props.deleteImg(t,a.props.token)},a.componentWillUnmount=function(){window.removeEventListener("beforeunload",a.handleWindowClose),a.state.isUpdating||a.handleDeleteUnsavedImages(),a.props.clearCourseForm()},a.onSubmit=function(){a.setState({isUpdating:!0});var e=a.getCourseUrls(a.props.formValues),t=(a.state.initialUrls||[]).filter((function(t){if(!e.includes(t))return t}));a.props.submitCourse(a.props.formValues,a.props.token,a.props.editing,a.props.editing?a.props.initialValues._id:a.state.newCourseId,t)},a.state={initialUrls:[],newCourseId:null,isValid:!0,isUpdating:!1},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.handleWindowClose);var e=this.getCourseUrls(this.props.startingValues,"isInitialValues");this.setState({initialUrls:e,newCourseId:this.props.editing?null:(new no.a.ObjectId).toHexString()})}},{key:"getCourseUrls",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=ro(e.syllabus);return(n||[]).forEach((function(e){e&&t.push(e.match(new RegExp("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/(.*)\\?X-Amz"))[1])})),t.push(e.courseImage),t}},{key:"checkPageValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return 1===n&&(a("courseName"),a("courseImage")),2===n&&["enrollmentPeriod","courseTimeline","courseDropDeadline"].forEach((function(e){return a(e)})),3===n&&((e.irregularOfficeHours||[]).forEach((function(e,t){a("irregularOfficeHours.".concat(t,".date")),a("irregularOfficeHours.".concat(t,".timeRange"))})),((e.regularOfficeHours||{}).days||[]).forEach((function(e,t){a("regularOfficeHours.times.".concat(e,".timeRange"))}))),1===n&&t.pageOne||2===n&&t.pageTwo||3===n&&t.pageThree?(this.setState({isValid:!1}),!1):(this.setState({isValid:!0}),!0)}},{key:"getButtons",value:function(e,t,n,a,o,s,i){var c=this;return r.a.createElement("div",{className:[1!==e?t.evenDistribution:t.floatRight].join(" ")},1!==e&&r.a.createElement(ot.a,{variant:"outlined",color:"primary",type:"button",onClick:function(){o(e-1),c.setState({isValid:!0})},startIcon:r.a.createElement(ia.a,null)},""),4!==e&&r.a.createElement(ot.a,{onClick:function(){c.checkPageValidity(n,a,e,s)&&o(e+1)},color:i?"secondary":"primary",variant:"outlined",startIcon:r.a.createElement(oa.a,null)},""))}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.page,o=t.formValues,s=t.formErrors,i=t.setCourseFormPage,c=t.touchField,l=t.loading,u=t.editing,d=t.t,m=!s.courseName&&!s.courseImage,p=(o||{}).createdAt||null,f=!(this.state.isValid||!s.pageOne&&!s.pageTwo&&!s.pageThree&&!s.pageFour);return r.a.createElement("div",{style:{maxWidth:600,margin:"auto"}},r.a.createElement(to,{active:l,transparent:!0}),r.a.createElement(Zr,{size:"small",stepsLabels:["1","2","3","4"],activeStep:a-1,completed:m?[0]:null}),r.a.createElement("div",null,1===a&&r.a.createElement(Wa,{page:a,nextPage:function(){return e.props.setCourseFormPage(2)},isImage:(this.props.formValues||{}).courseImage}),2===a&&r.a.createElement(ar,{page:a,previousPage:function(){return e.props.setCourseFormPage(1)},nextPage:function(){return e.props.setCourseFormPage(3)},createdAt:p}),3===a&&r.a.createElement(vr,{page:a,previousPage:function(){return e.props.setCourseFormPage(2)},nextPage:function(){return e.props.setCourseFormPage(4)},createdAt:p}),4===a&&r.a.createElement(zr,{page:a,previousPage:function(){return e.props.setCourseFormPage(3)},newCourseId:this.state.newCourseId}),f&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},r.a.createElement(et.a,{color:"error"},d("courseForm.errors.correctForm")))),this.getButtons(a,n,o,s,i,c,f),4===this.props.page&&r.a.createElement(ot.a,{fullWidth:!0,variant:"outlined",style:{color:"#43a047",borderColor:"#43a047",backgroundColor:"#e8f5e9"},type:"button",onClick:function(){return e.onSubmit()}},d(u?"courseForm.buttons.update":"courseForm.buttons.publish")))}}]),n}(a.Component),so=Object(_t.a)({form:"courseForm",enableReinitialize:!0,validate:aa,destroyOnUnmount:!0})(Object(Ia.a)("common")(oo)),io=Object(c.b)((function(e){var t=e.instructorCourse.loadedCourseFormData,n=e.common.courses,a=e.common.editing;return{formValues:Object(Ve.a)("courseForm")(e),formErrors:Object(Ft.a)("courseForm")(e),token:e.authentication.token,editing:a,page:e.instructorCourse.courseFormPage,initialValues:a?Object(At.a)(Object(At.a)({},t),{},{instructorCourses:n}):{instructorCourses:n,courseActive:!0},loading:e.instructorCourse.loading}}),(function(e){return{setCourseFormPage:function(t){e(R(t))},submitCourse:function(t,n,a,r,o){e(M(t,n,a,r,null,o))},touchField:function(t){e(Object(Dt.d)("courseForm",t))},clearCourseForm:function(){return e(W())},deleteImg:function(t,n){e(ke(t),n)}}}))(Object($e.a)((function(){return{editor:{width:"100%",margin:"auto"},list:{listStyleType:"none",padding:"0",margin:"0"},button:{margin:"10px 0",width:"100%"},Form:{overflow:"hidden",background:"white",borderRadius:"4px",padding:"10px"},evenDistribution:{display:"flex",justifyContent:"space-between"},floatRight:{display:"flex",justifyContent:"flex-end"}}}))(so)),co=n(225);var lo=function(e){var t=e.children,n=e.value,a=e.index,o=Object(co.a)(e,["children","value","index"]);return r.a.createElement(et.a,Object.assign({component:"div",role:"tabpanel",hidden:n!==a,id:"scrollable-force-tabpanel-".concat(a),"aria-labelledby":"scrollable-force-tab-".concat(a)},o),n===a&&r.a.createElement(ht.a,{p:3},t))};lo.propTypes={children:xt.a.node,index:xt.a.any.isRequired,value:xt.a.any.isRequired};var uo=Object(c.b)((function(e){return{userId:e.authentication.userId,questionFormValues:Object(Ve.a)("questionForm")(e),loadedLessonFormData:e.instructorLesson.loadedLessonFormData,token:e.authentication.token,selectedCourse:e.common.selectedCourse,tab:e.common.tab,questionBank:e.instructorQuestion.questionBank,questionEditing:e.instructorQuestion.questionEditing,editing:e.common.editing,loadedCourseFormData:e.instructorCourse.loadedCourseFormData,loading:e.common.loading,userFirstName:e.authentication.userFirstName,userLastName:e.authentication.userLastName}}),(function(e){return{setOpenFolder:function(t){return e({type:"SET_INSTRUCTOR_FOLDER",folder:t})}}}))((function(e){var t=e.tab,n=e.loadedCourseFormData;return r.a.createElement(v,null,r.a.createElement(lo,{value:t,index:0},r.a.createElement(Ot,null)),r.a.createElement(lo,{value:t,index:1},n&&r.a.createElement(io,{startingValues:n})))})),mo=n(13),po=n(14),fo=n(63),go=n.n(fo),bo=n(335),ho=n(1272),Eo=n(1239),vo=Object($e.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(Eo.a),yo=n(32),To=n(1240),So=n(703),ko=n(1241),wo=n(132),Oo=n.n(wo),Co=n(635),xo=n.n(Co),Ao=(n(967),function(){return r.a.createElement("div",{className:"spinner"})}),Fo=n(257),Do=n.n(Fo),_o=n(256),Io=n.n(_o),jo=n(634),Ro=n.n(jo),No=n(631),Lo=n.n(No),Po=function(e){var t=e.url,n=e.play,a=e.ended,o=e.pause,s=e.playAutomatically,i=e.muted;return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(Lo.a,{playing:s,onPlay:n,onEnded:a,onPause:o,controls:!0,width:"100%",height:"100%",url:t,muted:i}))},Bo=(n(501),n(396)),Mo=n.n(Bo),qo=n(632),Uo=n.n(qo),Qo=function(){var e=Object(Aa.a)(xa.a.mark((function e(t,n,a,r){var o;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("saving"),o=new Mo.a({bitRate:128}),(r||{}).lameEncoder&&(o=r),(t||{}).lameEncoder&&(o=t),console.log("is recorder: ",o),!o){e.next=9;break}return e.next=8,o.stop().getMp3().then((function(e){var t=Object(mo.a)(e,2),r=t[0],o=t[1];return{blob:URL.createObjectURL(o),file:new File(r,n?"".concat(a,"-[").concat(n,"]recording.mp3"):"".concat(a,"-recording.mp3"),{type:o.type,lastModified:Date.now()}),index:a}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Wo=function(e,t,n,a,r){if(e){e.preventDefault();var o=Qo(null,t,n,r);return clearTimeout(a),o}},Ho=function(){var e=Object(Aa.a)(xa.a.mark((function e(t,n,a,r,o){var s,i,c,l;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=new Mo.a({bitRate:128}),t){e.next=3;break}return e.abrupt("return");case 3:return t.preventDefault(),e.prev=4,e.next=7,s.start();case 7:return i=FS.getState(),c=i.common.configuration.voiceRecordTimeLimit||60,l=setTimeout((function(){var e=Qo(s,n,a);o(e)}),1e3*c),e.abrupt("return",{recordingTimeout:l,isRecording:!0,recorder:s,index:a});case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",{isRecording:!1});case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),zo=function(e){var t=document.getElementById(e);t&&t.play()},Go=function(){var e=Object(Aa.a)(xa.a.mark((function e(t,n){var a,r,o;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 3:a=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("e: ",e.t0);case 9:return r=Uo()(a,{type:"video",mimeType:"video/webm;codecs=h264",canvas:{width:640,height:480}}),t({recorder:r,stream:a}),r.startRecording(),o=function(e){return new Promise((function(t){return setTimeout(t,e)}))},6e4,e.next=16,o(6e4);case 16:r.stopRecording(Object(Aa.a)(xa.a.mark((function e(){var o,s;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.getBlob(),s=new File([o],"video-recording.webm",{type:"video/webm"}),n(s),t({recorder:null,stream:null}),a.stop();case 5:case"end":return e.stop()}}),e)}))));case 17:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),Vo=n(633),$o=n.n(Vo),Yo=n(106),Jo=n.n(Yo),Ko={width:"fit-content"},Zo=[{className:"tier-top",style:{padding:"5px 0",margin:"auto",textAlign:"center"},innerComponents:[{type:"play",style:Ko},{type:"time",style:Ko}]}],Xo=[{className:"tier-top",style:{padding:"5px 0",margin:"auto",textAlign:"center"},innerComponents:[{type:"play",style:Ko},{type:"time",style:Ko},{type:"seek"}]}],es=function(e){var t=e.audioSource,n=e.noSeek;return r.a.createElement($o.a,{id:"audioplayerabc",playerWidth:"100%",audioFiles:[{src:t}],rearrange:n?Zo:Xo,iconSize:"1.5rem",fontSize:"1.2rem",sliderClass:"invert-blue-grey",hideForward:!0,hideRewind:!0,hideLoop:!0})},ts=Object(Ye.a)((function(e){var t;return{formLayout:{display:"flex",justifyContent:"space-between"},appBar:(t={bottom:"48px",top:"auto",width:"100%"},Object(po.a)(t,e.breakpoints.up(500),{bottom:0}),Object(po.a)(t,e.breakpoints.up(600),{width:"calc(100vw - 216px)"}),t),inputContainer:{backgroundColor:Object(yo.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(yo.c)(e.palette.common.white,.25)},borderRadius:e.shape.borderRadius,position:"relative",width:"100%"},icon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,7),width:"100%"}}}));var ns=Object(Ia.a)("common")((function(e){var t,n,a,o=e.handleContent,s=e.handleSubmit,i=e.content,c=e.t,l=e.isSelectedInstructor,u=e.isOfficeHour,d=e.isInstructorPanel,m=(e.configuration,e.chatAlwaysOpen),p=e.handleAttachedFile,f=e.loadedFile,g=e.isUploading,b=e.onSetRecorder,h=e.onSetAudioRecorder,E=e.recorder,v=e.stream,y=e.audioRecorder,T=e.audioTimeoutId,S=ts();f&&(t=(f||{}).name.toLowerCase().split(".").pop()),"pdf"===t&&(n=r.a.createElement("i",{className:"far fa-file-pdf fa-2x"})),"mp3"===t&&(a="audio"),"docx"!==t&&"doc"!==t||(n=r.a.createElement("i",{className:"fas fa-file-word fa-2x"})),"jpeg"!==t&&"jpg"!==t&&"jfif"!==t||(a="image"),"avi"!==t&&"mp4"!==t&&"mkv"!==t&&"webm"!==t||(a="video");var k,w=y||E||g||!m&&(l&&!u||d&&!u);return f&&(k=URL.createObjectURL(f)),r.a.createElement(To.a,{position:"fixed",className:S.appBar},E&&r.a.createElement(Po,{muted:!0,playAutomatically:!0,url:v}),f&&r.a.createElement("div",{style:{display:"flex",padding:5}},r.a.createElement("div",{style:{display:"contents"}},"audio"===a&&r.a.createElement(es,{audioSource:k}),"image"===a&&r.a.createElement("div",{style:{backgroundImage:'url("'.concat(k,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:80,borderRadius:"3px",width:"30%"}}),"video"===a&&r.a.createElement(Po,{url:k})),g&&r.a.createElement("div",{style:{marginLeft:25}}," ",r.a.createElement(Ao,null)),r.a.createElement("div",{style:{opacity:g?.3:1,color:"white",marginLeft:15}},n),r.a.createElement("div",{style:{marginLeft:15,cursor:"pointer"},onClick:function(){return p("")}},r.a.createElement("i",{style:{color:"#ffc000"},className:"fas fa-window-close fa-2x"}))),r.a.createElement(ko.a,{style:{padding:"5px"}},r.a.createElement("div",{className:S.inputContainer},r.a.createElement("form",{onSubmit:s,className:S.formLayout},r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse",justifyContent:"center"}},r.a.createElement("div",{className:S.icon},r.a.createElement(Oo.a,null)),r.a.createElement(So.a,{multiline:!0,disabled:!m&&(l&&!u||d&&!u),onChange:o,value:i,placeholder:c("chat.typeMessage"),style:{width:"100%"},classes:{root:S.inputRoot,input:S.inputInput},inputProps:{"aria-label":"content"}})),r.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(Na.a,{disabled:f||E,onClick:function(){var e=Object(Aa.a)(xa.a.mark((function e(t){var n,a;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=10;break}return e.next=3,Ho(t,null,null,"chatAudioRecorder",function(){var e=Object(Aa.a)(xa.a.mark((function e(t){var n;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,console.log("file from timeout..",n.file),e.next=6,p(n.file);case 6:h({audioRecorder:null,audioTimeoutId:null});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:n=e.t0,h({audioRecorder:n.recorder,audioTimeoutId:n.recordingTimeout}),e.next=20;break;case 10:return e.next=12,Wo(t,null,"chatAudioRecorder",T,y);case 12:if(e.t1=e.sent,e.t1){e.next=15;break}e.t1={};case 15:return a=e.t1,h({audioRecorder:null,audioTimeoutId:null}),console.log("file from stop..",a.file),e.next=20,p(a.file);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),component:"span"},y?r.a.createElement(Io.a,{style:{color:"white"}}):r.a.createElement(Do.a,{style:{color:"white",opacity:f||E?.3:1}})),r.a.createElement(Na.a,{disabled:f||y,onClick:Object(Aa.a)(xa.a.mark((function e(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=5;break}return e.next=3,Go((function(e){var t=e.recorder,n=e.stream;b({recorder:t,stream:n})}),function(){var e=Object(Aa.a)(xa.a.mark((function e(t){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("file: ",t),e.next=3,p(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:e.next=6;break;case 5:E.stopRecording(Object(Aa.a)(xa.a.mark((function e(){var t,n;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.getBlob(),n=new File([t],"video-recording.webm",{type:"video/webm"}),console.log("video file:",n),e.next=5,p(n);case 5:b({recorder:null,stream:null}),v.stop();case 7:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)}))),component:"span"},E?r.a.createElement(Io.a,{style:{color:"white"}}):r.a.createElement(Ro.a,{style:{color:"white",opacity:f||y?.3:1}})),r.a.createElement(Pa,{mimeTypesAllowed:"audio/*, video/*, video/x-matroska, image/jpeg, application/pdf, .doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",extensionsAllowed:["jpeg","jpg","jfif","png","pdf","docx","doc","mp4","avi","mkv","mp3","webm"],input:{value:"",onChange:function(e){console.log("file in bottom bar: ",e),p(e)}},onChangeFile:function(e){console.log("preview blob: ",e)},attachIcon:!0,disabled:f||E||y}),r.a.createElement(Na.a,{style:{color:"white",opacity:w?.3:1},size:"medium","aria-label":"delete",onClick:s,disabled:w},r.a.createElement(xo.a,null))))))))})),as=function(e){return((e||"").match(new RegExp("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/(.*)\\?X-Amz"))||[])[1]},rs=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).handleWindowClose=function(e){e.preventDefault(),e.returnValue="";var t="".concat("https://mernstackelearn.herokuapp.com/","delete-files"),n=new FormData;n.append("url",a.state.fileAWSKey),n.append("Authorization","Bearer "+a.props.token),a.setState({fileAWSKey:"",file:""}),fetch(t,{method:"put",headers:new Headers({Authorization:"Bearer "+a.props.token}),body:n,keepalive:!0})},a.handleSetRecorder=function(e){var t=e.recorder,n=e.stream;a.setState({recorder:t,stream:n})},a.handleSetAudioRecorder=function(e){var t=e.audioRecorder,n=e.audioTimeoutId;a.setState({audioRecorder:t,audioTimeoutId:n})},a.handleSubmit=function(e){e.preventDefault(),(a.state.file||a.state.content)&&a.setState((function(e){return a.socket.emit("message",{content:e.content,recipient:a.props.selectedChatUser,course:a.props.course._id,userType:a.props.userType,file:e.fileAWSKey?e.fileAWSKey:null}),{chat:[].concat(Object(Pr.a)(e.chat),[{sender:a.props.userId,content:e.content,file:e.file}]),content:"",file:"",fileAWSKey:"",recorder:null,audioRecorder:null,audioTimeoutId:null}}),a.scrollToBottom)},a.onHandleAttachedFile=function(e){if(!e)return a.setState({file:"",fileAWSKey:""}),void(a.state.fileAWSKey&&a.props.deleteFile([a.state.fileAWSKey],a.props.token));var t="users/".concat(a.props.userId,"/chat"),n=Ir(e,t);a.props.uploadFile(e,n,a.props.token,"chat"),a.setState({file:e,fileAWSKey:n})},a.state={chat:[],activeUsers:[],content:"",file:"",fileAWSKey:"",recorder:null,stream:null,audioRecorder:null,audioTimeoutId:null},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("visibilitychange",this.handleWindowClose),this.socket=go()("https://mernstackelearn.herokuapp.com/",{query:{token:this.props.token}});var t=(this.props.notifications||[]).find((function(t){if(t.toSpecificUser===e.props.userId&&t.fromUser===e.props.selectedChatUser._id||t.toSpecificUser===e.props.selectedChatUser._id&&t.fromUser===e.props.userId)return t}));t&&(this.props.markAsSeen(t._id,this.props.token),this.props.fetchNotifications(this.props.token)),this.socket.emit("join",{recipient:this.props.selectedChatUser,course:this.props.course._id}),this.socket.on("init",(function(t){var n=t.messages,a=t.activeUsers;e.setState((function(e){return{chat:[].concat(Object(Pr.a)(e.chat),Object(Pr.a)(n.reverse())),activeUsers:a}}),e.scrollToBottom)})),this.socket.on("activeUsers",(function(t){e.setState({activeUsers:t})})),this.socket.on("push",(function(t){e.setState((function(e){return{chat:[].concat(Object(Pr.a)(e.chat),[t])}}),e.scrollToBottom)}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(console.log("prevProps.selectedChatUser._id",e.selectedChatUser._id),console.log("this.props.selectedChatUser._id",this.props.selectedChatUser._id),this.props.selectedChatUser._id!==e.selectedChatUser._id){console.log("user changed");var n=(this.props.notifications||[]).find((function(e){if(e.toSpecificUser===t.props.userId&&e.fromUser===t.props.selectedChatUser._id||e.toSpecificUser===t.props.selectedChatUser._id&&e.fromUser===t.props.userId)return e}));n&&(this.props.markAsSeen(n._id,this.props.token),this.props.fetchNotifications(this.props.token)),this.socket.emit("join",{recipient:this.props.selectedChatUser,course:this.props.course._id}),this.socket.on("init",(function(e){var n=e.messages,a=e.activeUsers;t.setState((function(e){return{chat:[].concat(Object(Pr.a)(e.chat),Object(Pr.a)(n.reverse())),activeUsers:a}}),t.scrollToBottom)}))}else console.log("user did not change")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("visibilitychange",this.handleWindowClose),this.state.fileAWSKey,console.log("unmounting chat"),this.socket.emit("leave",{recipient:this.props.selectedChatUser}),this.socket.off("activeUsers"),this.socket.off("push")}},{key:"handleContent",value:function(e){this.setState({content:e.target.value})}},{key:"scrollToBottom",value:function(){var e=document.getElementById("chat");e.scrollTop=e.scrollHeight}},{key:"render",value:function(){console.log("state in chat: ",this.state);var e=this.props,t=e.selectedChatUser,n=void 0===t?{}:t,a=e.course,o=e.students,s=void 0===o?[]:o,i=e.isOfficeHour,c=e.instructorPanel,l=e.configuration,u=e.userId,d=e.width,m=e.uploading,p=l.isChatAllowedOutsideOfficehours;c||(p=(l.coursesIsChatAllowedOutsideOfficehours||[]).includes(a._id));var f=a.courseInstructor,g=n._id===f._id,b=200;return d<460&&(b=150),d<360&&(b=100),r.a.createElement("div",{className:"Chat"},r.a.createElement("div",{style:{display:"flex"}},this.state.activeUsers.includes(n._id)?r.a.createElement(vo,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(ho.a,{src:n.profilePicture})):r.a.createElement(ho.a,{src:n.profilePicture}),r.a.createElement(et.a,{style:{padding:"10px"},variant:"h6",className:"name"},"".concat((n||{}).firstName," ").concat((n||{}).lastName))),r.a.createElement(bo.a,Object(po.a)({style:{maxHeight:"calc(93vh - 219px)"},id:"chat",elevation:3},"style",{display:"flex",flexDirection:"column",marginBottom:d<500?this.state.file?150:120:this.state.file?100:70}),this.state.chat.map((function(e,t){var n,a;console.log("el.file",e.file),e.file&&(e.file instanceof File?(a=URL.createObjectURL(e.file),n=(e.file||{}).name.toLowerCase().split(".").pop()):(a=e.file,n=(as(e.file)||"").toLowerCase().split(".").pop())),console.log("extension",n);(s||[]).find((function(t){return t._id===e.sender})),f._id,e.sender;var o="jfif"===n||"jpeg"===n||"jpg"===n||"png"===n,i="mp4"===n||"avi"===n||"mkv"===n||"webm"===n,c="mp3"===n,l="pdf"===n,d="docx"===n||"doc"===n;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:e.sender===u?"flex-end":"flex-start",alignSelf:e.sender===u?"flex-end":"flex-start",maxWidth:"80%",minWidth:e.file?c?"20%":"50%":"10%",borderRadius:5,padding:5,marginBottom:5,backgroundColor:e.sender===u?"#0288d1":"#455a64"},key:t},e.file&&o&&r.a.createElement("div",{style:{backgroundImage:'url("'.concat(a,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:b,borderRadius:"3px",width:"100%"}}),e.file&&(l||d)&&r.a.createElement("a",{href:a},r.a.createElement("div",{style:{borderRadius:"3px",width:"50%"}},d&&r.a.createElement("i",{style:{color:"white"},className:"fas fa-file-word fa-2x"}),l&&r.a.createElement("i",{style:{color:"white"},className:"far fa-file-pdf fa-2x"}))),e.file&&c&&r.a.createElement("div",{className:"chatAudio[".concat(t,"]")},r.a.createElement(es,{noSeek:!0,audioSource:a})),e.file&&i&&r.a.createElement(Po,{url:a}),e.file&&(i||o||c)&&r.a.createElement("a",{href:a},r.a.createElement("i",{style:{color:"white",padding:"5px 0"},className:"fas fa-file-download fa-2x"})),r.a.createElement(et.a,{style:{fontSize:"0.8em",color:"white"},variant:"body1",className:"content"},e.content))}))),r.a.createElement(ns,{isOfficeHour:i,isSelectedInstructor:g,content:this.state.content,handleContent:this.handleContent.bind(this),handleSubmit:this.handleSubmit.bind(this),isInstructorPanel:c,chatAlwaysOpen:p,handleAttachedFile:this.onHandleAttachedFile,loadedFile:this.state.file,isUploading:m,onSetRecorder:this.handleSetRecorder,onSetAudioRecorder:this.handleSetAudioRecorder,recorder:this.state.recorder,stream:this.state.stream,audioRecorder:this.state.audioRecorder,audioTimeoutId:this.state.audioTimeoutId}))}}]),n}(r.a.Component),os=Object(c.b)((function(e){return{students:e.common.students,userId:e.authentication.userId,course:e.common.selectedCourse,token:e.authentication.token,selectedChatUser:e.common.selectedChatUser,notifications:e.common.notifications,configuration:e.common.configuration,uploading:e.common.uploading,width:e.common.width}}),(function(e){return{fetchNotifications:function(t){e(Ae(t))},markAsSeen:function(t,n){e(De(t,n))},uploadFile:function(t,n,a,r){e(function(e,t,n,a){return{type:"UPLOAD_FILE_START",payload:{file:e,key:t,type:a,token:n}}}(t,n,a,r))},deleteFile:function(t,n){e(ke(t),n)}}}))(rs),ss=function(e){var t;switch(e){case"Sunday":t=0;break;case"Monday":t=1;break;case"Tuesday":t=2;break;case"Wednesday":t=3;break;case"Thursday":t=4;break;case"Friday":t=5;break;case"Saturday":t=6}return t},is=n(86),cs=n.n(is),ls=Object(c.b)((function(e){return{students:e.common.students,course:e.common.selectedCourse,userId:e.authentication.userId,token:e.authentication.token,configuration:e.common.configuration}}),(function(e){return{setChatUser:function(t){e(we(t))},setTab:function(t){e(Re(t))}}}))((function(e){var t=e.instructorPanel,n=e.studentPanel,o=e.students,s=e.course,i=e.userId,c=e.setChatUser,l=e.setTab,u=e.token,d=e.isOfficeHour,m=e.configuration,p=Object(St.a)().t,f=r.a.useState([]),g=Object(mo.a)(f,2),b=g[0],h=g[1],E=m.isChatAllowedOutsideOfficehours;n&&(E=(m.coursesIsChatAllowedOutsideOfficehours||[]).includes(s._id)),console.log("chatAlwaysOpen",E),Object(a.useEffect)((function(){var e=go()("https://mernstackelearn.herokuapp.com/",{query:{token:u}});return e.emit("initializeContacts"),e.on("activeUsers",(function(e){console.log("active users: ",e),h(e)})),function(){return e.off("activeUsers")}}),[]);var y=function(e){var t=o.find((function(t){return e===t._id}));"instructor"===e&&(t=s.courseInstructor),c(t),l(1)},T=r.a.createElement(v,null,!d&&!E&&r.a.createElement(et.a,{gutterBottom:!0,variant:"subtitle1"},p(n?"chat.chatInstructorOnlyOfficeHours":"chat.chatStudentOnlyOfficeHours")),(s.regularOfficeHours||[]).map((function(e,t){var n=cs()(new Date(Date.now())).tz(e.timezoneRegion).format("z");return r.a.createElement(v,{key:e._id},r.a.createElement(v,null,r.a.createElement(et.a,{variant:"caption",style:{display:"block",fontWeight:"bold"}},p("courseForm.days.".concat(e.day.toLowerCase()))),r.a.createElement(et.a,{variant:"caption"},"".concat(p("chat.from")," ").concat(e.startTime," ").concat(p("chat.to")," ").concat(e.endTime," ").concat(n))))})),(s.irregularOfficeHours||[]).map((function(e,t){var n=cs()(new Date(Date.now())).tz(e.timezoneRegion).format("z");return r.a.createElement(v,{key:e._id},r.a.createElement(v,null,r.a.createElement(et.a,{variant:"caption",style:{display:"block",fontWeight:"bold"}},"".concat(ct()(parseInt(e.date)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY")," ")),r.a.createElement(et.a,{variant:"caption"}," ".concat(p("chat.from")," ").concat(e.startTime," ").concat(p("chat.to")," ").concat(e.endTime," ").concat(n))))})));return r.a.createElement(Br.a,null,n&&r.a.createElement(v,null,!d&&n&&!E&&r.a.createElement(v,null,T),r.a.createElement(Mr.a,null,r.a.createElement(lr.a,{secondary:p("chat.instructor")})),r.a.createElement(Mr.a,{disabled:!d&&!E,button:!0,onClick:function(){return y("instructor")}},b.includes(s.courseInstructor._id)?r.a.createElement(vo,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(ho.a,{style:{marginRight:10},src:s.courseInstructor.profilePicture})):r.a.createElement(ho.a,{style:{marginRight:10},src:s.courseInstructor.profilePicture}),r.a.createElement(lr.a,{primary:"".concat(s.courseInstructor.firstName," ").concat(s.courseInstructor.lastName)}))),r.a.createElement(v,null,!d&&!n&&!E&&r.a.createElement(v,null,T),(o||[]).map((function(e,a){return r.a.createElement(v,{key:e._id},i!==e._id&&r.a.createElement(v,null,0===a&&t||1===a&&n&&r.a.createElement(Mr.a,null,r.a.createElement(lr.a,{secondary:p("chat.students")})),0===a&&r.a.createElement(Mr.a,null,r.a.createElement(lr.a,{secondary:p("chat.students")})),r.a.createElement(Mr.a,{disabled:t&&!d&&!E,button:!0,onClick:function(){return y(e._id)}},b.includes(e._id)?r.a.createElement(vo,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(ho.a,{style:{marginRight:10},src:e.profilePicture})):r.a.createElement(ho.a,{style:{marginRight:10},src:e.profilePicture}),r.a.createElement(lr.a,{primary:"".concat(e.firstName," ").concat(e.lastName)}),r.a.createElement(lr.a,{secondary:"ID: ".concat(e._id.replace(/\D/g,""))}))))}))))})),us=n(1242),ds=n(1137),ms=n(258),ps=n.n(ms),fs=n(332),gs=n.n(fs),bs=n(228),hs=n.n(bs),Es=n(185),vs=n.n(Es),ys=function(e){if(!+e)return!1;for(var t=String(+e).split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],a="",r=3;r--;)a=(n[+t.pop()+10*r]||"")+a;return Array(+t.join("")+1).join("M")+a},Ts=n(71),Ss=n.n(Ts),ks=n(60),ws=n.n(ks),Os=n(95),Cs=n.n(Os),xs=Object(Ye.a)((function(e){return{root:{overflowX:"hidden",maxWidth:600,margin:"30px auto",paddingLeft:e.spacing(1),paddingTop:30},nested:{paddingLeft:e.spacing(1.5)},leftBorder:{borderLeft:"4px #0058AE solid",marginLeft:15},nestedTwice:{paddingLeft:e.spacing(2)},nestedFile:{paddingLeft:e.spacing(5)},blueFont:{color:"#0058AE"}}})),As=function(e){var t=e.fields,n=e.moduleIndex,a=e.subjectIndex,o=e.topics,s=e.lessons,i=e.assignments,c=e.tests,l=e.handleOpenFolder,u=e.updateCategories,d=e.modulesFormValues,m=e.onSelectDocument,p=e.t,f=xs(),g=r.a.useState(-1),b=Object(mo.a)(g,2),h=b[0],E=b[1],y=r.a.useState(-1),T=Object(mo.a)(y,2),S=T[0],k=T[1],w=r.a.useState(-1),O=Object(mo.a)(w,2),C=O[0],x=O[1];return r.a.createElement(v,null,(t||[]).map((function(e,t){var g=-1!==C&&C!=="[".concat(n,"][").concat(a,"][").concat(t,"]");return r.a.createElement(v,{key:"module[".concat(n,"]subject[").concat(a,"]topic[").concat(t,"]")},r.a.createElement(Mr.a,{style:{opacity:g?.2:1,cursor:g?"auto":"pointer",borderLeft:g||-1===C?"":"4px #0058AE solid",marginLeft:15},button:!0,onClick:function(){var e,r;g||(e="topic",r="[".concat(n,"][").concat(a,"][").concat(t,"]"),"module"===e&&E(h===r?-1:r),"subject"===e&&k(S===r?-1:r),"topic"===e&&x(C===r?-1:r))}},r.a.createElement(lr.a,{style:{flex:"none"},primary:"".concat(ys(t+1),".")}),r.a.createElement(ca.a,{simple:!0,disabled:g,label:"".concat(p("instructorModules.topic")," ").concat(t+1),name:"modules.".concat(n,".subjects.").concat(a,".topics.").concat(t,".topicName"),onBlur:u,component:fa}),r.a.createElement(us.a,null,r.a.createElement(Na.a,{style:{cursor:g?"auto":"pointer"},onClick:function(e){g||(e.stopPropagation(),l([n,a,t]))}},r.a.createElement(gs.a,null))),r.a.createElement(Na.a,{style:{cursor:g?"auto":"pointer"},onClick:function(e){if(!g){e.stopPropagation();var r=(d||{}).modules,o=Object(Pr.a)(r);(((((o||[])[n]||{}).subjects||[])[a]||{}).topics||[]).splice(t,1);u(e,o,"deleting")}}},r.a.createElement(Ma.a,{fontSize:"small",className:f.blueFont})),C==="[".concat(n,"][").concat(a,"][").concat(t,"]")?r.a.createElement(hs.a,null):r.a.createElement(vs.a,null)),r.a.createElement(ds.a,{in:C==="[".concat(n,"][").concat(a,"][").concat(t,"]"),timeout:"auto",unmountOnExit:!0},r.a.createElement("div",{className:f.leftBorder},((o[t]||{}).folder||[]).map((function(e){var n,a,l=((o[t]||{}).folder||[]).find((function(e){return"lesson"===e.documentType}))||{},u=((o[t]||{}).folder||[]).find((function(e){return"test"===e.documentType}))||{},d=((o[t]||{}).folder||[]).find((function(e){return"assignment"===e.documentType}))||{};return"test"===e.documentType&&(n=(c||[]).find((function(t){return e.documentId===t._id}))),"assignment"===e.documentType&&(n=(i||[]).find((function(t){return e.documentId===t._id}))),"lesson"===e.documentType&&(n=(s||[]).find((function(t){return e.documentId===t._id}))),n?("test"===e.documentType&&(a=r.a.createElement(Ss.a,{fontSize:"small",color:"primary"})),"assignment"===e.documentType&&(a=r.a.createElement(ws.a,{fontSize:"small",color:"primary"})),"lesson"===e.documentType&&(a=r.a.createElement(Cs.a,{fontSize:"small",color:"primary"})),r.a.createElement(v,{key:e.documentId},["assignment","test","lesson"].map((function(t,n){var a;return 0===n&&(a=d),1===n&&(a=u),2===n&&(a=l),e.documentId===a.documentId&&e.documentType===t?r.a.createElement(Mr.a,{key:"".concat(t,"[document.documentId]"),style:{marginLeft:15}},r.a.createElement(lr.a,{primary:p("instructorModules.".concat(t,"s"))})):null})),r.a.createElement(Mr.a,{className:f.nestedFile,key:e.documentId,button:!0,onClick:function(){g||m(e.documentType,e.documentId)}},r.a.createElement(us.a,null,a),"test"===e.documentType&&r.a.createElement(lr.a,{primary:"".concat(n.testName)}),"assignment"===e.documentType&&r.a.createElement(lr.a,{primary:"".concat(n.testName)}),"lesson"===e.documentType&&r.a.createElement(lr.a,{primary:"".concat(n.lessonName)})))):null})))))})),r.a.createElement(Mr.a,{button:!0,onClick:function(){return t.push()}},r.a.createElement(ir.a,{className:f.blueFont},r.a.createElement(ps.a,null)),r.a.createElement(et.a,{className:f.blueFont},p("instructorModules.buttons.addTopic"))))},Fs=function(e){var t=e.fields,n=(e.meta.error,e.moduleIndex),a=e.module,o=e.lessons,s=e.tests,i=e.assignments,c=e.subjects,l=e.handleOpenFolder,u=e.updateCategories,d=e.formData,m=e.onSelectDocument,p=(e.width,e.t),f=xs(),g=r.a.useState(-1),b=Object(mo.a)(g,2),h=b[0],E=b[1],y=r.a.useState(-1),T=Object(mo.a)(y,2),S=T[0],k=T[1],w=r.a.useState(-1),O=Object(mo.a)(w,2),C=O[0],x=O[1];return r.a.createElement(v,null,(t||[]).map((function(e,t){var g=-1!==S&&S!=="node[".concat(n,"][").concat(t,"]");return r.a.createElement(v,{key:"module[".concat(n,"]subject[").concat(t,"]")},r.a.createElement(Mr.a,{style:{opacity:g?.2:1,cursor:g?"auto":"pointer",borderLeft:g||-1===S?"":"4px #0058AE solid",marginLeft:15},button:!0,onClick:function(){var e,a;g||(e="subject",a="node[".concat(n,"][").concat(t,"]"),"module"===e&&E(h===a?-1:a),"subject"===e&&k(S===a?-1:a),"topic"===e&&x(C===a?-1:a))},className:f.nested},r.a.createElement(lr.a,{style:{flex:"none"},primary:"".concat(t+1,".")}),r.a.createElement(ca.a,{simple:!0,disabled:g,name:"modules.".concat(n,".subjects.").concat(t,".subjectName"),onBlur:u,component:fa,label:"".concat(p("instructorModules.subject")," ").concat(t+1)}),r.a.createElement(us.a,null,r.a.createElement(Na.a,{style:{cursor:g?"auto":"pointer"},onClick:function(e){g||(e.stopPropagation(),l([n,t]))}},r.a.createElement(gs.a,null))),r.a.createElement(Na.a,{style:{cursor:g?"auto":"pointer"},onClick:function(e){if(!g){e.stopPropagation();var a=(d||{}).modules,r=Object(Pr.a)(a);(((r||[])[n]||{}).subjects||[]).splice(t,1);u(e,r,"deleting")}}},r.a.createElement(Ma.a,{fontSize:"small",className:f.blueFont})),S==="node[".concat(n,"][").concat(t,"]")?r.a.createElement(hs.a,null):r.a.createElement(vs.a,null)),r.a.createElement(ds.a,{in:S==="node[".concat(n,"][").concat(t,"]"),timeout:"auto",unmountOnExit:!0},r.a.createElement("div",{className:f.leftBorder},((c[t]||{}).folder||[]).map((function(e){var n,a,l=((c[t]||{}).folder||[]).find((function(e){return"lesson"===e.documentType}))||{},u=((c[t]||{}).folder||[]).find((function(e){return"test"===e.documentType}))||{},d=((c[t]||{}).folder||[]).find((function(e){return"assignment"===e.documentType}))||{};return"test"===e.documentType&&(n=(s||[]).find((function(t){return e.documentId===t._id}))),"assignment"===e.documentType&&(n=(i||[]).find((function(t){return e.documentId===t._id}))),"lesson"===e.documentType&&(n=(o||[]).find((function(t){return e.documentId===t._id}))),n?("test"===e.documentType&&(a=r.a.createElement(Ss.a,{fontSize:"small",color:"primary"})),"assignment"===e.documentType&&(a=r.a.createElement(ws.a,{fontSize:"small",color:"primary"})),"lesson"===e.documentType&&(a=r.a.createElement(Cs.a,{fontSize:"small",color:"primary"})),r.a.createElement(v,{key:e.documentId},["assignment","test","lesson"].map((function(t,n){var a;return 0===n&&(a=d),1===n&&(a=u),2===n&&(a=l),e.documentId===a.documentId&&e.documentType===t?r.a.createElement(Mr.a,{key:"".concat(t,"[document.documentId]"),style:{marginLeft:15}},r.a.createElement(lr.a,{primary:p("instructorModules.".concat(t,"s"))})):null})),r.a.createElement(Mr.a,{className:f.nestedFile,key:e.documentId,button:!0,onClick:function(){g||m(e.documentType,e.documentId)}},r.a.createElement(us.a,null,a),"test"===e.documentType&&r.a.createElement(lr.a,{primary:"".concat(n.testName)}),"assignment"===e.documentType&&r.a.createElement(lr.a,{primary:"".concat(n.testName)}),"lesson"===e.documentType&&r.a.createElement(lr.a,{primary:"".concat(n.lessonName)})))):null})),r.a.createElement(Br.a,{component:"div",disablePadding:!0,subheader:r.a.createElement(et.a,{variant:"h6",align:"center",className:f.blueFont},p("instructorModules.topics"))},r.a.createElement(rr.a,{name:"modules.".concat(n,".subjects.").concat(t,".topics"),subjectIndex:t,component:As,moduleIndex:n,t:p,module:a,subject:c[t],topics:(c[t]||{}).topics,tests:s,assignments:i,lessons:o,handleOpenFolder:function(e){l(e)},updateCategories:function(e,t,n){return u(e,t,n)},modulesFormValues:d,onSelectDocument:function(e,t){m(e,t)}})))))})),r.a.createElement(Mr.a,{button:!0,onClick:function(){return t.push()}},r.a.createElement(ir.a,{className:f.blueFont},r.a.createElement(ps.a,null)),r.a.createElement(et.a,{className:f.blueFont},p("instructorModules.buttons.addSubject"))))},Ds=function(e){var t=e.fields,n=e.meta,a=(n.error,n.submitFailed,e.tests),o=e.assignments,s=e.lessons,i=e.modules,c=e.handleOpenFolder,l=e.updateCategories,u=e.modulesFormValues,d=e.onSelectDocument,m=e.width,p=e.t,f=xs(),g=r.a.useState(-1),b=Object(mo.a)(g,2),h=b[0],E=b[1],y=r.a.useState(-1),T=Object(mo.a)(y,2),S=T[0],k=T[1],w=r.a.useState(-1),O=Object(mo.a)(w,2),C=O[0],x=O[1],A=function(e,t){"module"===e&&E(h===t?-1:t),"subject"===e&&k(S===t?-1:t),"topic"===e&&x(C===t?-1:t)};return r.a.createElement(v,null,r.a.createElement(v,null,(t||[]).map((function(e,t){var n,g=((i[t]||{}).folder||[]).find((function(e){return"lesson"===e.documentType}))||{},b=((i[t]||{}).folder||[]).find((function(e){return"test"===e.documentType}))||{},E=((i[t]||{}).folder||[]).find((function(e){return"assignment"===e.documentType}))||{},y=-1!==h&&h!=="module[".concat(t,"]");return r.a.createElement("div",{key:"module[".concat(t,"]")},r.a.createElement(Mr.a,{"aria-labelledby":"nested-list-subheader",onClick:function(){y||A("module","module[".concat(t,"]"))},style:{opacity:y?.2:1,cursor:y?"auto":"pointer",color:"white",background:"#0058AE"}},r.a.createElement(lr.a,{style:{display:"block"},primary:"".concat(p("instructorModules.module")," ").concat(t+1)})),r.a.createElement(Mr.a,{style:{opacity:y?.2:1,cursor:y?"auto":"pointer",margin:0},className:y||-1===h?"":f.leftBorder,button:!y,onClick:function(){y||A("module","module[".concat(t,"]"))}},r.a.createElement(ca.a,{simple:!0,disabled:y,name:"modules.".concat(t,".moduleName"),onBlur:function(e){l(e)},categories:!0,component:fa,label:"".concat(p("instructorModules.module")," ").concat(t+1)}),r.a.createElement(us.a,null,r.a.createElement(Na.a,{style:{cursor:y?"auto":"pointer"},onClick:function(e){y||(e.stopPropagation(),c([t]))}},r.a.createElement(gs.a,null))),r.a.createElement(Na.a,{style:{cursor:y?"auto":"pointer"},onClick:function(e){if(!y){e.stopPropagation();var n=(u||{}).modules,a=Object(Pr.a)(n);(a||[]).splice(t,1);l(e,a,"deleting")}}},r.a.createElement(Ma.a,{fontSize:"small",className:f.blueFont})),h==="module[".concat(t,"]")?r.a.createElement(hs.a,null):r.a.createElement(vs.a,null)),r.a.createElement(ds.a,{in:h==="module[".concat(t,"]"),timeout:"auto",unmountOnExit:!0},r.a.createElement("div",{style:{margin:0},className:f.leftBorder},((i[t]||{}).folder||[]).map((function(e){var t,n;return"test"===e.documentType&&(t=(a||[]).find((function(t){return e.documentId===t._id}))),"assignment"===e.documentType&&(t=(o||[]).find((function(t){return e.documentId===t._id}))),"lesson"===e.documentType&&(t=(s||[]).find((function(t){return e.documentId===t._id}))),t?("test"===e.documentType&&(n=r.a.createElement(Ss.a,{fontSize:"small",color:"primary"})),"assignment"===e.documentType&&(n=r.a.createElement(ws.a,{fontSize:"small",color:"primary"})),"lesson"===e.documentType&&(n=r.a.createElement(Cs.a,{fontSize:"small",color:"primary"})),r.a.createElement(v,{key:e.documentId},["assignment","test","lesson"].map((function(t,n){var a;return 0===n&&(a=E),1===n&&(a=b),2===n&&(a=g),e.documentId===a.documentId&&e.documentType===t?r.a.createElement(Mr.a,{key:"".concat(t,"[document.documentId]"),style:{marginLeft:15}},r.a.createElement(lr.a,{primary:p("instructorModules.".concat(t,"s"))})):null})),r.a.createElement(Mr.a,{className:f.nestedFile,onClick:function(){if(y)return null;d(e.documentType,e.documentId)},button:!0,key:e.documentId},r.a.createElement(us.a,null,n),"test"===e.documentType&&r.a.createElement(lr.a,{primary:"".concat(t.testName)}),"assignment"===e.documentType&&r.a.createElement(lr.a,{primary:"".concat(t.testName)}),"lesson"===e.documentType&&r.a.createElement(lr.a,{primary:"".concat(t.lessonName)})))):null})),r.a.createElement(Br.a,{component:"div",disablePadding:!0,subheader:r.a.createElement(et.a,{variant:"h6",className:f.blueFont,align:"center"},p("instructorModules.subjects"))},r.a.createElement(rr.a,(n={name:"modules.".concat(t,".subjects"),t:p,moduleIndex:t,component:Fs},Object(po.a)(n,"moduleIndex",t),Object(po.a)(n,"module",i[t]),Object(po.a)(n,"subjects",(i[t]||{}).subjects),Object(po.a)(n,"tests",a),Object(po.a)(n,"assignments",o),Object(po.a)(n,"lessons",s),Object(po.a)(n,"width",m),Object(po.a)(n,"handleOpenFolder",(function(e){c(e)})),Object(po.a)(n,"updateCategories",(function(e,t,n){return l(e,t,n)})),Object(po.a)(n,"formData",u),Object(po.a)(n,"onSelectDocument",(function(e,t){d(e,t)})),n))))))}))),r.a.createElement(Mr.a,{button:!0,onClick:function(){return t.push()}},r.a.createElement(ir.a,{className:f.blueFont},r.a.createElement(ps.a,null)),r.a.createElement(et.a,{className:f.blueFont},p("instructorModules.buttons.addModule"))))};var _s=Object(_t.a)({form:"category",enableReinitialize:!0,destroyOnUnmount:!1})((function(e){var t=e.initialValues,n=e.token,a=e.formValues,o=e.course,s=e.updateCategory,i=e.loading,c=e.openModal,l=e.closeModal,u=e.width,d=Object(St.a)().t,m=xs(),p=(a||{}).modules,f=(o||{}).lessons,g=((o||{}).tests||[]).filter((function(e){return!e.assignment})),b=((o||{}).tests||[]).filter((function(e){return e.assignment}));return r.a.createElement(v,null,r.a.createElement(to,{active:i,transparent:!0}),r.a.createElement(Br.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:m.root},r.a.createElement(rr.a,{name:"modules",component:Ds,tests:g,width:u,assignments:b,modules:p||[],lessons:f,t:d,updateCategories:function(e,r,i){!function(e,r,i){var c=!!t._id;s("deleting"===i?{modules:r}:a,n,c,o._id),l()}(0,r,i)},handleOpenFolder:function(e){!function(e){var t,n=e,a=(p||[]).findIndex((function(e,t){return t===(n||[])[0]})),r=(((p||[]).find((function(e,t){return t===(n||[])[0]}))||{}).subjects||[]).findIndex((function(e,t){return t===(n||[])[1]})),o=(((((p||[]).find((function(e,t){return t===(n||[])[0]}))||{}).subjects||[]).find((function(e,t){return t===(n||[])[1]}))||{}).topics||[]).findIndex((function(e,t){return t===(n||[])[2]}));a>-1&&(t="modules.".concat(a,".folder")),r>-1&&(t="modules.".concat(a,".subjects.").concat(r,".folder")),o>-1&&(t="modules.".concat(a,".subjects.").concat(r,".topics.").concat(o,".folder")),c({folderId:e,tests:g,assignments:b,lessons:f,field:t},"contents")}(e)},modulesFormValues:a,onSelectDocument:function(e,t){if("lesson"===e){var n=o.lessons.find((function(e){return e._id===t}));c(n,"lesson")}if("test"===e||"assignment"===e){var a=o.tests.find((function(e){return e._id===t}));c(a,"testSummary")}}})))})),Is=Object(c.b)((function(e){return{formValues:Object(Ve.a)("category")(e),openFolderPath:e.instructorModules.openFolderPath,token:e.authentication.token,initialValues:e.common.modules,course:e.common.selectedCourse,loading:e.instructorModules.loading,width:e.common.width}}),(function(e){return{updateCategory:function(t,n,a,r){e(X(t,n,a,r))},clearModalStates:function(){return e({type:"CLEAR_INSTRUCTOR_MODAL_STATES"})},openModal:function(t,n){return e(Ne(t,n))},closeModal:function(){return e({type:"CLOSE_MODAL"})}}}))(_s),js=n(222),Rs=n.n(js),Ns=Object(c.b)((function(e){return{course:e.common.selectedCourse,token:e.authentication.token,notifications:e.common.notifications,students:e.common.students}}),(function(e){return{editTest:function(t,n){e(He(t,!1,n)),e({type:"SET_EDITING"})},openModal:function(t,n){return e(Ne(t,n))}}}))((function(e){var t=e.course,n=e.token,o=e.editTest,s=e.openModal,i=e.isTest,c=e.isAssignment,l=e.students,u=Object(St.a)().t,d=Object(a.useState)(-1),m=Object(mo.a)(d,2),p=m[0],f=m[1],g=Object(a.useState)([]),b=Object(mo.a)(g,2),h=b[0],E=b[1],y=[];(l||[]).forEach((function(e){e.testResults.forEach((function(e){y.push(e.test)}))})),Object(a.useEffect)((function(){return function(){h.forEach((function(e){clearTimeout(e)}))}}),[h]);return r.a.createElement(v,null,r.a.createElement(Br.a,null,(t.tests||[]).map((function(e,t){return e.assignment&&i||!e.assignment&&c?null:r.a.createElement(v,{key:e._id},r.a.createElement(Mr.a,{dense:!0,button:!0,onClick:function(){s(e,"testSummary")}},r.a.createElement(lr.a,{primary:e.testName}),r.a.createElement(lr.a,{secondary:e.testType.charAt(0).toUpperCase()+e.testType.slice(1)}),r.a.createElement(Na.a,{onClick:function(t){t.stopPropagation(),s(e,"resetTest")}},r.a.createElement(Rs.a,{color:p===t?"primary":"inherit"})),r.a.createElement(Na.a,{disabled:p===t,onClick:function(a){return function(e,t,a){if(e.stopPropagation(),y.includes(t._id)){f(a);var r=setTimeout((function(){f(-1),clearTimeout(r)}),3e3);E([].concat(Object(Pr.a)(h),[r]))}else o(t._id,n)}(a,e,t)}},r.a.createElement(ws.a,{color:p!==t?"primary":"secondary"})),r.a.createElement(Na.a,{onClick:function(t){t.stopPropagation(),s(e,"deleteTest")}},r.a.createElement(Ma.a,{color:"secondary"}))),y.includes(e._id)&&p===t&&r.a.createElement(et.a,{variant:"caption",color:"error"},u(i?"testForm.errors.resetTestToMakeChanges":"testForm.errors.resetAssignmentToMakeChanges")))}))))})),Ls=Object(lt.a)({overrides:{MuiButton:{root:{marginBottom:"10px",marginTop:"10px",margin:"0 10px"},startIcon:{marginLeft:"0",marginRight:"0"},outlinedPrimary:{color:"#2196f3","&:hover":{border:"1px solid #1976d2",backgroundColor:"rgba(33,150,243,0.4)",color:"#1976d2"}}},MuiExpansionPanelDetails:{root:{flexDirection:"column"}}}}),Ps=function(e){return r.a.createElement(f.a,{theme:Ls},e.children)},Bs=n(1243),Ms=n(1245),qs=n(1244),Us=Object(Ye.a)((function(e){return{root:{width:"100%",marginBottom:"20px"},heading:{fontSize:e.typography.pxToRem(15),flexShrink:0},headingModules:{fontSize:e.typography.pxToRem(18),flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,marginLeft:"10px"},flex:{display:"flex",marginTop:10,justifyContent:"space-between"},searchItem:{flexGrow:1,width:"98%"}}})),Qs=function(e){var t,n=e.index,o=e.disabled,s=e.summary,i=e.expandedSummary,c=e.secondaryText,l=e.noDetails,u=e.children,d=Us(),m=r.a.useState(!1),p=Object(mo.a)(m,2),f=p[0],g=p[1];return r.a.createElement(Ps,null,r.a.createElement(a.Fragment,null,r.a.createElement(Bs.a,{disabled:o,expanded:f===n,onChange:l?null:(t=n,function(e,n){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),g(n?t:-1)})},r.a.createElement(qs.a,{expandIcon:l?null:r.a.createElement(vs.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement("div",null,r.a.createElement(et.a,{className:d.heading},f&&-1!==f&&i||s),r.a.createElement(et.a,{className:d.secondaryHeading},c))),l?null:r.a.createElement(Ms.a,null,u))))},Ws=Object(Ye.a)((function(e){return{formControl:{minWidth:80,width:"100%",marginBottom:"20px"},textLabel:{margin:"0 3px 10px 3px"},SelectField:{boxSizing:"border-box",border:"1px solid #C2C2C2",borderRadius:"3px",padding:"7px",outline:"none",margin:"0 3px 0 0"}}})),Hs=function(e){var t=e.input,n=e.meta,a=void 0===n?{}:n,o=e.options,s=e.label,i=e.fullWidth,c=e.simple,l=e.textLabel,u=e.error,d=e.disabled,m=Ws(),p=o.map((function(e){return r.a.createElement("option",{key:e.primaryText,value:e.value},e.primaryText)})),f=r.a.useRef(null),g=r.a.useState(0),b=Object(mo.a)(g,2),h=b[0],E=b[1];r.a.useEffect((function(){E((f.current||200).offsetWidth)}),[]);var v=r.a.createElement(la.a,{variant:"outlined",className:m.formControl},r.a.createElement(da.a,{ref:f},s),r.a.createElement(ur.a,Object.assign({disabled:d,native:!0,renderValue:function(){return t.value},labelWidth:h,className:m.cssOutlinedInput},t),p),r.a.createElement(ua.a,null,(a.error||u)&&a.touched?a.error||u:""));return c&&(v=r.a.createElement("div",null,l&&r.a.createElement("div",{className:m.textLabel},"".concat(l)),r.a.createElement("select",Object.assign({value:l?"":s,className:m.SelectField,style:i?{width:"95%"}:null},t),!l&&r.a.createElement("option",{hidden:!0,key:-1,value:s},s),p),a.error&&a.touched&&r.a.createElement("span",{style:{color:"#E91313",fontSize:"0.7em",display:"block"}},a.error))),v},zs=Object(Ye.a)((function(e){return{root:{width:"100%",marginBottom:"20px"},heading:{fontSize:e.typography.pxToRem(15),flexShrink:0},headingModules:{fontSize:e.typography.pxToRem(18),flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,marginLeft:"10px"},flex:{display:"flex",marginTop:10,justifyContent:"space-between"},searchItem:{flexGrow:1,width:"98%"},createButton:{margin:"20px 0 20px 0"}}})),Gs=Object(c.b)((function(e){return{questions:e.instructorQuestion.questionBank,questionEditing:e.instructorQuestion.questionEditing,editing:e.common.editing,creatingQuestionType:e.instructorQuestion.creatingQuestionType}}),(function(e){var t;return t={addQToTest:function(t,n){e(Object(Dt.a)("testForm",t,n))},setQuestionForm:function(t,n,a){e(function(e,t,n){return{type:"SET_QUESTION_FORM",questionType:e,editing:t,questionFormData:n}}(t,!!n,a)),e(Ne({qType:t,questionFormData:a},"question"))},setQuestionEditing:function(t,n){return e($(t))}},Object(po.a)(t,"setQuestionEditing",(function(t,n){return e($(t))})),Object(po.a)(t,"setEditing",(function(){return e({type:"SET_EDITING"})})),t}))((function(e){var t=e.questions,n=(e.questionEditing,e.setQuestionForm),a=e.setQuestionEditing,o=e.selecting,s=e.questionType,i=e.indexToAdd,c=e.onBlockSync,l=(e.creatingQuestionType,e.addQToTest),u=e.setEditing,d=Object(St.a)().t,m=zs(),p=r.a.useState(""),f=Object(mo.a)(p,2),g=f[0],b=f[1],h=r.a.useState(""),E=Object(mo.a)(h,2),y=E[0],T=E[1],S=r.a.useState(""),k=Object(mo.a)(S,2),w=k[0],O=k[1],C=[{value:"",primaryText:""},{value:"easy",primaryText:d("questions.easy")},{value:"medium",primaryText:d("questions.medium")},{value:"hard",primaryText:d("questions.hard")}],x=(t||[]).filter((function(e){return""!==e.language||null!==e.language})).reduce((function(e,t){return e.map((function(e){return e.language})).indexOf(t.language)<0&&e.push(t),e}),[]).map((function(e){return{value:e.language,primaryText:e.language}})),A=0,F=0,D=0,_=0;return r.a.createElement(v,null,!o&&r.a.createElement(ot.a,{variant:"outlined",color:"primary",type:"button",className:m.createButton,onClick:function(e){var t;e.stopPropagation(),"Multiple-choice questions"===s&&(t="mc"),"Essay questions"===s&&(t="essay"),"Speaking questions"===s&&(t="speaking"),"Fill-in-the-blanks questions"===s&&(t="fillInBlank"),n(t,!1,function(e,t){var n=t("questionForm.fillblanksSectionDefaultText"),a={difficulty:"medium",language:t("questionForm.english")};return"mc"===e&&(a=Object(At.a)(Object(At.a)({},a),{},{mcQuestion:{answers:["".concat(t("questionForm.option")," 1"),"".concat(t("questionForm.option")," 2")],correctAnswers:["1"]}})),"essay"===e&&(a=Object(At.a)(Object(At.a)({},a),{},{essayQuestion:{question:""}})),"speaking"===e&&(a=Object(At.a)(Object(At.a)({},a),{},{speakingQuestion:[{audioAnswer:!1,audioQuestion:!1}]})),"fillInBlank"===e&&(a=Object(At.a)(Object(At.a)({},a),{},{fillBlankQuestions:{question:n,answers:[{marks:1,selectableAnswer:!1,answer:t("questionForm.pieceOfText")}],correctAnswers:[t("questionForm.pieceOfText")]}})),a}(t,d))}},d("questions.buttons.createQuestion")),r.a.createElement(et.a,{variant:"subtitle1"},d("questions.filterQuestions")),r.a.createElement("div",{className:m.flex},r.a.createElement("div",{className:m.searchItem},r.a.createElement(Hs,{fullWidth:!0,simple:!0,textLabel:d("questions.difficulty"),label:"difficulty",options:C,input:{onChange:function(e){b(e.target.value)},value:g}})),r.a.createElement("div",{className:m.searchItem}," ",r.a.createElement(Hs,{fullWidth:!0,simple:!0,textLabel:d("questions.language"),label:"language",options:[{primaryText:"",value:""}].concat(Object(Pr.a)(x)),input:{onChange:function(e){O(e.target.value)},value:w}})),r.a.createElement("div",{className:m.searchItem}," ",r.a.createElement(fa,{label:"Tag",width:"97.5%",simple:!0,textLabel:d("questions.tag"),input:{onChange:function(e){T(e.target.value)},value:y}}))),r.a.createElement(ot.a,{variant:"outlined",color:"secondary",type:"button",size:"small",onClick:function(){b(""),T(""),O("")},style:{margin:"5px 0 0 0"}},d("questions.buttons.resetFilters")),(t||[]).filter((function(e){if(""===w||e.language===w)return e})).filter((function(e){if(""===g||e.difficulty===g)return e})).filter((function(e){if((e.tags||[]).find((function(e){if(e.toLowerCase().includes(y.toLowerCase()))return e}))||""===y)return e})).map((function(e,d){var m;if("mc"===e.type&&(A+=1),"essay"===e.type&&(F+=1),"speaking"===e.type&&(D+=1),"fillInBlank"===e.type&&(_+=1),"Multiple-choice questions"===s&&(m="mc"),"Essay questions"===s&&(m="essay"),"Speaking questions"===s&&(m="speaking"),"Fill-in-the-blanks questions"===s&&(m="fillInBlank"),e.type===m)return r.a.createElement(Br.a,{key:e._id},r.a.createElement(Mr.a,{dense:!0,button:!0,onClick:function(r){var s;o?(r.stopPropagation(),function(e,t,n,a){if("mc"===e.type&&n("mcQuestions.".concat(t),Object(At.a)(Object(At.a)({},e.mcQuestion),{},{marks:1})),"essay"===e.type&&n("essayQuestions.".concat(t),Object(At.a)(Object(At.a)({},e.essayQuestion),{},{marks:1})),"speaking"===e.type){var r={questionRecordedBlob:(e.speakingQuestion||{}).audioQuestion&&""!==(e.speakingQuestion||{}).audioQuestion?(e.speakingQuestion||{}).audioQuestion:"",recordedBlob:(e.speakingQuestion||{}).audio&&""!==(e.speakingQuestion||{}).audio?(e.speakingQuestion||{}).audio:"",question:(e.speakingQuestion||{}).question,audioAnswer:!!(e.speakingQuestion||{}).audio,audioQuestion:!!(e.speakingQuestion||{}).audioQuestion,audioFile:(e.speakingQuestion||{}).audio,audioFileQuestion:(e.speakingQuestion||{}).audioQuestion,marks:1};n("speakingQuestions.".concat(t),r)}"fillInBlank"===e.type&&(n("fillBlankQuestions",function(e){var t=(e.fillBlankQuestions||{}).blanks||[],n=t.map((function(e,t){var n=e.audio&&""!==e.audio,a=(e.incorrectAnswers||[]).filter((function(e){return e})).reduce((function(e,t,n){var a;return 0===n&&(a="One"),1===n&&(a="Two"),2===n&&(a="Three"),e["incorrectAnswer".concat(a)]=t,e}),{});return{answer:e.correctAnswer,selectableAnswer:e.selectableAnswer,answerOptions:a,marks:1,audio:n,browserAudioFile:n?e.audio:"",audioFile:n?e.audio:null}}));return{question:(e.fillBlankQuestions||{}).question,answers:n,correctAnswers:t.map((function(e){return e.correctAnswer}))}}(e)),a())}((s=e._id,(t||[]).find((function(e){return s===e._id}))),i,(function(e,t){l(e,t)}),c)):(n(e.type,!0,function(e,t){var n=(t||[]).find((function(t){return t._id===e})),a=(n||{}).speakingQuestion||{},r=n;"speaking"===(n||{}).type&&(r=Object(At.a)(Object(At.a)({},n),{},{speakingQuestion:[{question:a.question,questionRecordedBlob:a.audioQuestion?a.audioQuestion:"",recordedBlob:a.audio?a.audio:"",audioFileQuestion:a.audioQuestion,audioFile:a.audio,audioAnswer:!(!a.audio||""===a.audio),audioQuestion:!(!a.audioQuestion||""===a.audioQuestion)}]}));var o=(n||{}).fillBlankQuestions||{},s=o.blanks||[];return"fillInBlank"===(n||{}).type&&(r=Object(At.a)(Object(At.a)({},n),{},{fillBlankQuestions:{question:o.question,answers:s.map((function(e){var t=(e.incorrectAnswers||[]).filter((function(e){return e})).reduce((function(e,t,n){var a;return 0===n&&(a="One"),1===n&&(a="Two"),2===n&&(a="Three"),e["incorrectAnswer".concat(a)]=t,e}),{});return{answer:e.correctAnswer,audioFile:e.audio,browserAudioFile:e.audio?e.audio:"",audio:!(!e.audio||""===e.audio),selectableAnswer:e.selectableAnswer,answerOptions:t}})),correctAnswers:s.map((function(e){return e.correctAnswer}))}})),r}(e._id,t)),a(e._id),u())}},o?r.a.createElement(us.a,null,r.a.createElement(ir.a,null)):r.a.createElement(us.a,null,r.a.createElement(ws.a,null)),"mc"===e.type&&r.a.createElement(lr.a,{primary:A+" "+((e.mcQuestion||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."}),"essay"===e.type&&r.a.createElement(lr.a,{primary:F+" "+((e.essayQuestion||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."}),"speaking"===e.type&&r.a.createElement(lr.a,{primary:(D+" "+(e.speakingQuestion||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."}),"fillInBlank"===e.type&&r.a.createElement(lr.a,{primary:(_+" "+(e.fillBlankQuestions||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."})))})))})),Vs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={isValid:!0,resourcesAreValid:!0};return t.resources=(e.resources||[]).map((function(n,a){var r;return(n||{}).resourceName&&(n.resourceName||"").trim()||(r=na.t("resources.errors.giveResourceName")),(n||{}).resource||(r=na.t("resources.errors.selectResource")),(n||{}).resource instanceof File&&(n||{}).resource.size>1e6*e.instructorFileSizeLimit&&(console.log("exceeded size"),r=na.t("resources.errors.fileSize",{size:"".concat(e.instructorFileSizeLimit,"MB")})),(r||r)&&(t.resourcesAreValid=!1,t.isValid=!1),{resourceName:r}})),t},$s=function(e){var t=e.fields,n=e.formValues,a=void 0===n?{}:n,o=e.changeDocument,s=e.openModal,i=e.t;return r.a.createElement(v,null,r.a.createElement(Br.a,null,t.map((function(e,n){var c,l=((a.resources||[])[n]||{}).loadedResource,u=((a.resources||[])[n]||{}).resource instanceof File?((((a.resources||[])[n]||{}).resource||{}).name||"").toLowerCase().split(".").pop():(((a.resources||[])[n]||{}).resource||"").toLowerCase().split(".").pop();return"pdf"===u&&(c=r.a.createElement("i",{className:"far fa-file-pdf fa-2x"})),"docx"!==u&&"doc"!==u||(c=r.a.createElement("i",{className:"fas fa-file-word fa-2x"})),"jpeg"!==u&&"jpg"!==u&&"jfif"!==u||(c=r.a.createElement("i",{className:"fas fa-file-image fa-2x"})),"avi"!==u&&"mp4"!==u||(c=r.a.createElement("i",{className:"far fa-file-video fa-2x"})),console.log("ext :",u),r.a.createElement(Mr.a,{key:n},l&&c&&r.a.createElement("span",{style:{marginRight:20,cursor:"pointer"},onClick:function(e){e.stopPropagation(),s({loadedFile:l,ext:u},"courseResource")}},c),r.a.createElement(ca.a,{simple:!0,label:i("resources.buttons.resourceName"),name:"resources.".concat(n,".resourceName"),component:fa,errorAbsolutePosition:!0}),r.a.createElement(ca.a,{name:"resources.".concat(n,".resource"),component:Pa,loadedFile:l,mimeTypesAllowed:"video/*, image/jpeg, application/pdf, .doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",extensionsAllowed:["jpeg","jpg","jfif","pdf","docx","doc","mp4","avi"],onChangeFile:function(e){o("resources.".concat(n,".loadedResource"),e)},preview:!1,compressImage:!0,index:n,uploadButtonText:i("resources.buttons.select")}),r.a.createElement(Na.a,{onClick:function(e){e.stopPropagation(),t.remove(n)}},r.a.createElement(Ma.a,{fontSize:"small",style:{color:"red"}})))}))),r.a.createElement(Mr.a,{button:!0,onClick:function(){return t.push()}},r.a.createElement(ir.a,{style:{color:"#0058AE"}}),r.a.createElement(et.a,{style:{color:"#0058AE"}},i("resources.buttons.addResource"))))},Ys=Object(_t.a)({form:"courseResources",enableReinitialize:!1,destroyOnUnmount:!0,validate:Vs})((function(e){var t=e.token,n=e.course,o=(e.modalDocument,e.formValues),s=e.updateResources,i=e.changeDocument,c=e.initialValues,l=e.openModal,u=e.touchField,d=e.configuration,m=Object(a.useState)(null),p=Object(mo.a)(m,2),f=p[0],g=p[1];Object(a.useEffect)((function(){var e=c.resources.map((function(e){return e.resource}));g(e)}),[]);var b=Object(St.a)().t;return r.a.createElement(v,null,r.a.createElement(rr.a,{name:"resources",formValues:o,component:$s,changeDocument:i,openModal:l,t:b}),r.a.createElement(ot.a,{variant:"outlined",color:"default",type:"button",title:"Update resources",onClick:function(){var e=Vs(o,d).isValid;if(o.resources.forEach((function(e,t){u("resources.".concat(t,".resourceName")),u("resources.".concat(t,".resource"))})),e){var a=o.resources.map((function(e){return e.resource})),r=(f||[]).filter((function(e){if(!a.includes(e))return e}));s(n._id,o.resources,r,t)}}},b("resources.buttons.updateResources")))})),Js=Object(c.b)((function(e){var t=((e.common.courses||[]).find((function(t){return t._id===(e.common.selectedCourse||{})._id}))||{}).resources||[],n=e.common.configuration.instructorFileSizeLimit,a=0===t.length?[{resourceName:""}]:t;return{formValues:Object(Ve.a)("courseResources")(e),courses:e.common.courses,course:e.common.selectedCourse,students:e.common.students,modalDocument:e.common.modalDocument,configuration:e.common.configuration,token:e.authentication.token,initialValues:{resources:a,instructorFileSizeLimit:n}}}),(function(e){return{updateResources:function(t,n,a,r){return e(function(e,t,n,a){return{type:"UPDATE_COURSE_RESOURCES_START",payload:{courseId:e,resources:t,filesToDelete:n,token:a}}}(t,n,a,r))},changeDocument:function(t,n){e(Object(Dt.a)("courseResources",t,n))},openModal:function(t,n){e(Ne(t,n))},touchField:function(t){e(Object(Dt.d)("courseResources",t))}}}))(Ys),Ks=n(1264),Zs=n(1246),Xs=n(1132),ei=Object(Ye.a)((function(e){return{margin:{marginBottom:"15px"},MuiFormLabel:{fontSize:"1.2em"},errorText:{color:"#e91313",fontFamily:"Helvetica",fontSize:"0.75rem"},font:{fontSize:"0.7em !important"}}})),ti=function(e){var t=e.input,n=e.meta,a=void 0===n?{}:n,o=e.options,s=e.title,i=e.error,c=e.row,l=void 0!==c&&c,u=ei(),d=a.touched&&(a.error||i),m=o.map((function(e){return r.a.createElement(mt.a,Object.assign({key:e.label},t,{value:e.value,control:r.a.createElement(Ks.a,{color:e.color}),label:e.label,labelPlacement:e.placement,checked:e.checked,className:u.font}))}));return r.a.createElement("div",{className:u.margin},r.a.createElement(la.a,{margin:"dense",component:"fieldset"},r.a.createElement(Xs.a,{className:u.MuiFormLabel},s),r.a.createElement(Zs.a,{row:l,value:t.value,"aria-label":"gender"},m),r.a.createElement("span",{className:u.errorText},d?a.error||i:""," ")))},ni=n(1249),ai=n(1250),ri=n(1252),oi=n(1251),si=n(668),ii=Object(c.b)((function(e){return{width:e.common.width}}))((function(e){var t=e.data,n=e.width,a={top:n>450?0:-200,right:110,bottom:n>450?0:-200,left:110};return e.testForm&&(a={top:n>450?50:-150,right:n>450?130:70,bottom:n>450?50:-150,left:n>450?130:70}),r.a.createElement(si.a,{data:t,margin:a,innerRadius:0,padAngle:.7,cornerRadius:3,colors:{scheme:"category10"},borderWidth:1,borderColor:{from:"color",modifiers:[["darker","0.2"]]},radialLabelsSkipAngle:10,radialLabelsTextXOffset:0,radialLabelsTextColor:"#333333",radialLabelsLinkOffset:-10,radialLabelsLinkDiagonalLength:15,radialLabelsLinkHorizontalLength:3,radialLabelsLinkStrokeWidth:1,radialLabelsLinkColor:{from:"color"},enableSlicesLabels:!1,slicesLabelsSkipAngle:3,slicesLabelsTextColor:"#333333",animate:!0,motionStiffness:90,motionDamping:15})})),ci=Object(lt.a)({overrides:{MuiOutlinedInput:{root:{borderRadius:"2px",position:"relative","& $notchedOutline":{borderColor:"rgba(0, 0, 0, 0.23)"},"&:hover:not($disabled):not($focused):not($error) $notchedOutline":{borderColor:"#2196f3","@media (hover: none)":{borderColor:"rgba(0, 0, 0, 0.23)"}},"&$focused $notchedOutline":{borderColor:"#2196f3",borderWidth:1.5}}}}}),li=function(e){return r.a.createElement(f.a,{theme:ci},e.children)},ui=Object(Ye.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},textField:{width:"100%",borderRadius:"1px",margin:"0 auto 5px",background:"white"},textLabel:{margin:"0 3px 10px 3px"},marginTop:{marginTop:"5px"}}})),di=function(e){var t,n=e.input,o=e.label,s=(e.meta,e.options),i=void 0===s?{}:s,c=e.placeholder,l=e.textLabel,u=ui();return r.a.createElement(li,null,r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:[u.root,i.marginTop?u.marginTop:null].join(" ")},l?r.a.createElement("div",{className:u.textLabel},"".concat(o,":")):null,r.a.createElement(va.a,Object.assign({className:u.textField,autoComplete:"off"},n,(t={rows:i.rows,variant:i.variant,multiline:!0},Object(po.a)(t,"variant","outlined"),Object(po.a)(t,"placeholder",c),Object(po.a)(t,"InputProps",{readOnly:i.readOnly}),Object(po.a)(t,"disabled",i.disabled),t))))))},mi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.reduce((function(e,n){return n._id!==t._id?e+n.weight:e}),0),a=t.testWeight||t.assignmentWeight;return!a||parseFloat(a)<0?n:n+parseFloat(parseFloat(a).toFixed(2))},pi=Object(_t.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Fr})((function(e){var t=e.isTest,n=e.course,a=e.formValues,o=void 0===a?{}:a,s=Object(St.a)("common").t,i=[{label:s("testForm.fields.quiz"),value:"quiz",placement:"end",color:"primary"},{label:s("testForm.fields.midterm"),value:"midterm",placement:"end",color:"primary"},{label:s("testForm.fields.final"),value:"final",placement:"end",color:"primary"}],c={label:"".concat(s(t?"testForm.fields.testWeight":"testForm.fields.assignmentWeight")),size:"small"},l={label:s("testForm.fields.testTime"),size:"small",disabled:!o.timedTest,minWidth:223},u={label:s("testForm.fields.passingGrade"),size:"small"},d={label:s("testForm.fields.passingRequired"),size:"small",disabled:"quiz"===o.testType},m={label:s("testForm.fields.dailyPenalty"),size:"small",disabled:!o.allowLateSubmission,minWidth:223},p={label:s("testForm.fields.lateDaysAllowed"),size:"small",disabled:!o.allowLateSubmission,minWidth:223},f={label:s("testForm.fields.timedTest"),checked:!1},g={label:s("testForm.fields.blockLessons"),checked:!1},b={label:s("testForm.fields.allowLateSubmission"),checked:!1},h={label:s("testForm.fields.publish"),checked:!1},E=o.testWeight||o.assignmentWeight&&parseFloat(o.testWeight||o.assignmentWeight)>0&&parseFloat(o.testWeight||o.assignmentWeight)<=1e3,y=n.tests.map((function(e){return e._id===o._id?null:["".concat(e.testName," (").concat(e.assignment?s("testForm.assignment"):s("testForm.fields.".concat(e.testType)),")"),"".concat(e.weight," ").concat(s("testForm.points")," (").concat(parseFloat(parseFloat(e.weight/mi(n.tests,o)*100).toFixed(2)).toString(),"%)")]})).filter((function(e){return e})),T=parseFloat(parseInt(o.testWeight||o.assignmentWeight||0)/mi(n.tests,o)*100).toFixed(2),S=[{id:"".concat(s(t?"testForm.currentTest":"testForm.currentAssignment")," ").concat(parseFloat(parseFloat(T).toFixed(2)).toString(),"%"),label:s(t?"testForm.currentTest":"testForm.currentAssignment"),value:parseFloat(parseFloat(T).toFixed(2)).toString(),color:"hsl(88, 70%, 50%)"},{id:"".concat(s("testForm.others")," ").concat(parseFloat(parseFloat(100-T).toFixed(2)).toString(),"%"),label:s("testForm.others"),value:parseFloat(parseFloat(100-T).toFixed(2)).toString(),color:"hsl(245, 70%, 50%)"}];return r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"h4",gutterBottom:!0},s(t?"testForm.testCustomization":"testForm.assignmentCustomization")),r.a.createElement(ca.a,{name:t?"testName":"assignmentName",type:"text",component:fa,label:s(t?"testForm.fields.testName":"testForm.fields.assignmentName")}),r.a.createElement(ca.a,{name:"published",options:h,component:Ea}),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start"}},r.a.createElement(ca.a,{name:t?"testWeight":"assignmentWeight",component:Oa,options:c}),E&&r.a.createElement("div",{style:{minWidth:50}},r.a.createElement(et.a,{style:{lineHeight:3,marginLeft:10},paragraph:!0,variant:"body1",gutterBottom:!0}," / ".concat(mi(n.tests,o))))),E&&r.a.createElement("div",null,r.a.createElement(et.a,{paragraph:!0,variant:"body1"},"".concat(s("testForm.worth")," ").concat(parseFloat(parseFloat(T).toFixed(2)).toString(),"% ").concat(s("testForm.ofTheCourse")))),E&&r.a.createElement("div",{style:{height:200}},r.a.createElement(ii,{data:S,testForm:!0})),r.a.createElement(Qs,{index:"testWeightDistribution",summary:s("testForm.otherTestsWeights")},r.a.createElement(ni.a,{"aria-label":"simple table"},r.a.createElement(ai.a,null,y.map((function(e,t){return r.a.createElement(oi.a,{key:t},r.a.createElement(ri.a,{component:"th",scope:"row"},e[0]),r.a.createElement(ri.a,{align:"right"},e[1]))}))))),t?r.a.createElement(v,null,r.a.createElement(ca.a,{name:"blockedNotes",options:g,component:Ea}),r.a.createElement(ca.a,{name:"timedTest",options:f,component:Ea}),r.a.createElement(ca.a,{name:"testTime",component:Oa,options:l}),r.a.createElement(ca.a,{component:ti,name:"testType",title:s("testForm.fields.testType"),required:!0,options:i,orientation:"horizontal"}),r.a.createElement(ca.a,{name:"passingRequired",options:d,component:Ea}),r.a.createElement(ca.a,{name:"passingGrade",component:Oa,compact:!0,options:u}),r.a.createElement(ca.a,{name:"notes",component:di,placeholder:s("testForm.fields.notesPlaceholder"),label:s("testForm.fields.notes"),options:{multiline:!0,rows:3,variant:ma.a},textLabel:!0})):r.a.createElement(v,null,r.a.createElement(ca.a,{name:"allowLateSubmission",options:b,component:Ea}),r.a.createElement(ca.a,{disabled:!0,name:"latePenalty",component:Oa,compact:!0,options:m}),r.a.createElement(ca.a,{disabled:!0,name:"lateDaysAllowed",component:Oa,compact:!0,options:p})))})),fi=Object(c.b)((function(e){return{formValues:Object(Ve.a)("testForm")(e),course:e.common.selectedCourse}}))(pi),gi=n(38),bi=n.n(gi),hi=n(1138),Ei=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).field=function(t){var n=t.input,a=t.meta,o=t.options,s=t.classes,i=t.column,c=t.error,l=(n.name,n.onChange),u=n.value,d=o.map((function(t,n){var a=t.label,o=t.value,s=t.name,i=u.includes(o);return r.a.createElement(mt.a,{key:"checkbox-".concat(n),control:r.a.createElement(dr.a,{name:"".concat(s,"[").concat(n,"]"),value:o,checked:i,onChange:function(e){var t=Object(Pr.a)(u);return e.target.checked?t.push(o):t.splice(t.indexOf(o),1),l(t)}}),label:e.props.numbered?n+1+". "+a:a})}));return r.a.createElement(la.a,{component:"fieldset"},r.a.createElement(Xs.a,{color:"primary",className:s.MuiFormLabel,component:"legend"},e.props.title),r.a.createElement(hi.a,{row:!i,className:s.Margin},d),r.a.createElement(ua.a,null,(a.error||c)&&a.touched?c||a.error:""))},e}return Object(b.a)(n,[{key:"render",value:function(){return r.a.createElement(ca.a,Object.assign({name:"checkbox"},this.props,{type:"checkbox",component:this.field}))}}]),n}(a.Component),vi=Object($e.a)((function(){return{MuiFormLabel:{fontSize:"1.2em",color:"black"},Margin:{marginBottom:"15px"}}}))(Ei);function yi(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}var Ti=Object(_t.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Fr})((function(e){var t=e.formValues,n=void 0===t?{}:t,a=e.setDefaultSectionWeights,o=e.touchCheckboxes,s=e.isTest,i=Object(St.a)("common").t,c=[{label:i("testForm.fields.mc"),value:"mc",placement:"start",color:"primary",name:"mc"},{label:i("testForm.fields.essay"),value:"essay",placement:"start",color:"primary",name:"essay"},{label:i("testForm.fields.speaking"),value:"speaking",placement:"start",color:"primary",name:"speaking"},{label:i("testForm.fields.fillblanks"),value:"fillblanks",placement:"start",color:"primary",name:"fillBlanks"}],l={label:i("testForm.fields.equallyDistributeMarks"),checked:!1,disabled:!((n.testSections||[]).length>1)},u=["Multiple-choice","Essay","Speaking","Fill-in-the-blanks"].map((function(e,t){var a;return"Multiple-choice"===e&&(a="mc"),"Essay"===e&&(a="essay"),"Speaking"===e&&(a="speaking"),"Fill-in-the-blanks"===e&&(a="fillblanks"),{label:i("testForm.fields.".concat(a)),size:"small",disabled:!(n.testSections||[]).includes(a)||n.equalSectionWeight||!((n.testSections||[]).length>1)}})),d=n.equalSectionWeight,m=yi(d),p=(n.testSections||[]).length,f=yi(p);return(m!==d||f!==p&&d||1===p)&&a(n.testSections,d),r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"h4",gutterBottom:!0},i("testForm.marksDistribution")),r.a.createElement(ca.a,{name:"testSections",title:i(s?"testForm.fields.testSections":"testForm.fields.assignmentSections"),component:vi,onChange:function(){return o("testSections")},options:c,required:!1,column:!0}),r.a.createElement(ca.a,{name:"equalSectionWeight",options:l,component:Ea}),r.a.createElement(et.a,{variant:"h6",style:{marginBottom:20},className:!n.equalSectionWeight&&(n.testSections||{}).length>1?bi.a.sectionWeightsLabel:[bi.a.sectionWeightsLabel,bi.a.disabledText].join(" ")},i("testForm.fields.sectionWeights")),r.a.createElement(ca.a,{name:"mcSectionWeight",component:Oa,options:u[0]}),r.a.createElement(ca.a,{name:"essaySectionWeight",component:Oa,options:u[1]}),r.a.createElement(ca.a,{name:"speakingSectionWeight",component:Oa,options:u[2]}),r.a.createElement(ca.a,{name:"fillBlankSectionWeight",component:Oa,options:u[3]}))})),Si=Object(c.b)((function(e,t){return{formValues:Object(Ve.a)("testForm")(e),testForm:e.form.testForm}}),(function(e){return{touchCheckboxes:function(t){e(Object(Dt.d)("testForm",t))},setDefaultSectionWeights:function(t,n){var a=100/(t||[]).length;(t||[]).includes("mc")?e(Object(Dt.a)("testForm","mcSectionWeight",n||1!==(t||[]).length?parseFloat(a.toFixed(2)):100)):e(Object(Dt.a)("testForm","mcSectionWeight",null)),(t||[]).includes("essay")?e(Object(Dt.a)("testForm","essaySectionWeight",n||1!==(t||[]).length?parseFloat(a.toFixed(2)):100)):e(Object(Dt.a)("testForm","essaySectionWeight",null)),(t||[]).includes("speaking")?e(Object(Dt.a)("testForm","speakingSectionWeight",n||1!==(t||[]).length?parseFloat(a.toFixed(2)):100)):e(Object(Dt.a)("testForm","speakingSectionWeight",null)),(t||[]).includes("fillblanks")?e(Object(Dt.a)("testForm","fillBlankSectionWeight",n||1!==(t||[]).length?parseFloat(a.toFixed(2)):100)):e(Object(Dt.a)("testForm","fillBlankSectionWeight",null))}}}))(Ti),ki=Object(_t.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Fr})((function(e){var t=e.formValues,n=void 0===t?{}:t,a=e.changeDateTime,o=e.isTest,s=n.createdAt||null,i=Object(St.a)("common").t;return r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"h4",gutterBottom:!0},i("testForm.importantDates")),r.a.createElement(ca.a,{name:"availableOnDate",type:"dateTime",handleChange:function(e){return a(e,"availableOnDate")},component:er,options:{disablePast:!0,label:i("testForm.fields.availableOnDate"),minDate:s}}),r.a.createElement(ca.a,{name:"gradeReleaseDate",type:"dateTime",handleChange:function(e){return a(e,"gradeReleaseDate")},component:er,options:{disablePast:!0,label:i("testForm.fields.gradeReleaseDate"),minDate:s}}),r.a.createElement(ca.a,{name:"dueDate",type:"dateTime",handleChange:function(e){return a(e,"dueDate")},component:er,options:{disablePast:!0,label:i(o?"testForm.fields.closeDate":"testForm.fields.dueDate"),minDate:s},noPaddingBottom:!0}))})),wi=Object(c.b)((function(e,t){return{formValues:Object(Ve.a)("testForm")(e)}}),(function(e){return{changeDateTime:function(t,n){console.log("field: ",n),e(Object(Dt.a)("testForm",n,t)),t||e(Object(Dt.d)("testForm",n))}}}))(ki),Oi=n(200),Ci=n.n(Oi),xi=n(265),Ai=n(643),Fi=n.n(Ai),Di=n(642),_i=n.n(Di);xi.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(xi.pdfjs.version,"/pdf.worker.js");var Ii=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={numPages:null,pageNumber:1,scale:.6},e.onDocumentLoadSuccess=function(t){var n=t.numPages;e.setState({numPages:n,pageNumber:1})},e.previousPdfPage=function(){e.state.pageNumber>1&&e.setState({pageNumber:e.state.pageNumber-1})},e.nextPdfPage=function(){e.state.pageNumber<e.state.numPages&&e.setState({pageNumber:e.state.pageNumber+1})},e.setPdfPage=function(t){var n=parseInt(t.target.value),a=n;n>e.state.numPages&&(a=e.state.numPages),n<1&&(a=1),NaN!==n&&n||(a=1),e.setState({pageNumber:parseInt(a)})},e.handleScale=function(t){"in"===t&&e.setState((function(e){return{scale:e.scale+.2}})),"out"===t&&e.setState((function(e){return{scale:e.scale-.2}}))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.pageNumber,a=t.numPages,o=t.scale,s=this.props,i=s.url,c=s.t,l={label:c("pdf.goToPage"),size:"small"};return r.a.createElement("div",null,r.a.createElement("p",{className:Ci.a.pageNumberDisplay},c("pdf.page")," ",n," ",c("pdf.of")," ",a),r.a.createElement("div",{className:Ci.a.flexPositioningEven},r.a.createElement(ot.a,{variant:"outlined",disabled:1===n,color:"default",type:"button",className:Ci.a.MuiButtonBase,onClick:this.previousPdfPage,startIcon:r.a.createElement(ia.a,null),size:"small"},c("pdf.page")," ",1===n?1:n-1),r.a.createElement(ot.a,{disabled:n===a,onClick:this.nextPdfPage,className:Ci.a.MuiButtonBase,color:"default",variant:"outlined",endIcon:r.a.createElement(oa.a,null),size:"small"},c("pdf.page")," ",n===a?a:n+1)),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},r.a.createElement(Oa,{options:l,input:{onChange:this.setPdfPage}})),r.a.createElement("div",{style:{overflow:"scroll",maxHeight:"450px"}},r.a.createElement(xi.Document,{className:Ci.a.pdfCanvas,file:i,onLoadSuccess:this.onDocumentLoadSuccess,onLoadError:function(e){return console.log(e)},renderMode:"svg"},r.a.createElement(xi.Page,{scale:o,pageNumber:n}))),r.a.createElement("div",{className:Ci.a.flexPositioningEven},r.a.createElement(Na.a,{onClick:function(){e.state.scale>=0&&e.handleScale("out")},color:"primary",component:"span"},r.a.createElement(_i.a,null)),r.a.createElement(Na.a,{onClick:function(){e.handleScale("in")},color:"primary",component:"span"},r.a.createElement(Fi.a,null))))}}]),n}(a.Component),ji=Object(Ia.a)("common")(Ii),Ri=function(e){var t=e.onPreview,n=e.audioSource,a=e.id,o=e.previewType,s=e.previewText,i=e.disabled,c=e.fullWidth,l=Object(St.a)().t;return r.a.createElement(v,null,"button"===o?r.a.createElement(v,null,r.a.createElement("audio",{id:a,src:n}),r.a.createElement(ot.a,{fullWidth:c,onClick:t,color:"primary",disabled:!n||""===n||i},s||l("audioRecorder.buttons.preview"))):r.a.createElement("div",{className:Jo.a.AudioAlignment},r.a.createElement("audio",{id:a,src:n}),r.a.createElement("span",{className:Jo.a.Pointer,onClick:t},r.a.createElement("i",{className:"fa fa-volume-down fa-2x ".concat(n?Jo.a.greenIcon:Jo.a.redIcon)}))))},Ni=function(e){var t=e.onClear,n=e.clearDisabled,a=Object(St.a)().t;return r.a.createElement("div",{className:Jo.a.flexPositioningEven},r.a.createElement(ot.a,{color:"secondary",onClick:t,disabled:n},a("audioRecorder.buttons.clearAudio")))},Li=function(e){var t=e.onStart,n=e.onStop,a=e.onPreview,o=e.recordDisabled,s=e.audioSource,i=e.id,c=e.meta,l=void 0===c?{}:c,u=e.error,d=e.onClear,m=e.clearDisabled,p=(e.playerDisabled,e.recordButtonText),f=e.previewType,g=e.isMicAlert,b=(e.chatRecorder,e.token,Object(St.a)().t);return r.a.createElement(v,null,"button"===f&&r.a.createElement("div",{className:Jo.a.flexPositioningEven},r.a.createElement(ot.a,{onClick:t,disabled:o||g,startIcon:r.a.createElement(Do.a,null),fullWidth:!0},p||b("audioRecorder.buttons.record"))),r.a.createElement("div",{style:{margin:"auto",display:"block",width:"60%"}},g&&r.a.createElement(et.a,{style:{textAlign:"center"},variant:"caption",color:"error"},b("audioRecorder.errors.micBlocked"))),r.a.createElement("div",{className:Jo.a.flexPositioningEven},"button"!==f&&r.a.createElement(ot.a,{onClick:t,disabled:o||g,startIcon:r.a.createElement(Do.a,null)},p||b("audioRecorder.buttons.record")),r.a.createElement(ot.a,{onClick:n,disabled:!o||g,startIcon:r.a.createElement(Io.a,null)},b("audioRecorder.buttons.stop")),r.a.createElement(Ri,{onPreview:s?a:null,audioSource:s,id:i,previewType:f})),r.a.createElement("div",{className:Jo.a.flexPositioningEven},r.a.createElement("span",{className:Jo.a.errorText},(l.error||u)&&l.touched?l.error||u:""," ")),r.a.createElement("div",{className:Jo.a.flexPositioningEven},r.a.createElement(Ni,{onClear:d,clearDisabled:m})))},Pi=(n(1061),Object(_t.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Fr})((function(e){var t,n=e.formValues,o=void 0===n?{}:n,s=e.changeField,i=e.errors,c=e.isTest,l=e.path,u=Object(St.a)("common").t,d=Object(a.useState)(!1),m=Object(mo.a)(d,2),p=m[0],f=m[1],g=Object(a.useState)(null),b=Object(mo.a)(g,2),h=b[0],E=b[1];Object(a.useEffect)((function(){return function(){clearTimeout(h)}}),[]);var y,T=o.audioMaterial||{},S=o.readingMaterial||{},k={label:u("testForm.fields.useUploadDoc"),checked:!1},w={label:u("testForm.fields.useUploadAudio"),checked:!1},O=o.materialsDisplay||"",C=((o.audioMaterial||[])[O]||{}).recordingTimeout,x=((o.audioMaterial||[])[O]||{}).recorder||{},A=o.testSections||[],F=A.includes("mc"),D=A.includes("essay"),_=A.includes("speaking"),I=A.includes("fillblanks"),j=[F?{value:"multipleChoice",primaryText:u("testForm.fields.mc")}:null,D?{value:"essay",primaryText:u("testForm.fields.essay")}:null,_?{value:"speaking",primaryText:u("testForm.fields.speaking")}:null,I?{value:"fillInTheBlanks",primaryText:u("testForm.fields.fillblanks")}:null,{value:"test",primaryText:u(c?"testForm.fields.atBeginningOfTest":"testForm.fields.atBeginningOfAssignment")}].filter((function(e){return e})),R=function(e,t,n,a){a?(s("audioMaterial.".concat(n,".recording"),a),s("audioMaterial.".concat(n,".recorder"),e),s("audioMaterial.".concat(n,".recordingTimeout"),t)):function(){clearTimeout(h),f(!0);var e=setTimeout((function(){f(!1)}),5e3);E(e)}()},N=function(e,t,n){s("audioMaterial.".concat(n,".recording"),!1),s("audioMaterial.".concat(n,".recordedBlob"),e),s("audioMaterial.".concat(n,".audioFile"),t)},L=((o.audioMaterial||{})[O]||{}).recording,P=(T[O]||{}).recordedBlob,B=["multipleChoice","essay","speaking","fillInTheBlanks","test"],M=B.find((function(e){return((i.readingMaterial||{})[e]||{}).file})),q=B.find((function(e){return((i.audioMaterial||{})[e]||{}).audioFile}));return y=(S[O]||{}).file instanceof File?(((S[O]||{}).file||{}).name||"").split(".").pop():((S[O]||{}).file||"").split(".").pop(),r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"h4",gutterBottom:!0},u(c?"testForm.testResources":"testForm.assignmentResources")),r.a.createElement(ca.a,{name:"materialsDisplay",component:Hs,label:u("testForm.fields.section"),variant:"outlined",options:j,disabled:!(!M&&!q)}),O&&r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},u("testForm.text")),r.a.createElement(ca.a,{name:"readingMaterial.".concat(O,".fileUpload"),options:k,component:Ea,type:"checkbox"}),(S[O]||{}).fileUpload&&r.a.createElement(v,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ca.a,{name:"readingMaterial.".concat(O,".file"),onChangeFile:function(e){s("readingMaterial.".concat(O,".loadedPDF"),e)},fullSizeImage:!0,index:O,loadedFile:(S[O]||{}).loadedPDF,uploadButtonText:u("testForm.buttons.selectDoc"),component:Pa,mimeTypesAllowed:"image/jpeg, application/pdf, .doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",extensionsAllowed:["jpeg","jpg","jfif","pdf","docx","doc"]})),(S[O]||{}).loadedPDF&&"pdf"===y&&r.a.createElement(ji,{url:(S[O]||{}).loadedPDF,index:O})),!(S[O]||{}).fileUpload&&r.a.createElement(v,null,B.map((function(e){return e===O&&r.a.createElement(ca.a,{key:O,name:"readingMaterial.".concat(O,".content"),component:Lr,reduxForm:"testForm",field:"readingMaterial.".concat(O,".content"),path:l})}))),r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},u("testForm.audio")),r.a.createElement(ca.a,{name:"audioMaterial.".concat(O,".fileUpload"),options:w,component:Ea,type:"checkbox"})),O&&r.a.createElement(v,null,(T[O]||{}).fileUpload?r.a.createElement(v,null,r.a.createElement("div",{style:{display:"flex",textAlign:"center",justifyContent:"space-between",margin:"auto",width:"60%"}},r.a.createElement(ca.a,(t={name:"audioMaterial.".concat(O,".audioFile"),component:Pa,uploadButtonText:u("testForm.buttons.selectAudioFile"),index:"materialSectionAudio[".concat(O,"]"),onChangeFile:function(e){s("audioMaterial.".concat(O,".recordedBlob"),e)},loadedFile:L,mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]},Object(po.a)(t,"mimeTypesAllowed","audio/*"),Object(po.a)(t,"extensionsAllowed",["mp3","wav","wma"]),t)),r.a.createElement(Ri,{onPreview:function(){P&&zo("audioMaterial[".concat(O,"]"))},id:"audioMaterial[".concat(O,"]"),audioSource:P})),r.a.createElement(Ni,{onClear:function(){return N(null,null,O)}})):r.a.createElement(Li,{onStart:function(){var e=Object(Aa.a)(xa.a.mark((function e(t){var n;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ho(t,null,O,null,function(){var e=Object(Aa.a)(xa.a.mark((function e(t){var n;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,N(n.blob,n.file,O);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:n=e.t0,R(n.recorder,n.recordingTimeout,O,n.isRecording);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onStop:function(){var e=Object(Aa.a)(xa.a.mark((function e(t){var n;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wo(t,null,O,C,x);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:n=e.t0,N(n.blob,n.file,O);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPreview:function(){zo("audioMaterial[".concat(O,"]"))},onClear:function(){return N(null,null,O)},id:"audioMaterial[".concat(O,"]"),recordDisabled:L,audioSource:P,isMicAlert:p})))}))),Bi=Object(c.b)((function(e,t){return{formValues:Object(Ve.a)("testForm")(e),errors:Object(Ft.a)("testForm")(e),editing:e.common.editing}}),(function(e){return{changeField:function(t,n){e(Object(Dt.a)("testForm",t,n))}}}))(Pi),Mi=function(e){var t=e.input,n=e.label,a=e.type,o=e.meta,s=o.touched,i=o.error;return r.a.createElement("div",null,r.a.createElement("label",null,n),r.a.createElement("div",null,r.a.createElement("input",Object.assign({className:[bi.a.InputField,bi.a.FullWidth].join(" ")},t,{placeholder:n,type:a})),s&&i&&r.a.createElement("span",null,i)))},qi=function(e){var t=e.clearAnswers,n=e.questionIndex,a=e.fields,o=e.meta.error,s=e.t;return r.a.createElement(v,null,r.a.createElement(ot.a,{fullWidth:!0,type:"button",color:"primary",variant:"outlined",onClick:function(){return a.push()}},s("testForm.buttons.addAnswer")),r.a.createElement(et.a,{variant:"subtitle1",gutterBottom:!0},s("testForm.writeAnswers")),r.a.createElement(Br.a,null,a.map((function(e,o){return r.a.createElement(Mr.a,{key:o},r.a.createElement(ot.a,{type:"button",title:"Remove Answer",onClick:function(){a.remove(o),t(n)},color:"secondary",startIcon:r.a.createElement(Ma.a,null)},""),r.a.createElement(ca.a,{name:e,type:"text",component:Mi,label:""}))})),o&&r.a.createElement(Mr.a,{className:"error"},o)))},Ui=function(e){var t=e.fields,n=e.meta,a=n.error,o=n.submitFailed,s=e.touchCheckboxes,i=e.clearAnswers,c=e.formValues,l=void 0===c?{}:c,u=e.path,d=e.t;return r.a.createElement("ul",{className:bi.a.TestFormList},t.map((function(e,n){var a=(((l.mcQuestions||[])[n]||{}).answers||[]).map((function(t,n){return{label:"".concat(t||""),value:"".concat(n+1),placement:"start",color:"primary",name:"".concat(e,".correctAnswers")}})),o=r.a.createElement(v,null,r.a.createElement(et.a,{variant:"subtitle1",gutterBottom:!0},d("testForm.selectCorrectAnswers")),r.a.createElement(ca.a,{name:"".concat(e,".correctAnswers"),component:vi,onChange:function(){return s("".concat(e,".correctAnswers"))},options:a,required:!1,column:!0}));return r.a.createElement("li",{key:n,className:bi.a.QuestionCustomizationContainer},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(d("testForm.question")," ").concat(n+1)),r.a.createElement("div",{className:bi.a.TextEditor},r.a.createElement(ca.a,{name:"".concat(e,".question"),field:"".concat(e,".question"),reduxForm:"testForm",component:Lr,index:n,path:u})),o,r.a.createElement(rr.a,{name:"".concat(e,".answers"),questionIndex:n,clearAnswers:i,component:qi,t:d}),r.a.createElement(ca.a,{name:"".concat(e,".solution"),component:di,label:d("testForm.fields.solution"),options:{multiline:!0,rows:3,variant:ma.a},textLabel:!0}),r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(ca.a,{name:"".concat(e,".marks"),component:Oa,options:{label:d("testForm.fields.marks"),size:"small"}})),r.a.createElement(ot.a,{fullWidth:!0,variant:"outlined",color:"default",type:"button",title:"Remove Question",onClick:function(){return t.remove(n)},disabled:1===(l.mcQuestions||[]).length},d("testForm.buttons.removeQuestion")))})),r.a.createElement("li",null,r.a.createElement(ot.a,{variant:"outlined",color:"default",type:"button",onClick:function(){return t.push({marks:1})},fullWidth:!0},d("testForm.buttons.addQuestion")),o&&a&&r.a.createElement("span",null,a)))},Qi=Object(_t.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,enableReinitialize:!1,validate:Fr})((function(e){var t=e.clearAnswers,n=e.formValues,a=void 0===n?{}:n,o=Object(co.a)(e,["clearAnswers","formValues"]),s=Object(St.a)(),i=s.t,c=(s.i18n,(a.mcQuestions||[]).length);return r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h4",gutterBottom:!0},i("testForm.mcSection")),r.a.createElement(rr.a,{name:"mcQuestions",clearAnswers:t,props:o,formValues:a,component:Ui,t:i}),r.a.createElement(Qs,{index:0,summary:i("testForm.selectQuestion")},r.a.createElement(Gs,{questionType:"Multiple-choice questions",selecting:!0,indexToAdd:c})))})),Wi=Object(c.b)((function(e){return{formValues:Object(Ve.a)("testForm")(e),initialValues:e.instructorTest.loadedTestFormData}}),(function(e){return{clearAnswers:function(t){e(Object(Dt.a)("testForm","mcQuestions[".concat(t,".correctAnswers]"),[]))},touchCheckboxes:function(t){e(Object(Dt.d)("testForm",t))}}}))(Qi),Hi=function(e){var t=e.fields,n=e.meta,a=n.error,o=n.submitFailed,s=e.formValues,i=e.path,c=e.t;return r.a.createElement("ul",{className:bi.a.TestFormList},t.map((function(e,n){return r.a.createElement("li",{className:bi.a.QuestionCustomizationContainer,key:n},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(c("testForm.question")," ").concat(n+1)),r.a.createElement("div",{className:bi.a.TextEditor},r.a.createElement(ca.a,{name:"".concat(e,".question"),field:"".concat(e,".question"),reduxForm:"testForm",component:Lr,index:n,path:i})),r.a.createElement(ca.a,{name:"".concat(e,".solution"),component:di,label:c("testForm.fields.solution"),options:{multiline:!0,rows:3,variant:ma.a},textLabel:!0}),r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(ca.a,{name:"".concat(e,".marks"),component:Oa,options:{label:c("testForm.fields.marks"),size:"small"}})),r.a.createElement(ot.a,{className:bi.a.fullWidthButton,variant:"outlined",color:"default",type:"button",title:"Remove Question",onClick:function(){return t.remove(n)},fullWidth:!0,disabled:1===((s||{}).essayQuestions||[]).length},c("testForm.buttons.removeQuestion")))})),r.a.createElement("li",null,r.a.createElement(ot.a,{className:bi.a.fullWidthButton,variant:"outlined",color:"default",type:"button",onClick:function(){return t.push({marks:1})},fullWidth:!0},c("testForm.buttons.addQuestion")),o&&a&&r.a.createElement("span",null,a)))},zi=Object(_t.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Fr})((function(e){var t=e.formValues,n=void 0===t?{}:t,a=e.path,o=Object(St.a)().t,s=(n.essayQuestions||[]).length;return r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h4",gutterBottom:!0},o("testForm.essaySection")),r.a.createElement(rr.a,{name:"essayQuestions",component:Hi,formValues:n,path:a,t:o}),r.a.createElement(Qs,{index:0,summary:o("testForm.selectQuestion")},r.a.createElement(Gs,{questionType:"Essay questions",selecting:!0,indexToAdd:s})))})),Gi=Object(c.b)((function(e){return{formValues:Object(Ve.a)("testForm")(e),token:e.authentication.token,initialValues:e.instructorTest.loadedTestFormData}}),null)(zi),Vi=n(144),$i=n.n(Vi),Yi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0;console.log("previousCorrectAnswers",e),console.log("currentCorrectAnswers",t);var r=t.length-e.length;if(console.log("numberOfBlanksToInsert",r),t.length!==e.length){var o={marks:1,incorrectAnswerOptions:{incorrectAnswerOne:"",incorrectAnswerTwo:"",incorrectAnswerThree:""},selectableAnswer:!1,audio:!1,browserAudioFile:null,audioFile:null},s={marks:null,answerOptions:{incorrectAnswerThree:null},browserAudioFile:null};if(e.length<t.length){var i=t.findIndex((function(t,n){return!e.includes(t)}));if(console.log("indexToInsert",i),t.length>0){if(0!==i){var c=function(e,t,n){return[].concat(Object(Pr.a)(e.slice(0,t)),[n],Object(Pr.a)(e.slice(t)))},l=e.length-1;t.splice.apply(e,[l,0].concat(e));new Array(r);var u=c(n,i,Object(At.a)(Object(At.a)({},o),{},{answer:t[i]})),d=c(a,i,s);return{answersToUpdate:u.map((function(e,n){return Object(At.a)(Object(At.a)({},e),{},{answer:t[n]})})),errorsToUpdate:d}}n.unshift(Object(At.a)(Object(At.a)({},o),{},{answer:t[0]})),a.unshift(s)}}if(e.length>t.length){var m=function(e,t){var n=[];return e.forEach((function(a,r){t.includes(e[r])||n.push(r)})),n},p=m(e,t);if(1===p.length)n.splice(p[0],1),a.splice(p[0],1);else{var f=p[0],g=p.length;n.splice(f,g),a.splice(f,g)}}if(e.length<t.length&&!n){var b=e.length-1;t.splice.apply(e,[b,0].concat(e));var h=new Array(r);n=h.map((function(e){return o})),console.log("*****************************"),a=h.map((function(e){return s}))}return{answersToUpdate:n.map((function(e,n){return Object(At.a)(Object(At.a)({},e),{},{answer:t[n]})})),errorsToUpdate:a}}},Ji=n(145),Ki=n.n(Ji),Zi=function(e){var t=e.blankIndex,n=e.t,a=e.answers,o=e.meta,s=void 0===o?{}:o,i=e.error;return r.a.createElement(v,null,r.a.createElement("select",{readOnly:!0,value:"select the correct answer",className:bi.a.SelectField},["select the correct answer","Correct option","Incorrect option 1","Incorrect option 2","Incorrect option 3"].map((function(e,o){var s,i=(a[t]||{}).answerOptions||{};return 0===o&&(s=n("testForm.fields.selectCorrectAnswerInline")),1===o&&(s=(a[t]||{}).answer),2===o&&(s=i.incorrectAnswerOne),3===o&&(s=i.incorrectAnswerTwo),4===o&&(s=i.incorrectAnswerThree),r.a.createElement("option",{key:"".concat(e,"[").concat(o,"]"),className:1===o?bi.a.CorrectAnswerHighlight:null,disabled:!0,value:e},s)}))),r.a.createElement("div",{className:bi.a.flexPositioningEven},r.a.createElement("span",{className:bi.a.errorText},(s.error||i)&&s.touched?s.error||i:""," ")))},Xi=function(e){var t=e.source,n=e.id;return r.a.createElement("td",{dangerouslySetInnerHTML:{__html:'\n        <audio id="'.concat(n,'" src="').concat(t,'">\n        </audio>\n        <span class="').concat(Jo.a.Pointer,'" onClick="(function(){\n        const audio = document.getElementById(\'').concat(n,'\');\n        audio.play()\n        return false;\n        })();return false;" >\n        <i class="fa fa-volume-down"></i>\n        </span>\n        ')}})},ec=n(325),tc=n.n(ec),nc=(n(1105),n(50)),ac=n.n(nc),rc=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e,a){var r;return Object(g.a)(this,n),(r=t.call(this,e,a)).handleMicAlert=function(){clearTimeout(r.state.micBlockedWarningTO),r.setState({micBlockedWarning:!0});var e=setTimeout((function(){r.setState({micBlockedWarning:!1})}),5e3);r.setState({micBlockedWarningTO:e})},r.initiateRecording=function(e,t,n,a){if(a){var o=r.props,s=o.changeField,i=o.form,c="fillBlankQuestions.answers";s(i,"".concat(c,".").concat(n,".recordingQuestion"),a),s(i,"".concat(c,".").concat(n,".questionRecorder"),e),s(i,"".concat(c,".").concat(n,".questionRecordingTimeout"),t)}else r.handleMicAlert()},r.setAudioData=function(e,t,n){var a=r.props,o=a.changeField,s=a.touchField,i=a.form,c="fillBlankQuestions.answers";o(i,"".concat(c,".").concat(n,".recordingQuestion"),!1),o(i,"".concat(c,".").concat(n,".browserAudioFile"),e),o(i,"".concat(c,".").concat(n,".audioFile"),t),s(i,"".concat(c,".").concat(n,".browserAudioFile"))},r.state={previousCorrectAnswers:[],currentCorrectAnswers:[],previousAnswers:[],currentAnswers:[],blockSync:!1,micBlockedWarning:!1,micBlockedWarningTO:null},r}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Fr(this.props.formValues);this.props.updateErrors("testForm",e)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.formValues,n=void 0===t?{}:t,a=e.formValues,r=void 0===a?{}:a,o=n.fillBlankQuestions||[],s=r.fillBlankQuestions||[];this.setState({previousAnswers:o.answers,currentAnswers:s.answers,previousCorrectAnswers:o.correctAnswers,currentCorrectAnswers:s.correctAnswers})}},{key:"componentDidUpdate",value:function(){this.state.blockSync&&this.setState({blockSync:!1})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.state.micBlockedWarningTO)}},{key:"getRecordingTimeoutQuestion",value:function(e){return(((this.props.formValues.fillBlankQuestions||[]).answers||[])[e]||{}).questionRecordingTimeout}},{key:"getRecorderFromClickQuestion",value:function(e){return(((this.props.formValues.fillBlankQuestions||[]).answers||[])[e]||{}).questionRecorder}},{key:"touchIncorrectAnswerFields",value:function(e){var t=this,n="fillBlankQuestions.answers.".concat(e,".answerOptions.incorrectAnswer");["One","Two","Three"].forEach((function(e){t.props.touchField(t.props.form,n+e)}))}},{key:"handleBlockSync",value:function(e){this.setState({blockSync:!!e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.formValues,a=void 0===n?{}:n,o=t.formErrors,s=void 0===o?{}:o,i=t.touchField,c=t.changeField,l=t.updateErrors,u=t.form,d=t.isModal,m=t.path,p=t.t,f=(a.fillBlankQuestions||{}).answers||[],g=(s.fillBlankQuestions||{}).answers||[];if((this.state.previousCorrectAnswers||[]).findIndex((function(t,n){return t!==e.state.currentCorrectAnswers[n]?t:null}))>-1){var b=(this.state.currentAnswers||[]).map((function(t,n){return Object(At.a)(Object(At.a)({},t),{},{answer:e.state.currentCorrectAnswers[n]})}));c(u,"fillBlankQuestions.answers",b)}var h=(a.fillBlankQuestions||{}).correctAnswers;if((this.state.currentCorrectAnswers||[]).length!==(this.state.previousCorrectAnswers||[]).length&&!this.state.blockSync){var E=Yi(this.state.previousCorrectAnswers,h,this.state.currentAnswers,g),y=E.answersToUpdate,T=E.errorsToUpdate;c(u,"fillBlankQuestions.answers",y),l(u,Object(At.a)(Object(At.a)({},s),{},{fillBlankQuestions:{question:(s.fillBlankQuestions||{}).question,answers:T}})),this.state.currentCorrectAnswers.forEach((function(t,n){var a={fillBlankQuestions:{answers:y}};t.marks||i("fillBlankQuestions.answers.".concat(n,".marks"));var r=Fr(a);((r.fillBlankQuestions.answers[n]||{}).answerOptions||{}).incorrectAnswerThree&&e.touchIncorrectAnswerFields(n),(r.fillBlankQuestions.answers[n]||{}).browserAudioFile&&i("fillBlankQuestions.answers.".concat(n,".browserAudioFile"))}))}var S=(a.fillBlankQuestions||{}).question||"",k=S.match(/<mark [^>]+>(.*?)<\/mark>/g),w=Ki()(S,/<mark [^>]+>(.*?)<\/mark>/g,(function(e,t){var n=t/2-.5,a=((f||[])[n]||{}).answer,o=(f[n]||{}).browserAudioFile,s=((f||[])[n]||{}).selectableAnswer;return!0===s?r.a.createElement(v,{key:e+n},r.a.createElement("span",{className:bi.a.BlankPreview},n+1," "),(f[n]||{}).audio&&o&&r.a.createElement(Xi,{id:"audio[".concat(n,"]"),source:o}),r.a.createElement(Zi,{blankIndex:n,answers:f,t:p})):!1===s?r.a.createElement(v,{key:e+n},r.a.createElement("span",{className:bi.a.Inline},r.a.createElement("span",{className:bi.a.BlankPreview},n+1," "),(f[n]||{}).audio&&o&&r.a.createElement(Xi,{id:"audio[".concat(n,"]"),source:o}),r.a.createElement("input",{readOnly:!0,type:"text",className:bi.a.InputField,value:"".concat(tc()(a))}))):void 0})),O=[];w.forEach((function(e,t){"string"===typeof e?O.push(e):O.push($i.a.renderToString(e))}));var C=(O||[]).join("").replace(/<img/g,'<img style="width:100%"'),x=(k||[]).map((function(e){return e.replace(/<[^>]+>/g,"")}));return c(u,"fillBlankQuestions.correctAnswers",x),r.a.createElement(v,null,"testForm"===u&&r.a.createElement(et.a,{variant:"h4",gutterBottom:!0,paragraph:!0},p("testForm.fillblanksSection")),r.a.createElement("div",{className:bi.a.TextEditor},r.a.createElement(ca.a,{component:Lr,isModal:d,name:"fillBlankQuestions.question",label:p("testForm.fillblanksText"),field:"fillBlankQuestions.question",reduxForm:u,error:(s.fillBlankQuestions||{}).question,path:m,blockFillblankSynchronization:this.state.blockSync})),C&&r.a.createElement("div",{className:bi.a.PreviewContainer},r.a.createElement(et.a,{paragraph:!0,variant:"h6"},p("testForm.preview")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:ac.a.sanitize(C,{ALLOW_UNKNOWN_PROTOCOLS:!0,ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}})),"testForm"===u&&r.a.createElement(Qs,{summary:p("testForm.textFromQuestionbank"),index:0},r.a.createElement(Gs,{questionType:"Fill-in-the-blanks questions",selecting:!0,onBlockSync:function(){return e.handleBlockSync(!0)}})),f.length>0?r.a.createElement(et.a,{style:{marginTop:20},variant:"h6",gutterBottom:!0,paragraph:!0},p("testForm.customizeAnswers")):"",r.a.createElement("ul",{className:bi.a.TestFormList},f.map((function(t,n){var a=r.a.createElement(v,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},r.a.createElement(ca.a,{name:"fillBlankQuestions.answers.".concat(n,".audioFile"),component:Pa,uploadButtonText:p("testForm.buttons.selectAudioFile"),index:n,onChangeFile:function(e,t){c(u,"fillBlankQuestions.answers.".concat(t,".browserAudioFile"),e)},mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]})),r.a.createElement(ca.a,{component:Li,name:"fillBlankQuestions.answers.".concat(n,".browserAudioFile"),onStart:function(){var t=Object(Aa.a)(xa.a.mark((function t(a){var r;return xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ho(a,null,n,null,function(){var t=Object(Aa.a)(xa.a.mark((function t(a){var r;return xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a;case 2:r=t.sent,e.setAudioData(r.blob,r.file,n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:r=t.t0,e.initiateRecording(r.recorder,r.recordingTimeout,n,r.isRecording);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onStop:function(){var t=Object(Aa.a)(xa.a.mark((function t(a){var r;return xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wo(a,null,n,e.getRecordingTimeoutQuestion(n),e.getRecorderFromClickQuestion(n));case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:r=t.t0,e.setAudioData(r.blob,r.file,n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onPreview:function(){zo("audioQuestion[".concat(n,"]"))},onClear:function(){return e.setAudioData(null,null,n)},id:"audioQuestion[".concat(n,"]"),recordDisabled:(f[n]||{}).recordingQuestion,audioSource:(f[n]||{}).browserAudioFile,isMicAlert:e.state.micBlockedWarning}));return r.a.createElement("li",{key:"blanks[".concat(n,"]")},r.a.createElement("div",{className:bi.a.QuestionCustomizationContainer},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(p("testForm.blank")," ").concat(n+1)),r.a.createElement(et.a,{className:bi.a.CorrectAnswer,variant:"body1",gutterBottom:!0,paragraph:!0},"".concat(p("testForm.correctAnswer"),": "),f[n]?f[n].answer.replace(/&nbsp;/g," "):""),r.a.createElement(ca.a,{name:"fillBlankQuestions.answers.".concat(n,".selectableAnswer"),options:{checked:!1,label:p("testForm.fields.selectableAnswer")},component:Ea,type:"checkbox"}),r.a.createElement(ca.a,{name:"fillBlankQuestions.answers.".concat(n,".audio"),type:"checkbox",options:{checked:!1,label:p("testForm.audio")},component:Ea}),f[n].selectableAnswer&&r.a.createElement(v,null,r.a.createElement(et.a,{variant:"body1",gutterBottom:!0,paragraph:!0},p("testForm.incorrectAnswerOptions")),["incorrectAnswerOne","incorrectAnswerTwo","incorrectAnswerThree"].map((function(t,a){return r.a.createElement("div",{key:"".concat(t,"[").concat(a,"]"),className:bi.a.TextField},r.a.createElement(ca.a,{wait:250,component:fa,name:"fillBlankQuestions.answers.".concat(n,".answerOptions.").concat(t),label:"".concat(p("testForm.incorrectOption")," ").concat(a+1),margin:"dense",variant:"outlined",size:"small",simple:!0,width:"95%",debounce:!0,onChange:function(){return e.touchIncorrectAnswerFields(a)}}))}))),(f[n]||{}).audio?a:null,"testForm"===u&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(ca.a,{name:"fillBlankQuestions.answers.".concat(n,".marks"),component:Oa,error:(g[n]||{}).marks,options:{label:p("testForm.fields.marks"),size:"small"}}))))}))))}}]),n}(a.Component),oc=Object(_t.a)({destroyOnUnmount:!1,forceUnregisterOnUnmount:!1,validate:Fr})(rc),sc=Object(c.b)((function(e,t){var n=t.form;return{formValues:Object(Ve.a)(n)(e),formErrors:Object(Ft.a)(n)(e)}}),(function(e){return{touchField:function(t,n){e(Object(Dt.d)(t,n))},changeField:function(t,n,a){e(Object(Dt.a)(t,n,a))},updateErrors:function(t,n){e(Object(Dt.e)(t,n))}}}))(Object(Ia.a)("common")(oc)),ic=function(e){var t=e.changeField,n=e.makeAudioFieldTouched,o=e.fields,s=e.meta,i=e.formValues,c=void 0===i?{}:i,l=e.path,u=e.t,d=Object(a.useState)(!1),m=Object(mo.a)(d,2),p=m[0],f=m[1],g=Object(a.useState)(null),b=Object(mo.a)(g,2),h=b[0],E=b[1];Object(a.useEffect)((function(){return function(){clearTimeout(h)}}),[]);var y={label:u("testForm.fields.audioQuestion"),checked:!1},T={label:u("testForm.fields.audioAnswer"),checked:!1},S=function(e,n,a,r,o){o?("question"===r&&(t("speakingQuestions.".concat(a,".isRecordingQuestion"),o),t("speakingQuestions.".concat(a,".questionRecorder"),e),t("speakingQuestions.".concat(a,".questionRecordingTimeout"),n)),"answer"===r&&(t("speakingQuestions.".concat(a,".isRecording"),!0),t("speakingQuestions.".concat(a,".recorder"),e),t("speakingQuestions.".concat(a,".recordingTimeout"),n))):function(){clearTimeout(h),f(!0);var e=setTimeout((function(){f(!1)}),5e3);E(e)}()},k=function(e,a,r,o){"question"===o&&(t("speakingQuestions.".concat(r,".isRecordingQuestion"),!1),t("speakingQuestions.".concat(r,".questionRecordedBlob"),e),t("speakingQuestions.".concat(r,".audioFileQuestion"),a),n("speakingQuestions.".concat(r,".questionRecordedBlob"))),"answer"===o&&(t("speakingQuestions.".concat(r,".isRecording"),!1),t("speakingQuestions.".concat(r,".recordedBlob"),e),t("speakingQuestions.".concat(r,".audioFile"),a),n("speakingQuestions.".concat(r,".recordedBlob")))};return r.a.createElement("ul",{className:bi.a.TestFormList},o.map((function(e,n){var a,s,i=(c.speakingQuestions||[])[n]||{},d=i.recordingTimeout,m=i.questionRecordingTimeout,f=i.recorder,g=i.questionRecorder,b=i.questionRecordedBlob,h=i.recordedBlob,E=i.isRecordingQuestion,w=i.isRecording,O=["question","answer"].map((function(e,t){return r.a.createElement(ca.a,{component:Li,name:"speakingQuestions.".concat(n,".").concat(0===t?"questionRecordedBlob":"recordedBlob"),onStart:function(){var t=Object(Aa.a)(xa.a.mark((function t(a){var r;return xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ho(a,e,n,null,function(){var t=Object(Aa.a)(xa.a.mark((function t(a){var r;return xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a;case 2:r=t.sent,k(r.blob,r.file,n,e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:r=t.t0,S(r.recorder,r.recordingTimeout,n,e,r.isRecording);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onStop:function(){var a=Object(Aa.a)(xa.a.mark((function a(r){var o;return xa.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Wo(r,null,n,0===t?m:d,0===t?g:f);case 2:if(a.t0=a.sent,a.t0){a.next=5;break}a.t0={};case 5:o=a.t0,k(o.blob,o.file,n,e);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),onPreview:function(){zo(0===t?"audioQuestion[".concat(n,"]"):"audioAnswer[".concat(n,"]"))},onClear:function(){return k(null,null,n,e)},id:0===t?"audioQuestion[".concat(n,"]"):"audioAnswer[".concat(n,"]"),recordDisabled:0===t?E:w,audioSource:0===t?b:h,isMicAlert:p})})),C=["question","answer"].map((function(e){return r.a.createElement(ca.a,{name:"speakingQuestions.".concat(n,".").concat("question"===e?"audioQuestion":"audioAnswer"),options:"question"===e?y:T,component:Ea,type:"checkbox"})}));return r.a.createElement("li",{key:n,className:bi.a.QuestionCustomizationContainer},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(u("testForm.question")," ").concat(n+1)),C[0],i.audioQuestion?r.a.createElement(v,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ca.a,(a={name:"speakingQuestions.".concat(n,".audioFileQuestion"),index:"q".concat(n),onChangeFile:function(e){t("speakingQuestions.".concat(n,".questionRecordedBlob"),e)},uploadButtonText:u("testForm.buttons.selectAudioFile"),component:Pa},Object(po.a)(a,"uploadButtonText",u("testForm.buttons.selectAudioFile")),Object(po.a)(a,"mimeTypesAllowed","audio/*"),Object(po.a)(a,"extensionsAllowed",["mp3","wav","wma"]),Object(po.a)(a,"loadedFile",i.questionRecordedBlob),a))),O[0]):r.a.createElement("div",{className:bi.a.TextEditor},r.a.createElement(ca.a,{name:"".concat(e,".question"),field:"".concat(e,".question"),reduxForm:"testForm",component:Lr,path:l})),r.a.createElement("div",null,C[1],!0===i.audioAnswer&&r.a.createElement(v,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ca.a,(s={name:"speakingQuestions.".concat(n,".audioFile"),uploadButtonText:u("testForm.buttons.selectAudioFile"),index:"a".concat(n),onChangeFile:function(e){t("speakingQuestions.".concat(n,".recordedBlob"),e)}},Object(po.a)(s,"uploadButtonText",u("testForm.buttons.selectAudioFile")),Object(po.a)(s,"component",Pa),Object(po.a)(s,"mimeTypesAllowed","audio/*"),Object(po.a)(s,"extensionsAllowed",["mp3","wav","wma"]),Object(po.a)(s,"loadedFile",i.recordedBlob),s))),O[1])),r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(ca.a,{name:"".concat(e,".marks"),component:Oa,options:{label:u("testForm.fields.marks"),size:"small"}})),r.a.createElement(ot.a,{variant:"outlined",color:"default",type:"button",title:"Remove Question",onClick:function(){return o.remove(n)},fullWidth:!0,disabled:1===(c.speakingQuestions||[]).length},u("testForm.buttons.removeQuestion")))})),r.a.createElement("li",null,r.a.createElement(ot.a,{variant:"outlined",color:"default",type:"button",onClick:function(){return o.push({marks:1})},fullWidth:!0},u("testForm.buttons.addQuestion")),s.submitFailed&&s.error&&r.a.createElement("span",null,s.error)))},cc=Object(_t.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Fr})((function(e){var t=e.formValues,n=void 0===t?{}:t,a=Object(co.a)(e,["formValues"]),o=Object(St.a)().t,s=(n.speakingQuestions||[]).length;return r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h4",gutterBottom:!0,paragraph:!0},o("testForm.speakingSection")),r.a.createElement(rr.a,{name:"speakingQuestions",formValues:n,component:ic,props:a,t:o}),r.a.createElement(Qs,{index:0,summary:o("testForm.selectQuestion")},r.a.createElement(Gs,{questionType:"Speaking questions",selecting:!0,indexToAdd:s})))})),lc=Object(c.b)((function(e){return{formValues:Object(Ve.a)("testForm")(e),initialValues:e.instructorTest.loadedTestFormData}}),(function(e){return{changeField:function(t,n){e(Object(Dt.a)("testForm",t,n))},makeAudioFieldTouched:function(t){return e(Object(Dt.d)("testForm",t))}}}))(cc),uc=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).handleWindowClose=function(e){e.preventDefault(),a.state.isUpdating||a.handleDeleteUnsavedImages()},a.handleDeleteUnsavedImages=function(){var e=ro(a.props.questions,"courseQuestions")||[],t=ro(a.props.formValues,"testForm")||[],n=[];t.forEach((function(e){-1===a.state.initialUrls.findIndex((function(t){return t===e}))&&n.push(e)})),n.filter((function(t){return e.includes(t)?null:t})).filter((function(e){return e})).length>0&&a.props.deleteImg(n,a.props.token)},a.closeModalHandler=function(){a.setState({modalOpen:!1})},a.openModalHandler=function(){a.setState({modalOpen:!0})},a.onSubmit=function(){var e=a.props,t=e.addNewTest,n=e.formValues,r=e.token,o=e.editing,s=e.course,i=e.userId,c=e.initialValues,l=e.coursePanel,u=e.questions,d=e.students;e.t;if(a.checkPageValidity()){var m=[];d.forEach((function(e){e.testResults.forEach((function(e){m.push(e.test)}))})),o&&m.includes(c._id)?a.setState({isBlockedByStudent:!0}):a.setState({isUpdating:!0},(function(){var e=ro(u,"courseQuestions")||[],d=ro(n,"testForm")||[],m=(a.state.initialUrls||[]).filter((function(e){return d.includes(e)?null:e})).filter((function(t){return e.includes(t)?null:t}));t(n,r,o,s._id,i,o?c._id:a.state.newTestId,"test"===l?"test":"assignment",m)}))}},a.nextPage=function(){a.setState((function(e){return{page:e.page+1}}))},a.previousPage=function(){a.setState((function(e){return{page:e.page-1}}))},a.checkPageValidity=function(e){var t=a.props,n=t.touchField,r=(t.testForm,t.formValues),o=t.coursePanel,s=t.testFormSection,i=Fr(r),c="test"===o?"test":"assignment";if(1===e&&["".concat(c,"Name"),"".concat(c,"Weight"),"latePenalty","lateDaysAllowed","testTime","test"===o?"testType":null].forEach((function(e){n(e)})),2===e&&["mcSectionWeight","essaySectionWeight","speakingSectionWeight","fillBlankSectionWeight","testSections"].forEach((function(e){n(e)})),3===e&&(n("dueDate"),n("gradeReleaseDate"),n("availableOnDate")),4===e){["multipleChoice","essay","speaking","fillInTheBlanks","test"].forEach((function(e){n("readingMaterial.".concat(e,".file")),n("audioMaterial.".concat(e,".audioFile"))}))}return"mc"===s&&Array.from(r.mcQuestions||[]).forEach((function(e,t){n("mcQuestions.".concat(t,".question")),n("mcQuestions.".concat(t,".correctAnswers"))})),"essay"===s&&Array.from(r.essayQuestions||[]).forEach((function(e,t){n("essayQuestions.".concat(t,".question"))})),"speaking"===s&&Array.from(r.speakingQuestions||[]).forEach((function(e,t){n("speakingQuestions.".concat(t,".question")),n("speakingQuestions.".concat(t,".questionRecordedBlob")),n("speakingQuestions.".concat(t,".recordedBlob"))})),"fillblanks"===s&&Array.from(a.state.latestFillBlankAnswers).forEach((function(e,t){n("fillBlankQuestions.answers.".concat(t,".browserAudioFile")),n("fillBlankQuestions.answers.".concat(t,".audioFile")),n("fillBlankQuestions.answers.".concat(t,".answerOptions.incorrectAnswerThree"))})),1===e&&i.infoPageOneError||2===e&&i.infoPageTwoError||3===e&&i.infoPageThreeError||4===e&&i.infoPageFourError||"mc"===s&&i.mcSectionPageError||"essay"===s&&i.essayPageError||"speaking"===s&&i.speakingPageError?(a.setState({isValid:!1}),!1):"fillblanks"!==s||!i.fillblankPageError||(a.setState({isValid:!1}),!1)},a.getButtons=function(e,t,n,o,s){var i=a.props.t;return r.a.createElement(v,null,r.a.createElement("div",{className:1===e?bi.a.flexPositioningEnd:bi.a.flexPositioningSpaceBetween},1!==e&&r.a.createElement(ot.a,{variant:"outlined",color:"primary",type:"button",className:bi.a.MuiButtonBase,onClick:function(){a.previousPage(),a.resetFormValidity()},startIcon:r.a.createElement(ia.a,null)},""),!(t===e)&&r.a.createElement(ot.a,{variant:"outlined",color:s?"secondary":"primary",type:"button",className:bi.a.MuiButtonBase,onClick:function(){a.checkPageValidity(e)&&(a.nextPage(),a.resetFormValidity())},startIcon:r.a.createElement(oa.a,null)},"")),r.a.createElement("div",{className:bi.a.flexPositioningEven},t===e&&!n&&r.a.createElement(ot.a,{fullWidth:!0,variant:"outlined",style:s||a.state.isBlockedByStudent?{color:"#FF4136",borderColor:"#FF4136",backgroundColor:"#ffcdd2"}:{color:"#43a047",borderColor:"#43a047",backgroundColor:"#e8f5e9"},type:"button",className:bi.a.MuiButtonBase,onClick:a.onSubmit},i(o?"testForm.buttons.update":"testForm.buttons.publish"))))},a.resetFormValidity=function(){a.setState((function(e){if(e.page!==a.state.page)return{isValid:!0}}))},a.state={page:1,modalOpen:!1,initialUrls:[],latestFillBlankAnswers:[],newTestId:null,isValid:!0,isUpdating:!1,isBlockedByStudent:!1},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.handleWindowClose);var e=ro(this.props.initialValues,"testForm");this.setState({initialUrls:e,newTestId:this.props.editing?null:(new no.a.ObjectId).toHexString()})}},{key:"componentWillReceiveProps",value:function(e){var t=((e.formValues||{}).fillBlankQuestions||{}).answers;this.setState({latestFillBlankAnswers:t})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.handleWindowClose),this.state.isUpdating||this.handleDeleteUnsavedImages(),this.props.clearTestForm()}},{key:"render",value:function(){var e=this.props,t=(e.testForm,e.setTestSection),n=e.questions,a=e.setQuestionEditing,o=e.addQuestionToTest,s=e.editing,i=e.loading,c=e.coursePanel,l=e.course,u=e.formValues,d=void 0===u?{}:u,m=e.formErrors,p=e.testFormSection,f=e.initialValues,g=e.t,b=this.state.isValid||!m.infoPageOneError&&"info1"===p||!m.infoPageTwoError&&"info2"===p||!m.infoPageThreeError&&"info3"===p||!m.infoPageFourError&&"info4"===p||!m.mcSectionPageError&&"mc"===p||!m.essayPageError&&"essay"===p||!m.speakingPageError&&"speaking"===p||!m.fillblankPageError&&"fillblanks"===p||!1!==m.fillblankPageError&&!0!==m.fillblankPageError&&"fillblanks"===p;console.log("isError: ",!b),console.log("this.state.isBlockedByStudent",this.state.isBlockedByStudent);var h,E="test"===c,v=d.testSections||[],y=v.find((function(e){return"mc"===e})),T=v.find((function(e){return"essay"===e})),S=v.find((function(e){return"fillblanks"===e})),k=v.find((function(e){return"speaking"===e})),w=v.length+4,O="mc"===y?6:5;"mc"===y&&"essay"===T&&(h=7),"mc"!==y&&"essay"===T&&(h=6),"mc"===y&&"essay"!==T&&(h=6),"mc"!==y&&"essay"!==T&&(h=5);var C=w,x=this.state,A=x.page,F=x.newTestId;A>=1&&A<5&&t("info".concat(A)),y&&5===A&&t("mc"),A===O&&T&&t("essay"),A===h&&k&&t("speaking"),A===C&&S&&t("fillblanks");var D="courses/".concat(l._id,"/tests/").concat(s?d._id:F);return r.a.createElement("div",{className:bi.a.Background},r.a.createElement(to,{active:i,transparent:!0}),r.a.createElement(Zr,{activeStep:this.state.page-1,steps:w+1,progress:!0}),r.a.createElement("div",{style:{paddingTop:"20px"}},1===A&&r.a.createElement(fi,{isTest:E}),2===A&&r.a.createElement(Si,{isTest:E}),3===A&&r.a.createElement(wi,{isTest:E}),4===A&&r.a.createElement(Bi,{path:D,isTest:E}),5===A&&y&&r.a.createElement(Wi,{path:D,questions:n,setQuestionEditing:function(e){return a(e)},addQuestionToTest:function(e,t){return o(e,t)}}),A===O&&T&&r.a.createElement(Gi,{path:D,questions:n,setQuestionEditing:function(e){return a(e)},addQuestionToTest:function(e,t){return o(e,t)}}),A===h&&k&&r.a.createElement(lc,{path:D,questions:n,setQuestionEditing:function(e){return a(e)},addQuestionToTest:function(e,t){return o(e,t)}}),A===C&&S&&r.a.createElement(sc,{path:D,form:"testForm",questions:n,setQuestionEditing:function(e){return a(e)},addQuestionToTest:function(e,t){return o(e,t)}})),!b&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},r.a.createElement(et.a,{color:"error"},g("testForm.errors.correctForm"))),this.state.isBlockedByStudent&&s&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},r.a.createElement(et.a,{variant:"caption",color:"error"},f.assignment?g("testForm.errors.studentTakingAssignment"):g("testForm.errors.studentTakingTest"))),this.getButtons(A,w,null,s,!b))}}]),n}(a.Component),dc=Object(_t.a)({form:"testForm",enableReinitialize:!1,validate:Fr,destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})(uc),mc=Object(c.b)((function(e){var t=na.t("testForm.fillblanksSectionDefaultText"),n=e.common.selectedCourse,a=e.instructorTest.loadedTestFormData,r=(n.tests||[]).filter((function(e){return!e.assignment})),o=(n.tests||[]).filter((function(e){return e.assignment})),s=e.common.configuration.instructorFileSizeLimit,i={instructorFileSizeLimit:s,tests:r,assignments:o,course:n,published:!0,passingRequired:!1,assignment:"assignment"===e.common.coursePanel||null,materialsDisplay:"test",equalSectionWeight:!0,mcQuestions:((a||{}).mcQuestions||[]).length>0?(a||{}).mcQuestions:[{marks:1,answers:["".concat(na.t("testForm.fields.option")," 1"),"".concat(na.t("testForm.fields.option")," 2")],correctAnswers:["1"]}],essayQuestions:((a||{}).essayQuestions||[]).length>0?(a||{}).essayQuestions:[{marks:1}],speakingQuestions:((a||{}).speakingQuestions||[]).length>0?(a||{}).speakingQuestions:[{marks:1}],fillBlankQuestions:((a||{}).fillBlankQuestions||{}).question?(a||{}).fillBlankQuestions:{question:t,answers:[{marks:1,selectableAnswer:!1,answer:"piece of text"}],correctAnswers:["piece of text"]}},c=(a||{}).testSections||[],l=[];c.forEach((function(e){"mc"===e&&l.push("multipleChoice"),"essay"===e&&l.push("essay"),"speaking"===e&&l.push("speaking"),"fillblanks"===e&&l.push("fillInTheBlanks")}));var u=l.includes("fillInTheBlanks"),d=e.common.editing;return{formValues:Object(Ve.a)("testForm")(e),formErrors:Object(Ft.a)("testForm")(e),token:e.authentication.token,userId:e.authentication.userId,initialValues:d?Object(At.a)(Object(At.a)({},a),{},{instructorFileSizeLimit:s,tests:r,fillBlankQuestions:u?a.fillBlankQuestions:{question:t,answers:[{marks:1,selectableAnswer:!1,answer:"piece of text"}],correctAnswers:["piece of text"]},assignments:o,course:n,materialsDisplay:l[0]||"test"}):i,editing:e.common.editing,course:e.common.selectedCourse,testForm:e.form.testForm,testFormSection:e.instructorTest.testFormSection,section:e.instructorTest.testSection,coursePanel:e.common.coursePanel,questions:e.instructorQuestion.questionBank,loading:e.instructorTest.loading,students:e.common.students}}),(function(e){return{addNewTest:function(t,n,a,r,o,s,i,c){e(function(e,t,n,a,r,o,s,i){return{type:"CREATE_UPDATE_TEST_START",payload:{formData:e,token:t,editing:n,courseId:a,instructorId:r,testId:o,formType:s,filesToDelete:i}}}(t,n,a,r,o,s,i,c))},clearTestForm:function(){return e(W())},setTestSection:function(t){return e({type:"SET_TEST_FORM_SECTION",testSection:t})},touchField:function(t){e(Object(Dt.d)("testForm",t))},deleteImg:function(t,n){e(ke(t),n)}}}))(Object(Ia.a)("common")(dc)),pc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={slides:[],isValid:!0};e.lessonName&&(e.lessonName||"").trim()||(t.isValid=!1,t.lessonName=na.t("lessonForm.errors.required")),Array.from(e.lessons||[]).forEach((function(n){e._id!==n._id&&(n.lessonName||"").toLowerCase().trim()===(e.lessonName||"").toLowerCase().trim()&&(t.isValid=!1,t.lessonName=na.t("lessonForm.errors.noDuplicateLessonNames"))}));var n=parseInt((e.course||{}).courseStartDate),a=parseInt((e.course||{}).courseEndDate),r=new Date(e.availableOnDate).getTime();return!(n&&a&&r)||r>n&&r<a||(t.availableOnDate=na.t("lessonForm.errors.availableOnDateInCourseDuration"),t.isValid=!1),t.slides=Array.from(e.slides||{}).map((function(t){var n={};return t.slideContent||t.videoContent||(n.isValid=!1,n.slideContent=na.t("lessonForm.errors.required")),!t.loadedVideo&&t.videoContent&&(n.isValid=!1,n.videoFile=na.t("lessonForm.errors.uploadOrDisable")),console.log("values.instructorFileSizeLimit",e.instructorFileSizeLimit),t.audioFile instanceof File&&t.audioUpload&&(t.audioFile||{}).size>1e3*e.instructorFileSizeLimit*1e3&&(n.isValid=!1,n.audioFile="".concat(na.t("lessonForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),t.videoFile instanceof File&&t.videoContent&&(t.videoFile||{}).size>1e3*e.instructorFileSizeLimit*1e3&&(n.isValid=!1,n.videoFile="".concat(na.t("lessonForm.errors.videoCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),n.videoFile||n.audioFile||n.slideContent?n:null})),t},fc=n(232),gc=n.n(fc),bc=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).handleWindowClose=function(e){e.preventDefault(),a.state.isUpdating||a.handleDeleteUnsavedImages()},a.handleDeleteUnsavedImages=function(){var e=ro(a.props.formValues.values,"lessonForm"),t=[];(e||[]).forEach((function(e){-1===a.state.initialUrls.findIndex((function(t){return t===e}))&&t.push(e)})),t.length>0&&a.props.deleteImg(t,a.props.token)},a.checkPageValidity=function(){var e=a.props,t=e.formErrors,n=e.touchField;if(((e.formValues.values||{}).slides||[]).forEach((function(e,t){n("slides.".concat(t,".slideContent")),n("slides.".concat(t,".videoFile")),n("slides.".concat(t,".audioFile"))})),n("availableOnDate"),n("lessonName"),t.isValid)return!0},a.onSubmit=function(){var e=a.props,t=e.addNewLesson,n=e.editing,r=e.token,o=e.course,s=(e.changeTab,e.formValues);if(a.checkPageValidity()){var i=ro(s.values,"lessonForm"),c=(a.state.initialUrls||[]).filter((function(e){return i.includes(e)?null:e}));a.setState({isUpdating:!0},(function(){t(n?s.values:Object(At.a)(Object(At.a)({},s.values),{},{_id:a.state.newLessonId}),r,n,o._id,c)}))}else a.setState({isValid:!1})},a.initiateRecording=function(e,t,n){var r=a.props.changeField;r("slides.".concat(n,".recording"),!0),r("slides.".concat(n,".recorder"),e),r("slides.".concat(n,".recordingTimeout"),t)},a.setAudioData=function(e,t,n){var r=a.props.changeField;r("slides.".concat(n,".recording"),!1),r("slides.".concat(n,".recordedBlob"),e),r("slides.".concat(n,".audioFile"),t)},a.getAudioSource=function(e,t){return((e.slides||[])[t]||{}).recordedBlob},a.getAudioRecording=function(e,t){return((e.slides||[])[t]||{}).recording},a.getRecorderFromClick=function(e,t){return((e.slides||[])[t]||{}).recorder||{}},a.getRecordingTimeout=function(e,t){return((e.slides||[])[t]||{}).recordingTimeout},a.renderSlides=function(e){var t=e.fields,n=e.meta,o=n.error,s=n.submitFailed,i=e.formValues,c=void 0===i?{}:i,l=e.course,u=e.formErrors,d=e.touchField,m=e.t;return r.a.createElement("ul",{className:gc.a.FormList},t.map((function(e,n){var o={label:m("lessonForm.fields.videoContent"),checked:!1},s={label:m("lessonForm.fields.audioFromFile"),checked:!1,disabled:!!((u.slides||[])[n]||{}).audioFile},i=a.props.changeField;return r.a.createElement("li",{className:gc.a.SlideCustomizationContainer,key:n},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(m("lessonForm.slide")," ").concat(n+1)),r.a.createElement(ca.a,{name:"slides.".concat(n,".videoContent"),options:o,component:Ea}),((c.slides||[])[n]||{}).videoContent?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ca.a,{name:"slides.".concat(n,".videoFile"),onChangeFile:function(e){i("slides.".concat(n,".loadedVideo"),e)},uploadButtonText:m("lessonForm.buttons.selectVideoFile"),index:n,component:Pa,loadedFile:((c.slides||[])[n]||{}).loadedVideo,onClear:function(){i("slides.".concat(n,".loadedVideo"),null),i("slides.".concat(n,".videoFile"),null)},videoFile:!0,mimeTypesAllowed:"video/*,video/x-matroska",extensionsAllowed:["mp4","avi","mov","mkv","webm"]},((c.slides||[])[n]||{}).loadedVideo&&r.a.createElement(Po,{url:((c.slides||[])[n]||{}).loadedVideo}))):r.a.createElement(v,null,r.a.createElement("div",{className:gc.a.TextEditor},r.a.createElement(ca.a,{name:"slides.".concat(n,".slideContent"),component:Lr,path:"courses/".concat(l._id,"/lessons/").concat(a.props.editing?c._id:a.state.newLessonId),reduxForm:"lessonForm",field:"slides.".concat(n,".slideContent")})),r.a.createElement(ca.a,{name:"slides.".concat(n,".audioUpload"),options:s,component:Ea}),r.a.createElement(v,null,((c.slides||[])[n]||{}).audioUpload?r.a.createElement(v,null,r.a.createElement("div",{style:{textAlign:"center"},className:gc.a.flexPositioningEven},r.a.createElement(ca.a,{name:"slides.".concat(n,".audioFile"),index:n,uploadButtonText:m("lessonForm.buttons.selectAudioFile"),onChangeFile:function(e){i("slides.".concat(n,".recordedBlob"),e),d("slides.".concat(n,".audioFile"))},component:Pa,loadedFile:a.getAudioRecording(c,n),mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]}),r.a.createElement(Ri,{onPreview:function(){a.getAudioSource(c,n)&&zo("slideAudio[".concat(n,"]"))},id:"slideAudio[".concat(n,"]"),audioSource:a.getAudioSource(c,n)})),r.a.createElement(Ni,{onClear:function(){return a.setAudioData(null,null,n)}})):r.a.createElement(Li,{onStart:function(){var e=Object(Aa.a)(xa.a.mark((function e(t){var r;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ho(t,null,n,null,function(){var e=Object(Aa.a)(xa.a.mark((function e(t){var r;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:r=e.sent,a.setAudioData(r.blob,r.file,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:r=e.t0,a.initiateRecording(r.recorder,r.recordingTimeout,n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onStop:function(){var e=Object(Aa.a)(xa.a.mark((function e(t){var r;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wo(t,null,n,a.getRecordingTimeout(c,n),a.getRecorderFromClick(c,n));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:r=e.t0,a.setAudioData(r.blob,r.file,n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPreview:function(){zo("slideAudio[".concat(n,"]"))},onClear:function(){return a.setAudioData(null,null,n)},id:"slideAudio[".concat(n,"]"),recordDisabled:a.getAudioRecording(c,n),audioSource:a.getAudioSource(c,n)}))),r.a.createElement(ot.a,{fullWidth:!0,type:"button",title:"Remove Slide",onClick:function(){t.remove(n)},color:"default",variant:"outlined",disabled:1===(c.slides||[]).length},m("lessonForm.buttons.removeSlide")))})),r.a.createElement("li",null,r.a.createElement(ot.a,{title:"Add Slide",variant:"outlined",color:"default",type:"button",onClick:function(){return t.push({})},fullWidth:!0},m("lessonForm.buttons.addSlide")),s&&o&&r.a.createElement("span",null,o)))},a.state={initialUrls:[],newLessonId:null,isValid:!0,isUpdating:!1},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.handleWindowClose);var e=ro(this.props.initialValues,"lessonForm");this.setState({initialUrls:e,newLessonId:this.props.editing?null:(new no.a.ObjectId).toHexString()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.handleWindowClose),this.state.isUpdating||this.handleDeleteUnsavedImages(),this.props.clearLessonForm()}},{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.formValues,a=void 0===n?{}:n,o=e.editing,s=(e.handleSubmit,e.loading,e.course),i=e.changeField,c=e.formErrors,l=e.touchField,u=e.t,d={label:u("lessonForm.fields.publish"),checked:!1},m=(a.values||{}).createdAt;return r.a.createElement(v,null,r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement(ca.a,{className:gc.a.center,name:"lessonName",type:"text",component:fa,label:u("lessonForm.fields.lessonName")}),r.a.createElement(ca.a,{name:"published",options:d,component:Ea}),r.a.createElement(ca.a,{name:"availableOnDate",type:"dateTime",handleChange:function(e){return i("availableOnDate",e)},component:er,fullWidth:!0,options:{disablePast:!0,label:u("lessonForm.fields.availableOnDate"),minDate:m}})),r.a.createElement(rr.a,{formValues:a.values,t:u,name:"slides",component:this.renderSlides,course:s,formErrors:c,touchField:l}),!this.state.isValid&&!c.isValid&&r.a.createElement(et.a,{style:{textAlign:"center",marginBottom:"20px"},gutterBottom:!0,color:"error"},u("lessonForm.errors.correctForm")),r.a.createElement(ot.a,{fullWidth:!0,variant:"outlined",style:this.state.isValid||c.isValid?{color:"#43a047",borderColor:"#43a047",backgroundColor:"#e8f5e9"}:{color:"#FF4136",borderColor:"#FF4136",backgroundColor:"#ffcdd2"},type:"submit",disabled:t,onClick:this.onSubmit},u(o?"lessonForm.buttons.update":"lessonForm.buttons.publish")))}}]),n}(a.Component),hc=Object(_t.a)({form:"lessonForm",enableReinitialize:!0,validate:pc})(bc),Ec=Object(c.b)((function(e,t){var n=e.common.selectedCourse,a=n.lessons||[],r=e.common.editing,o=e.common.configuration.instructorFileSizeLimit;return{formErrors:Object(Ft.a)("lessonForm")(e),loading:e.instructorLesson.loading,token:e.authentication.token,formValues:e.form.lessonForm,initialValues:Object(At.a)(Object(At.a)({},e.instructorLesson.loadedLessonFormData),{},{instructorFileSizeLimit:o,lessons:a,course:n,published:!r||e.instructorLesson.loadedLessonFormData.published}),editing:r,course:n}}),(function(e){return{addNewLesson:function(t,n,a,r,o){e(function(e,t,n,a,r){return{type:"CREATE_LESSON_START",payload:{formValues:e,token:t,editing:n,course:a,filesToDelete:r}}}(t,n,a,r,o))},changeField:function(t,n){return e(Object(Dt.a)("lessonForm",t,n))},touchField:function(t){e(Object(Dt.d)("lessonForm",t))},clearLessonForm:function(){return e(W())},deleteImg:function(t,n){e(ke(t),n)}}}))(Object(Ia.a)("common")(hc)),vc=Object(c.b)((function(e){return{course:e.common.selectedCourse,studentLoggedIn:e.authentication.studentLoggedIn,instructorLoggedIn:e.authentication.instructorLoggedIn,token:e.authentication.token,notifications:e.common.notifications}}),(function(e){return{onEditLesson:function(t,n){return e(function(e,t){return{type:"FETCH_LESSON_START",payload:{lessonId:e,token:t}}}(t,n))},changeTab:function(t){return e(Re(t))},openModal:function(t,n){return e(Ne(t,n))}}}))((function(e){var t=e.course,n=void 0===t?{}:t,a=e.instructorLoggedIn,o=e.studentLoggedIn,s=e.token,i=e.folder,c=e.isModules,l=e.onEditLesson,u=e.openModal,d=e.changeTab,m=Object(St.a)().t;return((n||{}).lessons||[]).map((function(e,t){var p=n.lessons.map((function(e){return e._id})),f=(i||[]).filter((function(e){return"lesson"===e.documentType})).map((function(e){return e.documentId}))||[];if(!f.includes(e._id)&&c)return null;var g=[];return p.forEach((function(e){f.includes(e)&&g.push(e)})),r.a.createElement(v,{key:e._id},c&&g[0]===e._id&&r.a.createElement(Mr.a,{style:{background:"#2196f3"}},r.a.createElement(et.a,{style:{color:"white"}},m("lessons.lessons"))),r.a.createElement("div",null,r.a.createElement(Mr.a,{onClick:function(){u(e,"lesson")},button:!0,disabled:o&&Date.now()<e.availableOnDate},o&&0===(e.lessonSlides||[]).length&&r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{disabled:!0,checked:!1,value:"checked"})}),o&&(e.lessonSlides||[]).length>0&&r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:-1===e.lessonSlides.findIndex((function(e){return!e.seen})),value:"checked"})}),c&&r.a.createElement(us.a,{style:{margin:"auto",minWidth:"30px"}},r.a.createElement(Cs.a,null)),r.a.createElement(lr.a,{primary:c?e.lessonName:"".concat(m("lessons.lesson")," ").concat(t+1," ").concat(e.lessonName),secondary:Date.now()<e.availableOnDate?"".concat(m("lessons.availableOn")," ").concat(ct()(parseInt(e.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")):null}),a&&r.a.createElement(v,null,r.a.createElement(Na.a,{onClick:function(t){t.stopPropagation(),l((e||{})._id,s),d(1)}},r.a.createElement(ws.a,{color:"primary"})),r.a.createElement(Na.a,{onClick:function(t){t.stopPropagation(),u(e,"deleteLesson")}},r.a.createElement(Ma.a,{color:"secondary"}))))))}))})),yc=n(1253),Tc=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;n.length>0&&(t=(Array.from(n).find((function(t){return t.test._id===e.test._id}))||{}).test),a&&(t=a);var r=(e||{}).testResult||{},o=r.gradingInProgress,s=r.graded,i=(r.multiplechoiceSection||{}).answers,c=(r.fillInBlanksSection||{}).answers,l=((t||{}).multipleChoiceQuestions||[]).map((function(e,t){var n=((r.multiplechoiceSection||{}).answers||[])[t]||{};if(o||s)return{marks:n.marks,additionalNotes:n.additionalNotes};return function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(((e||{}).answerOptions||[]).filter((function(t,n){if(((e||{}).correctAnswers||[]).includes((n+1).toString()))return t})),((i||[]).find((function(e){return e.questionNumber===t+1}))||{}).answers||[])?{marks:(e||{}).marks}:{marks:0}})),u=((t||{}).essayQuestions||[]).map((function(e,t){var n=((r.essaySection||{}).answers||[])[t]||{};return o||s?{marks:n.marks,additionalNotes:n.additionalNotes,instructorCorrection:n.instructorCorrection,allowCorrection:n.allowCorrection}:{marks:0,instructorCorrection:n.answer}})),d=((t||{}).speakingQuestions||[]).map((function(e,t){var n=((r.speakingSection||{}).answers||[])[t]||{};return o||s?{marks:n.marks,additionalNotes:n.additionalNotes,recordedBlob:n.feedbackAudio?n.feedbackAudio:"",audioFile:n.feedbackAudio||""}:{marks:0}})),m=(((t||{}).fillInBlanksQuestions||{}).blanks||[]).map((function(e,t){var n=((r.fillInBlanksSection||{}).answers||[])[t]||{};return o||s?{marks:n.marks,additionalNotes:n.additionalNotes}:((e||{}).correctAnswer||"").toLowerCase()===(((c||[]).find((function(e){return e.questionNumber===t+1}))||{}).answer||"").toLowerCase()?{marks:(e||{}).marks}:{marks:0}})),p=function(){if(o||s)return r.latePenalty||0;if((t||{}).assignment&&(t||{}).allowLateSubmission&&!(parseInt(r.submittedOn)<parseInt((t||{}).dueDate))){var e=(parseInt(r.submittedOn)-parseInt((t||{}).dueDate))/864e5;return Math.ceil(e)*(t||{}).latePenalty}};return{mcSection:l,essaySection:u,speakingSection:d,fillInBlankSection:m,latePenalty:p(),gradeOverride:r.gradeOverride,gradeAdjustmentExplanation:r.gradeOverride?r.gradeAdjustmentExplanation:null,gradeAdjusted:r.gradeOverride?r.grade:null}},Sc=Object(Ye.a)({table:{minWidth:200},MuiTableRowBlue:{background:"#2196f3"},MuiTableRowDanger:{background:"#f44336"},WhiteText:{color:"white"},DangerText:{color:"#f44336"},SuccessText:{color:"#4caf50"},MuiButton:{marginLeft:"20px","&:hover":{border:"1px solid #1976d2",backgroundColor:"#e3f2fd",color:"#1976d2"}},studentFilterContainer:{width:"100%",display:"flex",justifyContent:"space-around",marginBottom:10,marginTop:30}});var kc=Object(c.b)((function(e){return{token:e.authentication.token,selectedTest:e.instructorTest.selectedTest,testGrading:e.instructorTest.testGrading,course:e.common.selectedCourse,students:e.common.students,initialGradeValues:e.instructorTest.initialGradeValues}}),(function(e){return{setTestToGrade:function(t,n){return e(function(e,t){return{type:"SET_TEST_TO_GRADE",test:e,student:t}}(t,n))},setInitialGradeValues:function(t){return e(ee(t))},closeTest:function(t,n,a,r){e(function(e,t,n,a){return{type:"CLOSE_TEST_START",payload:{testId:e,studentId:t,token:n,instructorTest:a}}}(t,n,a,r))},openModal:function(t,n){return e(Ne(t,n))}}}))((function(e){var t=e.isTest,n=e.isAssignment,o=e.course,s=(e.testGrading,e.students),i=void 0===s?[]:s,c=e.setInitialGradeValues,l=e.token,u=e.closeTest,d=e.openModal,m=Object(St.a)().t,p=Object(a.useState)(""),f=Object(mo.a)(p,2),g=f[0],b=f[1],h=Object(a.useState)(""),E=Object(mo.a)(h,2),y=E[0],T=E[1],S=Object(a.useState)(""),k=Object(mo.a)(S,2),w=k[0],O=k[1],C=Object(a.useState)("studentName"),x=Object(mo.a)(C,2),A=x[0],F=x[1],D=Object(a.useState)("all"),_=Object(mo.a)(D,2),I=_[0],j=_[1];Object(a.useEffect)((function(){var e=(i||[])[0];if(e){b("".concat(e.firstName," ").concat(e.lastName)),O(e._id.replace(/\D/g,""));var n=t?(o.tests||[]).filter((function(e){return!e.assignment}))[0]:(o.tests||[]).filter((function(e){return e.assignment}))[0];T((n||{}).testName)}}),[JSON.stringify(i)]);var R=Sc();function N(e,t){return{info:e,value:t}}var L=o.tests.filter((function(e){return!e.assignment}))||[],P=function(e){return o.tests.find((function(t){return t._id===e}))},B=o.tests.filter((function(e){return e.assignment}))||[],M=L.map((function(e){return e._id})),q=B.map((function(e){return e._id})),U=[],Q=L.filter((function(e){var t=parseInt(e.dueDate);return Date.now()>t?e:null})).map((function(e){return e._id})),W=B.filter((function(e){var t=parseInt(e.dueDate);return Math.ceil((Date.now()-t)/864e5)>(e.lateDaysAllowed||0)?e:null})).map((function(e){return e._id})),H=[],z=[];t&&((i||[]).forEach((function(e){e.testResults.forEach((function(t){var n={student:e,testResult:t,test:L.find((function(e){return e._id===t.test}))};M.includes(t.test)&&t.closed&&U.push(n),(M.includes(t.test)&&!t.closed&&Q.includes(t.test)||(t||{}).test===(e.testInSession||{}).test)&&z.push(n)}))})),Q.forEach((function(e){(i||[]).forEach((function(t){var n={student:t,test:L.find((function(t){return t._id===e}))};t.testResults.map((function(e){return e.test})).includes(e)||H.push(n)}))})));var G=[],V=[];n&&((i||[]).forEach((function(e){return e.testResults.forEach((function(t){var n={student:e,testResult:t,test:B.find((function(e){return e._id===t.test}))};q.includes(t.test)&&t.closed&&U.push(n),q.includes(t.test)&&!t.closed&&W.includes(t.test)&&V.push(n)}))})),W.forEach((function(e){(i||[]).forEach((function(t){var n={student:t,test:B.find((function(t){return t._id===e}))};t.testResults.map((function(e){return e.test})).includes(e)||G.push(n)}))})));var $=(i||[]).map((function(e){return"".concat(e.firstName," ").concat(e.lastName)})),Y=(L||[]).map((function(e){return e.testName})),J=(B||[]).map((function(e){return e.testName})),K=[{label:m("gradeWork.all"),value:"all",placement:"end",color:"primary"},{label:m("gradeWork.toReview"),value:"toReview",placement:"end",color:"primary"},{label:m("gradeWork.graded"),value:"graded",placement:"end",color:"primary"}],Z=[{label:m("gradeWork.studentName"),value:"studentName",placement:"end",color:"primary"},{label:m("gradeWork.studentId"),value:"studentId",placement:"end",color:"primary"},{label:"".concat(m(t?"gradeWork.test":"gradeWork.assignment")),value:"testName",placement:"end",color:"primary"}];return r.a.createElement(v,null,r.a.createElement("div",{className:R.studentFilterContainer},"studentName"===A&&r.a.createElement(Ta,{id:"student-autocomplete",selectedOption:g,onOptionChange:function(e,t){b(t)},options:$,label:m("gradeWork.student"),width:300,margin:"0 0 22px 0"}),"testName"===A&&r.a.createElement(Ta,{id:"test-autocomplete",selectedOption:y,onOptionChange:function(e,t){T(t)},options:t?Y:J,label:"".concat(m(t?"gradeWork.test":"gradeWork.assignment")),width:300,margin:"0 0 22px 0"}),"studentId"===A&&r.a.createElement(fa,{fullWidth:!0,type:"text",label:m("gradeWork.studentId"),input:{value:w,onChange:function(e,t){O(e.target.value)}}})),r.a.createElement("div",{className:R.studentFilterContainer},r.a.createElement(ti,{title:m("gradeWork.searchBy"),options:Z,input:{value:A,onChange:function(e){F(e.target.value)}}}),r.a.createElement(ti,{title:m(t?"gradeWork.filterTests":"gradeWork.filterAssignments"),options:K,input:{value:I,onChange:function(e){j(e.target.value)}}})),r.a.createElement(yc.a,null,U.map((function(e,n){if(g!=="".concat(e.student.firstName," ").concat(e.student.lastName)&&"studentName"===A)return null;if(y!==e.test.testName&&"testName"===A)return null;if(w.replace(/\D/g,"")!==e.student._id.replace(/\D/g,"")&&"studentId"===A)return null;if("toReview"===I&&(e.testResult||{}).graded)return null;if("graded"===I&&!(e.testResult||{}).graded)return null;var a=(e.testResult||{}).graded,o=[N("",e.test.testName),N(m("gradeWork.studentName"),"".concat(e.student.firstName," ").concat(e.student.lastName)),e.test.gradeReleaseDate?N(m("gradeWork.gradeExpectedOn"),e.test.gradeReleaseDate?ct()(parseInt(e.test.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,N(m("gradeWork.submittedOn"),(e.testResult||{}).submittedOn?ct()(parseInt((e.testResult||{}).submittedOn)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""),N(m("gradeWork.status"),(e.testResult||{}).graded?"".concat(m("gradeWork.graded")," ").concat((e.testResult||{}).grade,"%"):m("gradeWork.gradePending"))];return r.a.createElement(v,{key:e.testResult._id},r.a.createElement(ni.a,{className:R.table,"aria-label":"simple table"},r.a.createElement(ai.a,null,o.map((function(t,n){var o;if(0===n&&(o="WhiteText"),2===n&&parseInt(e.test.gradeReleaseDate)<Date.now()+864e5&&!a&&(o="DangerText"),4===n&&a&&(o="SuccessText"),t)return r.a.createElement(oi.a,{key:t.info+n,className:0===n?R.MuiTableRowBlue:""},r.a.createElement(ri.a,{className:0===n?R.WhiteText:"",component:"th",scope:"row"},t.info,0===n&&r.a.createElement(ot.a,{size:"small",className:R.MuiButton,variant:"outlined",color:"primary",type:"button",title:"Grade",onClick:function(){d({results:U,testId:e.test._id,studentId:e.student._id},"gradeTest"),c(Tc(e,U))}},(e.testResult||{}).graded||(e.testResult||{}).gradingInProgress?m("gradeWork.buttons.editGrade"):m("gradeWork.buttons.grade"))),r.a.createElement(ri.a,{className:R[o],align:"right"},t.value))})))),r.a.createElement(ot.a,{fullWidth:!0,color:"secondary",onClick:function(t){t.stopPropagation(),d(Object(At.a)(Object(At.a)({},e.test),{},{student:e.student}),"resetTest")}},t?m("gradeWork.buttons.resetTestFor",{studentName:"".concat(e.student.firstName," ").concat(e.student.lastName)}):m("gradeWork.buttons.resetAssignmentFor",{firstName:"".concat(e.student.firstName," ").concat(e.student.lastName)})))})),(t?z:V).map((function(e){var n=e.test||{};if(g!=="".concat(e.student.firstName," ").concat(e.student.lastName)&&"studentName"===A)return null;if(y!==n.testName&&"testName"===A)return null;if(w.replace(/\D/g,"")!==e.student._id.replace(/\D/g,"")&&"studentId"===A)return null;if("graded"===I)return null;var a=[N("",n.testName),N(m("gradeWork.student"),"".concat(e.student.firstName," ").concat(e.student.lastName)),n.gradeReleaseDate?N(m("gradeWork.gradeExpectedOn"),n.gradeReleaseDate?ct()(parseInt(n.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,n.lastSavedOn?N(m("gradeWork.lastSavedOn"),(e.testResult||{}).lastSavedOn?ct()(parseInt((e.testResult||{}).lastSavedOn)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,N(m("gradeWork.status"),m("gradeWork.inProgress"))];return r.a.createElement(v,{key:e.testResult._id},r.a.createElement(ni.a,{key:e.testResult._id,className:R.table,"aria-label":"simple table"},r.a.createElement(ai.a,null,a.map((function(t,a){var o;if(0===a&&(o="WhiteText"),4===a&&(o="DangerText"),t)return r.a.createElement(oi.a,{key:t.info+a,className:0===a?R.MuiTableRowBlue:""},r.a.createElement(ri.a,{className:0===a?R.WhiteText:"",component:"th",scope:"row"},t.info,0===a&&r.a.createElement(ot.a,{size:"small",className:R.MuiButton,variant:"outlined",color:"primary",type:"button",title:"Grade",onClick:function(){var t=e.student._id,a=n._id;u(a,t,l,P(a))}},m("gradeWork.buttons.closeAndGrade"))),r.a.createElement(ri.a,{className:R[o],align:"right"},t.value))})))),r.a.createElement(ot.a,{color:"secondary",fullWidth:!0,onClick:function(t){t.stopPropagation(),d(Object(At.a)(Object(At.a)({},e.test),{},{student:e.student}),"resetTest")}},t?m("gradeWork.buttons.resetTestFor",{studentName:"".concat(e.student.firstName," ").concat(e.student.lastName)}):m("gradeWork.buttons.resetAssignmentFor",{firstName:"".concat(e.student.firstName," ").concat(e.student.lastName)})))})),(t?H:G).map((function(e){if(g!=="".concat(e.student.firstName," ").concat(e.student.lastName)&&"studentName"===A)return null;if(y!==e.test.testName&&"testName"===A)return null;if(w.replace(/\D/g,"")!==e.student._id.replace(/\D/g,"")&&"studentId"===A)return null;if("graded"===I)return null;var t=[N("",e.test.testName),N(m("gradeWork.student"),"".concat(e.student.firstName," ").concat(e.student.lastName)),e.test.gradeReleaseDate?N(m("gradeWork.gradeExpectedOn"),e.test.gradeReleaseDate?ct()(parseInt(e.test.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,N(m("gradeWork.status"),m("gradeWork.missed"))];return r.a.createElement(ni.a,{key:"".concat(e.student.firstName,"[").concat(e.test._id,"]"),className:R.table,"aria-label":"simple table"},r.a.createElement(ai.a,null,t.map((function(t,n){var a,o;if(0===n&&(a="MuiTableRowBlue"),0===n&&(o="WhiteText"),3===n&&(o="DangerText"),t)return r.a.createElement(oi.a,{key:t.info+n,className:R[a]},r.a.createElement(ri.a,{className:0===n?R.WhiteText:"",component:"th",scope:"row"},t.info,0===n&&r.a.createElement(v,null,r.a.createElement(ot.a,{size:"small",className:R.MuiButton,variant:"outlined",color:"primary",type:"button",title:"Grade",onClick:function(){var t=e.student._id,n=e.test._id;u(n,t,l,P(n))}},m("gradeWork.buttons.closeAndGrade")))),r.a.createElement(ri.a,{className:R[o],align:"right"},t.value))}))))}))))})),wc=Object(c.b)((function(e){return{courses:e.common.courses,course:e.common.selectedCourse,students:e.common.students}}),(function(e){return{openModal:function(t,n){return e(Ne(t,n))}}}))((function(e){var t=e.enrollmentRequests,n=e.course,a=e.openModal,o=n.studentsEnrollRequests.filter((function(e){return!e.approved&&!e.denied&&!e.droppedOut}))||[],s=n.studentsEnrollRequests.filter((function(e){return e.denied}))||[],i=n.studentsEnrollRequests.filter((function(e){return e.approved}))||[],c=n.studentsEnrollRequests.filter((function(e){return e.droppedOut}))||[],l=function(e,t){a(e,t)},u=Object(St.a)().t;return t?r.a.createElement(v,null,o.length>0&&r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},u("students.pendingRequests")),r.a.createElement(Br.a,null,o.map((function(e,t){return r.a.createElement(Mr.a,{button:!0,key:e.student._id,onClick:function(){return l(e.student,"processEnrollmentRequest")}}," ",r.a.createElement(ho.a,{src:e.student.profilePicture}),"".concat(e.student.firstName," ").concat(e.student.lastName))}))),s.length>0&&r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},u("students.requestsDenied")),r.a.createElement(Br.a,null,s.map((function(e){return r.a.createElement(Mr.a,{button:!0,key:e.student._id,onClick:function(){return l(e.student,"studentSummary")}}," ",r.a.createElement(ho.a,{src:e.student.profilePicture}),r.a.createElement(lr.a,{style:{marginLeft:"5px"},primary:"".concat(e.student.firstName," ").concat(e.student.lastName)}),e.resubmissionAllowed&&r.a.createElement(et.a,{style:{marginLeft:"10px"},variant:"caption",color:"primary"},u("students.resubmissionAllowed")))})))):r.a.createElement(v,null,r.a.createElement(Br.a,null,[].concat(Object(Pr.a)(i||[]),Object(Pr.a)(c||[])).map((function(e,t){var n=(c||[]).findIndex((function(t){return t.student._id===e.student._id}))>-1;return r.a.createElement(v,{key:"".concat(e.student._id,"[").concat(e.droppedOut?"dropped":"enrolled","]")},r.a.createElement(Mr.a,{button:!0,onClick:function(){return l(e.student,"studentSummary")}}," ",r.a.createElement(ho.a,{src:e.student.profilePicture}),r.a.createElement(lr.a,{style:{marginLeft:"5px"},primary:"".concat(e.student.firstName," ").concat(e.student.lastName)}),n&&r.a.createElement(et.a,{style:{marginLeft:10,marginRight:10},variant:"caption",color:"error"},u("students.droppedOut")),r.a.createElement(ot.a,{disabled:e.droppedOut,color:"primary",onClick:function(t){return function(e,t){e.stopPropagation(),a(t,"gradebook")}(t,e.student)}},u("students.buttons.gradebook"))))}))))})),Oc=function(e){return new Date("01/01/2020 ".concat(e)).getTime()},Cc=function(e){var t="".concat(ct()().hour(),":").concat(ct()().minutes()),n=(e.regularOfficeHours||[]).findIndex((function(e){var n=Oc((e||{}).startTime);console.log("reg startTimeStamp",n);var a=60*cs.a.tz.zone((e||{}).timezoneRegion).utcOffset(n)*1e3+n;console.log("reg startTimeStampAdjusted",a);var r=Oc((e||{}).endTime);console.log("reg endTimeStamp",r);var o=60*cs.a.tz.zone((e||{}).timezoneRegion).utcOffset(r)*1e3+r;console.log("reg endTimeStampAdjusted",o);var s=60*cs.a.tz.zone((e||{}).timezoneRegion).utcOffset(Oc(t))*1e3+Oc(t);if(console.log("reg currentTimeAdjusted ",s),(new Date).getDay()===ss(e.day)&&s>=a&&s<o)return e}))>-1,a=(e.irregularOfficeHours||[]).findIndex((function(e){var n=Oc((e||{}).startTime);console.log("irreg startTimeStamp",n);var a=60*cs.a.tz.zone((e||{}).timezoneRegion).utcOffset(n)*1e3+n;console.log("irreg startTimeStampAdjusted",a);var r=Oc((e||{}).endTime);console.log("irreg endTimeStamp",r);var o=60*cs.a.tz.zone((e||{}).timezoneRegion).utcOffset(r)*1e3+r;console.log("irreg endTimeStampAdjusted",o);var s=60*cs.a.tz.zone((e||{}).timezoneRegion).utcOffset(Oc(t))*1e3+Oc(t);if(console.log("irreg currentTimeAdjusted",s),new Date(Date.now()).setHours(0,0,0,0).toString()===parseInt(e.date).toString()&&s>=a&&s<o)return e}))>-1;return console.log("is ireg",a),console.log("is reg",n),{isRegOfficeHour:n,isIrregOfficeHour:a}},xc=function(e,t,n){return(e.regularOfficeHours||[]).map((function(e){for(var n,a=ct()(Date.now()),r=ct()(parseInt(Date.now()+1728e5)),o=ss(e.day),s=a.clone();s.day(0+o).isBefore(r);){n=s.clone()._d;var i=new Date("".concat(ct()(new Date(n)).format("MM/DD/YYYY")," ").concat(e[t])).getTime();return i<Date.now()?null:new Date(i).getTime()}})).sort().filter((function(e){return e}))[0]},Ac=function(e,t,n){return(e.irregularOfficeHours||[]).map((function(e){var a=new Date("".concat(ct()(parseInt(e.date)).format("MM/DD/YYYY")," ").concat(e[t])).getTime();return a<=(n||Date.now())?null:a})).sort().filter((function(e){return e}))[0]},Fc=function(e,t){var n,a,r,o,s=Cc(e),i=s.isIrregOfficeHour,c=s.isRegOfficeHour;return(i||c)&&(a=xc(e,"endTime"),o=Ac(e,"endTime",t)),i||c||(n=xc(e,"startTime"),r=Ac(e,"startTime",t)),[r,n,o,a].filter((function(e){return e})).sort()[0]},Dc=Object(c.b)((function(e){var t=e.common.selectedCourse,n=JSON.stringify(e.common.courses.find((function(e){return e._id===t._id})));return{coursePanel:e.common.coursePanel,course:e.common.selectedCourse,loadedLessonFormData:e.instructorLesson.loadedLessonFormData,tab:e.common.tab,editing:e.common.editing,loadedTestFormData:e.instructorTest.loadedTestFormData,token:e.authentication.token,userId:e.authentication.userId,loading:e.instructorTest.loading||e.instructorLesson.loading||e.instructorQuestion.loading||e.instructorModules.loading,stringifiedCourse:n,selectedChatUser:e.common.selectedChatUser}}),(function(e){return{setChatUser:function(t){e(we(t))},setTab:function(t){e(function(e){return{type:"SET_INSTRUCTOR_TAB",tab:e}}(t)),e({type:"CLEAR_INSTRUCTOR_TAB_CONTENT"}),e(R(1))},fetchStudents:function(t,n,a){return e(Qe(t,n,null,a))},fetchNotifications:function(t){return e(Ae(t))}}}))((function(e){var t=e.coursePanel,n=e.tab,o=e.loadedLessonFormData,s=e.loading,i=e.token,c=e.course,l=e.userId,u=e.fetchStudents,d=e.fetchNotifications,m=e.stringifiedCourse,p=e.selectedChatUser,f=Object(St.a)().t,g=Object(a.useState)(!1),b=Object(mo.a)(g,2),h=b[0],E=b[1];Object(a.useEffect)((function(){var e=Cc(c||{},Date.now()),t=e.isIrregOfficeHour,n=e.isRegOfficeHour;E(!(!t&&!n));var a,r=go()("https://mernstackelearn.herokuapp.com/",{query:{token:i}});r.on("updateStudents",(function(e){"instructor"!==e.userType&&"all"!==e.userType||e.userId!==l&&e.courseId!==c._id||u(c._id,i,"noSpinner"),e.fetchNotifications&&d(i)}));!function e(t){a=setTimeout((function(){var n=Cc(c),r=n.isIrregOfficeHour,o=n.isRegOfficeHour;E(!(!r&&!o)),t?e(Fc(c,Date.now())):clearTimeout(a)}),t-Date.now())}(Fc(c,Date.now()));var o=c.tests.filter((function(e){return Date.now()<parseInt(e.dueDate)+864e5*e.lateDaysAllowed&&e.allowLateSubmission})).map((function(e){return parseInt(e.dueDate)+864e5*e.lateDaysAllowed})),s=c.tests.filter((function(e){return e.dueDate&&Date.now()<parseInt(e.dueDate)&&!e.allowLateSubmission})).map((function(e){return parseInt(e.dueDate)})),m=[];return[].concat(Object(Pr.a)(s),Object(Pr.a)(o)).forEach((function(e){setTimeout((function(){m.push(a),u(c._id,i)}),e-Date.now())})),function(){m.forEach((function(e){clearTimeout(e)})),clearTimeout(a),r.disconnect()}}),[m]);var y;return"assignment"===t&&(y=r.a.createElement(v,null,r.a.createElement(lo,{value:n,index:0},r.a.createElement(Ns,{isAssignment:!0})),r.a.createElement(lo,{value:n,index:1},!s&&r.a.createElement(mc,null)),r.a.createElement(lo,{value:n,index:2},["Multiple-choice questions","Essay questions","Speaking questions","Fill-in-the-blanks questions"].map((function(e,t){return r.a.createElement(Qs,{key:e,index:t,summary:f("questions.".concat(e.replace(/ /g,"").replace(/-/g,"").toLowerCase()))},r.a.createElement(Gs,{questionType:e}))}))))),"test"===t&&(y=r.a.createElement(v,null,r.a.createElement(lo,{value:n,index:0},r.a.createElement(Ns,{isTest:!0})),r.a.createElement(lo,{value:n,index:1},!s&&r.a.createElement(mc,null)),r.a.createElement(lo,{value:n,index:2},["Multiple-choice questions","Essay questions","Speaking questions","Fill-in-the-blanks questions"].map((function(e,t){return r.a.createElement(Qs,{key:e,index:t,summary:e},r.a.createElement(Gs,{questionType:e}))}))))),"resources"===t&&(y=r.a.createElement(v,null,r.a.createElement(Js,null))),"grade"===t&&(y=r.a.createElement(v,null,r.a.createElement(lo,{value:n,index:0},r.a.createElement(kc,{isTest:!0})),r.a.createElement(lo,{value:n,index:1},r.a.createElement(kc,{isAssignment:!0})))),"lesson"===t&&(y=r.a.createElement(v,null,r.a.createElement(lo,{value:n,index:0},r.a.createElement(vc,null)),r.a.createElement(lo,{value:n,index:1},o&&r.a.createElement(Ec,null)))),"chat"===t&&(y=r.a.createElement(v,null,r.a.createElement(lo,{value:n,index:0},r.a.createElement(ls,{isOfficeHour:h,instructorPanel:!0})),r.a.createElement(lo,{value:n,index:1},r.a.createElement(os,{key:(p||{})._id,isOfficeHour:h,instructorPanel:!0,userType:"instructor"})))),"student"===t&&(y=r.a.createElement(v,null,r.a.createElement(lo,{value:n,index:0},r.a.createElement(wc,null)),r.a.createElement(lo,{value:n,index:1},r.a.createElement(wc,{enrollmentRequests:!0})))),"modules"===t&&(y=r.a.createElement(Is,null)),r.a.createElement(v,null,r.a.createElement(to,{active:s,transparent:!0}),r.a.createElement("div",{style:{maxWidth:600,margin:"auto",background:"white"}}," ",y))})),_c=n(402),Ic=n.n(_c),jc=Object(c.b)((function(e){return{tab:e.common.tab,coursePanel:e.common.coursePanel,testInSession:e.studentTest.testInSession,token:e.authentication.token}}),(function(e){return{markAsSeen:function(t,n){e(De(t,n))},fetchNotifications:function(t){e(Ae(t))}}}))((function(e){var t,n,o=e.notification,s=e.onNotificationClick,i=e.coursePanel,c=e.tab,l=e.testInSession,u=e.token,d=(e.fetchNotifications,e.markAsSeen),m=Object(St.a)().t;return Object(a.useEffect)((function(){1===c&&"chat"===i&&d(o._id,u)}),[]),l||1===c&&"chat"===i||o.returnNull?null:(o.file&&(t=o.file.toLowerCase().split(".").pop()),"pdf"===t&&(n=r.a.createElement("i",{className:"far fa-file-pdf fa-2x"})),"mp3"===t&&(n=r.a.createElement("i",{className:"fas fa-file-audio fa-2x"})),"docx"!==t&&"doc"!==t||(n=r.a.createElement("i",{className:"fas fa-file-word fa-2x"})),"jpeg"!==t&&"jpg"!==t&&"jfif"!==t||(n=r.a.createElement("i",{className:"fas fa-file-image fa-2x"})),"avi"!==t&&"mp4"!==t&&"mkv"!==t&&"webm"!==t||(n=r.a.createElement("i",{className:"far fa-file-video fa-2x"})),r.a.createElement("div",{style:{transform:o?"translateY(0)":"translateY(-100vh)",opacity:o?"1":"0",cursor:"pointer"},className:[Ic.a.notification,Ic.a[o.type]].join(" "),onClick:function(){return s({_id:o.senderId,firstName:o.senderFirstName,lastName:o.senderLastName,profilePicture:o.avatar},o.courseId,o.userType,o.type)}},o.avatar&&r.a.createElement(ho.a,{src:o.avatar}),r.a.createElement(et.a,{variant:"subtitle1"},"".concat(o.senderFirstName," ").concat(o.senderLastName," ").concat(m("notifications.from")," ").concat(o.courseName)),n,r.a.createElement(et.a,{variant:"subtitle1"},o.message.slice(0,25)+"...")))})),Rc=n(107),Nc=Object(Rc.a)(),Lc=Object(c.b)((function(e){return{token:e.authentication.token,userId:e.authentication.userId,notification:e.common.notification,selectedCourse:e.common.selectedCourse,courses:e.common.courses,tab:e.common.tab,loading:e.authentication.loading||e.instructorCourse.loading||e.common.loading}}),(function(e){return{fetchUser:function(t){return e(me(t))},fetchInstructors:function(t){return e(H(t))},setChatUser:function(t){e(we(t))},fetchQuestionBank:function(t,n){return e(Y(t,n))},fetchStudents:function(t,n){return e(Qe(t,n))},fetchConfig:function(t){return e(Oe(t))},setNotification:function(t,n){return e(xe(t,n))},setTabLabels:function(t){return e(je(t))},setTab:function(t){return e(Re(t))},fetchCourses:function(t,n){return e(Me(t,n))},fetchModules:function(t,n){return e(_e(t,n))},setCourse:function(t){e(Be(t))},setPanel:function(t){e(Ue(t))},fetchNotifications:function(t){e(Ae(t))},markAsSeen:function(t,n){e(De(t,n))},logout:function(){e(Te())}}}))((function(e){var t=e.token,n=e.userId,o=e.notification,s=e.courses,i=e.loading,c=e.setCourse,l=e.fetchQuestionBank,u=e.fetchStudents,m=e.fetchUser,p=e.setNotification,f=e.setChatUser,g=e.setTabLabels,b=e.setTab,h=e.setPanel,E=e.fetchModules,y=e.fetchNotifications,T=e.fetchCourses,S=e.fetchInstructors,k=e.fetchConfig,w=e.selectedCourse;Object(a.useEffect)((function(){ct()(Date.now());m(t),k(t),g(["Courses","New course"]);var e=go()("https://mernstackelearn.herokuapp.com/",{query:{token:t}}),a=function(){e.emit("loggedOut",{user:n})};return window.addEventListener("beforeunload",a),e.open(),e.on("updateCourses",(function(e){"instructor"!==e.userType&&"all"!==e.userType||T(t,"noSpinner"),y(t)})),e.on("updateStudents",(function(e){"instructor"===e.userType&&e.userId===n&&e.fetchNotifications&&y(t)})),e.emit("loggedIn",{user:n}),e.on("alert",(function(e){console.log("alert **********************************************"),y(t);var n={_id:e._id,senderId:e.sender._id,message:e.content,type:e.type,avatar:e.sender.avatar,senderFirstName:e.sender.firstName,senderLastName:e.sender.lastName,courseName:e.course,courseId:e.courseId,userType:e.sender.type,file:e.file},a=setTimeout((function(){p(null,null)}),5e3);p(n,a)})),function(){e.emit("loggedOut",{user:n}),window.removeEventListener("beforeunload",a),e.disconnect()}}),[]);return Object(a.useEffect)((function(){var e=go()("https://mernstackelearn.herokuapp.com/",{query:{token:t}});return e.on("updateConfig",(function(e){"all"===e.userType&&k(t)})),function(){e.disconnect()}}),[(w||{})._id]),r.a.createElement(v,null,r.a.createElement(to,{active:i,transparent:!0}),o&&r.a.createElement(jc,{onNotificationClick:function(e,n){var a=(s||[]).find((function(e){return e._id===n}))||{};c(a),b(1),h("chat"),g(["Contacts","Chat"]),f(e),E(n,t),l(n,t),u(n,t),S(t),p(null,null),Nc.push("/instructor-panel/course/".concat(n))},notification:o}),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/instructor-panel/courses",component:uo}),r.a.createElement(d.b,{exact:!0,path:"/instructor-panel/course/:courseId",render:function(e){return r.a.createElement(Dc,e)}}),r.a.createElement(d.a,{to:"/instructor-panel/courses"})))}));lo.propTypes={children:xt.a.node,index:xt.a.any.isRequired,value:xt.a.any.isRequired};var Pc=Object(c.b)((function(e){return{tab:e.common.tab,token:e.authentication.token,courses:e.common.courses}}),(function(e){return{clearModalStates:function(){return e({type:"CLEAR_STUDENT_MODAL_STATES"})},fetchCourses:function(t){return e(Me(t))}}}))((function(e){var t=e.tab,n=e.courses,o=e.token,s=e.fetchCourses;return Object(a.useEffect)((function(){var e,t=(n||[]).filter((function(e){return e.enrollmentStartDate&&Date.now()<parseInt(e.enrollmentStartDate)})).map((function(e){return parseInt(e.enrollmentStartDate)})),a=(n||[]).filter((function(e){return e.enrollmentEndDate&&Date.now()<parseInt(e.enrollmentEndDate)})).map((function(e){return parseInt(e.enrollmentEndDate)})),r=(n||[]).filter((function(e){return e.courseDropDeadline&&Date.now()<parseInt(e.courseDropDeadline)})).map((function(e){return parseInt(e.courseDropDeadline)})),i=[];[].concat(Object(Pr.a)(t),Object(Pr.a)(a),Object(Pr.a)(r)).forEach((function(t){e=setTimeout((function(){i.push(e),s(o)}),t-Date.now())}))}),[n]),r.a.createElement(v,null,r.a.createElement(lo,{value:t,index:0},r.a.createElement(Ot,null)),r.a.createElement(lo,{value:t,index:1},r.a.createElement(Ot,null)))})),Bc=Object(c.b)((function(e){return{course:e.common.selectedCourse,testResults:e.studentTest.testResults,token:e.authentication.token,notifications:e.common.notifications}}),(function(e){return{openModal:function(t,n){return e(Ne(t,n))},onStartAssignment:function(t,n){e(He(t,!0,n,null,!1)),e(Ue("assignment")),e(Re(0))},onContinueAssignment:function(t,n,a){e(He(t,!0,n,a,!1)),e(Ue("assignment")),e(Re(0))},markAsSeen:function(t,n){e(De(t,n))}}}))((function(e){var t=e.testResults,n=void 0===t?{}:t,o=e.isTest,s=(e.studentId,e.token),i=e.folder,c=e.isModules,l=e.course,u=e.isAssignment,d=e.notifications,m=e.onStartAssignment,p=e.onContinueAssignment,f=e.openModal,g=e.markAsSeen;e.fetchNotifications;Object(a.useEffect)((function(){var e=l.tests.filter((function(e){return!e.assignment})).map((function(e){return e._id})),t=l.tests.filter((function(e){return e.assignment})).map((function(e){return e._id})),n=(d||[]).find((function(n){return(e||[]).includes(n.documentId)&&o&&"test"===n.documentType&&!n.seen||(t||[]).includes(n.documentId)&&u&&"assignment"===n.documentType&&!n.seen||(t||[]).includes(n.documentId)&&u&&"resetAssignment"===n.documentType&&!n.seen?n:void 0}));n&&g(n._id,s)}),[]);var b,h=(n||{}).assignmentsInSession,E=(((n||{}).testResults||[]).filter((function(e){return e.course===l._id}))||[]).filter((function(e){return e.closed?e.test:null})).map((function(e){return e.test})),y=(l.tests||[]).filter((function(e){return!e.assignment})),T=(l.tests||[]).filter((function(e){return e.assignment})),S=y.filter((function(e){return E.includes(e._id)?null:!e.assignment})).filter((function(e){return e})),k=T.filter((function(e){return E.includes(e._id)?null:e.assignment}));o&&(b=S),u&&(b=k);var w=(i||[]).map((function(e){return e.documentId}))||[],O=Object(St.a)().t;return r.a.createElement(v,null,(b||[]).map((function(e,t){if(!w.includes(e._id)&&c)return null;var a=new Date(parseInt(e.dueDate||"")).getTime(),o=Date.now()>a,i=Math.ceil((Date.now()-a)/864e5),l=i>(e.lateDaysAllowed||0),u=parseInt(e.availableOnDate)<Date.now();if(e.assignment)return r.a.createElement(v,{key:e._id},(h||[]).map((function(e){return e.assignment})).includes(e._id)?r.a.createElement(Mr.a,{disabled:l,style:{display:"block"},button:!0,onClick:function(t){t.stopPropagation();var a=((n||{}).testResults||[]).find((function(t){return t.test===e._id}));p(e._id,s,a)}},r.a.createElement("div",{style:{display:"flex"}},c&&r.a.createElement(v,null,r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:!1,value:"checked"})}),r.a.createElement(us.a,{style:{margin:"auto",minWidth:"30px"}},r.a.createElement(ws.a,{color:"primary"}))),r.a.createElement(lr.a,{primary:"".concat(O("tests.continueAssignment")," ").concat(e.testName)})),e.dueDate&&r.a.createElement("div",null,r.a.createElement(lr.a,{secondary:"\n                     ".concat(O(o?"tests.assignmentWasDueOn":"tests.assignmentIsDueOn")," ").concat(ct()(parseInt(e.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                    ")}))):r.a.createElement(Mr.a,{style:{display:"block"},disabled:Date.now()<parseInt(e.availableOnDate||0)||l,button:!0,onClick:function(t){t.stopPropagation(),m(e._id,s)}},r.a.createElement("div",{style:{display:"flex"}},c&&r.a.createElement(v,null,r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:!1,value:"checked"})}),r.a.createElement(us.a,{style:{margin:"auto",minWidth:"30px"}},r.a.createElement(ws.a,{color:"primary"}))),r.a.createElement(lr.a,{primary:"".concat(O("tests.startAssignment")," ").concat(e.testName)})),e.availableOnDate&&r.a.createElement("div",null,r.a.createElement(lr.a,{secondary:"\n                         ".concat(O(u?"tests.assignmentHasOpenedOn":"tests.assignmentWillOpenOn")," ").concat(ct()(parseInt(e.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                      ")})),e.dueDate&&r.a.createElement("div",null,r.a.createElement(lr.a,{secondary:"".concat(O(l?"tests.wasDueOn":"tests.DueOn")," ").concat(ct()(parseInt(e.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                          ")})),e.allowLateSubmission&&!l&&r.a.createElement(v,null,r.a.createElement(lr.a,{secondary:"".concat(e.latePenalty,"% ").concat(O("tests.latePenalty"),"\n                      ")}),r.a.createElement(lr.a,{secondary:"".concat(O("tests.closesOn")," ").concat(ct()(parseInt(e.dueDate)+864e5*e.lateDaysAllowed).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                          ")})),l&&r.a.createElement(et.a,{style:{color:"red"}},O("tests.missedDeadline")),e.allowLateSubmission&&!l&&o&&r.a.createElement(et.a,{style:{color:"red"}},"".concat(O("tests.latePenaltyAccumulated")," ").concat(i*e.latePenalty,"%"))));if(!e.assignment){var d=-1!==((n||{}).testResults||[]).findIndex((function(t){return t.test===e._id}));return r.a.createElement(v,{key:e._id},r.a.createElement(Mr.a,{disabled:Date.now()<parseInt(e.availableOnDate)||l||d,style:{display:"block"},button:!0,onClick:function(t){t.stopPropagation(),f(e,"startTestConfirmation")},key:e._id},r.a.createElement("div",{style:{display:"flex"}},c&&r.a.createElement(v,null,r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:!1,value:"checked"})}),r.a.createElement(us.a,{style:{margin:"auto",minWidth:"30px"}},r.a.createElement(Ss.a,{color:"primary"}))),r.a.createElement(lr.a,{primary:"".concat(O("tests.startTest")," ").concat(e.testName)}),r.a.createElement(et.a,{style:{marginTop:"8px"},variant:"caption",color:"final"===e.testType||"midterm"===e.testType?"error":"inherit"},O("tests.".concat(e.testType)))),e.availableOnDate&&r.a.createElement("div",null,r.a.createElement(lr.a,{secondary:"".concat(O(u?"tests.testHasOpenedOn":"tests.testWillOpenOn")," ").concat(ct()(parseInt(e.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n              ")})),e.dueDate&&r.a.createElement("div",null,r.a.createElement(lr.a,{secondary:"\n                      ".concat(O(l?"tests.testClosedOn":"tests.testClosesOn")," \n                      ").concat(ct()(parseInt(e.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                    ")})),l&&r.a.createElement(et.a,{style:{color:"red"}},O("tests.missedDeadline"))))}})))})),Mc=n(266),qc=n.n(Mc),Uc=Object(c.b)((function(e){return{course:e.common.selectedCourse,testResults:e.studentTest.testResults,studentId:e.authentication.userId,token:e.authentication.token}}),(function(e){return{onReviewTest:function(t,n,a){e(He(n._id,!0,a,!1,t))}}}))((function(e){var t=e.testResults,n=e.isTest,a=e.isAssignment,o=e.folder,s=e.isModules,i=e.course,c=e.onReviewTest,l=(e.studentId,e.token),u=Object(St.a)().t,d=(o||[]).map((function(e){return e.documentId}))||[];return r.a.createElement(v,null,((t||{}).testResults||[]).map((function(e,o){if(!e.closed)return null;var m=(e||{}).test,p=((i||{}).tests||[]).find((function(e){return e._id===m}))||{};if(p.course!==i._id)return null;if(!((t||{}).testResults.findIndex((function(e){return e.closed}))>-1))return r.a.createElement(et.a,{variant:"subtitle1"},u(n?"tests.notCompletedTests":"tests.notCompletedAssignments"));function f(e,t){return{info:e,value:t}}var g=[((p||{}).sectionWeights||{}).mcSection?f(u("testReview.multiplechoicesection"),"".concat(((e||{}).multiplechoiceSection||{}).grade,"%")):null,((p||{}).sectionWeights||{}).essaySection?f(u("testReview.essaysection"),"".concat(((e||{}).essaySection||{}).grade,"%")):null,((p||{}).sectionWeights||{}).speakingSection?f(u("testReview.speakingsection"),"".concat(((e||{}).speakingSection||{}).grade,"%")):null,((p||{}).sectionWeights||{}).fillBlankSection?f(u("testReview.fillintheblankssection"),"".concat(((e||{}).fillInBlanksSection||{}).grade,"%")):null].filter((function(e){return null!==e})),b=r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h5",gutterBottom:!0},u("tests.summary")),r.a.createElement(ni.a,{className:qc.a.table,"aria-label":"simple table"},r.a.createElement(ai.a,null,g.map((function(e,t){return r.a.createElement(oi.a,{className:0===t?qc.a.MuiTableRow:"",key:e.info},r.a.createElement(ri.a,{className:0===t?qc.a.MuiTableCell:"",component:"th",scope:"row"},e.info),r.a.createElement(ri.a,{className:0===t?qc.a.MuiTableCell:"",align:"right"},e.value))})))));return a&&!p.assignment||n&&p.assignment?null:(!e.graded||p.gradeReleaseDate>Date.now()&&p.gradeReleaseDate||!e.grade&&0!==e.grade)&&e.closed?r.a.createElement(v,{key:e._id},!s&&r.a.createElement(Qs,{index:o,disabled:!0,noDetails:!0,summary:p.testName+" "+u("tests.".concat(p.testType)),secondaryText:p.gradeReleaseDate>Date.now()?u("tests.gradesReleaseOn")+" "+ct()(parseInt(p.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):u("tests.gradePending")}),s&&d.includes(e.test)&&r.a.createElement(Mr.a,{style:{display:"block"},disabled:!0},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:!0,value:"checked"})}),r.a.createElement(us.a,{style:{margin:"auto",minWidth:"30px"}},n?r.a.createElement(Ss.a,{color:"primary"}):r.a.createElement(ws.a,{color:"primary"})),r.a.createElement(lr.a,{primary:p.testName})),r.a.createElement(lr.a,{secondary:p.gradeReleaseDate>Date.now()?u("tests.gradesReleaseOn")+" "+ct()(parseInt(p.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):u("tests.gradePending")}))):r.a.createElement(v,{key:e._id},!s&&r.a.createElement(Qs,{index:o,summary:"".concat(p.testName," ").concat(p.testType.charAt(0).toUpperCase()+p.testType.slice(1)," ").concat((e||{}).grade,"%")},b,r.a.createElement(ot.a,{variant:"outlined",fullWidth:!0,color:"primary",type:"button",title:"Review Test",onClick:function(){return c(e,p,l)}},n?u("tests.reviewTest"):null,a?u("tests.reviewAssignment"):null)),s&&d.includes(e.test)&&r.a.createElement(Mr.a,{button:!0,onClick:function(){return c(e,p,l)},style:{display:"block"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:!0,value:"checked"})}),r.a.createElement(us.a,{style:{margin:"auto",minWidth:"30px"}},n?r.a.createElement(Ss.a,{color:"primary"}):r.a.createElement(ws.a,{color:"primary"})),r.a.createElement(lr.a,{primary:"".concat(p.testName," ").concat((e||{}).grade,"%")}))))})))})),Qc=Object(c.b)((function(e){return{course:e.common.selectedCourse}}))((function(e){var t=e.folder,n=void 0===t?[]:t,a=e.course,o=(a.tests||[]).filter((function(e){return!e.assignment})).map((function(e){return e._id})),s=(a.tests||[]).filter((function(e){return e.assignment})).map((function(e){return e._id})),i=n.find((function(e){return s.includes(e.documentId)})),c=n.find((function(e){return o.includes(e.documentId)})),l=Object(St.a)().t;return r.a.createElement(v,null,r.a.createElement(vc,{isModules:!0,folder:n}),i&&r.a.createElement(Mr.a,{style:{background:"#2196f3"}},r.a.createElement(et.a,{style:{color:"white"}},l("studentModules.assignments"))),r.a.createElement("div",null,r.a.createElement(Bc,{folder:n,isAssignment:!0,isModules:!0}),r.a.createElement(Uc,{folder:n,isModules:!0,isAssignment:!0})),c&&r.a.createElement(Mr.a,{style:{background:"#2196f3"}},r.a.createElement(et.a,{style:{color:"white"}},l("studentModules.tests"))),r.a.createElement("div",null,r.a.createElement(Bc,{folder:n,isTest:!0,isModules:!0}),r.a.createElement(Uc,{folder:n,isModules:!0,isTest:!0})))})),Wc=function(e){var t=e.topics,n=e.subjectIndex,a=e.moduleIndex,o=Object(St.a)().t;return r.a.createElement(v,null,r.a.createElement(Mr.a,{style:{paddingLeft:80}},r.a.createElement(lr.a,{primary:o("studentModules.topics")})),(t||[]).map((function(e,t){return r.a.createElement(v,{key:"module[".concat(a,"]subject[").concat(n,"]topic[").concat(t,"]")},r.a.createElement(Mr.a,{style:{paddingLeft:80}},r.a.createElement(lr.a,{secondary:"".concat(ys(t+1),". ").concat(e.topicName)})),r.a.createElement("div",{style:{paddingLeft:90}},r.a.createElement(Qc,{folder:e.folder})))})))},Hc=function(e){var t=e.subjects,n=e.moduleIndex,a=Object(St.a)().t;return r.a.createElement(v,null,r.a.createElement(Mr.a,{style:{paddingLeft:40}},r.a.createElement(lr.a,{primary:a("studentModules.subjects")})),(t||[]).map((function(e,t){return r.a.createElement(v,{key:"module[".concat(n,"]subject[").concat(t,"]")},r.a.createElement(Mr.a,{style:{paddingLeft:40}},r.a.createElement(lr.a,{secondary:"".concat(t+1," . ").concat(e.subjectName)})),r.a.createElement("div",{style:{paddingLeft:50}},r.a.createElement(Qc,{folder:e.folder})),r.a.createElement(Br.a,{component:"div",disablePadding:!0},e.topics.length>0&&r.a.createElement(Wc,{topics:e.topics,moduleIndex:n,subjectIndex:t})))})))},zc=Object(c.b)((function(e){return{students:e.common.students,modules:e.common.modules}}))((function(e){var t=e.modules,n=Object(St.a)().t,a=r.a.useState(-1),o=Object(mo.a)(a,2),s=o[0],i=o[1];return r.a.createElement(Br.a,null,((t||{}).modules||[]).map((function(e,t){var a=-1!==s&&s!=="module[".concat(t,"]")||e.isDisabled;return r.a.createElement(v,{key:"module[".concat(t,"]")},r.a.createElement(Mr.a,{style:{background:s==="module[".concat(t,"]")?"#1769aa":"",color:s==="module[".concat(t,"]")?"white":"",opacity:a?.2:1,cursor:a?"auto":"pointer",borderLeft:-1===s||a?"none":"5px solid #2196f3"},button:!a,onClick:function(){var e;a||(e="module[".concat(t,"]"),i(s===e?-1:e))}},r.a.createElement(lr.a,{primaryTypographyProps:{variant:"h6"},primary:"".concat(n("studentModules.module")," ").concat(t+1," ").concat(e.moduleName)}),s==="module[".concat(t,"]")?r.a.createElement(hs.a,null):r.a.createElement(vs.a,null)),r.a.createElement(ds.a,{in:s==="module[".concat(t,"]"),timeout:"auto",unmountOnExit:!0},r.a.createElement("div",{style:{borderLeft:"5px solid #2196f3"}},r.a.createElement(Qc,{folder:e.folder}),r.a.createElement(Br.a,{component:"div",disablePadding:!0},e.subjects.length>0&&r.a.createElement(Hc,{subjects:e.subjects,moduleIndex:t})))))})))})),Gc=function(e){var t={mc:!1,essay:!1,speaking:!1,fillblanks:!1,allAnswersFilled:!0};return(e.mcQuestions||[]).forEach((function(e){0===e.length&&(t.mc=!0,t.allAnswersFilled=!1)})),(e.essayQuestions||[]).forEach((function(e){e||(t.essay=!0,t.allAnswersFilled=!1)})),(e.speakingQuestions||[]).forEach((function(e){e.audioFile||(t.speaking=!0,t.allAnswersFilled=!1)})),((e.fillBlankQuestions||{}).answers||[]).forEach((function(e){e&&"Select the correct answer"!==e||(t.fillblanks=!0,t.allAnswersFilled=!1)})),t},Vc=(n(1107),function(e){var t,n=e.readingContent,a=e.audioSource,o=e.fileUpload,s=e.materialsSection,i=Object(St.a)().t,c=(as(n)||"").split(".").pop();return o&&("pdf"===c&&(t=r.a.createElement(ji,{url:n,index:s})),"jfif"!==c&&"jpgeg"!==c&&"jpg"!==c||(t=r.a.createElement("div",{style:{backgroundImage:'url("'.concat(n,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"200px",borderRadius:"3px",width:"100%",margin:"auto"}}))),"docx"!==c&&"doc"!==c||(t=r.a.createElement(_a.a,{fileType:c,filePath:n})),r.a.createElement("div",{style:{marginBottom:20}},n&&r.a.createElement(et.a,{paragraph:!0,variant:"h6"},i("testMaterials.useTheFollowingContent")),!o&&n&&r.a.createElement("div",{style:{background:"#1976d2",borderRadius:4,color:"white",padding:10,marginTop:40},dangerouslySetInnerHTML:{__html:ac.a.sanitize(n)}}),o&&n&&r.a.createElement("div",null,t),a&&r.a.createElement("div",{style:{marginTop:40}},r.a.createElement(et.a,{paragraph:!0,variant:"h6"},i("testMaterials.useTheAudio")),r.a.createElement(es,{audioSource:a})))}),$c=Object(_t.a)({form:"studentTest",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Gc})((function(e){var t=e.testInSession,n=Object(St.a)().t,a=t.readingMaterials[0]||{},o=t.audioMaterials[0]||{},s={background:"#1976d2",borderRadius:4,color:"white",padding:10};return r.a.createElement(v,null,r.a.createElement(Vc,{audioId:"mcAudioMaterial",pdfIndex:1,readingContent:a.content,audioSource:o.audio,onPreview:function(){return zo("mcAudioMaterial")},fileUpload:a.fileUpload}),((t||{}).multipleChoiceQuestions||[]).map((function(e,t){var a=((e||{}).answerOptions||[]).map((function(e,t){return{label:e,value:e,placement:"start",color:"primary",name:"mc"}}));return r.a.createElement(v,{key:e._id},r.a.createElement(et.a,{paragraph:!0,variant:"h6"},"".concat(n("testSession.question")," ").concat(t+1)),r.a.createElement("div",{style:s,dangerouslySetInnerHTML:{__html:e.question}}),r.a.createElement(ca.a,{name:"mcQuestions.".concat(t),component:vi,numbered:!0,options:a,required:!1,column:!0}))})))})),Yc=Object(c.b)(null,(function(e){return{clearAnswers:function(t){e(Object(Dt.a)("testForm","mcQuestions[".concat(t,".correctAnswers]"),[]))}}}))($c),Jc=Object(_t.a)({form:"studentTest",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Gc})((function(e){var t=e.testInSession,n=e.path,a=Object(St.a)().t,o=t.readingMaterials[1]||{},s=t.audioMaterials[1]||{},i={background:"#1976d2",borderRadius:4,color:"white",padding:10,marginBottom:30};return r.a.createElement(v,null,r.a.createElement(Vc,{audioId:"essayAudioMaterial",pdfIndex:2,readingContent:o.content,audioSource:s.audio,onPreview:function(){return zo("essayAudioMaterial")},fileUpload:o.fileUpload}),((t||{}).essayQuestions||[]).map((function(e,t){return r.a.createElement(v,{key:e._id},r.a.createElement(et.a,{paragraph:!0,variant:"h6"},"".concat(a("testSession.question")," ").concat(t+1)),r.a.createElement("div",{style:i,dangerouslySetInnerHTML:{__html:e.question}}),r.a.createElement(ca.a,{component:Lr,noImage:!0,name:"essayQuestions.".concat(t),field:"essayQuestions.".concat(t),reduxForm:"studentTest",path:n}))})))})),Kc=n(97),Zc=n.n(Kc),Xc=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).blankListener=function(t){var n=parseInt((t.target.id.match(/\d+/)||[])[0]);(((e.props.formValues||{}).fillBlankQuestions||{}).answers||[]).map((function(e,t){return"blank-input-[".concat(t,"]")})).includes(t.target.id)&&e.props.updateAnswer(t.target.value,n)},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("change",(function(t){e.blankListener(t)}))}},{key:"render",value:function(){var e=this.props,t=e.formValues,n=e.t,a=e.testInSession,o=void 0===a?{}:a,s=(o.fillInBlanksQuestions||{}).blanks||[],i=Ki()(o.fillInBlanksQuestions.text,"-BLANK-",(function(e,a){var o=a/2-.5,i=(s[o]||[]).answerOptions;return!0===(s[o]||{}).selectableAnswer?r.a.createElement(v,{key:e+o},r.a.createElement("span",{className:Zc.a.BlankPreview},o+1," "),(s[o]||[]).audio&&r.a.createElement("span",{dangerouslySetInnerHTML:{__html:ac.a.sanitize('\n                      <audio id="audio['.concat(o,']" src="').concat((s[o]||{}).audio,'">\n                        </audio>\n                        <span class="').concat(Zc.a.Pointer,'" onClick="(function(){\n                          const audio = document.getElementById(\'audio[').concat(o,']\');\n                          audio.play()\n                          return false;\n                          })();return false;" >\n                          <i class="fa fa-volume-down"></i>\n                        </span>\n                        '),{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}),r.a.createElement("select",{readOnly:!0,className:Zc.a.SelectField,id:"blank-input-[".concat(o,"]"),onChange:function(){return console.log("this is just to prevent error")},value:((((t||{}).fillBlankQuestions||{}).answers||[])[o]||"").trim()},r.a.createElement("option",null,n("testSession.fields.selectAnswer")),i.map((function(e,t){return r.a.createElement("option",{key:e+t,value:(e||"").replace(/"/g,"'").trim()},tc()((e||"").replace(/"/g,"'")))})))):!1===(s[o]||[]).selectableAnswer?r.a.createElement(v,{key:e+o},r.a.createElement("span",{className:Zc.a.Inline},r.a.createElement("span",{className:Zc.a.BlankPreview},o+1," "),(s[o]||[]).audio&&r.a.createElement(v,null,r.a.createElement("span",{dangerouslySetInnerHTML:{__html:ac.a.sanitize('\n                        <audio id="audio['.concat(o,']" src="').concat((s[o]||{}).audio,'">\n                        </audio>\n                        <span class="').concat(Zc.a.Pointer,'" onClick="(function(){\n                          const audio = document.getElementById(\'audio[').concat(o,']\');\n                          audio.play()\n                          return false;\n                          })();return false;" >\n                          <i class="fa fa-volume-down"></i>\n                        </span>\n                      '),{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}})),r.a.createElement("input",{type:"text",className:Zc.a.InputField,id:"blank-input-[".concat(o,"]"),onChange:function(){return console.log("this is just to prevent error")},value:(((t||{}).fillBlankQuestions||{}).answers||[])[o]}))):void 0})),c=[];i.forEach((function(e,t){"string"===typeof e?c.push(e):c.push($i.a.renderToString(e))}));var l=(c||[]).join(""),u=o.readingMaterials[3]||{},d=o.audioMaterials[3]||{};return r.a.createElement(v,null,r.a.createElement(Vc,{audioId:"fillBlankAudioMaterial",pdfIndex:1,readingContent:u.content,audioSource:d.audio,onPreview:function(){return zo("fillBlankAudioMaterial")},fileUpload:u.fileUpload}),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:ac.a.sanitize(l,{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}))}}]),n}(a.Component),el=Object(_t.a)({form:"studentTest",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Gc})(Xc),tl=Object(c.b)(null,(function(e){return{updateAnswer:function(t,n){e(Object(Dt.a)("studentTest","fillBlankQuestions.answers.".concat(n),t))}}}))(Object(Ia.a)("common")(el)),nl=n(262),al=n.n(nl),rl=Object(_t.a)({form:"studentTest",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Gc})((function(e){var t=e.formValues,n=void 0===t?{}:t,o=e.changeField,s=e.testInSession,i={background:"#1976d2",borderRadius:4,color:"white",padding:10},c=Object(St.a)().t,l=Object(a.useState)(!1),u=Object(mo.a)(l,2),d=u[0],m=u[1],p=Object(a.useState)(!1),f=Object(mo.a)(p,2),g=f[0],b=f[1],h=function(e,t,n,a){a?(o("speakingQuestions.".concat(n,".recording"),a),o("speakingQuestions.".concat(n,".recorder"),e),o("speakingQuestions.".concat(n,".recordingTimeout"),t)):function(){clearTimeout(g),m(!0);var e=setTimeout((function(){m(!1)}),5e3);b(e)}()},E=function(e,t,n){o("speakingQuestions.".concat(n,".recording"),!1),o("speakingQuestions.".concat(n,".recordedBlob"),e),o("speakingQuestions.".concat(n,".audioFile"),t)},y=function(e){return((n||{}).speakingQuestions||[])[e]||{}},T=s.readingMaterials[2]||{},S=s.audioMaterials[2]||{};return Object(a.useEffect)((function(){return function(){clearTimeout(g)}}),[]),r.a.createElement(v,null,r.a.createElement(Vc,{audioId:"speakingAudioMaterial",pdfIndex:2,readingContent:T.content,audioSource:S.audio,onPreview:function(){return zo("speakingAudioMaterial")},fileUpload:T.fileUpload}),s.speakingQuestions.map((function(e,t){return r.a.createElement(v,{key:e._id},r.a.createElement(et.a,{paragraph:!0,variant:"h6"},"".concat(c("testSession.question")," ").concat(t+1)),e.question?r.a.createElement("div",{style:i,dangerouslySetInnerHTML:{__html:e.question}}):r.a.createElement("div",null,r.a.createElement("audio",{id:"audioQuestion[".concat(t,"]"),src:e.questionAudio}),r.a.createElement(ot.a,{fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){zo("audioQuestion[".concat(t,"]"))},startIcon:r.a.createElement(al.a,null)},c("testSession.buttons.playQuestion"))),r.a.createElement(ca.a,{component:Li,isMicAlert:d,name:"speakingQuestions.".concat(t,".recordedBlob"),onStart:function(){var e=Object(Aa.a)(xa.a.mark((function e(n){var a;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ho(n,null,t,null,function(){var e=Object(Aa.a)(xa.a.mark((function e(n){var a;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:a=e.sent,E(a.blob,a.file,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,h(a.recorder,a.recordingTimeout,t,a.isRecording);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onStop:function(){var e=Object(Aa.a)(xa.a.mark((function e(n){var a;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wo(n,null,t,y(t).recordingTimeout,y(t).recorder);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,console.log("stopped data",a),E(a.blob,a.file,t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPreview:function(){zo("audioAnswer[".concat(t,"]"))},onClear:function(){return E(null,null,t)},id:"audioAnswer[".concat(t,"]"),recordDisabled:y(t).recording,audioSource:y(t).recordedBlob,previewType:"button",recordButtonText:c("testSession.buttons.recordAnswer")}))})))})),ol=Object(c.b)(null,(function(e){return{changeField:function(t,n){e(Object(Dt.a)("studentTest",t,n))}}}))(rl),sl=Object(c.b)((function(e){return{testInSession:e.studentTest.testInSession}}))((function(e){var t=e.testInSession,n=e.classes,o=e.submitTest,s=Object(St.a)().t,i=t.endTime,c=r.a.useState(null),l=Object(mo.a)(c,2),u=l[0],d=l[1];Object(a.useEffect)((function(){var e=setInterval((function(){var t=i-Date.now();d(t),t<0&&(o(),clearInterval(e))}),1e3);return function(){clearInterval(e)}}),[]);var m=parseInt(ct()(parseInt((t||{}).endTime)).format("H")),p=parseInt(ct()(parseInt((t||{}).endTime)).format("HH"));console.log('hour H" ',m),console.log('hour HH" ',p);var f=ct()(parseInt((t||{}).endTime)).format("HH:mm");return r.a.createElement(v,null,u>0&&r.a.createElement(Zr,{danger:u/1e3<60,activeStep:60*parseInt((t||{}).timer)-u/1e3-1,steps:60*parseInt((t||{}).timer),progress:!0}),u>0&&r.a.createElement("div",{className:u/1e3<60?n.timerDanger:n.timer},(t||{}).timer&&r.a.createElement("div",null,r.a.createElement(et.a,{variant:"subtitle1"},"".concat(s("testSession.testClosesAt",{laOrLas:1===m?"la":"las",time:f}))),u/1e3<300&&u/1e3>60&&(t||{}).timer>5&&r.a.createElement("div",{className:n.timeWarning},r.a.createElement(et.a,{variant:"caption"},s("testSession.lessThanFiveMin"))),u/1e3<60&&r.a.createElement("div",{className:n.timeWarning},r.a.createElement(et.a,{variant:"caption"},s("testSession.lessThanOneMin"))))))})),il=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).onSubmit=function(e,t,n,r){if(console.log("this.props.formErrors.allAnswersFilled",a.props.formErrors.allAnswersFilled),t||n||a.props.formErrors.allAnswersFilled||a.state.isWarned||r){var o=ro((a.props.studentTest||{}).values,"studentTest"),s=(a.state.initialUrls||[]).filter((function(e){if(!o.includes(e))return e}));a.props.submitTest((a.props.studentTest||{}).values,a.props.token,a.props.userId,!t,a.props.testInSession,a.props.course._id,s,n,e),n&&a.props.exitAssignment()}else a.setState({isWarned:!0})},a.nextPage=function(){a.setState((function(e){return{page:e.page+1}}))},a.previousPage=function(){a.setState((function(e){return{page:e.page-1}}))},a.state={page:1,initialUrls:[],isWarned:!1,socket:null},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.startingValues,n=e.courses,a=e.notifications,r=(e.course,e.token),o=e.testInSession,s=e.setCourse,i=e.markAsSeen,c=e.fetchNotifications,l=e.fetchCourses,u=e.returnToCourses,d=e.fetchTestResults,m=e.userId,p=ro(t,"studentTest"),f=t.course,g=(n||[]).find((function(e){return e._id===f}));s(g);var b=(a||[]).find((function(e){if(e.documentId===t.test&&"assignment"===e.documentType)return e}));b&&(i(b._id,r),c(r));var h=go()("https://mernstackelearn.herokuapp.com/",{query:{token:r}});h.on("mainMenu",(function(e){"student"!==e.userType&&e.userId!==m||!("deleteTest"===e.action&&o._id===e.testId||"deactivateCourse"===e.action&&(g||{})._id===e.course||"closeTest"===e.action&&(t||{}).test===e.testId||"denyStudentCourseAccess"===e.action&&(g||{})._id===e.course&&e.userId===m||"resetTest"===e.action&&o._id===e.testId)||(console.log("message: ",e.message),l(r),d(r),u(),Nc.push("/student-panel/courses"))})),this.setState({initialUrls:p,socket:h})}},{key:"componentWillUnmount",value:function(){console.log("unmounting test"),this.state.socket.disconnect()}},{key:"render",value:function(){var e=this,t=this.props,n=t.testInSession,a=void 0===n?{}:n,o=t.isTest,s=t.loading,i=t.initialValues,c=t.formValues,l=t.formErrors,u=t.changeSection,d=t.coursePanel,m=(t.setCourse,t.width),p=t.t,f="courses/".concat((a||{}).course,"/tests/").concat((a||{})._id,"/results/").concat((i||{})._id),g=(a||{}).sectionWeights||{},b=g.mcSection,h=g.essaySection,E=g.fillBlankSection,y=g.speakingSection;if("testLesson"===d)return r.a.createElement(vc,null);var T,S=1,k=b?2:1;b&&h&&(T=3),!b&&h&&(T=2),b&&!h&&(T=2),b||h||(T=1);var w=((a||{}).audioMaterials||[])[4]||{},O=((a||{}).readingMaterials||[])[4]||{},C=w.audio&&""!==w.audio||O.content&&""!==O.content,x=Object.values((a||{}).sectionWeights||{}).filter((function(e){return null!==e})).length;C&&(S+=1,k+=1,T+=1,x+=1);var A=x,F=this.state.page;1===F&&C&&u("materials"),F===S&&b&&u("mc"),F===k&&h&&u("essay"),F===T&&y&&u("speaking"),F===A&&E&&u("fillblanks");var D,_=r.a.createElement("div",{className:1!==F?Zc.a.flexPositioningSpaceBetween:Zc.a.flexPositioningEnd},!(1===F)&&r.a.createElement(ot.a,{variant:"outlined",color:"primary",type:"button",style:{marginRight:"3px"},onClick:function(){e.previousPage(),e.setState({isWarned:!1})},startIcon:r.a.createElement(ia.a,null),size:"small"},C&&2===F?(a||{}).assignment?p("testSession.assignmentResources"):p("testSession.testResources"):p("testSession.buttons.previousSection")),!(F===x)&&r.a.createElement(ot.a,{onClick:function(){e.nextPage(),e.setState({isWarned:!1})},style:{marginLeft:"3px"},color:"primary",variant:"outlined",endIcon:r.a.createElement(oa.a,null),size:"small"},p(C&&1===F?"testSession.buttons.questions":"testSession.buttons.nextSection")));return F===S&&b&&(D=p("testSession.multiplechoicesection")),F===k&&h&&(D=p("testSession.essaysection")),F===T&&y&&(D=p("testSession.speakingsection")),F===A&&E&&(D=p("testSession.fillintheblankssection")),r.a.createElement("div",{style:m<500?{marginTop:30}:null,className:Zc.a.TestContainer},r.a.createElement(to,{active:s,transparent:!0}),r.a.createElement("div",{className:Zc.a.flexPositioningSpaceBetween},r.a.createElement(ot.a,{onClick:function(){return e.onSubmit(f,!0)},variant:"outlined",type:"button",size:"small"},p("testSession.buttons.save")),(a||{}).assignment&&r.a.createElement(ot.a,{onClick:function(){return e.onSubmit(f,!0,!0)},color:"secondary",variant:"outlined",type:"button",size:"small"},p("testSession.buttons.exit"))),(a||{}).timer&&r.a.createElement(sl,{classes:Zc.a,submitTest:function(){return e.onSubmit(f,null,null,!0)}}),r.a.createElement(et.a,{variant:"h4",gutterBottom:!0},D),1===F&&C&&r.a.createElement(v,null,r.a.createElement(Vc,{audioId:"testAudioMaterial",pdfIndex:0,readingContent:O.content,audioSource:w.audio,onPreview:function(){return zo("testAudioMaterial")},fileUpload:O.fileUpload})),F===S&&b&&r.a.createElement(v,null,r.a.createElement(Yc,{testInSession:a,test:o})),F===k&&h&&r.a.createElement(v,null,r.a.createElement(Jc,{test:o,path:f,testInSession:a})),F===T&&y&&r.a.createElement(v,null,r.a.createElement(ol,{testInSession:a,test:o,formValues:c})),F===A&&E&&r.a.createElement(v,null,r.a.createElement(tl,{formValues:c,testInSession:a,test:o})),_,this.state.isWarned&&!l.allAnswersFilled&&r.a.createElement(et.a,{paragraph:!0,color:"error",variant:"subtitle1",gutterBottom:!0},p("testSession.errors.questionsUnanswered")),r.a.createElement(ot.a,{onClick:function(t){e.onSubmit(f)},color:this.state.isWarned&&!l.allAnswersFilled?"secondary":"primary",variant:"outlined",fullWidth:!0,className:Zc.a.MuiButtonBase},this.state.isWarned&&!l.allAnswersFilled?p("testSession.buttons.submitAnyway"):p("testSession.buttons.submit")))}}]),n}(a.Component);il.getDerivedStateFromProps=function(e,t){return e.formErrors.allAnswersFilled?{isWarned:!1}:null};var cl=Object(_t.a)({form:"studentTest",enableReinitialize:!0,destroyOnUnmount:!0,forceUnregisterOnUnmount:!0,validate:Gc})(il),ll=Object(c.b)((function(e,t){return{formValues:Object(Ve.a)("studentTest")(e),formErrors:Object(Ft.a)("studentTest")(e),token:e.authentication.token,userId:e.authentication.userId,testInSession:t.isTest?e.studentTest.testInSession:e.studentTest.assignmentInSession,studentTest:e.form.studentTest,testTimesUp:e.studentTest.testTimesUp,initialValues:e.studentTest.loadedTestDataInProgress,intervalId:e.studentTest.testTimerCheckerIntervalId,timeLeft:e.studentTest.testTimeLeft,loading:e.studentTest.loading,coursePanel:e.common.coursePanel,courses:e.common.courses,course:e.common.selectedCourse,testResults:e.studentTest.testResults,notifications:e.common.notifications,width:e.common.width}}),(function(e){return{submitTest:function(t,n,a,r,o,s,i,c,l){e(function(e,t,n,a,r,o,s,i,c){return{type:"SUBMIT_TEST_START",payload:{formValues:e,token:t,studentId:n,testClosed:a,test:r,courseId:o,filesToDelete:s,exitAssignment:i,filePath:c}}}(t,n,a,r,o,s,i,c,l))},fetchNotifications:function(t){e(Ae(t))},fetchCourses:function(t,n){return e(Me(t,n))},fetchTestResults:function(t,n){return e(w(t,n))},changeSection:function(){var t;e({type:"SET_STUDENT_TEST_SECTION",section:t})},exitAssignment:function(){e({type:"EXIT_ASSIGNMENT"})},setCourse:function(t){e(Be(t))},markAsSeen:function(t,n){e(De(t,n))},returnToCourses:function(){e({type:"RETURN_TO_COURSES"})}}}))(Object(Ia.a)("common")(cl)),ul=Object(c.b)((function(e){return{selectedCourse:e.common.selectedCourse,courses:e.common.courses}}),(function(e){return{openModal:function(t,n){e(Ne(t,n))}}}))((function(e){var t=e.selectedCourse,n=e.courses,a=e.openModal,o=(Object(St.a)().t,n.find((function(e){return e._id===t._id})));return r.a.createElement(v,null,r.a.createElement(Br.a,null,o.resources.map((function(e){var t,n=(e.resource||"").split(".").pop();return"pdf"===n&&(t=r.a.createElement("i",{className:"far fa-file-pdf fa-2x"})),"docx"!==n&&"doc"!==n||(t=r.a.createElement("i",{className:"fas fa-file-word fa-2x"})),"jpeg"!==n&&"jpg"!==n&&"jfif"!==n||(t=r.a.createElement("i",{className:"fas fa-file-image fa-2x"})),"mp4"!==n&&"avi"!==n||(t=r.a.createElement("i",{className:"far fa-file-video fa-2x"})),r.a.createElement(Mr.a,{button:!0,onClick:function(){return a({loadedFile:e.loadedResource,ext:n},"courseResource")}},t&&r.a.createElement("span",{style:{marginRight:20}},t),r.a.createElement(lr.a,{primary:e.resourceName}))}))))})),dl=n(645),ml=Object(c.b)((function(e){return{students:e.common.students,course:e.common.selectedCourse,token:e.authentication.token,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn,studentTestResults:e.studentTest.testResults,modalDocument:e.common.modalDocument}}))((function(e){var t=e.course,n=e.studentTestResults,a=e.modalDocument,o=(e.students,e.instructorLoggedIn),s=e.studentLoggedIn,i=Object(St.a)().t;if(!t)return null;var c,l=t.tests;(s&&(c=(n.testResults||[]).filter((function(e){return e.graded&&null!==e.grade}))),o)&&(c=(((t.studentsEnrollRequests.filter((function(e){return e.approved||e.droppedOut||e.denied})).map((function(e){return e.student}))||[]||[]).find((function(e){return e._id===a._id}))||{}).testResults||[]).filter((function(e){return e.graded&&null!==e.grade})));var u=function(e,t){return e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:0},d=c.filter((function(e){return e.course===t._id&&l.findIndex((function(t){return t._id===e.test}))>-1})),m=d.map((function(e,t){var n=l.find((function(t){return t._id===e.test})),a=n.testName,r=n.assignment,o=n.createdAt,s=n.availableOnDate;return{x:"".concat(a," (").concat(i(r?"progressReport.assignment":"progressReport.test"),")"),y:e.grade,createdAt:s?parseInt(s):parseInt(o)}})).sort(u),p=d.map((function(e,t){var n=l.find((function(t){return t._id===e.test})),a=n.classAverage,r=n.testName,o=n.assignment,s=n.createdAt,c=n.availableOnDate;return{x:"".concat(r," (").concat(i(o?"progressReport.assignment":"progressReport.test"),")"),y:a,createdAt:c?parseInt(c):parseInt(s)}})).sort(u),f=[{id:i(s?"progressReport.yourProgress":"progressReport.studentProgress"),color:"hsl(193, 70%, 50%)",data:m},{id:i("progressReport.classAverage"),color:"hsl(11, 70%, 50%)",data:p}];return r.a.createElement("div",{style:{height:700,width:"100%"}},r.a.createElement(dl.a,{data:f,margin:{top:70,right:10,bottom:150,left:45},xScale:{type:"point"},yScale:{type:"linear",min:0,max:100,stacked:!1,reverse:!1},curve:"natural",axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:0,tickPadding:30,tickRotation:-85,legend:i("progressReport.assignmentsTests"),legendOffset:10,legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:i("progressReport.grade"),legendOffset:-40,legendPosition:"middle"},colors:{scheme:"category10"},lineWidth:5,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,areaBaselineValue:30,areaOpacity:.05,useMesh:!0,legends:[{anchor:"top",direction:"row",justify:!1,translateX:-28,translateY:-60,itemsSpacing:20,itemDirection:"top-to-bottom",itemWidth:100,itemHeight:74,itemOpacity:.75,symbolSize:18,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}],motionStiffness:80}))})),pl=Object(c.b)((function(e){e.common.selectedCourse;var t=JSON.stringify((e.common.selectedCourse||{}).regularOfficeHours),n=JSON.stringify((e.common.selectedCourse||{}).irregularOfficeHours);return{userId:e.authentication.userId,selectedCourse:e.common.selectedCourse,tab:e.common.tab,coursePanelSection:e.common.coursePanel,assignmentInSession:e.studentTest.assignmentInSession,loadedTestDataInProgress:e.studentTest.loadedTestDataInProgress,token:e.authentication.token,regOfficeHours:t,irregOfficeHours:n,selectedChatUser:e.common.selectedChatUser,modalDocument:e.common.modalDocument}}),(function(e){return{fetchCourses:function(t){return e(Me(t))},fetchTestResults:function(t){return e(w(t))},setTab:function(t){return e(Re(t))},fetchModules:function(t,n,a){return e(_e(t,n,a))},fetchNotifications:function(t){return e(Ae(t))},fetchStudents:function(t,n,a){return e(Qe(t,n,null,a))},returnToCourses:function(){e({type:"RETURN_TO_COURSES"})},closeModal:function(){e({type:"CLOSE_MODAL"})}}}))((function(e){var t,n=e.tab,o=e.coursePanelSection,s=e.selectedCourse,i=e.assignmentInSession,c=e.loadedTestDataInProgress,l=e.fetchModules,u=(e.modalDocument,e.token),d=e.userId,m=e.fetchStudents,p=e.fetchNotifications,f=e.fetchCourses,g=e.fetchTestResults,b=e.returnToCourses,h=e.regOfficeHours,E=e.irregOfficeHours,y=e.selectedChatUser,T=(e.stringifiedCourse,e.stringifiedLessons,e.stringifiedTests,e.closeModal,Object(a.useState)(!1)),S=Object(mo.a)(T,2),k=S[0],w=S[1];return Object(a.useEffect)((function(){var e=s;null!==s&&s||(e={});var t=Cc(s||{},Date.now()),n=t.isIrregOfficeHour,a=t.isRegOfficeHour;w(!(!n&&!a));var r,o=go()("https://mernstackelearn.herokuapp.com/",{query:{token:u}});o.on("updateStudents",(function(t){"all"!==t.userType&&"student"!==t.userType||t.courseId!==e._id||(m(e._id,u,"noSpinner"),p(u))})),o.on("updateCourses",(function(t){t.userId!==d&&"student"!==t.userType&&"all"!==t.userType||t.courseId!==e._id||"exitCourse"!==t.action||(f(u),p(u),s&&(console.log("10101010101010101010101010101010101010101"),b(),Nc.push("/student-panel/courses")))})),o.on("updateModules",(function(t){"student"===t.userType&&l(e._id,u,"noSpinner")}));!function t(n){r=setTimeout((function(){var a=Cc(e),o=a.isIrregOfficeHour,s=a.isRegOfficeHour;w(!(!o&&!s)),n?t(Fc(e,Date.now())):clearTimeout(r)}),n-Date.now())}(Fc(e,Date.now()));var i=(e.lessons||[]).filter((function(e){return e.availableOnDate&&Date.now()<parseInt(e.availableOnDate)})).map((function(e){return parseInt(e.availableOnDate)})),c=(e.tests||[]).filter((function(e){return e.availableOnDate&&Date.now()<parseInt(e.availableOnDate)})).map((function(e){return parseInt(e.availableOnDate)})),h=(e.tests||[]).filter((function(e){return e.dueDate&&Date.now()<parseInt(e.dueDate)&&!e.allowLateSubmission})).map((function(e){return parseInt(e.dueDate)})),E=[];(e.tests||[]).forEach((function(e){if(e.allowLateSubmission&&Date.now()<parseInt(e.dueDate)+864e5*e.lateDaysAllowed)for(var t=parseInt(e.dueDate);t<parseInt(e.dueDate)+864e5*e.lateDaysAllowed;t+=864e5)t>Date.now()&&E.push(t)}));var v,y=(e.tests||[]).filter((function(e){return Date.now()<parseInt(e.dueDate)+864e5*e.lateDaysAllowed&&e.allowLateSubmission})).map((function(e){return parseInt(e.dueDate)+864e5*e.lateDaysAllowed})),T=(e.tests||[]).filter((function(e){return e.gradeReleaseDate&&Date.now()<parseInt(e.gradeReleaseDate)})).map((function(e){return parseInt(e.gradeReleaseDate)})),S=[];return[].concat(Object(Pr.a)(i),Object(Pr.a)(c),Object(Pr.a)(h),Object(Pr.a)(y),E,Object(Pr.a)(T)).forEach((function(e){v=setTimeout((function(){S.push(v),f(u),g(u)}),e-Date.now())})),function(){S.forEach((function(e){clearTimeout(e)})),clearTimeout(r),o.disconnect()}}),[h,E]),s?("assignment"===o&&(t=r.a.createElement(v,null,r.a.createElement(v,null,r.a.createElement(lo,{value:n,index:0},i&&c?r.a.createElement(ll,{startingValues:c,isAssignment:!0}):r.a.createElement(Bc,{isAssignment:!0})),r.a.createElement(lo,{value:n,index:1},r.a.createElement(Uc,{isAssignment:!0}))))),"test"===o&&(t=r.a.createElement(v,null,r.a.createElement(lo,{value:n,index:0},r.a.createElement(Bc,{isTest:!0})),r.a.createElement(lo,{value:n,index:1},r.a.createElement(Uc,{isTest:!0})))),"chat"===o&&(t=r.a.createElement(v,null,r.a.createElement(lo,{value:n,index:0},r.a.createElement(ls,{key:y,isOfficeHour:k,studentPanel:!0})),r.a.createElement(lo,{value:n,index:1},r.a.createElement(os,{key:(y||{})._id,isOfficeHour:k,userType:"student"})))),"lesson"===o&&(t=r.a.createElement(v,null,r.a.createElement(lo,{value:n,index:0},r.a.createElement(vc,null)),r.a.createElement(lo,{value:n,index:1}))),"modules"===o&&(t=r.a.createElement(v,null,r.a.createElement(lo,{value:n,index:0},r.a.createElement(zc,null)))),"progressReport"===o&&(t=r.a.createElement(v,null,r.a.createElement(lo,{value:n,index:0},r.a.createElement(ml,null)))),"resources"===o&&(t=r.a.createElement(ul,null)),"testSession"===o||"testLesson"===o?null:t):null})),fl=Object(c.b)((function(e){return{nameOfUser:e.authentication.nameOfUser,token:e.authentication.token,sessionExpiration:e.authentication.sessionExpiration,userId:e.authentication.userId,courses:e.common.courses,loading:e.studentCourse.loading||e.studentTest.loading||e.common.loading,notification:e.common.notification,testInSession:e.studentTest.testInSession,loadedTestDataInProgress:e.studentTest.loadedTestDataInProgress,coursePanel:e.common.coursePanel,tab:e.common.tab,selectedCourse:e.common.selectedCourse,refreshTokenExpiration:e.authentication.refreshTokenExpiration}}),(function(e){return{fetchCourses:function(t,n){return e(Me(t,n))},fetchTestResults:function(t,n){return e(w(t,n))},fetchModules:function(t,n,a){return e(_e(t,n,a))},fetchNotifications:function(t){return e(Ae(t))},fetchUser:function(t){return e(me(t))},fetchConfig:function(t){return e(Oe(t))},setNotification:function(t,n){return e(xe(t,n))},setTab:function(t){return e(Re(t))},fetchStudents:function(t,n){return e(Qe(t,n))},setChatUser:function(t){e(we(t))},setTabLabels:function(t){return e(je(t))},setCourse:function(t){e(Be(t))},setPanel:function(t){e(Ue(t))},markAsSeen:function(t,n){e(De(t,n))},logout:function(){e(Te())},returnToCourses:function(){e({type:"RETURN_TO_COURSES"})}}}))((function(e){var t=e.fetchTestResults,n=e.userId,o=e.token,s=e.loading,i=e.loadedTestDataInProgress,c=e.courses,l=e.notification,u=e.fetchCourses,m=e.fetchModules,p=e.fetchStudents,f=e.fetchNotifications,g=e.fetchUser,b=e.fetchConfig,h=e.setNotification,E=e.setTab,y=e.setChatUser,T=e.setTabLabels,S=e.setCourse,k=e.setPanel,w=e.selectedCourse;Object(a.useEffect)((function(){b(o);var e=go()("https://mernstackelearn.herokuapp.com/",{query:{token:o}}),a=function(){e.emit("loggedOut",{user:n})};return window.addEventListener("beforeunload",a),console.log("student panel mounted"),g(o),T(["All courses","Your courses"]),e.open(),e.on("updateCourses",(function(e){"student"!==e.userType&&"all"!==e.userType&&e.userId!==n||(u(o,"noSpinner"),f(o))})),e.on("updateResults",(function(e){"student"!==e.userType&&e.userId!==n||(t(o,"noSpinner"),f(o))})),e.emit("loggedIn",{user:n}),e.on("mainMenu",(function(e){e.userId===n&&(f(o),u(o,"noSpinner"))})),e.on("alert",(function(e){f(o);var t={_id:e._id,senderId:e.sender._id,message:e.content,type:e.type,avatar:e.sender.avatar,senderFirstName:e.sender.firstName,senderLastName:e.sender.lastName,courseName:e.course,courseId:e.courseId,userType:e.sender.type,file:e.file},n=setTimeout((function(){h(null,null)}),5e3);h(t,n)})),function(){console.log("student panel unmounted"),e.emit("loggedOut",{user:n}),window.removeEventListener("beforeunload",a),e.disconnect()}}),[]),Object(a.useEffect)((function(){var e=go()("https://mernstackelearn.herokuapp.com/",{query:{token:o}});return e.on("updateConfig",(function(e){"all"!==e.userType&&e.courseId!==(w||{})._id||b(o)})),function(){e.disconnect()}}),[(w||{})._id]);return r.a.createElement(v,null,r.a.createElement(to,{active:s,transparent:!0}),l&&r.a.createElement(jc,{onNotificationClick:function(e,t){var n=(c||[]).find((function(e){return e._id===t}))||{};S(n),E(1),k("chat"),T(["Contacts","Chat"]),y(e),m(t,o),p(t,o),h(null,null),Nc.push("/student-panel/course/".concat(t))},notification:l}),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/student-panel/courses",component:Pc}),r.a.createElement(d.b,{exact:!0,path:"/student-panel/course/:courseId",render:function(e){return r.a.createElement(pl,e)}}),r.a.createElement(d.b,{exact:!0,render:function(){if(i)return r.a.createElement(ll,{isTest:!0,startingValues:i,path:"/student-panel/test-session"})}})))})),gl=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"componentDidMount",value:function(){console.log("logout mounted"),this.props.onLogout()}},{key:"render",value:function(){return r.a.createElement(d.a,{to:"/authentication"})}}]),n}(a.Component),bl=Object(c.b)(null,(function(e){return{onLogout:function(){e(Te())}}}))(gl),hl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=FS.getState().authentication.formIsSignup,n={},a=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,r=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/;return e.firstName||(n.firstName=na.t("auth.errors.enterFirstName")),e.lastName||(n.lastName=na.t("auth.errors.enterLastName")),/^[ a-zA-Z\xc0-\xff\u00f1\u00d1]*$/g.test(e.firstName)||(n.firstName=na.t("auth.errors.enterFirstNameOnlyAlpha")),/^[ a-zA-Z\xc0-\xff\u00f1\u00d1]*$/g.test(e.lastName)||(n.lastName=na.t("auth.errors.enterLastNameOnlyAlpha")),e.type||(n.type=na.t("auth.errors.makeSelection")),e.dob||(n.dob=na.t("auth.errors.enterDateOfBirth")),a.test(e.email)||(n.email=na.t("auth.errors.enterValidEmail")),e.email||(n.email=na.t("auth.errors.required")),!r.test(e.password)&&t&&(n.password=na.t("auth.errors.passwordConditions")),e.password||t||(n.password=na.t("auth.errors.required")),e.confirmPassword?e.confirmPassword!==e.password&&(n.confirmPassword=na.t("auth.errors.passwordMismatched")):n.confirmPassword=na.t("auth.errors.required"),n},El=n(189),vl=n.n(El),yl=function(e){return r.a.createElement("button",{type:e.type,disabled:e.disabled,className:e.modal?[e.isError?vl.a.ModalError:vl.a.ModalButton].join(" "):[e.halfWidth?vl.a.HalfWidth:vl.a.FullWidth,vl.a.Button,e.isError?vl.a.Error:vl.a.SubmitForm].join(" "),onClick:e.clicked},e.children)},Tl=n(88),Sl=n.n(Tl),kl=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isValid:!0},e}return Object(b.a)(n,[{key:"setFormValidity",value:function(e){this.setState({isValid:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.formValues,o=t.formIsSignup,s=t.completed,i=t.page,c=t.changeDOB,l=t.triggerSignupValidation,u=t.submitForm,d=t.pristine,m=t.toggleLoginSubmitForm,p=t.formIsForgotPassword,f=t.triggerPasswordResetValidation,g=t.triggerSigninValidation,b=t.forgotPassword,h=t.formErrors,E=t.resendVerificationEmail,y=t.t;t.i18n;console.log("t",y);var T,S=hl(a||{})||{},k=!!(S.firstName||S.lastName||S.dob||S.sex),w=!!(S.email||S.password||S.type),O=!(!S.email&&!S.type),C=[{value:"",primaryText:""},{value:"student",primaryText:y("auth.student")},{value:"instructor",primaryText:y("auth.instructor")}],x=(y("languages.english"),y("languages.spanish"),(!w||this.state.isValid)&&!h.asyncError||!1),A=k&&!this.state.isValid;return T=o?r.a.createElement(v,null,r.a.createElement("div",{className:Sl.a.header},r.a.createElement(et.a,{style:{textAlign:"center"},variant:"h5"},y("auth.signUp")),r.a.createElement("div",{className:Sl.a.steps},r.a.createElement(Zr,{completed:s?[0]:null,size:"small",stepsLabels:["1","2"],activeStep:i-1}))),r.a.createElement(ca.a,{name:"firstName",error:S.firstName,component:fa,label:y("auth.firstName")}),r.a.createElement(ca.a,{name:"lastName",error:S.lastName,component:fa,label:y("auth.lastName")}),r.a.createElement(ca.a,{error:S.dob,name:"dob",fullWidth:!0,component:er,type:"date",maxDate:new Date(Date.now()-943488e5),options:{disableFuture:!0,label:y("auth.dob")},handleChange:c}),r.a.createElement("div",{className:Sl.a.ButtonContainer},r.a.createElement(yl,{halfWidth:!0,type:"submit",isError:A,clicked:function(){if(k||d)return l(),void e.setFormValidity(!1);u(!0,!1)}},y("auth.buttons.next")),r.a.createElement(yl,{halfWidth:!0,clicked:function(){m(),e.setFormValidity(!0)}},y(o?"auth.buttons.switchToSignIn":"auth.buttons.switchToSignUp")))):r.a.createElement(v,null,r.a.createElement("div",{id:"123",className:Sl.a.header},r.a.createElement(et.a,{style:{textAlign:"center",marginBottom:30},gutterBottom:!0,variant:"h5"},y("auth.signIn"))),r.a.createElement(ca.a,{name:"email",error:S.email,component:fa,label:y("auth.email")}),r.a.createElement(ca.a,{error:S.password,name:"password",component:fa,label:y("auth.password"),type:"password"}),r.a.createElement(ca.a,{name:"type",error:S.type,component:Hs,label:y("auth.accountType"),options:C,variant:"outlined"}),h.type===y("auth.errors.notVerifiedCheckEmail")&&r.a.createElement("div",{className:Sl.a.ResendVerificationEmail},r.a.createElement("span",{onClick:function(){E(a.email,a.type),e.setFormValidity(!0)}},y("auth.buttons.resendEmail"))),r.a.createElement("div",{className:Sl.a.ButtonContainer},r.a.createElement(yl,{halfWidth:!0,isError:!x,clicked:function(){if(w||d)return e.setFormValidity(!1),void g();u(!1,!1)}},y(o?"auth.buttons.switchToSignIn":"auth.signIn")),r.a.createElement(yl,{halfWidth:!0,clicked:function(){m(),e.setFormValidity(!0)}},y(o?"auth.buttons.switchToSignIn":"auth.buttons.switchToSignUp"))),r.a.createElement("div",{style:{margin:"15px 0"}},r.a.createElement("span",{className:Sl.a.ForgotPassword,onClick:function(){b(),e.setFormValidity(!0)}},y("auth.forgotPassword")))),p&&(T=r.a.createElement(v,null,r.a.createElement("div",{className:Sl.a.header},r.a.createElement(et.a,{style:{textAlign:"center"},gutterBottom:!0,variant:"h5"},y("auth.resetPassword"))),r.a.createElement("p",null,y("auth.enterEmailToResetPassword")),r.a.createElement(ca.a,{name:"email",error:S.email,component:fa,label:y("auth.email")}),r.a.createElement(ca.a,{name:"type",error:S.type,component:Hs,label:y("auth.accountType"),options:C,variant:"outlined"}),r.a.createElement("div",{className:Sl.a.ButtonContainer},r.a.createElement(yl,{halfWidth:!0,clicked:function(t){m(t,"signin"),e.setFormValidity(!0)}},y("auth.buttons.returnToSignIn")),r.a.createElement(yl,{halfWidth:!0,isError:O&&!this.state.isValid,clicked:function(){if(O||d)return e.setFormValidity(!1),void f();u(!1,!0)}},y("auth.buttons.sendLink"))))),r.a.createElement(v,null,r.a.createElement(to,{transparent:!0,active:n}),r.a.createElement("div",{className:Sl.a.Auth},T))}}]),n}(a.Component),wl=Object(_t.a)({form:"authenticationForm",validate:hl,destroyOnUnmount:!1,touchOnBlur:!0})(Object(Ia.a)("common")(kl)),Ol=Object(c.b)((function(e){return{formValues:Object(Ve.a)("authenticationForm")(e),formErrors:Object(Ft.a)("authenticationForm")(e),loading:e.authentication.loading,formIsSignup:e.authentication.formIsSignup,formIsForgotPassword:e.authentication.formIsForgotPassword}}),(function(e){return{triggerSignupValidation:function(){e(Object(Dt.d)("authenticationForm","firstName")),e(Object(Dt.d)("authenticationForm","lastName")),e(Object(Dt.d)("authenticationForm","dob"))},triggerSigninValidation:function(){e(Object(Dt.d)("authenticationForm","email")),e(Object(Dt.d)("authenticationForm","password")),e(Object(Dt.d)("authenticationForm","type"))},triggerPasswordResetValidation:function(){e(Object(Dt.d)("authenticationForm","email")),e(Object(Dt.d)("authenticationForm","type"))},toggleLoginSubmitForm:function(t,n){e(ie(t,n)),e(Object(Dt.b)("authenticationForm"))},forgotPassword:function(){e({type:"FORGOT_PASSWORD_PAGE"}),e(Object(Dt.b)("authenticationForm"))},changeDOB:function(t){e(Object(Dt.a)("authenticationForm","dob",t))},resendVerificationEmail:function(t,n){e(function(e,t){return{type:"RESEND_EMAIL_VERIFICATION_START",payload:{email:e,accountType:t}}}(t,n))}}}))(wl),Cl=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isValid:!0},e.triggerValidation=function(){var t=e.props,n=t.touchField,a=t.formValues,r=void 0===a?{}:a;["type","password","confirmPassword","email"].forEach((function(e){n(e)}));var o=hl(r)||{};!!(o.email||o.password||o.confirmPassword||o.type)&&e.setFormValidity(!1)},e}return Object(b.a)(n,[{key:"setFormValidity",value:function(e){this.setState({isValid:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.formIsSignup,a=t.formValues,o=void 0===a?{}:a,s=t.page,i=t.completed,c=t.previousPage,l=(t.nextPage,t.toggleLoginSubmitForm),u=(t.touchField,t.loading),d=t.pristine,m=t.setFormPage,p=t.submitForm,f=t.formErrors,g=t.t,b=[{value:"",primaryText:""},{value:"student",primaryText:g("auth.student")},{value:"instructor",primaryText:g("auth.instructor")}],h=hl(o)||{},E=!!(h.email||h.password||h.confirmPassword||h.type),y=(!E||this.state.isValid)&&!f.asyncError||!1;return r.a.createElement(v,null,r.a.createElement(to,{transparent:!0,active:u}),r.a.createElement("div",{className:Sl.a.Auth},r.a.createElement("div",{className:Sl.a.header},r.a.createElement(et.a,{style:{textAlign:"center"},variant:"h5"},g("auth.signUp"))),r.a.createElement("div",{className:Sl.a.steps},r.a.createElement(Zr,{size:"small",stepsLabels:["1","2"],activeStep:s-1,completed:i?[0,1]:[0]})),r.a.createElement(ca.a,{name:"type",error:h.type,component:Hs,label:g("auth.accountType"),variant:"outlined",options:b}),r.a.createElement(ca.a,{name:"email",error:h.email,component:fa,label:g("auth.email")}),r.a.createElement(ca.a,{name:"password",error:h.password,component:fa,label:g("auth.password"),type:"password"}),r.a.createElement(ca.a,{name:"confirmPassword",error:h.confirmPassword,component:fa,label:g("auth.confirmPassword"),type:"password"}),r.a.createElement("div",{className:Sl.a.ButtonContainer},r.a.createElement(yl,{halfWidth:!0,clicked:function(e){e.preventDefault(),c()}},g("auth.buttons.back")),r.a.createElement(yl,{halfWidth:!0,clicked:function(){E||d?e.triggerValidation():p(!0)},isError:!y},g("auth.buttons.submit"))),r.a.createElement("div",{className:Sl.a.ButtonContainer},r.a.createElement(yl,{clicked:function(){l(),m(1)}},g(n?"auth.buttons.switchToSignIn":"auth.buttons.switchToSignUp")))))}}]),n}(a.Component),xl=Object(_t.a)({form:"authenticationForm",validate:hl,destroyOnUnmount:!1,touchOnBlur:!0})(Object(Ia.a)("common")(Cl)),Al=Object(c.b)((function(e){return{formValues:Object(Ve.a)("authenticationForm")(e),formErrors:Object(Ft.a)("authenticationForm")(e),loading:e.authentication.loading,error:e.authentication.error,isAuthenticated:null!==e.authentication.token,authRedirectPath:e.authentication.authRedirectPath,formIsSignup:e.authentication.formIsSignup,formIsForgotPassword:e.authentication.formIsForgotPassword}}),(function(e){return{touchField:function(t){e(Object(Dt.d)("authenticationForm",t))},toggleLoginSubmitForm:function(t){e(ie(t)),e(Object(Dt.b)("authenticationForm"))},setFormPage:function(t){e(ve(t))}}}))(xl),Fl=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props.page,n=hl(this.props.formValues)||{},a=!n.firstName&&!n.lastName&&!n.sex&&!n.dob,o=!n.type&&!n.email&&!n.password&&!n.confirmPassword;return r.a.createElement(v,null,(1===t||!this.props.formIsSignup)&&r.a.createElement(Ol,{page:t,completed:a,submitForm:function(t,n){t||e.props.formIsForgotPassword||e.props.login(e.props.formValues),t&&e.props.setSignupFormPage(2),e.props.formIsForgotPassword&&e.props.sendPasswordResetLink(e.props.formValues)}}),2===t&&this.props.formIsSignup&&r.a.createElement(Al,{page:t,previousPage:function(){return e.props.setSignupFormPage(1)},nextPage:function(){return e.props.setSignupFormPage(3)},completed:o,submitForm:function(t){return e.props.submitAuthForm(Object(At.a)(Object(At.a)({},e.props.formValues),{},{language:localStorage.getItem("i18nextLng")||"en"}),t)}}))}}]),n}(a.Component),Dl=Object(_t.a)({form:"authenticationForm",validate:hl,destroyOnUnmount:!0,touchOnBlur:!1})(Fl),_l=Object(c.b)((function(e){return{formValues:Object(Ve.a)("authenticationForm")(e),formIsSignup:e.authentication.formIsSignup,formIsForgotPassword:e.authentication.formIsForgotPassword,page:e.authentication.signupFormPage}}),(function(e){return{login:function(t,n){e({type:"AUTHENTICATION_START",payload:{formData:t}})},submitAuthForm:function(t,n){return e({type:"CREATE_ACCOUNT_START",payload:{formData:t}})},sendPasswordResetLink:function(t){e({type:"PASSWORD_RESET_LINK_START",payload:{authData:t}})},setSignupFormPage:function(t){e(ve(t))}}}))(Dl),Il=n(405),jl=n.n(Il),Rl=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isValid:!0},e.onSubmit=function(){var t=e.props.formErrors,n=t.password||t.confirmPassword;console.log("formerrors: ",t),n?e.setState({isValid:!1}):e.props.submitNewPassword(e.props.formValues,e.props.match.params.token,e.props.match.params.accountType)},e}return Object(b.a)(n,[{key:"setFormValidity",value:function(e){this.setState({isValid:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.formErrors,a=t.triggerPasswordResetValidation,o=t.loading,s=t.t,i=n.password||n.confirmPassword,c=r.a.createElement("div",null,r.a.createElement(to,{transparent:!0,active:o}),r.a.createElement(ca.a,{name:"password",component:fa,label:s("account.newPassword"),type:"password"}),r.a.createElement(ca.a,{name:"confirmPassword",component:fa,label:s("account.confirmPassword"),type:"password"}),r.a.createElement("div",{className:jl.a.ButtonContainer},r.a.createElement(yl,{isError:!this.state.isValid&&i,btnType:"SubmitForm",clicked:function(){if(i)return a(),void e.setFormValidity(!1);e.onSubmit()}},s("account.buttons.setNewPassword"))));return r.a.createElement("div",{className:jl.a.Auth},r.a.createElement(et.a,{style:{margin:"20px 0"},variant:"h5"},s("account.passwordReset")),c)}}]),n}(a.Component),Nl=Object(_t.a)({form:"passwordReset",validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/;return n.test(e.password)||(t.password=na.t("account.errors.passwordConditions")),e.password||(t.password=na.t("account.errors.required")),e.confirmPassword?e.confirmPassword!==e.password&&(t.confirmPassword=na.t("account.errors.passwordMismatched")):t.confirmPassword=na.t("account.errors.required"),t},destroyOnUnmount:!0,touchOnBlur:!0})(Rl),Ll=Object(c.b)((function(e){return Object(po.a)({loading:e.authentication.loading,error:e.authentication.error,isAuthenticated:null!==e.authentication.token,authRedirectPath:e.authentication.authRedirectPath,formValues:Object(Ve.a)("passwordReset")(e),formErrors:Object(Ft.a)("passwordReset")(e)},"loading",e.authentication.loading)}),(function(e){return{submitNewPassword:function(t,n,a){return e(function(e,t,n){return{type:"CHANGE_PASSWORD_START",payload:{authData:e,token:t,accountType:n}}}(t,n,a))},triggerPasswordResetValidation:function(){e(Object(Dt.d)("passwordReset","password")),e(Object(Dt.d)("passwordReset","confirmPassword"))}}}))(Object(Ia.a)("common")(Nl)),Pl=n(406),Bl=n.n(Pl),Ml=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return e.password||(t.password=na.t("auth.errors.required")),t},ql=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(){e.props.touchField("password"),Ml(e.props.formValues).password||e.props.verifyAccount((e.props.formValues||{}).password,e.props.match.params.token,e.props.match.params.accountType)},e.onLoginPage=function(){Nc.push("/authentication")},e.handleForgotPasswordPage=function(t){Nc.push("/authentication"),e.props.forgotPasswordPage()},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){localStorage.removeItem("userFirstName"),localStorage.removeItem("userLastName"),localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),localStorage.removeItem("userType"),localStorage.removeItem("profilePicture"),localStorage.removeItem("refreshTokenExpiration")}},{key:"render",value:function(){var e=this.props.t,t=r.a.createElement("div",null,r.a.createElement(to,{transparent:!0,active:this.props.loading}),r.a.createElement(ca.a,{name:"password",component:fa,label:e("auth.password"),type:"password"}),r.a.createElement("div",{className:Bl.a.ButtonContainer},(this.props.formErrors.password||"").includes("alreadyVerified")?r.a.createElement(ot.a,{variant:"outlined",color:"primary",onClick:this.onLoginPage},e("auth.signIn")):r.a.createElement(ot.a,{variant:"outlined",color:"primary",onClick:this.onSubmit},e("auth.buttons.verifyAccount"))),r.a.createElement("div",{style:{margin:"15px 0"}},r.a.createElement("span",{style:{color:"#2196f3",textAlign:"left",cursor:"pointer",margin:"15px 0"},onClick:this.handleForgotPasswordPage},e("auth.forgotPassword"))));return r.a.createElement("div",{className:Bl.a.Auth},r.a.createElement(et.a,{style:{margin:"20px 0"},variant:"h5"},e("auth.accountVerification")),t)}}]),n}(a.Component),Ul=Object(_t.a)({form:"verifyAccount",destroyOnUnmount:!0,touchOnBlur:!0,validate:Ml})(ql),Ql=Object(c.b)((function(e){return{formValues:Object(Ve.a)("verifyAccount")(e),formErrors:Object(Ft.a)("verifyAccount")(e),loading:e.authentication.loading}}),(function(e){return{verifyAccount:function(t,n,a){return e(function(e,t,n){return{type:"ACCOUNT_VERIFICATION_START",payload:{password:e,token:t,userType:n}}}(t,n,a))},forgotPasswordPage:function(){e({type:"FORGOT_PASSWORD_PAGE"})},touchField:function(t){e(Object(Dt.d)("verifyAccount",t))}}}))(Object(Ia.a)("common")(Ul)),Wl=n(1256),Hl=n(656),zl=n.n(Hl),Gl=n(146),Vl=n.n(Gl),$l=n(147),Yl=n.n($l),Jl=n(181),Kl=n.n(Jl),Zl=n(327),Xl=n.n(Zl),eu=n(326),tu=n.n(eu),nu=n(153),au=n.n(nu),ru=n(648),ou=n.n(ru),su=n(182),iu=n.n(su),cu=n(407),lu=n.n(cu),uu=function(e){return r.a.createElement("li",{className:lu.a.NavigationItem},r.a.createElement(i.b,{to:e.link,exact:e.exact,activeClassName:e.notSelected?"":lu.a.active},e.children))},du=n(1254),mu=Object(Ye.a)((function(e){var t;return t={root:{display:"flex",flexGrow:1,width:"100%",background:"white"},smallFontSize:{fontSize:"0.7em"},drawer:Object(po.a)({width:0},e.breakpoints.up("sm"),{width:200,flexShrink:0}),appBarNoDrawer:{zIndex:2,marginLeft:0,backgroundColor:e.palette.primary.mainColor},appBar:Object(po.a)({marginLeft:0,zIndex:2,backgroundColor:e.palette.primary.mainColor},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(200,"px)"),marginLeft:200}),menuButton:Object(po.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar},Object(po.a)(t,"toolbar",e.mixins.toolbar),Object(po.a)(t,"drawerPaper",{width:200,overflowX:"hidden"}),Object(po.a)(t,"content",{width:"0",flexGrow:1,marginBottom:80}),Object(po.a)(t,"authContent",{width:"0",flexGrow:1}),Object(po.a)(t,"primaryColor",{color:"#2196f3"}),Object(po.a)(t,"whiteColor",{color:"white",textAlign:"center"}),Object(po.a)(t,"blueHeader",{backgroundColor:"#2196f3"}),Object(po.a)(t,"toolbarLayout",{justifyContent:"space-between",minHeight:"64px"}),Object(po.a)(t,"center",{textAlign:"center"}),Object(po.a)(t,"bottomFixed",Object(po.a)({},"@media (max-width:500px)",{position:"fixed",bottom:"0"})),Object(po.a)(t,"smallFontSize",{fontSize:"0.7em"}),Object(po.a)(t,"panelContainer",{width:"100%",background:"white",margin:"30px auto 20px auto",padding:"20px 10px 10px 10px"}),Object(po.a)(t,"panelContainerBreakPoints",Object(po.a)({},"@media (min-width:500px)",{margin:"80px auto 20px auto"})),Object(po.a)(t,"CustomTabBar",Object(po.a)({position:"absolute",width:"100%"},"@media (min-width:500px)",{top:"64px"})),t})),pu=function(e){e.shrinkLabel;var t=Object(St.a)(),n=t.t,a=t.i18n,o=[{value:"en",primaryText:n("languages.english")},{value:"es",primaryText:n("languages.spanish")}];return r.a.createElement("div",{style:{margin:"5px 0 0 3px"}},r.a.createElement(Hs,{fullWidth:!0,simple:!0,component:Hs,input:{value:localStorage.getItem("i18nextLng"),onChange:function(e){return a.changeLanguage(e.target.value)}},options:o}))},fu=Object(c.b)((function(e){return{course:e.common.selectedCourse,coursePanel:e.common.coursePanel,token:e.authentication.token,userId:e.authentication.userId}}),(function(e){return{exitCourse:function(){e({type:"RETURN_TO_COURSES"})},setTabLabels:function(t){return e(je(t))},setTab:function(t){return e(Re(t))},setPanel:function(t){return e(Ue(t))},cancelEditing:function(){return e({type:"CANCEL_EDITING"})}}}))((function(e){var t=e.mobileOpen,n=e.onHandleDrawerToggle,a=e.coursePanel,o=e.course,s=e.cancelEditing,i=e.exitCourse,c=e.setTabLabels,l=e.setTab,u=e.setPanel,d=(e.userId,e.token,Object(St.a)("common").t),m=function(e,a,r){t&&n(),r&&i(),s(),l(0),u(a),c(e)},p=mu();return r.a.createElement("div",null,r.a.createElement("div",{className:p.toolbar}),r.a.createElement(du.a,null),r.a.createElement(Br.a,null,r.a.createElement(uu,{link:"/instructor-panel/courses",notSelected:!!o},r.a.createElement(Mr.a,{button:!0,onClick:function(e){m(["Courses","New course"],"modules","exitCourse")}},r.a.createElement(us.a,null,r.a.createElement(Kl.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.courses")}))),r.a.createElement(uu,{link:"/account"},r.a.createElement(Mr.a,{onClick:function(){m(["Courses","New course"],"modules","exitCourse")},button:!0},r.a.createElement(us.a,null,r.a.createElement(Vl.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.account")}))),r.a.createElement(uu,{link:"/configuration"},r.a.createElement(Mr.a,{onClick:function(){m(["Courses","New course"],"modules","exitCourse")},button:!0},r.a.createElement(us.a,null,r.a.createElement(iu.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.config")}))),r.a.createElement(uu,{link:"/logout"},r.a.createElement(Mr.a,{button:!0,onClick:n},r.a.createElement(us.a,null,r.a.createElement(Yl.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.logout")}))),r.a.createElement(du.a,null),r.a.createElement(Mr.a,{className:p.blueHeader},r.a.createElement(lr.a,{primary:o.courseName,className:p.whiteColor})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m([""],"modules")},className:"modules"===a?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(tu.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.modules")})),r.a.createElement(Mr.a,{button:!0,onClick:function(e){m(["Lessons","New lesson"],"lesson")},className:"lesson"===a?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(Cs.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.lessons")})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m(["Assignments","New assignment","Question bank"],"assignment")},className:"assignment"===a?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(ws.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.assignments")})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m(["Tests","New test","Question bank"],"test")},className:"test"===a?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(Ss.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.tests")})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m(["Tests","Assignments"],"grade")},className:"grade"===a?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(au.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.grades")})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m(["Contacts","Chat"],"chat")},className:"chat"===a?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(Oo.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.chat")})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m(["Students","Enrollment requests"],"student")},className:"student"===a?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(ou.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.students")})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m(["",""],"resources")},className:"resources"===a?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(Xl.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.resources")}))),r.a.createElement(du.a,null),r.a.createElement(pu,null))})),gu=Object(c.b)((function(e){return{course:e.common.selectedCourse,coursePanel:e.common.coursePanel,testInSession:e.studentTest.testInSession}}),(function(e){return{exitCourse:function(){e({type:"RETURN_TO_COURSES"})},setTabLabels:function(t){return e(je(t))},setTab:function(t){return e(Re(t))},setPanel:function(t){return e(Ue(t))}}}))((function(e){var t=e.mobileOpen,n=e.onHandleDrawerToggle,a=e.setPanel,o=e.setTabLabels,s=e.setTab,i=e.exitCourse,c=e.testInSession,l=e.coursePanel,u=e.course,d=Object(St.a)("common").t,m=function(e,r,c){o(e),s(0),a(r),t&&n(),c&&i()},p=mu();return r.a.createElement("div",null,r.a.createElement("div",{className:p.toolbar}),r.a.createElement(du.a,null),r.a.createElement(Br.a,null,!c&&r.a.createElement(v,null,r.a.createElement(uu,{link:"/student-panel/courses",notSelected:!!u},r.a.createElement(Mr.a,{button:!0,onClick:function(){m(["All courses","Your courses"],"modules","exitCourse")}},r.a.createElement(us.a,null,r.a.createElement(Kl.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.courses")}))),r.a.createElement(uu,{link:"/account"},r.a.createElement(Mr.a,{onClick:function(){m(["All courses","Your courses"],"modules","exitCourse")},button:!0},r.a.createElement(us.a,null,r.a.createElement(Vl.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.account")}))),r.a.createElement(uu,{link:"/configuration"},r.a.createElement(Mr.a,{onClick:function(){m(["All courses","Your courses"],"modules","exitCourse")},button:!0},r.a.createElement(us.a,null,r.a.createElement(iu.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.config")})))),r.a.createElement(uu,{link:"/logout"},r.a.createElement(Mr.a,{button:!0,onClick:n},r.a.createElement(us.a,null,r.a.createElement(Yl.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.logout")}))),r.a.createElement(du.a,null),r.a.createElement(Mr.a,{className:p.blueHeader},r.a.createElement(lr.a,{primary:"".concat(u.courseName," "),className:p.whiteColor})),!c&&r.a.createElement(v,null,r.a.createElement(Mr.a,{button:!0,onClick:function(){m([""],"modules")},className:"modules"===l?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(tu.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.modules")})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m([""],"lesson")},className:"lesson"===l?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(Cs.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.lessons")})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m(["Assignments","Completed assignments"],"assignment")},className:"assignment"===l?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(ws.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.assignments")})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m(["Tests","Completed tests"],"test")},className:"test"===l?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(Ss.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.tests")})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m(["Contacts","Chat"],"chat")},className:"chat"===l?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(Oo.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.chat")})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m([""],"progressReport")},className:"progressReport"===l?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(au.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.progressReport")})),r.a.createElement(Mr.a,{button:!0,onClick:function(){m(["",""],"resources")},className:"resources"===l?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(Xl.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.resources")}))),!(c||{}).blockedNotes&&c&&r.a.createElement(v,null,r.a.createElement(Mr.a,{button:!0,onClick:function(){m([""],"testLesson")},className:"testLesson"===l?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(Cs.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.lessons")})),r.a.createElement(Mr.a,{button:!0,onClick:function(e){m([""],"testSession")},className:"testSession"===l?p.primaryColor:""},r.a.createElement(us.a,null,r.a.createElement(Ss.a,null)),r.a.createElement(lr.a,{primary:d("layout.drawer.test")})))),r.a.createElement(du.a,null),r.a.createElement(pu,null))})),bu=Object(c.b)((function(e){return{course:e.common.selectedCourse,token:e.authentication.token,userId:e.authentication.userId}}),(function(e){return{exitCourse:function(){e({type:"RETURN_TO_COURSES"})},setTab:function(t){return e(Re(t))},setCourseFormPage:function(t){return e(R(t))},cancelEditing:function(){return e({type:"CANCEL_EDITING"})},setTabLabels:function(t){return e(je(t))}}}))((function(e){var t=e.course,n=e.setTab,a=e.cancelEditing,o=e.setCourseFormPage,s=e.setTabLabels,i=e.onHandleDrawerToggle,c=Object(St.a)("common").t,l=mu(),u=function(){a(),o(1),s(["Courses","New course"]),n(0)};return r.a.createElement("div",null,r.a.createElement("div",{className:l.toolbar}),r.a.createElement(du.a,null),r.a.createElement(Br.a,null,r.a.createElement(uu,{link:"/instructor-panel/courses",notSelected:!!t},r.a.createElement(Mr.a,{button:!0,onClick:u},r.a.createElement(us.a,null,r.a.createElement(Kl.a,null)),r.a.createElement(lr.a,{primary:c("layout.drawer.courses")}))),r.a.createElement(uu,{link:"/account"},r.a.createElement(Mr.a,{button:!0,onClick:u},r.a.createElement(us.a,null,r.a.createElement(Vl.a,null)),r.a.createElement(lr.a,{primary:c("layout.drawer.account")}))),r.a.createElement(uu,{link:"/configuration"},r.a.createElement(Mr.a,{button:!0,onClick:u},r.a.createElement(us.a,null,r.a.createElement(iu.a,null)),r.a.createElement(lr.a,{primary:c("layout.drawer.config")}))),r.a.createElement(uu,{link:"/logout"},r.a.createElement(Mr.a,{button:!0,onClick:i},r.a.createElement(us.a,null,r.a.createElement(Yl.a,null)),r.a.createElement(lr.a,{primary:c("layout.drawer.logout")})))),r.a.createElement(du.a,null),r.a.createElement(pu,null))})),hu=Object(c.b)((function(e){return{course:e.common.selectedCourse,coursePanel:e.common.coursePanel,testInSession:e.studentTest.testInSession,token:e.authentication.token,userId:e.authentication.userId}}),(function(e){return{exitCourse:function(){e({type:"RETURN_TO_COURSES"})},setPanel:function(t){return e(Ue(t))},setTabLabels:function(t){return e(je(t))},setTab:function(t){return e(Re(t))}}}))((function(e){e.mobileOpen,e.setPanel;var t=e.course,n=e.onHandleDrawerToggle,a=(e.setTab,e.setTabLabels,e.userId,e.token,Object(St.a)("common").t),o=mu();return r.a.createElement(v,null,r.a.createElement("div",{style:{overflowX:"hidden"},className:o.toolbar}),r.a.createElement(du.a,null),r.a.createElement(Br.a,null,r.a.createElement(v,null,r.a.createElement(uu,{notSelected:!!t,link:"/student-panel/courses"},r.a.createElement(Mr.a,{button:!0},r.a.createElement(us.a,null,r.a.createElement(Kl.a,null)),r.a.createElement(lr.a,{primary:a("layout.drawer.courses")})))),r.a.createElement(uu,{link:"/account"},r.a.createElement(Mr.a,{button:!0},r.a.createElement(us.a,null,r.a.createElement(Vl.a,null)),r.a.createElement(lr.a,{primary:a("layout.drawer.account")}))),r.a.createElement(uu,{link:"/configuration"},r.a.createElement(Mr.a,{button:!0},r.a.createElement(us.a,null,r.a.createElement(iu.a,null)),r.a.createElement(lr.a,{primary:a("layout.drawer.config")}))),r.a.createElement(uu,{link:"/logout"},r.a.createElement(Mr.a,{button:!0,onClick:n},r.a.createElement(us.a,null,r.a.createElement(Yl.a,null)),r.a.createElement(lr.a,{primary:a("layout.drawer.logout")})))),r.a.createElement(du.a,null),r.a.createElement(pu,null))})),Eu=n(57),vu=n.n(Eu),yu=n(328),Tu=n.n(yu),Su=n(649),ku=n.n(Su),wu=function(){var e=mu();return vu.a.createElement("div",null,vu.a.createElement("div",{className:e.toolbar}),vu.a.createElement(du.a,null),vu.a.createElement(Br.a,null,vu.a.createElement(uu,{link:"/account"},vu.a.createElement(Mr.a,{button:!0},vu.a.createElement(us.a,null,vu.a.createElement(Vl.a,null)),vu.a.createElement(lr.a,{primary:"Account"}))),vu.a.createElement(uu,{link:"/logout"},vu.a.createElement(Mr.a,{button:!0},vu.a.createElement(us.a,null,vu.a.createElement(Yl.a,null)),vu.a.createElement(lr.a,{primary:"Logout"}))),vu.a.createElement(Mr.a,{button:!0},vu.a.createElement(us.a,null,vu.a.createElement(Tu.a,null)),vu.a.createElement(lr.a,{primary:"Mail"}))),vu.a.createElement(du.a,null),vu.a.createElement(Br.a,null,["All mail","Trash","Spam"].map((function(e,t){return vu.a.createElement(Mr.a,{button:!0,key:e},vu.a.createElement(us.a,null,"All mail"===e?vu.a.createElement(ku.a,null):vu.a.createElement(Tu.a,null)),vu.a.createElement(lr.a,{primary:e}))}))))},Ou=n(1261),Cu=n(1255),xu=Object(d.h)(Object(c.b)((function(e){return{course:e.common.selectedCourse,courses:e.common.courses,lessons:e.common.courseLessons,coursePanel:e.common.coursePanel,selectedChatUser:e.common.selectedChatUser,editing:e.common.editing,tab:e.common.tab,tabLabels:e.common.tabLabels,token:e.authentication.token,userId:e.authentication.userId,studentLoggedIn:e.authentication.studentLoggedIn,instructorLoggedIn:e.authentication.instructorLoggedIn,testInSession:e.studentTest.testInSession,notifications:e.common.notifications,configuration:e.common.configuration}}),(function(e){return{setCourseForm:function(){return e({type:"SET_CREATE_COURSE_FORM"})},setLessonForm:function(t,n){return e({type:"SET_CREATE_LESSON_FORM",initialValues:{slides:[{}],published:!1,lessons:t,course:n}})},setTab:function(t){e(Re(t))},setTabLabels:function(t){e(je(t))},cancelEditing:function(){e({type:"CANCEL_EDITING"})},resetTabContent:function(){e({type:"CLEAR_INSTRUCTOR_TAB_CONTENT"}),e(R(1))},fetchNotifications:function(t){e(Ae(t))},markAsSeen:function(t,n){e(De(t,n))},updateActivity:function(t,n){console.log("should update activity: ",t,n),e(Se(t,n))}}}))((function(e){var t=e.width,n=(e.match,e.location),a=e.tab,o=e.tabLabels,s=e.coursePanel,i=e.selectedChatUser,c=e.course,l=e.courses,u=e.lessons,d=(e.userId,e.token,e.studentLoggedIn),m=e.instructorLoggedIn,p=e.testInSession,f=(e.notifications,e.setTab),g=e.resetTabContent,b=e.setCourseForm,h=e.setLessonForm,E=(e.setTestForm,e.setTabLabels),v=e.cancelEditing,y=e.configuration,T=Object(St.a)("common"),S=T.t,k=(T.i18n,mu());if((d||m)&&c&&"modules"===s)return null;if(c&&"resources"===s)return null;if(d&&c&&"lesson"===s)return null;if(d&&c&&"progressReport"===s)return null;if(d&&p)return null;if("/account"===n.pathname)return null;if("/configuration"===n.pathname)return null;var w=!i&&"chat"===s||(y||{}).instructorCoursesLimit<=(l||[]).length&&(y||{}).isInstructorCoursesLimit;return r.a.createElement(To.a,{className:t<500?k.bottomFixed:k.appBar,position:"static",color:"default"},!("category"===s)&&r.a.createElement(Ou.a,{centered:!0,value:a,onChange:function(e,t){a!==t&&(f(t),d||(g(),1!==t||c||b(),1===t&&"lesson"===s&&c&&h(u,c),0!==t||c||(E(["Courses","New course"]),v()),2===t&&"test"===s&&m&&(E(["Tests","New test","Question bank"]),v()),2===t&&"assignment"===s&&m&&(E(["Assignments","New assignment","Question bank"]),v()),0===t&&"lesson"===s&&m&&(E(["Lessons","New lesson"]),v()),0===t&&"test"===s&&m&&(E(["Tests","New test","Question bank"]),v()),0===t&&"assignment"===s&&m&&(E(["Assignments","New assignment","Question bank"]),v()),0===t&&"student"===s&&m&&(E(["Students","Enrollment requests"]),v())))},scrollButtons:"on",indicatorColor:"primary",textColor:"primary","aria-label":"scrollable force tabs example"},r.a.createElement(Cu.a,{label:r.a.createElement(et.a,{className:t<500?k.smallFontSize:""},S("layout.tabBar.".concat(((o||[])[0]||"").replace(" ","").toLowerCase())))}),r.a.createElement(Cu.a,{disabled:w,label:r.a.createElement(et.a,{className:t<500?k.smallFontSize:""},S("layout.tabBar.".concat(((o||[])[1]||"").replace(" ","").toLowerCase())))}),("test"===s&&c&&m||"assignment"===s&&c&&m)&&r.a.createElement(Cu.a,{label:r.a.createElement(et.a,{className:t<500?k.smallFontSize:""},S("layout.tabBar.".concat(((o||[])[2]||"").replace(" ","").toLowerCase())))})))}))),Au=n(1270),Fu=n(1265),Du=n(59),_u=function(e){var t=e.container,n=e.children,a=e.onHandleDrawerToggle,o=e.mobileOpen,s=mu();return r.a.createElement("nav",{className:s.drawer,"aria-label":"mailbox folders"},r.a.createElement(Fu.a,{smUp:!0,implementation:"css"},r.a.createElement(Au.a,{style:{overflowX:"hidden"},container:t,variant:"temporary",anchor:"rtl"===Object(Du.a)().direction?"right":"left",open:o,onClose:a,classes:{paper:s.drawerPaper},ModalProps:{keepMounted:!0}},n)),r.a.createElement(Fu.a,{xsDown:!0,implementation:"css"},r.a.createElement(Au.a,{classes:{paper:s.drawerPaper},variant:"permanent",open:!0},n)))},Iu=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmCheckbox:!1},e.handleChange=function(t){e.setState({confirmCheckbox:t.target.checked})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalDocument,n=e.deleteCourse,a=e.token,o=e.deActivateCourse,s=e.t;return r.a.createElement("div",null,r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},"".concat(s("confirmations.deleteCourse.youAreDeleting")," ").concat((t||{}).courseName)),r.a.createElement(et.a,{paragraph:!0,variant:"body1",gutterBottom:!0},s("confirmations.deleteCourse.deletingCourseWillDeleteContent")),r.a.createElement(et.a,{paragraph:!0,variant:"body1",gutterBottom:!0},s("confirmations.deleteCourse.studentsNoAccess")),r.a.createElement(et.a,{paragraph:!0,variant:"body1",gutterBottom:!0},s("confirmations.deleteCourse.courseRemovedFromRecord")),r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:this.state.confirmCheckbox,onChange:this.handleChange,value:"checked"}),label:s("confirmations.deleteCourse.agree")}),r.a.createElement(ot.a,{disabled:!this.state.confirmCheckbox,variant:"outlined",color:"secondary",type:"button",title:"Delete Course",onClick:function(){n(t._id,a)}},s("confirmations.deleteCourse.deleteCourse")),(t||{}).courseActive&&r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.deleteCourse.deactivateAlternative")),r.a.createElement(et.a,{paragraph:!0,variant:"body1",gutterBottom:!0},s("confirmations.deleteCourse.courseRemainsAccessibleToYou")),r.a.createElement(et.a,{paragraph:!0,variant:"body1",gutterBottom:!0},s("confirmations.deleteCourse.wontEraseContent")),r.a.createElement(ot.a,{variant:"outlined",color:"secondary",type:"button",title:"Deactivate Course",fullWidth:!0,onClick:function(){o(t._id,a)}},s("confirmations.deleteCourse.deactivate"))))}}]),n}(a.Component),ju=Object(c.b)((function(e){return{token:e.authentication.token,modalDocument:e.common.modalDocument}}),(function(e){return{deleteCourse:function(t,n){return e(function(e,t){return{type:"DELETE_COURSE_START",payload:{courseId:e,token:t}}}(t,n))},deActivateCourse:function(t,n){return e(B(t,n))}}}))(Object(Ia.a)("common")(Iu)),Ru=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmCheckbox:!1},e.handleChange=function(t){e.setState({confirmCheckbox:t.target.checked})},e}return Object(b.a)(n,[{key:"componentWillUnmount",value:function(){console.log("unmounted lesson confirmation delete")}},{key:"render",value:function(){var e=this.props,t=e.deleteLesson,n=e.modalDocument,a=void 0===n?{}:n,o=e.token,s=e.t;return r.a.createElement("div",null,r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},"".concat(s("confirmations.deleteLesson.youAreDeleting")," ").concat(a.lessonName)),r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.deleteLesson.noAccess")),r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:this.state.confirmCheckbox,onChange:this.handleChange,value:"checked"}),label:s("confirmations.deleteLesson.agree")}),r.a.createElement(ot.a,{disabled:!this.state.confirmCheckbox,variant:"outlined",color:"secondary",type:"button",title:"Delete Lesson",onClick:function(){t(a._id,o)}},s("confirmations.deleteLesson.deleteLesson")))}}]),n}(a.Component),Nu=Object(c.b)((function(e){return{token:e.authentication.token,modalDocument:e.common.modalDocument}}),(function(e){return{deleteLesson:function(t,n){e(function(e,t){return{type:"DELETE_LESSON_START",payload:{lessonId:e,token:t}}}(t,n))}}}))(Object(Ia.a)("common")(Ru)),Lu=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmCheckbox:!1},e.handleChange=function(t){e.setState({confirmCheckbox:t.target.checked})},e.resetCheckbox=function(t){e.setState({confirmCheckbox:!1})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalDocument,n=e.token,a=e.deleteTest,o=e.t;return r.a.createElement("div",null,r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},t.assignment?o("confirmations.deleteTest.assignmentGradeRemoved"):o("confirmations.deleteTest.testGradeRemoved")),r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},o("confirmations.deleteTest.questionBankNotAffected")),r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:this.state.confirmCheckbox,onChange:this.handleChange,value:"checked"}),label:o("confirmations.deleteTest.agree")}),r.a.createElement(ot.a,{disabled:!this.state.confirmCheckbox,variant:"outlined",color:"secondary",type:"button",title:"Delete Test",onClick:function(){a(t._id,n)}},t.assignment?o("confirmations.deleteTest.deleteAssignment"):o("confirmations.deleteTest.deleteTest")))}}]),n}(a.Component),Pu=Object(c.b)((function(e){return{token:e.authentication.token,modalDocument:e.common.modalDocument}}),(function(e){return{deleteTest:function(t,n){return e(ne(t,n))}}}))(Object(Ia.a)("common")(Lu)),Bu=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmCheckbox:!1,message:""},e.handleCheckbox=function(t){e.setState({confirmCheckbox:t.target.checked})},e.handleMessage=function(t){e.setState({message:t.target.value})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.modalDocument,a=t.token,o=t.resetTest,s=t.course,i=t.t;return r.a.createElement("div",null,n.student?r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},n.assignment?i("confirmations.resetTest.resetingAssignment"):i("confirmations.resetTest.resetingTest")),r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},"".concat(n.student.firstName," ").concat(n.assignment?i("confirmations.resetTest.willBeAbleAssignment"):i("confirmations.resetTest.willBeAbleTest"))),r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},i("confirmations.resetTest.gradeWillBeDeleted")),r.a.createElement(di,{label:i("confirmations.resetTest.reason"),options:{multiline:!0,rows:3,variant:ma.a},textLabel:!0,input:{value:this.state.message,onChange:this.handleMessage}})):r.a.createElement(v,null,r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},n.assignment?i("confirmations.resetTest.resetingAssignment"):i("confirmations.resetTest.resetingTest")),r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},n.assignment?i("confirmations.resetTest.everyStudentCanRetakeAssignment"):i("confirmations.resetTest.everyStudentCanRetakeTest")),r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},i("confirmations.resetTest.studentsGradeWillBeErased"))),r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:this.state.confirmCheckbox,onChange:this.handleCheckbox,value:"checked"}),label:i("confirmations.resetTest.agree")}),r.a.createElement(ot.a,{disabled:!this.state.confirmCheckbox,variant:"outlined",color:"secondary",type:"button",title:"Delete Test",onClick:function(){o(n._id,(n.student||{})._id,s._id,e.state.message,a)}},n.assignment?i("confirmations.resetTest.resetAssignment"):i("confirmations.resetTest.resetTest")))}}]),n}(a.Component),Mu=Object(c.b)((function(e){return{token:e.authentication.token,modalDocument:e.common.modalDocument,course:e.common.selectedCourse}}),(function(e){return{resetTest:function(t,n,a,r,o){return e(function(e,t,n,a,r){return{type:"RESET_TEST_START",payload:{testId:e,token:r,studentId:t,courseId:n,message:a}}}(t,n,a,r,o))}}}))(Object(Ia.a)("common")(Bu)),qu=n(233),Uu=n.n(qu),Qu=n(651),Wu=n.n(Qu),Hu=function(e){return e.show?r.a.createElement("div",{className:Wu.a.Backdrop,onClick:e.clicked}):null},zu=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).handleCloseModal=function(){var e=a.props,t=e.modalType,n=e.token,r=e.modules,o=e.modulesFormValues,s=e.course,i=e.updateModules,c=e.cancelEditing,l=e.closeModal,u=e.accountFormErrors,d=void 0===u?{}:u,m=e.accountFormValues,p=void 0===m?{}:m,f=e.touchField,g=e.clearLoadedData;if("contents"===t&&r&&i(o,n,!!r._id,s._id),"question"===t&&(c(),g()),"gradeTest"===t&&g(),console.log("accountFormErrors",d),"studentDocuments"===t&&!d.documentsAreValid)return a.setState({isAccountFormValid:!1}),void p.documents.forEach((function(e,t){f("documents.".concat(t,".document")),f("documents.".concat(t,".documentType"))}));l()},a.state={isAccountFormValid:!0},a}return Object(b.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,a=n.isModal,r=n.children;return e.show!==a||e.children!==r}},{key:"render",value:function(){var e=this.props,t=e.isModal,n=e.large,a=e.header,o=e.children,s=e.modalType,i=e.t,c=e.accountFormErrors,l=void 0===c?{}:c;if(!t)return null;var u=!this.state.isAccountFormValid&&!l.documentsAreValid;return r.a.createElement(v,null,r.a.createElement(Hu,{show:t,clicked:this.handleCloseModal}),r.a.createElement("div",{className:[Uu.a.Modal,n?Uu.a.Large:Uu.a.Regular].join(" "),style:{transform:t?"translateY(0)":"translateY(-100vh)",opacity:t?"1":"0"}},r.a.createElement("div",{className:Uu.a.Header},r.a.createElement(et.a,{variant:"h5",style:{margin:"6px 0",textAlign:"center"},paragraph:!0},a)),r.a.createElement("div",{className:Uu.a.Main},o),u&&"studentDocuments"===s&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},r.a.createElement(et.a,{color:"error"},"".concat(i("account.errors.correctTheFormAtDocument")," ").concat(l.atIndex+1,", ").concat(i("account.errors.selectDocTypeAndDoNotExceed")," 25Mb"))),r.a.createElement(yl,{modal:!0,isError:u&&"studentDocuments"===s,clicked:this.handleCloseModal},i("modal.close"))))}}]),n}(a.Component),Gu=Object(c.b)((function(e){var t;return t={modulesFormValues:Object(Ve.a)("category")(e),accountFormValues:Object(Ve.a)("accountForm")(e),accountFormErrors:Object(Ft.a)("accountForm")(e),modules:e.common.modules,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn,token:e.authentication.token,isModal:e.common.isModal,modalType:e.common.modalType,course:e.common.selectedCourse},Object(po.a)(t,"token",e.authentication.token),Object(po.a)(t,"loading",e.instructorCourse.loading||e.instructorTest.loading||e.instructorQuestion.loading||e.instructorLesson.loading||e.common.loading||e.studentCourse.loading||e.studentTest.loading),t}),(function(e){return{closeModal:function(){e({type:"CLOSE_MODAL"})},touchField:function(t){return e(Object(Dt.d)("accountForm",t))},cancelEditing:function(){return e({type:"CANCEL_EDITING"})},updateModules:function(t,n,a,r){return e(X(t,n,a,r))},clearLoadedData:function(){return e(W())}}}))(Object(Ia.a)("common")(zu)),Vu=n(135),$u=n.n(Vu),Yu=function(e,t){var n;return"mc"===t&&(n=0),"essay"===t&&(n=1),"speaking"===t&&(n=2),"fillblanks"===t&&(n=3),"test"===t&&(n=4),{audioMaterials:((e||{}).audioMaterials||[])[n]||{},readingMaterials:((e||{}).readingMaterials||[])[n]||{}}},Ju=n(47),Ku=n.n(Ju),Zu=Object(c.b)((function(e){return{course:e.common.selectedCourse}}))((function(e){var t=e.test,n=e.student,a=e.startTest,o=e.course,s=Object(St.a)().t,i=parseFloat(t.weight),c=o.tests.reduce((function(e,t){return e+t.weight}),0),l=parseFloat((i/c*100).toFixed(2)).toString(),u=!t.assignment,d=[n?[s("testInfo.student"),"".concat(n.firstName," ").concat(n.lastName)]:null,n?[s("testInfo.studentId"),"".concat((n._id||"").replace(/\D/g,""))]:null,[s(u?"testInfo.test":"testInfo.assignment"),t.testName],[s("testInfo.weight"),"".concat(l,"%")],u?[s("testInfo.lessonsAllowed"),t.blockedNotes?s("testInfo.no"):s("testInfo.yes")]:null,u?[s("testInfo.timer"),t.timer?"".concat(t.timer," ").concat(1==t.timer?s("testInfo.minute"):s("testInfo.plural.minute")):s("testInfo.no")]:null,u?[s("testInfo.type"),s("testInfo.".concat(t.testType))]:null,u?[s("testInfo.passingRequired"),t.passingRequired?s("testInfo.yes"):s("testInfo.no")]:null,t.passingGrade?[s("testInfo.passingGrade"),"".concat(t.passingGrade,"%")]:null,u?null:[s("testInfo.lateSubmissionAllowed"),t.allowLateSubmission?s("testInfo.yes"):s("testInfo.no")],!u&&t.allowLateSubmission?[s("testInfo.dailyPenalty"),"".concat(t.latePenalty,"%")]:null,!u&&t.allowLateSubmission?[s("testInfo.maxLateDaysAllowed"),t.lateDaysAllowed]:null,t.availableOnDate&&!a?[s("testInfo.availableOnDate"),ct()(parseInt(t.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")]:null,t.dueDate?[s(u?"testInfo.closeDate":"testInfo.dueDate"),ct()(parseInt(t.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")]:null,t.gradeReleaseDate?[s("testInfo.gradeReleaseDate"),ct()(parseInt(t.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")]:null].filter((function(e){return e}));return r.a.createElement("div",{style:{backgroundColor:"white",padding:"5px",borderRadius:"4px"}},r.a.createElement(ni.a,{className:Ku.a.table,"aria-label":"simple table"},r.a.createElement(ai.a,null,d.map((function(e,t){return r.a.createElement(oi.a,{key:t,className:Ku.a.MuiTableRow},r.a.createElement(ri.a,{component:"th",scope:"row"},e[0]),r.a.createElement(ri.a,{align:"right"},e[1]))})))),t.notes&&r.a.createElement(di,{label:s("testForm.fields.notes"),input:{value:t.notes},options:{multiline:!0,rows:3,variant:ma.a,readOnly:!0},textLabel:!0}))})),Xu=n(75),ed=n.n(Xu),td=n(76),nd=n.n(td),ad=Object(c.b)((function(e){return{modalDocument:e.common.modalDocument,course:e.common.selectedCourse,width:e.common.width}}))((function(e){var t=e.modalDocument,n=e.width,a=Object(Du.a)(),o=r.a.useState([0,0,0]),s=Object(mo.a)(o,2),i=s[0],c=s[1],l=Object(St.a)().t,u=function(e){c((function(t){var n=Object(Pr.a)(t);return n[e]=n[e]+1,n}))},d=function(e){var t={background:"#1976d2",borderRadius:4,color:"white",padding:10};return"question"===e&&(t.background="#1976d2"),"solution"===e&&(t.background="#388e3c"),t},m=function(e){c((function(t){var n=Object(Pr.a)(t);return n[e]=n[e]-1,n}))},p={padding:10,borderRadius:4,backgroundColor:"white"},f=[{id:"".concat(l(n>560?"confirmations.takeTest.mc":"confirmations.takeTest.mcShort")," ").concat(t.sectionWeights.mcSection,"%"),label:l("confirmations.takeTest.mc"),value:t.sectionWeights.mcSection,color:"hsl(128, 70%, 50%)"},{id:"".concat(l("confirmations.takeTest.essay")," ").concat(t.sectionWeights.essaySection,"%"),label:l("confirmations.takeTest.essay"),value:t.sectionWeights.essaySection,color:"hsl(88, 70%, 50%)"},{id:"".concat(l("confirmations.takeTest.speaking")," ").concat(t.sectionWeights.speakingSection,"%"),label:l("confirmations.takeTest.speaking"),value:t.sectionWeights.speakingSection,color:"hsl(245, 70%, 50%)"},{id:"".concat(l(n>560?"confirmations.takeTest.fillblanks":"confirmations.takeTest.fillblanksShort")," ").concat(t.sectionWeights.fillBlankSection,"%"),label:l("confirmations.takeTest.fillblanks"),value:t.sectionWeights.fillBlankSection,color:"hsl(340, 70%, 50%)"}].filter((function(e){return e.value})),g=(t.fillInBlanksQuestions||"").text,b=(t.fillInBlanksQuestions||"").blanks,h=Ki()(g||"",/<mark [^>]+>(.*?)<\/mark>/g,(function(e,t){var n=t/2-.5,a=((b||[])[n]||{}).correctAnswer;return!0===((b||[])[n]||{}).selectableAnswer?r.a.createElement(v,{key:e+n},r.a.createElement("span",{className:$u.a.BlankPreview},n+1," "),((b||[])[n]||{}).audio&&r.a.createElement("td",{dangerouslySetInnerHTML:{__html:ac.a.sanitize('\n                  <audio id="audio['.concat(n,']" src="').concat(((b||[])[n]||{}).audio,'"> </source>\n                  </audio>\n                   <span class="').concat($u.a.Pointer,'" onClick="(function(){\n                     const audio = document.getElementById(\'audio[').concat(n,']\');\n                     audio.play()\n                     return false;\n                     })();return false;" >\n                     <i class="fa fa-volume-down"></i>\n                     </span>\n                '),{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}),r.a.createElement("select",{readOnly:!0,value:l("testReview.selectCorrectAnswer"),className:$u.a.SelectField},r.a.createElement("option",{disabled:!0},l("testReview.selectCorrectAnswer")),r.a.createElement("option",{className:$u.a.CorrectAnswerHighlight,disabled:!0,value:"Correct Option"},a),(((b||[])[n]||{}).incorrectAnswers||[])[0]&&r.a.createElement("option",{disabled:!0,value:"Incorrect Option 1"},(((b||[])[n]||{}).incorrectAnswers||[])[0]),(((b||[])[n]||{}).incorrectAnswers||[])[1]&&r.a.createElement("option",{disabled:!0,value:"Incorrect Option 2"},(((b||[])[n]||{}).incorrectAnswers||[])[1]),(((b||[])[n]||{}).incorrectAnswers||[])[2]&&r.a.createElement("option",{disabled:!0,value:"Incorrect Option 3"},(((b||[])[n]||{}).incorrectAnswers||[])[2]))):!1===(b[n]||{}).selectableAnswer?r.a.createElement(v,{key:e+n},r.a.createElement("span",{className:$u.a.Inline},r.a.createElement("span",{className:$u.a.BlankPreview},n+1," "),((b||[])[n]||{}).audio&&r.a.createElement(v,null,r.a.createElement("td",{dangerouslySetInnerHTML:{__html:ac.a.sanitize('\n                        <audio id="audio['.concat(n,']" src="').concat(((b||[])[n]||{}).audio,'"> </source>\n                        </audio>\n                        <span class="').concat($u.a.Pointer,'" onClick="(function(){\n                        const audio = document.getElementById(\'audio[').concat(n,']\');\n                        audio.play()\n                        return false;\n                        })();return false;" >\n                        <i class="fa fa-volume-down"></i>\n                        </span>\n                    '),{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}})),r.a.createElement("input",{readOnly:!0,type:"text",className:$u.a.InputField,value:"".concat(a)}))):void 0})),E=[];h.forEach((function(e,t){"string"===typeof e?E.push(e):E.push($i.a.renderToString(e))}));var y=(E||"").join(""),T=function(e){document.getElementById(e).play()};return r.a.createElement(v,null,r.a.createElement(Zu,{test:t}),Object.values(t.sectionWeights).filter((function(e){return e})).length>1&&r.a.createElement("div",{style:{height:n>450?300:200}},r.a.createElement(ii,{data:f})),r.a.createElement(Qs,{index:"testSectionReview",summary:t.assignment?l("testReview.assignmentResources"):l("testReview.testResources"),disabled:!Yu(t,"test").readingMaterials.content&&!Yu(t,"test").audioMaterials.audio},r.a.createElement(Vc,{audioId:"testAudioMaterialReviewTest",pdfIndex:4,readingContent:Yu(t,"test").readingMaterials.content,audioSource:Yu(t,"test").audioMaterials.audio,onPreview:function(){return T("testAudioMaterialReviewTest")},fileUpload:Yu(t,"test").readingMaterials.fileUpload})),(t.sectionWeights||{}).mcSection&&r.a.createElement(v,null,r.a.createElement("div",{style:Object(At.a)({marginTop:20},p)},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},l("testReview.multiplechoicesection")),r.a.createElement(Qs,{disabled:!Yu(t,"mc").readingMaterials.content&&!Yu(t,"mc").audioMaterials.audio,index:"mcSectionPreview",summary:l("testReview.sectionResources")},r.a.createElement(Vc,{audioId:"mcAudioMaterialPreviewTest",pdfIndex:0,readingContent:Yu(t,"mc").readingMaterials.content,audioSource:Yu(t,"mc").audioMaterials.audio,onPreview:function(){return T("mcAudioMaterialPreviewTest")},fileUpload:Yu(t,"mc").readingMaterials.fileUpload})),(t.multipleChoiceQuestions||[]).map((function(e,t){return t!==i[0]?null:r.a.createElement(v,{key:e+t},r.a.createElement(et.a,{style:{marginTop:20},variant:"subtitle1",gutterBottom:!0},"".concat(l("testReview.question")," ").concat(t+1)),r.a.createElement("div",{style:d("question"),dangerouslySetInnerHTML:{__html:ac.a.sanitize(e.question)}}),e.answerOptions.map((function(t,n){return r.a.createElement(et.a,{className:e.correctAnswers.includes((n+1).toString())?$u.a.GreenText:$u.a.RedText,key:t+n,variant:"body2",gutterBottom:!0},t)})),e.solution&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(et.a,{variant:"subtitle1",gutterBottom:!0},l("testReview.solution")),r.a.createElement("div",{style:d("solution")},r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},e.solution))))})),r.a.createElement(Yr.a,{steps:t.multipleChoiceQuestions.length,position:"static",variant:"text",activeStep:i[0],nextButton:r.a.createElement(ot.a,{size:"small",onClick:function(){return u(0)},disabled:i[0]===t.multipleChoiceQuestions.length-1},l("testReview.buttons.next"),"rtl"===a.direction?r.a.createElement(ed.a,null):r.a.createElement(nd.a,null)),backButton:r.a.createElement(ot.a,{size:"small",onClick:function(){return m(0)},disabled:0===i[0]},"rtl"===a.direction?r.a.createElement(nd.a,null):r.a.createElement(ed.a,null),l("testReview.buttons.back"))}))),(t.sectionWeights||{}).essaySection&&r.a.createElement(v,null,r.a.createElement("div",{style:Object(At.a)({marginTop:20},p)},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},l("testReview.essaysection")),r.a.createElement(Qs,{disabled:!Yu(t,"essay").readingMaterials.content&&!Yu(t,"essay").audioMaterials.audio,index:"essaySectionPreview",summary:l("testReview.sectionResources")},r.a.createElement(Vc,{audioId:"essayAudioMaterialPreviewTest",pdfIndex:1,readingContent:Yu(t,"essay").readingMaterials.content,audioSource:Yu(t,"essay").audioMaterials.audio,onPreview:function(){return T("essayAudioMaterialPreviewTest")},fileUpload:Yu(t,"essay").readingMaterials.fileUpload})),(t.essayQuestions||[]).map((function(e,t){return t!==i[1]?null:r.a.createElement(v,{key:e+t},r.a.createElement(et.a,{style:{marginTop:20},variant:"subtitle1",gutterBottom:!0},"".concat(l("testReview.question")," ").concat(t+1)),r.a.createElement("div",{style:d("question"),dangerouslySetInnerHTML:{__html:ac.a.sanitize(e.question)}}),e.solution&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(et.a,{variant:"subtitle1",gutterBottom:!0},l("testReview.solution")),r.a.createElement("div",{style:d("solution")},r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},e.solution))))})),r.a.createElement(Yr.a,{steps:t.essayQuestions.length,position:"static",variant:"text",activeStep:i[1],nextButton:r.a.createElement(ot.a,{size:"small",onClick:function(){return u(1)},disabled:i[1]===t.essayQuestions.length-1},l("testReview.buttons.next"),"rtl"===a.direction?r.a.createElement(ed.a,null):r.a.createElement(nd.a,null)),backButton:r.a.createElement(ot.a,{size:"small",onClick:function(){return m(1)},disabled:0===i[1]},"rtl"===a.direction?r.a.createElement(nd.a,null):r.a.createElement(ed.a,null),l("testReview.buttons.back"))}))),(t.sectionWeights||{}).speakingSection&&r.a.createElement(v,null,r.a.createElement("div",{style:Object(At.a)({marginTop:20},p)},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},l("testReview.speakingsection")),r.a.createElement(Qs,{index:"speakingSectionPreview",summary:l("testReview.sectionResources"),disabled:!Yu(t,"speaking").readingMaterials.content&&!Yu(t,"speaking").audioMaterials.audio},r.a.createElement(Vc,{audioId:"speakingAudioMaterialPreviewTest",pdfIndex:2,readingContent:Yu(t,"speaking").readingMaterials.content,audioSource:Yu(t,"speaking").audioMaterials.audio,onPreview:function(){return T("speakingAudioMaterialPreviewTest")},fileUpload:Yu(t,"speaking").readingMaterials.fileUpload})),(t.speakingQuestions||[]).map((function(e,t){return t!==i[2]?null:r.a.createElement(v,{key:e+t},r.a.createElement(et.a,{style:{marginTop:20},variant:"subtitle1",gutterBottom:!0},"".concat(l("testReview.question")," ").concat(t+1)),e.question&&r.a.createElement("div",{style:d("question"),dangerouslySetInnerHTML:{__html:ac.a.sanitize(e.question)}}),e.questionAudio&&r.a.createElement("div",null,r.a.createElement("audio",{id:"audioQuestion[".concat(t,"]"),src:e.questionAudio}),r.a.createElement(ot.a,{startIcon:r.a.createElement(al.a,null),variant:"outlined",fullWidth:!0,color:"primary",onClick:function(){T("audioQuestion[".concat(t,"]"))}},l("testReview.buttons.playQuestion"))),e.audio&&r.a.createElement("div",null,r.a.createElement("audio",{id:"audioAnswer[".concat(t,"]"),src:e.audio}),r.a.createElement(ot.a,{startIcon:r.a.createElement(al.a,null),variant:"outlined",fullWidth:!0,color:"primary",onClick:function(){T("audioAnswer[".concat(t,"]"))}},l("testReview.buttons.playAnswer"))),e.solution&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(et.a,{variant:"subtitle1",gutterBottom:!0},l("testReview.solution")),r.a.createElement("div",{style:d("solution")},r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},e.solution))))})),r.a.createElement(Yr.a,{steps:t.speakingQuestions.length,position:"static",variant:"text",activeStep:i[2],nextButton:r.a.createElement(ot.a,{size:"small",onClick:function(){return u(2)},disabled:i[2]===t.speakingQuestions.length-1},l("testReview.buttons.next"),"rtl"===a.direction?r.a.createElement(ed.a,null):r.a.createElement(nd.a,null)),backButton:r.a.createElement(ot.a,{size:"small",onClick:function(){return m(2)},disabled:0===i[2]},"rtl"===a.direction?r.a.createElement(nd.a,null):r.a.createElement(ed.a,null),l("testReview.buttons.back"))}))),(t.sectionWeights||{}).fillBlankSection&&r.a.createElement(v,null,r.a.createElement("div",{style:Object(At.a)({marginTop:20},p)},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},l("testReview.fillintheblankssection")),r.a.createElement(Qs,{index:"fillblanksSectionPreview",summary:l("testReview.sectionResources"),disabled:!Yu(t,"fillblanks").readingMaterials.content&&!Yu(t,"fillblanks").audioMaterials.audio},r.a.createElement(Vc,{audioId:"fillblanksAudioMaterialPreviewTest",pdfIndex:3,readingContent:Yu(t,"fillblanks").readingMaterials.content,audioSource:Yu(t,"fillblanks").audioMaterials.audio,onPreview:function(){return T("fillblanksAudioMaterialPreviewTest")},fileUpload:Yu(t,"fillblanks").readingMaterials.fileUpload})),r.a.createElement("div",{style:{marginTop:20},dangerouslySetInnerHTML:{__html:ac.a.sanitize(y,{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}))))})),rd=n(122),od=n.n(rd),sd=function(e){var t=e.input,n=e.label,a=e.type,o=e.meta,s=o.touched,i=o.error;return r.a.createElement("div",null,r.a.createElement("label",null,n),r.a.createElement("div",null,r.a.createElement("input",Object.assign({className:[od.a.InputField,od.a.FullWidth].join(" ")},t,{placeholder:n,type:a})),s&&i&&r.a.createElement("span",null,i)))},id=function(e){var t=e.clearAnswers,n=e.fields,a=e.t,o=e.meta.error;return r.a.createElement(v,null,r.a.createElement(ot.a,{fullWidth:!0,type:"button",color:"primary",onClick:function(){return n.push()},startIcon:r.a.createElement(ir.a,null),size:"small"},a("questionForm.buttons.addAnswer")),r.a.createElement(et.a,{variant:"body1",style:{fontSize:"0.8rem"},gutterBottom:!0},a("questionForm.writeAnswers")),r.a.createElement(Br.a,null,n.map((function(e,a){return r.a.createElement(Mr.a,{key:a},r.a.createElement(ot.a,{type:"button",title:"Remove Answer",onClick:function(){n.remove(a),t()},color:"secondary",startIcon:r.a.createElement(Ma.a,null)},""),r.a.createElement(ca.a,{name:e,type:"text",component:sd,label:""}))})),o&&r.a.createElement(Mr.a,{className:"error"},o)))},cd=Object(_t.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.clearAnswers,n=e.touchCheckboxes,a=e.formValues,o=void 0===a?{}:a,s=e.path,i=Object(St.a)().t,c=((o.mcQuestion||{}).answers||[]).map((function(e,t){return{label:"".concat(e||""),value:"".concat(t+1),placement:"start",color:"primary",name:"mcQuestion.correctAnswers"}})),l=r.a.createElement(v,null,r.a.createElement(et.a,{variant:"body1",style:{fontSize:"0.8rem"},gutterBottom:!0},i("questionForm.selectCorrectAnswers")),r.a.createElement(ca.a,{name:"mcQuestion.correctAnswers",component:vi,options:c,column:!0,required:!1,onChange:function(){return n("mcQuestion.correctAnswers")}}));return r.a.createElement("div",{className:od.a.QuestionCustomizationContainer},r.a.createElement("div",{className:od.a.TextEditor},r.a.createElement(ca.a,{name:"mcQuestion.question",component:Lr,reduxForm:"questionForm",field:"mcQuestion.question",label:i("questionForm.question"),path:s})),l,r.a.createElement(rr.a,{name:"mcQuestion.answers",clearAnswers:t,component:id,t:i}),r.a.createElement(ca.a,{name:"mcQuestion.solution",component:di,label:i("questionForm.fields.solution"),options:{multiline:!0,rows:3,variant:ma.a},textLabel:!0}))})),ld=Object(c.b)((function(e){return{formValues:Object(Ve.a)("questionForm")(e)}}),(function(e){return{updateTags:function(t){e(Object(Dt.a)("questionForm","tags",t))},clearAnswers:function(){e(Object(Dt.a)("questionForm","mcQuestion.correctAnswers]",[]))},touchCheckboxes:function(t){e(Object(Dt.d)("questionForm",t))}}}))(cd),ud=Object(_t.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.path,n=Object(St.a)().t;return r.a.createElement(v,null,r.a.createElement("div",{className:od.a.TextEditor},r.a.createElement(ca.a,{name:"essayQuestion.question",component:Lr,reduxForm:"questionForm",field:"essayQuestion.question",label:n("questionForm.question"),path:t})),r.a.createElement(ca.a,{name:"essayQuestion.solution",component:di,label:n("questionForm.fields.solution"),options:{multiline:!0,rows:3,variant:ma.a},textLabel:!0}))})),dd=Object(_t.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.changeField,n=e.formValues,o=void 0===n?{}:n,s=e.formErrors,i=void 0===s?{}:s,c=e.makeAudioFieldTouched,l=e.path,u=Object(St.a)().t,d=Object(a.useState)(!1),m=Object(mo.a)(d,2),p=m[0],f=m[1],g=Object(a.useState)(!1),b=Object(mo.a)(g,2),h=b[0],E=b[1];Object(a.useEffect)((function(){return function(){clearTimeout(h)}}),[]);var y={label:u("questionForm.fields.audioQuestion"),checked:!1},T={label:u("questionForm.fields.audioAnswer"),checked:!1},S=(o.speakingQuestion||[])[0]||{},k=S.recordingTimeout,w=S.questionRecordingTimeout,O=S.recorder,C=S.questionRecorder,x=S.questionRecordedBlob,A=S.recordedBlob,F=S.isRecordingQuestion,D=S.isRecording,_=function(e,n,a,r,o){o?("question"===r&&(t("speakingQuestion.".concat(a,".isRecordingQuestion"),o),t("speakingQuestion.".concat(a,".questionRecorder"),e),t("speakingQuestion.".concat(a,".questionRecordingTimeout"),n)),"answer"===r&&(t("speakingQuestion.".concat(a,".isRecording"),!0),t("speakingQuestion.".concat(a,".recorder"),e),t("speakingQuestion.".concat(a,".recordingTimeout"),n))):function(){clearTimeout(h),f(!0);var e=setTimeout((function(){f(!1)}),5e3);E(e)}()},I=function(e,n,a,r){"question"===r&&(t("speakingQuestion.".concat(a,".isRecordingQuestion"),!1),t("speakingQuestion.".concat(a,".questionRecordedBlob"),e),t("speakingQuestion.".concat(a,".audioFileQuestion"),n),c("speakingQuestion.".concat(a,".questionRecordedBlob"))),"answer"===r&&(t("speakingQuestion.".concat(a,".isRecording"),!1),t("speakingQuestion.".concat(a,".recordedBlob"),e),t("speakingQuestion.".concat(a,".audioFile"),n),c("speakingQuestion.".concat(a,".recordedBlob")))},j=["question","answer"].map((function(e,t){return r.a.createElement(ca.a,{component:Li,name:"speakingQuestion.".concat(0,".").concat(0===t?"questionRecordedBlob":"recordedBlob"),onStart:function(){var t=Object(Aa.a)(xa.a.mark((function t(n){var a;return xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ho(n,e,0,null,function(){var t=Object(Aa.a)(xa.a.mark((function t(n){var a;return xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:a=t.sent,I(a.blob,a.file,0,e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:a=t.t0,_(a.recorder,a.recordingTimeout,0,e,a.isRecording);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onStop:function(){var n=Object(Aa.a)(xa.a.mark((function n(a){var r;return xa.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Wo(a,null,0,0===t?w:k,0===t?C:O);case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:r=n.t0,I(r.blob,r.file,0,e);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),onPreview:function(){zo(0===t?"audioQuestion[".concat(0,"]"):"audioAnswer[".concat(0,"]"))},onClear:function(){return I(null,null,0,e)},id:0===t?"audioQuestion[".concat(0,"]"):"audioAnswer[".concat(0,"]"),recordDisabled:0===t?F:D,audioSource:0===t?x:A,isMicAlert:p})})),R=["question","answer"].map((function(e){return r.a.createElement(ca.a,{name:"speakingQuestion.".concat(0,".").concat("question"===e?"audioQuestion":"audioAnswer"),options:"question"===e?y:T,component:Ea,type:"checkbox"})}));return r.a.createElement(v,{className:od.a.QuestionCustomizationContainer},r.a.createElement(v,null,R[0],S.audioQuestion?r.a.createElement(v,null,r.a.createElement("div",{className:od.a.flexPositioningEven},r.a.createElement(ca.a,{name:"speakingQuestion.".concat(0,".audioFileQuestion"),index:"q".concat(0),onChangeFile:function(e){t("speakingQuestion.".concat(0,".questionRecordedBlob"),e)},component:Pa,loadedFile:S.questionRecordedBlob,mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]})),j[0]):r.a.createElement("div",{className:od.a.TextEditor},r.a.createElement(ca.a,{name:"speakingQuestion.".concat(0,".question"),field:"speakingQuestion.".concat(0,".question"),reduxForm:"questionForm",component:Lr,label:u("questionForm.question"),path:l,error:(i.speakingQuestion||{}).question})),r.a.createElement("div",null,R[1],!0===S.audioAnswer?r.a.createElement(v,null,r.a.createElement("div",{className:od.a.flexPositioningEven},r.a.createElement(ca.a,{name:"speakingQuestion.".concat(0,".audioFile"),component:Pa,index:"a".concat(0),onChangeFile:function(e){t("speakingQuestion.".concat(0,".recordedBlob"),e)},loadedFile:S.recordedBlob,mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]})),j[1]):null)))})),md=Object(c.b)((function(e,t){return{formValues:Object(Ve.a)("questionForm")(e),formErrors:Object(Ft.a)("questionForm")(e)}}),(function(e){return{changeField:function(t,n){e(Object(Dt.a)("questionForm",t,n))},makeAudioFieldTouched:function(t){console.log("touching field: ",t),e(Object(Dt.d)("questionForm",t))}}}))(dd),pd=n(652),fd=n.n(pd),gd=n(408),bd=n.n(gd),hd=(n(1118),function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:bd.a.spacing},r.a.createElement("span",null,this.props.label),r.a.createElement("div",{className:bd.a.inputContainer},r.a.createElement(fd.a,{inputProps:{placeholder:""},value:this.props.tagValues,onChange:this.props.onTagChange})))}}]),n}(a.Component)),Ed=function(e){var t={mcQuestion:{},essayQuestion:{},speakingQuestion:[{}],fillBlankQuestions:{}};if(e.mcQuestion){var n,a=e.mcQuestion;e.mcQuestion.question||(t.mcQuestion.question=na.t("questionForm.errors.required")),((a.answers||[]).includes(void 0)||(a.answers||[]).includes(""))&&(a.answers||[]).length>1&&(n=na.t("questionForm.errors.answersCantBeEmpty")),(a.answers||[]).length<2&&(n=na.t("questionForm.errors.atleastTwoAnswers")),(a.answers||[]).length===(a.correctAnswers||[]).length&&(a.answers||[]).length>1&&(n=na.t("questionForm.errors.atleastOneUnchecked")),(!a.correctAnswers||0===(a.correctAnswers||[]).length)&&(a.answers||[]).length>1&&(n=na.t("questionForm.errors.selectAtleastOneAnswer"));var r=(a.answers||[]).map((function(e){return(e||"").trim()})),o=(r||[]).reduce((function(e,t,n,a){return a.indexOf(t)!==n&&e.indexOf(t)<0&&e.push(t),e}),[]);(a.answers||[]).length>1&&(o||[]).length>0&&(n=na.t("questionForm.errors.answersDifferent")),t.mcQuestion.correctAnswers=n,(n||t.mcQuestion.question)&&(t.mcQuestionError=!0)}if(e.essayQuestion&&(e.essayQuestion.question||(t.essayQuestion.question=na.t("questionForm.errors.required"),t.essayQuestionError=!0)),e.speakingQuestion){var s=(e.speakingQuestion||{})[0]||{};s.question||s.audioQuestion||(t.speakingQuestion[0].question=na.t("questionForm.errors.requiredOrMakeAudioQuestion")),!s.questionRecordedBlob&&s.audioQuestion&&(t.speakingQuestion[0].questionRecordedBlob=na.t("questionForm.errors.requiredOrMakeTextQuestion")),s.audioFileQuestion instanceof File&&s.audioFileQuestion.size>1e3*e.instructorFileSizeLimit*1e3&&s.audioQuestion&&(t.speakingQuestion[0].questionRecordedBlob="".concat(na.t("questionForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),s.audioFile instanceof File&&s.audioFile.size>1e3*e.instructorFileSizeLimit*1e3&&s.audioAnswer&&(t.speakingQuestion[0].recordedBlob="".concat(na.t("questionForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),!s.recordedBlob&&s.audioAnswer&&(t.speakingQuestion[0].recordedBlob=na.t("questionForm.errors.requiredOrDisableAudioAnswer")),(t.speakingQuestion[0].question||t.speakingQuestion[0].questionRecordedBlob||t.speakingQuestion[0].recordedBlob)&&(t.speakingQuestionError=!0)}return t},vd=Object(_t.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0,enableReinitialize:!0,validate:Ed})((function(e){var t=e.editing,n=e.formValues,o=void 0===n?{}:n,s=e.formErrors,i=e.token,c=e.course,l=e.submitQuestion,u=e.deleteQuestion,d=e.questionType,m=e.changeField,p=e.touchField,f=e.loadedQuestion,g=e.loading,b=e.deleteImg,h=e.clearQuestionForm,E=Object(St.a)().t,y=c.tests,T=r.a.useState([]),S=Object(mo.a)(T,2),k=S[0],w=S[1],O=r.a.useState(!0),C=Object(mo.a)(O,2),x=C[0],A=C[1],F=r.a.useState(!1),D=Object(mo.a)(F,2),_=D[0],I=D[1],j=r.a.useState([]),R=Object(mo.a)(j,2),N=R[0],L=R[1],P=r.a.useState([]),B=Object(mo.a)(P,2),M=B[0],q=B[1],U=r.a.useState(null),Q=Object(mo.a)(U,2),W=Q[0],H=Q[1],z=r.a.useRef(),G=r.a.useRef();Object(a.useEffect)((function(){z.current=o,G.current=_}),[o,_]),Object(a.useEffect)((function(){if(_){var e=ro(y,"courseTests")||[],n=ro(o,"questionForm",d).filter((function(t){return e.includes(t)?null:t})),a=(k||[]).filter((function(e){return n.includes(e)?null:e})).filter((function(t){return e.includes(t)?null:t}));l(t?o:Object(At.a)(Object(At.a)({},o),{},{_id:W}),i,t,c._id,a,d)}}),[_]);var V=[{value:"easy",primaryText:E("questionForm.fields.easy")},{value:"medium",primaryText:E("questionForm.fields.medium")},{value:"hard",primaryText:E("questionForm.fields.hard")}],$=function(e,t,n){if(!G.current){var a=ro(y,"courseTests")||[],r=ro(t,"questionForm",n),o=[];r.forEach((function(t){-1===e.findIndex((function(e){return e===t}))&&o.push(t)})),o.filter((function(e){return a.includes(e)?null:e})).filter((function(e){return e})).length>0&&b(o,i)}};Object(a.useEffect)((function(){var e=ro(f,"questionForm",d);return H(t?null:(new no.a.ObjectId).toHexString()),w(e),window.addEventListener("beforeunload",(function(t){return Y(t,e,z.current,d)})),function(){h(),window.removeEventListener("beforeunload",(function(t){return Y(t,e,z.current,d)})),G.current||$(e,z.current,d)}}),[]),Object(a.useEffect)((function(){var e=(o.fillBlankQuestions||{}).answers,t=(s.fillBlankQuestions||{}).answers;L(e),q(t)}),[o,s]);var Y=function(e,t,n,a){e.preventDefault(),G.current||$(t,n,a)},J=function(){if(o.mcQuestion&&(p("mcQuestion.question"),p("mcQuestion.correctAnswers")),o.essayQuestion&&p("essayQuestion.question"),o.speakingQuestion&&(p("speakingQuestion.0.question"),p("speakingQuestion.0.recordedBlob"),p("speakingQuestion.0.questionRecordedBlob")),o.fillBlankQuestions&&Array.from(N).forEach((function(e,t){p("fillBlankQuestions.answers.".concat(t,".browserAudioFile")),p("fillBlankQuestions.answers.".concat(t,".answerOptions.incorrectAnswerThree"))})),o.mcQuestion&&s.mcQuestionError)return!1;if(o.essayQuestion&&s.essayQuestionError)return!1;if(o.speakingQuestion&&s.speakingQuestionError)return!1;if(o.fillBlankQuestions){var e=N.map((function(e,t){return(((M||[])[t]||{}).answerOptions||{}).incorrectAnswerThree||((M||[])[t]||{}).browserAudioFile?"error":null})),t=(s.fillBlankQuestions||{}).question;if(e.includes("error")||t)return!1}return!0},K="courses/".concat(c._id,"/questions/").concat(t?o._id:W);return r.a.createElement(v,null,r.a.createElement(to,{active:g,transparent:!0}),"mc"===d&&r.a.createElement(ld,{path:K,question:d}),"essay"===d&&r.a.createElement(ud,{path:K,question:d}),"speaking"===d&&r.a.createElement(md,{path:K,question:d}),"fillInBlank"===d&&r.a.createElement(sc,{path:K,isModal:!0,form:"questionForm",question:d}),r.a.createElement(du.a,null),r.a.createElement("div",{style:{display:"flex",marginTop:10}},r.a.createElement(ca.a,{name:"difficulty",simple:!0,component:Hs,options:V,textLabel:E("questionForm.fields.difficulty"),defaultValue:"medium"}),r.a.createElement(ca.a,{component:fa,name:"language",label:E("questionForm.fields.language"),simple:!0,textLabel:!0,language:!0,fullWidth:!0})),r.a.createElement(ca.a,{name:"tags",label:E("questionForm.fields.tags"),component:hd,onTagChange:function(e){m("tags",e)},tagValues:(o||{}).tags||[]}),r.a.createElement(du.a,null),!x&&!J()&&r.a.createElement(et.a,{style:{textAlign:"center",marginBottom:"20px"},gutterBottom:!0,color:"error"},E("questionForm.errors.correctForm")),r.a.createElement(ot.a,{fullWidth:!0,type:"button",style:x||J()?{color:"#43a047",borderColor:"#43a047",backgroundColor:"#e8f5e9"}:{color:"#FF4136",borderColor:"#FF4136",backgroundColor:"#ffcdd2"},variant:"outlined",onClick:function(){J()?I(!0):A(!1)}},E(t?"questionForm.buttons.updateQuestion":"questionForm.buttons.saveQuestion")),t&&r.a.createElement(ot.a,{fullWidth:!0,type:"button",color:"secondary",variant:"outlined",onClick:function(){return u((o||{})._id,i,c._id)}},E("questionForm.buttons.removeQuestion")))})),yd=Object(c.b)((function(e){var t=e.common.configuration.instructorFileSizeLimit;return{formValues:Object(Ve.a)("questionForm")(e),formErrors:Object(Ft.a)("questionForm")(e),token:e.authentication.token,editing:e.common.editing,course:e.common.selectedCourse,questionType:e.instructorQuestion.creatingQuestionType,initialValues:Object(At.a)(Object(At.a)({},e.instructorQuestion.loadedQuestionFormData),{},{instructorFileSizeLimit:t}),loading:e.instructorQuestion.loading,loadedQuestion:e.instructorQuestion.loadedQuestionFormData}}),(function(e){return{changeField:function(t,n){e(Object(Dt.a)("questionForm",t,n))},touchField:function(t){e(Object(Dt.d)("questionForm",t))},submitQuestion:function(t,n,a,r,o,s){e(function(e,t,n,a,r,o){return{type:"CREATE_UPDATE_QUESTION_START",payload:{formData:e,questionType:t,token:n,editing:a,courseId:r,filesToDelete:o}}}(t,s,n,a,r,o))},deleteQuestion:function(t,n,a){e(function(e,t,n){return{type:"DELETE_QUESTION_START",payload:{questionId:e,token:t,courseId:n}}}(t,n,a))},deleteImg:function(t,n){e(ke(t),n)},clearQuestionForm:function(){return e(W())}}}))(vd),Td=n(653),Sd=n.n(Td),kd=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e={backgroundColor:"white",padding:10,margin:"10px auto 10px auto"},t=this.props,n=t.modalDocument,a=t.courses,o=t.configuration,s=t.t,i=a.find((function(e){return e._id===n._id})),c=i.courseStartDate||i.courseEndDate||i.courseDropDeadline||i.enrollmentStartDate||i.enrollmentEndDate,l=o.dropCourseGrade,u=[i.language?[s("syllabus.language"),s("languages.".concat(i.language.toLowerCase()))]:null,[s("syllabus.instructor"),"".concat(i.courseInstructor.firstName," ").concat(i.courseInstructor.lastName)],[s("syllabus.instructorEmail"),i.courseInstructor.email],[s("syllabus.coursePassGrade"),"".concat(o.coursePassGrade,"%")],o.isDropCoursePenalty?[s("syllabus.gradeIfCourseDropped"),"".concat(l,"%")]:null].filter((function(e){return e})),d=[i.enrollmentStartDate?[s("syllabus.enrollmentStart")," ".concat(ct()(parseInt(i.enrollmentStartDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"))]:null,i.enrollmentEndDate?[s("syllabus.enrollmentDeadline")," ".concat(ct()(parseInt(i.enrollmentEndDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"))]:null,i.courseStartDate?[s("syllabus.courseStartDate")," ".concat(ct()(parseInt(i.courseStartDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"))]:null,i.courseEndDate?[s("syllabus.courseEndDate")," ".concat(ct()(parseInt(i.courseEndDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"))]:null,i.courseDropDeadline?[s("syllabus.dropDeadline")," ".concat(ct()(parseInt(i.courseDropDeadline)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"))]:null].filter((function(e){return e})),m=!(0===(i.regularOfficeHours||[]).length&&0===(i.irregularOfficeHours||[]).length);return r.a.createElement(v,null,r.a.createElement("div",{style:e},r.a.createElement(et.a,{variant:"h6"},s("syllabus.courseInfo")),r.a.createElement(ni.a,{"aria-label":"simple table"},r.a.createElement(ai.a,null,u.map((function(e,t){return r.a.createElement(oi.a,{key:e[0]},r.a.createElement(ri.a,{scope:"row"},e[0]),r.a.createElement(ri.a,{align:"right"},e[1]))}))))),r.a.createElement("div",{className:Sd.a.Contained,dangerouslySetInnerHTML:{__html:ac.a.sanitize(i.syllabus)}}),c&&r.a.createElement("div",{style:e},r.a.createElement(et.a,{variant:"h6"},s("syllabus.importantDates")),r.a.createElement(ni.a,{"aria-label":"simple table"},r.a.createElement(ai.a,null,d.map((function(e,t){return r.a.createElement(oi.a,{key:e[0]},r.a.createElement(ri.a,{scope:"row"},e[0]),r.a.createElement(ri.a,{align:"right"},e[1]))}))))),(i.prerequisites||[]).length>0&&r.a.createElement(et.a,{variant:"h6"},s("syllabus.coursePrereqs")),r.a.createElement("div",{style:e},0===(i.prerequisites||[]).length?r.a.createElement(et.a,{gutterBottom:!0,variant:"h6"},s("syllabus.noCoursePrereqs")):r.a.createElement(Br.a,null,(i.prerequisites||[]).map((function(e){return r.a.createElement(Mr.a,{key:(e||"")._id},(e||"").courseName)})))),!o.isChatAllowedOutsideOfficehours&&r.a.createElement("div",{style:e},m?r.a.createElement(v,null,(i.regularOfficeHours||[]).length>0&&r.a.createElement(et.a,{gutterBottom:!0,variant:"h6"},s("syllabus.weeklyOfficehours")),r.a.createElement(ni.a,{"aria-label":"simple table"},r.a.createElement(ai.a,null,(i.regularOfficeHours||[]).map((function(e,t){return r.a.createElement(oi.a,{key:e.day},r.a.createElement(ri.a,{scope:"row"},s("courseForm.days.".concat(e.day.toLowerCase()))),r.a.createElement(ri.a,{align:"right"},"".concat(s("syllabus.from")," ").concat(e.startTime," ").concat(s("syllabus.to")," ").concat(e.endTime," ").concat(cs()(new Date(Date.now())).tz(e.timezoneRegion).format("z"))))})))),(i.irregularOfficeHours||[]).length>0&&r.a.createElement(et.a,{gutterBottom:!0,variant:"h6"},s("syllabus.otherOfficehours")),r.a.createElement(ni.a,{"aria-label":"simple table"},r.a.createElement(ai.a,null,(i.irregularOfficeHours||[]).map((function(e,t){return r.a.createElement(oi.a,{key:e.date},r.a.createElement(ri.a,{scope:"row"},"".concat(ct()(parseInt(e.date)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY")," ")),r.a.createElement(ri.a,{align:"right"},"".concat(s("syllabus.from")," ").concat(e.startTime," ").concat(s("syllabus.to")," ").concat(e.endTime," ").concat(cs()(new Date(Date.now())).tz(e.timezoneRegion).format("z"))))})))),r.a.createElement(et.a,{paragraph:!0,variant:"subtitle1"},s("syllabus.askQuestionsViaChat"))):r.a.createElement(et.a,{paragraph:!0,variant:"h6"},s("syllabus.noOfficeHours"))))}}]),n}(a.Component),wd=Object(c.b)((function(e){return{modalDocument:e.common.modalDocument,courses:e.common.courses,configuration:e.common.configuration}}))(Object(Ia.a)("common")(kd)),Od=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmCheckbox:!1},e.handleChange=function(t){e.setState({confirmCheckbox:t.target.checked})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.userId,n=e.token,a=e.modalDocument,o=e.enroll,s=e.t,i={backgroundColor:"white",padding:10,margin:"10px auto 10px auto"};return r.a.createElement("div",null,r.a.createElement("div",{style:i},r.a.createElement(et.a,{paragraph:!0,variant:"subtitle1",gutterBottom:!0},s("syllabus.youAreRequesting"),r.a.createElement("span",{style:{fontWeight:"bold"}},a.courseName))),r.a.createElement(wd,null),r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:this.state.confirmCheckbox,onChange:this.handleChange,value:"checked"}),label:s("syllabus.agree")}),r.a.createElement(ot.a,{disabled:!this.state.confirmCheckbox,variant:"outlined",color:"default",type:"button",title:"Request enrollment",onClick:function(){o(t,a._id,n)}},s("syllabus.buttons.submitRequest")),r.a.createElement("div",{style:i},r.a.createElement(et.a,{paragraph:!0,variant:"caption",gutterBottom:!0},s("syllabus.accessWhenApproved"))))}}]),n}(a.Component),Cd=Object(c.b)((function(e){return{userId:e.authentication.userId,token:e.authentication.token,modalDocument:e.common.modalDocument}}),(function(e){return{enroll:function(t,n,a){e(function(e,t,n){return{type:"ENROLL_REQUEST_START",payload:{student:e,course:t,token:n}}}(t,n,a))}}}))(Object(Ia.a)("common")(Od)),xd=function(e,t){var n=t.testResults,a=(e.lessons||[]).reduce((function(e,t){return e+t.lessonSlides.length}),0),r=(e.lessons||[]).reduce((function(e,n){return n.lessonSlides.filter((function(e){return e.studentsSeen.includes(t._id)})).length+e}),0),o=e.tests.length,s=e.tests.filter((function(e){return n.findIndex((function(t){return e._id===t.test}))>-1})).length+r,i=a+o;return isNaN(parseInt(s/i*100))?0:parseInt(s/i*100)},Ad=Object(_t.a)({form:"processEnrollmentRequestForm",enableReinitialize:!0,destroyOnUnmount:!0})((function(e){var t=e.token,n=e.modalDocument,o=e.enroll,s=e.deny,i=e.course,c=e.markAsSeen,l=e.notifications,u=e.formValues,d=void 0===u?{}:u,m=Object(St.a)().t;Object(a.useEffect)((function(){var e=[];(l||[]).forEach((function(t){"courseEnrollRequest"!==t.documentType&&"courseDrop"!==t.documentType||t.fromUser!==n._id||e.push(t)})),e.forEach((function(e){c(e._id,t)}))}),[]);var p=Object(Du.a)(),f=[{label:m("confirmations.enrollConfirm.allow"),value:"approve",placement:"end",color:"primary"},{label:m("confirmations.enrollConfirm.deny"),value:"deny",placement:"end",color:"primary"}],g={label:m("confirmations.enrollConfirm.allowResubmission"),checked:!1},b=[{value:"",primaryText:""},{value:"governmentId",primaryText:m("confirmations.governmentId")},{value:"birthCertificate",primaryText:m("confirmations.birthCertificate")},{value:"transcript",primaryText:m("confirmations.transcript")},{value:"legalStatusProof",primaryText:m("confirmations.proofLegalStatus")},{value:"cv",primaryText:m("confirmations.cv")},{value:"testScoresProof",primaryText:m("confirmations.proofTestScores")},{value:"referenceLetter",primaryText:m("confirmations.letterReference")},{value:"statementPurpose",primaryText:m("confirmations.statementPurpose")},{value:"other",primaryText:m("confirmations.other")}],h=r.a.useState(0),E=Object(mo.a)(h,2),v=E[0],y=E[1],T=(n.documents||[]).length,S={backgroundColor:"white",padding:10,margin:"10px auto 10px auto"},k=[[m("confirmations.firstName"),n.firstName],[m("confirmations.lastName"),n.lastName],[m("confirmations.studentId"),n._id.replace(/\D/g,"")],[m("confirmations.dob"),ct()(new Date(n.dob).getTime()).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY")],[m("confirmations.email"),n.email],[m("confirmations.lastLogin"),ct()(new Date(parseInt(n.lastLogin)).getTime()).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")],[m("confirmations.courseProgress"),"".concat(xd(i,n),"%")]];return r.a.createElement("div",null,r.a.createElement("div",{style:Object(At.a)({backgroundImage:'url("'.concat(n.profilePicture,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"200px",borderRadius:"50%",maxWidth:"200px",width:"100%"},S)}),r.a.createElement("div",{style:S},r.a.createElement(ni.a,{"aria-label":"simple table"},r.a.createElement(ai.a,null,k.map((function(e){return r.a.createElement(oi.a,{key:e[0]},r.a.createElement(ri.a,{component:"th",scope:"row"},e[0]),r.a.createElement(ri.a,{align:"right"},e[1]))}))))),T>0&&r.a.createElement("div",{style:S},r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},m("confirmations.documents")),T>0&&r.a.createElement(Yr.a,{steps:T,position:"static",variant:"text",activeStep:v,nextButton:r.a.createElement(ot.a,{size:"small",onClick:function(){y((function(e){return e+1}))},disabled:v===T-1},m("confirmations.next"),"rtl"===p.direction?r.a.createElement(ed.a,null):r.a.createElement(nd.a,null)),backButton:r.a.createElement(ot.a,{size:"small",onClick:function(){y((function(e){return e-1}))},disabled:0===v},"rtl"===p.direction?r.a.createElement(nd.a,null):r.a.createElement(ed.a,null),m("confirmations.back"))}),(n.documents||[]).map((function(e,t){if(t!==v)return null;var n=(as(e.document)||"").split(".").pop(),a=e.document,o=b.find((function(t){return t.value===e.documentType})).primaryText;return r.a.createElement("div",{key:e.document+t},r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},o),("jpeg"===n||"jpg"===n||"jfif"===n)&&r.a.createElement("div",{style:{backgroundImage:'url("'.concat(a,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"300px",borderRadius:"3px",width:"100%",margin:"auto"}}),("docx"===n||"doc"===n)&&r.a.createElement(_a.a,{fileType:n,filePath:a}),"pdf"===n&&r.a.createElement(ji,{url:a,index:t}))}))),r.a.createElement("div",{style:S},r.a.createElement(ca.a,{component:ti,name:"decision",title:"Decision",required:!0,label:"Test Type",options:f,orientation:"horizontal"}),r.a.createElement(ca.a,{name:"reason",component:di,label:m("confirmations.enrollConfirm.reason"),options:{multiline:!0,rows:3,variant:ma.a,disabled:"approve"===d.decision||!d.decision},textLabel:!0}),"deny"===d.decision&&r.a.createElement(ca.a,{name:"allowResubmission",options:g,component:Ea}),r.a.createElement(ot.a,{disabled:!d.decision,variant:"outlined",color:"default",type:"button",title:"Enroll in Course",onClick:function(){var e=d.decision,a=d.reason,r=d.allowResubmission;"approve"===e&&o(n._id,i._id,t),"deny"===e&&s(n._id,i._id,t,a,r)}},m("confirmations.enrollConfirm.submit"))))})),Fd=Object(c.b)((function(e){return{token:e.authentication.token,modalDocument:e.common.modalDocument,notifications:e.common.notifications,course:e.common.selectedCourse,initialValues:{allowResubmission:!1},formValues:Object(Ve.a)("processEnrollmentRequestForm")(e)}}),(function(e){return{markAsSeen:function(t,n){e(De(t,n))},enroll:function(t,n,a){e(F(t,n,a))},deny:function(t,n,a,r,o){e(_(t,n,a,r,o))}}}))(Ad),Dd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return(e.configuration||{}).isPasswordRequiredStartTest?(e.password||(t.password=na.t("confirmations.takeTest.required")),t):t},_d=Object(_t.a)({form:"takeTestConfirmation",validate:Dd,destroyOnUnmount:!0,touchOnBlur:!1})((function(e){var t=e.startTest,n=e.userId,o=e.token,s=e.modalDocument,i=void 0===s?{}:s,c=e.markAsSeen,l=e.fetchNotifications,u=e.notifications,d=e.modalDocument,m=e.modalType,p=e.width,f=e.formValues,g=e.touchField,b=e.configuration,h=Object(a.useState)(!1),E=Object(mo.a)(h,2),y=E[0],T=E[1],S=Object(St.a)().t;Object(a.useEffect)((function(){if("startTestConfirmation"===m){var e=(u||[]).find((function(e){return e.documentId===(d||{})._id&&"test"===e.documentType||e.documentId===(d||{})._id&&"resetTest"===e.documentType?e:void 0}));e&&(c(e._id,o),l(o))}}),[]);i.testType,i.testType,i.testType;parseInt(i.dueDate),Date.now(),parseInt(i.timer);var k=[{id:"".concat(S(p>560?"confirmations.takeTest.mc":"confirmations.takeTest.mcShort")," ").concat(i.sectionWeights.mcSection,"%"),label:S("confirmations.takeTest.mc"),value:i.sectionWeights.mcSection,color:"hsl(128, 70%, 50%)"},{id:"".concat(S("confirmations.takeTest.essay")," ").concat(i.sectionWeights.essaySection,"%"),label:S("confirmations.takeTest.essay"),value:i.sectionWeights.essaySection,color:"hsl(88, 70%, 50%)"},{id:"".concat(S("confirmations.takeTest.speaking")," ").concat(i.sectionWeights.speakingSection,"%"),label:S("confirmations.takeTest.speaking"),value:i.sectionWeights.speakingSection,color:"hsl(245, 70%, 50%)"},{id:"".concat(S(p>560?"confirmations.takeTest.fillblanks":"confirmations.takeTest.fillblanksShort")," ").concat(i.sectionWeights.fillBlankSection,"%"),label:S("confirmations.takeTest.fillblanks"),value:i.sectionWeights.fillBlankSection,color:"hsl(340, 70%, 50%)"}].filter((function(e){return e.value}));return console.log("pieChartData",k),r.a.createElement("div",null,r.a.createElement(Zu,{test:i,startTest:!0}),Object.values(i.sectionWeights).filter((function(e){return e})).length>1&&r.a.createElement("div",{style:{height:p>450?300:200}},r.a.createElement(ii,{data:k})),r.a.createElement(et.a,{paragraph:!0,variant:"caption",gutterBottom:!0},S("confirmations.takeTest.saveOften")),r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:y,onChange:function(e){T(e.target.checked)},value:"checked"}),label:S("confirmations.takeTest.agree")}),r.a.createElement(ot.a,{disabled:!y,variant:"outlined",color:"secondary",type:"button",title:"Start Test",onClick:function(){var e=Dd(f);g("password"),e.password||t(i._id,n,o,f.password)}},S("confirmations.takeTest.startTest")),y&&b.isPasswordRequiredStartTest&&r.a.createElement(v,null,r.a.createElement(ca.a,{component:fa,name:"password",simple:!0,label:S("confirmations.takeTest.loginPassword"),type:"password",textLabel:!0})))})),Id=Object(c.b)((function(e){var t=e.common.configuration;return{formValues:Object(Ve.a)("takeTestConfirmation")(e),userId:e.authentication.userId,token:e.authentication.token,modalDocument:e.common.modalDocument,modalType:e.common.modalType,notifications:e.common.notifications,width:e.common.width,configuration:t,initialValues:{configuration:t}}}),(function(e){return{startTest:function(t,n,a,r){return e(He(t,n,a,null,null,r))},markAsSeen:function(t,n){e(De(t,n))},fetchNotifications:function(t){e(Ae(t))},touchField:function(t){e(Object(Dt.d)("takeTestConfirmation",t))}}}))(_d),jd=n(654),Rd=n.n(jd),Nd=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmCheckbox:!1},e.handleChange=function(t){e.setState({confirmCheckbox:t.target.checked})},e.resetCheckbox=function(t){e.setState({confirmCheckbox:!1})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalDocument,n=e.token,a=e.userId,o=e.drop,s=e.t;return r.a.createElement("div",null,r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.dropCourse.youAreDropping")+" ",r.a.createElement("span",{className:Rd.a.Bold},(t||{}).courseName)),(t||{}).courseDropDeadline&&parseInt((t||{}).courseDropDeadline)>Date.now()&&r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.dropCourse.deadlineNotYet")),(t||{}).courseDropDeadline&&parseInt((t||{}).courseDropDeadline)<Date.now()&&(t||{}).courseDropDeadline&&r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.dropCourse.deadlinePassed")+" ".concat(30,"%")),(t||{}).enrollmentEndDate&&parseInt((t||{}).enrollmentEndDate)>Date.now()&&r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.dropCourse.youCanReenroll")),parseInt((t||{}).enrollmentEndDate)<Date.now()&&(t||{}).enrollmentEndDate&&r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.dropCourse.youCanNotReenroll")),r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:this.state.confirmCheckbox,onChange:this.handleChange,value:"checked"}),label:s("confirmations.dropCourse.agree")}),r.a.createElement(ot.a,{disabled:!this.state.confirmCheckbox,variant:"outlined",color:"default",type:"button",title:"Drop Course",onClick:function(){o(a,t._id,n)}},s("confirmations.dropCourse.dropCourse")))}}]),n}(a.Component),Ld=Object(c.b)((function(e){return{courses:e.common.courses,courseDropping:e.studentCourse.courseDropping,modalDocument:e.common.modalDocument,token:e.authentication.token,userId:e.authentication.userId}}),(function(e){return{drop:function(t,n,a){e(function(e,t,n){return{type:"DROP_COURSE_START",payload:{student:e,course:t,token:n}}}(t,n,a))}}}))(Object(Ia.a)("common")(Nd)),Pd=n(41),Bd=n.n(Pd),Md=function(e){var t=e.instructorTest,n=void 0===t?{}:t,a=e.sections,o=e.studentInput,s=e.testResult,i=void 0===s?[]:s,c=((n||{}).audioMaterials||[])[0]||{},l=((n||{}).readingMaterials||[])[0]||{},u=Object(St.a)().t,d={background:"#1976d2",borderRadius:4,color:"white",padding:10};return r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h5",gutterBottom:!0},u("testReview.multiplechoicesection")),a>1&&r.a.createElement(et.a,{style:{margin:"20px 0"},variant:"body2",gutterBottom:!0},"".concat(u("testReview.sectionWorth")," ").concat(((n||{}).sectionWeights||{}).mcSection,"%")),r.a.createElement(Qs,{index:"mcSectionReview",summary:u("testReview.sectionResources"),disabled:!l.content&&!c.audio},r.a.createElement(Vc,{audioId:"mcAudioMaterialReviewTest",pdfIndex:0,readingContent:l.content,audioSource:c.audio,onPreview:function(){return zo("mcAudioMaterialReviewTest")},fileUpload:l.fileUpload})),((n||{}).multipleChoiceQuestions||[]).map((function(e,t){var n=(e.correctAnswers||[]).map((function(e){return parseInt(e)-1})),a=(e.answerOptions||[]).filter((function(e,t){if(n.includes(t))return e})),s=(e.answerOptions||[]).filter((function(e,t){if(!n.includes(t))return e})),c=(o.answers||[]).find((function(e){return e.questionNumber===t+1})),l=(c||{}).answers,m=((e.answerOptions||[]).filter((function(e){if(!(l||[]).includes(e))return e}))||[]).filter((function(e){if((a||[]).includes(e))return e})),p=s.filter((function(e){if((l||[]).includes(e))return e})),f="#ffc107",g=((i.answers||[])[t]||{}).marks;return e.marks===g&&(f="#4caf50"),0===g&&(f="#F44336"),r.a.createElement("div",{className:Bd.a.QuestionContainer,key:e+t},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(u("testReview.question")," ").concat(t+1)),r.a.createElement(et.a,{paragraph:!0,color:"error",variant:"caption",gutterBottom:!0},1===m.length?u("testReview.oneAnswerMissing"):null),r.a.createElement(et.a,{paragraph:!0,color:"error",variant:"caption",gutterBottom:!0},p.length>1?"".concat(p.length," ").concat(u("testReview.xAnswersSelectedIncorrectly")," "):null),r.a.createElement(et.a,{paragraph:!0,color:"error",variant:"caption",gutterBottom:!0},m.length>1?"".concat(p.length," ").concat(u("testReview.xAnswersMissing")," "):null),r.a.createElement("div",{style:d,dangerouslySetInnerHTML:{__html:ac.a.sanitize(e.question)}}),e.answerOptions.map((function(e,t){return r.a.createElement(et.a,{key:e+t,variant:"body2",gutterBottom:!0},r.a.createElement("span",null,"".concat(t+1,") ")),r.a.createElement("span",{className:(l||[]).includes(e)?Bd.a.YellowBackground:""},"".concat(e)),r.a.createElement("span",{className:((m||[]).includes(e)||(p||[]).includes(e))&&(l||[]).includes(e)?Bd.a.RedText:""},((m||[]).includes(e)||(p||[]).includes(e))&&(l||[]).includes(e)?r.a.createElement("span",{className:Bd.a.RedText},r.a.createElement("i",{className:"fa fa-times"})):""),r.a.createElement("span",{className:(m||[]).includes(e)||(p||[]).includes(e)||!(l||[]).includes(e)?"":Bd.a.GreenText},!(m||[]).includes(e)&&!(p||[]).includes(e)&&(l||[]).includes(e)&&r.a.createElement("span",{className:Bd.a.GreenText},r.a.createElement("i",{className:"fa fa-check"}))))})),r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},n.length>1?u("testReview.correctAnswerPlural")+": ":u("testReview.correctAnswer")+": ",n.map((function(e,t){return r.a.createElement("span",{key:e+t},"".concat(e+1,"\n                    ").concat(n.length>1&&t!==n.length-1?",":""," "))}))),r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},u("testReview.marks")),r.a.createElement(Oa,{input:{value:((i.answers||[])[t]||{}).marks||0},simple:!0,readOnly:!0,width:80,borderColor:f})," / ".concat(e.marks),e.solution&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(et.a,{variant:"body1",gutterBottom:!0},u("testReview.solution")),r.a.createElement(ca.a,{name:"instructorTest.multipleChoiceQuestions.".concat(t,".solution"),component:di,options:{multiline:!0,rows:2,variant:ma.a,readOnly:!0}})),(c||{}).additionalNotes&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(et.a,{className:Bd.a.RedText,variant:"body1",gutterBottom:!0},u("testReview.feedback")),r.a.createElement(di,{input:{value:(c||{}).additionalNotes},options:{multiline:!0,rows:2,variant:ma.a,readOnly:!0}})))})))},qd=function(e){var t=e.instructorTest,n=void 0===t?{}:t,a=e.sections,o=e.studentInput,s=e.testResult,i=void 0===s?{}:s,c=(e.test,e.formValues),l=void 0===c?{}:c,u={background:"#1976d2",borderRadius:4,color:"white",padding:10,marginBottom:20},d=((n||{}).audioMaterials||[])[1]||{},m=((n||{}).readingMaterials||[])[1]||{},p=Object(St.a)().t;return r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h5",gutterBottom:!0},p("testReview.essaysection")),a>1&&r.a.createElement(et.a,{style:{margin:"20px 0"},variant:"body2",gutterBottom:!0},"".concat(p("testReview.sectionWorth")," ").concat(((n||{}).sectionWeights||{}).essaySection,"%")),r.a.createElement(Qs,{index:"essaySectionReview",summary:p("testReview.sectionResources"),disabled:!m.content&&!d.audio},r.a.createElement(Vc,{audioId:"essayAudioMaterialReviewTest",pdfIndex:1,readingContent:m.content,audioSource:d.audio,onPreview:function(){return zo("essayAudioMaterialReviewTest")},fileUpload:m.fileUpload})),((n||{}).essayQuestions||[]).map((function(e,t){var n=(o.answers||[]).find((function(e){return e.questionNumber===t+1})),a="#ffc107",s=(((i.essaySection||{}).answers||[])[t]||{}).marks;(e||{}).marks===s&&(a="#4caf50"),0===s&&(a="#F44336");var c=(((l.testResult||{}).essaySection||{}).answers||[])[t]||{},d=((l.essaySection||[])[t]||{}).uneditedAnswer;return r.a.createElement("div",{className:Bd.a.QuestionContainer,key:e+t},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(p("testReview.question")," ").concat(t+1)),r.a.createElement("div",{style:u,dangerouslySetInnerHTML:{__html:ac.a.sanitize(e.question)}}),c.allowCorrection&&c.answer!==c.instructorCorrection&&r.a.createElement(ca.a,{name:"essaySection.".concat(t,".uneditedAnswer"),options:{label:"Show unedited answer",checked:!1},component:Ea}),r.a.createElement(ca.a,{border:"yellowBorder",type:"balloon",reduxForm:"testReview",name:"testResult.essaySection.answers.".concat(t,".").concat(d?"answer":"instructorCorrection"),component:Lr,readOnly:!0}),r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},p("testReview.marks")),r.a.createElement(Oa,{borderColor:a,input:{value:(((i.essaySection||{}).answers||[])[t]||{}).marks||0},simple:!0,readOnly:!0,width:80})," / ".concat((e||{}).marks),(e||{}).solution&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(et.a,{variant:"body1",gutterBottom:!0},p("testReview.solution")),r.a.createElement(ca.a,{name:"instructorTest.essayQuestions.".concat(t,".solution"),component:di,options:{multiline:!0,rows:2,variant:ma.a,readOnly:!0}})),(n||{}).additionalNotes&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(et.a,{className:Bd.a.RedText,variant:"body1",gutterBottom:!0},p("testReview.feedback")),r.a.createElement(di,{input:{value:(n||{}).additionalNotes},options:{multiline:!0,rows:2,variant:ma.a,readOnly:!0}})))})))},Ud=function(e){var t=e.instructorTest,n=void 0===t?{}:t,a=e.sections,o=e.studentInput,s=void 0===o?{}:o,i=e.testResult,c=void 0===i?{}:i,l=(e.test,((n||{}).audioMaterials||[])[2]||{}),u=((n||{}).readingMaterials||[])[2]||{},d=Object(St.a)().t,m={background:"#1976d2",borderRadius:4,color:"white",padding:10};return r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h5",gutterBottom:!0},d("testReview.speakingsection")),a>1&&r.a.createElement(et.a,{style:{margin:"20px 0"},variant:"body2",gutterBottom:!0},"".concat(d("testReview.sectionWorth")," ").concat(((n||{}).sectionWeights||{}).speakingSection,"%")),r.a.createElement(Qs,{index:"speakingSectionReview",summary:d("testReview.sectionResources"),disabled:!u.content&&!l.audio},r.a.createElement(Vc,{audioId:"speakingAudioMaterialReviewTest",pdfIndex:2,readingContent:u.content,audioSource:l.audio,onPreview:function(){return zo("speakingAudioMaterialReviewTest")},fileUpload:u.fileUpload})),(n.speakingQuestions||[]).map((function(e,t){var n=(s.answers||[]).find((function(e){if(e.questionNumber===t+1)return e}))||{},a="#ffc107",o=((c.answers||[])[t]||{}).marks;return(e||{}).marks===o&&(a="#4caf50"),0===o&&(a="#F44336"),r.a.createElement("div",{className:Bd.a.QuestionContainer,key:e+t},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(d("testReview.question")," ").concat(t+1)),!n.answer&&r.a.createElement(et.a,{variant:"caption",color:"error",gutterBottom:!0},d("testReview.noAnswerProvided")),e.question&&r.a.createElement("div",{style:m,dangerouslySetInnerHTML:{__html:ac.a.sanitize(e.question)}}),e.questionAudio&&r.a.createElement(v,null,r.a.createElement("audio",{id:"audioQuestion[".concat(t,"]"),src:e.questionAudio}),r.a.createElement(ot.a,{variant:"outlined",fullWidth:!0,color:"primary",onClick:function(){zo("audioQuestion[".concat(t,"]"))}},d("testReview.buttons.playQuestion"))),r.a.createElement(v,null,r.a.createElement("audio",{id:"audioAnswer[".concat(t,"]"),src:n?n.answer:null}),r.a.createElement(ot.a,{variant:"outlined",fullWidth:!0,color:"secondary",disabled:!n.answer||""===n.answer,onClick:function(){zo("audioAnswer[".concat(t,"]"))}},n.answer&&""!==n.answer?d("testReview.buttons.playYourAnswer"):d("testReview.buttons.noAnswer"))),r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},d("testReview.marks")),r.a.createElement(Oa,{input:{value:((c.answers||[])[t]||{}).marks||0},simple:!0,readOnly:!0,width:80,borderColor:a})," / ".concat((e||{}).marks),e.audio&&r.a.createElement(v,null,r.a.createElement("audio",{id:"audioExplanation[".concat(t,"]"),src:e.audio}),r.a.createElement(ot.a,{variant:"outlined",fullWidth:!0,color:"primary",onClick:function(){zo("audioExplanation[".concat(t,"]"))}},d("testReview.buttons.playAnswer"))),(e||{}).solution&&r.a.createElement(v,null,r.a.createElement(et.a,{variant:"body1",gutterBottom:!0},d("testReview.solution")),r.a.createElement(ca.a,{name:"instructorTest.speakingQuestions.".concat(t,".solution"),component:di,label:"Solution",options:{multiline:!0,rows:2,variant:ma.a,readOnly:!0}})),n.additionalNotes&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(et.a,{className:Bd.a.RedText,variant:"body1",gutterBottom:!0},d("testReview.feedback")),r.a.createElement(di,{input:{value:n.additionalNotes},options:{multiline:!0,rows:2,variant:ma.a,readOnly:!0}})),n.feedbackAudio&&r.a.createElement(v,null,r.a.createElement("audio",{id:"audioFeedBack[".concat(t,"]"),src:n.feedbackAudio}),r.a.createElement(ot.a,{disabled:!n.feedbackAudio,variant:"outlined",color:"primary",onClick:function(){zo("audioFeedBack[".concat(t,"]"))},className:Bd.a.buttonSpace,fullWidth:!0},d("testReview.buttons.playFeedback"))))})))},Qd=function(e){var t=e.instructorTest,n=void 0===t?{}:t,a=e.sections,o=e.studentInput,s=void 0===o?[]:o,i=e.testResult,c=void 0===i?{}:i,l=(e.test,e.formValues,Object(St.a)().t),u=(n.fillInBlanksQuestions||"").text,d=(n.fillInBlanksQuestions||"").blanks||[],m=((n||{}).audioMaterials||[])[3]||{},p=((n||{}).readingMaterials||[])[3]||{},f=Ki()(u||"",/<mark [^>]+>(.*?)<\/mark>/g,(function(e,t){var n=t/2-.5,a=d[n]||{},o=a.correctAnswer;if(!0===a.selectableAnswer){var i=((s||[]).find((function(e){return e.questionNumber===n+1}))||{}).answer;return r.a.createElement(v,{key:e+n},r.a.createElement("span",{className:Bd.a.BlankPreview},n+1," "),a.audio&&r.a.createElement("td",{dangerouslySetInnerHTML:{__html:'\n                <audio id="audio['.concat(n,']" src="').concat(a.audio,'">\n                </audio>\n                 <span class="').concat(Bd.a.Pointer,'" onClick="(function(){\n                   const audio = document.getElementById(\'audio[').concat(n,']\');\n                   audio.play()\n                   return false;\n                   })();return false;" >\n                   <i class="fa fa-volume-down"></i>\n                   </span>\n              ')}}),r.a.createElement("select",{readOnly:!0,value:"student selected",className:Bd.a.SelectField},r.a.createElement("option",{disabled:!0,value:o===i?"student selected":"Correct Option"},o),["1","2","3"].map((function(e,t){return r.a.createElement("option",{disabled:!0,key:"incorrectOption[".concat(e,"]"),value:(a.incorrectAnswers||[])[t]===i?"student selected":"Incorrect option ".concat(e)},(a.incorrectAnswers||[])[t])}))),o===i?r.a.createElement("span",{className:Bd.a.GreenText},r.a.createElement("i",{className:"fa fa-check"})):r.a.createElement("span",{className:Bd.a.RedText},r.a.createElement("i",{className:"fa fa-times"})))}if(!1===a.selectableAnswer){var c=((s||[]).find((function(e){return e.questionNumber===n+1}))||{}).answer;return r.a.createElement(v,{key:e+n},r.a.createElement("span",{className:Bd.a.Inline},r.a.createElement("span",{className:Bd.a.BlankPreview},n+1," "),a.audio&&r.a.createElement(v,null,r.a.createElement("td",{dangerouslySetInnerHTML:{__html:'\n                      <audio id="audio['.concat(n,']" src="').concat(a.audio,'">\n                      </audio>\n                      <span class="').concat(Bd.a.Pointer,'" onClick="(function(){\n                      const audio = document.getElementById(\'audio[').concat(n,']\');\n                      audio.play()\n                      return false;\n                      })();return false;" >\n                      <i class="fa fa-volume-down"></i>\n                      </span>\n                  ')}})),r.a.createElement("input",{readOnly:!0,type:"text",className:Bd.a.InputField,value:"".concat(c||"")}),(o||"").toLowerCase()===(c||"").toLowerCase()?r.a.createElement("span",{className:Bd.a.GreenText},r.a.createElement("i",{className:"fa fa-check"})):r.a.createElement("span",{className:Bd.a.RedText},r.a.createElement("i",{className:"fa fa-times"}))))}})),g=[];return f.forEach((function(e,t){"string"===typeof e?g.push(e):g.push($i.a.renderToString(e))})),r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h5",gutterBottom:!0},l("testReview.fillintheblankssection")),a>1&&r.a.createElement(et.a,{style:{margin:"20px 0"},variant:"body2",gutterBottom:!0},"".concat(l("testReview.sectionWorth")," ").concat(((n||{}).sectionWeights||{}).fillBlankSection,"%")),r.a.createElement(Qs,{index:"fillBlankSectionReview",summary:l("testReview.sectionResources"),disabled:!p.content&&!m.audio},r.a.createElement(Vc,{audioId:"fillblanksAudioMaterialReviewTest",pdfIndex:3,readingContent:p.content,audioSource:m.audio,onPreview:function(){return zo("fillblanksAudioMaterialReviewTest")},fileUpload:p.fileUpload})),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:ac.a.sanitize(g.join(""),{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}),((n.fillInBlanksQuestions||{}).blanks||[]).map((function(e,t){var n=(c.answers||[])[t]||{},a=(s.find((function(e){return e.questionNumber===t+1}))||{}).answer,o=(s.find((function(e){return e.questionNumber===t+1}))||{}).additionalNotes,i="#ffc107",u=n.marks;return(e||{}).marks===u&&(i="#4caf50"),0===u&&(i="#F44336"),r.a.createElement("div",{className:Bd.a.QuestionContainer,key:e+t},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(l("testReview.blank")," ").concat(t+1)),r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},l("testReview.yourAnswer"),r.a.createElement("span",{className:"Select the correct answer"!==a&&a?Bd.a.YellowBackground:""},"Select the correct answer"===a?"":a)),r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},l("testReview.correctAnswer")+": "," ",r.a.createElement("span",null,(e||{}).correctAnswer)),r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},l("testReview.marks")),r.a.createElement(Oa,{borderColor:i,input:{value:n.marks||0},simple:!0,readOnly:!0,width:80})," / ".concat((e||{}).marks),(e||{}).solution&&(e||{}).solution&&r.a.createElement(v,null,r.a.createElement(et.a,{variant:"body1",gutterBottom:!0},l("testReview.solution")),r.a.createElement(ca.a,{name:"instructorTest.fillInBlanksQuestions.blanks.".concat(t,".solution"),component:di,options:{multiline:!0,rows:2,variant:ma.a,readOnly:!0}})),o&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(et.a,{className:Bd.a.RedText,variant:"body1",gutterBottom:!0},l("testReview.feedback")),r.a.createElement(di,{input:{value:o},options:{multiline:!0,rows:2,variant:ma.a,readOnly:!0}})))})))},Wd=function(e,t){var n=(t||{}).instructorTest;return"mcSection"===e?((n||{}).multipleChoiceQuestions||[]).reduce((function(e,t){return e+t.marks}),0):"essay"===e?((n||{}).essayQuestions||[]).reduce((function(e,t){return e+t.marks}),0):"speaking"===e?((n||{}).speakingQuestions||[]).reduce((function(e,t){return e+t.marks}),0):"fillInBlanks"===e?(((n||{}).fillInBlanksQuestions||{}).blanks||[]).reduce((function(e,t){return e+t.marks}),0):void 0};function Hd(e,t){return{info:e,value:t}}var zd=function(e){var t=e.instructorTest,n=e.test,a=e.testResult,o=void 0===a?{}:a,s=e.testReviewing,i=Object(St.a)().t;return r.a.createElement("div",{className:Bd.a.SummaryContainer},r.a.createElement(et.a,{variant:"h5",gutterBottom:!0},i("testReview.summary")),(o||{}).latePenalty&&r.a.createElement(et.a,{className:Bd.a.RedText,variant:"h6",gutterBottom:!0},"".concat(i("testReview.latePenalty"),": ").concat((o||{}).latePenalty,"%")),r.a.createElement(ni.a,{className:Bd.a.table,"aria-label":"simple table"},r.a.createElement(ai.a,null,function(e){var t=["Multiple-choice section","Essay section","Speaking section","Fill-in-the-blanks section"];return["mcSection","essay","speaking","fillInBlanks"].map((function(n,a){return parseFloat(Wd(n,e).toFixed(2))>0?Hd(t[a],"".concat(parseFloat(function(e,t){var n=(t||{}).testResult;return"mcSection"===e?(((n||{}).multiplechoiceSection||[]).answers||[]).reduce((function(e,t){return e+t.marks}),0):"essay"===e?(((n||{}).essaySection||[]).answers||[]).reduce((function(e,t){return e+t.marks}),0):"speaking"===e?(((n||{}).speakingSection||[]).answers||[]).reduce((function(e,t){return e+t.marks}),0):"fillInBlanks"===e?(((n||{}).fillInBlanksSection||{}).answers||[]).reduce((function(e,t){return e+t.marks}),0):void 0}(n,e).toFixed(2))," / ").concat(parseFloat(Wd(n,e).toFixed(2)))):null}))}(s).map((function(e,t){return e?r.a.createElement(oi.a,{className:0===t?Bd.a.MuiTableRow:"",key:e.info},r.a.createElement(ri.a,{className:0===t?Bd.a.MuiTableCell:"",component:"th",scope:"row"},i("testReview.".concat((e.info||"").replace(/ /g,"").replace(/-/g,"").toLowerCase()))),r.a.createElement(ri.a,{className:0===t?Bd.a.MuiTableCell:"",align:"right"},e.value)):null})))),r.a.createElement(ni.a,{className:Bd.a.table,"aria-label":"simple table"},r.a.createElement(ai.a,null,function(e,t){return[Hd(t?"Test Grade":"Assignment Grade","".concat(e.grade,"%"))]}(o,n).map((function(e,n){return r.a.createElement(oi.a,{className:0===n?Bd.a.MuiTableRow:"",key:e.info},r.a.createElement(ri.a,{className:0===n?Bd.a.MuiTableCell:"",component:"th",scope:"row"},r.a.createElement("span",null,i("testReview.".concat((e.info||"").replace(/ /g,"").toLowerCase())))," ",parseFloat(e.value)>=(t||{}).passingGrade?r.a.createElement("span",{style:{color:"#4caf50",marginLeft:5}},i("testReview.passed")):r.a.createElement("span",{style:{color:"red",marginLeft:5}},i("testReview.failed"))),r.a.createElement(ri.a,{className:0===n?Bd.a.MuiTableCell:"",align:"right"},r.a.createElement(et.a,{variant:"body1",gutterBottom:!0},e.value)))})))),r.a.createElement(et.a,{variant:"caption",gutterBottom:!0},t.assignment?i("testReview.gradeAdjustedForWeightsAndLatePenalty"):i("testReview.gradeAdjustedForWeights")),(o||{}).gradeOverride&&r.a.createElement(v,null,r.a.createElement(et.a,{className:Bd.a.RedText,variant:"subtitle1",gutterBottom:!0},i("testReview.instructorAdjustedGrade")),(o||{}).gradeAdjustmentExplanation&&r.a.createElement(v,null,r.a.createElement(et.a,{variant:"body1"},i("testReview.gradeAdjustmentExplanation")),r.a.createElement(ca.a,{name:"testResult.gradeAdjustmentExplanation",component:di,options:{multiline:!0,rows:2,variant:ma.a,readOnly:!0}}))))},Gd=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialValues,n=e.userId,a=e.token,r=e.notifications,o=e.markAsSeen,s=(r||[]).find((function(e){if(e.toSpecificUser===n&&e.documentId===t.testResult.test&&"testReview"===e.documentType)return e}));s&&o(s._id,a)}},{key:"render",value:function(){var e=this.props,t=e.test,n=e.formValues,a=void 0===n?{}:n,o=e.assignment,s=e.initialValues,i=void 0===s?{}:s,c=e.t,l=i.instructorTest||{},u=i.testResult||{},d=Object.values(l.sectionWeights||[]).filter((function(e){return e})).length,m=u.multiplechoiceSection,p=u.essaySection,f=u.speakingSection,g=(u.fillInBlanksSection||{}).answers,b=((l||{}).audioMaterials||[])[4]||{},h=((l||{}).readingMaterials||[])[4]||{};return r.a.createElement("div",null,r.a.createElement(Zu,{test:l}),r.a.createElement(Qs,{index:"testSectionReview",summary:c(o?"testReview.assignmentResources":"testReview.testResources"),disabled:!h.content&&!b.audio},r.a.createElement(Vc,{audioId:"testAudioMaterialReviewTest",pdfIndex:4,readingContent:h.content,audioSource:b.audio,onPreview:function(){return zo("testAudioMaterialReviewTest")},fileUpload:h.fileUpload})),(l.sectionWeights||{}).mcSection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(Md,{formValues:a,instructorTest:l,test:t,sections:d,studentInput:m,testResult:(a.testResult||{}).multiplechoiceSection||{}})),(l.sectionWeights||{}).essaySection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(qd,{formValues:a,instructorTest:l,test:t,sections:d,studentInput:p,testResult:a.testResult||{}})),(l.sectionWeights||{}).speakingSection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(Ud,{test:t,instructorTest:l,sections:d,studentInput:f,testResult:(a.testResult||{}).speakingSection})),(l.sectionWeights||{}).fillBlankSection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(Qd,{studentInput:g,test:t,instructorTest:l,sections:d,testResult:(a.testResult||{}).fillInBlanksSection||{}})),r.a.createElement(zd,{testResult:a.testResult,test:t,instructorTest:a.instructorTest||{},testReviewing:i}))}}]),n}(a.Component),Vd=Object(_t.a)({form:"testReview"})(Gd),$d=Object(c.b)((function(e){var t=e.common.modalDocument.test;return{formValues:Object(Ve.a)("testReview")(e),initialValues:t,notifications:e.common.notifications,token:e.authentication.token,userId:e.authentication.userId}}),(function(e){return{markAsSeen:function(t,n){e(De(t,n))}}}))(Object(Ia.a)("common")(Vd)),Yd=n(1266),Jd=Object(Ye.a)((function(e){return{root:Object(po.a)({maxWidth:"99%",flexGrow:1},e.breakpoints.up("960px"),{maxWidth:400}),header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:Object(po.a)({height:"100%",maxWidth:300,overflow:"hidden",display:"block",width:"100%"},e.breakpoints.up("960px"),Object(po.a)({maxWidth:800},"maxWidth",400)),editor:{width:"100%"}}}));var Kd=Object(c.b)((function(e){return{modalDocument:e.common.modalDocument,token:e.authentication.token,studentLoggedIn:e.authentication.studentLoggedIn,courses:e.common.courses,selectedCourse:e.common.selectedCourse,notifications:e.common.notifications}}),(function(e){return{markSlideAsSeen:function(t,n,a){e(function(e,t,n){return console.log("token in action: ",n),{type:"MARK_SLIDE_AS_SEEN_START",payload:{lessonId:e,slideNumber:t,token:n}}}(t,n,a))},markAsSeen:function(t,n){e(De(t,n))},closeModal:function(){e({type:"CLOSE_MODAL"})}}}))((function(e){var t=e.modalDocument,n=e.markAsSeen,o=e.markSlideAsSeen,s=e.token,i=e.studentLoggedIn,c=e.selectedCourse,l=e.notifications,u=e.closeModal,d=Object(St.a)().t,m=c.lessons.find((function(e){return e._id===t._id})),p=(m||{}).lessonSlides||[],f=Jd(),g=Object(Du.a)(),b=r.a.useState(0),h=Object(mo.a)(b,2),E=h[0],v=h[1],y=r.a.useState(!1),T=Object(mo.a)(y,2),S=T[0],k=T[1],w=r.a.useState([]),O=Object(mo.a)(w,2),C=O[0],x=O[1],A=p.length,F=((m||{}).lessonSlides||[])[E]||{};return Object(a.useEffect)((function(){var e,t=function(){o(m._id,E,s)},n=document.querySelectorAll("audio");return n.length>0&&n[0].addEventListener("ended",t),C.forEach((function(e){return clearTimeout(e)})),F.seen||F.video||F.audio||(e=setTimeout(t,5e3)),x((function(t){return[].concat(Object(Pr.a)(t),[e])})),function(){n.length>0&&n[0].removeEventListener("ended",t),clearTimeout(e),C.forEach((function(e){return clearTimeout(e)}))}}),[E]),Object(a.useEffect)((function(){E+1>p.length&&v(p.length-1),p.length&&0!==p.length||u()}),[p.length]),Object(a.useEffect)((function(){var e=(l||[]).find((function(e){if(e.documentId===m._id&&i&&!e.seen)return e}));e&&n(e._id,s)}),[]),m?r.a.createElement("div",{className:f.root},i&&F.seen&&r.a.createElement(Yd.a,{severity:"success"}," ",d("lessons.completed")),r.a.createElement("div",{style:{minHeight:300}},F.slideContent&&!F.video&&r.a.createElement("div",{className:f.editor},r.a.createElement(Lr,{videoPlaying:S,type:"balloon",readOnly:!0,input:{value:F.slideContent+" "}})),F.audio&&r.a.createElement("div",{className:"lessonPreview[".concat(E,"]")},r.a.createElement(es,{audioSource:F.audio})),F.video&&!F.slideContent&&r.a.createElement(Po,{play:function(){return k(!0)},pause:function(){return k(!1)},ended:function(){k(!1),o(m._id,E,s)},url:F.video})),r.a.createElement(Yr.a,{steps:A,position:"static",variant:"text",activeStep:E,nextButton:r.a.createElement(ot.a,{size:"small",onClick:function(){v((function(e){return e+1}))},disabled:E===A-1},d("lessons.buttons.next"),"rtl"===g.direction?r.a.createElement(ed.a,null):r.a.createElement(nd.a,null)),backButton:r.a.createElement(ot.a,{size:"small",onClick:function(){v((function(e){return e-1}))},disabled:0===E},"rtl"===g.direction?r.a.createElement(nd.a,null):r.a.createElement(ed.a,null),d("lessons.buttons.back"))})):null})),Zd=function(e){var t=e.fields,n=e.formValues,a=void 0===n?{}:n,o=e.meta,s=(o.error,o.submitFailed,e.changeDocument),i=Object(St.a)().t,c=Object(Du.a)(),l=r.a.useState(0),u=Object(mo.a)(l,2),d=u[0],m=u[1],p=function(){m((function(e){return e-1}))},f=[{value:"",primaryText:""},{value:"governmentId",primaryText:i("account.governmentId")},{value:"birthCertificate",primaryText:i("account.birthCertificate")},{value:"transcript",primaryText:i("account.transcript")},{value:"legalStatusProof",primaryText:i("account.proofLegalStatus")},{value:"cv",primaryText:i("account.cv")},{value:"testScoresProof",primaryText:i("account.proofTestScores")},{value:"referenceLetter",primaryText:i("account.letterReference")},{value:"statementPurpose",primaryText:i("account.statementPurpose")},{value:"other",primaryText:i("account.other")}],g=(t||[]).length;return r.a.createElement(v,null,g>0&&r.a.createElement(Yr.a,{steps:g,position:"static",variant:"text",activeStep:d,nextButton:r.a.createElement(ot.a,{size:"small",onClick:function(){m((function(e){return e+1}))},disabled:d===g-1},i("account.buttons.next"),"rtl"===c.direction?r.a.createElement(ed.a,null):r.a.createElement(nd.a,null)),backButton:r.a.createElement(ot.a,{size:"small",onClick:p,disabled:0===d},"rtl"===c.direction?r.a.createElement(nd.a,null):r.a.createElement(ed.a,null),i("account.buttons.back"))}),r.a.createElement("div",null,r.a.createElement(ot.a,{onClick:function(e){e.preventDefault(),m(g),t.push()},"aria-label":"delete",fullWidth:!0},i("account.buttons.addDocument")),r.a.createElement(ot.a,{fullWidth:!0,disabled:!(g>0),onClick:function(e){e.preventDefault(),0!==d&&p(),t.remove(d)},"aria-label":"delete"},i("account.buttons.removeDocument")),(t||[]).map((function(e,t){if(t!==d)return null;var n=(a.documents[t]||{}).document instanceof File?(((a.documents[t]||{}).document||{}).name||"").split(".").pop():((a.documents[t]||{}).document||"").split(".").pop(),o=((a.documents||[])[t]||{}).loadedDocument;return r.a.createElement(v,{key:e},r.a.createElement(ca.a,{name:"documents.".concat(t,".documentType"),fullWidth:!0,simple:!0,textLabel:i("account.documentType"),component:Hs,label:"document type",options:f}),r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(ca.a,{name:"documents.".concat(t,".document"),component:Pa,loadedFile:o,mimeTypesAllowed:"image/jpeg, application/pdf, .doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",extensionsAllowed:["jpeg","jpg","jfif","pdf","docx","doc"],onChangeFile:function(e){s("documents.".concat(t,".loadedDocument"),e)},compressImage:!0,index:t,uploadButtonText:((a.documents||[])[t]||{}).document?i("account.buttons.updateDocument"):i("account.buttons.uploadDocument")})),"pdf"===n&&r.a.createElement(ji,{url:(a.documents[t]||{}).loadedDocument,index:t}))}))))},Xd=Object(_t.a)({form:"accountForm",destroyOnUnmount:!1})((function(e){var t=e.formValues,n=void 0===t?{}:t,a=e.changeDocument;return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(rr.a,{name:"documents",formValues:n,changeDocument:a,component:Zd})))})),em=Object(c.b)((function(e){return{formValues:Object(Ve.a)("accountForm")(e),token:e.authentication.token,userId:e.authentication.userId,notification:e.common.notification,course:e.common.selectedCourse,courses:e.common.courses,coursePanel:e.common.coursePanel,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn,adminLoggedIn:e.authentication.adminLoggedIn,tab:e.common.tab,user:e.authentication,initialValues:e.authentication.loadedUser}}),(function(e){return{changeDocument:function(t,n){e(Object(Dt.a)("accountForm",t,n))}}}))(Xd),tm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={mcSection:[],essaySection:[],speakingSection:[],fillInBlankSection:[]},n=!0,a=e.instructorTest||{};(parseFloat(e.gradeAdjusted)>100||parseFloat(e.gradeAdjusted)<0)&&e.gradeOverride&&(t.gradeAdjusted=na.t("gradeTestForm.errors.finalGradeBetweenZeroAndHundred"),n=!1),(parseFloat(e.latePenalty)>100||parseFloat(e.latePenalty)<0)&&(t.latePenalty=na.t("gradeTestForm.errors.latePenaltyBetweenZeroAndHundred"),n=!1),e.gradeOverride&&!e.gradeAdjusted&&(t.gradeAdjusted=na.t("gradeTestForm.errors.provideGrade"),n=!1);var r=a.multipleChoiceQuestions||[];t.mcSection=(e.mcSection||[]).map((function(e,t){var a,o=(r[t]||{}).marks;return parseFloat(e.marks)<0&&(a=na.t("gradeTestForm.errors.valueCantBeNegative")),parseFloat(e.marks)>o&&(a="".concat(na.t("gradeTestForm.errors.valueCantBeGreaterThan")," ").concat(o)),e.marks&&""!==e.marks||0===e.marks||(a=na.t("gradeTestForm.errors.required")),a&&(n=!1),{marks:a}}));var o=a.essayQuestions||[];t.essaySection=(e.essaySection||[]).map((function(e,t){var a,r=(o[t]||{}).marks;return parseFloat(e.marks)<0&&(a=na.t("gradeTestForm.errors.valueCantBeNegative")),parseFloat(e.marks)>r&&(a="".concat(na.t("gradeTestForm.errors.valueCantBeGreaterThan")," ").concat(r)),e.marks&&""!==e.marks||0===e.marks||(a=na.t("gradeTestForm.errors.required")),a&&(n=!1),{marks:a}}));var s=a.speakingQuestions||[];t.speakingSection=(e.speakingSection||[]).map((function(e,t){var a,r=(s[t]||{}).marks;return parseFloat(e.marks)<0&&(a=na.t("gradeTestForm.errors.valueCantBeNegative")),parseFloat(e.marks)>r&&(a="".concat(na.t("gradeTestForm.errors.valueCantBeGreaterThan")," ").concat(r)),e.marks&&""!==e.marks||0===e.marks||(a=na.t("gradeTestForm.errors.required")),a&&(n=!1),{marks:a}}));var i=(a.fillInBlanksQuestions||{}).blanks||[];return t.fillInBlankSection=(e.fillInBlankSection||[]).map((function(e,t){var a,r=(i[t]||{}).marks;return parseFloat(e.marks)<0&&(a=na.t("gradeTestForm.errors.valueCantBeNegative")),parseFloat(e.marks)>r&&(a="".concat(na.t("gradeTestForm.errors.valueCantBeGreaterThan")," ").concat(r)),e.marks&&""!==e.marks||0===e.marks||(a=na.t("gradeTestForm.errors.required")),a&&(n=!1),{marks:a}})),t.isValid=n,t},nm=function(e){var t=e.test,n=(e.isTest,e.mcSectionStudentInput),a=e.sections,o=(e.formValues,Object(St.a)().t),s={background:"#1976d2",borderRadius:4,color:"white",padding:10};return r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h5",gutterBottom:!0},o("gradeTestForm.multiplechoicesection")),a>1&&r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},"".concat(o("gradeTestForm.sectionWorth")," ").concat(((t||{}).sectionWeights||{}).mcSection,"%")),((t||{}).multipleChoiceQuestions||[]).map((function(e,t){var a=((e||{}).correctAnswers||[]).map((function(e){return parseInt(e)-1})),i=((e||{}).answerOptions||[]).filter((function(e,t){if(a.includes(t))return e})),c=((e||{}).answerOptions||[]).filter((function(e,t){if(!a.includes(t))return e})),l=(n.answers.find((function(e){return e.questionNumber===t+1}))||{}).answers,u=(((e||{}).answerOptions||[]).filter((function(e){if(!(l||[]).includes(e))return e}))||[]).filter((function(e){if((i||[]).includes(e))return e})),d=c.filter((function(e){if((l||[]).includes(e))return e})),m=0===u.length&&0===d.length;return r.a.createElement("div",{className:Ku.a.QuestionContainer,key:e+t},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(o("gradeTestForm.question")," ").concat(t+1)),r.a.createElement("div",{style:s,dangerouslySetInnerHTML:{__html:ac.a.sanitize(e.question)}}),r.a.createElement(et.a,{style:{display:"block"},color:"error",variant:"caption",gutterBottom:!0},1===d.length?o("gradeTestForm.oneAnswerIncorrect"):null),r.a.createElement(et.a,{style:{display:"block"},color:"error",variant:"caption",gutterBottom:!0},1===u.length?o("gradeTestForm.oneAnswerMissing"):null),r.a.createElement(et.a,{style:{display:"block"},color:"error",variant:"caption",gutterBottom:!0},d.length>1?"".concat(d.length,"  ").concat(o("gradeTestForm.xAnswersSelectedIncorrectly")):null),r.a.createElement(et.a,{style:{display:"block"},color:"error",variant:"caption",gutterBottom:!0},u.length>1?"".concat(d.length,"  ").concat(o("gradeTestForm.xAnswersMissing")):null),r.a.createElement(et.a,{style:{display:"block",marginBottom:20},variant:"body1",gutterBottom:!0},m&&r.a.createElement("span",{className:Ku.a.GreenText},o("gradeTestForm.studentAnsweredCorrectly"))),e.answerOptions.map((function(e,t){return r.a.createElement(et.a,{key:e+t,variant:"body2",gutterBottom:!0},r.a.createElement("span",null,"".concat(t+1,") ")),r.a.createElement("span",{className:(l||[]).includes(e)?Ku.a.YellowBackground:""},"".concat(e)),r.a.createElement("span",{className:((u||[]).includes(e)||(d||[]).includes(e))&&(l||[]).includes(e)?Ku.a.RedText:""},((u||[]).includes(e)||(d||[]).includes(e))&&(l||[]).includes(e)&&r.a.createElement("span",{className:Ku.a.RedText},r.a.createElement("i",{className:"fa fa-times"}))),r.a.createElement("span",{className:(u||[]).includes(e)||(d||[]).includes(e)||!(l||[]).includes(e)?"":Ku.a.GreenText},!(u||[]).includes(e)&&!(d||[]).includes(e)&&(l||[]).includes(e)&&r.a.createElement("span",{className:Ku.a.GreenText},r.a.createElement("i",{className:"fa fa-check"}))))})),r.a.createElement(et.a,{style:{marginTop:15},variant:"body2",gutterBottom:!0},a.length>1?o("gradeTestForm.correctAnswerPlural"):o("gradeTestForm.correctAnswer")+": ",a.map((function(e,t){return r.a.createElement("span",{key:e+t},"".concat(e+1,"\n                    ").concat(a.length>1&&t!==a.length-1?",":""," "))}))),r.a.createElement(et.a,{style:{marginTop:10},variant:"body1",gutterBottom:!0},o("gradeTestForm.fields.marks")),r.a.createElement(ca.a,{name:"mcSection.".concat(t,".marks"),simple:!0,component:Oa,width:80})," / ".concat((e||{}).marks),e.solution&&r.a.createElement(v,null,r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},o("gradeTestForm.solution")),r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},e.solution)),r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},o("gradeTestForm.fields.feedback")),r.a.createElement(ca.a,{name:"mcSection.".concat(t,".additionalNotes"),component:di,options:{rows:3,variant:ma.a,marginTop:!0}}))})))},am=function(e){var t=e.test,n=(e.isTest,e.essaySectionStudentInput),a=e.sections,o=e.formValues,s=e.path,i={background:"#1976d2",borderRadius:4,color:"white",padding:10},c=Object(St.a)().t;return r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h5",gutterBottom:!0},c("gradeTestForm.essaysection")),a>1&&r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},"".concat(c("gradeTestForm.sectionWorth")," ").concat(((t||{}).sectionWeights||{}).essaySection,"%")),((t||{}).essayQuestions||[]).map((function(e,t){var a=n.answers.find((function(e){return e.questionNumber===t+1}));return r.a.createElement("div",{className:Ku.a.QuestionContainer,key:e+t},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(c("gradeTestForm.question")," ").concat(t+1)),r.a.createElement("div",{style:i,dangerouslySetInnerHTML:{__html:ac.a.sanitize(e.question)}}),(a||{}).answer?r.a.createElement(v,null,r.a.createElement(ca.a,{name:"essaySection.".concat(t,".allowCorrection"),options:{label:c("gradeTestForm.fields.correctUsingTextEditor"),checked:!1},component:Ea}),r.a.createElement("div",{style:{border:"2px solid #ffc107",borderRadius:4,padding:5}},r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},"".concat(c("gradeTestForm.studentAnswer"))),(((o||{}).essaySection||[])[t]||!1).allowCorrection?r.a.createElement(ca.a,{reduxForm:"gradeForm",component:Lr,name:"essaySection.".concat(t,".instructorCorrection"),field:"essaySection.".concat(t,".instructorCorrection"),path:s}):r.a.createElement("div",{dangerouslySetInnerHTML:{__html:ac.a.sanitize((a||{}).answer)}}))):r.a.createElement(et.a,{variant:"caption",color:"error",gutterBottom:!0},c("gradeTestForm.noAnswerProvided")),r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},c("gradeTestForm.fields.marks")),r.a.createElement(ca.a,{name:"essaySection.".concat(t,".marks"),simple:!0,component:Oa,width:80})," / ".concat((e||{}).marks),e.solution&&r.a.createElement(v,null,r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},c("gradeTestForm.solution")),r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},e.solution)),r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},c("gradeTestForm.fields.feedback")),r.a.createElement(ca.a,{name:"essaySection.".concat(t,".additionalNotes"),component:di,options:{rows:3,variant:ma.a,marginTop:!0}}))})))},rm=function(e){var t=e.test,n=(e.isTest,e.speakingSectionStudentInput),a=e.sections,o=e.formValues,s=e.onInitiateRecording,i=e.onSetAudioData,c=e.onGetRecordingTimeout,l=e.onGetRecorderFromClick,u=e.micBlockedWarning,d={background:"#1976d2",borderRadius:4,color:"white",padding:10},m=Object(St.a)().t;return r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h5",gutterBottom:!0},m("gradeTestForm.speakingsection")),a>1&&r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},"".concat(m("gradeTestForm.sectionWorth")," ").concat(((t||{}).sectionWeights||{}).speakingSection,"%")),((t||{}).speakingQuestions||[]).map((function(e,t){var a=((n||{}).answers||[]).find((function(e){if(e.questionNumber===t+1)return e}));return r.a.createElement("div",{className:Ku.a.QuestionContainer,key:e+t},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(m("gradeTestForm.question")," ").concat(t+1)),e.question&&r.a.createElement("div",{style:d,dangerouslySetInnerHTML:{__html:ac.a.sanitize(e.question)}}),e.questionAudio&&r.a.createElement(Ri,{onPreview:e.questionAudio?function(){return zo("audioQuestion[".concat(t,"]"))}:null,audioSource:e.questionAudio,id:"audioQuestion[".concat(t,"]"),previewType:"button",previewText:m("gradeTestForm.buttons.playQuestion"),fullWidth:!0}),!(a||{}).answer&&r.a.createElement("div",{style:{margin:"auto",width:"50%"}},r.a.createElement(et.a,{style:{textAlign:"center"},variant:"caption",color:"error",gutterBottom:!0},m("gradeTestForm.noAnswerProvided"))),r.a.createElement(Ri,{onPreview:a.answer?function(){return zo("audioAnswer[".concat(t,"]"))}:null,audioSource:a?(a||{}).answer:null,id:"audioAnswer[".concat(t,"]"),previewType:"button",previewText:m("gradeTestForm.buttons.playStudentsAnswer"),disabled:!(a||{}).answer,fullWidth:!0}),r.a.createElement(et.a,{variant:"body1",gutterBottom:!0},m("gradeTestForm.fields.marks")),r.a.createElement(ca.a,{name:"speakingSection.".concat(t,".marks"),simple:!0,component:Oa,width:80})," / ".concat((e||{}).marks),e.audio&&r.a.createElement(Ri,{onPreview:e.audio?function(){return zo("audioExplanation[".concat(t,"]"))}:null,audioSource:e.audio,id:"audioExplanation[".concat(t,"]"),previewType:"button",previewText:m("gradeTestForm.buttons.playSolution"),fullWidth:!0}),r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},m("gradeTestForm.fields.feedback")),r.a.createElement(ca.a,{name:"speakingSection.".concat(t,".additionalNotes"),component:di,options:{multiline:!0,rows:3,variant:ma.a}}),r.a.createElement(ca.a,{component:Li,name:"speakingSection.".concat(t,".recordedBlob"),onStart:function(){var e=Object(Aa.a)(xa.a.mark((function e(n){var a;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ho(n,null,t,null,function(){var e=Object(Aa.a)(xa.a.mark((function e(n){var a;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:a=e.sent,i(a.blob,a.file,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,s(a.recorder,a.recordingTimeout,t,a.isRecording);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onStop:function(){var e=Object(Aa.a)(xa.a.mark((function e(n){var a;return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wo(n,null,t,c(t),l(t));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,i(a.blob,a.file,t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPreview:function(){zo("audioFeedback[".concat(t,"]"))},onClear:function(){return i(null,null,t)},id:"audioFeedback[".concat(t,"]"),recordDisabled:((o.speakingSection||[])[t]||{}).recording,audioSource:((o.speakingSection||[])[t]||{}).recordedBlob,previewType:"button",recordButtonText:m("gradeTestForm.buttons.recordFeedback"),isMicAlert:u}))})))},om=function(e){var t=e.test,n=void 0===t?{}:t,a=(e.isTest,e.sections),o=e.fillInBlanksStudentAnswers,s=Object(St.a)().t,i=(n.fillInBlanksQuestions||"").text,c=(n.fillInBlanksQuestions||"").blanks,l=Ki()(i||"",/<mark [^>]+>(.*?)<\/mark>/g,(function(e,t){var n=t/2-.5,a=(c||[])[n]||{},i=a.correctAnswer;if(!0===a.selectableAnswer){var l=((o||[]).find((function(e){return e.questionNumber===n+1}))||{}).answer;return r.a.createElement(v,{key:e+n},r.a.createElement("span",{className:Ku.a.BlankPreview},n+1," "),a.audio&&r.a.createElement(Xi,{id:n,source:a.audio}),r.a.createElement("select",{readOnly:!0,value:s("gradeTestForm.studentSelected"),className:Ku.a.SelectField},r.a.createElement("option",{disabled:!0,value:i===l?s("gradeTestForm.studentSelected"):"Correct Option"},i),(a.incorrectAnswers||[]).map((function(e){return r.a.createElement("option",{key:e,disabled:!0,value:s(e===l?"gradeTestForm.studentSelected":"gradeTestForm.incorrectOptionOne")},e)}))),i===l?r.a.createElement("span",{className:Ku.a.GreenText},r.a.createElement("i",{className:"fa fa-check"})):r.a.createElement("span",{className:Ku.a.RedText},r.a.createElement("i",{className:"fa fa-times"})))}if(!1===a.selectableAnswer){var u=((o||[]).find((function(e){return e.questionNumber===n+1}))||{}).answer;return r.a.createElement(v,{key:e+n},r.a.createElement("span",{className:Ku.a.Inline},r.a.createElement("span",{className:Ku.a.BlankPreview},n+1," "),a.audio&&r.a.createElement(Xi,{id:n,source:a.audio}),r.a.createElement("input",{readOnly:!0,type:"text",className:Ku.a.InputField,value:"".concat(u||"")}),(i||"").toLowerCase()===(u||"").toLowerCase()?r.a.createElement("span",{className:Ku.a.GreenText},r.a.createElement("i",{className:"fa fa-check"})):r.a.createElement("span",{className:Ku.a.RedText},r.a.createElement("i",{className:"fa fa-times"}))))}})),u=[];l.forEach((function(e,t){"string"===typeof e?u.push(e):u.push($i.a.renderToString(e))}));var d=(u||"").join("");return r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h5",gutterBottom:!0},s("gradeTestForm.fillintheblankssection")),a>1&&r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},"".concat(s("gradeTestForm.sectionWorth")," ").concat(((n||{}).sectionWeights||{}).fillBlanksSection,"%")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:ac.a.sanitize(d,{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}),((n.fillInBlanksQuestions||{}).blanks||[]).map((function(e,t){var n=((o||[]).find((function(e){return e.questionNumber===t+1}))||{}).answer;return r.a.createElement("div",{className:Ku.a.QuestionContainer,key:e+t},r.a.createElement(et.a,{variant:"h6",gutterBottom:!0},"".concat(s("gradeTestForm.blank")," ").concat(t+1)),r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},s("gradeTestForm.studentAnswer"),"Select the correct answer"!==n&&n&&r.a.createElement("span",{className:"Select the correct answer"!==n&&n?Ku.a.YellowBackground:null},"Select the correct answer"===n?"":n)),r.a.createElement(et.a,{variant:"body2",gutterBottom:!0},s("gradeTestForm.correctAnswer")+": "," ",r.a.createElement("span",null,(e||{}).correctAnswer)),r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},s("gradeTestForm.fields.marks")),r.a.createElement(ca.a,{name:"fillInBlankSection.".concat(t,".marks"),simple:!0,component:Oa,width:80})," / ".concat((e||{}).marks),r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},s("gradeTestForm.fields.feedback")),r.a.createElement(ca.a,{name:"fillInBlankSection.".concat(t,".additionalNotes"),placeholder:"Additional notes for student",component:di,label:"Additional Notes",options:{multiline:!0,rows:3,variant:ma.a}}))})))},sm=function(e){var t=e.onGetRowSectionMarks,n=e.onGetFinalGradeRow,a=e.formValues,o=e.test,s=e.isTest,i=Object(St.a)().t;return r.a.createElement(v,null,r.a.createElement(et.a,{variant:"h5",gutterBottom:!0},i("gradeTestForm.summary")),r.a.createElement(ni.a,{className:Ku.a.table,"aria-label":"simple table"},r.a.createElement(ai.a,null,t(o).map((function(e,t){return e?r.a.createElement(oi.a,{className:0===t?Ku.a.MuiTableRow:"",key:e.info},r.a.createElement(ri.a,{className:0===t?Ku.a.MuiTableCell:"",component:"th",scope:"row"},i("gradeTestForm.".concat((e.info||"").replace(/ /g,"").replace(/-/g,"").toLowerCase()))),r.a.createElement(ri.a,{className:0===t?Ku.a.MuiTableCell:"",align:"right"},e.value)):null})))),!(a||{}).gradeOverride&&r.a.createElement(v,null,r.a.createElement(ni.a,{className:Ku.a.table,"aria-label":"simple table"},r.a.createElement(ai.a,null,n(o).map((function(e,t){return r.a.createElement(oi.a,{className:0===t?Ku.a.MuiTableRow:"",key:e.info},r.a.createElement(ri.a,{className:0===t?Ku.a.MuiTableCell:"",component:"th",scope:"row"},r.a.createElement(et.a,{variant:"body1",gutterBottom:!0},r.a.createElement("span",null,i("gradeTestForm.".concat((e.info||"").replace(" ","").replace("-","").toLowerCase()))),(o||{}).passingGrade&&r.a.createElement(v,null,parseFloat(e.value)>=(o||{}).passingGrade?r.a.createElement("span",{style:{color:"#4caf50",marginLeft:5}},i("gradeTestForm.passed")):r.a.createElement("span",{style:{color:"red",marginLeft:5}},i("gradeTestForm.failed"))))),r.a.createElement(ri.a,{className:0===t?Ku.a.MuiTableCell:"",align:"right"},r.a.createElement(et.a,{variant:"body1",gutterBottom:!0},parseFloat(parseFloat(e.value||0).toFixed(2)))))})))),r.a.createElement(et.a,{variant:"caption",gutterBottom:!0},i(s?"gradeTestForm.gradeAdjustedForWeights":"gradeTestForm.gradeAdjustedForWeightsAndLatePenalty"))))},im=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).handleMicAlert=function(){clearTimeout(a.state.micBlockedWarningTO),a.setState({micBlockedWarning:!0});var e=setTimeout((function(){a.setState({micBlockedWarning:!1})}),5e3);a.setState({micBlockedWarningTO:e})},a.handleWindowClose=function(e){return e.preventDefault(),a.state.isUpdating||a.handleDeleteUnsavedImages(),e.returnValue},a.handleDeleteUnsavedImages=function(){var e=ro(a.props.formValues,"gradeTest"),t=[];(e||[]).forEach((function(e){-1===a.state.initialUrls.findIndex((function(t){return t===e}))&&t.push(e)})),t.length>0&&a.props.deleteImg(t,a.props.token)},a.handleSubmit=function(e,t,n,r,o){a.props.touchField("latePenalty"),a.props.touchField("gradeAdjusted"),a.setState({isUpdating:!0},(function(){var s=a.props,i=s.formValues,c=s.token,l=s.studentGrading,u=s.clearTestGrading,d=s.postGrades;r.isValid?(d(i,c,l,n,"post"===e,!0,a.getSectionGrades(n),"post"!==e,a.getFinalGrade(n),a.getFilesToDelete(i,t),o),u()):a.setValidity(!1)}))},a.handleCheckboxChange=function(e){a.setState({confirmCheckBox:!a.state.confirmCheckBox})},a.initiateRecording=function(e,t,n,r){if(r){var o=a.props.changeField;o("speakingSection.".concat(n,".recording"),r),o("speakingSection.".concat(n,".recorder"),e),o("speakingSection.".concat(n,".recorderTimeout"),t)}else a.handleMicAlert()},a.setAudioData=function(e,t,n){var r=a.props.changeField;r("speakingSection.".concat(n,".recording"),!1),r("speakingSection.".concat(n,".recordedBlob"),e),r("speakingSection.".concat(n,".audioFile"),t)},a.state={initialUrls:[],confirmCheckBox:!1,isValid:!0,isUpdating:!1,micBlockedWarning:!1,micBlockedWarningTO:null},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("beforeunload",this.handleWindowClose);var t=ro(this.props.initialValues,"gradeTest");this.setState({initialUrls:t});var n=(this.props.notifications||[]).find((function(t){if(t.fromUser===e.props.studentGrading&&t.documentId===e.props.testGrading&&("testSubmitted"===t.documentType||"assignmentSubmitted"===t.documentType))return t}));n&&this.props.markAsSeen(n._id,this.props.token)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.handleWindowClose),this.state.isUpdating||this.handleDeleteUnsavedImages(),clearTimeout(this.state.micBlockedWarningTO)}},{key:"getFilesToDelete",value:function(e,t){var n=ro(t,"gradeTestAnswers")||[],a=ro(e,"gradeTest");return(this.state.initialUrls||[]).filter((function(e){if(!a.includes(e)&&!n.includes(e))return e}))}},{key:"getResults",value:function(){var e=this;return(this.props.results||[]).find((function(t){if(t.test._id===e.props.testGrading&&t.student._id===e.props.studentGrading)return t}))||{}}},{key:"getTestSections",value:function(e){return"camelCase"===e?["multipleChoice","essay","speaking","fillInBlanks"]:"camelCaseSection"===e?["mcSection","essaySection","speakingSection","fillInBlankSection"]:"camelCaseQuestions"===e?["multipleChoiceQuestions","essayQuestions","speakingQuestions","fillInBlanksQuestions"]:["Multiple-choice section","Essay section","Speaking section","Fill-in-the-blanks section"]}},{key:"getTotalMarks",value:function(e,t){var n=this;return this.getTestSections("camelCaseQuestions").map((function(a,r){var o=n.getTestSections("camelCase");if(t===o[r])return(3!==r?(e||{})[a]||[]:((e||{})[a]||{}).blanks||[]).reduce((function(e,t){return e+t.marks}),0)})).find((function(e){return e}))||0}},{key:"getDaysLate",value:function(e,t){if(!this.props.test&&(e||{}).allowLateSubmission&&!(parseInt((t||{}).submittedOn)<parseInt((e||{}).dueDate))){var n=(parseInt((t||{}).submittedOn)-parseInt((e||{}).dueDate))/864e5;return Math.ceil(n)}}},{key:"getStudentSectionMarks",value:function(e){var t=this,n=this.props.formValues||{};return this.getTestSections("camelCase").map((function(a,r){if(e===a)return(((n||{})[t.getTestSections("camelCaseSection")[r]]||[]).map((function(e){return""===e.marks?0:parseFloat(e.marks)}))||[]).reduce((function(e,t){return e+t}),0)})).find((function(e){return e}))||0}},{key:"getRecordingTimeout",value:function(e){return((this.props.formValues.speakingSection||[])[e]||{}).recorderTimeout}},{key:"getRecorderFromClick",value:function(e){return((this.props.formValues.speakingSection||[])[e]||{}).recorder}},{key:"getFinalGrade",value:function(e){var t=this,n=this.props.formValues,a=this.getTestSections("camelCase").map((function(n){return t.getTotalMarks(e,n)})).filter((function(e){return 0!==e})).length,r=this.getTestSections("camelCase").map((function(n,r){return t.getTotalMarks(e,n)>0?t.getStudentSectionMarks(n)/t.getTotalMarks(e,n)*((e||{}).sectionWeights||{})[3!==r?t.getTestSections("camelCaseSection")[r]:"fillBlankSection"]*a:0})).reduce((function(e,t){return e+t}))/a,o=this.props.test?parseFloat(r.toFixed(2)):parseFloat(r.toFixed(2))-((n||{}).latePenalty||0);return NaN===o?0:o}},{key:"createData",value:function(e,t){return{info:e,value:t}}},{key:"getSections",value:function(e){(Object.values((e||{}).sectionWeights||[]).filter((function(e){return null!==e}))||[]).length}},{key:"getRowSectionMarks",value:function(e){var t=this;return this.getTestSections("camelCase").map((function(n,a){return parseFloat(t.getTotalMarks(e,n).toFixed(2))>0?t.createData(t.getTestSections()[a],"".concat(parseFloat(t.getStudentSectionMarks(n).toFixed(2))," / ").concat(parseFloat(t.getTotalMarks(e,n).toFixed(2)))):null}))||[]}},{key:"getFinalGradeRow",value:function(e){return[this.createData(this.props.test?"Test grade":"Assignment grade","".concat(this.getFinalGrade(e)<0?0:this.getFinalGrade(e),"%"))]||[]}},{key:"getSectionGrades",value:function(e){var t=this;return this.getTestSections("camelCase").map((function(n){return t.getStudentSectionMarks(n)/t.getTotalMarks(e,n)*100}))}},{key:"setValidity",value:function(e){this.setState({isValid:e})}},{key:"render",value:function(){var e,t,n=this,a=this.props,o=a.errors,s=a.loading,i=a.formValues,c=void 0===i?{}:i,l=a.course,u=void 0===l?{}:l,d=a.modalDocument,m=a.t,p=!o.isValid&&!this.state.isValid,f=this.getResults().test||{},g=this.getResults().testResult||{},b=g.multiplechoiceSection,h=g.essaySection,E=g.speakingSection,y=g.fillInBlanksSection,T=(y||{}).answers,S="courses/".concat(u._id,"/tests/").concat(f._id,"/results/").concat(g._id);this.state.confirmCheckBox||(g||{}).graded||(t={color:"rgba(0,0,0,0.12)",borderColor:"rgba(0,0,0,0.12)",backgroundColor:"white"}),this.state.confirmCheckBox&&p&&(t={color:"#FF4136",borderColor:"#FF4136",backgroundColor:"#ffcdd2"}),this.state.confirmCheckBox&&!p&&(t={color:"#43a047",borderColor:"#43a047",backgroundColor:"#e8f5e9"});var k=d.results.find((function(e){return e.student._id===g.student}))||{};return console.log("(test || {}).passingGrade",(f||{}).passingGrade),r.a.createElement("div",null,r.a.createElement(to,{active:s,transparent:!0}),r.a.createElement(Zu,{test:f,student:k.student}),r.a.createElement(Qs,(e={index:"testSectionReview",summary:"".concat(f.assignment?"Assignment":"Test"," resources")},Object(po.a)(e,"summary",f.assignment?m("gradeTestForm.assignmentResources"):m("gradeTestForm.testResources")),Object(po.a)(e,"disabled",!Yu(f,"test").readingMaterials.content&&!Yu(f,"test").audioMaterials.audio),e),r.a.createElement(Vc,{audioId:"testAudioMaterialReviewTest",pdfIndex:4,readingContent:Yu(f,"test").readingMaterials.content,audioSource:Yu(f,"test").audioMaterials.audio,onPreview:function(){return zo("testAudioMaterialReviewTest")},fileUpload:Yu(f,"test").readingMaterials.fileUpload})),((f||{}).sectionWeights||{}).mcSection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(nm,{formValues:c,sections:this.getSections(f),mcSectionStudentInput:b,isTest:this.props.test,test:f}),r.a.createElement(Qs,{index:"mcSectionPreview",summary:m("gradeTestForm.sectionResources"),disabled:!Yu(f,"mc").readingMaterials.content&&!Yu(f,"mc").audioMaterials.audio},r.a.createElement(Vc,{audioId:"mcAudioMaterialPreviewTest",pdfIndex:0,readingContent:Yu(f,"mc").readingMaterials.content,audioSource:Yu(f,"mc").audioMaterials.audio,onPreview:function(){return zo("mcAudioMaterialPreviewTest")},fileUpload:Yu(f,"mc").readingMaterials.fileUpload}))),((f||{}).sectionWeights||{}).essaySection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(am,{formValues:c,sections:this.getSections(f),essaySectionStudentInput:h,isTest:this.props.test,test:f,path:S}),r.a.createElement(Qs,{index:"essaySectionPreview",summary:m("gradeTestForm.sectionResources"),disabled:!Yu(f,"essay").readingMaterials.content&&!Yu(f,"essay").audioMaterials.audio},r.a.createElement(Vc,{audioId:"essayAudioMaterialPreviewTest",pdfIndex:1,readingContent:Yu(f,"essay").readingMaterials.content,audioSource:Yu(f,"essay").audioMaterials.audio,onPreview:function(){return zo("essayAudioMaterialPreviewTest")},fileUpload:Yu(f,"essay").readingMaterials.fileUpload}))),((f||{}).sectionWeights||{}).speakingSection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(rm,{formValues:c,micBlockedWarning:this.state.micBlockedWarning,sections:this.getSections(f),speakingSectionStudentInput:E,isTest:this.props.test,test:f,onInitiateRecording:function(e,t,a,r){return n.initiateRecording(e,t,a,r)},onSetAudioData:function(e,t,a){return n.setAudioData(e,t,a)},onGetRecordingTimeout:function(e){return n.getRecordingTimeout(e)},onGetRecorderFromClick:function(e){return n.getRecorderFromClick(e)}}),r.a.createElement(Qs,{index:"speakingSectionPreview",summary:m("gradeTestForm.sectionResources"),disabled:!Yu(f,"speaking").readingMaterials.content&&!Yu(f,"speaking").audioMaterials.audio},r.a.createElement(Vc,{audioId:"speakingAudioMaterialPreviewTest",pdfIndex:2,readingContent:Yu(f,"speaking").readingMaterials.content,audioSource:Yu(f,"speaking").audioMaterials.audio,onPreview:function(){return zo("speakingAudioMaterialPreviewTest")},fileUpload:Yu(f,"speaking").readingMaterials.fileUpload}))),((f||{}).sectionWeights||{}).fillBlankSection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(om,{formValues:c,fillInBlanksStudentAnswers:T,sections:this.getSections(f),fillblankSectionStudentInput:y,isTest:this.props.test,test:f}),r.a.createElement(Qs,{index:"fillblanksSectionPreview",summary:m("gradeTestForm.sectionResources"),disabled:!Yu(f,"fillblanks").readingMaterials.content&&!Yu(f,"fillblanks").audioMaterials.audio},r.a.createElement(Vc,{audioId:"fillblanksAudioMaterialPreviewTest",pdfIndex:3,readingContent:Yu(f,"fillblanks").readingMaterials.content,audioSource:Yu(f,"fillblanks").audioMaterials.audio,onPreview:function(){return zo("fillblanksAudioMaterialPreviewTest")},fileUpload:Yu(f,"fillblanks").readingMaterials.fileUpload}))),(f||{}).allowLateSubmission&&r.a.createElement(v,null,r.a.createElement(et.a,{style:{marginTop:40},variant:"h6",gutterBottom:!0},m("gradeTestForm.latePenalty")),r.a.createElement(ca.a,{name:"latePenalty",input:{value:""},simple:!0,component:Oa}),r.a.createElement(et.a,{variant:"caption",gutterBottom:!0,paragraph:!0},"".concat(this.getDaysLate(f,g)||0," ").concat(1===this.getDaysLate(f,g)?m("gradeTestForm.dayLateSingular"):m("gradeTestForm.dayLatePlural")," x ").concat((f||{}).latePenalty,"% ").concat(m("gradeTestForm.latePenalty").toLowerCase()))),r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(sm,{isTest:this.props.test,test:f,formValues:c,onGetRowSectionMarks:function(e){return n.getRowSectionMarks(e)},onGetFinalGradeRow:function(e){return n.getFinalGradeRow(e)}})),r.a.createElement(ca.a,{name:"gradeOverride",options:{label:m("gradeTestForm.fields.overrideGrade"),checked:!1},component:Ea}),r.a.createElement("div",{style:{display:"flex",justifyContent:"start"}},r.a.createElement(ca.a,{name:"gradeAdjusted",component:Oa,options:{label:m("gradeTestForm.fields.gradeAdjustment"),size:"small",disabled:!(c||{}).gradeOverride}}),(f||{}).passingGrade&&c.gradeOverride&&parseFloat(c.gradeAdjusted)>=0&&parseFloat(c.gradeAdjusted)<=100&&r.a.createElement(v,null,parseFloat(c.gradeAdjusted)>=(f||{}).passingGrade?r.a.createElement("span",{style:{color:"#4caf50",marginLeft:25,lineHeight:3}},m("gradeTestForm.passed")):r.a.createElement("span",{style:{color:"red",marginLeft:25,lineHeight:3}},m("gradeTestForm.failed")))),r.a.createElement(et.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},m("gradeTestForm.fields.gradeAdjustmentExplanation")),r.a.createElement(ca.a,{name:"gradeAdjustmentExplanation",component:di,options:{multiline:!0,rows:3,variant:ma.a,disabled:!(c||{}).gradeOverride}}),!(g||{}).graded&&r.a.createElement(ot.a,{onClick:function(){n.handleSubmit("save",g,f,o,S)},style:p?{color:"#FF4136",borderColor:"#FF4136",backgroundColor:"#ffcdd2"}:{},variant:"outlined",fullWidth:!0,type:"button"},m("gradeTestForm.buttons.saveGradesExit")),(f||{}).gradeReleaseDate?r.a.createElement(et.a,{paragraph:!0,variant:"body1",gutterBottom:!0},parseInt((f||{}).gradeReleaseDate)<Date.now()?m("gradeTestForm.gradeRelaseDatePassedWarning"):"".concat(m("gradeTestForm.gradeReleaseDateNotYetPassedWarning")," ").concat(ct()(parseInt((f||{}).gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),".")):r.a.createElement(et.a,{paragraph:!0,variant:"body1",gutterBottom:!0},m("gradeTestForm.noGradeReleaseDateWarning")),!(g||{}).graded&&r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:this.state.confirmCheckBox,onChange:this.handleCheckboxChange,value:"checked"}),label:m("gradeTestForm.fields.agree")}),p&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},r.a.createElement(et.a,{color:"error"}," ",m("gradeTestForm.errors.correctForm"))),r.a.createElement(ot.a,{onClick:function(){n.handleSubmit("post",g,f,o,S)},style:t,variant:"outlined",type:"button",disabled:!this.state.confirmCheckBox&&!(g||{}).graded},(g||{}).graded?m("gradeTestForm.buttons.updateGrades"):m("gradeTestForm.buttons.postGrades")))}}]),n}(a.Component),cm=Object(_t.a)({form:"gradeForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0,enableReinitialize:!0,validate:tm})(im),lm=Object(c.b)((function(e){var t=e.instructorTest.initialGradeValues,n=e.common.modalDocument,a=e.common.selectedCourse,r=(a.tests||[]).find((function(e){return e._id===n.testId}));return{formValues:Object(Ve.a)("gradeForm")(e),errors:Object(Ft.a)("gradeForm")(e),loading:e.instructorTest.loading,token:e.authentication.token,course:a,testGrading:n.testId,studentGrading:n.studentId,results:n.results,initialValues:Object(At.a)(Object(At.a)({},t),{},{instructorTest:r}),isTest:0===e.common.tab,notifications:e.common.notifications,modalDocument:e.common.modalDocument,test:0===e.common.tab}}),(function(e){return{postGrades:function(t,n,a,r,o,s,i,c,l,u,d){e(function(e,t,n,a,r,o,s,i,c,l,u){return{type:"GRADE_TEST_START",payload:{formValues:e,token:t,studentId:n,test:a,graded:r,marking:o,sectionGrades:s,gradingInProgress:i,grade:c,filesToDelete:l,filePath:u}}}(t,n,a,r,o,s,i,c,l,u,d))},clearTestGrading:function(){return e({type:"CLEAR_TEST_TO_GRADE"})},changeField:function(t,n){e(Object(Dt.a)("gradeForm",t,n))},markAsSeen:function(t,n){e(De(t,n))},deleteImg:function(t,n){e(ke(t),n)},touchField:function(t){e(Object(Dt.d)("gradeForm",t))}}}))(Object(Ia.a)("common")(cm)),um=Object(Ye.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0}}})),dm=function(e){var t=e.modalDocument,n=e.changeField,a=e.input,o=um(),s=t.tests,i=t.assignments,c=t.lessons,l=t.field,u=a.value,d=Object(St.a)().t;return r.a.createElement(Br.a,{className:o.root,subheader:r.a.createElement("li",null)},[{type:"lesson",list:c},{type:"test",list:s},{type:"assignment",list:i}].map((function(e){return r.a.createElement("li",{key:"subheader-".concat(e.type),className:o.listSection},r.a.createElement("ul",{className:o.ul},r.a.createElement(v,null,r.a.createElement(qr.a,null,"lesson"===e.type?d("instructorModules.lessons"):"","test"===e.type?d("instructorModules.tests"):"","assignment"===e.type?d("instructorModules.assignments"):""),(e.list||[]).map((function(t,a){var o=(u||[]).find((function(e){return t._id===e.documentId}));return r.a.createElement(Mr.a,{key:"item-".concat(e.type,"-").concat(t._id)},r.a.createElement(mt.a,{key:"checkbox-".concat(a),control:r.a.createElement(dr.a,{name:"lesson"===e.type?"".concat(t.lessonName,"[").concat(a,"]"):"".concat(t.testName,"[").concat(a,"]"),value:t._id,checked:!!o,onChange:function(a){var r=Object(Pr.a)(u);return a.target.checked?r.push({documentId:t._id,documentType:e.type}):r.splice(r.findIndex((function(e){return t._id===e.documentId})),1),n(l,r)}}),label:"lesson"===e.type?t.lessonName:t.testName}))})))))})))},mm=Object(_t.a)({form:"category",enableReinitialize:!0,destroyOnUnmount:!1})((function(e){var t=e.modalDocument,n=e.changeField;return r.a.createElement(ca.a,{name:t.field,modalDocument:t,changeField:n,component:dm})})),pm=Object(c.b)((function(e){return{formValues:Object(Ve.a)("category")(e),modalDocument:e.common.modalDocument}}),(function(e){return{changeField:function(t,n){e(Object(Dt.a)("category",t,n))}}}))(mm),fm=Object(c.b)((function(e){return{courses:e.common.courses,course:e.common.selectedCourse,students:e.common.students,modalDocument:e.common.modalDocument,token:e.authentication.token}}),(function(e){return{approveEnroll:function(t,n,a){return e(F(t,n,a))},denyEnroll:function(t,n,a){return e(_(t,n,a))}}}))((function(e){var t=e.token,n=e.course,a=e.modalDocument,o=e.approveEnroll,s=e.denyEnroll,i=(a.testResults,Object(St.a)().t),c=Object(Du.a)(),l=r.a.useState(!1),u=Object(mo.a)(l,2),d=u[0],m=u[1],p=(n.studentsEnrollRequests||[]).findIndex((function(e){return e.student._id===a._id&&e.denied}))>-1,f=r.a.useState(0),g=Object(mo.a)(f,2),b=g[0],h=g[1],E=(n.studentsEnrollRequests||[]).filter((function(e){return e.approved})).length,y=[{value:"",primaryText:""},{value:"governmentId",primaryText:i("confirmations.governmentId")},{value:"birthCertificate",primaryText:i("confirmations.birthCertificate")},{value:"transcript",primaryText:i("confirmations.transcript")},{value:"legalStatusProof",primaryText:i("confirmations.proofLegalStatus")},{value:"cv",primaryText:i("confirmations.cv")},{value:"testScoresProof",primaryText:i("confirmations.proofTestScores")},{value:"referenceLetter",primaryText:i("confirmations.letterReference")},{value:"statementPurpose",primaryText:i("confirmations.statementPurpose")},{value:"other",primaryText:i("confirmations.other")}],T=(a.documents||[]).length,S={backgroundColor:"white",padding:10,margin:"10px auto 10px auto"},k=[[i("confirmations.firstName"),a.firstName],[i("confirmations.lastName"),a.lastName],[i("confirmations.studentId"),a._id.replace(/\D/g,"")],[i("confirmations.dob"),ct()(new Date(a.dob).getTime()).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY")],[i("confirmations.email"),a.email],[i("confirmations.lastLogin"),ct()(new Date(parseInt(a.lastLogin)).getTime()).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")],[i("confirmations.courseProgress"),"".concat(xd(n,a),"%")]];return r.a.createElement(v,null,r.a.createElement("div",{style:Object(At.a)({backgroundImage:'url("'.concat(a.profilePicture,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"200px",borderRadius:"50%",maxWidth:"200px",width:"100%"},S)}),r.a.createElement("div",{style:S},r.a.createElement(ni.a,{"aria-label":"simple table"},r.a.createElement(ai.a,null,k.map((function(e){return r.a.createElement(oi.a,{key:e[0]},r.a.createElement(ri.a,{component:"th",scope:"row"},e[0]),r.a.createElement(ri.a,{align:"right"},e[1]))}))))),r.a.createElement(Qs,{index:"progressReportStudentSummary",summary:i("studentSummary.buttons.showReport"),expandedSummary:i("studentSummary.buttons.hideReport")},r.a.createElement(et.a,{style:{textAlign:"center"},paragraph:!0,variant:"h6",gutterBottom:!0},i("studentSummary.progressReport")),r.a.createElement(ml,null)),T>0&&r.a.createElement("div",{style:S},r.a.createElement(et.a,{style:{textAlign:"center"},paragraph:!0,variant:"h6",gutterBottom:!0},i("confirmations.documents")),r.a.createElement(Yr.a,{steps:T,position:"static",variant:"text",activeStep:b,nextButton:r.a.createElement(ot.a,{size:"small",onClick:function(){h((function(e){return e+1}))},disabled:b===T-1},i("confirmations.next"),"rtl"===c.direction?r.a.createElement(ed.a,null):r.a.createElement(nd.a,null)),backButton:r.a.createElement(ot.a,{size:"small",onClick:function(){h((function(e){return e-1}))},disabled:0===b},"rtl"===c.direction?r.a.createElement(nd.a,null):r.a.createElement(ed.a,null),i("confirmations.back"))}),(a.documents||[]).map((function(e,t){if(t!==b)return null;var n,a=(as(e.document)||"").toLowerCase().split(".").pop();"pdf"===a&&(n=r.a.createElement(ji,{url:e.document,index:t})),"jfif"!==a&&"jpeg"!==a&&"jpg"!==a||(n=r.a.createElement("div",{style:{backgroundImage:'url("'.concat(e.document,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"300px",borderRadius:"3px",width:"100%",margin:"auto"}})),"docx"!==a&&"doc"!==a||(n=r.a.createElement(_a.a,{fileType:a,filePath:e.document}));var o=y.find((function(t){return t.value===e.documentType})).primaryText;return r.a.createElement(v,{key:"document[".concat(t,"]")},r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},o),n)}))),n.studentsEnrollRequests.findIndex((function(e){return e.student._id===a._id&&!e.droppedOut}))>-1&&r.a.createElement(v,null,r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:d,onChange:function(e){m(e.target.checked)},value:"checked",disabled:p&&E===n.studentCapacity}),label:"".concat(i(p?"confirmations.enrollConfirm.allow":"confirmations.enrollConfirm.deny"))}),r.a.createElement(ot.a,{disabled:!d,variant:"outlined",color:"default",type:"button",title:"Enroll in Course",onClick:function(){p&&o(a._id,n._id,t),p||s(a._id,n._id,t)}},i("studentSummary.buttons.submit")),p&&E===n.studentCapacity&&r.a.createElement(et.a,{paragraph:!0,color:"error",variant:"subtitle1",gutterBottom:!0},i("studentSummary.increaseCapacity"))))})),gm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=!0;return(parseFloat(e.gradeAdjusted)>100||parseFloat(e.gradeAdjusted)<0)&&e.gradeOverride&&(t.gradeAdjusted=na.t("gradeBook.errors.finalGrade"),n=!1),t.isValid=n,t},bm=function(e,t){return e.tests.find((function(e){var n=t.testResults.find((function(t){return t.test===e._id}));return!(n||!e.passingRequired)||e.passingRequired&&n.grade<e.passingGrade}))},hm=Object(_t.a)({form:"gradeCourse",enableReinitialize:!0,validate:gm,destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.token,n=e.course,o=e.students,s=e.modalDocument,i=e.formValues,c=void 0===i?{}:i,l=e.formErrors,u=e.gradeCourse,d=e.touchField,m=e.configuration,p=Object(St.a)().t,f=Object(a.useState)(!1),g=Object(mo.a)(f,2),b=g[0],h=g[1],E=Object(a.useState)(!0),y=Object(mo.a)(E,2),T=y[0],S=y[1],k=(Object(Du.a)(),m.coursePassGrade),w={backgroundColor:"white",padding:10,margin:"10px auto 10px auto"},O=((o||[]).find((function(e){return s._id===e._id}))||{}).testResults,C=n.tests.filter((function(e){return!e.assignment})),x=n.tests.filter((function(e){return e.assignment})),A=n.tests.reduce((function(e,t){return e+t.weight}),0),F=bm(n,s),D=function(e){return r.a.createElement(oi.a,null,r.a.createElement(ri.a,{component:"th",scope:"row"},p("gradeBook.".concat(e))),r.a.createElement(ri.a,{component:"th",align:"right"},p("gradeBook.weight")),r.a.createElement(ri.a,{component:"th",align:"right"},p("gradeBook.result")),"test"===e&&r.a.createElement(ri.a,{component:"th",align:"right"},p("gradeBook.passingRequired")))},_=function(e){var t=n.tests.reduce((function(t,n){var a=e.find((function(e){return e.graded&&e.test===n._id}));return a?t+n.weight/A*a.grade:t}),0);return parseFloat(parseFloat(t).toFixed(2)).toString()},I=function(e){S(e)},j=function(e){var t=(O.find((function(t){return t.test===e._id&&t.graded}))||{}).grade;return t?t+"%":"-"};return r.a.createElement(v,null,(x.length>0||C.length>0)&&r.a.createElement(Qs,{index:"progressReportGradebook",summary:p("gradeBook.showProgressReport"),expandedSummary:p("gradeBook.hideProgressReport")},r.a.createElement(ml,null)),x.length>0&&r.a.createElement("div",{style:w},r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},p("gradeBook.assignments")),r.a.createElement(ni.a,{"aria-label":"simple table"},r.a.createElement(ai.a,null,D("assignment"),x.map((function(e,t){return r.a.createElement(oi.a,{key:e._id},r.a.createElement(ri.a,{scope:"row"},e.testName),r.a.createElement(ri.a,{align:"right"},"".concat(parseFloat((e.weight/A*100).toFixed(2)).toString(),"%")),r.a.createElement(ri.a,{align:"right"},j(e)))}))))),C.length>0&&r.a.createElement("div",{style:w},r.a.createElement(et.a,{paragraph:!0,variant:"h6",gutterBottom:!0},p("gradeBook.tests")),r.a.createElement(ni.a,{"aria-label":"simple table"},r.a.createElement(ai.a,null,D("test"),C.map((function(e,t){return r.a.createElement(oi.a,{key:e._id},r.a.createElement(ri.a,{scope:"row"},r.a.createElement("span",{style:{display:"block"}},e.testName),r.a.createElement("span",{style:{display:"block",fontSize:"0.7em"}},p("testInfo.".concat(e.testType)))),r.a.createElement(ri.a,{align:"right"},"".concat(parseFloat((e.weight/A*100).toFixed(2)).toString(),"%")),r.a.createElement(ri.a,{align:"right"},j(e)),r.a.createElement(ri.a,{align:"right"},e.passingRequired?"".concat(p("gradeBook.yes")," ").concat(e.passingGrade,"%"):p("gradeBook.no")))}))))),r.a.createElement("div",{style:w},r.a.createElement(ni.a,{"aria-label":"simple table"},r.a.createElement(ai.a,null,r.a.createElement(oi.a,null,r.a.createElement(ri.a,{component:"th",scope:"row"},p("gradeBook.courseProgress")),r.a.createElement(ri.a,{align:"right"},"".concat(xd(n,s),"%"))),r.a.createElement(oi.a,null,r.a.createElement(ri.a,{component:"th",scope:"row"},p("gradeBook.classAverage")),r.a.createElement(ri.a,{align:"right"},"".concat(function(){var e=o.reduce((function(e,t){var n=_(t.testResults);return e+parseFloat(n)}),0);return parseFloat(parseFloat(e/o.length).toFixed(2)).toString()}(),"%"))),r.a.createElement(oi.a,null,r.a.createElement(ri.a,{component:"th",scope:"row"},p("gradeBook.passingGrade")),r.a.createElement(ri.a,{align:"right"},"".concat(k,"%"))),!(c||{}).gradeOverride&&r.a.createElement(oi.a,null,r.a.createElement(ri.a,{component:"th",scope:"row"},r.a.createElement("span",null," ",p("gradeBook.finalGrade"))," ",_(O)>=k&&!F||c.failOverride?r.a.createElement("span",{style:{color:"#4caf50",marginLeft:5}},p("gradeBook.passed")):r.a.createElement("span",{style:{color:"red",marginLeft:5}}," ",p("gradeBook.failed"))),r.a.createElement(ri.a,{align:"right"},"".concat(_(O),"%")))))),r.a.createElement(ca.a,{name:"gradeOverride",options:{label:p("gradeBook.overrideGrade"),checked:!1},component:Ea}),r.a.createElement(ca.a,{name:"failOverride",options:{label:p("gradeBook.overrideFail"),checked:!1,disabled:!F&&(c.gradeOverride?c.gradeAdjusted>=k:_(O)>=k)},component:Ea}),r.a.createElement("div",{style:{display:"flex",justifyContent:"start"}},r.a.createElement(ca.a,{name:"gradeAdjusted",component:Oa,options:{label:p("gradeBook.gradeAdjustment"),size:"small",disabled:!(c||{}).gradeOverride}}),c.gradeOverride&&parseFloat(c.gradeAdjusted)>=0&&parseFloat(c.gradeAdjusted)<=100&&r.a.createElement(v,null,parseFloat(c.gradeAdjusted)>=k&&!F||c.failOverride?r.a.createElement("span",{style:{color:"#4caf50",marginLeft:25,lineHeight:3}},p("gradeBook.passed")):r.a.createElement("span",{style:{color:"red",marginLeft:25,lineHeight:3}},p("gradeBook.failed")))),F&&r.a.createElement(et.a,{paragraph:!0,variant:"body1",gutterBottom:!0,color:"error"},p("gradeBook.requiredTestNotPassed")),r.a.createElement("div",{style:{marginBottom:20}},r.a.createElement(et.a,{paragraph:!0,variant:"body1",gutterBottom:!0},p("gradeBook.gradeAdjustmentExplanation")),r.a.createElement(ca.a,{name:"gradeAdjustmentExplanation",component:di,label:p("gradeBook.gradeAdjustmentExplanation"),options:{multiline:!0,rows:3,variant:ma.a,disabled:!(c||{}).gradeOverride}})),r.a.createElement(et.a,{paragraph:!0,variant:"caption"},p("gradeBook.warning")),r.a.createElement(mt.a,{control:r.a.createElement(dr.a,{checked:b,onChange:function(){h((function(e){return!e}))},value:"checked"}),label:p("gradeBook.agree")}),r.a.createElement(ot.a,{onClick:function(){var e=gm(c);if(d("gradeAdjusted"),e.isValid){var a=_(O),r=c.gradeOverride?c.gradeAdjusted>k:_(O)>k;F&&!1===c.failOverride&&(r=!1),!0===c.failOverride&&(r=!0),u(c,s._id,n._id,parseFloat(parseFloat(a).toFixed(2)),r,t)}else I(!1)},variant:"outlined",type:"button",disabled:!b,color:T||l.isValid?"default":"secondary"},p("gradeBook.buttons.postGrade")))})),Em=Object(c.b)((function(e){var t,n=e.common.modalDocument,a=e.common.selectedCourse,r=a.passingGrade||50,o=a.studentGrades.find((function(e){return e.student===n._id}));if(o){var s=o.grade<r||bm(a,n)&&o.passed;t={gradeOverride:o.gradeOverride,gradeAdjusted:o.gradeOverride?o.grade:null,gradeAdjustmentExplanation:o.gradeAdjustmentExplanation,failOverride:s}}else t={failOverride:!1,gradeOverride:!1};return{formValues:Object(Ve.a)("gradeCourse")(e),formErrors:Object(Ft.a)("gradeCourse")(e),courses:e.common.courses,course:a,students:e.common.students,modalDocument:n,token:e.authentication.token,initialValues:t,configuration:e.common.configuration}}),(function(e){return{approveEnroll:function(t,n,a){return e(F(t,n,a))},touchField:function(t){e(Object(Dt.d)("gradeCourse",t))},denyEnroll:function(t,n,a){return e(_(t,n,a))},gradeCourse:function(t,n,a,r,o,s){e(function(e,t,n,a,r,o){return{type:"GRADE_COURSE_START",payload:{courseId:n,studentId:t,token:o,formValues:e,passed:r,suggestedGrade:a}}}(t,n,a,r,o,s))}}}))(hm),vm=Object(c.b)((function(e){return{courses:e.common.courses,course:e.common.selectedCourse,students:e.common.students,modalDocument:e.common.modalDocument,token:e.authentication.token}}))((function(e){var t,n=e.modalDocument,a=n.loadedFile,o=n.ext;return"jfif"!==o&&"jpeg"!==o&&"jpg"!==o||(t=r.a.createElement("div",{style:{backgroundImage:'url("'.concat(a,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"300px",borderRadius:"3px",width:"100%",margin:"auto"}})),"docx"!==o&&"doc"!==o||(t=r.a.createElement(_a.a,{fileType:o,filePath:a})),"pdf"===o&&(t=r.a.createElement(ji,{url:a})),"mp4"!==o&&"avi"!==o||(t=r.a.createElement(Po,{url:a})),r.a.createElement("div",null,t)})),ym=Object(c.b)((function(e){var t=(e.common.modalDocument||{}).test;return{isModal:e.common.isModal,modalType:e.common.modalType,modalDocument:e.common.modalDocument,loadedQuestionFormData:e.instructorQuestion.loadedQuestionFormData,initialGradeValues:e.instructorTest.initialGradeValues,initialTestReviewValues:t}}),(function(e){return{removeTest:function(t,n){e(ne(t,n))},startTest:function(t,n,a){return e(He(t,!0,a,null))}}}))((function(e){var t,n,a,o=e.modalType,s=e.modalDocument,i=e.loadedQuestionFormData,c=e.initialGradeValues,l=e.initialTestReviewValues,u=Object(St.a)().t;return"deleteCourse"===o&&(t=u("modalHeaders.deleteCourse"),a=r.a.createElement(ju,null)),"deleteTest"===o&&(t=s.assignment?u("modalHeaders.deleteAssignment"):u("modalHeaders.deleteTest"))&&(a=r.a.createElement(Pu,null)),"resetTest"===o&&(t=s.assignment?u("modalHeaders.resetAssignment"):u("modalHeaders.resetTest"))&&(a=r.a.createElement(Mu,null)),"deleteLesson"===o&&(a=r.a.createElement(Nu,null),t=u("modalHeaders.deleteLesson")),"question"===o&&i&&("mc"===s.qType&&(t=u("modalHeaders.mcQuestion")),"essay"===s.qType&&(t=u("modalHeaders.essayQuestion")),"speaking"===s.qType&&(t=u("modalHeaders.speakingQuestion")),"fillInBlank"===s.qType&&(t=u("modalHeaders.fillblanksQuestion")),a=r.a.createElement(yd,null)),"enrollRequest"===o&&(a=r.a.createElement(Cd,null),t=u("modalHeaders.enrollmentRequest")),"dropConfirmation"===o&&(a=r.a.createElement(Ld,null),t=u("modalHeaders.dropCourse")),"syllabus"===o&&(a=r.a.createElement(wd,null),t=u("modalHeaders.syllabus")),"testSummary"===o&&(t=s.assignment?u("modalHeaders.assignmentSummary"):u("modalHeaders.testSummary"),a=r.a.createElement(ad,null)),"lesson"===o&&(t=u("modalHeaders.lesson"),a=r.a.createElement(Kd,null),n=!0),"startTestConfirmation"===o&&(t=u("modalHeaders.startTest"),a=r.a.createElement(Id,null)),"gradeTest"===o&&c&&(t=t=s.results.findIndex((function(e){return e.test._id===s.testId&&e.test.assignment}))>-1?u("modalHeaders.gradeAssignment"):u("modalHeaders.gradeTest"),a=r.a.createElement(lm,null)),"testReview"===o&&l&&(t=s.test.instructorTest.assignment?u("modalHeaders.assignmentReview"):u("modalHeaders.testReview"))&&(a=r.a.createElement($d,null)),"contents"===o&&(t=u("modalHeaders.moduleContents"),s.field.includes("subjects")&&(t=u("modalHeaders.subjectContents")),s.field.includes("topics")&&(t=u("modalHeaders.topicContents")),a=r.a.createElement(pm,null)),"studentSummary"===o&&(t=u("modalHeaders.studentSummary"),a=r.a.createElement(fm,null)),"processEnrollmentRequest"===o&&(t=u("modalHeaders.enrollmentConfirmation"),a=r.a.createElement(Fd,null)),"studentDocuments"===o&&(t=u("modalHeaders.documents"),a=r.a.createElement(em,null)),"gradebook"===o&&(t=u("modalHeaders.gradebook"),a=r.a.createElement(Em,null)),"courseResource"===o&&(t=u("modalHeaders.courseResource"),a=r.a.createElement(vm,null)),r.a.createElement(v,null,r.a.createElement(Gu,{header:t,large:n},a))})),Tm=n(669),Sm=n(655),km=n(411),wm=n.n(km),Om=n(660),Cm=n.n(Om),xm=n(659),Am=n.n(xm),Fm=n(662),Dm=n.n(Fm),_m=n(663),Im=n.n(_m),jm=n(664),Rm=n.n(jm),Nm=n(661),Lm=n.n(Nm),Pm=n(657),Bm=n.n(Pm),Mm=n(333),qm=n.n(Mm),Um=n(658),Qm=n.n(Um),Wm=n(666),Hm=n(410),zm=n.n(Hm),Gm=(n(1119),n(409)),Vm=n.n(Gm),$m=Object(c.b)((function(e){return{token:e.authentication.token,sessionExpiration:e.authentication.sessionExpiration,refreshTokenExpiration:e.authentication.refreshTokenExpiration}}),(function(e){return{refreshToken:function(t){return e(ye(t))}}}))((function(e){var t,n=e.token,o=e.refreshTokenExpiration,s=e.sessionExpiration,i=e.refreshToken,c=Object(a.useState)(new Date(s).getTime()-Date.now()),l=Object(mo.a)(c,2),u=l[0],d=l[1],m=Object(a.useState)(!1),p=Object(mo.a)(m,2),f=p[0],g=p[1];return Object(a.useEffect)((function(){var e;return t=setInterval((function(){d(new Date(s).getTime()-Date.now())}),1e3),e=setTimeout((function(){g(!0)}),o-Date.now()),function(){clearInterval(t),clearTimeout(e)}}),[]),r.a.createElement("div",{className:[Vm.a.alert,f?Vm.a.refreshBlocked:""].join(" ")},r.a.createElement(et.a,{style:{textAlign:"center"}},"Your session will expire in ".concat(new Date(u).getMinutes(),":").concat(new Date(u).getSeconds()<10?"0":"").concat(new Date(u).getSeconds())),!f&&r.a.createElement(ot.a,{style:{display:"block",margin:"auto"},color:"primary",onClick:function(){n&&i(n)}},"Stay logged in"))})),Ym=n(391),Jm=["en","es"];var Km=Object(c.b)((function(e){return{error:e.authentication.error,isAuthenticated:null!==e.authentication.token,loading:e.common.loading,studentLoggedIn:e.authentication.studentLoggedIn,instructorLoggedIn:e.authentication.instructorLoggedIn,profilePicture:(e.authentication.loadedUser||{}).loadedProfilePicture,adminLoggedIn:e.authentication.adminLoggedIn,token:e.authentication.token,userId:e.authentication.userId,course:e.common.selectedCourse,coursePanel:e.common.coursePanel,testStudentSection:e.studentTest.testSection,students:e.common.students,tab:e.common.tab,testInSession:e.studentTest.testInSession,notifications:e.common.notifications,courses:e.common.courses,sessionAlert:e.common.sessionAlert,width:e.common.width,studentTestResults:e.studentTest.testResults,sessionExpiration:e.authentication.sessionExpiration,refreshTokenExpiration:e.authentication.refreshTokenExpiration,configuration:e.common.configuration}}),(function(e){return{showAccountDetail:function(e){e.preventDefault()},returnToCourses:function(){e({type:"RETURN_TO_COURSES"}),e(Ue(null))},setChatUser:function(t){e(we(t))},setTab:function(t){e(Re(t))},setTabLabels:function(t){e(je(t))},fetchStudents:function(t,n,a){return e(Qe(t,n,a))},fetchModules:function(t,n){return e(_e(t,n))},fetchQuestionBank:function(t,n){return e(Y(t,n))},setCourse:function(t){e(Be(t))},setPanel:function(t){e(Ue(t))},markAsSeen:function(t,n){e(De(t,n))},openModal:function(t,n){e(Ne(t,n))},setInitialGradeValues:function(t){return e(ee(t))},changeWidth:function(t){e({type:"SET_WIDTH",width:t})},exitCourse:function(){e({type:"RETURN_TO_COURSES"})},setRefreshSessionAlert:function(t){e(Pe(t))},updateActivity:function(t,n){console.log("should update activity: ",t,n),e(Se(t,n))},logout:function(){e(Te())}}}))(Object(Ia.a)("common")((function(e){var t=e.studentLoggedIn,n=e.instructorLoggedIn,o=e.adminLoggedIn,s=e.isAuthenticated,c=e.token,l=(e.userId,e.notifications),u=e.courses,d=e.children,m=e.profilePicture,p=e.course,f=e.coursePanel,g=(e.tab,e.studentTestResults),b=e.testInSession,h=(e.students,e.width),E=e.sessionAlert,y=e.refreshTokenExpiration,T=e.sessionExpiration,S=(e.updateActivity,e.setRefreshSessionAlert),k=e.fetchModules,w=e.fetchStudents,O=e.fetchQuestionBank,C=e.setCourse,x=e.setTab,A=e.setTabLabels,F=e.setPanel,D=e.markAsSeen,_=e.openModal,I=e.setChatUser,j=(e.setInitialGradeValues,e.changeWidth),R=e.exitCourse,N=e.logout,L=(e.configuration,Object(St.a)("common")),P=L.t,B=(L.i18n,mu()),M=Object(a.useState)(null),q=Object(mo.a)(M,2),U=q[0],Q=q[1],W=Object(a.useState)(null),H=Object(mo.a)(W,2),z=H[0],G=H[1];function V(){j(window.innerWidth)}Object(a.useEffect)((function(){if(Jm.includes(localStorage.getItem("i18nextLng"))||((localStorage.getItem("i18nextLng")||"").includes("es")?localStorage.setItem("i18nextLng","es"):localStorage.setItem("i18nextLng","en")),localStorage.setItem("timezone",cs.a.tz.guess()),T){clearTimeout(U),clearTimeout(z),console.log("both time out id: ",U,z);var e=new Date(T).getTime()-Date.now();console.log("minutes in session left: ",e/6e4);var t=setTimeout((function(){console.log("session expired"),N()}),e);Q(t);var n=setTimeout((function(){console.log("session expires in 5 minutes"),S("on")}),e-6e5);G(n),Date.now()>y&&clearTimeout(z)}return function(){clearTimeout(U),clearTimeout(z)}}),[T]),Object(a.useEffect)((function(){X(!1)}),[s]);var $=[];(u||[]).forEach((function(e){(t&&e.courseActive&&e.enrolled||n)&&((e.irregularOfficeHours||[]).forEach((function(t){$.push({course:e._id,document:t,documentType:"irregularOfficeHour",date:new Date(parseInt(t.date)).setHours(0,0,0,0),docName:P("calendar.officehours",{start:t.startTime,end:t.endTime})+" "+cs()(new Date(Date.now())).tz(t.timezoneRegion).format("z")})})),(e.regularOfficeHours||[]).forEach((function(t){for(var n=ct()(parseInt(e.courseStartDate||Date.now()-78624e5)),a=ct()(parseInt(e.courseEndDate)||Date.now()+78624e5),r=ss(t.day),o=[],s=n.clone();s.day(7+r).isBefore(a);)o.push(s.clone()),$.push({course:e._id,document:t,documentType:"regularOfficeHour",date:new Date(s.clone()._d).setHours(0,0,0,0),docName:P("calendar.officehours",{start:t.startTime,end:t.endTime})+" "+cs()(new Date(Date.now())).tz(t.timezoneRegion).format("z")})})),t&&(e.courseDropDeadline&&$.push({course:e._id,document:e,documentType:"courseDropDeadline",date:new Date(parseInt(e.courseDropDeadline)).setHours(0,0,0,0),docName:P("calendar.dropDeadline",{courseName:e.courseName})}),e.tests.forEach((function(t){var n="assignment";if("midterm"===t.testType&&(n="mid-term"),t.availableOnDate){var a="midterm"!==t.testType&&t.testType?t.testType:n;$.push({course:e._id,document:t,documentType:"testAvailableOnDate",date:new Date(parseInt(t.availableOnDate)).setHours(0,0,0,0),docName:P("calendar.testAvailableOnDate",{testName:t.testName,testType:P("calendar.".concat(a)),ofTheTestType:P("calendar.ofThe".concat(a))})})}if(t.dueDate){var r="midterm"!==t.testType&&t.testType?t.testType:"assignment";$.push({course:e._id,document:t,documentType:"testDueDate",date:new Date(parseInt(t.dueDate)).setHours(0,0,0,0),docName:P("calendar.testDueDate",{testType:P("calendar.".concat(r)),ofTheTestType:P("calendar.ofThe".concat(r)),testName:t.testName})})}if(t.gradeReleaseDate){var o="midterm"!==t.testType&&P.test?P.test:"assignment";$.push({course:e._id,document:t,documentType:"testGradeReleaseDateStudent",date:new Date(parseInt(t.gradeReleaseDate)).setHours(0,0,0,0),docName:P("calendar.testGradeReleaseDateStudent",{testName:t.testName,testType:P("calendar.".concat(o)),ofTheTestType:P("calendar.ofThe".concat(o))})})}})),(e.lessons||[]).forEach((function(t){$.push({course:e._id,document:t,documentType:"lessonAvailableOnDate",date:new Date(parseInt(t.availableOnDate)).setHours(0,0,0,0),docName:P("calendar.lessonAvailableOnDate",{lessonName:t.lessonName})})}))),n&&e.tests.forEach((function(t){var n="midterm"!==t.testType&&t.testType?t.testType:"assignment";t.gradeReleaseDate&&$.push({course:e._id,document:t,documentType:"testGradeReleaseDateInstructor",date:parseInt(t.gradeReleaseDate),docName:P("calendar.testGradeReleaseDateInstructor",{testType:P("calendar.".concat(n)),ofTheTestType:P("calendar.ofThe".concat(n)),testName:t.testName})})})))})),Object(a.useLayoutEffect)((function(){return window.addEventListener("resize",Object(Sm.a)(150,!1,(function(){V()}),!1)),V(),function(){return window.removeEventListener("resize",V)}}),[]);var Y,J=r.a.useState(!1),K=Object(mo.a)(J,2),Z=K[0],X=K[1],ee=r.a.useState(null),te=Object(mo.a)(ee,2),ne=te[0],ae=te[1],re=r.a.useState(null),oe=Object(mo.a)(re,2),se=oe[0],ie=oe[1],ce=r.a.useState(null),le=Object(mo.a)(ce,2),ue=le[0],de=le[1],me=r.a.useState(null),pe=Object(mo.a)(me,2),fe=pe[0],ge=pe[1],be=r.a.useState(null),he=Object(mo.a)(be,2),Ee=he[0],ve=he[1],ye=Boolean(ne),Te=Boolean(se),Se=Boolean(ue),ke=function(){X(!Z)},we=function(e,a){var r="calendar"===a;r||D(e._id,c);var o,s=e.course,i=(u||[]).find((function(t){return t._id===e.course})),l=((i.tests||[]).find((function(t){return t._id===e.documentId}))||{}).assignment;if(Ce(),"chat"===e.documentType||"irregularOfficeHour"===e.documentType||"regularOfficeHour"===e.documentType){var d={_id:e.fromUser,firstName:e.senderFirstName,lastName:e.senderLastName,profilePicture:e.avatar};x(r?0:1),F("chat"),A(["Contacts","Chat"]),r||I(d,s)}if(("testReview"===e.documentType||"testGradeReleaseDateStudent"===e.documentType&&!l)&&(x(1),F("test"),A(["Tests","Completed Tests"])),("assignmentReview"===e.documentType||"testGradeReleaseDateStudent"===e.documentType&&l)&&(x(1),F("assignment"),A(["Assignments","Completed Assignments"])),"testSubmitted"===e.documentType||"assignmentSubmitted"===e.documentType||"testGradeReleaseDateInstructor"===e.documentType){var m=i.tests.find((function(t){return t._id===e.documentId}));r?((e.document||{}).assignment&&x(1),(e.document||{}).assignment||x(0)):(w(s,c,{actionType:"openSubmittedTest",payload:{notification:e,test:m}}),x("testSubmitted"===e.documentType?0:1)),F("grade"),A(["Tests","Assignments"])}if("test"!==e.documentType&&"testAvailableOnDate"!==e.documentType&&"testDueDate"!==e.documentType&&"resetTest"!==e.documentType||l||(x(0),F("test"),A(["Tests","Completed Tests"])),console.log("notification.documentType",e.documentType),"assignment"!==e.documentType&&"testAvailableOnDate"!==e.documentType&&"testDueDate"!==e.documentType&&"resetAssignment"!==e.documentType||!l||(x(0),F("assignment"),A(["Assignments","Completed Assignments"])),"lesson"===e.documentType||"lessonAvailableOnDate"===e.documentType){var p=i.lessons.find((function(t){return t._id===e.documentId||(e.document||{})._id}))||{};x(0),F("lesson"),A(["",""]);var f=Date.now()>new Date(parseInt(p.availableOnDate)).getTime();(p.availableOnDate&&f||!p.availableOnDate)&&_(p,"lesson")}"courseEnrollRequest"===e.documentType&&(x(1),F("student"),A(["Students","Enrollment requests"])),o=r?(u||[]).find((function(t){return t._id===e.course}))||{}:(u||[]).find((function(e){return e._id===s}))||{},"courseOfficeHours"!==e.documentType&&"courseDropDeadline"!==e.documentType?("courseDrop"===e.documentType&&(x(0),F("student"),A(["Students","Enrollment requests"])),"courseEnrollDeny"!==e.documentType&&(C(o),t&&o&&(k(s,c),w(s,c),Nc.push("/student-panel/course/".concat(s))),n&&o&&(k(s,c),w(s,c),O(s,c),Nc.push("/instructor-panel/course/".concat(s))))):_(o,"syllabus")},Oe=function(e){console.log("calendarDay",e),ge(e)},Ce=function(){ae(null),ie(null),de(null)};!t||p||b||(Y=r.a.createElement(hu,{mobileOpen:Z,studentCourseDetailId:(p||{})._id,onHandleDrawerToggle:ke})),t&&p&&(Y=r.a.createElement(gu,{onHandleDrawerToggle:ke,mobileOpen:Z})),n&&!p&&(Y=r.a.createElement(bu,{onHandleDrawerToggle:ke})),n&&p&&(Y=r.a.createElement(fu,{mobileOpen:Z,onHandleDrawerToggle:ke})),o&&(Y=r.a.createElement(wu,null));var xe=r.a.createElement("div",{className:B.CustomTabBar},r.a.createElement(xu,{width:h})),Ae=(l||[]).filter((function(e){return"chat"!==e.documentType})).length>0,Fe=(l||[]).filter((function(e){return"chat"===e.documentType})).length>0;return r.a.createElement("div",{className:B.root},r.a.createElement(Wl.a,null),r.a.createElement(To.a,{position:"fixed",className:s?B.appBar:B.appBarNoDrawer},r.a.createElement(ko.a,{className:B.toolbarLayout},!s&&r.a.createElement(pu,null),s&&r.a.createElement(v,null,r.a.createElement(Na.a,{edge:"end",color:"inherit","aria-label":"open drawer",onClick:ke,className:B.menuButton},r.a.createElement(zl.a,null)),r.a.createElement(et.a,{variant:"h6",noWrap:!0},"Learn"),r.a.createElement("div",null,!b&&r.a.createElement(v,null,r.a.createElement(Eo.a,{style:{marginRight:"10px",marginTop:"7px"},color:"secondary",badgeContent:b?0:(l||[]).filter((function(e){return!e.seen&&"chat"===e.documentType})).length},r.a.createElement(Oo.a,{style:{cursor:Fe?"pointer":"auto"},edge:"end",color:"inherit",onClick:function(e){var t;!b&&Fe&&(t=e,0!==(l||[]).length&&(ie(t.currentTarget),ve("chat")))}})),r.a.createElement(Eo.a,{style:{marginRight:"10px",marginTop:"7px"},color:"secondary",badgeContent:b?0:(l||[]).filter((function(e){return!e.seen&&"chat"!==e.documentType})).length},r.a.createElement(Bm.a,{style:{cursor:Ae&&!b?"pointer":"auto"},onClick:function(e){var t;Ae&&(b||(t=e,0!==(l||[]).length&&(de(t.currentTarget),ve("notifications"))))}})),r.a.createElement(Eo.a,{style:{marginRight:"10px",marginTop:"7px",cursor:"pointer"},edge:"end",onClick:function(e){var t;b||(t=e,ge(null),ae(t.currentTarget))}},r.a.createElement(zm.a,null))),r.a.createElement(Eo.a,null,r.a.createElement(i.b,{to:"/account"},r.a.createElement(ho.a,{style:{cursor:b?"auto":"pointer"},onClick:function(){var e,t;b||(e="modules",t="exitCourse",A(["All courses","Your courses"]),x(0),F(e),Z&&ke(),t&&R())},src:m}))),r.a.createElement(Tm.a,{anchorEl:ne,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:ye,onClose:Ce},r.a.createElement("div",{style:{minHeight:200,padding:5}},fe?r.a.createElement("div",null,r.a.createElement(et.a,{variant:"h5"}," ",ct()(fe).locale(localStorage.getItem("i18nextLng")).format("MMMM DD")),(u||[]).map((function(e){return $.findIndex((function(t){return t.date===fe&&e._id===t.course}))>-1?r.a.createElement(v,{key:e._id},r.a.createElement(Br.a,{style:{margin:"10px auto 10px auto",padding:"5px"}},r.a.createElement(Mr.a,{style:{backgroundColor:"#2196f3",color:"white"}},r.a.createElement(lr.a,null,e.courseName)),$.filter((function(t){return t.course===e._id})).filter((function(e){return e.date===fe})).map((function(e,t){var n;return"testDueDate"!==e.documentType||"midterm"!==e.document.testType&&"final"!==e.document.testType||(n=r.a.createElement(Ss.a,{style:{color:"#e53935"}})),"testDueDate"===e.documentType&&"quiz"===e.document.testType&&(n=r.a.createElement(Ss.a,{style:{color:"#ef6c00"}})),"testDueDate"===e.documentType&&e.document.assignment&&(n=r.a.createElement(ws.a,{style:{color:"#ef6c00"}})),"courseDropDeadline"===e.documentType&&(n=r.a.createElement(qm.a,{style:{color:"#e53935"}})),"testGradeReleaseDateInstructor"===e.documentType&&(n=r.a.createElement(au.a,{style:{color:"#e53935"}})),"lessonAvailableOnDate"===e.documentType&&(n=r.a.createElement(Cs.a,{style:{color:"#43a047"}})),"testAvailableOnDate"===e.documentType&&(n=r.a.createElement(Ss.a,{style:{color:"#43a047"}})),"testGradeReleaseDateStudent"===e.documentType&&(n=r.a.createElement(au.a,{style:{color:"#43a047"}})),"regularOfficeHour"===e.documentType&&(n=r.a.createElement(Oo.a,{style:{color:"#0277bd"}})),"irregularOfficeHour"===e.documentType&&(n=r.a.createElement(Oo.a,{style:{color:"#0277bd"}})),r.a.createElement(v,{key:e.docName+t},r.a.createElement(Mr.a,{button:!0,onClick:function(){return we(e,"calendar")}},r.a.createElement(us.a,null,n),r.a.createElement(lr.a,null,e.docName)))})))):null})),fe&&r.a.createElement(Na.a,{color:"inherit",onClick:function(){return Oe(null)}},r.a.createElement(zm.a,null))):r.a.createElement(Wm.a,{locale:localStorage.getItem("i18nextLng"),onClickDay:function(e){Oe(new Date(e).getTime())},tileContent:function(e){e.activeStartDate;var t,n,a,o,s,i,c=e.date,l=(e.view,new Date(c).getTime());return $.findIndex((function(e){return e.date===l&&("testDueDate"===e.documentType||"testAvailableOnDate"===e.documentType)&&!e.document.assignment}))>-1&&(t=!0),$.findIndex((function(e){return e.date===l&&("testDueDate"===e.documentType||"testAvailableOnDate"===e.documentType)&&e.document.assignment}))>-1&&(n=!0),$.findIndex((function(e){return e.date===l&&("regularOfficeHour"===e.documentType||"irregularOfficeHour"===e.documentType)}))>-1&&(i=!0),$.findIndex((function(e){return e.date===l&&"lessonAvailableOnDate"===e.documentType}))>-1&&(o=!0),$.findIndex((function(e){return e.date===l&&"courseDropDeadline"===e.documentType}))>-1&&(s=!0),$.findIndex((function(e){return e.date===l&&("testGradeReleaseDateInstructor"===e.documentType||"testGradeReleaseDateStudent"===e.documentType)}))>-1&&(a=!0),r.a.createElement("div",{style:{display:"block"}},t&&r.a.createElement(Ss.a,{style:{fontSize:"0.7rem"}}),n&&r.a.createElement(ws.a,{style:{fontSize:"0.7rem"}}),a&&r.a.createElement(au.a,{style:{fontSize:"0.7rem"}}),o&&r.a.createElement(Cs.a,{style:{fontSize:"0.7rem"}}),i&&r.a.createElement(Oo.a,{style:{fontSize:"0.7rem"}}),s&&r.a.createElement(qm.a,{style:{fontSize:"0.7rem"}}))},tileClassName:function(e){var t=e.date,n=(e.view,new Date(t).setHours(0,0,0,0));return $.findIndex((function(e){return e.date===n&&"testDueDate"===e.documentType&&("midterm"===(e.document||{}).testType||"final"===(e.document||{}).testType)}))>-1||$.findIndex((function(e){return e.date===n&&"courseDropDeadline"===e.documentType}))>-1||$.findIndex((function(e){return e.date===n&&"testGradeReleaseDateInstructor"===e.documentType}))>-1?"highlight-red":$.findIndex((function(e){return e.date===n&&"testDueDate"===e.documentType}))>-1?"highlight-orange":$.findIndex((function(e){return e.date===n&&("lessonAvailableOnDate"===e.documentType||"testAvailableOnDate"===e.documentType||"testGradeReleaseDateStudent"===e.documentType)}))>-1?"highlight-green":$.findIndex((function(e){return e.date===n&&"regularOfficeHour"===e.documentType}))>-1||$.findIndex((function(e){return e.date===n&&"irregularOfficeHour"===e.documentType}))>-1?"highlight-blue":void 0}}))),r.a.createElement(Tm.a,{anchorEl:"chat"===Ee?se:ue,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:"chat"===Ee?Te:Se,onClose:Ce},(l||[]).filter((function(e){return"chat"===Ee?"chat"===e.documentType:"notifications"===Ee?"chat"!==e.documentType:void 0})).map((function(e){var t;"courseOfficeHours"===e.documentType&&(t=r.a.createElement(Qm.a,{color:e.seen?"disabled":"primary"})),"assignment"===e.documentType&&(t=r.a.createElement(ws.a,{color:e.seen?"disabled":"primary"})),"test"===e.documentType&&(t=r.a.createElement(Ss.a,{color:e.seen?"disabled":"primary"})),"lesson"===e.documentType&&(t=r.a.createElement(Cs.a,{color:e.seen?"disabled":"primary"})),"testReview"===e.documentType&&(t=r.a.createElement(au.a,{color:e.seen?"disabled":"primary"})),"assignmentReview"===e.documentType&&(t=r.a.createElement(au.a,{color:e.seen?"disabled":"primary"})),"resetTest"===e.documentType&&(t=r.a.createElement(Rs.a,{color:e.seen?"disabled":"primary"})),"resetAssignment"===e.documentType&&(t=r.a.createElement(Rs.a,{color:e.seen?"disabled":"primary"})),"testSubmitted"===e.documentType&&(t=r.a.createElement(wm.a,{color:e.seen?"disabled":"primary"})),"assignmentSubmitted"===e.documentType&&(t=r.a.createElement(wm.a,{color:e.seen?"disabled":"primary"})),"courseEnrollRequest"===e.documentType&&(t=r.a.createElement(Am.a,{color:e.seen?"disabled":"primary"})),"courseEnrollDeny"===e.documentType&&(t=r.a.createElement(Cm.a,{color:e.seen?"disabled":"primary"})),"courseEnrollApprove"===e.documentType&&(t=r.a.createElement(Lm.a,{color:e.seen?"disabled":"primary"})),"courseDrop"===e.documentType&&(t=r.a.createElement(qm.a,{color:e.seen?"disabled":"primary"})),"courseDropDeadline"===e.documentType&&(t=r.a.createElement(Dm.a,{color:e.seen?"disabled":"primary"})),"courseGrade"===e.documentType&&(u||[]).findIndex((function(t){return t._id===e.documentId&&t.completed}))>-1&&(t=r.a.createElement(Im.a,{color:e.seen?"disabled":"primary"})),"courseGrade"===e.documentType&&(u||[]).findIndex((function(t){return t._id===e.documentId&&!t.completed}))>-1&&(t=r.a.createElement(Rm.a,{color:e.seen?"disabled":"primary"})),e.avatar&&(t=r.a.createElement(ho.a,{src:e.avatar}));var n=[];l.forEach((function(e,t){-1===n.findIndex((function(t){return e.fromUser===t.fromUser}))&&n.push(e)}));var a=(u||[]).find((function(t){return t._id===e.course}))||{},o=((a.studentsEnrollRequests||[]).find((function(t){return t.student._id===e.toSpecificUser||t.student._id===e.fromUser}))||{}).student||{},s=a.grade,i=a.passed?P("notifications.passed"):P("notifications.failed"),c=(a.lessons||[]).find((function(t){return t._id===e.documentId}))||{},d=(a.tests||[]).find((function(t){return t._id===e.documentId}))||{},m=((g||{}).testResults||[]).find((function(t){return t.test===e.documentId}))||{},p=d.passingGrade?m.grade>=d.passingGrade?P("notifications.passed"):P("notifications.failed"):"",f="";if("chat"===e.documentType&&(f=e.content[0]),"courseOfficeHours"===e.documentType&&(f=P("notifications.".concat(e.content[0]),{courseName:a.courseName})),"courseDropDeadline"===e.documentType&&(f=P("notifications.".concat(e.content[0]),{courseName:a.courseName})),"courseEnrollRequest"===e.documentType&&(f=P("notifications.".concat(e.content[0]),{firstName:o.firstName,lastName:o.lastName,courseName:a.courseName})),"courseEnrollApprove"===e.documentType&&(f=P("notifications.".concat(e.content[0]),{courseName:a.courseName})),"courseEnrollDeny"===e.documentType&&(f=P("notifications.".concat(e.content[0]),{courseName:a.courseName}),f+=e.message?" ".concat(P("notifications.reason"),": ").concat(e.message," "):"",e.content[1]&&(f+=P("notifications.allowResubmission")+" ")),"courseDrop"===e.documentType&&(f=P("notifications.".concat(e.content[0]),{firstName:o.firstName,lastName:o.lastName,courseName:a.courseName})),"courseGrade"===e.documentType&&(f=P("notifications.".concat(e.content[0]),{passOrFail:i,courseName:a.courseName,grade:s})),"lesson"===e.documentType&&(f=P("notifications.".concat(e.content[0]),{lessonName:c.lessonName,date:ct()(parseInt(c.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm")})),"assignment"!==e.documentType&&"test"!==e.documentType||e.content.forEach((function(t,n){var a="test"===e.documentType;f+=P("notifications.".concat(t),{availableOnDate:ct()(parseInt(d.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"),dueDate:ct()(parseInt(d.dueDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"),dueDateOrCloseDate:a?"close date":"due date",testOrAssignment:P(a?"notifications.test":"notifications.assignment"),grade:m.grade,passOrFail:p,message:e.message,latePenalty:d.latePenalty,lateDaysAllowed:d.lateDaysAllowed,testName:d.testName})+" "})),"assignmentSubmitted"===e.documentType||"testSubmitted"===e.documentType){var b="testSubmitted"===e.documentType;f=P("notifications.".concat(e.content[0]),{firstName:o.firstName,testOrAssignment:P(b?"notifications.test":"notifications.assignment"),aOrAn:b?"a":"an"})}if("assignmentReview"===e.documentType||"testReview"===e.documentType){var h="testReview"===e.documentType;f=P("notifications.".concat(e.content[0]),{grade:m.grade,testOrAssignment:P(h?"notifications.test":"notifications.assignment"),passOrFail:p,gradeReleaseDate:ct()(parseInt(d.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"),testName:d.testName})}if("resetAssignment"===e.documentType||"resetTest"===e.documentType){var E="resetTest"===e.documentType;f=P("notifications.".concat(e.content[0]),{testName:d.testName,testOrAssignment:P(E?"notifications.test":"notifications.assignment"),message:e.message})}return r.a.createElement(cr.a,{style:{whiteSpace:"normal",opacity:e.seen&&"chat"===e.documentType?.6:1},key:e._id,onClick:function(){return we(e)}},r.a.createElement(us.a,null,t),r.a.createElement("div",null,e.senderFirstName&&r.a.createElement(et.a,null,e.senderFirstName),r.a.createElement(et.a,{variant:"caption",style:{display:"block"}},f)))}))))))),s&&r.a.createElement(_u,{mobileOpen:Z,onHandleDrawerToggle:ke},Y),h>=500&&s?xe:null,r.a.createElement("div",{className:[B.panelContainer,"modules"===f&&p?"":B.panelContainerBreakPoints].join(" ")},d),h<500&&s?xe:null,r.a.createElement(ym,null),E&&r.a.createElement($m,null))}))),Zm=Object(lt.a)({palette:{primary:{light:"#757ce8",main:"#2196f3",dark:"#002884",contrastText:"#fff"},secondary:{main:"#FF4136"},success:{main:"#3D9970"}},overrides:{MuiTabs:{centered:{justifyContent:"space-evenly"}},MuiSvgIcon:{root:{colorPrimary:"#2196f3 !important"}},MuiAppBar:{root:{zIndex:1}},MuiCard:{root:{overflow:"none"}},MuiDrawer:{paper:{zIndex:"100"}},MuiButton:{root:{marginBottom:"10px",marginTop:"10px",backgroundColor:"white"},outlinedPrimary:{border:"1px solid #2196f3"},startIcon:{marginLeft:"0",marginRight:"0"}},MuiFormHelperText:{root:{color:"#e91313"}},MuiExpansionPanelDetails:{root:{padding:"8px 5px 24px",display:"block"}}}}),Xm=n(1258),ep=n(234),tp=n.n(ep),np=function(e){var t=e.successMessage,n=e.failMessage,a=e.noDrawer;return r.a.createElement("div",{style:{transform:t||n?"translateY(0)":"translateY(-100vh)",opacity:t||n?"1":"0"},className:[tp.a.alert,t?tp.a.success:tp.a.fail,a?tp.a.noDrawer:tp.a.withDrawer].join(" ")},t?r.a.createElement(et.a,{variant:"subtitle1"},t):r.a.createElement(et.a,{variant:"subtitle1"},n))},ap=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={isValid:!0,documentsAreValid:!0},n=e.isEditingPassword,a=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,r=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/;return e.firstName||(t.firstName=na.t("account.errors.enterFirstName"),t.isValid=!1),/^[ a-zA-Z\xc0-\xff\u00f1\u00d1]*$/g.test(e.firstName)||(t.firstName=na.t("account.errors.enterFirstNameOnlyAlpha"),t.isValid=!1),e.lastName||(t.lastName=na.t("account.errors.enterLastName"),t.isValid=!1),/^[ a-zA-Z\xc0-\xff\u00f1\u00d1]*$/g.test(e.lastName)||(t.lastName=na.t("account.errors.enterLastNameOnlyAlpha"),t.isValid=!1),e.dob||(t.dob=na.t("account.errors.enterDateOfBirth"),t.isValid=!1),a.test(e.email)||(t.email=na.t("account.errors.enterValidEmail"),t.isValid=!1),e.email||(t.email=na.t("account.errors.required"),t.isValid=!1),!e.newPassword&&n&&(t.newPassword=na.t("account.errors.requiredOrSelectKeepPassword"),t.isValid=!1),!e.newPasswordConfirm&&n&&(t.newPasswordConfirm=na.t("account.errors.requiredOrSelectKeepPassword"),t.isValid=!1),!e.currentPassword&&n&&(t.currentPassword=na.t("account.errors.requiredOrSelectKeepPassword"),t.isValid=!1),!r.test(e.newPassword)&&n&&(t.newPassword=na.t("account.errors.passwordConditions"),t.isValid=!1),e.newPasswordConfirm!==e.newPassword&&(t.newPasswordConfirm=na.t("account.errors.passwordMismatched"),t.isValid=!1),t.documents=(e.documents||[]).map((function(e,n){var a=null;return e||(a=na.t("account.errors.selectDocAndType")),(e||{}).document||(a=na.t("account.errors.selectPdfWordJpg")),(e||{}).document instanceof File&&(e||{}).document.size>25e6&&(a="".concat(na.t("account.errors.docMustBeLessThan")," 25MB")),!a&&(e||{}).documentType||(t.documentsAreValid=!1,t.isValid=!1),!a&&(e||{}).documentType||(t.atIndex=n),{documentType:(e||{}).documentType?null:na.t("account.errors.mustSelectDocType"),document:a}})),t},rp=function(e){var t=[];return t.push(e.profilePicture),(e.documents||[]).forEach((function(e){t.push(e.document)})),t},op=Object(_t.a)({form:"accountForm",enableReinitialize:!0,validate:ap,destroyOnUnmount:!0})((function(e){var t,n=e.token,o=e.instructorLoggedIn,s=e.studentLoggedIn,i=e.formValues,c=void 0===i?{}:i,l=e.initialValues,u=e.changeField,d=e.touchField,m=e.clearProfilePicture,p=e.updateAccount,f=e.showDocuments,g=e.formErrors,b=e.loading,h=e.width,E=Object(St.a)().t,y=Object(a.useState)(null),T=Object(mo.a)(y,2),S=T[0],k=T[1],w=Object(a.useState)(!0),O=Object(mo.a)(w,2),C=O[0],x=O[1],A=c.isEditingPassword;Object(a.useEffect)((function(){var e=rp(l);k(e)}),[]),s&&(t="student"),o&&(t="instructor");var F=function(){u("isEditingPassword",!!!A)};function D(e,t){return{info:e,fieldName:t}}var _=[D(E("account.firstName"),"firstName"),D(E("account.lastName"),"lastName"),D(E("account.email"),"email"),D(E("account.dob"),"dob"),D(E("account.id"),"numericalId"),A?D(E("account.currentPassword"),"currentPassword"):D(E("account.password"),E("account.buttons.edit")),A?D(E("account.newPassword"),"newPassword"):null,A?D(E("account.confirmPassword"),"newPasswordConfirm"):null],I=!((C||g.isValid)&&(!g.asyncError||g.isValid));return r.a.createElement(v,null,r.a.createElement(to,{transparent:!0,active:b}),r.a.createElement("div",{style:{maxWidth:"500px",margin:h>500?"20px auto 0 auto":"40px auto 0 auto"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ca.a,{name:"profilePicture",circle:!0,onChangeFile:function(e){u("loadedProfilePicture",e)},compressImage:!0,loadedFile:c.loadedProfilePicture,component:Pa,imageFile:!0,type:"file",uploadButtonText:c.loadedProfilePicture?E("account.buttons.updateProfilePicture"):E("account.buttons.uploadProfilePicture"),mimeTypesAllowed:"image/jpeg",extensionsAllowed:["jpeg","jpg","jfif"]}),r.a.createElement(ot.a,{disabled:!c.loadedProfilePicture,variant:"outlined",color:"secondary",type:"button",onClick:function(){return m()},style:{display:"block",margin:"auto"}},E("account.buttons.clearProfilePicture"))),r.a.createElement(ni.a,{"aria-label":"simple table"},r.a.createElement(ai.a,null,_.map((function(e,t){return e?r.a.createElement(oi.a,{key:e.info+t},r.a.createElement(ri.a,{component:"th",scope:"row"},e.info,5===t&&A&&r.a.createElement(et.a,{color:"primary",onClick:F,variant:"caption",style:{cursor:"pointer",display:"block"}},E("account.buttons.keepPassword"))),r.a.createElement(ri.a,{align:"left"}," ",!(3===t||5===t&&!A)&&r.a.createElement(ca.a,{disabled:4===t,name:"".concat(e.fieldName),component:fa,simple:!0,type:5===t||6===t||7===t?"password":"text"}),3===t&&r.a.createElement(ca.a,{name:e.fieldName,oneFifthWidth:!0,component:er,type:"date",options:{disableFuture:!0},account:!0,handleChange:function(e){return u("dob",e)},maxDate:new Date(Date.now()-943488e5)}),5===t&&!A&&r.a.createElement(ot.a,{color:"primary",onClick:F},e.fieldName))):null})))),r.a.createElement(ot.a,{variant:"contained",onClick:function(){u("isEditingPassword",!1),f()},color:"primary",style:{margin:"20px auto 0 auto",display:"block"}},E("account.buttons.documents")),I&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},r.a.createElement(et.a,{color:"error"},E("account.errors.correctForm"))),r.a.createElement(ot.a,{fullWidth:!0,variant:"outlined",style:I?{color:"#FF4136",borderColor:"#FF4136",backgroundColor:"#ffcdd2"}:{color:"#43a047",borderColor:"#43a047",backgroundColor:"#e8f5e9"},type:"button",onClick:function(){var e=rp(c),a=(S||[]).filter((function(t){if(!e.includes(t))return t}));!function(){if(d("firstName"),d("lastName"),d("dob"),d("sex"),d("currentPassword"),d("newPassword"),d("newPasswordConfirm"),g.isValid)return!0}()?x(!1):p(Object(At.a)(Object(At.a)({},c),{},{accountType:t,newPassword:A?c.newPassword:null,currentPassword:A?c.currentPassword:null,language:localStorage.getItem("i18nextLng")||"en"}),n,a)}},E("account.buttons.saveChanges"))))})),sp=Object(c.b)((function(e){return{formValues:Object(Ve.a)("accountForm")(e),formErrors:Object(Ft.a)("accountForm")(e),token:e.authentication.token,userId:e.authentication.userId,notification:e.common.notification,course:e.common.selectedCourse,courses:e.common.courses,coursePanel:e.common.coursePanel,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn,user:e.authentication,initialValues:e.authentication.loadedUser,loading:e.authentication.loading,width:e.common.width}}),(function(e){return{updateAccount:function(t,n,a){return e(function(e,t,n){return{type:"UPDATE_ACCOUNT_START",payload:{formData:e,token:t,filesToDelete:n}}}(t,n,a))},logout:function(){e(Te())},changeField:function(t,n){e(Object(Dt.a)("accountForm",t,n))},touchField:function(t){e(Object(Dt.d)("accountForm",t))},showDocuments:function(){e(Ne(null,"studentDocuments"))},clearProfilePicture:function(){e(Object(Dt.a)("accountForm","profilePicture",null)),e(Object(Dt.a)("accountForm","loadedProfilePicture",null))}}}))(op),ip=Object(_t.a)({form:"configurationForm",enableReinitialize:!0,destroyOnUnmount:!0})((function(e){var t=e.token,n=e.instructorLoggedIn,o=e.studentLoggedIn,s=e.formValues,i=void 0===s?{}:s,c=(e.initialValues,e.changeField,e.touchField,e.updateConfiguration),l=e.loading,u=e.width,d=e.loadedUser,m=e.fetchConfig,p=e.selectedCourse,f=Object(St.a)().t,g=Object(a.useState)(!0),b=Object(mo.a)(g,2);b[0],b[1];Object(a.useEffect)((function(){var e=go()("https://mernstackelearn.herokuapp.com/",{query:{token:t}});return e.on("updateConfig",(function(e){"all"===e.userType&&m(t)})),function(){e.disconnect()}}),[(p||{})._id]);function h(e,t,n,a){return{info:e,fieldName:t,type:n,user:a}}var E,y=[h(f("config.privacy"),"","header"),h(f("config.hideActiveStatus"),"isHideActiveStatus","switch"),h(f("config.notificationsHeader"),"","header"),h(f("config.course"),"isCourseNotifications","switch"),h(f("config.lessons"),"isLessonNotifications","switch"),h(f("config.assignments"),"isAssignmentNotifications","switch"),h(f("config.tests"),"isTestNotifications","switch"),h(f("config.chat"),"isChatNotifications","switch"),h(f("config.emailsHeader"),"","header"),h(f("config.course"),"isCourseEmails","switch"),h(f("config.lessons"),"isLessonEmails","switch"),h(f("config.assignments"),"isAssignmentEmails","switch"),h(f("config.tests"),"isTestEmails","switch")],T=[h(f("config.privacy"),"","header"),h(f("config.hideActiveStatus"),"isHideActiveStatus","switch"),h(f("config.chatAllowedOutsideOfficehours"),"isChatAllowedOutsideOfficehours","switch"),h(f("config.sendNotificationsHeader"),"","header"),h(f("config.tests"),"isSendTestNotifications","switch"),h(f("config.lessons"),"isSendLessonNotifications","switch"),h(f("config.assignments"),"isSendAssignmentNotifications","switch"),h(f("config.course"),"isSendCourseNotifications","switch"),h(f("config.sendEmailsHeader"),"","header"),h(f("config.tests"),"isSendTestEmails","switch"),h(f("config.lessons"),"isSendLessonEmails","switch"),h(f("config.assignments"),"isSendAssignmentEmails","switch"),h(f("config.course"),"isSendCourseEmails","switch"),h(f("config.notificationsHeader"),"","header"),h(f("config.enrollRequest"),"isEnrollNotifications","switch"),h(f("config.dropCourse"),"isDropCourseNotifications","switch"),h(f("config.assignments"),"isAssignmentNotifications","switch"),h(f("config.tests"),"isTestNotifications","switch"),h(f("config.chat"),"isChatNotifications","switch"),h(f("config.newInstructorAccountNotifications"),"isNewInstructorAccountNotifications","switch","admin"),h(f("config.emailsHeader"),"","header"),h(f("config.assignments"),"isAssignmentEmails","switch"),h(f("config.tests"),"isTestEmails","switch"),h(f("config.enrollRequest"),"isEnrollEmails","switch"),h(f("config.dropCourse"),"isDropCourseEmails","switch"),h(f("config.newInstructorAccountEmails"),"isNewInstructorAccountEmails","switch","admin")],S=[h(f("config.platformConfiguration"),"","header"),h(f("config.dropCoursePenalty"),"isDropCoursePenalty","switch"),h(f("config.dropCourseGrade")+" (%)","dropCourseGrade","numberField"),h(f("config.coursePassGrade")+" (%)","coursePassGrade","numberField"),h(f("config.enrollAllowedAfterDropCourse"),"isEnrollAllowedAfterDropCourse","switch"),h(f("config.instructorCoursesLimited"),"isInstructorCoursesLimit","switch"),i.isInstructorCoursesLimit?h(f("config.instructorCoursesLimit"),"instructorCoursesLimit","numberField"):null,h(f("config.approveInstructorAccounts"),"isApproveInstructorAccounts","switch"),h(f("config.approveStudentAccounts"),"isApproveStudentAccounts","switch"),h(f("config.contentBlockedCourseEnd"),"isContentBlockedCourseEnd","switch"),h(f("config.studentFileSizeLimit")+" (MB)","studentFileSizeLimit","numberField"),h(f("config.instructorFileSizeLimit")+" (MB)","instructorFileSizeLimit","numberField"),h(f("config.passwordRequiredStartTest"),"isPasswordRequiredStartTest","switch"),h(f("config.voiceRecordTimeLimit"),"voiceRecordTimeLimit","numberField"),h(f("config.allowStudentAccountDeletion"),"isAllowDeleteStudentAccount","switch"),h(f("config.allowInstructorAccountDeletion"),"isAllowDeleteInstructorAccount","switch")].filter((function(e){return e})).map((function(e){return Object(At.a)(Object(At.a)({},e),{},{user:"admin"})}));return console.log("adminConfigRows",S),o&&(E=y),n&&(E=[].concat(T,Object(Pr.a)(S))),console.log("rows: ",E),r.a.createElement(v,null,r.a.createElement(to,{transparent:!0,active:l}),r.a.createElement("div",{style:{maxWidth:"500px",margin:u>500?"20px auto 0 auto":"40px auto 0 auto"}},r.a.createElement(ni.a,{"aria-label":"simple table"},r.a.createElement(ai.a,null,E.map((function(e,t){var n;return"switch"===e.type&&(n=Ea),"textField"===e.type&&(n=fa),"numberField"===e.type&&(n=Oa),r.a.createElement(oi.a,{style:{marginTop:"header"===e.type?20:0},key:e.info+t},r.a.createElement(ri.a,{style:{fontSize:"header"===e.type?"1.5em":"1em"},component:"th",scope:"row"},e.info),r.a.createElement(ri.a,{align:"right"},"header"!==e.type&&r.a.createElement(ca.a,{width:80,disabled:!d.admin&&"admin"===e.user,options:{label:"",disabled:!d.admin&&"admin"===e.user},name:e.fieldName,component:n,simple:!0})))})))),r.a.createElement(ot.a,{fullWidth:!0,style:{marginBottom:25},variant:"outlined",type:"button",onClick:function(){c(i,t)}},f("account.buttons.saveChanges"))))})),cp=Object(c.b)((function(e){return{formValues:Object(Ve.a)("configurationForm")(e),formErrors:Object(Ft.a)("configurationForm")(e),token:e.authentication.token,userId:e.authentication.userId,notification:e.common.notification,course:e.common.selectedCourse,courses:e.common.courses,coursePanel:e.common.coursePanel,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn,user:e.authentication,initialValues:e.common.configuration,loading:e.authentication.loading,loadedUser:e.authentication.loadedUser,width:e.common.width,selectedCourse:e.common.selectedCourse}}),(function(e){return{updateConfiguration:function(t,n){return e(function(e,t){return{type:"UPDATE_CONFIG_START",payload:{token:t,configData:e}}}(t,n))},touchField:function(t){e(Object(Dt.d)("configurationForm",t))},fetchConfig:function(t){return e(Oe(t))}}}))(ip),lp=(n(1120),n(1121),n(1122),n(1123),n(1124),Object(d.h)(Object(c.b)((function(e){return{isAuthenticated:null!==e.authentication.token,studentLoggedIn:e.authentication.studentLoggedIn,instructorLoggedIn:e.authentication.instructorLoggedIn,adminLoggedIn:e.authentication.adminLoggedIn,loadedUser:e.authentication.loadedUser,successMessage:e.authentication.successMessage||e.studentCourse.successMessage||e.studentTest.successMessage||e.instructorCourse.successMessage||e.instructorTest.successMessage||e.instructorQuestion.successMessage||e.instructorModules.successMessage||e.instructorLesson.successMessage||e.common.successMessage,failMessage:e.authentication.failMessage||e.studentCourse.failMessage||e.studentTest.failMessage||e.instructorCourse.failMessage||e.instructorTest.failMessage||e.instructorQuestion.failMessage||e.instructorModules.failMessage||e.instructorLesson.failMessage||e.common.failMessage,token:e.authentication.token,userId:e.authentication.userId}}),(function(e){return{onTryAutoSignup:function(){return e({type:"CHECK_USER_SESSION"})},updateActivity:function(t,n,a){console.log("should update activity: ",t,n),e(Se(t,n,a))}}}))((function(e){var t=e.onTryAutoSignup,n=e.successMessage,o=e.failMessage,s=e.token,i=e.userId,c=e.match,l=e.loadedUser,u=e.updateActivity;e.location;Object(a.useEffect)((function(){t()}),[]),console.log("match in app: ",c);var g=r.a.createElement(v,null,r.a.createElement(np,{successMessage:n,failMessage:o}),r.a.createElement(d.d,null,s&&r.a.createElement(v,null,l&&r.a.createElement(d.b,{exact:!0,path:"/account",render:function(e){return r.a.createElement(sp,e)}}),r.a.createElement(d.b,{path:"/configuration",component:cp}),r.a.createElement(d.b,{path:"/student-panel",component:fl}),r.a.createElement(d.b,{path:"/instructor-panel",component:Lc}),r.a.createElement(d.b,{path:"/admin-panel",component:T})),r.a.createElement(d.b,{exact:!0,path:"/authentication",component:_l}),r.a.createElement(d.b,{exact:!0,path:"/verify-account/:accountType/:token",component:Ql}),r.a.createElement(d.b,{exact:!0,path:"/reset/:accountType/:token",component:Ll}),r.a.createElement(d.a,{to:"/authentication"})));return r.a.createElement("div",null,r.a.createElement(p.a,{utils:m.a},r.a.createElement(Xm.a,{i18n:na},r.a.createElement(f.a,{theme:Zm},s&&r.a.createElement(Ym.a,{element:document,onActive:function(){console.log("active "),u(i,s,"active")},onIdle:function(){console.log("idle "),u(i,s,"idle")},debounce:1e3,timeout:15e3}),r.a.createElement(d.c,{history:Nc},r.a.createElement(Km,null,g,r.a.createElement(d.b,{exact:!0,path:"/logout",component:bl})))))))})))),up=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function dp(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var mp=n(539),pp=n(2),fp=function(e,t){return wr()({url:"".concat("https://mernstackelearn.herokuapp.com/","graphql"),method:"POST",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},data:JSON.stringify(e),validateStatus:!1})},gp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={query:"\n            query UserLogin($email: String!, $password: String!,$userType: String!) {\n              userLogin(email: $email, password: $password, userType: $userType) {\n                token\n                userId\n                expiresIn\n                firstName\n                lastName\n                language\n                profilePicture\n                lastLogin\n                refreshTokenExpiration\n                admin\n              }\n            }\n          ",variables:{email:e.email,password:e.password,userType:e.type}};return t},bp=function(e){var t=e.formData,n=e._id;return{query:"\n           mutation CreateAccount(\n             $email: String!,\n             $firstName: String!,\n             $lastName: String!,\n             $password: String!,\n             $dob: String!,\n             $language: String!,\n             $id:ID!,\n             $accountType:String!,\n                  ) {\n             createAccount(accountInput: {\n               email: $email, \n               firstName: $firstName, \n               lastName: $lastName, \n               password: $password, \n               dob: $dob, \n               language: $language, \n               id:$id,\n               accountType:$accountType,\n              }) {\n               _id\n               email\n             }\n           }\n         ",variables:{email:t.email,firstName:t.firstName,lastName:t.lastName,password:t.password,language:t.language,dob:t.dob,langauge:t.langauge,id:n,accountType:t.type}}},hp=function(e){var t=e.formData,n=e.profilePictureKey,a=e.profilePictureFile,r=e.formattedDocuments;return{query:"\n           mutation UpdateAccount(\n             $email: String!, \n             $firstName: String!, \n             $lastName: String!, \n             $newPassword: String, \n             $currentPassword: String, \n             $dob: String!, \n             $language: String!, \n             $profilePicture: String,\n             $accountType: String!\n             ) {\n             updateAccount(accountInput: {\n               email: $email, \n               firstName: $firstName, \n               lastName: $lastName, \n               newPassword: $newPassword, \n               currentPassword: $currentPassword, \n               dob: $dob, \n               language: $language, \n               profilePicture: $profilePicture, \n               accountType: $accountType\n               documents: [".concat(r,"]\n              })\n           }\n         "),variables:{email:t.email,firstName:t.firstName,lastName:t.lastName,currentPassword:t.currentPassword,newPassword:t.newPassword,dob:t.dob,language:t.language,accountType:t.accountType,profilePicture:a instanceof File?n:a}}},Ep=function(e,t){return{query:"\n        mutation VerifyAccount($password: String!, $token: String!) {\n          verifyAccount(password: $password, token: $token){\n            token\n            userId\n            expiresIn\n            firstName\n            lastName\n            language\n            refreshTokenExpiration\n          }\n        }\n      ",variables:{password:e,token:t}}},vp=function(e,t){return{query:"\n        mutation ResendVerificationEmail($email: String!, $accountType: String!) {\n          resendVerificationEmail(email:$email,accountType:$accountType)\n        }\n      ",variables:{email:e,accountType:t}}},yp=function(e,t){return{query:"\n        mutation PasswordResetInitialize($email: String!, $accountType: String!) {\n          passwordResetInitialize(passwordResetInitializeInput: {email: $email, accountType: $accountType}) {\n            token\n          }\n        }\n      ",variables:{email:e,accountType:t}}},Tp=function(e,t,n){return{query:"\n        mutation PasswordReset($password: String!, $confirmPassword: String!, $accountType: String!, $token: String!) {\n          passwordReset(passwordResetInput: {password: $password, confirmPassword: $confirmPassword, accountType: $accountType, token: $token})\n        }\n      ",variables:{password:e.password,confirmPassword:e.confirmPassword,token:t,accountType:n}}},Sp=xa.a.mark(Qp),kp=xa.a.mark(Wp),wp=xa.a.mark(Hp),Op=xa.a.mark(zp),Cp=xa.a.mark(Gp),xp=xa.a.mark(Vp),Ap=xa.a.mark($p),Fp=xa.a.mark(Yp),Dp=xa.a.mark(Jp),_p=xa.a.mark(Kp),Ip=xa.a.mark(Zp),jp=xa.a.mark(Xp),Rp=xa.a.mark(ef),Np=xa.a.mark(tf),Lp=xa.a.mark(nf),Pp=xa.a.mark(af),Bp=xa.a.mark(rf),Mp=xa.a.mark(of),qp=xa.a.mark(sf),Up=xa.a.mark(cf);function Qp(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E;return xa.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,n=t.formData,a=gp(n),v.prev=3,v.next=6,Object(pp.b)(fp,a);case 6:if(r=v.sent,console.log("Login response",r),(s=r.data.errors)&&(o=s[0].message),!s||"wrongPassword"!==o){v.next=13;break}return v.next=13,Object(pp.e)(Object(Dt.e)("authenticationForm",{password:na.t("auth.errors.wrongPassword"),asyncError:!0}));case 13:if(!s||"studentNoAccount"!==o&&"instructorNoAccount"!==o){v.next=17;break}return o=s[0].message,v.next=17,Object(pp.e)(Object(Dt.e)("authenticationForm",{email:na.t("auth.errors.".concat(o)),asyncError:!0}));case 17:if(!s||"notVerifiedCheckEmail"!==o){v.next=21;break}return o=s[0].message,v.next=21,Object(pp.e)(Object(Dt.e)("authenticationForm",{type:na.t("auth.errors.notVerifiedCheckEmail"),asyncError:!0}));case 21:if(!s){v.next=25;break}return v.next=24,Object(pp.e)(be());case 24:return v.abrupt("return");case 25:if(i=r.data.data.userLogin,c=i.token,l=i.userId,u=i.expiresIn,d=i.firstName,m=i.lastName,p=n.type,f=i.profilePicture,g=i.language,b=i.refreshTokenExpiration,h=i.lastLogin,console.log("last login: ",h),"student"!==p&&"instructor"!==p){v.next=42;break}return v.next=40,Object(pp.e)(Me(c));case 40:return v.next=42,Object(pp.e)(Ae(c));case 42:if("instructor"!==p){v.next=45;break}return v.next=45,Object(pp.e)(H(c));case 45:if("student"!==p){v.next=48;break}return v.next=48,Object(pp.e)(w(c));case 48:return v.next=50,Object(pp.e)(ge({token:c,userId:l,userType:p,firstName:d,lastName:m,profilePicture:f,expirationDate:u,refreshTokenExpiration:b,lastLogin:h,language:g}));case 50:"instructor"===p&&Nc.push("/instructor-panel/courses"),"student"===p&&Nc.push("/student-panel/courses"),"admin"===p&&Nc.push("/admin-panel"),v.next=65;break;case 55:return v.prev=55,v.t0=v.catch(3),console.log("e: ",v.t0),E=na.t("alerts.auth.loginFail"),v.next=61,Object(pp.e)(be(E));case 61:return v.next=63,Object(pp.c)(3e3);case 63:return v.next=65,Object(pp.e)(Le());case 65:case"end":return v.stop()}}),Sp,null,[[3,55]])}function Wp(e){var t,n,a,r,o,s;return xa.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.token,n={query:"\n            query User {\n              user {\n                _id\n                dob\n                firstName\n                lastName\n                language\n                email\n                profilePicture\n                admin\n                documents {\n                  document\n                  documentType\n                }\n              }\n            }\n          "},i.prev=2,i.next=5,Object(pp.b)(fp,n,t);case 5:if(a=i.sent,console.log("Fetch user response",a),!a.data.errors){i.next=9;break}throw new Error("Failed to get te courses");case 9:return r=a.data.data.user,o=as(r.profilePicture),i.next=13,Object(pp.e)(pe(Object(At.a)(Object(At.a)({},r),{},{numericalId:r._id.replace(/\D/g,""),dob:new Date(r.dob),loadedProfilePicture:r.profilePicture,profilePicture:o,documents:r.documents.map((function(e){return{documentType:e.documentType,document:as(e.document),loadedDocument:e.document}}))})));case 13:i.next=25;break;case 15:return i.prev=15,i.t0=i.catch(2),console.log("e: ",i.t0),s=na.t("alerts.auth.fetchUserFail"),i.next=21,Object(pp.e)(fe(s));case 21:return i.next=23,Object(pp.c)(3e3);case 23:return i.next=25,Object(pp.e)(Le());case 25:case"end":return i.stop()}}),kp,null,[[2,15]])}function Hp(){var e,t,n,a,r,o,s;return xa.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=localStorage.getItem("token"),i.prev=1,e){i.next=7;break}return i.next=5,Object(pp.e)(Te());case 5:i.next=34;break;case 7:if(!((t=new Date(localStorage.getItem("expirationDate"))).getTime()<=Date.now())){i.next=13;break}return i.next=11,Object(pp.e)(Te());case 11:i.next=34;break;case 13:if(n=localStorage.getItem("userFirstName"),a=localStorage.getItem("userLastName"),r=localStorage.getItem("userId"),o=localStorage.getItem("userType"),s=localStorage.getItem("profilePicture"),"student"!==o&&"instructor"!==o){i.next=23;break}return i.next=21,Object(pp.e)(Me(e));case 21:return i.next=23,Object(pp.e)(Ae(e));case 23:if("instructor"!==o){i.next=26;break}return i.next=26,Object(pp.e)(H(e));case 26:if("student"!==o){i.next=29;break}return i.next=29,Object(pp.e)(w(e));case 29:return"instructor"===o&&Nc.push("/instructor-panel/courses"),"student"===o&&Nc.push("/student-panel/courses"),"admin"===o&&Nc.push("/admin-panel"),i.next=34,Object(pp.e)(ge({token:e,userId:r,userType:o,firstName:n,lastName:a,profilePicture:s,expirationDate:t}));case 34:i.next=39;break;case 36:i.prev=36,i.t0=i.catch(1),console.log("e: ",i.t0);case 39:case"end":return i.stop()}}),wp,null,[[1,36]])}function zp(e){var t,n,a,r,o,s,i,c,l;return xa.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.formData,a=(new no.a.ObjectId).toHexString(),u.prev=3,r=bp({formData:n,_id:a}),u.next=7,Object(pp.b)(fp,r);case 7:if(o=u.sent,console.log("Signup response: ",o),(s=o.data.errors)&&(i=i=s[0].data[0].message),!s||"emailTaken"!==i){u.next=19;break}return u.next=14,Object(pp.e)(Object(Dt.e)("authenticationForm",{email:na.t("auth.errors.emailTaken"),asyncError:!0}));case 14:return u.next=16,Object(pp.e)(ce());case 16:return u.abrupt("return");case 19:if(!o.data.errors){u.next=21;break}throw new Error("Creating the account failed");case 21:return c=na.t("alerts.auth.accountCreatedSuccess"),u.next=24,Object(pp.e)({type:"CREATE_ACCOUNT_SUCCESS",message:c});case 24:return u.next=26,Object(pp.e)(ie());case 26:return u.next=28,Object(pp.e)(Object(Dt.b)("authenticationForm"));case 28:return u.next=30,Object(pp.e)(ve(1));case 30:return u.next=32,Object(pp.c)(6e3);case 32:return u.next=34,Object(pp.e)(Le());case 34:u.next=46;break;case 36:return u.prev=36,u.t0=u.catch(3),console.log("Error creating account: ",u.t0),l=na.t("alerts.auth.accountCreatedFail"),u.next=42,Object(pp.e)(ce(l));case 42:return u.next=44,Object(pp.c)(3e3);case 44:return u.next=46,Object(pp.e)(Le());case 46:case"end":return u.stop()}}),Op,null,[[3,36]])}function Gp(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E,v;return xa.a.wrap((function(y){for(;;)switch(y.prev=y.next){case 0:return t=e.payload,n=t.formData,a=t.token,r=t.filesToDelete,o=n.profilePicture,s="users/".concat(n._id,"/profilePicture"),i=Ir(o,s),c="users/".concat(n._id,"/documents"),l=(n.documents||[]).map((function(e){var t;return t=e.document instanceof File?Ir(e.document,c):ao(e.document),Object(At.a)(Object(At.a)({},e),{},{key:t})})),u="",l.forEach((function(e,t){u+='{ \n                        document: "'.concat(l[t].key||"",'", \n                        documentType: "').concat(l[t].documentType,'",\n                        }')})),y.prev=11,d=hp({formData:n,profilePictureKey:i,profilePictureFile:o,formattedDocuments:u}),y.next=15,Object(pp.b)(fp,d,a);case 15:if(m=y.sent,console.log("Update account response: ",m),(p=m.data.errors)&&(f=p[0].data[0].message),console.log("errorMessage",f),!p||"wrongPassword"!==f){y.next=28;break}return y.next=23,Object(pp.e)(Object(Dt.e)("accountForm",{currentPassword:na.t("auth.errors.wrongPassword"),asyncError:!0,isValid:!1}));case 23:return y.next=25,Object(pp.e)(le());case 25:return y.abrupt("return");case 28:if(!p||"emailTaken"!==f){y.next=36;break}return y.next=31,Object(pp.e)(Object(Dt.e)("accountForm",{email:na.t("auth.errors.emailTaken"),isValid:!1,asyncError:!0}));case 31:return y.next=33,Object(pp.e)(le());case 33:return y.abrupt("return");case 36:if(!m.data.errors){y.next=38;break}throw new Error("Updating account failed");case 38:if(!((r||[]).length>0)){y.next=41;break}return y.next=41,Object(pp.e)(ke(r,a));case 41:Nc.push("/".concat(n.accountType,"-panel/courses")),y.next=55;break;case 44:return y.prev=44,y.t0=y.catch(11),console.log("Error updating account: ",y.t0),g=na.t("alerts.auth.updatedAccountFail"),y.next=50,Object(pp.e)(le(g));case 50:return y.next=52,Object(pp.c)(3e3);case 52:return y.next=54,Object(pp.e)(Le());case 54:return y.abrupt("return");case 55:if(!(n.profilePicture instanceof File)){y.next=72;break}return y.prev=56,y.next=59,Object(pp.b)(jr,o,i,a);case 59:y.next=72;break;case 61:return y.prev=61,y.t1=y.catch(56),console.log("Error uploading profile picture: ",y.t1),b=na.t("alerts.auth.uploadingPictureFail"),y.next=67,Object(pp.e)(le(b));case 67:return y.next=69,Object(pp.c)(3e3);case 69:return y.next=71,Object(pp.e)(Le());case 71:return y.abrupt("return");case 72:y.prev=72,y.t2=xa.a.keys(l);case 74:if((y.t3=y.t2()).done){y.next=83;break}if(h=y.t3.value,!l.hasOwnProperty(h)){y.next=81;break}if(!(l[h].document instanceof File)){y.next=81;break}return y.next=80,Object(pp.b)(jr,l[h].document,l[h].key,a);case 80:return y.abrupt("continue",74);case 81:y.next=74;break;case 83:y.next=96;break;case 85:return y.prev=85,y.t4=y.catch(72),console.log("Error uploading account documents: ",y.t4),E=na.t("alerts.auth.uploadingDocumentsFail"),y.next=91,Object(pp.e)(le(E));case 91:return y.next=93,Object(pp.c)(3e3);case 93:return y.next=95,Object(pp.e)(Le());case 95:return y.abrupt("return");case 96:return v=na.t("alerts.auth.updatedAccountSuccess"),y.next=99,Object(pp.e)({type:"UPDATE_ACCOUNT_SUCCESS",message:v});case 99:return y.next=101,Object(pp.c)(3e3);case 101:return y.next=103,Object(pp.e)(Le());case 103:return y.next=105,Object(pp.e)(me(a));case 105:case"end":return y.stop()}}),Cp,null,[[11,44],[56,61],[72,85]])}function Vp(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h;return xa.a.wrap((function(E){for(;;)switch(E.prev=E.next){case 0:return t=e.payload,n=t.password,a=t.token,r=t.userType,o=Ep(n,a),E.prev=3,E.next=6,Object(pp.b)(fp,o);case 6:if(s=E.sent,console.log("Verify account response",s),(i=s.data.errors)&&i[0].message,!i||"wrongPassword"!==i[0].message){E.next=17;break}return i[0].message,E.next=14,Object(pp.e)(Object(Dt.e)("verifyAccount",{password:na.t("auth.errors.wrongPassword")}));case 14:return E.next=16,Object(pp.e)(ue());case 16:return E.abrupt("return");case 17:if(!s.data.errors){E.next=19;break}throw new Error("Failed to verify account");case 19:return c=na.t("alerts.auth.accountVerifySuccess"),E.next=22,Object(pp.e)({type:"ACCOUNT_VERIFICATION_SUCCESS",message:c});case 22:if(l=s.data.data.verifyAccount,u=l.token,d=l.userId,m=l.expiresIn,p=l.firstName,f=l.lastName,g=l.language,b=l.refreshTokenExpiration,"student"!==r&&"instructor"!==r){E.next=33;break}return E.next=33,Object(pp.e)(Ae(u));case 33:if("instructor"!==r){E.next=36;break}return E.next=36,Object(pp.e)(H(u));case 36:if("student"!==r){E.next=39;break}return E.next=39,Object(pp.e)(Me(u));case 39:return E.next=41,Object(pp.e)(ge({token:u,userId:d,userType:r,firstName:p,lastName:f,expirationDate:m,refreshTokenExpiration:b,language:g}));case 41:return"instructor"===r&&Nc.push("/instructor-panel/courses"),"student"===r&&Nc.push("/student-panel/courses"),"admin"===r&&Nc.push("/admin-panel"),E.next=46,Object(pp.c)(3e3);case 46:return E.next=48,Object(pp.e)(Le());case 48:E.next=60;break;case 50:return E.prev=50,E.t0=E.catch(3),console.log("Error verifying the account"),h=na.t("alerts.auth.accountVerifyFail"),E.next=56,Object(pp.e)(ue(h));case 56:return E.next=58,Object(pp.c)(3e3);case 58:return E.next=60,Object(pp.e)(Le());case 60:case"end":return E.stop()}}),xp,null,[[3,50]])}function $p(e){var t,n,a,r,o,s,i;return xa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.email,a=t.accountType,r=vp(n,a),c.prev=3,c.next=6,Object(pp.b)(fp,r);case 6:if(o=c.sent,console.log("Resend e-mail verification response",o),!o.data.errors){c.next=10;break}throw new Error("Failed to send a verification e-mail");case 10:return s=na.t("alerts.auth.verificationLinkSentSuccess"),c.next=13,Object(pp.e)({type:"RESEND_EMAIL_VERIFICATION_SUCCESS",message:s});case 13:return c.next=15,Object(pp.c)(3e3);case 15:return c.next=17,Object(pp.e)(Le());case 17:c.next=29;break;case 19:return c.prev=19,c.t0=c.catch(3),console.log("Error sending the verification e-mail"),i=na.t("alerts.auth.verificationLinkSentFail"),c.next=25,Object(pp.e)(de(i));case 25:return c.next=27,Object(pp.c)(3e3);case 27:return c.next=29,Object(pp.e)(Le());case 29:case"end":return c.stop()}}),Ap,null,[[3,19]])}function Yp(e){var t,n,a,r,o,s,i,c,l,u;return xa.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,n=t.authData,a=n.email,r=n.type,o=yp(a,r),d.prev=3,d.next=6,Object(pp.b)(fp,o);case 6:if(s=d.sent,console.log("Send password reset link response: ",s),(c=s.data.errors)&&(i=c[0].message),!c||"studentNoAccount"!==i&&"instructorNoAccount"!==i){d.next=17;break}return i=c[0].message,d.next=14,Object(pp.e)(Object(Dt.e)("authenticationForm",{email:na.t("auth.errors.".concat(i)),asyncError:!0}));case 14:return d.next=16,Object(pp.e)(he());case 16:return d.abrupt("return");case 17:if(!s.data.errors){d.next=19;break}throw new Error("Failed to initialize password reset");case 19:return l=na.t("alerts.auth.passwordResetLinkSentSuccess"),d.next=22,Object(pp.e)({type:"PASSWORD_RESET_LINK_SUCCESS",message:l});case 22:return d.next=24,Object(pp.e)(ie(null,"signin"));case 24:return d.next=26,Object(pp.e)(Object(Dt.c)("authenticationForm"));case 26:return d.next=28,Object(pp.c)(3e3);case 28:return d.next=30,Object(pp.e)(Le());case 30:d.next=42;break;case 32:return d.prev=32,d.t0=d.catch(3),console.log("Error sending password reset link"),u=na.t("alerts.auth.passwordResetLinkSentFail"),d.next=38,Object(pp.e)(he(u));case 38:return d.next=40,Object(pp.c)(3e3);case 40:return d.next=42,Object(pp.e)(Le());case 42:case"end":return d.stop()}}),Fp,null,[[3,32]])}function Jp(e){var t,n,a,r,o,s,i,c;return xa.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.authData,a=t.token,r=t.accountType,o=Tp(n,a,r),l.prev=3,l.next=6,Object(pp.b)(fp,o);case 6:if(s=l.sent,console.log("Change password response",s),!s.data.errors){l.next=10;break}throw new Error("Failed to set a new password");case 10:return i=na.t("alerts.auth.passwordChangeSuccess"),l.next=13,Object(pp.e)({type:"CHANGE_PASSWORD_SUCCESS",message:i});case 13:return l.next=15,Object(pp.e)(Object(Dt.c)("passwordReset"));case 15:return Nc.push("/authentication"),l.next=18,Object(pp.c)(3e3);case 18:return l.next=20,Object(pp.e)(Le());case 20:l.next=32;break;case 22:return l.prev=22,l.t0=l.catch(3),console.log("Error changing password"),c=na.t("alerts.auth.passwordChangeFail"),l.next=28,Object(pp.e)(Ee(c));case 28:return l.next=30,Object(pp.c)(3e3);case 30:return l.next=32,Object(pp.e)(Le());case 32:case"end":return l.stop()}}),Dp,null,[[3,22]])}function Kp(e){var t,n,a,r,o;return xa.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.token,a={query:"\n        mutation refreshToken {\n          refreshToken {\n            token\n            expiresIn\n          }\n        }\n      "},s.prev=3,s.next=6,Object(pp.b)(fp,a,n);case 6:if(r=s.sent,console.log("Refresh session response",r),o=r.data.data.refreshToken,!r.data.errors){s.next=11;break}throw new Error("Failed to refresh session");case 11:return s.next=13,Object(pp.e)({type:"REFRESH_TOKEN_SUCCESS",authData:{token:"expired"===o.token?"":o.token,expirationDate:"same"===o.expiresIn?"":o.expiresIn}});case 13:return s.next=15,Object(pp.e)(Pe("off"));case 15:s.next=27;break;case 17:return s.prev=17,s.t0=s.catch(3),console.log("Error refreshing the token"),na.t("alerts.auth.extendingSessionFail"),s.next=23,Object(pp.e)({type:"REFRESH_TOKEN_FAIL",message:void 0});case 23:return s.next=25,Object(pp.c)(3e3);case 25:return s.next=27,Object(pp.e)(Le());case 27:case"end":return s.stop()}}),_p,null,[[3,17]])}function Zp(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("AUTHENTICATION_START",Qp);case 2:case"end":return e.stop()}}),Ip)}function Xp(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("CHECK_USER_SESSION",Hp);case 2:case"end":return e.stop()}}),jp)}function ef(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("FETCH_USER_START",Wp);case 2:case"end":return e.stop()}}),Rp)}function tf(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("CREATE_ACCOUNT_START",zp);case 2:case"end":return e.stop()}}),Np)}function nf(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("PASSWORD_RESET_LINK_START",Yp);case 2:case"end":return e.stop()}}),Lp)}function af(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("UPDATE_ACCOUNT_START",Gp);case 2:case"end":return e.stop()}}),Pp)}function rf(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("ACCOUNT_VERIFICATION_START",Vp);case 2:case"end":return e.stop()}}),Bp)}function of(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("RESEND_EMAIL_VERIFICATION_START",$p);case 2:case"end":return e.stop()}}),Mp)}function sf(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("CHANGE_PASSWORD_START",Jp);case 2:case"end":return e.stop()}}),qp)}function cf(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("REFRESH_TOKEN_START",Kp);case 2:case"end":return e.stop()}}),Up)}var lf=[Object(pp.d)(Zp),Object(pp.d)(Xp),Object(pp.d)(ef),Object(pp.d)(tf),Object(pp.d)(nf),Object(pp.d)(af),Object(pp.d)(rf),Object(pp.d)(of),Object(pp.d)(sf),Object(pp.d)(cf)],uf=function(e,t){return{query:"mutation EnrollRequest($studentId: ID!, $courseId: ID!)  {\n                 enrollRequest(studentId: $studentId, courseId: $courseId) \n               }\n             ",variables:{studentId:e,courseId:t}}},df=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={query:"mutation EnrollDeny($studentId: ID!, $courseId: ID!, $reason: String, $allowResubmission: Boolean!)  {\n                 enrollDeny(studentId: $studentId, courseId: $courseId, reason: $reason, allowResubmission: $allowResubmission) \n               }\n             ",variables:{studentId:e,courseId:t,reason:n,allowResubmission:a}};return r},mf=function(e,t){return{query:"\n               mutation DropCourse ($studentId: ID!, $courseId: ID!)  {\n                 dropCourse(studentId: $studentId, courseId: $courseId) {\n                  coursesEnrolled\n                  _id\n                  firstName\n                  lastName\n                 }\n               }\n             ",variables:{studentId:e,courseId:t}}},pf=xa.a.mark(Tf),ff=xa.a.mark(Sf),gf=xa.a.mark(kf),bf=xa.a.mark(wf),hf=xa.a.mark(Of),Ef=xa.a.mark(Cf),vf=xa.a.mark(xf),yf=xa.a.mark(Af);function Tf(e){var t,n,a,r,o,s,i,c;return xa.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.student,a=t.course,r=t.token,o=uf(n,a),l.prev=2,l.next=5,Object(pp.b)(fp,o,r);case 5:if(s=l.sent,console.log("Enroll request response: ",s),!s.data.errors){l.next=9;break}throw new Error("Enroll request failed!");case 9:return l.next=11,Object(pp.e)(Me(r));case 11:return i=na.t("alerts.course.requestSentSuccess"),l.next=14,Object(pp.e)({type:"ENROLL_REQUEST_SUCCESS",message:i});case 14:return l.next=16,Object(pp.e)({type:"CLOSE_MODAL"});case 16:return l.next=18,Object(pp.c)(3e3);case 18:return l.next=20,Object(pp.e)(Le());case 20:l.next=34;break;case 22:return l.prev=22,l.t0=l.catch(2),console.log(l.t0),c=na.t("alerts.course.requestSentFailed"),l.next=28,Object(pp.e)(A(c));case 28:return l.next=30,Object(pp.e)({type:"CLOSE_MODAL"});case 30:return l.next=32,Object(pp.c)(3e3);case 32:return l.next=34,Object(pp.e)(Le());case 34:case"end":return l.stop()}}),pf,null,[[2,22]])}function Sf(e){var t,n,a,r,o,s,i;return xa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.studentId,a=t.courseId,r=t.token,console.log("studentId, courseId, token",n,a,r),o={query:"mutation EnrollApprove($studentId: ID!, $courseId: ID!)  {\n                 enrollApprove(studentId: $studentId, courseId: $courseId) \n               }\n             ",variables:{studentId:n,courseId:a}},c.prev=3,c.next=6,Object(pp.b)(fp,o,r);case 6:if(s=c.sent,console.log("Enroll student approved response: ",s),!s.data.errors){c.next=10;break}throw new Error("Approving enrollment of the student failed!");case 10:return c.next=12,Object(pp.e)(Me(r));case 12:return c.next=14,Object(pp.e)(Qe(a,r));case 14:return c.next=16,Object(pp.e)({type:"ENROLL_COURSE_SUCCESS",message:void 0});case 16:return c.next=18,Object(pp.e)({type:"CLOSE_MODAL"});case 18:return c.next=20,Object(pp.e)(Re(0));case 20:return c.next=22,Object(pp.c)(3e3);case 22:return c.next=24,Object(pp.e)(Le());case 24:c.next=38;break;case 26:return c.prev=26,c.t0=c.catch(3),console.log(c.t0),i=na.t("alerts.course.enrollmentApproveFail"),c.next=32,Object(pp.e)(D(i));case 32:return c.next=34,Object(pp.e)({type:"CLOSE_MODAL"});case 34:return c.next=36,Object(pp.c)(3e3);case 36:return c.next=38,Object(pp.e)(Le());case 38:case"end":return c.stop()}}),ff,null,[[3,26]])}function kf(e){var t,n,a,r,o,s,i,c,l,u;return xa.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,n=t.student,a=t.course,r=t.token,o=t.reason,s=t.allowResubmission,i=df(n,a,o,s),d.prev=2,d.next=5,Object(pp.b)(fp,i,r);case 5:if(c=d.sent,console.log("Enroll course response: ",c),!c.data.errors){d.next=9;break}throw new Error("Enrolling in the course failed!");case 9:return d.next=11,Object(pp.e)(Me(r));case 11:return d.next=13,Object(pp.e)(Qe(a,r));case 13:return l=na.t("alerts.course.studentDenySuccess"),d.next=16,Object(pp.e)({type:"ENROLL_DENY_SUCCESS",message:l});case 16:return d.next=18,Object(pp.e)({type:"CLOSE_MODAL"});case 18:return d.next=20,Object(pp.e)(Re(1));case 20:return d.next=22,Object(pp.c)(3e3);case 22:return d.next=24,Object(pp.e)(Le());case 24:d.next=36;break;case 26:return d.prev=26,d.t0=d.catch(2),console.log(d.t0),u=na.t("alerts.course.studentDenyFail"),d.next=32,Object(pp.e)(I(u));case 32:return d.next=34,Object(pp.c)(3e3);case 34:return d.next=36,Object(pp.e)(Le());case 36:case"end":return d.stop()}}),gf,null,[[2,26]])}function wf(e){var t,n,a,r,o,s,i,c;return xa.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.student,a=t.course,r=t.token,o=mf(n,a),l.prev=2,l.next=5,Object(pp.b)(fp,o,r);case 5:if(s=l.sent,console.log("Drop course response: ",s),!s.data.errors){l.next=9;break}throw new Error("Dropping the course failed!");case 9:return l.next=11,Object(pp.e)(Me(r));case 11:return i=na.t("alerts.course.courseDropSuccess"),l.next=14,Object(pp.e)({type:"DROP_COURSE_SUCCESS",message:i});case 14:return l.next=16,Object(pp.e)({type:"CLOSE_MODAL"});case 16:return l.next=18,Object(pp.c)(3e3);case 18:return l.next=20,Object(pp.e)(Le());case 20:l.next=33;break;case 22:return l.prev=22,l.t0=l.catch(2),c=na.t("alerts.course.gradeCourseFail"),l.next=27,Object(pp.e)(j(c));case 27:return l.next=29,Object(pp.e)({type:"CLOSE_MODAL"});case 29:return l.next=31,Object(pp.c)(3e3);case 31:return l.next=33,Object(pp.e)(Le());case 33:case"end":return l.stop()}}),bf,null,[[2,22]])}function Of(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("ENROLL_REQUEST_START",Tf);case 2:case"end":return e.stop()}}),hf)}function Cf(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("ENROLL_COURSE_START",Sf);case 2:case"end":return e.stop()}}),Ef)}function xf(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("ENROLL_DENY_START",kf);case 2:case"end":return e.stop()}}),vf)}function Af(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("DROP_COURSE_START",wf);case 2:case"end":return e.stop()}}),yf)}var Ff=[Object(pp.d)(Of),Object(pp.d)(Cf),Object(pp.d)(xf),Object(pp.d)(Af)],Df=function(e,t,n,a,r,o,s){return{query:"\n            mutation SubmitTest(\n              $studentId: ID!, \n              $testId:ID!\n              $testClosed:Boolean!\n              $lastSavedOn:String\n              $submittedOn:String\n              $graded:Boolean!\n              $gradingInProgress:Boolean!\n              $grade: Float\n              $gradeOverride: Boolean\n              $gradeAdjustmentExplanation: String\n              $marking: Boolean!\n              ) {       \n              submitTest(\n                studentId:$studentId,\n                testId:$testId,\n                testClosed: $testClosed,\n                lastSavedOn: $lastSavedOn,\n                submittedOn: $submittedOn,\n                graded: $graded,\n                grade: $grade,\n                gradeAdjustmentExplanation: $gradeAdjustmentExplanation,\n                gradeOverride: $gradeOverride,\n                gradingInProgress: $gradingInProgress,\n                marking: $marking,\n                multipleChoiceAnswersInput: [".concat(a,"],\n                essayAnswersInput: [").concat(r,"],\n                speakingAnswersInput: [").concat(o,"],\n                fillBlankAnswersInput: [").concat(s,"],\n                )\n            }\n          "),variables:{testId:t._id,studentId:e,testClosed:n,gradingInProgress:!1,graded:!1,grade:null,gradeAdjustmentExplanation:null,gradeOverride:!1,marking:!1,lastSavedOn:n?null:Date.now().toString(),submittedOn:n?Date.now().toString():null}}},_f=function(e,t,n){var a="";((t||{}).multipleChoiceQuestions||[]).map((function(t,n){var r;((r=((e||{}).mcQuestions||[])[n]?((e||{}).mcQuestions||[])[n]:t.answerOptions.map((function(e){return""})))||[]).forEach((function(e){return e.replace(/"/g,"'")})),a+="{ questionNumber: ".concat(n+1," , answers: ").concat(JSON.stringify(r)," }")}));var r="";((t||{}).essayQuestions||[]).map((function(t,n){var a=((e||{}).essayQuestions||[])[n];r+="{ questionNumber: ".concat(n+1,' , answer: "').concat((a||"").replace(/"/g,"'"),'" }')}));var o="";((t||{}).speakingQuestions||[]).map((function(e,t){o+="{ questionNumber: ".concat(t+1," , answer: ").concat(JSON.stringify(n[t]||"")," }")}));var s="";return(((e||{}).fillBlankQuestions||{}).answers||[]).map((function(e,t){s+="{ questionNumber: ".concat(t+1,' , answer: "').concat((e||"").replace(/"/g,"'").trim(),'" }')})),{formattedMultipleChoiceAnswers:a,formattedEssayAnswers:r,formattedSpeakingAnswers:o,formattedFillBlankAnswers:s}},If=xa.a.mark(Lf),jf=xa.a.mark(Pf),Rf=xa.a.mark(Bf),Nf=xa.a.mark(Mf);function Lf(e){var t,n,a,r,o,s,i;return xa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.token,n={query:"\n               query FetchTestResults {\n                testResults {\n                  testResults {\n                    _id\n                    test\n                    course\n                    closed\n                    latePenalty\n                    graded\n                    gradingInProgress\n                    grade\n                    gradeOverride\n                    gradeAdjustmentExplanation\n                    multiplechoiceSection {\n                      grade\n                      answers {\n                        questionNumber\n                        answers\n                        additionalNotes\n                        marks\n                      }\n                    }\n                    essaySection {\n                      grade\n                      answers {\n                        questionNumber\n                        answer\n                        additionalNotes\n                        marks\n                        instructorCorrection\n                        allowCorrection\n                      }\n                    }\n                    speakingSection {\n                      grade\n                      answers {\n                        questionNumber\n                        answer\n                        additionalNotes\n                        marks\n                        feedbackAudio\n                      }\n                    }\n                    fillInBlanksSection {\n                      grade\n                      answers {\n                        questionNumber\n                        answer\n                        additionalNotes\n                        marks\n                      }\n                    }\n                  }\n                  testInSession {\n                    test\n                    startTime\n                    endTime\n                  }\n                  assignmentsInSession {\n                      assignment\n                      startTime\n                    }\n                 }\n               }\n             "},c.prev=2,c.next=5,Object(pp.b)(fp,n,t);case 5:if(a=c.sent,console.log("Getting student test results response",a),!a.data.errors){c.next=9;break}throw new Error("Getting the test results failed!");case 9:return r=a.data.data,c.next=12,Object(pp.e)({type:"FETCH_TEST_RESULTS_SUCCESS",testResults:(r||[]).testResults});case 12:if(o=(((r||{}).testResults||{}).testInSession||{}).test,s=(((r||{}).testResults||{}).testResults||[]).find((function(e){return!1===e.closed&&e.test===o})),!o){c.next=17;break}return c.next=17,Object(pp.e)(He(o,!0,t,s));case 17:c.next=29;break;case 19:return c.prev=19,c.t0=c.catch(2),console.log(c.t0),i=na.t("alerts.test.fetchTestResultsFail"),c.next=25,Object(pp.e)({type:"FETCH_TEST_RESULTS_FAIL",message:i});case 25:return c.next=27,Object(pp.c)(3e3);case 27:return c.next=29,Object(pp.e)(Le());case 29:case"end":return c.stop()}}),If,null,[[2,19]])}function Pf(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E,v,y,T,S,k;return xa.a.wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return t=e.payload,n=t.formValues,a=t.token,r=t.studentId,o=t.testClosed,s=t.test,i=t.courseId,c=t.filesToDelete,l=t.exitAssignment,u=t.filePath,d=((s||{}).speakingQuestions||[]).map((function(e,t){return(((n||{}).speakingQuestions||[])[t]||{}).audioFile})),m=d.map((function(e,t){var n;return n=e instanceof File?Ir(e,u):ao(e),e||(n=null),n})),p=_f(n,s,m),f=p.formattedMultipleChoiceAnswers,g=p.formattedEssayAnswers,b=p.formattedSpeakingAnswers,h=p.formattedFillBlankAnswers,E=Df(r,s,o,f,g,b,h),x.prev=5,x.next=8,Object(pp.b)(fp,E,a);case 8:if(v=x.sent,console.log("test or assignment submit response: ",v),!v.data.errors){x.next=12;break}throw new Error("Submitting the test or assignment failed!");case 12:x.next=25;break;case 14:return x.prev=14,x.t0=x.catch(5),console.log("error submitting the test or assignment",x.t0),y=o?na.t("alerts.test.studentTestSubmittedSuccess"):na.t("alerts.test.studentTestSavedSuccess"),x.next=20,Object(pp.e)(C(y));case 20:return x.next=22,Object(pp.c)(3e3);case 22:return x.next=24,Object(pp.e)(Le());case 24:return x.abrupt("return");case 25:x.prev=25,x.t1=xa.a.keys(d);case 27:if((x.t2=x.t1()).done){x.next=35;break}if(T=x.t2.value,!d.hasOwnProperty(T)){x.next=33;break}if(!(d[T]instanceof File)){x.next=33;break}return x.next=33,Object(pp.b)(jr,d[T],m[T],a);case 33:x.next=27;break;case 35:x.next=48;break;case 37:return x.prev=37,x.t3=x.catch(25),console.log("Error uploading audio file: ",x.t3),S=na.t("alerts.test.uploadAudioFail"),x.next=43,Object(pp.e)(C(S));case 43:return x.next=45,Object(pp.c)(3e3);case 45:return x.next=47,Object(pp.e)(Le());case 47:return x.abrupt("return");case 48:return x.next=50,Object(pp.e)(w(a));case 50:if(o||l){x.next=53;break}return x.next=53,Object(pp.e)(He(s._id,!0,a,!0));case 53:if(!(c.length>0)){x.next=56;break}return x.next=56,Object(pp.e)(ke(c,a));case 56:return k=o?na.t("alerts.test.studentTestSubmittedSuccess"):na.t("alerts.test.studentTestSavedSuccess"),x.next=59,Object(pp.e)(O(o,k));case 59:if(!o){x.next=73;break}return x.next=62,Object(pp.e)(Ue("modules"));case 62:return Nc.push("/student-panel/course/".concat(i)),x.next=65,Object(pp.e)(je([""]));case 65:return x.next=67,Object(pp.e)(w(a));case 67:return x.next=69,Object(pp.e)(Me(a));case 69:return x.next=71,Object(pp.e)(_e(i,a));case 71:return x.next=73,Object(pp.e)(Qe(i,a));case 73:return x.next=75,Object(pp.c)(3e3);case 75:return x.next=77,Object(pp.e)(Le());case 77:case"end":return x.stop()}}),jf,null,[[5,14],[25,37]])}function Bf(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("FETCH_TEST_RESULTS_START",Lf);case 2:case"end":return e.stop()}}),Rf)}function Mf(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("SUBMIT_TEST_START",Pf);case 2:case"end":return e.stop()}}),Nf)}var qf=[Object(pp.d)(Bf),Object(pp.d)(Mf)],Uf=function(e,t){return{query:"\n        mutation MarkSlideAsSeen(\n          $lessonId: ID!,\n          $slideNumber: Int!, \n          )  {       \n          markSlideAsSeen(\n            lessonId:$lessonId,\n            slideNumber:$slideNumber,\n            )\n        }\n      ",variables:{lessonId:e,slideNumber:t}}},Qf=xa.a.mark(Hf),Wf=xa.a.mark(zf);function Hf(e){var t,n,a,r,o,s,i;return xa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.token,a=t.lessonId,r=t.slideNumber,console.log("lessonId, slideNumber",a,r),console.log("token: ",n),o=Uf(a,r),c.prev=4,c.next=7,Object(pp.b)(fp,o,n);case 7:return s=c.sent,console.log("Mark slide as seen response: ",s),c.next=11,Object(pp.e)({type:"MARK_SLIDE_AS_SEEN_SUCCESS",message:void 0});case 11:return c.next=13,Object(pp.e)(Me(n));case 13:c.next=25;break;case 15:return c.prev=15,c.t0=c.catch(4),console.log("Failed to mark slide as seen",c.t0),i=na.t("alerts.lesson.markSlideFail"),c.next=21,Object(pp.e)(x(i));case 21:return c.next=23,Object(pp.c)(3e3);case 23:return c.next=25,Object(pp.e)(Le());case 25:case"end":return c.stop()}}),Qf,null,[[4,15]])}function zf(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("MARK_SLIDE_AS_SEEN_START",Hf);case 2:case"end":return e.stop()}}),Wf)}var Gf=[Object(pp.d)(zf)],Vf=function(e){return{query:"query FetchQuestions($courseId: ID!) {\n                questions(courseId: $courseId) {\n                  _id\n                  course\n                  language\n                  tags\n                  difficulty\n                  type\n        \n                  mcQuestion {\n                    question\n                    solution\n                    correctAnswers\n                    answers\n                  }\n        \n                  essayQuestion {\n                    question\n                    solution\n                  }\n        \n                  speakingQuestion {\n                    question\n                    audioQuestion\n                    audio\n                  }\n        \n                  fillBlankQuestions {\n                    question\n                    blanks {\n                      correctAnswer\n                      selectableAnswer\n                      incorrectAnswers\n                      audio\n                      answerOptions\n                    }\n                  }\n        \n                }\n              }\n            ",variables:{courseId:e}}},$f=xa.a.mark(Jf),Yf=xa.a.mark(Kf);function Jf(e){var t,n,a,r,o,s,i;return xa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.courseId,a=t.token,r=Vf(n),c.prev=2,c.next=5,Object(pp.b)(fp,r,a);case 5:if(o=c.sent,console.log("Getting question bank response: ",o),!o.data.errors){c.next=9;break}throw new Error("Loading the question bank failed");case 9:return s=o.data.data.questions,c.next=12,Object(pp.e)(J(s));case 12:c.next=24;break;case 14:return c.prev=14,c.t0=c.catch(2),console.log("err",c.t0),i=na.t("alerts.question.fetchQuestionBankFail"),c.next=20,Object(pp.e)({type:"FETCH_QUESTION_BANK_FAIL",message:i});case 20:return c.next=22,Object(pp.c)(3e3);case 22:return c.next=24,Object(pp.e)(Le());case 24:case"end":return c.stop()}}),$f,null,[[2,14]])}function Kf(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("FETCH_QUESTION_BANK_START",Jf);case 2:case"end":return e.stop()}}),Yf)}var Zf=[Object(pp.d)(Kf)],Xf=function(e,t,n,a,r,o,s,i){return{query:"\n                  mutation ".concat(t?"UpdateQuestion":"CreateQuestion","(\n                   $course:ID!\n                   $type:String\n                   $language:String\n                   $tags:[String]\n                   $difficulty:String\n                   $id:ID!\n                   $fillBlankContent:String\n                   $mcQuestion:String\n                   $mcSolution:String\n                   $mcAnswerOptions:[String]\n                   $mcCorrectAnswers:[String]\n                   $essayQuestion:String\n                   $essaySolution:String\n                   $speakingQuestion:String\n                   $speakingQuestionAudio:String\n                   $speakingQuestionAudioExplanation:String\n                  ){\n                    ").concat(t?"updateQuestion":"createQuestion","(\n                     questionInput: {\n                       course: $course\n                       type:$type\n                       language:$language\n                       tags:$tags\n                       difficulty:$difficulty\n                       id:$id\n                      }\n                      speakingQuestionInput: {\n                        question:$speakingQuestion\n                        questionAudio:$speakingQuestionAudio\n                        audio:$speakingQuestionAudioExplanation\n                      }\n\n                      multipleChoiceQuestionInput: {\n                        question:$mcQuestion\n                        solution:$mcSolution\n                        answerOptions:$mcAnswerOptions\n                        correctAnswers:$mcCorrectAnswers\n                      }\n\n                      essayQuestionInput: {\n                        question:$essayQuestion\n                        solution:$essaySolution\n                      }\n\n                      fillBlankQuestionInput: {\n                        blanks: [").concat(i,"],\n                        fillBlankContent: $fillBlankContent\n                      }\n                     ) {\n                         _id\n                    }\n                  }\n                "),variables:{id:e._id,course:n,type:a,language:e.language.charAt(0).toUpperCase()+e.language.slice(1).toLowerCase(),tags:e.tags,difficulty:e.difficulty,mcQuestion:((e.mcQuestion||{}).question||"").replace(/"/g,"'"),mcSolution:((e.mcQuestion||{}).solution||"").replace(/"/g,"'"),mcAnswerOptions:((e.mcQuestion||{}).answers||[]).map((function(e){return e.replace(/"/g,"'")})),mcCorrectAnswers:(e.mcQuestion||{}).correctAnswers,essayQuestion:((e.essayQuestion||{}).question||"").replace(/"/g,"'"),essaySolution:((e.essayQuestion||{}).solution||"").replace(/"/g,"'"),speakingQuestion:(r[0]||{}).audioQuestion?"":(o||"").replace(/"/g,"'"),speakingQuestionAudio:(r[0]||{}).audioQuestion?o:"",speakingQuestionAudioExplanation:(r[0]||{}).audioAnswer?s:"",fillBlankContent:((e.fillBlankQuestions||{}).question||"").replace(/"/g,"'")}}},eg=function(e,t,n){var a="";return((e.fillBlankQuestions||{}).answers||[]).map((function(e,r){var o=Object.values(t[r].answerOptions||{});a+="{ \n               incorrectAnswers: ".concat(JSON.stringify((t[r]||{}).selectableAnswer?o:["","",""]),', \n               correctAnswer: "').concat(((t[r]||{}).answer||"").replace(/"/g,"'"),'", \n               selectableAnswer: ').concat((t[r]||{}).selectableAnswer||!1,", \n               audio: ").concat(JSON.stringify(n[r])||"",",\n               }")})),a},tg=xa.a.mark(ag),ng=xa.a.mark(rg);function ag(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E,v,y,T,S,k,w;return xa.a.wrap((function(O){for(;;)switch(O.prev=O.next){case 0:return t=e.payload,n=t.formData,a=void 0===n?{}:n,r=t.questionType,o=t.token,s=t.editing,i=t.courseId,c=t.filesToDelete,l="courses/".concat(i,"/questions/").concat(a._id),u=(a.fillBlankQuestions||{}).answers||[],"fillInBlank"===r&&(d=u.map((function(e,t){var n=e;return n=e.audioFile instanceof File?Ir(e.audioFile,l):ao(e.audioFile),e.audio||(n=null),n}))),m="",p="",b=a.speakingQuestion||[],"speaking"===r&&(f=b.map((function(e){return e.audioQuestion?e.audioFileQuestion:e.question}))[0],m=f instanceof File?Ir(f,l):b[0].audioQuestion?ao(f):f,g=b.map((function(e){return e.audioAnswer?e.audioFile:""}))[0],p=g instanceof File?Ir(g,l):ao(g)),O.prev=8,h=Xf(a,s,i,r,b,m,p,eg(a,u,d)),O.next=12,Object(pp.b)(fp,h,o);case 12:if(E=O.sent,console.log("Create or update question response: ",E),!E.data.errors){O.next=16;break}throw new Error("Creating or updating the question failed");case 16:O.next=29;break;case 18:return O.prev=18,O.t0=O.catch(8),console.log("Error creating question: ",O.t0),v=s?na.t("alerts.question.updateQuestionFail"):na.t("alerts.question.createQuestionFail"),O.next=24,Object(pp.e)(K(v));case 24:return O.next=26,Object(pp.c)(3e3);case 26:return O.next=28,Object(pp.e)(Le());case 28:return O.abrupt("return");case 29:if("fillInBlank"!==r){O.next=54;break}y=u.map((function(e){return e.audio?e.audioFile:null})),O.prev=31,O.t1=xa.a.keys(y);case 33:if((O.t2=O.t1()).done){O.next=41;break}if(T=O.t2.value,!y.hasOwnProperty(T)){O.next=39;break}if(!(y[T]instanceof File)){O.next=39;break}return O.next=39,Object(pp.b)(jr,y[T],d[T],o);case 39:O.next=33;break;case 41:O.next=54;break;case 43:return O.prev=43,O.t3=O.catch(31),console.log("Error fill in the blanks section audio files: ",O.t3),S=na.t("alerts.question.uploadingFillblanksAudioFail"),O.next=49,Object(pp.e)(K(S));case 49:return O.next=51,Object(pp.c)(3e3);case 51:return O.next=53,Object(pp.e)(Le());case 53:return O.abrupt("return");case 54:if("speaking"!==r){O.next=89;break}if(O.prev=55,!(f instanceof File)){O.next=59;break}return O.next=59,Object(pp.b)(jr,f,m,o);case 59:O.next=72;break;case 61:return O.prev=61,O.t4=O.catch(55),console.log("Error uploading speaking question audio file: ",O.t4),k=na.t("alerts.question.uploadingSpeakingQuestionAudioFail"),O.next=67,Object(pp.e)(K(k));case 67:return O.next=69,Object(pp.c)(3e3);case 69:return O.next=71,Object(pp.e)(Le());case 71:return O.abrupt("return");case 72:if(O.prev=72,!(g instanceof File)){O.next=76;break}return O.next=76,Object(pp.b)(jr,g,p,o);case 76:O.next=89;break;case 78:return O.prev=78,O.t5=O.catch(72),console.log("Error uploading speaking answer audio file: ",O.t5),w=na.t("alerts.question.uploadingSpeakingAnswerAudioFail"),O.next=84,Object(pp.e)(K(w));case 84:return O.next=86,Object(pp.c)(3e3);case 86:return O.next=88,Object(pp.e)(Le());case 88:return O.abrupt("return");case 89:return O.next=91,Object(pp.e)(Y(i,o));case 91:return O.next=93,Object(pp.e)({type:"CLOSE_MODAL"});case 93:return O.next=95,Object(pp.e)({type:"CREATE_UPDATE_QUESTION_SUCCESS",message:void 0});case 95:return O.next=97,Object(pp.c)(3e3);case 97:return O.next=99,Object(pp.e)(Le());case 99:if(!(c.length>0)){O.next=102;break}return O.next=102,Object(pp.e)(ke(c,o));case 102:case"end":return O.stop()}}),tg,null,[[8,18],[31,43],[55,61],[72,78]])}function rg(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("CREATE_UPDATE_QUESTION_START",ag);case 2:case"end":return e.stop()}}),ng)}var og=[Object(pp.d)(rg)],sg=function(e){return{query:'\n            mutation {\n              deleteQuestion(id: "'.concat(e,'")\n            }\n          ')}},ig=xa.a.mark(lg),cg=xa.a.mark(ug);function lg(e){var t,n,a,r,o,s,i,c;return xa.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.questionId,a=t.token,r=t.courseId,o=sg(n),l.prev=3,l.next=6,Object(pp.b)(fp,o,a);case 6:if(s=l.sent,console.log("delete question response: ",s),!s.data.errors){l.next=10;break}throw new Error("Deleting the question failed");case 10:return l.next=12,Object(pp.e)(Y(r,a));case 12:return i=na.t("alerts.question.deleteQuestionSuccess"),l.next=15,Object(pp.e)({type:"DELETE_QUESTION_SUCCESS",message:i});case 15:return l.next=17,Object(pp.e)({type:"CLOSE_MODAL"});case 17:return l.next=19,Object(pp.c)(3e3);case 19:return l.next=21,Object(pp.e)(Le());case 21:l.next=33;break;case 23:return l.prev=23,l.t0=l.catch(3),console.log("err",l.t0),c=na.t("alerts.question.deleteQuestionFail"),l.next=29,Object(pp.e)(Z(c));case 29:return l.next=31,Object(pp.c)(3e3);case 31:return l.next=33,Object(pp.e)(Le());case 33:case"end":return l.stop()}}),ig,null,[[3,23]])}function ug(){var e;return xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(pp.f)("DELETE_QUESTION_START");case 3:return e=t.sent,t.next=6,Object(pp.b)(lg,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}}),cg)}var dg=[Object(pp.d)(ug)],mg=function(e,t,n,a,r,o){return{query:"\n          mutation ".concat(o?"UpdateLesson":"CreateNewLesson","(\n            $lessonId: ID!,\n            $lessonName: String!,\n            $createdAt:String, \n            $slideContent:[String],\n            $slideAudio:[String],\n            $slideVideo:[String],\n            $course: ID!, \n            $published: Boolean!, \n            $availableOnDate: String) {\n            ").concat(o?"updateLesson":"createLesson","(lessonInput: {\n            _id: $lessonId,\n            lessonName: $lessonName,\n            createdAt: $createdAt,\n            slideContent:$slideContent,\n            slideAudio:$slideAudio, \n            slideVideo:$slideVideo,  \n            course: $course, \n            published: $published, \n            availableOnDate: $availableOnDate}) {\n              _id\n              lessonName\n              published\n              availableOnDate\n              course\n            }\n          }\n        "),variables:{lessonId:e._id,lessonName:e.lessonName,createdAt:e.createdAt,published:e.published,availableOnDate:e.availableOnDate,slideContent:t,slideAudio:n,slideVideo:a,course:r}}},pg=function(e){return{query:"query FetchSingleLesson($lessonId: ID!) {\n          lesson(id: $lessonId) {\n            _id\n            lessonName\n            createdAt\n            published\n            availableOnDate\n            lessonSlides {\n              _id\n              slideContent\n              audio\n              video\n            }\n          }\n        }\n      ",variables:{lessonId:e}}},fg=function(e){return{query:'\n        mutation {\n          deleteLesson(id: "'.concat(e,'")\n        }\n      ')}},gg=function(e){return{_id:e._id,lessonName:e.lessonName,createdAt:e.createdAt?new Date(parseInt(e.createdAt)):null,published:e.published,availableOnDate:e.availableOnDate?new Date(parseInt(e.availableOnDate)):null,slides:e.lessonSlides.map((function(e){return{_id:e._id,slideContent:e.slideContent,videoFile:e.video,audioFile:e.audio,recordedBlob:e.audio,loadedVideo:e.video,videoContent:!!e.video}}))}},bg=xa.a.mark(Sg),hg=xa.a.mark(kg),Eg=xa.a.mark(wg),vg=xa.a.mark(Og),yg=xa.a.mark(Cg),Tg=xa.a.mark(xg);function Sg(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E,v,y,T;return xa.a.wrap((function(S){for(;;)switch(S.prev=S.next){case 0:return t=e.payload,n=t.formValues,a=t.token,r=t.editing,o=t.course,s=t.filesToDelete,i="courses/".concat(o,"/lessons/").concat(n._id),c=n.slides.map((function(e){return e.videoContent?"":e.slideContent})),l=(n.slides||[]).map((function(e){return e.audioFile})),u=(n.slides||[]).map((function(e){return e.videoFile})),d=l.map((function(e,t){var a;return a=e instanceof File?Ir(e,i):ao(e),((n.slides||[])[t]||{}).videoContent&&(a=""),a})),m=u.map((function(e,t){var a;return a=e instanceof File?Ir(e,i):ao(e),((n.slides||[])[t]||{}).videoContent||(a=""),a})),S.prev=7,p=mg(n,c,d,m,o,r),S.next=11,Object(pp.b)(fp,p,a);case 11:if(f=S.sent,console.log("Create lesson response: ",f),!f.data.errors){S.next=15;break}throw new Error("Creating or updating the lesson failed");case 15:if(!(s.length>0)){S.next=18;break}return S.next=18,Object(pp.e)(ke(s,a));case 18:return S.next=20,Object(pp.e)(je(["Lessons","New lesson"]));case 20:return S.next=22,Object(pp.e)(Re(0));case 22:if(!r){S.next=25;break}return S.next=25,Object(pp.e)({type:"CANCEL_EDITING"});case 25:return S.next=27,Object(pp.e)({type:"CREATE_LESSON_SUCCESS",message:void 0});case 27:return S.next=29,Object(pp.c)(3e3);case 29:return S.next=31,Object(pp.e)(Le());case 31:S.next=44;break;case 33:return S.prev=33,S.t0=S.catch(7),console.log("Error creating lesson: ",S.t0),g=r?na.t("alerts.lesson.lessonUpdatedFail"):na.t("alerts.lesson.lessonCreatedFail"),S.next=39,Object(pp.e)(G(g));case 39:return S.next=41,Object(pp.c)(3e3);case 41:return S.next=43,Object(pp.e)(Le());case 43:return S.abrupt("return");case 44:S.prev=44,S.t1=xa.a.keys(l);case 46:if((S.t2=S.t1()).done){S.next=55;break}if(b=S.t2.value,!l.hasOwnProperty(b)){S.next=53;break}if(h=!((n.slides||[])[b]||{}).videoContent,!(l[b]instanceof File&&h)){S.next=53;break}return S.next=53,Object(pp.b)(jr,l[b],d[b],a);case 53:S.next=46;break;case 55:S.next=68;break;case 57:return S.prev=57,S.t3=S.catch(44),E=na.t("alerts.lesson.uploadingAudioFail"),S.next=62,Object(pp.e)(G(E));case 62:return S.next=64,Object(pp.c)(3e3);case 64:return S.next=66,Object(pp.e)(Le());case 66:return console.log("Error uploading audio: ",S.t3),S.abrupt("return");case 68:S.prev=68,S.t4=xa.a.keys(u);case 70:if((S.t5=S.t4()).done){S.next=79;break}if(v=S.t5.value,!u.hasOwnProperty(v)){S.next=77;break}if(y=((n.slides||[])[v]||{}).videoContent,!(u[v]instanceof File&&y)){S.next=77;break}return S.next=77,Object(pp.b)(jr,u[v],m[v],a);case 77:S.next=70;break;case 79:S.next=92;break;case 81:return S.prev=81,S.t6=S.catch(68),console.log("Error uploading video: ",S.t6),T=na.t("alerts.lesson.uploadingVideoFail"),S.next=87,Object(pp.e)(G(T));case 87:return S.next=89,Object(pp.c)(3e3);case 89:return S.next=91,Object(pp.e)(Le());case 91:return S.abrupt("return");case 92:return S.next=94,Object(pp.e)(Me(a));case 94:case"end":return S.stop()}}),bg,null,[[7,33],[44,57],[68,81]])}function kg(e){var t,n,a,r,o,s,i,c;return xa.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.lessonId,a=t.token,r=pg(n),l.prev=2,l.next=5,Object(pp.b)(fp,r,a);case 5:if(o=l.sent,console.log("Fetching lesson response",o),!o.data.errors){l.next=9;break}throw new Error("Fetching the lesson failed!");case 9:return s=o.data.data.lesson,i=gg(s),l.next=13,Object(pp.e)(z(i,n));case 13:return l.next=15,Object(pp.e)({type:"SET_EDITING"});case 15:return l.next=17,Object(pp.e)(je(["Lessons","Edit lesson"]));case 17:l.next=29;break;case 19:return l.prev=19,l.t0=l.catch(2),console.log("Failed to load the lesson",l.t0),c=na.t("alerts.lesson.lessonRetrieveFail"),l.next=25,Object(pp.e)({type:"FETCH_LESSON_FAIL",message:c});case 25:return l.next=27,Object(pp.c)(3e3);case 27:return l.next=29,Object(pp.e)(Le());case 29:case"end":return l.stop()}}),hg,null,[[2,19]])}function wg(e){var t,n,a,r,o,s,i;return xa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.lessonId,a=t.token,r=fg(n),c.prev=3,c.next=6,Object(pp.b)(fp,r,a);case 6:if(o=c.sent,console.log("Deleting lesson response: ",o),!o.data.errors){c.next=10;break}throw new Error("Deleting the lesson failed");case 10:return c.next=12,Object(pp.e)(Me(a));case 12:return c.next=14,Object(pp.e)({type:"CLOSE_MODAL"});case 14:return c.next=16,Object(pp.e)(Re(0));case 16:return s=na.t("alerts.lesson.lessonDeleteSuccess"),c.next=19,Object(pp.e)({type:"DELETE_LESSON_SUCCESS",message:s});case 19:return c.next=21,Object(pp.c)(3e3);case 21:return c.next=23,Object(pp.e)(Le());case 23:c.next=35;break;case 25:return c.prev=25,c.t0=c.catch(3),console.log("Failed to delete the lesson",c.t0),i=na.t("alerts.lesson.lessonDeleteFail"),c.next=31,Object(pp.e)(V(i));case 31:return c.next=33,Object(pp.c)(3e3);case 33:return c.next=35,Object(pp.e)(Le());case 35:case"end":return c.stop()}}),Eg,null,[[3,25]])}function Og(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("FETCH_LESSON_START",kg);case 2:case"end":return e.stop()}}),vg)}function Cg(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("CREATE_LESSON_START",Sg);case 2:case"end":return e.stop()}}),yg)}function xg(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("DELETE_LESSON_START",wg);case 2:case"end":return e.stop()}}),Tg)}var Ag=[Object(pp.d)(Cg),Object(pp.d)(Og),Object(pp.d)(xg)],Fg=function(e){return{query:"query FetchSingleCourse($courseId: ID!) {\n          course(id: $courseId) {\n            _id\n            courseName\n            createdAt\n            courseActive\n            studentCapacity\n            language\n            courseImage\n            enrollmentStartDate\n            enrollmentEndDate\n            courseStartDate\n            courseEndDate\n            courseDropDeadline\n            prerequisites {\n              _id\n              courseName\n            }\n            regularOfficeHours {\n              day\n              startTime\n              endTime\n              timezoneRegion\n            }\n            irregularOfficeHours {\n             date\n             startTime\n             endTime\n             timezoneRegion\n            }\n            syllabus\n          }\n        }\n      ",variables:{courseId:e}}},Dg=function(e){var t=e.formData,n=e.courseId,a=e.regularOfficeHours,r=e.irregularOfficeHours,o=e.editing,s=e.file,i=e.key;return{query:"\n            mutation ".concat(o?"UpdateCourse, ":"CreateNewCourse","(\n              $courseId: ID!,\n              $courseName: String!,\n              $createdAt: String,\n              $courseActive: Boolean!,\n              $studentCapacity: Int, \n              $language: String, \n              $enrollmentStartDate: String, \n              $enrollmentEndDate: String, \n              $courseStartDate: String,\n              $courseEndDate: String, \n              $courseDropDeadline: String, \n              $syllabus: String, \n              $courseImage: String, \n              $prerequisites:[ID] ) {\n                ").concat(o?"updateCourse, ":"createCourse","(\n                courseInput: {\n                  courseId: $courseId,\n                  courseName: $courseName,\n                  courseActive: $courseActive,\n                  createdAt: $createdAt,\n                  studentCapacity: $studentCapacity,\n                  language: $language,\n                  courseStartDate: $courseStartDate,\n                  courseEndDate: $courseEndDate,\n                  enrollmentStartDate: $enrollmentStartDate,\n                  enrollmentEndDate: $enrollmentEndDate,\n                  courseDropDeadline: $courseDropDeadline,\n                  syllabus: $syllabus,\n                  courseImage: $courseImage, \n                  prerequisites: $prerequisites,\n                  regularOfficeHours: [").concat(a,"],\n                  irregularOfficeHours: [").concat(r,"],\n                }) {\n                _id\n                courseName\n              }\n            }\n          "),variables:{courseId:n,courseName:t.courseName,createdAt:t.createdAt,courseActive:t.courseActive,studentCapacity:parseInt(t.studentCapacity),language:t.language,enrollmentStartDate:(t.enrollmentPeriod||[])[0],enrollmentEndDate:(t.enrollmentPeriod||[])[1],courseStartDate:(t.courseTimeline||[])[0],courseEndDate:(t.courseTimeline||[])[1],courseDropDeadline:t.courseDropDeadline,syllabus:t.syllabus,prerequisites:t.prerequisites,courseImage:s instanceof File?i:s}}},_g=function(e,t){return{query:"\n        mutation UpdateCourseResources(\n          $courseId: ID!, \n          ) {       \n          updateCourseResources(\n            courseId:$courseId,\n            resources: [".concat(t,"]\n            ) {\n              _id\n            }\n        }\n      "),variables:{courseId:e}}},Ig=function(e){return{query:"\n        mutation ChangeCourseState(\n          $courseId: ID!, \n          ) {       \n          changeCourseState(\n            courseId:$courseId,\n            ) {\n              _id\n            }\n        }\n      ",variables:{courseId:e}}},jg=function(e,t,n,a,r){return{query:"\n        mutation GradeCourse(\n          $courseId: ID!,\n          $studentId: ID!,\n          $grade: Float!, \n          $gradeAdjustmentExplanation: String, \n          $gradeOverride: Boolean!,\n          $passed:Boolean!,\n          ) {       \n          gradeCourse(gradeCourseInput:{\n            courseId:$courseId,\n            studentId:$studentId,\n            grade:$grade,\n            gradeAdjustmentExplanation:$gradeAdjustmentExplanation,\n            gradeOverride:$gradeOverride,\n            passed:$passed,\n          }\n        )\n       }\n      ",variables:{courseId:e,studentId:t,grade:n.gradeOverride?parseFloat(parseFloat(n.gradeAdjusted).toFixed(2)):a,gradeOverride:n.gradeOverride,gradeAdjustmentExplanation:n.gradeOverride?n.gradeAdjustmentExplanation:null,passed:r}}},Rg=function(e){return{query:'\n        mutation {\n          deleteCourse(id: "'.concat(e,'")\n        }\n      ')}},Ng=function(e){var t,n=(e.regularOfficeHours||[]).map((function(e){return{day:e.day,timeRange:[e.startTime,e.endTime]}})),a=(e.irregularOfficeHours||[]).map((function(e){return{date:new Date(parseInt(e.date)),timeRange:[e.startTime,e.endTime]}})),r={days:e.regularOfficeHours.map((function(e){return e.day})),times:(t="day",n.reduce((function(e,n){return Object(At.a)(Object(At.a)({},e),{},Object(po.a)({},n[t],n))}),{}))},o=e.prerequisites.map((function(e){return e._id})),s={enrollmentPeriod:[e.enrollmentStartDate?new Date(parseInt(e.enrollmentStartDate)):null,e.enrollmentEndDate?new Date(parseInt(e.enrollmentEndDate)):null],courseTimeline:[e.courseStartDate?new Date(parseInt(e.courseStartDate)):null,e.courseEndDate?new Date(parseInt(e.courseEndDate)):null],courseDropDeadline:e.courseDropDeadline?new Date(parseInt(e.courseDropDeadline)):null},i=((e.courseImage||"").match(new RegExp("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/(.*)\\?X-Amz"))||[])[1];return Object(At.a)(Object(At.a)({_id:e._id,courseName:e.courseName,studentCapacity:e.studentCapacity,studentsEnrolled:e.studentsEnrolled,language:e.language,syllabus:e.syllabus,courseActive:e.courseActive,courseImage:i,editing:!0,createdAt:e.createdAt?new Date(parseInt(e.createdAt)):null,prerequisites:o},s),{},{regularOfficeHours:r,irregularOfficeHours:a,loadedCourseImage:e.courseImage})},Lg=function(e){var t=Object.keys((e.regularOfficeHours||{}).times||[]),n=Object.values((e.regularOfficeHours||{}).times||[]),a=(e.regularOfficeHours||{}).days,r="";(t||[]).forEach((function(e,t){if(!a.includes(e))return null;r+='{\n            day:"'.concat(e,'",\n            startTime:"').concat((((n||[])[t]||{}).timeRange||[])[0],'",\n            endTime:"').concat((((n||[])[t]||{}).timeRange||[])[1],'",\n            timezoneRegion:"').concat(localStorage.getItem("timezone"),'",\n          }')}));var o=Object.keys(e.irregularOfficeHours||[]),s=Object.values(e.irregularOfficeHours||[]),i="";return(o||[]).forEach((function(e,t){if(!e)return null;i+='{\n            date:"'.concat(((s||[])[t]||{}).date,'",\n            startTime:"').concat((((s||[])[t]||{}).timeRange||[])[0],'",\n            endTime:"').concat((((s||[])[t]||{}).timeRange||[])[1],'",\n            timezoneRegion:"').concat(localStorage.getItem("timezone"),'",\n          }')})),{regularOfficeHours:r,irregularOfficeHours:i}},Pg=function(e,t){go()("https://mernstackelearn.herokuapp.com/",{query:{token:t}}).emit("notifyOfDocUpdate",{notificationType:e.notification,userType:e.userType,userId:e.userId,testId:e.testId,courseId:e.course,action:e.action,message:e.message})},Bg=xa.a.mark(Jg),Mg=xa.a.mark(Kg),qg=xa.a.mark(Zg),Ug=xa.a.mark(Xg),Qg=xa.a.mark(eb),Wg=xa.a.mark(tb),Hg=xa.a.mark(nb),zg=xa.a.mark(ab),Gg=xa.a.mark(rb),Vg=xa.a.mark(ob),$g=xa.a.mark(sb),Yg=xa.a.mark(ib);function Jg(e){var t,n,a,r,o,s,i,c,l;return xa.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.courseId,a=t.token,r=t.changeStatus,o=Fg(n),u.prev=2,u.next=5,Object(pp.b)(fp,o,a);case 5:if(s=u.sent,console.log("Getting course response",s),!s.data.errors){u.next=9;break}throw new Error("Loading the course failed!");case 9:if(i=s.data.data.course,c=Ng(i),r){u.next=14;break}return u.next=14,Object(pp.e)(N(c,n));case 14:return r&&Object(pp.e)(M(c,a,!0,n,!0)),u.next=17,Object(pp.e)({type:"SET_EDITING"});case 17:return u.next=19,Object(pp.e)(je(["Courses","Edit course"]));case 19:u.next=31;break;case 21:return u.prev=21,u.t0=u.catch(2),console.log("Failed to retrieve the course",u.t0),l=na.t("alerts.course.fetchCourseFail"),u.next=27,Object(pp.e)({type:"FETCH_COURSE_FAIL",message:l});case 27:return u.next=29,Object(pp.c)(3e3);case 29:return u.next=31,Object(pp.e)(Le());case 31:case"end":return u.stop()}}),Bg,null,[[2,21]])}function Kg(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E;return xa.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,n=t.formData,a=t.token,r=t.editing,o=t.courseId,s=t.filesToDelete,i=Lg(n),c=i.regularOfficeHours,l=i.irregularOfficeHours,u=n.courseImage,d="courses/".concat(o,"/thumbnail"),m=Ir(u,d),p=Dg(Object(At.a)(Object(At.a)({},t),{},{regularOfficeHours:c,irregularOfficeHours:l,file:u,key:m})),v.prev=7,v.next=10,Object(pp.b)(fp,p,a);case 10:if(f=v.sent,console.log("Creating or updating course response: ",f),!f.data.errors){v.next=14;break}throw new Error("Creating or updating the course failed");case 14:return v.next=16,Object(pp.e)(Re(0));case 16:return v.next=18,Object(pp.e)(je(["Courses","New course"]));case 18:return v.next=20,Object(pp.e)({type:"CANCEL_EDITING"});case 20:return v.next=22,Object(pp.e)(H(a));case 22:v.next=35;break;case 24:return v.prev=24,v.t0=v.catch(7),console.log("Failed to create or update the course",v.t0),g=na.t("alerts.course.createCourseFail"),v.next=30,Object(pp.e)(U(g));case 30:return v.next=32,Object(pp.c)(3e3);case 32:return v.next=34,Object(pp.e)(Le());case 34:return v.abrupt("return");case 35:if(b={userType:"all",notification:"updateCourses"},h=r?na.t("alerts.course.updateCourseSuccess"):na.t("alerts.course.createCourseSuccess"),!(n.courseImage instanceof File)){v.next=63;break}return v.prev=38,v.next=41,Object(pp.b)(jr,u,m,a);case 41:Pg(b,a),v.next=55;break;case 44:return v.prev=44,v.t1=v.catch(38),console.log("Error uploading course thumbnail: ",v.t1),E=na.t("alerts.course.uploadThumbnailFail"),v.next=50,Object(pp.e)(U(E));case 50:return v.next=52,Object(pp.c)(3e3);case 52:return v.next=54,Object(pp.e)(Le());case 54:return v.abrupt("return");case 55:return v.next=57,Object(pp.e)(q(h));case 57:return v.next=59,Object(pp.c)(3e3);case 59:return v.next=61,Object(pp.e)(Le());case 61:v.next=70;break;case 63:return Pg(b,a),v.next=66,Object(pp.e)(q(h));case 66:return v.next=68,Object(pp.c)(3e3);case 68:return v.next=70,Object(pp.e)(Le());case 70:if(!((s||[]).length>0)){v.next=73;break}return v.next=73,Object(pp.e)(ke(s,a));case 73:case"end":return v.stop()}}),Mg,null,[[7,24],[38,44]])}function Zg(e){var t,n,a,r,o,s,i,c,l,u,d,m,p;return xa.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,n=t.courseId,a=t.resources,r=t.filesToDelete,o=t.token,s="courses/".concat(n,"/resources"),i=(a||[]).map((function(e){var t;return t=e.resource instanceof File?Ir(e.resource,s):ao(e.resource),Object(At.a)(Object(At.a)({},e),{},{key:t})})),c="",a.forEach((function(e,t){c+='{ \n                        resource: "'.concat(i[t].key||"",'", \n                        resourceName: "').concat(i[t].resourceName,'",\n                        }')})),l=_g(n,c),f.prev=7,f.next=10,Object(pp.b)(fp,l,o);case 10:if(u=f.sent,console.log("Updating course resources response: ",u),!u.data.errors){f.next=14;break}throw new Error("Updating the course resources failed");case 14:return f.next=16,Object(pp.e)(Me(o));case 16:f.next=28;break;case 18:return f.prev=18,f.t0=f.catch(7),console.log("Failed to update course resources",f.t0),d=na.t("alerts.course.updatingResourcesFail"),f.next=24,Object(pp.e)(P(d));case 24:return f.next=26,Object(pp.c)(3e3);case 26:return f.next=28,Object(pp.e)(Le());case 28:f.prev=28,f.t1=xa.a.keys(i);case 30:if((f.t2=f.t1()).done){f.next=39;break}if(m=f.t2.value,!i.hasOwnProperty(m)){f.next=37;break}if(!(i[m].resource instanceof File)){f.next=37;break}return f.next=36,Object(pp.b)(jr,i[m].resource,i[m].key,o);case 36:return f.abrupt("continue",30);case 37:f.next=30;break;case 39:f.next=52;break;case 41:return f.prev=41,f.t3=f.catch(28),console.log("Error uploading course resources: ",f.t3),p=na.t("alerts.course.uploadingResourcesFail"),f.next=47,Object(pp.e)(P(p));case 47:return f.next=49,Object(pp.c)(3e3);case 49:return f.next=51,Object(pp.e)(Le());case 51:return f.abrupt("return");case 52:return f.next=54,Object(pp.e)(Me(o));case 54:return Pg({userType:"all",notification:"updateCourses"},o),na.t("alerts.course.updatingResourcesSuccess"),f.next=59,Object(pp.e)({type:"UPDATE_COURSE_RESOURCES_SUCCESS"});case 59:return f.next=61,Object(pp.c)(3e3);case 61:return f.next=63,Object(pp.e)(Le());case 63:if(!((r||[]).length>0)){f.next=66;break}return f.next=66,Object(pp.e)(ke(r,o));case 66:case"end":return f.stop()}}),qg,null,[[7,18],[28,41]])}function Xg(e){var t,n,a,r,o,s;return xa.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.courseId,a=t.token,r=Ig(n),i.prev=3,i.next=6,Object(pp.b)(fp,r,a);case 6:if(o=i.sent,console.log("Changing course state response: ",o),!o.data.errors){i.next=10;break}throw new Error("Changing the course state failed");case 10:return i.next=12,Object(pp.e)({type:"TOGGLE_COURSE_STATE_SUCCESS"});case 12:return i.next=14,Object(pp.e)(Me(a));case 14:return i.next=16,Object(pp.e)({type:"CLOSE_MODAL"});case 16:i.next=28;break;case 18:return i.prev=18,i.t0=i.catch(3),console.log("Failed to change the course state",i.t0),s=na.t("alerts.course.changeStateFail"),i.next=24,Object(pp.e)({type:"TOGGLE_COURSE_STATE_FAIL",message:s});case 24:return i.next=26,Object(pp.c)(3e3);case 26:return i.next=28,Object(pp.e)(Le());case 28:case"end":return i.stop()}}),Ug,null,[[3,18]])}function eb(e){var t,n,a,r,o,s;return xa.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.courseId,a=t.token,r=Rg(n),i.prev=3,i.next=6,Object(pp.b)(fp,r,a);case 6:if(o=i.sent,console.log("Deleting course response: ",o),!o.data.errors){i.next=10;break}throw new Error("Deleting the course failed");case 10:return i.next=12,Object(pp.e)({type:"DELETE_COURSE_SUCCESS",message:void 0});case 12:return i.next=14,Object(pp.e)(Me(a));case 14:return i.next=16,Object(pp.e)(H(a));case 16:return i.next=18,Object(pp.e)({type:"CLOSE_MODAL"});case 18:i.next=30;break;case 20:return i.prev=20,i.t0=i.catch(3),console.log("Failed to delete the course",i.t0),s=na.t("alerts.course.deleteCourseFail"),i.next=26,Object(pp.e)(Q(s));case 26:return i.next=28,Object(pp.c)(3e3);case 28:return i.next=30,Object(pp.e)(Le());case 30:case"end":return i.stop()}}),Qg,null,[[3,20]])}function tb(e){var t,n,a,r,o,s,i,c,l,u;return xa.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,console.log("payload: ",t),n=t.courseId,a=t.studentId,r=t.formValues,o=t.suggestedGrade,s=t.passed,i=t.token,c=jg(n,a,r,o,s),d.prev=4,d.next=7,Object(pp.b)(fp,c,i);case 7:if(l=d.sent,console.log("Grading course response: ",l),!l.data.errors){d.next=11;break}throw new Error("Grading the course failed");case 11:return d.next=13,Object(pp.e)({type:"GRADE_COURSE_SUCCESS",message:void 0});case 13:return d.next=15,Object(pp.e)(Me(i));case 15:return d.next=17,Object(pp.e)({type:"CLOSE_MODAL"});case 17:d.next=29;break;case 19:return d.prev=19,d.t0=d.catch(4),console.log("Failed to grade the course",d.t0),u=na.t("alerts.course.gradeCourseFail"),d.next=25,Object(pp.e)(L(u));case 25:return d.next=27,Object(pp.c)(3e3);case 27:return d.next=29,Object(pp.e)(Le());case 29:case"end":return d.stop()}}),Wg,null,[[4,19]])}function nb(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("TOGGLE_COURSE_STATE_START",Xg);case 2:case"end":return e.stop()}}),Hg)}function ab(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("UPDATE_COURSE_RESOURCES_START",Zg);case 2:case"end":return e.stop()}}),zg)}function rb(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("FETCH_COURSE_START",Jg);case 2:case"end":return e.stop()}}),Gg)}function ob(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("CREATE_UPDATE_COURSE_START",Kg);case 2:case"end":return e.stop()}}),Vg)}function sb(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("DELETE_COURSE_START",eb);case 2:case"end":return e.stop()}}),$g)}function ib(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("GRADE_COURSE_START",tb);case 2:case"end":return e.stop()}}),Yg)}var cb=[Object(pp.d)(rb),Object(pp.d)(ob),Object(pp.d)(ab),Object(pp.d)(nb),Object(pp.d)(sb),Object(pp.d)(ib)],lb=function(e,t,n){return{query:"\n          mutation ".concat(n?"UpdateCategory":"CreateCategory","($courseId: ID!,) {\n            ").concat(n?"updateCategory":"createCategory","(categoryInput: [").concat(t,"], courseId: $courseId)\n          }\n        "),variables:{courseId:e}}},ub=function(e){var t="";return((e||{}).modules||[]).forEach((function(e){var n="",a="",r="",o="";((e||{}).folder||[]).forEach((function(e){"lesson"===e.documentType&&(a+='"'.concat(e.documentId,'",'))})),((e||{}).folder||[]).forEach((function(e){"test"===e.documentType&&(r+='"'.concat(e.documentId,'",'))})),((e||{}).folder||[]).forEach((function(e){"assignment"===e.documentType&&(o+='"'.concat(e.documentId,'",'))})),((e||{}).subjects||[]).forEach((function(e){var t="",a="",r="",o="";((e||{}).folder||[]).forEach((function(e){"lesson"===e.documentType&&(a+='"'.concat(e.documentId,'",'))})),((e||{}).folder||[]).forEach((function(e){"test"===e.documentType&&(r+='"'.concat(e.documentId,'",'))})),((e||{}).folder||[]).forEach((function(e){"assignment"===e.documentType&&(o+='"'.concat(e.documentId,'",'))})),((e||{}).topics||[]).forEach((function(e){var n="",a="",r="";((e||{}).folder||[]).forEach((function(e){"lesson"===e.documentType&&(n+='"'.concat(e.documentId,'",'))})),((e||{}).folder||[]).forEach((function(e){"test"===e.documentType&&(a+='"'.concat(e.documentId,'",'))})),((e||{}).folder||[]).forEach((function(e){"assignment"===e.documentType&&(r+='"'.concat(e.documentId,'",'))})),t+='{ \n              topicName: "'.concat((e||{}).topicName||"",'",\n              _id:"').concat((e||{})._id,'",\n              lessons: [').concat(n,"],\n              tests: [").concat(a,"],\n              assignments: [").concat(r,"],\n              }")})),n+='{ \n            subjectName: "'.concat((e||{}).subjectName||"",'", \n            topics: [').concat(t,'],\n            _id: "').concat((e||{})._id,'", \n            lessons: [').concat(a,"],\n            tests: [").concat(r,"],\n            assignments: [").concat(o,"],\n            }")})),t+='{ \n          moduleName: "'.concat((e||{}).moduleName||"",'", \n          _id: "').concat((e||{})._id,'", \n          subjects: [').concat(n,"],\n          lessons: [").concat(a,"],\n          tests: [").concat(r,"],\n          assignments: [").concat(o,"],\n          }")})),t},db=xa.a.mark(pb),mb=xa.a.mark(fb);function pb(e){var t,n,a,r,o,s,i,c,l;return xa.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.formValues,a=t.token,r=t.editing,o=t.courseId,s=ub(n),i=lb(o,s,r),u.prev=3,u.next=6,Object(pp.b)(fp,i,a);case 6:if(c=u.sent,console.log("Creating or updating modules response: ",c),!c.data.errors){u.next=10;break}throw new Error("Creating or updating the modules failed");case 10:return u.next=12,Object(pp.e)({type:"MODULES_CHANGE_SUCCESS"});case 12:return u.next=14,Object(pp.e)(_e(o,a));case 14:u.next=26;break;case 16:return u.prev=16,u.t0=u.catch(3),console.log("err",u.t0),l=na.t("alerts.modules.updateModulesFailed"),u.next=22,Object(pp.e)({type:"MODULES_CHANGE_FAILED",message:l});case 22:return u.next=24,Object(pp.c)(3e3);case 24:return u.next=26,Object(pp.e)(Le());case 26:case"end":return u.stop()}}),db,null,[[3,16]])}function fb(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("MODULES_CHANGE_START",pb);case 2:case"end":return e.stop()}}),mb)}var gb=[Object(pp.d)(fb)],bb=function(e,t,n,a,r,o,s,i,c,l,u,d){var m=[parseFloat(e.mcSectionWeight)||null,parseFloat(e.essaySectionWeight)||null,parseFloat(e.speakingSectionWeight)||null,parseFloat(e.fillBlankSectionWeight)||null];return{query:"\n                  mutation ".concat(u?"UpdateTest":"CreateNewTest","(\n                   $testName: String!,\n                   $course:ID!,\n                   $published:Boolean!,\n                   $instructor:ID!,\n                   $testType: String,\n                   $testWeight: Float!,\n                   $passingRequired: Boolean,\n                   $passingGrade: Float,\n                   $timer:Int,\n                   $availableOnDate:String,\n                   $dueDate:String,\n                   $gradeReleaseDate:String,\n                   $allowLateSubmission: Boolean,\n                   $latePenalty: Float,\n                   $lateDaysAllowed: Int,\n                   $fillBlankContent:String,\n                   $sectionWeights: [Float]!,\n                   $testSections: [String!]!,\n                   $testId: ID!,\n                   $assignment: Boolean!,\n                   $blockedNotes: Boolean!,\n                   $notes: String,\n                  ){\n                    ").concat(u?"updateTest":"createTest","(\n                     testInput: {\n                       testName: $testName,\n                       course: $course,\n                       published: $published,\n                       instructor: $instructor,\n                       testType: $testType,\n                       testWeight: $testWeight,\n                       passingRequired: $passingRequired,\n                       passingGrade: $passingGrade,\n                       timer: $timer,\n                       availableOnDate: $availableOnDate,\n                       dueDate: $dueDate,\n                       gradeReleaseDate: $gradeReleaseDate,\n                       allowLateSubmission: $allowLateSubmission,\n                       latePenalty: $latePenalty,\n                       lateDaysAllowed: $lateDaysAllowed,\n                       sectionWeights: $sectionWeights,\n                       testSections: $testSections,\n                       testId: $testId,\n                       assignment: $assignment,\n                       blockedNotes: $blockedNotes,\n                       notes: $notes,\n                       readingMaterials: [").concat(t,"]\n                       audioMaterials: [").concat(n,"]\n                      }\n                      multipleChoiceQuestionsInput: [").concat(a,"]\n                      essayQuestionsInput: [").concat(r,"]\n                      speakingQuestionsInput: [").concat(o,"]\n                      fillBlankQuestionsInput: {\n                        blanks: [").concat(s,"],\n                        fillBlankContent: $fillBlankContent\n                      }\n                     ) {\n                         _id\n                    }\n                  }\n                "),variables:{testId:i,course:c,published:e.published,instructor:l,testName:"test"===d?e.testName:e.assignmentName,testType:e.testType,passingGrade:parseFloat(e.passingGrade),passingRequired:"quiz"!==e.testType&&e.passingRequired,testWeight:"test"===d?parseFloat(e.testWeight):parseFloat(e.assignmentWeight),timer:e.timedTest?parseInt(e.testTime):null,availableOnDate:e.availableOnDate,dueDate:e.dueDate,gradeReleaseDate:e.gradeReleaseDate,allowLateSubmission:e.allowLateSubmission||!1,latePenalty:parseFloat(e.latePenalty),lateDaysAllowed:parseInt(e.lateDaysAllowed),sectionWeights:m,testSections:e.testSections,fillBlankContent:((e.fillBlankQuestions||{}).question||"").replace(/"/g,"'"),assignment:"test"!==d,blockedNotes:!!e.blockedNotes,notes:e.notes}}},hb=function(e,t,n,a,r,o,s,i,c,l,u,d){var m=["multipleChoice","essay","speaking","fillInTheBlanks","test"],p="";(e.mcQuestions||[]).forEach((function(e){e.answers.forEach((function(e){return(e||"").replace(/"/g,"'")})),(e.correctAnswers||[]).forEach((function(e){return(e||"").replace(/"/g,"'")})),p+='{ \n                            question: "'.concat((e.question||"").replace(/"/g,"'"),'",\n                            marks: ').concat(e.marks,",\n                            answerOptions: ").concat(JSON.stringify(e.answers),", \n                            correctAnswers: ").concat(JSON.stringify(e.correctAnswers),', \n                            solution: "').concat((e.solution||"").replace(/"/g,"'").replace(/(\r\n|\n|\r)/gm," "),'" \n                            }')}));var f="";(e.essayQuestions||[]).forEach((function(e){f+='{ \n                            question: "'.concat((e.question||"").replace(/"/g,"'"),'", \n                            solution: "').concat((e.solution||"").replace(/"/g,"'").replace(/(\r\n|\n|\r)/gm," "),'",\n                            marks: ').concat(e.marks,",\n                            }")}));var g="";(e.speakingQuestions||[]).forEach((function(e,r){g+='{\n                              question: "'.concat(t[r]?"":(e.question||"").replace(/"/g,"'"),'", \n                              marks: ').concat(e.marks,",\n                              audio: ").concat(JSON.stringify(a[r]||""),", \n                              questionAudio: ").concat(JSON.stringify(n[r]||""),"\n                            }")}));var b="";((e.fillBlankQuestions||{}).answers||[]).forEach((function(e,t){var n=Object.values((r[t]||{}).answerOptions||{});b+="{ \n                            incorrectAnswers: ".concat(JSON.stringify((r[t]||{}).selectableAnswer?n.map((function(e){return e.trim()})):["","",""]),', \n                            correctAnswer: "').concat((e.answer||"").replace(/"/g,"'").replace(/&nbsp;/g," ").trim(),'", \n                            selectableAnswer: ').concat((r[t]||{}).selectableAnswer,", \n                            audio: ").concat(JSON.stringify(o[t]||""),",\n                            marks: ").concat((r[t]||{}).marks,", \n                            }")}));var h="";(s||[]).forEach((function(e,t){h+='{ \n                        content: "'.concat((c[t]||"").replace(/"/g,"'")||"",'",\n                        fileUpload: ').concat((l[m[t]]||{}).fileUpload||!1,',\n                        section: "').concat(m[t],'",\n                        }')}));var E="";return i.forEach((function(e,t){E+='{ \n                        audio: "'.concat(u[t]||"",'", \n                        fileUpload: ').concat((d[m[t]]||{}).fileUpload||!1,',\n                        section: "').concat(m[t],'",\n                        }')})),{formattedMcQuestions:p,formattedEssayQuestions:f,formattedSpeakingQuestions:g,formattedFillBlankQuestions:b,formattedReadingMaterials:h,formattedAudioMaterials:E}},Eb=function(e){var t=function(t){return(t||[]).map((function(t,n){return(0!==n||e.mcSectionWeight)&&(1!==n||e.essaySectionWeight)&&(2!==n||e.speakingSectionWeight)&&(3!==n||e.fillBlankSectionWeight)?t:null}))},n=e.readingMaterial||{},a=n.multipleChoice||{},r=n.essay||{},o=n.speaking||{},s=n.fillInTheBlanks||{},i=n.test||{},c=t([a.fileUpload?a.file:a.content,r.fileUpload?r.file:r.content,o.fileUpload?o.file:o.content,s.fileUpload?s.file:s.content,i.fileUpload?i.file:i.content]),l=e.audioMaterial||{};return{pdfFilesReadingMaterial:c,audioFilesListeningMaterial:t([(l.multipleChoice||{}).audioFile,(l.essay||{}).audioFile,(l.speaking||{}).audioFile,(l.fillInTheBlanks||{}).audioFile,(l.test||{}).audioFile]),rm:n,am:l,rmMc:a,rmEs:r,rmSp:o,rmFill:s,rmT:i}},vb=xa.a.mark(Tb),yb=xa.a.mark(Sb);function Tb(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E,v,y,T,S,k,w,O,C,x,A,F,D,_,I,j,R,N,L,P,B,M,q,U,Q,W,H,z,G,V,$,Y,J,K,Z;return xa.a.wrap((function(X){for(;;)switch(X.prev=X.next){case 0:return t=e.payload,n=t.formData,a=void 0===n?{}:n,r=t.token,o=t.editing,s=t.courseId,i=t.instructorId,c=t.testId,l=t.formType,u=t.filesToDelete,d="courses/".concat(s,"/tests/").concat(c),m=Eb(a),p=m.pdfFilesReadingMaterial,f=m.audioFilesListeningMaterial,g=m.rm,b=m.am,h=m.rmMc,E=m.rmEs,v=m.rmSp,y=m.rmFill,T=m.rmT,S=p.map((function(e,t){var n=e;return(0===t&&h.fileUpload||1===t&&E.fileUpload||2===t&&v.fileUpload||3===t&&y.fileUpload||4===t&&T.fileUpload)&&(n=ao(e)),e instanceof File&&(n=Ir(e,d)),n})),k=f.map((function(e,t){return e instanceof File?Ir(e,d):ao(e)})),w=(a.fillBlankQuestions||{}).answers,O=w.map((function(e,t){var n=e;return n=e.audioFile instanceof File?Ir(e.audioFile,d):ao(e.audioFile),e.audio||(n=null),n})),C=(a.speakingQuestions||[]).map((function(e){return e.audioAnswer})),x=(a.speakingQuestions||[]).map((function(e){return e.audioFile})),A=x.map((function(e,t){var n;return n=e instanceof File?Ir(e,d):ao(e),C[t]||(n=null),n})),F=(a.speakingQuestions||[]).map((function(e){return e.audioQuestion})),D=(a.speakingQuestions||[]).map((function(e){return e.audioFileQuestion})),_=D.map((function(e,t){var n;return n=e instanceof File?Ir(e,d):ao(e),F[t]||(n=null),n})),I=hb(a,F,_,A,w,O,p,f,S,g,k,b),j=I.formattedAudioMaterials,R=I.formattedReadingMaterials,N=I.formattedMcQuestions,L=I.formattedEssayQuestions,P=I.formattedSpeakingQuestions,B=I.formattedFillBlankQuestions,X.prev=14,M=bb(a,R,j,N,L,P,B,c,s,i,o,l),X.next=18,Object(pp.b)(fp,M,r);case 18:if(q=X.sent,console.log("Create test response: ",q),!q.data.errors){X.next=22;break}throw new Error("Failed to ".concat(o?"update":"create"," the ").concat("test"===l?"test":"assignment"));case 22:if(!(u.length>0)){X.next=25;break}return X.next=25,Object(pp.e)(ke(u,r));case 25:return X.next=27,Object(pp.e)(Me(r));case 27:return X.next=29,Object(pp.e)(Re(0));case 29:return X.next=31,Object(pp.e)(je("test"===l?["Tests","New test","Question bank"]:["Assignments","New assignment","Question bank"]));case 31:return X.next=33,Object(pp.e)({type:"CANCEL_EDITING"});case 33:return X.next=35,Object(pp.e)({type:"CREATE_UPDATE_TEST_SUCCESS",message:void 0});case 35:return X.next=37,Object(pp.c)(3e3);case 37:return X.next=39,Object(pp.e)(Le());case 39:X.next=58;break;case 41:return X.prev=41,X.t0=X.catch(14),console.log("Error ".concat(o?"updating":"creating"," the ").concat("test"===l?"test":"assignment"),X.t0),X.next=46,Object(pp.e)(je("test"===l?["Tests","New test","Question bank"]:["Assignments","New assignment","Question bank"]));case 46:return X.next=48,Object(pp.e)(Re(0));case 48:return X.next=50,Object(pp.e)({type:"CANCEL_EDITING"});case 50:return U=o?na.t("alerts.test.updatingFail"):na.t("alerts.test.creatingFail"),X.next=53,Object(pp.e)(te(U));case 53:return X.next=55,Object(pp.c)(3e3);case 55:return X.next=57,Object(pp.e)(Le());case 57:return X.abrupt("return");case 58:X.prev=58,X.t1=xa.a.keys(p);case 60:if((X.t2=X.t1()).done){X.next=68;break}if(Q=X.t2.value,!p.hasOwnProperty(Q)){X.next=66;break}if(!(p[Q]instanceof File)){X.next=66;break}return X.next=66,Object(pp.b)(jr,p[Q],S[Q],r);case 66:X.next=60;break;case 68:X.next=81;break;case 70:return X.prev=70,X.t3=X.catch(58),console.log("error uploading pdf files: ",X.t3),W=na.t("alerts.test.uploadingTestResourcesFail"),X.next=76,Object(pp.e)(te(W));case 76:return X.next=78,Object(pp.c)(3e3);case 78:return X.next=80,Object(pp.e)(Le());case 80:return X.abrupt("return");case 81:X.prev=81,X.t4=xa.a.keys(f);case 83:if((X.t5=X.t4()).done){X.next=91;break}if(H=X.t5.value,!f.hasOwnProperty(H)){X.next=89;break}if(!(f[H]instanceof File)){X.next=89;break}return X.next=89,Object(pp.b)(jr,f[H],k[H],r);case 89:X.next=83;break;case 91:X.next=104;break;case 93:return X.prev=93,X.t6=X.catch(81),console.log("error audio material audio files: ",X.t6),z=na.t("alerts.test.uploadingAudioResourcesFail"),X.next=99,Object(pp.e)(te(z));case 99:return X.next=101,Object(pp.c)(3e3);case 101:return X.next=103,Object(pp.e)(Le());case 103:return X.abrupt("return");case 104:G=w.map((function(e){return e.audio?e.audioFile:null})),X.prev=105,X.t7=xa.a.keys(G);case 107:if((X.t8=X.t7()).done){X.next=115;break}if(V=X.t8.value,!G.hasOwnProperty(V)){X.next=113;break}if(!(G[V]instanceof File)){X.next=113;break}return X.next=113,Object(pp.b)(jr,G[V],O[V],r);case 113:X.next=107;break;case 115:X.next=128;break;case 117:return X.prev=117,X.t9=X.catch(105),console.log("Error fill in the blanks section audio files: ",X.t9),$=na.t("alerts.test.uploadingFillblanksAudioFail"),X.next=123,Object(pp.e)(te($));case 123:return X.next=125,Object(pp.c)(3e3);case 125:return X.next=127,Object(pp.e)(Le());case 127:return X.abrupt("return");case 128:X.prev=128,X.t10=xa.a.keys(x);case 130:if((X.t11=X.t10()).done){X.next=138;break}if(Y=X.t11.value,!x.hasOwnProperty(Y)){X.next=136;break}if(!(x[Y]instanceof File)){X.next=136;break}return X.next=136,Object(pp.b)(jr,x[Y],A[Y],r);case 136:X.next=130;break;case 138:X.next=151;break;case 140:return X.prev=140,X.t12=X.catch(128),console.log("error uploading speaking section answer files: ",X.t12),J=na.t("alerts.test.uploadingSpeakingAnswerAudioFail"),X.next=146,Object(pp.e)(te(J));case 146:return X.next=148,Object(pp.c)(3e3);case 148:return X.next=150,Object(pp.e)(Le());case 150:return X.abrupt("return");case 151:X.prev=151,X.t13=xa.a.keys(D);case 153:if((X.t14=X.t13()).done){X.next=161;break}if(K=X.t14.value,!D.hasOwnProperty(K)){X.next=159;break}if(!(D[K]instanceof File)){X.next=159;break}return X.next=159,Object(pp.b)(jr,D[K],_[K],r);case 159:X.next=153;break;case 161:X.next=174;break;case 163:return X.prev=163,X.t15=X.catch(151),console.log("Error uploading speaking section question files: ",X.t15),Z=na.t("alerts.test.uploadingSpeakingQuestionAudioFail"),X.next=169,Object(pp.e)(te(Z));case 169:return X.next=171,Object(pp.c)(3e3);case 171:return X.next=173,Object(pp.e)(Le());case 173:return X.abrupt("return");case 174:case"end":return X.stop()}}),vb,null,[[14,41],[58,70],[81,93],[105,117],[128,140],[151,163]])}function Sb(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("CREATE_UPDATE_TEST_START",Tb);case 2:case"end":return e.stop()}}),yb)}var kb=[Object(pp.d)(Sb)],wb=function(e){return{query:'\n            mutation {\n              deleteTest(id: "'.concat(e,'")\n            }\n          ')}},Ob=xa.a.mark(xb),Cb=xa.a.mark(Ab);function xb(e){var t,n,a,r,o,s,i;return xa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.testId,a=t.token,r=wb(n),c.prev=3,c.next=6,Object(pp.b)(fp,r,a);case 6:if(o=c.sent,console.log("Deleting test response: ",o),!o.data.errors){c.next=10;break}throw new Error("Deleting the test failed");case 10:return s=na.t("alerts.test.testDeleteSuccess"),c.next=13,Object(pp.e)({type:"DELETE_TEST_SUCCESS",message:s});case 13:return c.next=15,Object(pp.e)(Me(a));case 15:return c.next=17,Object(pp.e)({type:"CLOSE_MODAL"});case 17:return c.next=19,Object(pp.e)(Ae(a));case 19:return c.next=21,Object(pp.c)(3e3);case 21:return c.next=23,Object(pp.e)(Le());case 23:c.next=35;break;case 25:return c.prev=25,c.t0=c.catch(3),console.log("err",c.t0),i=na.t("alerts.test.testDeleteFail"),c.next=31,Object(pp.e)(ae(i));case 31:return c.next=33,Object(pp.c)(3e3);case 33:return c.next=35,Object(pp.e)(Le());case 35:case"end":return c.stop()}}),Ob,null,[[3,25]])}function Ab(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("DELETE_TEST_START",xb);case 2:case"end":return e.stop()}}),Cb)}var Fb=[Object(pp.d)(Ab)],Db=function(e,t,n){return{query:"\n          mutation ResetTest($testId: ID!,$studentId: ID,$message: String) {\n            resetTest(testId: $testId,studentId: $studentId,message: $message)\n          }\n        ",variables:{testId:e,studentId:t,message:n}}},_b=xa.a.mark(jb),Ib=xa.a.mark(Rb);function jb(e){var t,n,a,r,o,s,i,c,l,u;return xa.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,n=t.testId,a=t.token,r=t.studentId,o=t.courseId,s=t.message,i=Db(n,r,s),d.prev=3,d.next=6,Object(pp.b)(fp,i,a);case 6:if(c=d.sent,console.log("Reseting test response: ",c),!c.data.errors){d.next=10;break}throw new Error("Reseting the test failed");case 10:return l=na.t("alerts.test.testResetSuccess"),d.next=13,Object(pp.e)(re(l));case 13:return d.next=15,Object(pp.e)(Me(a));case 15:return d.next=17,Object(pp.e)(Qe(o,a));case 17:return d.next=19,Object(pp.e)({type:"CLOSE_MODAL"});case 19:return d.next=21,Object(pp.e)(Ae(a));case 21:return d.next=23,Object(pp.c)(3e3);case 23:return d.next=25,Object(pp.e)(Le());case 25:d.next=37;break;case 27:return d.prev=27,d.t0=d.catch(3),console.log("err",d.t0),u=na.t("alerts.test.testResetFail"),d.next=33,Object(pp.e)(oe(u));case 33:return d.next=35,Object(pp.c)(3e3);case 35:return d.next=37,Object(pp.e)(Le());case 37:case"end":return d.stop()}}),_b,null,[[3,27]])}function Rb(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("RESET_TEST_START",jb);case 2:case"end":return e.stop()}}),Ib)}var Nb=[Object(pp.d)(Rb)],Lb=function(e,t,n,a,r,o,s,i,c,l,u,d){return{query:"\n                mutation GradeTest(\n                  $studentId: ID!, \n                  $testId:ID!,\n                  $testClosed:Boolean!,\n                  $graded:Boolean!,\n                  $grade:Float!,\n                  $gradeOverride:Boolean!,\n                  $gradeAdjustmentExplanation:String,\n                  $gradingInProgress:Boolean!,\n                  $marking:Boolean!,\n                  $latePenalty:Float,\n                  $sectionGrades:[Float]\n                  ) {       \n                  submitTest(\n                    studentId:$studentId,\n                    testId:$testId,\n                    testClosed: $testClosed,\n                    graded: $graded,\n                    grade: $grade,\n                    gradeOverride: $gradeOverride,\n                    gradeAdjustmentExplanation: $gradeAdjustmentExplanation,\n                    gradingInProgress: $gradingInProgress,\n                    marking: $marking,\n                    latePenalty: $latePenalty,\n                    sectionGrades: $sectionGrades,\n                    multipleChoiceAnswersInput: [".concat(t,"],\n                    essayAnswersInput: [").concat(n,"],\n                    speakingAnswersInput: [").concat(a,"],\n                    fillBlankAnswersInput: [").concat(r,"],\n                    )\n                }\n              "),variables:{testId:o,studentId:s,testClosed:!0,marking:i,grade:e.gradeOverride?parseFloat(parseFloat(e.gradeAdjusted).toFixed(2)):c>0?parseFloat(parseFloat(c).toFixed(2)):0,gradeOverride:e.gradeOverride||!1,gradeAdjustmentExplanation:e.gradeAdjustmentExplanation,graded:l,gradingInProgress:u,latePenalty:parseFloat(e.latePenalty),sectionGrades:(d||[]).map((function(e){return parseFloat(e.toFixed(2))}))}}},Pb=function(e){return((e||{}).additionalNotes||"").replace(/"/g,"'").replace(/(\r\n|\n|\r)/gm," ")},Bb=function(e){return parseFloat((e||{}).marks||0).toFixed(2)},Mb=function(e,t){var n="";((e||{}).mcSection||[]).forEach((function(e){n+="{ \n              marks: ".concat(Bb(e),', \n              additionalNotes: "').concat(Pb(e),'" }')}));var a="";((e||{}).essaySection||[]).forEach((function(e){a+="{ \n                marks: ".concat(Bb(e),' , \n                additionalNotes: "').concat(Pb(e),'", \n                instructorCorrection: "').concat(((e||{}).instructorCorrection||"").replace(/"/g,"'"),'",\n                allowCorrection: ').concat((e||{}).allowCorrection||!1,"\n               }")}));var r="";((e||{}).speakingSection||[]).forEach((function(e,n){r+="{ \n                marks: ".concat(Bb(e),', \n                additionalNotes: "').concat(Pb(e),'",  \n                feedbackAudio: ').concat(JSON.stringify(t[n]||"")," \n              }")}));var o="";return((e||{}).fillInBlankSection||[]).forEach((function(e){o+="{ \n            marks: ".concat(Bb(e),', \n            additionalNotes: "').concat(Pb(e),'" }')})),{formattedMultipleChoiceResults:n,formattedEssayResults:a,formattedSpeakingResults:r,formattedFillBlankResults:o}},qb=xa.a.mark(Qb),Ub=xa.a.mark(Wb);function Qb(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E,v,y,T,S,k,w,O;return xa.a.wrap((function(C){for(;;)switch(C.prev=C.next){case 0:return t=e.payload,n=t.formValues,a=t.token,r=t.studentId,o=t.test,s=t.graded,i=t.marking,c=t.sectionGrades,l=t.gradingInProgress,u=t.grade,d=t.filesToDelete,m=t.filePath,p=((n||{}).speakingSection||[]).map((function(e){return(e||{}).audioFile})),f=p.map((function(e,t){var n;return n=e instanceof File?Ir(e,m):ao(e),e||(n=null),n})),g=Mb(n,f),b=g.formattedMultipleChoiceResults,h=g.formattedEssayResults,E=g.formattedSpeakingResults,v=g.formattedFillBlankResults,y=Lb(n,b,h,E,v,o._id,r,i,u,s,l,c),C.prev=5,C.next=8,Object(pp.b)(fp,y,a);case 8:if(T=C.sent,console.log("Grade test response",T),!T.data.errors){C.next=12;break}throw new Error("Failed to ".concat(s?"post":"save"," the grades"));case 12:C.next=25;break;case 14:return C.prev=14,C.t0=C.catch(5),console.log("Failed to post or save the grades",C.t0),S=s?na.t("alerts.test.postGradesFail"):na.t("alerts.test.saveGradesFail"),C.next=20,Object(pp.e)(se(S));case 20:return C.next=22,Object(pp.c)(3e3);case 22:return C.next=24,Object(pp.e)(Le());case 24:return C.abrupt("return");case 25:C.prev=25,C.t1=xa.a.keys(p);case 27:if((C.t2=C.t1()).done){C.next=35;break}if(k=C.t2.value,!p.hasOwnProperty(k)){C.next=33;break}if(!(p[k]instanceof File)){C.next=33;break}return C.next=33,Object(pp.b)(jr,p[k],f[k],a);case 33:C.next=27;break;case 35:C.next=48;break;case 37:return C.prev=37,C.t3=C.catch(25),console.log("Error uploading feedback audio file: ",C.t3),w=na.t("alerts.test.uploadFeedbackAudioFail"),C.next=43,Object(pp.e)(se(w));case 43:return C.next=45,Object(pp.c)(3e3);case 45:return C.next=47,Object(pp.e)(Le());case 47:return C.abrupt("return");case 48:if(O=s?na.t("alerts.test.postGradesSuccess"):na.t("alerts.test.saveGradesSuccess"),!((d||[]).length>0)){C.next=52;break}return C.next=52,Object(pp.e)(ke(d,a));case 52:return C.next=54,Object(pp.e)(Qe(o.course,a));case 54:return C.next=56,Object(pp.e)(Me(a));case 56:return C.next=58,Object(pp.e)({type:"CLOSE_MODAL"});case 58:return C.next=60,Object(pp.e)({type:"GRADE_TEST_SUCCESS",message:O});case 60:return C.next=62,Object(pp.e)(W());case 62:return console.log("after clear data action sent"),C.next=65,Object(pp.c)(3e3);case 65:return C.next=67,Object(pp.e)(Le());case 67:case"end":return C.stop()}}),qb,null,[[5,14],[25,37]])}function Wb(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("GRADE_TEST_START",Qb);case 2:case"end":return e.stop()}}),Ub)}var Hb=[Object(pp.d)(Wb)],zb=function(e,t){return{query:'\n            mutation CloseTest {\n              closeTest(test: "'.concat(e,'",student: "').concat(t,'")\n             {   \n              _id\n              test\n              closed\n              latePenalty\n              graded\n              gradingInProgress\n              grade\n              gradeOverride\n              gradeAdjustmentExplanation\n              multiplechoiceSection {\n                grade\n                answers {\n                  questionNumber\n                  answers\n                  additionalNotes\n                  marks\n                }\n              }\n              essaySection {\n                grade\n                answers {\n                  questionNumber\n                  answer\n                  additionalNotes\n                  marks\n                  instructorCorrection\n                  allowCorrection\n                }\n              }\n              speakingSection {\n                grade\n                answers {\n                  questionNumber\n                  answer\n                  additionalNotes\n                  marks\n                  feedbackAudio\n                }\n              }\n              fillInBlanksSection {\n                grade\n                answers {\n                  questionNumber\n                  answer\n                  additionalNotes\n                  marks\n                }\n              }\n            }\n          }\n          ')}},Gb=xa.a.mark($b),Vb=xa.a.mark(Yb);function $b(e){var t,n,a,r,o,s,i,c,l,u;return xa.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,n=t.testId,a=t.studentId,r=t.token,o=t.instructorTest,s=zb(n,a),d.prev=2,d.next=5,Object(pp.b)(fp,s,r);case 5:if(i=d.sent,console.log("Closing test resonse: ",i),!i.data.errors){d.next=9;break}throw new Error("Closing the test failed!");case 9:return c=i.data.data.closeTest,d.next=12,Object(pp.e)({type:"CLOSE_TEST_SUCCESS",test:n,student:a});case 12:return console.log("response.data.data",i.data.data),d.next=15,Tc({testResult:c},[],o);case 15:return l=d.sent,d.next=18,Object(pp.e)(ee(l));case 18:return d.next=20,Object(pp.e)(Ne({results:[{testResult:i.data.data.closeTest,student:{_id:a},test:o}],testId:n,studentId:a},"gradeTest"));case 20:return d.next=22,Object(pp.e)(Qe(o.course,r));case 22:d.next=33;break;case 24:return d.prev=24,d.t0=d.catch(2),u=na.t("alerts.test.closeTestFail"),d.next=29,Object(pp.e)({type:"CLOSE_TEST_FAIL",message:u});case 29:return d.next=31,Object(pp.c)(3e3);case 31:return d.next=33,Object(pp.e)(Le());case 33:case"end":return d.stop()}}),Gb,null,[[2,24]])}function Yb(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("CLOSE_TEST_START",$b);case 2:case"end":return e.stop()}}),Vb)}var Jb=[Object(pp.d)(Yb)],Kb=xa.a.mark(Xb),Zb=xa.a.mark(eh);function Xb(e){var t,n,a,r,o;return xa.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.token,a={query:"\n               query FetchInstructors  {\n                 instructors {\n                   _id\n                   firstName\n                   lastName\n                   email\n                   coursesTeaching {\n                     _id\n                     courseName\n                   }\n                 }\n               }\n             "},s.prev=3,s.next=6,Object(pp.b)(fp,a,n);case 6:if(r=s.sent,console.log("Fetching instructors response: ",r),!r.data.errors){s.next=10;break}throw new Error("Getting instructors failed");case 10:return s.next=12,Object(pp.e)({type:"FETCH_INSTRUCTORS_SUCCESS",instructors:r.data.data.instructors});case 12:return s.next=14,Object(pp.c)(3e3);case 14:return s.next=16,Object(pp.e)(Le());case 16:s.next=28;break;case 18:return s.prev=18,s.t0=s.catch(3),console.log("Fetching instructors error: ",s.t0),o=na.t("alerts.instructor.retrieveInstructorsFail"),s.next=24,Object(pp.e)({type:"FETCH_INSTRUCTORS_FAIL",message:o});case 24:return s.next=26,Object(pp.c)(3e3);case 26:return s.next=28,Object(pp.e)(Le());case 28:case"end":return s.stop()}}),Kb,null,[[3,18]])}function eh(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("FETCH_INSTRUCTORS_START",Xb);case 2:case"end":return e.stop()}}),Zb)}var th=[Object(pp.d)(eh)],nh=function(e){var t=e.map((function(e){var t=[];((e||{}).lessons||{}).forEach((function(e){t.push({documentType:"lesson",documentId:e})})),((e||{}).tests||[]).forEach((function(e){t.push({documentType:"test",documentId:e})})),((e||{}).assignments||[]).forEach((function(e){t.push({documentType:"assignment",documentId:e})}));var n=((e||{}).subjects||[]).map((function(e){var t=[];((e||{}).lessons||{}).forEach((function(e){t.push({documentType:"lesson",documentId:e})})),((e||{}).tests||[]).forEach((function(e){t.push({documentType:"test",documentId:e})})),((e||{}).assignments||[]).forEach((function(e){t.push({documentType:"assignment",documentId:e})}));var n=((e||{}).topics||[]).map((function(e){var t=[];return((e||{}).lessons||{}).forEach((function(e){t.push({documentType:"lesson",documentId:e})})),((e||{}).tests||[]).forEach((function(e){t.push({documentType:"test",documentId:e})})),((e||{}).assignments||[]).forEach((function(e){t.push({documentType:"assignment",documentId:e})})),Object(At.a)(Object(At.a)({},e),{},{folder:t})}));return Object(At.a)(Object(At.a)({},e),{},{folder:t,topics:n})}));return Object(At.a)(Object(At.a)({},e),{},{folder:t,subjects:n})}));return 0===t.length?[{subjects:[],lessons:[],tests:[],assignments:[],moduleName:"",isDisabled:!0}]:t},ah=function(e){return{query:"query FetchCategory($courseId: ID!) {\n          category(courseId: $courseId) {\n            _id\n            modules {\n            _id\n            moduleName\n            lessons\n            tests\n            assignments\n            subjects {\n              _id\n              subjectName\n              lessons\n              tests\n              assignments\n              topics {\n                _id\n                topicName\n                lessons\n                tests\n                assignments\n              }\n            }\n          }\n        }\n      } \n      ",variables:{courseId:e}}},rh=xa.a.mark(sh),oh=xa.a.mark(ih);function sh(e){var t,n,a,r,o,s,i,c,l;return xa.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.courseId,a=t.token,r=ah(n),u.prev=2,u.next=5,Object(pp.b)(fp,r,a);case 5:if(o=u.sent,console.log("Getting modules response: ",o),!o.data.errors){u.next=9;break}throw new Error("Getting modules failed");case 9:return s=(o.data.data.category||{}).modules||[],i=nh(s),c=(o.data.data.category||{})._id,u.next=14,Object(pp.e)(Ie({modules:i,_id:c}));case 14:u.next=26;break;case 16:return u.prev=16,u.t0=u.catch(2),console.log("Failed to retrieve modules",u.t0),l=na.t("alerts.modules.retrieveModulesFailed"),u.next=22,Object(pp.e)({type:"FETCH_MODULES_FAIL",message:l});case 22:return u.next=24,Object(pp.c)(3e3);case 24:return u.next=26,Object(pp.e)(Le());case 26:case"end":return u.stop()}}),rh,null,[[2,16]])}function ih(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("FETCH_MODULES_START",sh);case 2:case"end":return e.stop()}}),oh)}var ch=[Object(pp.d)(ih)],lh=function(e){return{query:"\n           query FetchStudents($courseId: ID!)  {\n             students(courseId: $courseId) {\n               _id\n               firstName\n               lastName\n               email\n               profilePicture\n               dob\n               completedCourses\n               lastLogin\n               documents {\n                 document\n                 documentType\n               }\n               testInSession {\n                test\n                startTime\n                endTime\n               }\n               testResults {\n                _id\n                closed\n                test\n                student\n                course\n                latePenalty\n                graded\n                gradingInProgress\n                grade\n                gradeOverride\n                gradeAdjustmentExplanation\n                submittedOn\n                lastSavedOn\n                multiplechoiceSection {\n                  grade\n                  answers {\n                    questionNumber\n                    answers\n                    additionalNotes\n                    marks\n                  }\n                }\n                essaySection {\n                  grade\n                  answers {\n                    questionNumber\n                    answer\n                    additionalNotes\n                    marks\n                    instructorCorrection\n                    allowCorrection\n                  }\n                }\n                speakingSection {\n                  grade\n                  answers {\n                    questionNumber\n                    answer\n                    additionalNotes\n                    marks\n                    feedbackAudio\n                  }\n                }\n                fillInBlanksSection {\n                  grade\n                  answers {\n                    questionNumber\n                    answer\n                    additionalNotes\n                    marks\n                  }\n                }\n               }\n             }\n           }\n         ",variables:{courseId:e}}},uh=xa.a.mark(mh),dh=xa.a.mark(ph);function mh(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b;return xa.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.courseId,a=t.token,r=t.action,o=void 0===r?{}:r,s=lh(n),h.prev=2,h.next=5,Object(pp.b)(fp,s,a);case 5:if(i=h.sent,console.log("Getting students response: ",i),!i.data.errors){h.next=9;break}throw new Error("Failed to get students");case 9:return c=i.data.data.students,h.next=12,Object(pp.e)(We(c));case 12:if("openSubmittedTest"!==(o||{}).actionType){h.next=26;break}return l=o.payload.notification,u=(o||{}).payload.test,d=(c||[]).find((function(e){return e._id===l.fromUser}))||{},m=(d.testResults||[]).map((function(e){return{testResult:e,student:d,test:e.test===u._id?u:{}}}))||[],p={results:m,testId:l.documentId,studentId:l.fromUser},f=m.find((function(e){if(e.student._id===l.fromUser&&e.test._id===l.documentId)return e}))||{},h.next=21,Object(pp.e)(Ne(p,"gradeTest"));case 21:return h.next=23,Tc(f,m);case 23:return g=h.sent,h.next=26,Object(pp.e)(ee(g));case 26:h.next=38;break;case 28:return h.prev=28,h.t0=h.catch(2),console.log("Failed to retrieve students",h.t0),b=na.t("alerts.student.retrieveStudentsFail"),h.next=34,Object(pp.e)({type:"FETCH_STUDENTS_FAIL",message:b});case 34:return h.next=36,Object(pp.c)(3e3);case 36:return h.next=38,Object(pp.e)(Le());case 38:case"end":return h.stop()}}),uh,null,[[2,28]])}function ph(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("FETCH_STUDENTS_START",mh);case 2:case"end":return e.stop()}}),dh)}var fh=[Object(pp.d)(ph)],gh=xa.a.mark(hh),bh=xa.a.mark(Eh);function hh(e){var t,n,a,r,o,s,i,c,l,u;return xa.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,n=t.token,a={query:"\n                  query FetchAvailableCourses  {\n                    courses {\n                      _id\n                      courseName\n                      courseInstructor {\n                        _id\n                        firstName\n                        lastName\n                        profilePicture\n                        email\n                      }\n                      enrollmentStartDate\n                      enrollmentEndDate\n                      courseStartDate\n                      enrolled\n                      grade\n                      passed\n                      numberOfStudents\n                      accessDenied\n                      enrollmentRequested\n                      courseEndDate\n                      courseDropDeadline\n                      resources {\n                        resourceName\n                        resource\n                      }\n                      studentGrades {\n                        student\n                        grade\n                        passed\n                        gradeOverride\n                        gradeAdjustmentExplanation\n                      }\n                      studentsEnrollRequests {\n                        approved\n                        denied\n                        deniedReason\n                        droppedOut\n                        resubmissionAllowed\n                        student {\n                          _id\n                          firstName\n                          lastName\n                          email\n                          lastLogin\n                          dob\n                          \n                          coursesEnrolled\n                          profilePicture\n                          documents {\n                            documentType\n                            document\n                          }\n                          testResults {\n                            _id\n                            student\n                            test\n                            course\n                            grade\n                            graded\n                            closed\n                          }\n                        }\n                      }\n                      syllabus\n                      courseImage\n                      courseActive\n                      studentCapacity\n                      language\n                      completed\n                      prerequisites {\n                        _id\n                        courseName\n                      }\n                      regularOfficeHours {\n                        _id\n                        day\n                        startTime\n                        endTime\n                        timezoneRegion\n                      }\n                      irregularOfficeHours {\n                       _id\n                       date\n                       startTime\n                       endTime\n                       timezoneRegion\n                      }\n                      tests {\n                        _id\n                        testName\n                        course\n                        published\n                        testType\n                        weight\n                        timer\n                        createdAt\n                        passingGrade\n                        passingRequired\n                        availableOnDate\n                        dueDate\n                        gradeReleaseDate\n                        lateDaysAllowed\n                        allowLateSubmission\n                        latePenalty\n                        assignment\n                        blockedNotes\n                        notes\n                        classAverage\n                        completed\n                        sectionWeights {\n                          mcSection\n                          essaySection\n                          fillBlankSection\n                          speakingSection\n                        }\n                        multipleChoiceQuestions {\n                          _id\n                          question\n                          marks\n                          correctAnswers\n                          answerOptions\n                          solution\n                        }\n                        essayQuestions {\n                          _id\n                          question\n                          marks\n                          solution\n                        }\n                        speakingQuestions {\n                         _id\n                         question\n                         marks\n                         questionAudio\n                         audio\n                        }\n                        fillInBlanksQuestions {\n                          text\n                          blanks {\n                            _id\n                            incorrectAnswers\n                            correctAnswer\n                            marks\n                            selectableAnswer\n                            audio\n                            answerOptions\n                          }\n                        }\n                        readingMaterials {\n                          content\n                          section\n                          fileUpload\n                        }\n                        audioMaterials {\n                          audio\n                          section\n                          fileUpload\n                        }\n                      }\n                      lessons {\n                        _id\n                        lessonName\n                        availableOnDate\n                        published\n                        lessonSlides {\n                          seen\n                          studentsSeen\n                          slideContent\n                          audio\n                          video\n                        }\n                      }\n                      \n                    }\n                  }\n                "},d.prev=3,d.next=6,Object(pp.b)(fp,a,n);case 6:if(r=d.sent,console.log("Fetch courses response: ",r),!r.data.errors){d.next=10;break}throw new Error("Failed to get te courses");case 10:return o=r.data.data.courses,s=o.map((function(e){return Object(At.a)(Object(At.a)({},e),{},{resources:e.resources.map((function(e){return{resourceName:e.resourceName,resource:as(e.resource),loadedResource:e.resource}}))})})),d.next=14,Object(pp.e)(qe(s));case 14:if(i=Nc.location.pathname,!(c=(i.split("course/")[1]||"").split("/")[0])){d.next=20;break}return l=o.find((function(e){return e._id===c})),d.next=20,Object(pp.e)(Be(l));case 20:d.next=32;break;case 22:return d.prev=22,d.t0=d.catch(3),console.log("Failed to get the courses",d.t0),u=na.t("alerts.course.fetchCoursesFail"),d.next=28,Object(pp.e)({type:"FETCH_COURSES_FAIL",message:u});case 28:return d.next=30,Object(pp.c)(3e3);case 30:return d.next=32,Object(pp.e)(Le());case 32:case"end":return d.stop()}}),gh,null,[[3,22]])}function Eh(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("FETCH_COURSES_START",hh);case 2:case"end":return e.stop()}}),bh)}var vh=[Object(pp.d)(Eh)],yh=xa.a.mark(wh),Th=xa.a.mark(Oh),Sh=xa.a.mark(Ch),kh=xa.a.mark(xh);function wh(e){var t,n,a,r,o,s;return xa.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.file,a=t.key,r=t.type,o=t.token,i.prev=2,i.next=5,Object(pp.b)(jr,n,a,o,r);case 5:return i.next=7,Object(pp.e)({type:"UPLOAD_FILE_SUCCESS"});case 7:i.next=19;break;case 9:return i.prev=9,i.t0=i.catch(2),console.log("err",i.t0),s=na.t("alerts.files.uploadFileFailed"),i.next=15,Object(pp.e)({type:"UPLOAD_FILE_FAIL",message:s});case 15:return i.next=17,Object(pp.c)(3e3);case 17:return i.next=19,Object(pp.e)(Le());case 19:case"end":return i.stop()}}),yh,null,[[2,9]])}function Oh(e){var t,n,a,r,o,s,i,c;return xa.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.payload,n=t.fileUrls,a=t.token,r=(n||[]).filter((function(e){return"string"===typeof e})).map((function(e){return e.replace("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/","")})),n&&n.length>0&&r.length>0){l.next=7;break}return l.next=6,Object(pp.e)({type:"DELETE_FILES_SUCCESS"});case 6:return l.abrupt("return");case 7:return o=new FormData,r.forEach((function(e){o.append("url",e)})),l.prev=9,s={url:"".concat("https://mernstackelearn.herokuapp.com/","delete-files"),method:"PUT",headers:{Authorization:"Bearer "+a},data:o},l.next=13,Object(pp.b)(wr.a,s);case 13:if(i=l.sent,console.log("Deleting files response: ",i),!i.data.errors){l.next=17;break}throw new Error("Deleting the files failed");case 17:return l.next=19,Object(pp.e)({type:"DELETE_FILES_SUCCESS"});case 19:l.next=31;break;case 21:return l.prev=21,l.t0=l.catch(9),console.log("err",l.t0),c=na.t("alerts.files.deleteFilesFailed"),l.next=27,Object(pp.e)({type:"DELETE_FILES_FAIL",message:c});case 27:return l.next=29,Object(pp.c)(3e3);case 29:return l.next=31,Object(pp.e)(Le());case 31:case"end":return l.stop()}}),Th,null,[[9,21]])}function Ch(){var e;return xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(pp.f)("UPLOAD_FILE_START");case 3:return e=t.sent,t.next=6,Object(pp.b)(wh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}}),Sh)}function xh(){var e;return xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(pp.f)("DELETE_FILES_START");case 3:return e=t.sent,t.next=6,Object(pp.b)(Oh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}}),kh)}var Ah=[Object(pp.d)(xh),Object(pp.d)(Ch)],Fh=function(e,t){return{query:"mutation FetchTest($testId:ID!,$password:String) {       \n                        fetchTest(testId:$testId,password:$password) {\n                          test{\n                          _id\n                          course\n                          testName\n                          published\n                          testType\n                          weight\n                          createdAt\n                          timer\n                          passingGrade\n                          passingRequired\n                          availableOnDate\n                          dueDate\n                          gradeReleaseDate\n                          allowLateSubmission\n                          lateDaysAllowed\n                          latePenalty\n                          blockedNotes\n                          assignment\n                          startTime\n                          endTime\n                          notes\n                          readingMaterials {\n                            content\n                            section\n                            fileUpload\n                          }\n                          audioMaterials {\n                            audio\n                            section\n                            fileUpload\n                          }\n                          sectionWeights {\n                            mcSection\n                            essaySection\n                            fillBlankSection\n                            speakingSection\n                          }\n                          essayQuestions {\n                            _id\n                            question\n                            marks\n                            solution\n                          }\n                          speakingQuestions {\n                           _id\n                           question\n                           marks\n                           questionAudio\n                           audio\n                         }\n                          multipleChoiceQuestions {\n                           _id\n                           question\n                           marks\n                           correctAnswers\n                           answerOptions\n                           solution\n                          }\n                          fillInBlanksQuestions {\n                            text\n                            blanks {\n                              _id\n                              incorrectAnswers\n                              correctAnswer\n                              marks\n                              selectableAnswer\n                              audio\n                              answerOptions\n                            }\n                          }\n                        }\n                        result {\n                          _id\n                          multiplechoiceSection {\n                            grade\n                            answers {\n                              questionNumber\n                              answers\n                              additionalNotes\n                              marks\n                            }\n                          }\n                          essaySection {\n                            grade\n                            answers {\n                              questionNumber\n                              answer\n                              additionalNotes\n                              marks\n                              instructorCorrection\n                              allowCorrection\n                            }\n                          }\n                          speakingSection {\n                            grade\n                            answers {\n                              questionNumber\n                              answer\n                              additionalNotes\n                              marks\n                              feedbackAudio\n                            }\n                          }\n                          fillInBlanksSection {\n                            grade\n                            answers {\n                              questionNumber\n                              answer\n                              additionalNotes\n                              marks\n                            }\n                          }\n                        }\n                      }\n                    }\n                    ",variables:{testId:e,password:t}}},Dh=function(e,t){return{_id:t._id,course:e.course,test:e._id,mcQuestions:(e.multipleChoiceQuestions||[]).map((function(e,n){var a=((t.multiplechoiceSection||{}).answers||[]).find((function(e){return e.questionNumber===n+1}));return a?a.answers:[]})),essayQuestions:(e.essayQuestions||[]).map((function(e,n){var a=((t.essaySection||{}).answers||[]).find((function(e){return e.questionNumber===n+1}));return a?a.answer:""})),speakingQuestions:(e.speakingQuestions||[]).map((function(e,n){var a=((t.speakingSection||{}).answers||[]).find((function(e){return e.questionNumber===n+1}));return a?{recordedBlob:(a||{}).answer&&""!==(a||{}).answer?a.answer:"",audioFile:(a||{}).answer||""}:{recordedBlob:"",audioFile:""}})),fillBlankQuestions:{answers:((e.fillInBlanksQuestions||{}).blanks||[]).map((function(e,n){var a=((t.fillInBlanksSection||{}).answers||[]).find((function(e){return e.questionNumber===n+1}));return a?a.answer:""}))},readingMaterials:e.readingMaterials,audioMaterials:e.audioMaterials}},_h=function(e){var t,n=[];e.sectionWeights.mcSection>0&&n.push("mc"),e.sectionWeights.essaySection>0&&n.push("essay"),e.sectionWeights.speakingSection>0&&n.push("speaking"),e.sectionWeights.fillBlankSection>0&&n.push("fillblanks");var a=(e.readingMaterials||[]).map((function(e){return{file:e.fileUpload?as(e.content):"",fileUpload:e.fileUpload,loadedPDF:e.fileUpload?e.content:"",content:e.fileUpload?"":e.content}})),r=(e.audioMaterials||[]).map((function(e){return{audioFile:e.audio,fileUpload:e.fileUpload,recordedBlob:e.audio?e.audio:null}})),o={multipleChoice:a[0],essay:a[1],speaking:a[2],fillInTheBlanks:a[3],test:a[4]},s={multipleChoice:r[0],essay:r[1],speaking:r[2],fillInTheBlanks:r[3],test:r[4]},i=(e.multipleChoiceQuestions||[]).map((function(e){return{question:e.question,marks:e.marks,solution:e.solution,correctAnswers:e.correctAnswers,answers:e.answerOptions}})),c=(e.speakingQuestions||[]).map((function(e){return{question:e.question,marks:e.marks,audioAnswer:!!e.audio,recordedBlob:e.audio&&""!==e.audio?e.audio:null,audioFile:e.audio,audioQuestion:!!e.questionAudio,questionRecordedBlob:e.questionAudio&&""!==e.questionAudio?e.questionAudio:null,audioFileQuestion:e.questionAudio}})),l=((e.fillInBlanksQuestions||{}).blanks||[]).map((function(e){return e.correctAnswer})),u=((e.fillInBlanksQuestions||{}).blanks||[]).map((function(e){var t=(e.incorrectAnswers||[]).filter((function(e){return e})).reduce((function(e,t,n){var a;return 0===n&&(a="One"),1===n&&(a="Two"),2===n&&(a="Three"),e["incorrectAnswer".concat(a)]=t,e}),{});return{answer:e.correctAnswer,marks:e.marks,selectableAnswer:e.selectableAnswer,answerOptions:t,browserAudioFile:""!==e.audio&&e.audio?e.audio:"",audioFile:""!==e.audio&&e.audio?e.audio:"",audio:!(""===e.audio||!e.audio)}})),d={question:(e.fillInBlanksQuestions||{}).text,answers:u,correctAnswers:l};return t={_id:e._id,editing:!0,assignment:e.assignment,published:e.published,passingRequired:e.passingRequired,passingGrade:e.passingGrade,createdAt:e.createdAt?new Date(parseInt(e.createdAt)):null},Object(po.a)(t,e.assignment?"assignmentName":"testName",e.testName),Object(po.a)(t,"testType",e.testType),Object(po.a)(t,e.assignment?"assignmentWeight":"testWeight",e.weight),Object(po.a)(t,"latePenalty",e.allowLateSubmission?e.latePenalty.toString():null),Object(po.a)(t,"lateDaysAllowed",e.allowLateSubmission?e.lateDaysAllowed.toString():null),Object(po.a)(t,"allowLateSubmission",!!e.allowLateSubmission),Object(po.a)(t,"timedTest",!!e.timer),Object(po.a)(t,"testTime",e.timer?e.timer.toString():null),Object(po.a)(t,"blockedNotes",e.blockedNotes),Object(po.a)(t,"notes",e.notes),Object(po.a)(t,"availableOnDate",e.availableOnDate?new Date(parseInt(e.availableOnDate)):null),Object(po.a)(t,"dueDate",e.dueDate?new Date(parseInt(e.dueDate)):null),Object(po.a)(t,"gradeReleaseDate",e.gradeReleaseDate?new Date(parseInt(e.gradeReleaseDate)):null),Object(po.a)(t,"testSections",n),Object(po.a)(t,"mcSectionWeight",e.sectionWeights.mcSection),Object(po.a)(t,"essaySectionWeight",e.sectionWeights.essaySection),Object(po.a)(t,"speakingSectionWeight",e.sectionWeights.speakingSection),Object(po.a)(t,"fillBlankSectionWeight",e.sectionWeights.fillBlankSection),Object(po.a)(t,"speakingQuestions",c&&(c||[]).length>0?c:[{marks:1}]),Object(po.a)(t,"essayQuestions",e.essayQuestions&&(e.essayQuestions||[]).length>0?e.essayQuestions:[{marks:1}]),Object(po.a)(t,"mcQuestions",i&&(i||[]).length>0?i:[{marks:1,answers:["".concat(na.t("testForm.fields.option")," 1"),"".concat(na.t("testForm.fields.option")," 2")],correctAnswers:["1"]}]),Object(po.a)(t,"fillBlankQuestions",d),Object(po.a)(t,"readingMaterial",o),Object(po.a)(t,"audioMaterial",s),t},Ih=xa.a.mark(Rh),jh=xa.a.mark(Nh);function Rh(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b;return xa.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.testId,a=t.isStudent,r=t.token,o=t.testDataInProgress,s=t.studentResult,i=t.password,c=Fh(n,i),console.log("testDataInProgress",o),h.prev=3,h.next=6,Object(pp.b)(fp,c,r);case 6:if(l=h.sent,console.log("Fetching test response",l),(d=l.data.errors)&&(u=d[0].message),!d||"wrongPassword"!==u){h.next=16;break}return h.next=13,Object(pp.e)(Object(Dt.e)("takeTestConfirmation",{password:na.t("auth.errors.wrongPassword")}));case 13:return h.next=15,Object(pp.e)(Ge());case 15:return h.abrupt("return");case 16:if(!l.data.errors){h.next=18;break}throw new Error("Fetching the test failed!");case 18:if(m=l.data.data,!a){h.next=48;break}return h.next=22,Object(pp.e)({type:"CLEAR_TEST_IN_PROGRESS"});case 22:if(403!==((l.data.errors||[])[0]||{}).status){h.next=25;break}return h.next=25,Object(pp.e)(w(r));case 25:if(p=(m.fetchTest||{}).test||{},f=(m.fetchTest||{}).result||{},!s){h.next=33;break}return h.next=30,Object(pp.e)(ze(null,null));case 30:return h.next=32,Object(pp.e)(Ne({test:{testResult:s,instructorTest:p}},"testReview"));case 32:return h.abrupt("return");case 33:if(p.assignment){h.next=41;break}return h.next=36,Object(pp.e)({type:"START_TEST",test:p});case 36:return h.next=38,Object(pp.e)(Ue("testSession"));case 38:return h.next=40,Object(pp.e)({type:"CLOSE_MODAL"});case 40:Nc.push("/student-panel/test-session");case 41:if(!p.assignment){h.next=44;break}return h.next=44,Object(pp.e)({type:"START_ASSIGNMENT",assignment:Object(At.a)(Object(At.a)({},p),{},{course:p.course})});case 44:return h.next=46,Object(pp.e)(ze(p,Dh(p,f)));case 46:return h.next=48,Object(pp.e)({type:"SELECT_COURSE",courseId:p.course});case 48:if(a){h.next=56;break}return g=l.data.data.fetchTest.test||{},h.next=52,Object(pp.e)(ze(n,_h(g)));case 52:return h.next=54,Object(pp.e)(Re(1));case 54:return h.next=56,Object(pp.e)(je(g.assignment?["Assignments","Edit assignment","Question bank"]:["Tests","Edit test","Question bank"]));case 56:h.next=71;break;case 58:return h.prev=58,h.t0=h.catch(3),console.log("Failed to retrieve test",h.t0),h.next=63,Object(pp.e)({type:"CANCEL_EDITING"});case 63:return b=na.t("alerts.test.retrieveTestFail"),403===l.data.errors[0].status&&(b="retrieveTestFailDatePassed"===l.data.errors[0].message?na.t("alerts.test.retrieveTestFailDatePassed"):l.data.errors[0].message),h.next=67,Object(pp.e)(Ge(b));case 67:return h.next=69,Object(pp.c)(5e3);case 69:return h.next=71,Object(pp.e)(Le());case 71:case"end":return h.stop()}}),Ih,null,[[3,58]])}function Nh(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("FETCH_TEST_START",Rh);case 2:case"end":return e.stop()}}),jh)}var Lh=[Object(pp.d)(Nh)],Ph=function(e){return{query:"\n        mutation MarkAsSeen(\n          $notificationId: ID!, \n          )  {       \n          markAsSeen(\n            notificationId:$notificationId,\n            )\n        }\n      ",variables:{notificationId:e}}},Bh=xa.a.mark(Qh),Mh=xa.a.mark(Wh),qh=xa.a.mark(Hh),Uh=xa.a.mark(zh);function Qh(e){var t,n,a,r,o;return xa.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.token,a={query:"\n                  query FetchNotifications  {\n                    notifications {\n                      _id\n                      content\n                      toSpecificUser\n                      toUserType\n                      fromUser\n                      senderFirstName\n                      senderLastName\n                      avatar\n                      documentType\n                      documentId\n                      course\n                      seen\n                      message\n                    }\n                  }\n                "},s.prev=3,s.next=6,Object(pp.b)(fp,a,n);case 6:return r=s.sent,console.log("Fetch notifications response: ",r),o=r.data.data.notifications,s.next=11,Object(pp.e)(Fe(o));case 11:s.next=23;break;case 13:return s.prev=13,s.t0=s.catch(3),console.log("Failed to retrieve the notifications",s.t0),na.t("alerts.notifications.retrieveNotificationsFail"),s.next=19,Object(pp.e)({type:"FETCH_NOTIFICATIONS_FAIL"});case 19:return s.next=21,Object(pp.c)(3e3);case 21:return s.next=23,Object(pp.e)(Le());case 23:case"end":return s.stop()}}),Bh,null,[[3,13]])}function Wh(e){var t,n,a,r,o;return xa.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.token,a=t.notificationId,r=Ph(a),s.prev=2,s.next=5,Object(pp.b)(fp,r,n);case 5:return o=s.sent,console.log("Mark as seen response: ",o),s.next=9,Object(pp.e)({type:"MARK_AS_SEEN_SUCCESS"});case 9:return s.next=11,Object(pp.e)(Ae(n));case 11:s.next=23;break;case 13:return s.prev=13,s.t0=s.catch(2),console.log("Failed to mark notification as seen",s.t0),na.t("alerts.notifications.markNotificationsFail"),s.next=19,Object(pp.e)({type:"MARK_AS_SEEN_FAIL"});case 19:return s.next=21,Object(pp.c)(3e3);case 21:return s.next=23,Object(pp.e)(Le());case 23:case"end":return s.stop()}}),Mh,null,[[2,13]])}function Hh(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("MARK_AS_SEEN_START",Wh);case 2:case"end":return e.stop()}}),qh)}function zh(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("FETCH_NOTIFICATIONS_START",Qh);case 2:case"end":return e.stop()}}),Uh)}var Gh=[Object(pp.d)(zh),Object(pp.d)(Hh)],Vh=function(e){var t=e.configData;return{query:"\n           mutation UpdateConfiguration(\n             $isChatNotifications:Boolean!\n             $isHideActiveStatus: Boolean!\n             $dropCourseGrade: Float\n             $isDropCoursePenalty: Boolean\n             $coursePassGrade: Float\n             $isEnrollAllowedAfterDropCourse:Boolean\n             $isInstructorCoursesLimit:Boolean\n             $instructorCoursesLimit:Int\n             $isApproveInstructorAccounts:Boolean\n             $isApproveStudentAccounts:Boolean\n             $isContentBlockedCourseEnd:Boolean\n             $studentFileSizeLimit:Float\n             $instructorFileSizeLimit:Float\n             $isPasswordRequiredStartTest:Boolean\n             $voiceRecordTimeLimit:Float\n             $blockedInstructors:[ID]\n             $isChatAllowedOutsideOfficehours:Boolean\n             $isTestNotifications:Boolean\n             $isTestEmails:Boolean\n             $isLessonNotifications:Boolean\n             $isLessonEmails:Boolean\n             $isAssignmentNotifications:Boolean\n             $isAssignmentEmails:Boolean\n             $isCourseNotifications:Boolean\n             $isCourseEmails:Boolean\n             $isSendTestNotifications:Boolean\n             $isSendTestEmails:Boolean\n             $isSendLessonNotifications:Boolean\n             $isSendLessonEmails:Boolean\n             $isSendAssignmentNotifications:Boolean\n             $isSendAssignmentEmails:Boolean\n             $isSendCourseNotifications:Boolean\n             $isSendCourseEmails:Boolean\n             $blockedStudents:[ID]\n             $blockedStudentsChat:[ID]\n             $isAllowDeleteStudentAccount:Boolean\n             $isAllowDeleteInstructorAccount:Boolean\n             $isNewInstructorAccountEmails:Boolean\n             $isNewInstructorAccountNotifications:Boolean\n             $isDropCourseEmails:Boolean\n             $isDropCourseNotifications:Boolean\n             $isEnrollEmails:Boolean\n             $isEnrollNotifications:Boolean\n             ) {\n             updateConfiguration(configurationInput: {\n              isChatNotifications:$isChatNotifications,\n              isHideActiveStatus: $isHideActiveStatus,\n              dropCourseGrade: $dropCourseGrade,\n              isDropCoursePenalty: $isDropCoursePenalty\n              coursePassGrade: $coursePassGrade\n              isEnrollAllowedAfterDropCourse: $isEnrollAllowedAfterDropCourse\n              instructorCoursesLimit: $instructorCoursesLimit\n              isInstructorCoursesLimit: $isInstructorCoursesLimit\n              isApproveInstructorAccounts: $isApproveInstructorAccounts\n              isApproveStudentAccounts: $isApproveStudentAccounts\n              isContentBlockedCourseEnd: $isContentBlockedCourseEnd\n              studentFileSizeLimit: $studentFileSizeLimit\n              instructorFileSizeLimit: $instructorFileSizeLimit\n              isPasswordRequiredStartTest: $isPasswordRequiredStartTest\n              voiceRecordTimeLimit: $voiceRecordTimeLimit\n              blockedInstructors: $blockedInstructors\n              isChatAllowedOutsideOfficehours: $isChatAllowedOutsideOfficehours\n              isTestNotifications: $isTestNotifications\n              isTestEmails: $isTestEmails\n              isLessonNotifications: $isLessonNotifications\n              isLessonEmails: $isLessonEmails\n              isAssignmentNotifications: $isAssignmentNotifications\n              isAssignmentEmails: $isAssignmentEmails\n              isCourseNotifications: $isCourseNotifications\n              isCourseEmails: $isCourseEmails\n              isSendTestNotifications:$isSendTestNotifications\n              isSendTestEmails:$isSendTestEmails\n              isSendLessonNotifications:$isSendLessonNotifications\n              isSendLessonEmails:$isSendLessonEmails\n              isSendAssignmentNotifications:$isSendAssignmentNotifications\n              isSendAssignmentEmails:$isSendAssignmentEmails\n              isSendCourseNotifications:$isSendCourseNotifications\n              isSendCourseEmails:$isSendCourseEmails\n              blockedStudents: $blockedStudents\n              blockedStudentsChat: $blockedStudentsChat\n              isAllowDeleteStudentAccount: $isAllowDeleteStudentAccount\n              isAllowDeleteInstructorAccount: $isAllowDeleteInstructorAccount\n              isNewInstructorAccountEmails: $isNewInstructorAccountEmails\n              isNewInstructorAccountNotifications: $isNewInstructorAccountNotifications\n              isDropCourseEmails: $isDropCourseEmails\n              isDropCourseNotifications: $isDropCourseNotifications\n              isEnrollEmails: $isEnrollEmails\n              isEnrollNotifications: $isEnrollNotifications\n              })\n           }\n         ",variables:{isChatNotifications:t.isChatNotifications,isHideActiveStatus:t.isHideActiveStatus,dropCourseGrade:parseFloat(parseFloat(t.dropCourseGrade).toFixed(2)),isDropCoursePenalty:t.isDropCoursePenalty,coursePassGrade:parseFloat(parseFloat(t.coursePassGrade).toFixed(2)),isEnrollAllowedAfterDropCourse:t.isEnrollAllowedAfterDropCourse,isInstructorCoursesLimit:t.isInstructorCoursesLimit,instructorCoursesLimit:parseInt(t.instructorCoursesLimit),isApproveInstructorAccounts:t.isApproveInstructorAccounts,isApproveStudentAccounts:t.isApproveStudentAccounts,isContentBlockedCourseEnd:t.isContentBlockedCourseEnd,studentFileSizeLimit:parseFloat(parseFloat(t.studentFileSizeLimit).toFixed(2)),instructorFileSizeLimit:parseFloat(parseFloat(t.instructorFileSizeLimit).toFixed(2)),isPasswordRequiredStartTest:t.isPasswordRequiredStartTest,voiceRecordTimeLimit:parseFloat(parseFloat(t.voiceRecordTimeLimit).toFixed(2)),blockedInstructors:t.blockedInstructors,isChatAllowedOutsideOfficehours:t.isChatAllowedOutsideOfficehours,isTestNotifications:t.isTestNotifications,isTestEmails:t.isTestEmails,isLessonNotifications:t.isLessonNotifications,isLessonEmails:t.isLessonEmails,isAssignmentNotifications:t.isAssignmentNotifications,isAssignmentEmails:t.isAssignmentEmails,isCourseNotifications:t.isCourseNotifications,isCourseEmails:t.isCourseEmails,blockedStudents:t.blockedStudents,blockedStudentsChat:t.blockedStudentsChat,isSendTestNotifications:t.isSendTestNotifications,isSendTestEmails:t.isSendTestEmails,isSendLessonNotifications:t.isSendLessonNotifications,isSendLessonEmails:t.isSendLessonEmails,isSendAssignmentNotifications:t.isSendAssignmentNotifications,isSendAssignmentEmails:t.isSendAssignmentEmails,isSendCourseNotifications:t.isSendCourseNotifications,isSendCourseEmails:t.isSendCourseEmails,isAllowDeleteStudentAccount:t.isAllowDeleteStudentAccount,isAllowDeleteInstructorAccount:t.isAllowDeleteInstructorAccount,isNewInstructorAccountEmails:t.isNewInstructorAccountEmails,isNewInstructorAccountNotifications:t.isNewInstructorAccountNotifications,isDropCourseEmails:t.isDropCourseEmails,isDropCourseNotifications:t.isDropCourseNotifications,isEnrollEmails:t.isEnrollEmails,isEnrollNotifications:t.isEnrollNotifications}}},$h=xa.a.mark(Zh),Yh=xa.a.mark(Xh),Jh=xa.a.mark(eE),Kh=xa.a.mark(tE);function Zh(e){var t,n,a,r;return xa.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.token,n={query:"\n            query Configuration {\n              configuration {\n                _id\n                user\n                isChatNotifications\n                isHideActiveStatus\n                dropCourseGrade\n                isDropCoursePenalty\n                coursePassGrade\n                isEnrollAllowedAfterDropCourse\n                isInstructorCoursesLimit\n                instructorCoursesLimit\n                isApproveInstructorAccounts\n                isApproveStudentAccounts\n                isContentBlockedCourseEnd\n                studentFileSizeLimit\n                instructorFileSizeLimit\n                isPasswordRequiredStartTest\n                voiceRecordTimeLimit\n                blockedInstructors\n                isChatAllowedOutsideOfficehours\n                isSendTestNotifications\n                isSendTestEmails\n                isSendLessonNotifications\n                isSendLessonEmails\n                isSendAssignmentNotifications\n                isSendAssignmentEmails\n                isSendCourseNotifications\n                isSendCourseEmails\n                isTestNotifications\n                isTestEmails\n                isLessonNotifications\n                isLessonEmails\n                isAssignmentNotifications\n                isAssignmentEmails\n                isCourseNotifications\n                isCourseEmails\n                blockedStudents\n                blockedStudentsChat\n\n                isAllowDeleteStudentAccount\n                isAllowDeleteInstructorAccount\n\n                isNewInstructorAccountEmails\n                isNewInstructorAccountNotifications\n\n                isDropCourseEmails\n                isDropCourseNotifications\n\n                isEnrollEmails\n                isEnrollNotifications\n\n                coursesIsChatAllowedOutsideOfficehours\n              }\n            }\n          "},o.prev=2,o.next=5,Object(pp.b)(fp,n,t);case 5:if(a=o.sent,console.log("Fetch config response",a),!a.data.errors){o.next=9;break}throw new Error("Failed to get the configuration");case 9:return o.next=11,Object(pp.e)({type:"FETCH_CONFIG_SUCCESS",configuration:a.data.data.configuration});case 11:o.next=23;break;case 13:return o.prev=13,o.t0=o.catch(2),console.log("e: ",o.t0),r=na.t("alerts.config.fetchConfigFail"),o.next=19,Object(pp.e)(fe(r));case 19:return o.next=21,Object(pp.c)(3e3);case 21:return o.next=23,Object(pp.e)(Le());case 23:case"end":return o.stop()}}),$h,null,[[2,13]])}function Xh(e){var t,n,a,r,o,s,i;return xa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.token,a=t.configData,console.log("configData",a),c.prev=2,r=Vh({configData:a}),c.next=6,Object(pp.b)(fp,r,n);case 6:if(o=c.sent,console.log("Update configuration response: ",o),!o.data.errors){c.next=10;break}throw new Error("Failed to update the configuration");case 10:c.next=23;break;case 12:return c.prev=12,c.t0=c.catch(2),console.log("Error updating the configuration: ",c.t0),s=na.t("alerts.config.updatedConfigFail"),c.next=18,Object(pp.e)({type:"UPDATE_CONFIG_FAIL",message:s});case 18:return c.next=20,Object(pp.c)(3e3);case 20:return c.next=22,Object(pp.e)(Le());case 22:return c.abrupt("return");case 23:return i=na.t("alerts.config.updatedConfigSuccess"),c.next=26,Object(pp.e)(Ce(i));case 26:return c.next=28,Object(pp.c)(3e3);case 28:return c.next=30,Object(pp.e)(Le());case 30:return c.next=32,Object(pp.e)(Oe(n));case 32:case"end":return c.stop()}}),Yh,null,[[2,12]])}function eE(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.g)("FETCH_CONFIG_START",Zh);case 2:case"end":return e.stop()}}),Jh)}function tE(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("UPDATE_CONFIG_START",Xh);case 2:case"end":return e.stop()}}),Kh)}var nE=[Object(pp.d)(eE),Object(pp.d)(tE)],aE=xa.a.mark(oE),rE=xa.a.mark(sE);function oE(e){var t,n,a,r,o;return xa.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.payload,n=t.token,a=t.userId,r=t.activity,console.log("token: ",n),console.log("userId: ",a),"/authentication"!==window.location.pathname){s.next=6;break}return s.abrupt("return");case 6:if(o=go()("https://mernstackelearn.herokuapp.com/",{query:{token:n}}),"active"!==r){s.next=12;break}return console.log("active in saga"),o.emit("active",{user:a}),s.next=12,Object(pp.e)(ye(n));case 12:"idle"===r&&(console.log("idle in saga"),o.emit("idle",{user:a})),console.log("window.location.pathname",window.location.pathname);case 14:case"end":return s.stop()}}),aE)}function sE(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.h)("UPDATE_ACTIVITY_START",oE);case 2:case"end":return e.stop()}}),rE)}var iE=[Object(pp.d)(sE)],cE=xa.a.mark(lE);function lE(){return xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pp.a)([].concat(Object(Pr.a)(ch),Object(Pr.a)(fh),Object(Pr.a)(vh),Object(Pr.a)(Lh),Object(Pr.a)(lf),Object(Pr.a)(Ag),Object(Pr.a)(cb),Object(Pr.a)(kb),Object(Pr.a)(Fb),Object(Pr.a)(Nb),Object(Pr.a)(Hb),Object(Pr.a)(Jb),Object(Pr.a)(Zf),Object(Pr.a)(og),Object(Pr.a)(dg),Object(Pr.a)(gb),Object(Pr.a)(th),Object(Pr.a)(Ff),Object(Pr.a)(qf),Object(Pr.a)(Gf),Object(Pr.a)(Ah),Object(Pr.a)(Gh),Object(Pr.a)(nE),Object(Pr.a)(iE)));case 2:case"end":return e.stop()}}),cE)}var uE={loading:!1,successMessage:null,failMessage:null},dE=function(e){return Cr(e,{loading:!1,successMessage:null,failMessage:null})},mE=function(e){return Cr(e,{loading:!0})},pE=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},fE=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},gE=function(e){return Cr(e,{loading:!0})},bE=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},hE=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},EE=function(e){return Cr(e,{loading:!0})},vE=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},yE=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},TE=function(e){return Cr(e,{loading:!0})},SE=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},kE=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},wE=function(e,t){return Cr(e,{loading:!1,courseDetailId:t.courseId,lessonDetail:!0})},OE=function(e,t){return Cr(e,{loading:!1,courseDetailId:t.courseId})},CE=function(e){return Cr(e,{assignmentDetail:!1,testDetail:!1,lessonDetail:!1,gradeDetail:!1})},xE=function(e){return Cr(e,{successMessage:null,failMessage:null})},AE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uE,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENROLL_COURSE_START":return gE(e);case"ENROLL_COURSE_SUCCESS":return bE(e,t);case"ENROLL_COURSE_FAIL":return hE(e,t);case"ENROLL_REQUEST_START":return mE(e);case"ENROLL_REQUEST_SUCCESS":return pE(e,t);case"ENROLL_REQUEST_FAIL":return fE(e,t);case"ENROLL_DENY_START":return EE(e);case"ENROLL_DENY_SUCCESS":return vE(e,t);case"ENROLL_DENY_FAIL":return yE(e,t);case"DROP_COURSE_START":return TE(e);case"DROP_COURSE_SUCCESS":return SE(e,t);case"DROP_COURSE_FAIL":return kE(e,t);case"SHOW_STUDENT_COURSE_DETAILS":return wE(e,t);case"SELECT_COURSE":return OE(e,t);case"RETURN_TO_COURSES":return CE(e);case k:return xE(e);case S:return dE(e);default:return e}},FE={selectedLesson:null,loading:!1,successMessage:null,failMessage:null},DE=function(e){return Cr(e,{loading:!0})},_E=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},IE=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},jE=function(e){return Cr(e,{selectedLesson:null})},RE=function(e,t){return Cr(e,{selectedLesson:t.lesson})},NE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:FE,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_STUDENT_LESSON":return RE(e,t);case"MARK_SLIDE_AS_SEEN_START":return DE(e);case"MARK_SLIDE_AS_SEEN_SUCCESS":return _E(e,t);case"MARK_SLIDE_AS_SEEN_FAIL":return IE(e,t);case S:return jE(e);default:return e}},LE={testReviewing:null,testInSession:null,assignmentInSession:null,testResults:null,loading:!1,successMessage:null,failMessage:null},PE=function(e){return Cr(e,{testReviewing:null,testInSession:null,assignmentInSession:null,testResults:null,loading:!1,successMessage:null,failMessage:null})},BE=function(e,t){return Cr(e,{testInSession:t.test})},ME=function(e,t){return Cr(e,{assignmentInSession:t.assignment})},qE=function(e){return Cr(e,{loadedTestDataInProgress:null})},UE=function(e){return Cr(e,{loading:!0})},QE=function(e,t){return(t.test||{}).testResult?Cr(e,{testReviewing:t.test,loading:!1}):Cr(e,{loadedTestDataInProgress:t.formData,loading:!1})},WE=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},HE=function(e,t){return Cr(e,{loading:"noSpinner"===t.spinner})},zE=function(e,t){return Cr(e,{testResults:t.testResults,loading:!1})},GE=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},VE=function(e){return Cr(e,{loading:!0})},$E=function(e,t){return t.testClosed?Cr(e,{loading:!1,testInSession:null,assignmentInSession:null,loadedTestDataInProgress:null,successMessage:t.message}):Cr(e,{loading:!1,successMessage:t.message})},YE=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},JE=function(e,t){return Cr(e,{testResults:t.testResults})},KE=function(e){return Cr(e,{assignmentInSession:null,loadedTestDataInProgress:null})},ZE=function(e){return Cr(e,{loadedTestDataInProgress:null})},XE=function(e){return Cr(e,{successMessage:null,failMessage:null})},ev=function(e){return Cr(e,{testInSession:null,assignmentInSession:null,loadedTestDataInProgress:null})},tv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:LE,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TEST_START":return UE(e);case"FETCH_TEST_SUCCESS":return QE(e,t);case"FETCH_TEST_FAIL":return WE(e,t);case"FETCH_TEST_RESULTS_START":return HE(e,t);case"FETCH_TEST_RESULTS_SUCCESS":return zE(e,t);case"FETCH_TEST_RESULTS_FAIL":return GE(e,t);case"SUBMIT_TEST_START":return VE(e);case"SUBMIT_TEST_SUCCESS":return $E(e,t);case"SUBMIT_TEST_FAIL":return YE(e,t);case"START_TEST":return BE(e,t);case"START_ASSIGNMENT":return ME(e,t);case"EXIT_ASSIGNMENT":return KE(e);case"CLEAR_TEST_IN_PROGRESS":return qE(e);case"FETCH_TEST_RESULTS":return JE(e,t);case"CLEAR_LOADED_STUDENT_DATA":return ZE(e);case S:return PE(e);case"RETURN_TO_COURSES":return ev(e);case k:return XE(e);default:return e}},nv={loadedCourseFormData:null,instructors:null,courseFormPage:1,loading:!1,successMessage:null,failMessage:null},av=function(e){return Cr(e,{loadedCourseFormData:null,instructors:null,courseFormPage:1,loading:!1,successMessage:null,failMessage:null})},rv=function(e){return Cr(e,{loading:!0})},ov=function(e,t){return Cr(e,{loading:!1,courseFormPage:1,loadedCourseFormData:null})},sv=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},iv=function(e){return Cr(e,{loading:!0})},cv=function(e){return Cr(e,{loading:!1})},lv=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},uv=function(e){return Cr(e,{loading:!0})},dv=function(e){return Cr(e,{loading:!1})},mv=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},pv=function(e){return Cr(e,{loading:!0})},fv=function(e,t){return Cr(e,{loading:!1})},gv=function(e,t){return Cr(e,{loading:!1})},bv=function(e){return Cr(e,{loading:!0})},hv=function(e,t){return Cr(e,{instructors:t.instructors,loading:!1})},Ev=function(e,t){return Cr(e,{loading:!1})},vv=function(e){return Cr(e,{loading:!0})},yv=function(e,t){return Cr(e,{successMessage:t.message,loading:!1})},Tv=function(e,t){return Cr(e,{failMessage:t.message,loading:!1})},Sv=function(e,t){return Cr(e,{loading:"noSpinner"===t.spinner})},kv=function(e,t){return Cr(e,{loadedCourseFormData:t.formData,loading:!1})},wv=function(e,t){return Cr(e,{loading:!1})},Ov=function(e,t){return Cr(e,{courseDetailId:t.courseId})},Cv=function(e){return Cr(e,{courseDetailId:null,loadedCategoryFormData:null})},xv=function(e){return Cr(e,{courseDetailId:null,loadedCategoryFormData:null})},Av=function(e,t){return Cr(e,{courseFormPage:t.page})},Fv=function(e){return Cr(e,{loadedCourseFormData:{}})},Dv=function(e){return Cr(e,{loadedCourseFormData:null})},_v=function(e){return Cr(e,{confirmingDeletingCourse:null})},Iv=function(e){return Cr(e,{successMessage:null,failMessage:null})},jv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nv,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_INSTRUCTORS_START":return bv(e);case"FETCH_INSTRUCTORS_SUCCESS":return hv(e,t);case"FETCH_INSTRUCTORS_FAIL":return Ev(e);case"FETCH_COURSE_START":return Sv(e,t);case"FETCH_COURSE_SUCCESS":return kv(e,t);case"FETCH_COURSE_FAIL":return wv(e);case"GRADE_COURSE_START":return vv(e);case"GRADE_COURSE_SUCCESS":return yv(e,t);case"GRADE_COURSE_FAIL":return Tv(e,t);case"CREATE_UPDATE_COURSE_START":return rv(e);case"CREATE_UPDATE_COURSE_SUCCESS":return ov(e);case"CREATE_UPDATE_COURSE_FAIL":return sv(e,t);case"UPDATE_COURSE_RESOURCES_START":return iv(e);case"UPDATE_COURSE_RESOURCES_SUCCESS":return cv(e);case"UPDATE_COURSE_RESOURCES_FAIL":return lv(e,t);case"TOGGLE_COURSE_STATE_START":return uv(e);case"TOGGLE_COURSE_STATE_SUCCESS":return dv(e);case"TOGGLE_COURSE_STATE_FAIL":return mv(e,t);case"DELETE_COURSE_START":return pv(e);case"DELETE_COURSE_SUCCESS":return fv(e);case"DELETE_COURSE_FAIL":return gv(e);case"SHOW_COURSE_DETAILS":return Ov(e,t);case"HIDE_COURSE_DETAILS":return Cv(e);case"RETURN_TO_COURSES":return xv(e);case"CLEAR_LOADED_INSTRUCTOR_DATA":return Dv(e);case"SET_COURSE_FORM_PAGE":return Av(e,t);case"SET_CREATE_COURSE_FORM":return Fv(e);case"CLEAR_INSTRUCTOR_MODAL_STATES":return _v(e);case k:return Iv(e);case S:return av(e);default:return e}},Rv={loadedLessonFormData:null,loading:!1,successMessage:null,failMessage:null},Nv=function(e){return Cr(e,{loadedLessonFormData:null,loading:!1,successMessage:null,failMessage:null})},Lv=function(e){return Cr(e,{loading:!0})},Pv=function(e,t){return Cr(e,{loading:!1,loadedLessonFormData:t.formData})},Bv=function(e,t){return Cr(e,{loading:!1})},Mv=function(e){return Cr(e,{loading:!0})},qv=function(e,t){return Cr(e,{loading:!1,loadedLessonFormData:null})},Uv=function(e,t){return Cr(e,{loading:!1})},Qv=function(e){return Cr(e,{loading:!0})},Wv=function(e,t){return Cr(e,{loading:!1})},Hv=function(e,t){return Cr(e,{loading:!1})},zv=function(e,t){return Cr(e,{loadedLessonFormData:t.initialValues})},Gv=function(e){return Cr(e,{successMessage:null,failMessage:null})},Vv=function(e){return Cr(e,{loadedLessonFormData:null})},$v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rv,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_LESSON_START":return Lv(e);case"FETCH_LESSON_SUCCESS":return Pv(e,t);case"FETCH_LESSON_FAIL":return Bv(e);case"CREATE_LESSON_START":return Mv(e);case"CREATE_LESSON_SUCCESS":return qv(e);case"CREATE_LESSON_FAIL":return Uv(e);case"DELETE_LESSON_START":return Qv(e);case"DELETE_LESSON_SUCCESS":return Wv(e);case"DELETE_LESSON_FAIL":return Hv(e);case"SET_CREATE_LESSON_FORM":return zv(e,t);case k:return Gv(e);case"CLEAR_LOADED_INSTRUCTOR_DATA":return Vv(e);case S:return Nv(e);default:return e}},Yv={openFolderPath:null,loading:!1,successMessage:null,failMessage:null},Jv=function(e){return Cr(e,{openFolderPath:null,loading:!1,successMessage:null,failMessage:null})},Kv=function(e){return Cr(e,{loading:!0})},Zv=function(e){return Cr(e,{loading:!1})},Xv=function(e,t){return Cr(e,{loading:!1})},ey=function(e,t){return Cr(e,{openFolderPath:t.folder})},ty=function(e){return Cr(e,{successMessage:null,failMessage:null})},ny=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yv,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODULES_CHANGE_START":return Kv(e);case"MODULES_CHANGE_SUCCESS":return Zv(e);case"MODULES_CHANGE_FAILED":return Xv(e);case"SET_INSTRUCTOR_FOLDER":return ey(e,t);case S:return Jv(e);case k:return ty(e);default:return e}},ay={loadedTestFormData:null,testFormSection:null,testGrading:null,studentGrading:null,initialGradeValues:null,testSection:null,testFormPage:1,loading:!1,successMessage:null,failMessage:null},ry=function(e){return Cr(e,{loadedTestFormData:null,testFormSection:null,testGrading:null,studentGrading:null,initialGradeValues:null,testSection:null,testFormPage:1,loading:!1,successMessage:null,failMessage:null})},oy=function(e,t){return Cr(e,{testSection:t.section})},sy=function(e){return Cr(e,{loading:!0})},iy=function(e,t){return Cr(e,{loadedTestFormData:t.formData,loading:!1})},cy=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},ly=function(e){return Cr(e,{loading:!0})},uy=function(e,t){return Cr(e,{loadedTestFormData:null,loading:!1,successMessage:t.message})},dy=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},my=function(e){return Cr(e,{loading:!0})},py=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},fy=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},gy=function(e){return Cr(e,{loading:!0})},by=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},hy=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},Ey=function(e){return Cr(e,{loading:!0})},vy=function(e,t){return Cr(e,{loading:!1,testGrading:t.test,studentGrading:t.student})},yy=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},Ty=function(e){return Cr(e,{loading:!0})},Sy=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},ky=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},wy=function(e,t){return Cr(e,{testFormSection:t.testSection})},Oy=function(e,t){return Cr(e,{testGrading:t.test,studentGrading:t.student})},Cy=function(e,t){return Cr(e,{initialGradeValues:t.gradeValues})},xy=function(e){return Cr(e,{testGrading:null,studentGrading:null})},Ay=function(e){return console.log("clearing data reducer"),Cr(e,{initialGradeValues:null,loadedTestFormData:null,testFormPage:1})},Fy=function(e){return Cr(e,{successMessage:null,failMessage:null})},Dy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ay,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_UPDATE_TEST_START":return ly(e);case"CREATE_UPDATE_TEST_SUCCESS":return uy(e,t);case"CREATE_UPDATE_TEST_FAIL":return dy(e,t);case"FETCH_TEST_START":return sy(e);case"FETCH_TEST_SUCCESS":return iy(e,t);case"FETCH_TEST_FAIL":return cy(e,t);case"DELETE_TEST_START":return my(e);case"DELETE_TEST_SUCCESS":return py(e,t);case"DELETE_TEST_FAIL":return fy(e,t);case"RESET_TEST_START":return gy(e);case"RESET_TEST_SUCCESS":return by(e,t);case"RESET_TEST_FAIL":return hy(e,t);case"GRADE_TEST_START":return Ty(e);case"GRADE_TEST_SUCCESS":return Sy(e,t);case"GRADE_TEST_FAIL":return ky(e,t);case"CLOSE_TEST_START":return Ey(e);case"CLOSE_TEST_SUCCESS":return vy(e,t);case"CLOSE_TEST_FAIL":return yy(e,t);case"SET_TEST_FORM_SECTION":return wy(e,t);case"SET_TEST_TO_GRADE":return Oy(e,t);case"SET_INITIAL_GRADE_VALUES":return Cy(e,t);case"CLEAR_TEST_TO_GRADE":return xy(e);case"CLEAR_LOADED_INSTRUCTOR_DATA":return Ay(e);case"SET_INSTRUCTOR_TEST_SECTION":return oy(e,t);case k:return Fy(e);case S:return ry(e);default:return e}},_y={loadedQuestionFormData:null,questionBank:null,questionEditing:null,creatingQuestionType:null,loading:!1,successMessage:null,failMessage:null},Iy=function(e){return Cr(e,{loadedQuestionFormData:null,questionBank:null,questionEditing:null,creatingQuestionType:null,loading:!1,successMessage:null,failMessage:null})},jy=function(e){return Cr(e,{loading:!0})},Ry=function(e,t){return Cr(e,{loading:!1,questionBank:t.questions})},Ny=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},Ly=function(e){return Cr(e,{loading:!0})},Py=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},By=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},My=function(e){return Cr(e,{loading:!0})},qy=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},Uy=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},Qy=function(e,t){return Cr(e,{questionEditing:t.question})},Wy=function(e,t){return Cr(e,{creatingQuestionType:t.questionType,loadedQuestionFormData:t.questionFormData})},Hy=function(e){return Cr(e,{questionBank:null})},zy=function(e){return Cr(e,{loadedQuestionFormData:null,questionEditing:null,creatingQuestionType:null})},Gy=function(e){return Cr(e,{successMessage:null,failMessage:null})},Vy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_UPDATE_QUESTION_START":return Ly(e);case"CREATE_UPDATE_QUESTION_SUCCESS":return Py(e,t);case"CREATE_UPDATE_QUESTION_FAIL":return By(e,t);case"FETCH_QUESTION_BANK_START":return jy(e);case"FETCH_QUESTION_BANK_SUCCESS":return Ry(e,t);case"FETCH_QUESTION_BANK_FAIL":return Ny(e,t);case"DELETE_QUESTION_START":return My(e);case"DELETE_QUESTION_SUCCESS":return qy(e,t);case"DELETE_QUESTION_FAIL":return Uy(e,t);case"CLEAR_LOADED_INSTRUCTOR_DATA":return zy(e);case"SET_QUESTION_FORM":return Wy(e,t);case"SET_QUESTION_EDITING":return Qy(e,t);case"RETURN_TO_COURSES":return Hy(e);case k:return Gy(e);case S:return Iy(e);default:return e}},$y={token:null,userId:null,error:null,loading:!1,authRedirectPath:"/",instructorLoggedIn:!1,studentLoggedIn:!1,adminLoggedIn:!1,formIsSignup:!1,formIsForgotPassword:!1,activeForm:null,loadedUser:null,userFirstName:null,userLastName:null,profilePicture:null,signupFormPage:1,successMessage:null,failMessage:null,sessionExpiration:null,refreshTokenExpiration:null},Yy=function(e,t){return Cr(e,{formIsSignup:"signin"!==t.form&&!e.formIsSignup,formIsForgotPassword:!1})},Jy=function(e){return Cr(e,{formIsForgotPassword:!e.formIsForgotPassword})},Ky=function(e){return Cr(e,{loading:!0})},Zy=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},Xy=function(e,t){return Cr(e,{failMessage:t.message,loading:!1})},eT=function(e){return Cr(e,{loading:!0})},tT=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},nT=function(e,t){return Cr(e,{failMessage:t.message,loading:!1})},aT=function(e){return Cr(e,{loading:!0})},rT=function(e,t){return Cr(e,{loading:!1,loadedUser:t.user})},oT=function(e,t){return Cr(e,{failMessage:t.message,loading:!1})},sT=function(e){return Cr(e,{loading:!0})},iT=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},cT=function(e,t){return Cr(e,{failMessage:t.message,loading:!1})},lT=function(e){return Cr(e,{loading:!0})},uT=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},dT=function(e,t){return Cr(e,{failMessage:t.message,loading:!1})},mT=function(e){return Cr(e,{loading:!0})},pT=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},fT=function(e,t){return Cr(e,{failMessage:t.message,loading:!1})},gT=function(e){return Cr(e,{loading:!0})},bT=function(e,t){return Cr(e,{loading:!1,successMessage:t.message})},hT=function(e,t){return Cr(e,{failMessage:t.message,loading:!1})},ET=function(e){return Cr(e,{})},vT=function(e,t){var n=t.authData,a=new Date(Date.now()+1e3*n.expirationDate);return console.log("token: ",n.token),n.token?(localStorage.setItem("token",n.token),localStorage.setItem("expirationDate",a),Cr(e,{successMessage:t.message,sessionExpiration:a||new Date(localStorage.getItem("expirationDate")),token:n.token?n.token:localStorage.getItem("token")})):(console.log("do not set token"),Cr(e,{successMessage:t.message}))},yT=function(e,t){return Cr(e,{failMessage:t.message})},TT=function(e){return Cr(e,{error:null,loading:!0})},ST=function(e,t){var n,a,r=t.authData;return localStorage.setItem("token",r.token),localStorage.setItem("userType",r.userType),localStorage.setItem("userId",r.userId),localStorage.setItem("userFirstName",r.firstName),localStorage.setItem("userLastName",r.lastName),localStorage.setItem("profilePicture",r.profilePicture),localStorage.setItem("i18nextLng",r.language),r.refreshTokenExpiration&&localStorage.setItem("refreshTokenExpiration",r.refreshTokenExpiration),a=r.expirationDate instanceof Date?r.expirationDate:new Date(Date.now()+1e3*r.expirationDate),localStorage.setItem("expirationDate",a),Cr(e,(n={studentLoggedIn:"student"===r.userType,instructorLoggedIn:"instructor"===r.userType,adminLoggedIn:"admin"===r.userType,error:null,loading:!1,token:r.token,userId:r.userId,userFirstName:r.firstName,userLastName:r.lastName,profilePicture:r.profilePicture},Object(po.a)(n,"error",null),Object(po.a)(n,"loading",!1),Object(po.a)(n,"sessionExpiration",a),Object(po.a)(n,"refreshTokenExpiration",parseInt(localStorage.getItem("refreshTokenExpiration"))),n))},kT=function(e,t){return Cr(e,{error:t.error,loading:!1,failMessage:t.message})},wT=function(e){return localStorage.removeItem("userFirstName"),localStorage.removeItem("userLastName"),localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),localStorage.removeItem("userType"),localStorage.removeItem("profilePicture"),localStorage.removeItem("refreshTokenExpiration"),Cr(e,{token:null,userId:null,instructorLoggedIn:!1,studentLoggedIn:!1,adminLoggedIn:!1,userFirstName:null,userLastName:null,profilePicture:null,refreshTokenExpiration:null,loadedUser:null,sessionExpiration:null})},OT=function(e,t){return Cr(e,{error:null,signupFormPage:t.page})},CT=function(e){return Cr(e,{successMessage:null,failMessage:null})},xT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_FORM":return Yy(e,t);case"CREATE_ACCOUNT_START":return Ky(e);case"CREATE_ACCOUNT_SUCCESS":return Zy(e,t);case"CREATE_ACCOUNT_FAIL":return Xy(e,t);case"UPDATE_ACCOUNT_START":return eT(e);case"UPDATE_ACCOUNT_SUCCESS":return tT(e,t);case"UPDATE_ACCOUNT_FAIL":return nT(e,t);case"AUTHENTICATION_START":return TT(e);case"AUTHENTICATION_SUCCESS":return ST(e,t);case"AUTHENTICATION_FAIL":return kT(e,t);case"FETCH_USER_START":return aT(e);case"FETCH_USER_SUCCESS":return rT(e,t);case"FETCH_USER_FAIL":return oT(e,t);case"CHANGE_PASSWORD_START":return sT(e);case"CHANGE_PASSWORD_SUCCESS":return iT(e,t);case"CHANGE_PASSWORD_FAIL":return cT(e,t);case"PASSWORD_RESET_LINK_START":return lT(e);case"PASSWORD_RESET_LINK_SUCCESS":return uT(e,t);case"PASSWORD_RESET_LINK_FAIL":return dT(e,t);case"ACCOUNT_VERIFICATION_START":return mT(e);case"ACCOUNT_VERIFICATION_SUCCESS":return pT(e,t);case"ACCOUNT_VERIFICATION_FAIL":return fT(e,t);case"RESEND_EMAIL_VERIFICATION_START":return gT(e);case"RESEND_EMAIL_VERIFICATION_SUCCESS":return bT(e,t);case"RESEND_EMAIL_VERIFICATION_FAIL":return hT(e,t);case"REFRESH_TOKEN_START":return ET(e);case"REFRESH_TOKEN_SUCCESS":return vT(e,t);case"REFRESH_TOKEN_FAIL":return yT(e,t);case S:return wT(e);case"SET_SIGNUP_FORM_PAGE":return OT(e,t);case"FORGOT_PASSWORD_PAGE":return Jy(e);case k:return CT(e);default:return e}},AT={selectedChatUser:null,loading:!1,editing:!1,successMessage:null,failMessage:null,students:null,notification:null,notificationTimeout:null,selectedCourse:null,tabLabels:[],tab:0,coursePanel:"modules",courses:null,modules:null,isModal:!1,modalDocument:null,modalType:null,notifications:null,width:600,sessionAlert:!1,configuration:null,uploading:!1},FT=function(e){return Cr(e,{selectedChatUser:null,loading:!1,editing:!1,successMessage:null,failMessage:null,students:null,notification:null,notificationTimeout:null,selectedCourse:null,tabLabels:[],tab:0,coursePanel:"modules",courses:null,modules:null,isModal:!1,modalDocument:null,modalType:null,notifications:null,width:600,sessionAlert:!1,configuration:null,uploading:!1})},DT=function(e,t){return Cr(e,{width:t.width})},_T=function(e,t){return Cr(e,{loading:t.loading})},IT=function(e,t){return Cr(e,{successMessage:t.message})},jT=function(e,t){return Cr(e,{failMessage:t.message})},RT=function(e,t){return console.log("spinner: ",t.spinner),Cr(e,{loading:"noSpinner"===t.spinner})},NT=function(e,t){return Cr(e,{courses:t.courses,loading:!1})},LT=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},PT=function(e){return Cr(e,{})},BT=function(e,t){return Cr(e,{notifications:t.notifications})},MT=function(e){return Cr(e,{})},qT=function(e){return Cr(e,{loading:!0})},UT=function(e,t){return Cr(e,{configuration:t.configuration,loading:!1})},QT=function(e){return Cr(e,{loading:!1})},WT=function(e){return Cr(e,{loading:!0})},HT=function(e,t){return Cr(e,{successMessage:t.message,loading:!1})},zT=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},GT=function(e){return Cr(e,{})},VT=function(e){return Cr(e,{})},$T=function(e){return Cr(e,{})},YT=function(e){return Cr(e,{})},JT=function(e){return Cr(e,{})},KT=function(e){return Cr(e,{})},ZT=function(e,t){return Cr(e,{selectedCourse:t.course})},XT=function(e,t){return Cr(e,{courses:t.courses})},eS=function(e,t){return Cr(e,{selectedChatUser:t.user})},tS=function(e,t){return Cr(e,{loading:"noSpinner"===t.spinner})},nS=function(e,t){return Cr(e,{students:t.students,loading:!1})},aS=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},rS=function(e,t){return Cr(e,{loading:"noSpinner"===t.spinner})},oS=function(e,t){return Cr(e,{loading:!1,modules:t.modules})},sS=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},iS=function(e){return Cr(e,{loading:!1,uploading:!0})},cS=function(e){return Cr(e,{loading:!1,uploading:!1})},lS=function(e,t){return Cr(e,{loading:!1,failMessage:t.message,uploading:!1})},uS=function(e){return Cr(e,{loading:!1})},dS=function(e){return Cr(e,{loading:!1})},mS=function(e,t){return Cr(e,{loading:!1,failMessage:t.message})},pS=function(e,t){return clearTimeout(e.notificationTimeout),Cr(e,{notification:t.notification,notificationTimeout:t.timeoutId})},fS=function(e,t){return Cr(e,{tabLabels:t.tabLabels})},gS=function(e,t){return Cr(e,{tab:0,editing:!1,selectedCourse:null,modules:null,students:null,selectedChatUser:null,modalType:null,modalDocument:null,isModal:!1})},bS=function(e,t){return Cr(e,{tab:t.tab})},hS=function(e,t){return Cr(e,{modules:null})},ES=function(e){return Cr(e,{editing:!0})},vS=function(e){return Cr(e,{editing:!1})},yS=function(e,t){return Cr(e,{isModal:!0,modalDocument:t.modalDocument,modalType:t.modalType})},TS=function(e){return Cr(e,{isModal:!1,modalDocument:null,modalType:null})},SS=function(e){return Cr(e,{successMessage:null,failMessage:null})},kS=function(e,t){return Cr(e,{coursePanel:t.panel})},wS=function(e,t){return Cr(e,{sessionAlert:"on"===t.alert})},OS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AT,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WIDTH":return DT(e,t);case"SET_CHAT_USER":return eS(e,t);case"SET_NOTIFICATION":return pS(e,t);case"FETCH_COURSES_START":return RT(e,t);case"FETCH_COURSES_SUCCESS":return NT(e,t);case"FETCH_COURSES_FAIL":return LT(e,t);case"FETCH_NOTIFICATIONS_START":return PT(e);case"FETCH_NOTIFICATIONS_SUCCESS":return BT(e,t);case"FETCH_NOTIFICATIONS_FAIL":return MT(e);case"MARK_AS_SEEN_START":return GT(e);case"MARK_AS_SEEN_SUCCESS":return VT(e);case"MARK_AS_SEEN_FAIL":return $T(e);case"UPDATE_ACTIVITY_START":return YT(e);case"UPDATE_ACTIVITY_SUCCESS":return JT(e);case"UPDATE_ACTIVITY_FAIL":return KT(e);case"FETCH_CONFIG_START":return qT(e);case"FETCH_CONFIG_SUCCESS":return UT(e,t);case"FETCH_CONFIG_FAIL":return QT(e);case"UPDATE_CONFIG_START":return WT(e);case"UPDATE_CONFIG_SUCCESS":return HT(e,t);case"UPDATE_CONFIG_FAIL":return zT(e,t);case"FETCH_STUDENTS_START":return tS(e,t);case"FETCH_STUDENTS_SUCCESS":return nS(e,t);case"FETCH_STUDENTS_FAIL":return aS(e,t);case"FETCH_MODULES_START":return rS(e,t);case"FETCH_MODULES_SUCCESS":return oS(e,t);case"FETCH_MODULES_FAIL":return sS(e,t);case"UPLOAD_FILE_START":return iS(e);case"UPLOAD_FILE_SUCCESS":return cS(e);case"UPLOAD_FILE_FAIL":return lS(e,t);case"DELETE_FILES_START":return uS(e);case"DELETE_FILES_SUCCESS":return dS(e);case"DELETE_FILES_FAIL":return mS(e,t);case"SET_COURSE":return ZT(e,t);case"SET_COURSES":return XT(e,t);case"SET_TAB_LABELS":return fS(e,t);case"SET_COURSE_PANEL":return kS(e,t);case"SET_TAB":return bS(e,t);case"SET_LOADING":return _T(e,t);case"SET_SUCCESS_MESSAGE":return IT(e,t);case"SET_FAIL_MESSAGE":return jT(e,t);case S:return FT(e);case"RETURN_TO_COURSES":return gS(e);case"HIDE_COURSE_DETAILS":return hS(e);case"SET_EDITING":return ES(e);case"CANCEL_EDITING":return vS(e);case"OPEN_MODAL":return yS(e,t);case"CLOSE_MODAL":return TS(e);case"SET_SESSION_ALERT":return wS(e,t);case k:return SS(e);default:return e}},CS=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,xS=Object(u.a)(),AS=Object(l.c)({studentCourse:AE,studentLesson:NE,studentTest:tv,instructorCourse:jv,instructorLesson:$v,instructorModules:ny,instructorTest:Dy,instructorQuestion:Vy,authentication:xT,common:OS,form:mp.a}),FS=Object(l.e)(AS,CS(Object(l.a)(xS)));xS.run(lE);var DS=r.a.createElement(c.a,{store:FS},r.a.createElement(i.a,null,r.a.createElement(lp,null)));s.a.render(DS,document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");up?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):dp(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):dp(t,e)}))}}()},122:function(e,t,n){e.exports={TextEditor:"QuestionForm_TextEditor__u_r-v",AudioAlignment:"QuestionForm_AudioAlignment__3BWyX",TextField:"QuestionForm_TextField__2Sda1",flexPositioningEven:"QuestionForm_flexPositioningEven__2KLVv",QuestionCustomizationContainer:"QuestionForm_QuestionCustomizationContainer__22hEj",questionFormList:"QuestionForm_questionFormList__1M4KE",PreviewContainer:"QuestionForm_PreviewContainer__2wPZw",Background:"QuestionForm_Background__ez7mU",CorrectAnswer:"QuestionForm_CorrectAnswer__2C-Al",button:"QuestionForm_button__8Jwdx",FullWidthImg:"QuestionForm_FullWidthImg__2mnOy",Inline:"QuestionForm_Inline__FRbqS",center:"QuestionForm_center__28Lc8",TestTypeRadio:"QuestionForm_TestTypeRadio__1ecGu",ListHorizontalDisplay:"QuestionForm_ListHorizontalDisplay__w7l8y",TestFormList:"QuestionForm_TestFormList__3N75r",greenIcon:"QuestionForm_greenIcon__3WzQM",redIcon:"QuestionForm_redIcon__2Ywa9",CorrectAnswerHighlight:"QuestionForm_CorrectAnswerHighlight__6kSke",BlankPreview:"QuestionForm_BlankPreview__3ZErm",InputField:"QuestionForm_InputField__2KEI9",FullWidth:"QuestionForm_FullWidth__xmZJy",InputFieldBottomMargin:"QuestionForm_InputFieldBottomMargin__g_527",SelectField:"QuestionForm_SelectField__16Pop",Pointer:"QuestionForm_Pointer__3kPMX",audioPlayerPreview:"QuestionForm_audioPlayerPreview__3tdXT",Editor:"QuestionForm_Editor__fcayJ"}},135:function(e,t,n){e.exports={button:"Details_button__H1dJe",GreenText:"Details_GreenText__29PXB",RedText:"Details_RedText__dpBJZ",Inline:"Details_Inline__1KejH",center:"Details_center__Qicvc",TestTypeRadio:"Details_TestTypeRadio__1TUd1",ListHorizontalDisplay:"Details_ListHorizontalDisplay__1FpWz",TestFormList:"Details_TestFormList__1ZZlk",Editor:"Details_Editor__35mGQ",greenIcon:"Details_greenIcon__3BewG",redIcon:"Details_redIcon__28pog",CorrectAnswerHighlight:"Details_CorrectAnswerHighlight__2DKso",BlankPreview:"Details_BlankPreview__2KqKr",InputField:"Details_InputField__3mdUP",FullWidth:"Details_FullWidth__3xqK9",InputFieldBottomMargin:"Details_InputFieldBottomMargin__tkSTv",SelectField:"Details_SelectField__PZG1J",Pointer:"Details_Pointer__2VEup",audioPlayerPreview:"Details_audioPlayerPreview__13OGC",SlideBackground:"Details_SlideBackground__31hdt"}},189:function(e,t,n){e.exports={Button:"Button_Button__3kAHe",HalfWidth:"Button_HalfWidth__1ZGYD",FullWidth:"Button_FullWidth__28dxb",Success:"Button_Success__q8Jxu",Danger:"Button_Danger__3tneE",Error:"Button_Error__1GeJ2",SubmitForm:"Button_SubmitForm__34uhs",ModalButton:"Button_ModalButton__3yerH",ModalError:"Button_ModalError__2CEj1"}},199:function(e,t,n){e.exports={Inline:"Switch_Inline__RQ38f",Margin:"Switch_Margin__utN1S",MarginNoLabel:"Switch_MarginNoLabel__2O171",noMargin:"Switch_noMargin__122ck"}},200:function(e,t,n){e.exports={pdfCanvas:"PdfViewer_pdfCanvas__2nu4D",flexPositioningEven:"PdfViewer_flexPositioningEven__1Lffj",pageNumberDisplay:"PdfViewer_pageNumberDisplay__qHBe7"}},232:function(e,t,n){e.exports={SlideCustomizationContainer:"LessonForm_SlideCustomizationContainer__1urpL",TextEditor:"LessonForm_TextEditor__YGRGl",FormList:"LessonForm_FormList__rwmsr"}},233:function(e,t,n){e.exports={Modal:"Modal_Modal__368lP",Header:"Modal_Header__1OeOH",Main:"Modal_Main__apcqF",Large:"Modal_Large__3ueMt",Regular:"Modal_Regular__2CAei"}},234:function(e,t,n){e.exports={alert:"Alert_alert__1Yf1Y",withDrawer:"Alert_withDrawer__15icv",noDrawer:"Alert_noDrawer__2YNGS",success:"Alert_success__2W1VH",fail:"Alert_fail__qUkBJ"}},266:function(e,t,n){},297:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=297},330:function(e,t,n){e.exports={editor:"Editor_editor__3QZEV",options:"Editor_options__RJriu",textLabel:"Editor_textLabel__12kzt",errorText:"Editor_errorText__2LjDS",yellowBorder:"Editor_yellowBorder__1w6Gr"}},331:function(e,t,n){e.exports={Loader:"Spinner_Loader__11uV7",load2:"Spinner_load2__1AAoL",loader:"Spinner_loader__1LFws",load1:"Spinner_load1__3vMtP",ldsGrid:"Spinner_ldsGrid__Wy-QV",Backdrop:"Spinner_Backdrop__1jzmB"}},38:function(e,t,n){e.exports={QuestionCustomizationContainer:"TestForm_QuestionCustomizationContainer__1B5i8",flexPositioningSpaceBetween:"TestForm_flexPositioningSpaceBetween__kdtqw",flexPositioningEnd:"TestForm_flexPositioningEnd__39gfc",AudioAlignment:"TestForm_AudioAlignment__2xVul",TextField:"TestForm_TextField__DjIDS",TextEditor:"TestForm_TextEditor__1VHzk",PreviewContainer:"TestForm_PreviewContainer__1YEM_",CorrectAnswer:"TestForm_CorrectAnswer__25di7",button:"TestForm_button__1y61_",FullWidthImg:"TestForm_FullWidthImg__1kaKf",Inline:"TestForm_Inline__MsvQq",center:"TestForm_center__1TCAd",TestTypeRadio:"TestForm_TestTypeRadio__2Hne_",ListHorizontalDisplay:"TestForm_ListHorizontalDisplay__-8t6U",TestFormList:"TestForm_TestFormList__3NFzO",greenIcon:"TestForm_greenIcon__JFFFl",redIcon:"TestForm_redIcon__1BnKX",CorrectAnswerHighlight:"TestForm_CorrectAnswerHighlight__3vZHd",BlankPreview:"TestForm_BlankPreview__3XprO",InputField:"TestForm_InputField__2kwvJ",FullWidth:"TestForm_FullWidth__1FYZJ",InputFieldBottomMargin:"TestForm_InputFieldBottomMargin__1OX1E",SelectField:"TestForm_SelectField__1FMX6",Pointer:"TestForm_Pointer__36bgT",audioPlayerPreview:"TestForm_audioPlayerPreview__2N6du",errorText:"TestForm_errorText__1QR7G",Editor:"TestForm_Editor__3WwHp"}},402:function(e,t,n){e.exports={notification:"Notification_notification__ipYkd",withDrawer:"Notification_withDrawer__29NLM",noDrawer:"Notification_noDrawer__WZVKG",success:"Notification_success__1-5eR",chat:"Notification_chat__1_4NL",fail:"Notification_fail__3kH7Z"}},405:function(e,t,n){e.exports={Auth:"PasswordReset_Auth__L_g1D",errorMessage:"PasswordReset_errorMessage__CWI2X",ButtonContainer:"PasswordReset_ButtonContainer__1Oubf"}},406:function(e,t,n){e.exports={Auth:"AccountVerification_Auth__2_bn0",errorMessage:"AccountVerification_errorMessage__23fiL",ButtonContainer:"AccountVerification_ButtonContainer__3n6ZC"}},407:function(e,t,n){e.exports={NavigationItem:"NavigationItem_NavigationItem__3vFow",active:"NavigationItem_active__1mqXe"}},408:function(e,t,n){e.exports={spacing:"TagInput_spacing__1d-u8",inputContainer:"TagInput_inputContainer__1rikX"}},409:function(e,t,n){e.exports={alert:"RefreshSessionAlert_alert__32i4H",refreshBlocked:"RefreshSessionAlert_refreshBlocked__2D5rP"}},41:function(e,t,n){e.exports={PositionIcon:"ReviewTest_PositionIcon__2yKoz",QuestionContainer:"ReviewTest_QuestionContainer__2Dj8X",QuestionBorderCorrect:"ReviewTest_QuestionBorderCorrect__2edHg",QuestionBorderInCorrect:"ReviewTest_QuestionBorderInCorrect__3h2ek",SummaryContainer:"ReviewTest_SummaryContainer__1EKrv",SectionMarks:"ReviewTest_SectionMarks__3W6wL",GreenText:"ReviewTest_GreenText__3WqYk",RedText:"ReviewTest_RedText__1brV_",YellowText:"ReviewTest_YellowText__BW_KK",YellowBackground:"ReviewTest_YellowBackground__1R_fT",button:"ReviewTest_button__1xHQ9",Inline:"ReviewTest_Inline__2v8Ui",center:"ReviewTest_center__3x7XD",TestTypeRadio:"ReviewTest_TestTypeRadio__TSExH",ListHorizontalDisplay:"ReviewTest_ListHorizontalDisplay__ubm4C",TestFormList:"ReviewTest_TestFormList__3PY1j",Editor:"ReviewTest_Editor__3cif7",greenIcon:"ReviewTest_greenIcon__34rvW",redIcon:"ReviewTest_redIcon__1u5c6",CorrectAnswerHighlight:"ReviewTest_CorrectAnswerHighlight__14Pn4",BlankPreview:"ReviewTest_BlankPreview__nyrjb",InputField:"ReviewTest_InputField__3rkhx",FullWidth:"ReviewTest_FullWidth__1pczB",InputFieldBottomMargin:"ReviewTest_InputFieldBottomMargin__B2y0C",SelectField:"ReviewTest_SelectField__3A-jb",Pointer:"ReviewTest_Pointer__1XBXl",audioPlayerPreview:"ReviewTest_audioPlayerPreview__uLkPN",SlideBackground:"ReviewTest_SlideBackground__3g0ji"}},45:function(e){e.exports=JSON.parse('{"es":{"languages":{"english":"Ingl\xe9s","spanish":"Espa\xf1ol","russian":"Ruso","arabic":"\xc1rabe","italian":"Italiano","french":"Franc\xe9s"}}}')},46:function(e){e.exports=JSON.parse('{"en":{"languages":{"english":"English","spanish":"Spanish","russian":"Russian","arabic":"Arabic","italian":"Italian","french":"French"}}}')},47:function(e,t,n){e.exports={PositionIcon:"GradeTestForm_PositionIcon__3tEUX",QuestionContainer:"GradeTestForm_QuestionContainer__1QBii",SectionMarks:"GradeTestForm_SectionMarks__2v940",GreenText:"GradeTestForm_GreenText__3bK8t",RedText:"GradeTestForm_RedText__2WSx3",YellowBackground:"GradeTestForm_YellowBackground__5V6jI",button:"GradeTestForm_button__3-Rp9",Inline:"GradeTestForm_Inline__EzUF6",center:"GradeTestForm_center__GfdOG",TestTypeRadio:"GradeTestForm_TestTypeRadio__3fFY5",ListHorizontalDisplay:"GradeTestForm_ListHorizontalDisplay__3D7Ps",TestFormList:"GradeTestForm_TestFormList__1zXu0",Editor:"GradeTestForm_Editor__MFD0s",greenIcon:"GradeTestForm_greenIcon__2fEJa",redIcon:"GradeTestForm_redIcon__30O2n",CorrectAnswerHighlight:"GradeTestForm_CorrectAnswerHighlight__27prd",BlankPreview:"GradeTestForm_BlankPreview__2TjaK",InputField:"GradeTestForm_InputField__V0OKB",FullWidth:"GradeTestForm_FullWidth__24idF",InputFieldBottomMargin:"GradeTestForm_InputFieldBottomMargin__fauyA",SelectField:"GradeTestForm_SelectField__GIrnf",Pointer:"GradeTestForm_Pointer__3GN8X",audioPlayerPreview:"GradeTestForm_audioPlayerPreview__1R4w3",SlideBackground:"GradeTestForm_SlideBackground__oek-M"}},501:function(e,t,n){},544:function(e,t,n){e.exports=n.p+"static/media/course-default.8bddad59.png"},550:function(e){e.exports=JSON.parse('{"es":{"drawer":{"courses":"Cursos","account":"Cuenta","logout":"Cerrar sesi\xf3n","modules":"Modulos","lessons":"Lecciones","assignments":"Tareas","tests":"Pruebas","grades":"Calificar","chat":"Mensajes","students":"Estudiantes","progressReport":"Informe de progreso","test":"Prueba","resources":"Recursos","config":"Configuraci\xf3n"},"tabBar":{"courses":"Cursos","newcourse":"Nuevo curso","editcourse":"Editar curso","yourcourses":"Sus courses","allcourses":"Todos los cursos","lessons":"Lecciones","newlesson":"Nueva lecci\xf3n","editlesson":"Editar lecci\xf3n","assignments":"Tareas","newassignment":"Nueva tarea","editassignment":"Editar tarea","completedassignments":"Tareas completadas","tests":"Pruebas","newtest":"Nueva prueba","edittest":"Editar prueba","completedtests":"Pruebas completadas","questionbank":"Preguntas","contacts":"Contactos","chat":"Chat","students":"Estudiantes","enrollmentrequests":"Solicitudes de inscripci\xf3n"}}}')},551:function(e){e.exports=JSON.parse('{"en":{"drawer":{"courses":"Courses","account":"Account","logout":"Logout","modules":"Modules","lessons":"Lessons","assignments":"Assignments","tests":"Tests","grades":"Grade","chat":"Chat","students":"Students","progressReport":"Progress report","test":"Test","resources":"Resources","config":"Settings"},"tabBar":{"courses":"Courses","newcourse":"New course","editcourse":"Edit course","yourcourses":"Your courses","allcourses":"All courses","lessons":"Lessons","newlesson":"New lesson","editlesson":"Edit lesson","assignments":"Assignments","newassignment":"New assignment","editassignment":"Edit assignment","completedassignments":"Completed assignments","tests":"Tests","newtest":"New test","edittest":"Edit test","completedtests":"Completed tests","questionbank":"Question bank","contacts":"Contacts","chat":"Chat","students":"Students","enrollmentrequests":"Enrollment requests"}}}')},552:function(e){e.exports=JSON.parse('{"es":{"assignments":"Tareas","lessons":"Lecciones","tests":"Pruebas","modules":"Modulos","subjects":"Sujetos","topics":"Temas","module":"Modulo","subject":"Sujeto","topic":"Tema","buttons":{"addModule":"A\xf1adir modulo","addSubject":"A\xf1adir sujeto","addTopic":"A\xf1adir tema"}}}')},553:function(e){e.exports=JSON.parse('{"en":{"assignments":"Assignments","lessons":"Lessons","tests":"Tests","modules":"Modules","subjects":"Subjects","topics":"Topics","module":"Module","subject":"Subject","topic":"Topic","buttons":{"addModule":"Add module","addSubject":"Add subject","addTopic":"Add topic"}}}')},554:function(e){e.exports=JSON.parse('{"es":{"module":"Modulo","topics":"Temas","subjects":"Sujetos","lessons":"Lessons","tests":"Pruebas","assignments":"Tareas","quiz":"Mini test","midterm":"Examen de mitad de per\xedodo","final":"Examen final"}}')},555:function(e){e.exports=JSON.parse('{"en":{"module":"Module","topics":"Topics","subjects":"Subjects","lessons":"Lessons","tests":"Tests","assignments":"Assignments","quiz":"Quiz","midterm":"Midterm","final":"Final"}}')},556:function(e){e.exports=JSON.parse('{"es":{"signIn":"Iniciar sesi\xf3n","signUp":"Registrarse","email":"Correo electr\xf3nico","password":"Contrase\xf1a","confirmPassword":"Confirmar contrase\xf1a","accountType":"Tipo de cuenta","dob":"Fecha de nacimiento","language":"Idioma","firstName":"Nombre","lastName":"Apellido","forgotPassword":"\xbfHa olvidado su contrase\xf1a?","enterEmailToResetPassword":"Ingrese el correo electr\xf3nico asociado con la cuenta, se enviar\xe1 un enlace para restablecer su contrase\xf1a a su correo electr\xf3nico.","resetPassword":"Restablecer la contrase\xf1a","student":"Estudiante","instructor":"Profesor","accountVerification":"Verificaci\xf3n de la cuenta","alreadyVerified":"La cuenta ya est\xe1 verificada, puede iniciar sesi\xf3n","errors":{"makeSelection":"Debe hacer una selecci\xf3n","required":"Requerido","enterFirstName":"Debe ingresar su nombre","enterLastName":"Debe ingresar su apellido","enterFirstNameOnlyAlpha":"Su nombre solo debe contener letras y espacios","enterLastNameOnlyAlpha":"Su apellido solo debe contener letras y espacios","passwordMismatched":"Las contrase\xf1as no coinciden","passwordConditions":"La contrase\xf1a debe contener al menos 8 caracteres y debe contener al menos 1 de los siguientes caracteres: 1 may\xfascula, 1 min\xfascula, 1 car\xe1cter especial (!, @, #, $,%, ^, &, *) y 1 car\xe1cter num\xe9rico","enterDateOfBirth":"Debe ingresar su fecha de nacimiento","enterValidEmail":"Debe ingresar un correo electr\xf3nico v\xe1lido","studentNoAccount":"No se encontr\xf3 una cuenta de estudiante con este correo electr\xf3nico","instructorNoAccount":"No se encontr\xf3 una cuenta de profesor con este correo electr\xf3nico","notVerifiedCheckEmail":"Su cuenta a\xfan no ha sido verificada, revise su correo electr\xf3nico","wrongPassword":"Contrase\xf1a incorrecta","alreadyVerified":"Su cuenta ya est\xe1 verificada, puede iniciar la sesi\xf3n","emailTaken":"Este correo electr\xf3nico ya est\xe1 en uso"},"buttons":{"next":"Siguiente","back":"Atr\xe1s","submit":"Enviar","switchToSignIn":"Cambiar para iniciar sesi\xf3n","switchToSignUp":"Cambiar para registrarse","resendEmail":"Reenviar correo electr\xf3nico de verificaci\xf3n de cuenta","returnToSignIn":"Volver para iniciar sesi\xf3n","sendLink":"Enviar enlace","verifyAccount":"Verificar Cuenta"}}}')},557:function(e){e.exports=JSON.parse('{"en":{"signIn":"Sign in","signUp":"Sign up","email":"E-mail","password":"Password","confirmPassword":"Confirm Password","accountType":"Account type","dob":"Date of birth","language":"Language","firstName":"First name","lastName":"Last name","forgotPassword":"Forgot password?","resetPassword":"Reset password","student":"Student","instructor":"Instructor","accountVerification":"Account verification","alreadyVerified":"The account is already verified, you can login","enterEmailToResetPassword":"Enter the email associated with the account, a link to reset your password will be sent to your email.","errors":{"makeSelection":"You must make a selection","required":"Required","enterFirstName":"You must enter your first name","enterLastName":"You must enter your last name","enterFirstNameOnlyAlpha":"Your first name must only contain letters and spaces","enterLastNameOnlyAlpha":"Your last name must only contain letters and spaces","passwordMismatched":"Password mismatched","passwordConditions":"Password must contain atleast 8 characters and must contain atleast 1 of the following characters: 1 uppercase, 1 lowercase, 1 special character(!,@,#,$,%,^,&,*), and 1 numeric character","enterDateOfBirth":"You must enter your date of birth\'","enterValidEmail":"Enter a valid e-mail","studentNoAccount":"No student account found with this e-mail","instructorNoAccount":"No instructor account found with this e-mail","notVerifiedCheckEmail":"Your account has not yet been verified, check your e-mail","wrongPassword":"Wrong password","alreadyVerified":"Your account is already verified, you can sign in","emailTaken":"This e-mail is already taken"},"buttons":{"next":"Next","back":"Back","submit":"Submit","switchToSignIn":"Switch to sign in","switchToSignUp":"Switch to sign up","resendEmail":"Resend account verification e-mail","returnToSignIn":"Return to sign in","sendLink":"Send link","verifyAccount":"Verify account"}}}')},558:function(e){e.exports=JSON.parse('{"es":{"firstName":"Nombre","lastName":"Apellido","email":"Correo electr\xf3nico","dob":"Fecha de nacimiento","id":"Identificaci\xf3n","password":"Contrase\xf1a","currentPassword":"Contrase\xf1a actual","newPassword":"Nueva contrase\xf1a","confirmPassword":"Confirma la nueva contrase\xf1a","documentType":"Tipo de documento","governmentId":"Identificaci\xf3n de gobierno","birthCertificate":"Certificado de nacimiento","transcript":"Boleta de calificaciones","proofLegalStatus":"Prueba de estatus legal","cv":"Curriculum vitae (cv)","proofTestScores":"Prueba de puntajes de ex\xe1menes","letterReference":"Carta de referencia","statementPurpose":"Declaraci\xf3n de prop\xf3sito","other":"Otra","accountType":"Tipo de cuenta","forgotPassword":"\xbfHa olvidado su contrase\xf1a?","enterEmailToResetPassword":"Ingrese el correo electr\xf3nico asociado con la cuenta, se enviar\xe1 un enlace para restablecer su contrase\xf1a a su correo electr\xf3nico.","resetPassword":"Restablecer la contrase\xf1a","passwordReset":"Restablecimiento de contrase\xf1a","student":"Estudiante","instructor":"Profesor","errors":{"required":"Requerido","enterFirstName":"Debe ingresar su nombre","enterLastName":"Debe ingresar su apellido","enterFirstNameOnlyAlpha":"Su nombre solo debe contener letras y espacios","enterLastNameOnlyAlpha":"Su apellido solo debe contener letras y espacios","enterDateOfBirth":"Debe ingresar su fecha de nacimiento","makeSelection":"Debe hacer una selecci\xf3n","enterValidEmail":"Debe ingresar un correo electr\xf3nico v\xe1lido","requiredOrSelectKeepPassword":"Requerido o seleccione mantener la contrase\xf1a actual","passwordConditions":"La contrase\xf1a debe contener al menos 8 caracteres y debe contener al menos 1 de los siguientes caracteres: 1 may\xfascula, 1 min\xfascula, 1 car\xe1cter especial (!, @, #, $,%, ^, &, *) y 1 car\xe1cter num\xe9rico","passwordMismatched":"Las contrase\xf1as no coinciden","selectDocAndType":"Seleccione un documento y un tipo o haga clic en eliminar documento","selectPdfWordJpg":"Seleccione un archivo pdf, documento de Word o imagen jpeg para cargar o haga clic en eliminar documento","docMustBeLessThan":"El documento seleccionado debe tener menos de","mustSelectDocType":"Debe seleccionar un tipo de documento","correctTheFormAtDocument":"Corrija el formulario en el documento","selectDocTypeAndDoNotExceed":"seleccione un documento y un tipo y aseg\xfarese de que el tama\xf1o del archivo no exceda","correctForm":"Corrija el formulario para continuar"},"buttons":{"uploadProfilePicture":"Subir foto de perfil","updateProfilePicture":"Actualizar foto de perfil","clearProfilePicture":"Eliminar foto de perfil","documents":"Documentos","saveChanges":"Guardar cambios","edit":"Editar","next":"Siguiente","back":"Atr\xe1s","uploadDocument":"Subir documento","updateDocument":"Actualizar documento","addDocument":"A\xf1adir documento","removeDocument":"Eliminar documento","keepPassword":"Mantener la contrase\xf1a actual","setNewPassword":"Establecer nueva contrase\xf1a"}}}')},559:function(e){e.exports=JSON.parse('{"en":{"firstName":"First name","lastName":"Last name","email":"E-mail","dob":"Date of birth","password":"Password","currentPassword":"Current password","newPassword":"New password","confirmPassword":"Confirm new password","id":"ID","documentType":"Document type","governmentId":"Government issued ID","birthCertificate":"Birth certificate","transcript":"Transcript","proofLegalStatus":"Proof of legal status","cv":"Curriculum vitae (cv)","proofTestScores":"Proof of test scores","letterReference":"Letter of reference","statementPurpose":"Statement of purpose","other":"Other","accountType":"Account type","forgotPassword":"Forgot password?","resetPassword":"Reset password","passwordReset":"Password reset","student":"Student","instructor":"Instructor","enterEmailToResetPassword":"Enter the email associated with the account, a link to reset your password will be sent to your email.","errors":{"required":"Required","enterFirstNameOnlyAlpha":"Your first name must only contain letters and spaces","enterLastNameOnlyAlpha":"Your last name must only contain letters and spaces","enterFirstName":"You must enter your first name","enterLastName":"You must enter your last name","makeSelection":"You must make a selection","enterDateOfBirth":"You must enter your date of birth\'","enterValidEmail":"Enter a valid e-mail","requiredOrSelectKeepPassword":"Required or select keep current password","passwordMismatched":"Password mismatched","passwordConditions":"Password must contain atleast 8 characters and must contain atleast 1 of the following characters: 1 uppercase, 1 lowercase, 1 special character(!,@,#,$,%,^,&,*), and 1 numeric character","selectDocAndType":"Select a document and a type or click on remove document","selectPdfWordJpg":"Select a pdf file, word document or jpeg image to upload or click on remove document","docMustBeLessThan":"The selected document must be less than","mustSelectDocType":"You must select a document type","correctTheFormAtDocument":"Correct the form at document","selectDocTypeAndDoNotExceed":"select a document and a type and make sure that the file size does not exceed","correctForm":"Correct the form to continue"},"buttons":{"uploadProfilePicture":"Upload profile picture","updateProfilePicture":"Update profile picture","clearProfilePicture":"Clear profile picture","documents":"Documents","saveChanges":"Save changes","next":"Next","back":"Back","edit":"Edit","uploadDocument":"Upload document","updateDocument":"Update document","addDocument":"Add document","removeDocument":"Remove document","keepPassword":"Keep current password","setNewPassword":"Set new password"}}}')},560:function(e){e.exports=JSON.parse('{"es":{"courseCustomization":"Personalizaci\xf3n del curso","courseThumbnail":"Miniatura del curso","importantDates":"Fechas importantes","weeklyOfficeHours":"Horas de oficina semanales","specificDateOfficeHours":"Horas de oficina en fechas espec\xedficas","coursePrerequisites":"Cursos de requisitos previos","courseSyllabus":"Programa del curso","instructor":"Profesor","errors":{"required":"Requerido","noDuplicateNames":"Ya tienes un curso con ese nombre","enterCourseName":"Debes ingresar un nombre de curso","studentCapacityGreaterThanZero":"La capacidad de los estudiantes debe ser superior a 0","studentCapacityInteger":"La capacidad de los estudiantes debe ser un n\xfamero entero","studentCapacityGreaterThanOrEqualTo":"La capacidad de los estudiantes debe ser mayor o igual a la cantidad de estudiantes inscritos.","laterDate":"Debe ser una fecha o hora posterior","startDateNotBeforeEndDate":"La fecha de finalizaci\xf3n debe ser posterior a la fecha de inicio","courseStartDateNotBeforeEnrollmentStartDate":"El curso no puede comenzar antes de la fecha de inicio de la inscripci\xf3n","courseDropDateNotBeforeEnrollmentStartDate":"La fecha de abandono del curso no puede ser anterior a la fecha de inicio de la inscripci\xf3n","courseDropDateNotAfterCourseEndDate":"La fecha de abandono del curso no puede ser posterior a la fecha de finalizaci\xf3n del curso","enrollmentStartAndEndDateNotAfterCourseEndDate":"La fecha de inicio y finalizaci\xf3n de la inscripci\xf3n no puede ser posterior a la fecha de finalizaci\xf3n del curso","testsHasAvailableOnDate":"Una de las pruebas o tareas de este curso tiene una fecha disponible el","testsHasDueDate":"Una de las pruebas o tareas de este curso tiene una fecha de vencimiento el","testsHasGradeReleaseDate":"Una de las pruebas o tareas de este curso tiene una fecha de publicaci\xf3n de calificaciones el","lessonsHasAvailableOnDate":"Una de las lecciones de este curso tiene fecha disponible el","fallsOutsideCourseDuration":" que est\xe1 fuera de la duraci\xf3n del curso","isBeforeStartDateOfCourse":" que es anterior a la fecha de inicio del curso","enterDateOrRemove":"Ingrese una fecha o elimine la fecha","enterDateBeforeCourseEndDate":"Ingrese una fecha anterior a la fecha de finalizaci\xf3n del curso","enterDateAfterCourseStartDate":"Ingrese una fecha posterior a la fecha de inicio del curso","startTimeEndTimeCannotBeSame":"La hora de inicio y la hora de finalizaci\xf3n no pueden ser iguales","startTimeCannotBeAfterEndTime":"La hora de inicio no puede ser posterior a la hora de finalizaci\xf3n","enterCompleteTimeInterval":"Ingrese un intervalo de tiempo completo","enterTimeIntervalOrUncheck":"Ingrese un intervalo de tiempo o desmarque","correctForm":"Corrija el formulario para continuar"},"buttons":{"update":"Actualizar","publish":"Publicar","clearImage":"Elimina imagen","addDate":"A\xf1adir fecha","removeDate":"Eliminar fecha","next":"Siguiente","back":"Atr\xe1s"},"fields":{"courseName":"Nombre del curso","courseActive":"Curso activo","taughtIn":"Se imparte en","maxStudents":"Max estudiantes","enrollmentPeriod":"Per\xedodo de inscripci\xf3n","courseDuration":"Duraci\xf3n del curso","deadlineToDrop":"Fecha l\xedmite para abandonar el curso","date":"Fecha","timeRange":"Intervalo de tiempo","daysOfWeek":"D\xedas de la semana","chooseImage":"Elige imagen","officeHours":"Hourario de officina","weeklyOfficeHours":{"mondayOfficeHours":"Horario de oficina lunes","tuesdayOfficeHours":"Horario de oficina martes","wednesdayOfficeHours":"Horario de oficina mi\xe9rcoles","thursdayOfficeHours":"Horario de oficina jueves","fridayOfficeHours":"Horario de oficina viernes","saturdayOfficeHours":"Horario de oficina s\xe1bado","sundayOfficeHours":"Horario de oficina domingo"}},"days":{"monday":"Lunes","tuesday":"Martes","wednesday":"Mi\xe9rcoles","thursday":"Jueves","friday":"Viernes","saturday":"S\xe1bado","sunday":"Domingo"}}}')},561:function(e){e.exports=JSON.parse('{"en":{"courseCustomization":"Course customization","courseThumbnail":"Course thumbnail","importantDates":"Important dates","weeklyOfficeHours":"Weekly office hours","specificDateOfficeHours":"Office hours on specific dates","coursePrerequisites":"Course prerequisites","courseSyllabus":"Course syllabus","instructor":"Instructor","errors":{"required":"required","noDuplicateNames":"You already have a course with that name","enterCourseName":"You must enter a course name","studentCapacityGreaterThanZero":"Student capacity must be greater than 0","studentCapacityInteger":"Student capacity must be an integer","studentCapacityGreaterThanOrEqualTo":"Student capacity must be greater than or equal to the number of students enrolled","laterDate":"Must be a later date or time","startDateNotBeforeEndDate":"End date must be after start date","courseStartDateNotBeforeEnrollmentStartDate":"Course cannot start before enrollment start date","courseDropDateNotBeforeEnrollmentStartDate":"Course drop date cannot be before enrollment start date","courseDropDateNotAfterCourseEndDate":"Course drop date cannot be after course end date","enrollmentStartAndEndDateNotAfterCourseEndDate":"Enrollment start and end date cannot be after course end date","testsHasAvailableOnDate":"One of the tests or assignments in this course has an available on date on","testsHasDueDate":"One of the tests or assignments in this course has a due date on","testsHasGradeReleaseDate":"One of the tests or assignments in this course has a grade release date on","lessonsHasAvailableOnDate":"One of the lessons in this course has an available on date on","fallsOutsideCourseDuration":" which falls outside the course duration","isBeforeStartDateOfCourse":" which is before the start date of the course","enterDateOrRemove":"Enter a date or remove date","enterDateBeforeCourseEndDate":"Enter a date that is before the course end date","enterDateAfterCourseStartDate":"Enter a date that is after the course start date","startTimeEndTimeCannotBeSame":"Start time and end time can\'t be the same","startTimeCannotBeAfterEndTime":"Start time cannot be after end time","enterCompleteTimeInterval":"You didn\'t enter a complete time interval","enterTimeIntervalOrUncheck":"Enter a time interval or uncheck","correctForm":"Correct the form to continue"},"buttons":{"update":"Update","publish":"Publish","clearImage":"Clear image","addDate":"Add date","removeDate":"Remove date","next":"Next","back":"Back"},"fields":{"courseName":"Course name","courseActive":"Course active","taughtIn":"Taught in","maxStudents":"Student capacity","enrollmentPeriod":"Enrollment period","courseDuration":"Course duration","deadlineToDrop":"Deadline to drop course","date":"Date","timeRange":"Time interval","daysOfWeek":"Days of the week","chooseImage":"Choose image","weeklyOfficeHours":{"mondayOfficeHours":"Monday office hours","tuesdayOfficeHours":"Tuesday office hours","wednesdayOfficeHours":"Wednesday office hours","thursdayOfficeHours":"Thursday office hours","fridayOfficeHours":"Friday office hours","saturdayOfficeHours":"Saturday office hours","sundayOfficeHours":"Sunday office hours"}},"days":{"monday":"Monday","tuesday":"Tuesday","wednesday":"Wednesday","thursday":"Thursday","friday":"Friday","saturday":"Saturday","sunday":"Sunday"}}}')},562:function(e){e.exports=JSON.parse('{"es":{"assignment":"Tarea","test":"Prueba","testCustomization":"Personalizaci\xf3n de prueba","assignmentCustomization":"Personalizaci\xf3n de tarea","otherTestsWeights":"Evaluaci\xf3n del curso (otras pruebas y tareas)","points":"puntos","importantDates":"Fechas importantes","marksDistribution":"Distribuci\xf3n de marcas","assignmentResources":"Recursos de tarea","testResources":"Recursos de prueba","text":"Escrito","fillblanksText":"Escritura","audio":"Audio","question":"Pregunta","answer":"Respuesta","blank":"Vac\xedo","writeAnswers":"Escribe algunas respuestas correctas y incorrectas a la pregunta.","selectCorrectAnswers":"Seleccione las respuestas correctas","selectQuestion":"Seleccione una pregunta preestablecida","textFromQuestionbank":"Obtenga escritura de preguntas preestablecidas","preview":"Avance","customizeAnswers":"Personaliza sus respuestas","correctAnswer":"Respuesta correcta","incorrectOption":"Opci\xf3n incorrecta","incorrectAnswerOptions":"Opciones de respuesta incorrectas","worth":"Vale","currentTest":"Prueba actual","currentAssignment":"Tarea actual","others":"Otras","ofTheCourse":"del curso","mcSection":"Secci\xf3n opci\xf3n multiple","essaySection":"Secci\xf3n ensayo","speakingSection":"Secci\xf3n oral","fillblanksSection":"Secci\xf3n llenar los espacios vac\xedos","fillblanksSectionDefaultText":"<p>Resalta un <mark class=\'marker-yellow\'>fragmento de texto</mark> para crear un vac\xedo.</p>","errors":{"required":"Requerido","noDuplicateTestNames":"Ya existe una prueba con este nombre en este curso","noDuplicateAssignmentNames":"Ya existe una tarea con este nombre en este curso","correctForm":"Corrija el formulario para continuar","mustBeBetweenZeroAndThousand":"Debe ser un n\xfamero mayor que 0 y menor o igual que 1000","mustBeGreaterThanZeroAndLessThanHundred":"Debe ser un n\xfamero mayor que 0 y menor que 100","mustBeBetweenOneAndHundred":"Debe ser un n\xfamero mayor o igual a 1 y menor o igual que 100","mustBeGreaterThanOrEqualToOneAndLessThanHundred":"Debe ser un n\xfamero mayor o igual a 1 y menor que 100","specifyPassGrade":"Especifique una calificaci\xf3n aprobatoria o apague la aprobaci\xf3n requerida","intGreaterThanZero":"Debe ingresar un n\xfamero entero mayor que 0","requiredOrDisableTimedTest":"Requerido o desactiva prueba cronometrada","onlyOneFinal":"Solo puede haber 1 examen final","greaterThanZero":"Debe ser mayor que 0","addToHundred":"Las porcentajes de las secciones deben sumar 100 o permite una distribuci\xf3n igual de porcentajes","selectSections":"Seleccione una o m\xe1s secciones","laterDate":"Debe ser una fecha o hora posterior","disableLateSubmission":"Requerido o desactiva el env\xedo tard\xedo","availableOnDateInCourseDuration":"La fecha disponible debe estar dentro de la duraci\xf3n del curso","dueDateInCourseDuration":"La fecha de vencimiento debe estar dentro de la duraci\xf3n del curso","gradeReleaseDateAfterCourseStart":"La fecha de publicaci\xf3n de la calificaci\xf3n debe ser posterior a la fecha de inicio del curso.","availableOnDateBeforeDueDate":"La fecha de disponibilidad debe ser anterior a la fecha de vencimiento","availableOnDateBeforeCloseDate":"La fecha de disponibilidad debe ser anterior a la fecha de cierre","dueDateAfterAvailableOnDate":"La fecha de vencimiento debe ser posterior a la fecha de disponibilidad","gradeReleaseDateAfterAvailableOnDate":"La fecha de publicaci\xf3n de la calificaci\xf3n debe ser posterior a la fecha de disponibilidad","availableOnDateBeforeGradeReleaseDate":"La fecha de disponibilidad debe ser anterior a la fecha de publicaci\xf3n de la calificaci\xf3n","gradeReleaseDateAfterDueDate":"La fecha de publicaci\xf3n de calificaciones debe ser posterior a la fecha l\xedmite","gradeReleaseDateAfterCloseDate":"La fecha de publicaci\xf3n de calificaciones debe ser posterior a la fecha de cierre","dueDateBeforeGradeReleaseDate":"La fecha de vencimiento debe ser anterior a la fecha de publicaci\xf3n de calificaciones","closeDateBeforeGradeReleaseDate":"La fecha de cierre debe ser anterior a la fecha de publicaci\xf3n de calificaciones","docCannotExceed":"El documento no puede exceder","audioCannotExceed":"El tama\xf1o del archivo de audio no puede exceder","answersCantBeEmpty":"Los campos de respuesta no pueden estar vac\xedos","atleastTwoAnswers":"Se requieren al menos 2 respuestas","atleastOneUnchecked":"Al menos 1 respuesta debe permanecer sin marcar","selectAtleastOneAnswer":"Seleccione al menos 1 respuesta correcta","answersDifferent":"Sus respuestas deben ser todas diferentes","requiredOrMakeAudioQuestion":"Requerido o haz una pregunta de audio","requiredOrMakeTextQuestion":"Requerido o haz una pregunta escrito","requiredOrDisableAudioAnswer":"Requerido o desactiva respuesta de audio","incorrectAnswersCantBeSameAsCorrectAnswer":"Las respuestas incorrectas no pueden ser iguales a la respuesta correcta","atLeastOneIncorrectAnswer":"Proporcione al menos 1 opci\xf3n incorrecta o desactive las respuestas seleccionables","noDuplicateIncorrectAnswers":"Hay respuestas incorrectas duplicadas","requiredAudioOrDisableAudio":"Grabe o cargue un audio o desactiva el audio","blankIsReserved":"-BLANK- es una palabra clave reservada y no se puede utilizar","createAtleastOneBlank":"Crea al menos 1 vac\xedo","studentTakingTest":"Un estudiante ha comenzado a tomar la prueba, debe salir del formulario y restablecer la prueba para realizar cambios.","studentTakingAssignment":"Un estudiante ha comenzado a tomar la tarea, debe salir del formulario y restablecer la prueba para realizar cambios.","resetTestToMakeChanges":"Restablece la prueba para realizar cambios. Ya lo han intentado 1 o m\xe1s estudiantes","resetAssignmentToMakeChanges":"Restablece la tarea para realizar cambios. Ya lo han intentado 1 o m\xe1s estudiantes"},"buttons":{"publish":"Publicar","update":"Actualizar","addAnswer":"Agregar respuesta","addQuestion":"Agregar pregunta","removeQuestion":"Eliminar pregunta","selectAudioFile":"Seleccionar archivo de audio","selectDoc":"Seleccionar un documento"},"fields":{"testName":"Nombre de la prueba","assignmentName":"Nombre de la tarea","publish":"Publicar","testWeight":"Porcentaje de la prueba","assignmentWeight":"Porcentaje de la tarea","blockLessons":"Bloque lecciones del curso","timedTest":"Prueba cronometrada","testTime":"Tiempo de prueba (minutos)","testType":"Tipo de prueba","quiz":"Test","midterm":"Examen de mitad de per\xedodo","final":"Examen final","notes":"Notas para el estudiante","notesPlaceholder":"Por ejemplo temas de la prueba, libros y paginas que tienen que leer..","passingRequired":"Aprobaci\xf3n requerida para completar el curso","passingGrade":"Nota aprobatoria (%)","allowLateSubmission":"Permitir env\xedo tard\xedo","dailyPenalty":"Penalizaci\xf3n diaria por retraso (%)","lateDaysAllowed":"D\xedas retrasados permitidos","assignmentSections":"Secciones de tarea","testSections":"Secciones de prueba","mc":"Opci\xf3n multiple","essay":"Ensayo","speaking":"Oral","fillblanks":"Llenar los espacios vac\xedos","equallyDistributeMarks":"Distribuya equitativamente las marcas en las secciones","sectionWeights":"Porcentaje de cada secci\xf3n (%)","availableOnDate":"Fecha de disponibilidad","gradeReleaseDate":"Fecha de publicaci\xf3n de calificaciones","dueDate":"Fecha de vencimiento","closeDate":"Fecha de cierre","section":"Secci\xf3n","atBeginningOfAssignment":"Al comienzo de la tarea","atBeginningOfTest":"Al comienzo de la prueba","useUploadDoc":"Usar documento cargado (pdf, word, o jpeg)","useUploadAudio":"Usar audio cargado","selectCorrectAnswer":"Seleccione las respuestas correcta(s)","selectCorrectAnswerInline":"Seleccione la respuesta","option":"opci\xf3n","solution":"Soluci\xf3n","marks":"Marcas","selectableAnswer":"Respuesta seleccionable","audioQuestion":"Pregunta audio","audioAnswer":"Respuesta audio"}}}')},563:function(e){e.exports=JSON.parse('{"en":{"assignment":"Assignment","test":"Test","testCustomization":"Test customization","assignmentCustomization":"Assignment customization","otherTestsWeights":"Weight distribution of other tests and assignments","points":"points","importantDates":"Important dates","marksDistribution":"Marks distribution","assignmentResources":"Assignment resources","testResources":"Test resources","text":"Text","fillblanksText":"Text","audio":"Audio","question":"Question","answer":"answer","blank":"Blank","writeAnswers":"Write some correct and incorrect answers to the question","selectCorrectAnswers":"Select the correct answer(s)","selectQuestion":"Select a pre-made question","textFromQuestionbank":"Get text from question bank","preview":"Preview","customizeAnswers":"Customize your answers","correctAnswer":"Correct answer","incorrectAnswerOptions":"Incorrect answer options","incorrectOption":"Incorrect option","worth":"Worth","currentTest":"Current test","currentAssignment":"Current assignment","others":"Others","ofTheCourse":"of the course","mcSection":"Multiple-choice section","essaySection":"Essay section","speakingSection":"Speaking section","fillblanksSection":"Fill-in-the-blanks section","fillblanksSectionDefaultText":"<p>Highlight a <mark class=\'marker-yellow\'>piece of text</mark> to create a blank.</p>","errors":{"required":"Required","noDuplicateTestNames":"There is already a test with this name in this course","noDuplicateAssignmentNames":"There is already an assignment with this name in this course","correctForm":"Correct the form to continue","mustBeBetweenZeroAndThousand":"Must be a number greater than 0 and less than or equal to 1000","mustBeBetweenZeroAndHundred":"Must be a number greater than 0 and less than or equal to 100","mustBeGreaterThanZeroAndLessThanThousand":"Must be a number greater than 0 and less than 1000","mustBeBetweenOneAndHundred":"Must be a number greater than or equal to 1 and less than or equal to 100","mustBeGreaterThanOnendLessThanHundred":"Must be a number greater than or equal to 1 and less than 100","specifyPassGrade":"Specify a passing grade or switch off passing required","intGreaterThanZero":"Must enter an integer greater than 0","requiredOrDisableTimedTest":"Required or disable timed test","onlyOneFinal":"There can only be 1 final exam","greaterThanZero":"Must be greater than 0","addToHundred":"Section weights must add up to 100 or enable equal weight distribution","selectSections":"Select one or more sections","laterDate":"Must be a later date or time","disableLateSubmission":"Required or disable late submission","availableOnDateInCourseDuration":"The available on date must be within the course duration","dueDateInCourseDuration":"The due date must be within the course duration","gradeReleaseDateAfterCourseStart":"The grade release date must be after the course start date","availableOnDateBeforeDueDate":"The available on date must be before the due date","availableOnDateBeforeCloseDate":"The available on date must be before the close date","dueDateAfterAvailableOnDate":"The due date must be after the available on date","gradeReleaseDateAfterAvailableOnDate":"The grade release date must be after the available on date","availableOnDateBeforeGradeReleaseDate":"The available on date must be before the grade release date","gradeReleaseDateAfterDueDate":"The grade release date must be after the due date","gradeReleaseDateAfterCloseDate":"The grade release date must be after the close date","dueDateBeforeGradeReleaseDate":"The due date must be before the grade release date","closeDateBeforeGradeReleaseDate":"The close date must be before the grade release date","docCannotExceed":"The document cannot exceed","audioCannotExceed":"The audio file size cannot exceed","answersCantBeEmpty":"Answer fields can\'t be empty","atleastTwoAnswers":"At least 2 answers are required","atleastOneUnchecked":"At least 1 answer must remain unchecked","selectAtleastOneAnswer":"Select at least 1 correct answer","answersDifferent":"Your answers must all be different","requiredOrMakeAudioQuestion":"Required or make an audio question","requiredOrMakeTextQuestion":"Required or make a text question instead","requiredOrDisableAudioAnswer":"Required or disable audio answer","incorrectAnswersCantBeSameAsCorrectAnswer":"Incorrect answers cannot be the same as the correct answer","atLeastOneIncorrectAnswer":"Provide at least 1 incorrect option or disable selectable answers","noDuplicateIncorrectAnswers":"There are duplicate incorrect answers","requiredAudioOrDisableAudio":"Record or upload an audio or disable audio","blankIsReserved":"-BLANK- is a reserved keyword and cannot be used","createAtleastOneBlank":"Create at least 1 blank","studentTakingTest":"A student has has started to take the test you must exit the form and reset the test to make any changes","studentTakingAssignment":"A student has has started to take the test you must exit the form and reset the assignment to make any changes","resetTestToMakeChanges":"Reset the test to make changes, it has already been attempted by 1 or more students","resetAssignmentToMakeChanges":"Reset the assignment to make changes, it has already been attempted by 1 or more students"},"buttons":{"publish":"Publish","update":"Update","addAnswer":"Add answer","addQuestion":"Add question","removeQuestion":"Remove question","selectAudioFile":"Select audio file","selectDoc":"Select a document"},"fields":{"testName":"Test name","assignmentName":"Assignment name","publish":"Publish","testWeight":"Test weight","assignmentWeight":"Assignment weight","blockLessons":"Block lessons during test","timedTest":"Timed test","testTime":"Test time (minutes)","testType":"Test type","quiz":"Quiz","midterm":"Midterm exam","final":"Final exam","notes":"Notes for the student","notesPlaceholder":"For example topics that will be on the test, books/pages that are required to be read..","passingRequired":"Passing required to complete course","passingGrade":"Passing grade (%)","allowLateSubmission":"Allow late submission","dailyPenalty":"Daily penalty (%)","lateDaysAllowed":"Late days allowed","assignmentSections":"Assignment sections","testSections":"Test sections","mc":"Multiple-choice","essay":"Essay","speaking":"Speaking","fillblanks":"Fill-in-the-blanks","equallyDistributeMarks":"Equally distribute marks across sections","sectionWeights":"Section weights (%)","availableOnDate":"Available on date","gradeReleaseDate":"Grade release date","dueDate":"Due date","closeDate":"Close date","section":"Section","atBeginningOfAssignment":"At beginning of assignment","atBeginningOfTest":"At beginning of test","useUploadDoc":"Use uploaded document (pdf, word, or jpeg)","useUploadAudio":"Use uploaded audio","selectCorrectAnswer":"Select the correct answer(s)","option":"option","solution":"Solution","marks":"Marks","selectableAnswer":"Selectable answer","audioQuestion":"Audio question","audioAnswer":"Audio answer","selectCorrectAnswerInline":"Select the correct answer"}}}')},564:function(e){e.exports=JSON.parse('{"es":{"question":"Pregunta","writeAnswers":"Escribe algunas respuestas correctas y incorrectas a la pregunta.","selectCorrectAnswers":"Seleccione las respuestas correcta(s)","option":"opci\xf3n","fillblanksSectionDefaultText":"<p>Resalta un <mark class=\'marker-yellow\'>fragmento de texto</mark> para crear un vac\xedo.</p>","pieceOfText":"fragmento de texto","english":"ingl\xe9s","errors":{"required":"Requerido","answersCantBeEmpty":"Los campos de respuesta no pueden estar vac\xedos","atleastTwoAnswers":"Se requieren al menos 2 respuestas","atleastOneUnchecked":"Al menos 1 respuesta debe permanecer sin marcar","selectAtleastOneAnswer":"Seleccione al menos 1 respuesta correcta","answersDifferent":"Sus respuestas deben ser todas diferentes","requiredOrMakeAudioQuestion":"Requerido o haz una pregunta de audio","requiredOrMakeTextQuestion":"Requerido o haz una pregunta escrito","audioCannotExceed":"El tama\xf1o del archivo de audio no puede exceder","requiredOrDisableAudioAnswer":"Requerido o desactiva respuesta de audio","correctForm":"Corrija el formulario para continuar"},"buttons":{"updateQuestion":"Actualizar la pregunta","saveQuestion":"Guardar la pregunta","addAnswer":"Agregar respuesta","removeQuestion":"Eliminar pregunta"},"fields":{"difficulty":"Dificultad","language":"Idioma","tags":"Etiquetas","easy":"Facil","medium":"Media","hard":"Dif\xedcil","audioQuestion":"Pregunta audio","audioAnswer":"Respuesta audio","solution":"Soluci\xf3n"}}}')},565:function(e){e.exports=JSON.parse('{"en":{"question":"Question","writeAnswers":"Write some correct and incorrect answers to the question","selectCorrectAnswers":"Select the correct answer(s)","option":"option","fillblanksSectionDefaultText":"<p>Highlight a <mark class=\'marker-yellow\'>piece of text</mark> to create a blank.</p>","pieceOfText":"piece of text","english":"english","errors":{"required":"Required","answersCantBeEmpty":"Answer fields can\'t be empty","atleastTwoAnswers":"At least 2 answers are required","atleastOneUnchecked":"At least 1 answer must remain unchecked","selectAtleastOneAnswer":"Select at least 1 correct answer","answersDifferent":"Your answers must all be different","requiredOrMakeAudioQuestion":"Required or make an audio question","requiredOrMakeTextQuestion":"Required or make a text question instead","audioCannotExceed":"The audio file size cannot exceed","requiredOrDisableAudioAnswer":"Required or disable audio answer","correctForm":"Correct the form to continue"},"buttons":{"updateQuestion":"Update question","saveQuestion":"Save question","addAnswer":"Add answer","removeQuestion":"Remove question"},"fields":{"difficulty":"Difficulty","language":"Language","tags":"Tags","easy":"Easy","medium":"Medium","hard":"Hard","audioQuestion":"Audio question","audioAnswer":"Audio answer","solution":"Solution"}}}')},566:function(e){e.exports=JSON.parse('{"es":{"assignmentResources":"Recursos de tarea","testResources":"Recursos de prueba","assignmentgrade":"Calificacione de la tarea","testgrade":"Calificacione de la prueba","sectionResources":"Recursos de la secci\xf3n","sectionWorth":"Esta secci\xf3n vale ","multiplechoicesection":"Secci\xf3n opci\xf3n multiple","essaysection":"Secci\xf3n ensayo","speakingsection":"Secci\xf3n oral","fillintheblankssection":"Secci\xf3n llenar los espacios vac\xedos","multipleChoice":"Opci\xf3n multiple","essay":"Ensayo","speaking":"Oral","fillInBlanks":"Llenar los espacios vac\xedos","question":"Pregunta","blank":"Vac\xedo","studentAnsweredCorrectly":"Respondi\xf3  correctamente","correctAnswer":"Respuesta correcta","correctAnswerPlural":"Respuesta correctas","studentAnswer":"Respuesta del estudiante","solution":"Soluci\xf3n","latePenalty":"Penalizaci\xf3n por retraso","passed":"Aprobada","failed":"Fall\xf3","summary":"Resumen","dayLateSingular":"d\xeda retrasado","dayLatePlural":"d\xedas retrasados","assignmentGrade":"Calificacione de la tarea","testGrade":"Calificacione de la prueba","gradeAdjustedForWeights":"Las calificaciones se ajustan seg\xfan las porcentajes de las secciones.","gradeAdjustedForWeightsAndLatePenalty":"Las calificaciones se ajustan seg\xfan las porcentajes de las secciones y la penalizaci\xf3n por retraso.","noGradeReleaseDateWarning":"Dado que no ha especificado una fecha de publicaci\xf3n de calificaciones, el estudiante podr\xe1 ver las calificaciones inmediatamente despu\xe9s de publicarlas.","gradeRelaseDatePassedWarning":"Dado que la fecha de publicaci\xf3n de calificaciones ha pasado, el estudiante podr\xe1 ver sus calificaciones inmediatamente despu\xe9s de que las publique.","gradeReleaseDateNotYetPassedWarning":"Una vez que se publican las calificaciones, el estudiante podr\xe1 ver las calificaciones y revisar las respuestas el .","oneAnswerIncorrect":"1 respuesta fue seleccionada incorrectamente","oneAnswerMissing":"Se deber\xeda haber seleccionado 1 respuesta correcta pero no fue","xAnswersSelectedIncorrectly":"2 respuestas fueron seleccionadas incorrectamente","xAnswersMissing":"2 respuestas deber\xedan haber sido seleccionadas pero no fueron","noAnswerProvided":"El estudiante no respondi\xf3","studentSelected":"seleccion\xf3","incorrectOptionOne":"Opci\xf3n incorrecta 1","errors":{"required":"Requerido","finalGradeBetweenZeroAndHundred":"La calificaci\xf3n final debe estar entre 0 y 100","latePenaltyBetweenZeroAndHundred":"Penalizaci\xf3n por retraso debe estar entre 0 y 100","valueCantBeNegative":"El valor no puede ser negativo","valueCantBeGreaterThan":"El valor no puede ser mayor que ","correctForm":"Corrija el formulario para continuar","provideGrade":"Proporcionar una calificaci\xf3n o desactiva el cambio de calificaci\xf3n"},"buttons":{"playStudentsAnswer":"Escuche la respuesta del estudiante","playQuestion":"Escuche la pregunta","playSolution":"Escuche la soluci\xf3n","recordFeedback":"Grabar comentario","saveGradesExit":"Guardar calificaciones y salir","postGrades":"Publicar calificaciones","updateGrades":"Actualizar calificaciones"},"fields":{"correctUsingTextEditor":"Corregir usando el editor de texto","marks":"Marcas","feedback":"Comentario","additionalNotesForStudent":"Comentario","overrideGrade":"Cambiar calificacione","gradeAdjustment":"Ajuste de calificacione","gradeAdjustmentExplanation":"Explicaci\xf3n del ajuste de calificaci\xf3n","agree":"Estoy de acuerdo"}}}')},567:function(e){e.exports=JSON.parse('{"en":{"assignmentResources":"Assignment resources","testResources":"Test resources","assignmentgrade":"Assignment grade","testgrade":"Test grade","sectionResources":"Section resources","multiplechoicesection":"Multiple-choice section","essaysection":"Essay section","speakingsection":"Speaking section","fillintheblankssection":"Fill-in-the-blanks section","multipleChoice":"Multiple-choice","essay":"Essay","speaking":"Speaking","fillInBlanks":"Fill-in-the-blanks","sectionWorth":"This section is worth ","question":"Question","blank":"Blank","correctAnswer":"Correct answer","correctAnswerPlural":"Correct answers","studentAnswer":"Student answer","studentAnsweredCorrectly":"Answered correctly","solution":"Solution","latePenalty":"Late penalty","passed":"Passed","failed":"Failed","summary":"Summary","dayLateSingular":"day late","dayLatePlural":"days late","assignmentGrade":"Assignment grade","testGrade":"Test grade","gradeAdjustedForWeights":"Grade adjusted for section weights","gradeAdjustedForWeightsAndLatePenalty":"Grade adjusted for section weights and late penalty","noGradeReleaseDateWarning":"Since you have not specified a grade release date, the student will be able to see the grades immediatly after you post them.","gradeRelaseDatePassedWarning":"Since the grade release date has passed, the student will be able to see his or her grades immediately after you post them.","gradeReleaseDateNotYetPassedWarning":"Once the grades are posted, the student will able to see the grades and review the answers on","oneAnswerIncorrect":"1 answer was selected incorrectly","oneAnswerMissing":"1 correct answer should have been selected but wasn\'t","xAnswersSelectedIncorrectly":"answers were selected incorrectly","xAnswersMissing":"answers should have been selected but weren\'t","noAnswerProvided":"No answer was provided by the student","studentSelected":"student selected","incorrectOptionOne":"Incorrect Option 1","errors":{"required":"Required","finalGradeBetweenZeroAndHundred":"Final grade must be between 0 and 100","latePenaltyBetweenZeroAndHundred":"Late penalty must be between 0 and 100","valueCantBeNegative":"Value can\'t be negative","valueCantBeGreaterThan":"Value can\'t be greater than","provideGrade":"Provide a grade or disable grade override","correctForm":"Correct the form to continue"},"buttons":{"playStudentsAnswer":"Play student\'s answer","playQuestion":"Play question","playSolution":"Play solution","recordFeedback":"Record feedback","saveGradesExit":"Save grades and exit","postGrades":"Post grades","updateGrades":"Update grades"},"fields":{"correctUsingTextEditor":"Correct using text editor","marks":"Marks","feedback":"Feedback","additionalNotesForStudent":"Additional notes for student","overrideGrade":"Override grade","gradeAdjustment":"Grade adjustment","gradeAdjustmentExplanation":"Grade adjustment explanation","agree":"I agree"}}}')},568:function(e){e.exports=JSON.parse('{"es":{"slide":"Diapositivo","errors":{"required":"Requerido","noDuplicateLessonNames":"Ya existe una lecci\xf3n con este nombre en este curso","availableOnDateInCourseDuration":"La fecha disponible debe estar dentro de la duraci\xf3n del curso","uploadOrDisable":"Sube un video o desactiva video diapositivo","correctForm":"Corrija el formulario para continuar","audioCannotExceed":"El tama\xf1o del archivo de audio no puede exceder","videoCannotExceed":"El tama\xf1o del archivo de video no puede exceder"},"buttons":{"publish":"Publicar","update":"Actualizar","addSlide":"A\xf1adir diapositivo","removeSlide":"Eliminar diapositivo","selectAudioFile":"Seleccionar archivo de audio","selectVideoFile":"Seleccionar archivo de video"},"fields":{"lessonName":"Nombre de la lecci\xf3n","publish":"Publicar","availableOnDate":"Fecha de disponibilidad","videoContent":"Video diapositivo","audioFromFile":"Audio de un archivo"}}}')},569:function(e){e.exports=JSON.parse('{"en":{"slide":"Slide","errors":{"required":"Required","noDuplicateLessonNames":"There is already a lesson with this name in this course","availableOnDateInCourseDuration":"The available on date must be within the course duration","audioCannotExceed":"The audio file size cannot exceed","videoCannotExceed":"The video file size cannot exceed","uploadOrDisable":"Upload a video or disable video content","correctForm":"Correct the form to continue"},"buttons":{"publish":"Publish","update":"Update","addSlide":"Add slide","removeSlide":"Remove slide","selectAudioFile":"Select audio file","selectVideoFile":"Select video file"},"fields":{"lessonName":"Lesson name","publish":"Publish","availableOnDate":"Available on date","videoContent":"Video from file","audioFromFile":"Audio from file"}}}')},570:function(e){e.exports=JSON.parse('{"en":{"multiplechoicesection":"Multiple-choice section","essaysection":"Essay section","speakingsection":"Speaking section","fillintheblankssection":"Fill-in-the-blanks section","assignmentResources":"Assignment resources","testResources":"Test resources","question":"Question","lessThanFiveMin":"Less than 5 minutes left, go over your answers and save your test","lessThanOneMin":"Less than 1 minute left, save your test","testClosesAt":"Test closes at {{time}}","errors":{"questionsUnanswered":"You have left some questions unanswered","playQuestion":"Play question"},"buttons":{"save":"Save","exit":"Exit","submit":"submit","submitAnyway":"Submit Anyway","questions":"Questions","nextSection":"Next section","previousSection":"Previous section","recordAnswer":"Record answer","playQuestion":"Play question"},"fields":{"selectAnswer":"Select the correct answer"}}}')},571:function(e){e.exports=JSON.parse('{"es":{"multiplechoicesection":"Secci\xf3n opci\xf3n multiple","essaysection":"Secci\xf3n ensayo","speakingsection":"Secci\xf3n oral","fillintheblankssection":"Secci\xf3n llenar los espacios vac\xedos","assignmentResources":"Recursos de tarea","testResources":"Recursos de prueba","question":"Pregunta","lessThanFiveMin":"Quedan menos de 5 minutos, repase sus respuestas y guarde su prueba","lessThanOneMin":"Queda menos de 1 minuto, guarde su prueba","testClosesAt":"La prueba cierra a {{laOrLas}} {{time}}","errors":{"questionsUnanswered":"Has dejado algunas preguntas sin respuesta","playQuestion":"Escuchar pregunta"},"buttons":{"save":"Guardar","exit":"Salir","submit":"Enviar","submitAnyway":"Enviar de todos modos","questions":"Preguntas","nextSection":"Siguiente secci\xf3n","previousSection":"Secci\xf3n previa","recordAnswer":"Grabar respuesta","playQuestion":"Escuchar pregunta"},"fields":{"selectAnswer":"Selecciona la respuesta correcta"}}}')},572:function(e){e.exports=JSON.parse('{"es":{"sectionWorth":"Esta secci\xf3n vale ","testResources":"Recursos de prueba","assignmentResources":"Recursos de tarea","sectionResources":"Recursos de la secci\xf3n","multiplechoicesection":"Secci\xf3n opci\xf3n multiple","essaysection":"Secci\xf3n ensayo","speakingsection":"Secci\xf3n oral","fillintheblankssection":"Secci\xf3n llenar los espacios vac\xedos","question":"Pregunta","blank":"Vac\xedo","correctAnswer":"Respuesta correcta","correctAnswerPlural":"Respuesta correctas","oneAnswerMissing":"Se deber\xeda haber seleccionado 1 respuesta correcta pero no fue","xAnswersSelectedIncorrectly":"2 respuestas fueron seleccionadas incorrectamente","xAnswersMissing":"2 respuestas deber\xedan haber sido seleccionadas pero no fueron","noAnswerProvided":"No respondi\xf3","marks":"Marcas","feedback":"Comentario","solution":"Soluci\xf3n","yourAnswer":"Su respuesta","latePenalty":"Penalizaci\xf3n por retraso","passed":"Aprobada","failed":"Fall\xf3","summary":"Resumen","gradeAdjustedForWeights":"Las calificaciones se ajustan seg\xfan las porcentajes de las secciones.","gradeAdjustedForWeightsAndLatePenalty":"Las calificaciones se ajustan seg\xfan las porcentajes de las secciones y la penalizaci\xf3n por retraso.","instructorAdjustedGrade":"La calificaci\xf3n fue ajustada","gradeAdjustmentExplanation":"Explicaci\xf3n del ajuste de calificaci\xf3n","assignmentgrade":"La calificaci\xf3n de la tarea","testGrade:":"La calificaci\xf3n de la prueba","selectCorrectAnswer":"Selecciona la respuesta correcta","buttons":{"playFeedback":"Escuchar comentarios","playAnswer":"Escuchar la respuesta correcta","playQuestion":"Escuchar pregunta","noAnswer":"Sin respuesta","playYourAnswer":"Escuchar su respuesta","next":"Siguiente","back":"Atr\xe1s"}}}')},573:function(e){e.exports=JSON.parse('{"en":{"sectionWorth":"This section is worth ","testResources":"Test resources","assignmentResources":"Assignment resources","sectionResources":"Section resources","multiplechoicesection":"Multiple-choice section","essaysection":"Essay section","speakingsection":"Speaking section","fillintheblankssection":"Fill-in-the-blanks section","question":"Question","blank":"Blank","correctAnswer":"Correct answer","correctAnswerPlural":"Correct answers","oneAnswerMissing":"1 correct answer should have been selected but wasn\'t","xAnswersSelectedIncorrectly":"answers were selected incorrectly","xAnswersMissing":"answers should have been selected but weren\'t","noAnswerProvided":"No answer was provided","marks":"Marks","feedback":"Feedback","solution":"Solution","yourAnswer":"Your answer","latePenalty":"Late penalty","passed":"Passed","failed":"Failed","summary":"Summary","gradeAdjustedForWeights":"Grade adjusted for section weights","gradeAdjustedForWeightsAndLatePenalty":"Grade adjusted for section weights and late penalty","instructorAdjustedGrade":"The instructor adjusted the final grade","gradeAdjustmentExplanation":"Grade adjustment explanation","assignmentgrade":"Assignment grade","testGrade:":"Test grade","selectCorrectAnswer":"Select the correct answer","buttons":{"playFeedback":"Play feedback","playAnswer":"Play the correct answer","noAnswer":"No answer","playYourAnswer":"Play your answer","playQuestion":"Play question","next":"Next","back":"Back"}}}')},574:function(e){e.exports=JSON.parse('{"es":{"errors":{"micBlocked":"Su micr\xf3fono est\xe1 bloqueado en el navegador"},"buttons":{"clearAudio":"Eliminar audio","record":"Grabar","stop":"Terminar","preview":"Escuchar"}}}')},575:function(e){e.exports=JSON.parse('{"en":{"errors":{"micBlocked":"Your microphone is blocked in the browser"},"buttons":{"clearAudio":"Clear audio","record":"Record","stop":"Stop","preview":"Preview"}}}')},576:function(e){e.exports=JSON.parse('{"en":{"buttons":{"clearVideo":"Clear video","upload":"Upload"}}}')},577:function(e){e.exports=JSON.parse('{"es":{"buttons":{"clearVideo":"Eliminar video","upload":"Subir"}}}')},578:function(e){e.exports=JSON.parse('{"en":{"from":"from","reason":"Reason","passed":"passed","failed":"failed","test":"test","assignment":"assignment","officeHoursUpdated":"Office hours updated for {{courseName}}","courseDropDeadline":"The deadline to drop the course has changed for {{courseName}} ","courseEnrollRequest":"{{firstName}} {{lastName}} has requested to enroll in {{courseName}}","courseEnrollApprove":"The instructor has accepted your request to enroll in {{courseName}}","courseEnrollDeny":"The instructor has denied you access to {{courseName}}.","allowResubmission":"You are allowed to resubmit the request after you complete the requirements.","courseDrop":"{{firstName}} {{lastName}} dropped out of {{courseName}}","gradeCourse":"You {{passOrFail}} {{courseName}} with a grade of {{grade}}%","adjustGradeCourse":"The instructor adjusted your grade for {{courseName}}. You {{passOrFail}} with a grade of {{grade}}%","newLesson":"A new lesson was posted","newLessonLaterDate":"A new lesson was posted which you can access after {{date}}","lessonUpdated":"The lesson {{lessonName}} was updated","lessonUpdatedDateChanged":"The lesson {{lessonName}} was updated and can now be accessed after {{date}}","workSubmitted":"{{firstName}} submitted {{aOrAn}} {{testOrAssignment}}","workGraded":"Your {{testOrAssignment}} {{testName}} has been graded {{grade}}% {{passOrFail}}","workReviewed":"Your {{testOrAssignment}} {{testName}} has been reviewed","workReviewedGradeChanged":"The {{testOrAssignment}} {{testName}} has been reviewed {{grade}}% {{passOrFail}}","workGradeChanged":"The {{testOrAssignment}} {{testName}} grade has been adjusted to {{grade}}% {{passOrFail}}","workGradedLaterDate":"The {{testOrAssignment}} {{testName}} has been graded, you will be able to see your grade on {{gradeReleaseDate}}","newWorkPosted":"A new {{testOrAssignment}} was posted","changeWorkDueDate":"The {{testOrAssignment}} {{testName}} {{dueDateOrCloseDate}} changed to {{dueDate}}","removeWorkDueDate":"The {{testOrAssignment}} {{dueDateOrCloseDate}} was removed, it can now be submitted at any time","changeWorkAvailableOnDate":"The {{testOrAssignment}} available on date was changed to {{availableOnDate}}","removeWorkAvailableOnDate":"The {{testOrAssignment}} is now accessible at any time.","assignmentLateSubmissionRemoved":"The instructor does not allow late submission of the assignment anymore.","assignmentLateSubmissionAllowed":"The instructor has allowed late submission of the assignment with a daily penalty of {{latePenalty}}% for a maximum of {{lateDaysAllowed}} days.","assignmentMaxLateDaysChanged":"The maximum late days allowed for the assignment has changed to {{lateDaysAllowed}} days.","assignmentDailyPenaltyChanged":"The daily penalty for submitting the assignment late has changed to {{latePenalty}}% per day.","workReset":"The instructor reset the {{testOrAssignment}} {{testName}}. {{message}}","workResetCanTakeAgain":"The instructor reset the {{testOrAssignment}} {{testName}}. The progress or grade has been deleted and you can take it again."}}')},579:function(e){e.exports=JSON.parse('{"es":{"from":"de","reason":"Raz\xf3n","passed":"pas\xf3","failed":"fall\xf3","test":"prueba","assignment":"tarea","officeHoursUpdated":"Los horarios de oficina se ha actualizado para {{courseName}}","courseDropDeadline":"La fecha l\xedmite para abandonar el curso ha cambiado para {{courseName}} ","courseEnrollRequest":"{{firstName}} {{lastName}} ha solicitado inscribirse en {{courseName}}","courseEnrollApprove":"El profesor ha aceptado su solicitud para inscribirse en {{courseName}}","courseEnrollDeny":"El profesor le ha negado el acceso a {{courseName}}.","allowResubmission":"Se le permite enviar la solicitud nuevamente despu\xe9s de completar los requisitos.","courseDrop":"{{firstName}} {{lastName}} abandon\xf3 el curso {{courseName}}","gradeCourse":"Usted {{passOrFail}} {{courseName}} con una calificaci\xf3n de {{grade}}%","adjustGradeCourse":"El profesor ajust\xf3 su calificaci\xf3n para {{courseName}}. Usted {{passOrFail}} con una calificaci\xf3n de {{grade}}%","newLesson":"Se public\xf3 una nueva lecci\xf3n","newLessonLaterDate":"Se public\xf3 una nueva lecci\xf3n a la que puede acceder despu\xe9s de {{date}}","lessonUpdated":"La lecci\xf3n {{lessonName}} fue actualizada","lessonUpdatedDateChanged":"La lecci\xf3n {{lessonName}} fue actualizada y ahora se puede acceder despu\xe9s de {{date}}","workSubmitted":"{{firstName}} present\xf3 una {{testOrAssignment}}","workGraded":"Su {{testOrAssignment}} {{testName}} ha sido calificada {{grade}}% {{passOrFail}}","workReviewed":"Su {{testOrAssignment}} {{testName}} ha sido revisada","workReviewedGradeChanged":"Su {{testOrAssignment}} {{testName}} ha sido revisada {{grade}}% {{passOrFail}}","workGradeChanged":"La calificaci\xf3n de su {{testOrAssignment}} {{testName}} ha sido ajustada {{grade}}% {{passOrFail}}","workGradedLaterDate":"La {{testOrAssignment}} {{testName}} ha sido calificada, su calificaci\xf3n se publicar\xe1 en {{gradeReleaseDate}}","newWorkPosted":"Se public\xf3 una nueva {{testOrAssignment}}","changeWorkDueDate":"La fecha de vencimiento de la {{testOrAssignment}} {{testName}} se cambi\xf3 a {{dueDate}}","removeWorkDueDate":"La fecha de vencimiento de la {{testOrAssignment}} se elimin\xf3, se puede enviar en cualquier momento","changeWorkAvailableOnDate":"La fecha de disponibilidad de la {{testOrAssignment}} en se cambi\xf3 a {{availableOnDate}}","removeWorkAvailableOnDate":"La {{testOrAssignment}} ya est\xe1 disponible en cualquier momento","assignmentLateSubmissionRemoved":"El profesor ya no permite que la tarea se presente tarde.","assignmentLateSubmissionAllowed":"El profesor ha permitido la presentaci\xf3n tard\xeda de la tarea con una penalizaci\xf3n diaria de {{latePenalty}}% por un maxiumum {{lateDaysAllowed}} d\xedas.","assignmentMaxLateDaysChanged":"El m\xe1ximo de d\xedas de retraso permitidos para la tarea tarde ha cambiado a {{lateDaysAllowed}} d\xedas.","assignmentDailyPenaltyChanged":"La penalizaci\xf3n diaria por enviar la tarea tarde ha cambiado a {{latePenalty}}% por d\xeda.","workReset":"El profesor reinici\xf3 la {{testOrAssignment}} {{testName}}. {{message}}","workResetCanTakeAgain":"El profesor reinici\xf3 {{testOrAssignment}} {{testName}}. El progreso o la calificaci\xf3n se ha eliminado y puede volver a tomarlo"}}')},580:function(e){e.exports=JSON.parse('{"en":{"assignment":"assignment","final":"final exam","midterm":"midterm exam","quiz":"quiz","ofTheassignment":"of the assignment","ofThefinal":"of the final exam","ofThemidterm":"of the midterm exam","ofTheQuiz":"of the quiz","officehours":"Office hours from {{start}} to {{end}}","dropDeadline":"Deadline to drop out of {{courseName}} without penalty","testAvailableOnDate":"The {{testType}} {{testName}} will be available","testDueDate":"The {{testType}} {{testName}} will be due","testGradeReleaseDateStudent":"The {{testType}} {{testName}} grades will be released","lessonAvailableOnDate":"The lesson {{lessonName}} will be available","testGradeReleaseDateInstructor":"The {{testType}} {{testName}} grades will be due"}}')},581:function(e){e.exports=JSON.parse('{"es":{"assignment":"tarea","final":"examen final","midterm":"examen de mitad de per\xedodo","quiz":"test","ofTheassignment":"de la tarea","ofThefinal":"del examen final","ofThemidterm":"del examen de mitad de per\xedodo","ofThequiz":"del test","officehours":"Horas de oficina de {{start}} a {{end}}","dropDeadline":"Fecha l\xedmite para abandonar {{courseName}} sin penalizaci\xf3n","testAvailableOnDate":"La {{testType}} {{testName}} estar\xe1 disponible","testDueDate":"La {{testType}} {{testName}} vencer\xe1","testGradeReleaseDateStudent":"Las calificaciones {{ofTheTestType}} {{testName}} ser\xe1n publicadas","lessonAvailableOnDate":"La lecci\xf3n {{lessonName}} estar\xe1 disponible","testGradeReleaseDateInstructor":"Las calificaciones {{ofTheTestType}} {{testName}} se vencer\xe1n"}}')},582:function(e){e.exports=JSON.parse('{"en":{"auth":{"loginFail":"Login failed","fetchUserFail":"Fetch user failed","accountCreatedSuccess":"Account created, check your e-mail for a verification link","accountCreatedFail":"Creating account failed","updatedAccountSuccess":"Account updated","updatedAccountFail":"Updating account failed","uploadingPictureFail":"Uploading profile picture failed","uploadingDocumentsFail":"Uploading account documents failed","accountVerifySuccess":"Account verified","accountVerifyFail":"Account verification failed","verificationLinkSentSuccess":"A verification link was sent to your e-mail","verificationLinkSentFail":"Failed to send a verification link to your e-mail","passwordResetLinkSentSuccess":"A password reset link was sent to your e-mail","passwordResetLinkSentFail":"Failed to send a password reset link to your e-mail","passwordChangeSuccess":"Password changed","passwordChangeFail":"Changing the password failed","extendingSessionFail":"Extending the session failed"},"course":{"fetchCoursesFail":"Failed to retrieve courses","requestSentSuccess":"Your request has been sent","requestSentFailed":"Failed to send enrollment request","enrollmentApproveFail":"Approving enrollment of the student failed","studentDenySuccess":"Access has been denied for the student","studentDenyFail":"Failed to deny access","courseDropSuccess":"Course dropped","courseDropFail":"Failed to drop course","fetchCourseFail":"Failed to retrieve course","createCourseSuccess":"Course created successfully","updateCourseSuccess":"Course updated","createCourseFail":"Creating or updating the course failed","uploadThumbnailFail":"Uploading the course thumbnail failed","changeStateFail":"Failed to change course state","deleteCourseFail":"Failed to delete the course","gradeCourseFail":"Failed to grade the course","updatingResourcesSuccess":"Resources updated","updatingResourcesFail":"Updating resources failed","uploadingResourcesFail":"Uploading resource file failed"},"test":{"retrieveTestFail":"Failed to retrieve test or assignment","retrieveTestFailDatePassed":"The test that was in progress has closed and has been submitted","fetchTestResultsFail":"Failed to get test results","uploadAudioFail":"Uploading audio file failed","studentTestSavedSuccess":"Saved","studentTestSubmittedSuccess":"Submitted","creatingFail":"Failed to created","updatingFail":"Failed to update","uploadingTestResourcesFail":"Uploading text resource file failed","uploadingAudioResourcesFail":"Uploading audio resource file failed","uploadingFillblanksAudioFail":"Uploading fill-in-the-blanks audio file failed","uploadingSpeakingQuestionAudioFail":"Uploading speaking question audio file failed","uploadingSpeakingAnswerAudioFail":"Uploading speaking answer audio file failed","testDeleteSuccess":"Test deleted","testDeleteFail":"Failed to delete the test","closeTestFail":"Closing the test failed","testResetSuccess":"The test was reset","testResetFail":"Resetting the test failed","saveGradesSuccess":"Grade saved","postGradesSuccess":"Grade posted","saveGradesFail":"Failed to save the grade","postGradesFail":"Failed to post the grade","uploadFeedbackAudioFail":"Failed to upload feedback audiofile"},"question":{"fetchQuestionBankFail":"Retrieving the question bank failed","createQuestionFail":"Creating the question failed","updateQuestionFail":"Updating the question failed","uploadingFillblanksAudioFail":"Uploading fill-in-the-blanks audio file failed","uploadingSpeakingQuestionAudioFail":"Uploading speaking question audio file failed","uploadingSpeakingAnswerAudioFail":"Uploading speaking answer audio file failed`","deleteQuestionSuccess":"Question deleted","deleteQuestionFail":"Deleting the question failed"},"lesson":{"markSlideFail":"Failed to mark slide as seen","lessonCreatedFail":"Creating the lesson failed","lessonUpdatedFail":"Updating the lesson failed","uploadingAudioFail":"Uploading audio file failed","uploadingVideoFail":"Uploading video file failed","lessonRetrieveFail":"Retrieving the lesson failed","lessonDeleteSuccess":"Lesson deleted","lessonDeleteFail":"Deleting the lesson failed"},"modules":{"retrieveModulesFailed":"Failed to retrieve modules","updateModulesFailed":"Creating or updating the modules failed"},"notifications":{"retrieveNotificationsFail":"Failed to retrieve the notifications","markNotificationsFail":"Failed to mark notification as seen"},"config":{"fetchConfigFail":"Failed to retrieve configuration","updatedConfigFail":"Failed to update the configuration","updatedConfigSuccess":"The configuration was updated"},"files":{"deleteFilesFailed":"Failed to delete the files"},"student":{"retrieveStudentsFail":"Failed to retrieve students"},"instructor":{"retrieveInstructorsFail":"Failed to get instructors"}}}')},583:function(e){e.exports=JSON.parse('{"es":{"auth":{"loginFail":"Error de inicio de sesion","fetchUserFail":"Error al recuperar usuario","accountCreatedSuccess":"Cuenta creada, revise su correo electr\xf3nico para un enlace de verificaci\xf3n","accountCreatedFail":"No se pudo crear la cuenta","updatedAccountSuccess":"Se actualiz\xf3 la cuenta","updatedAccountFail":"No se pudo actualizar la cuenta","uploadingPictureFail":"Error en subir la foto de perfil","uploadingDocumentsFail":"Error en subir documentos","accountVerifySuccess":"Cuenta verificada","accountVerifyFail":"Error de verificaci\xf3n de cuenta","verificationLinkSentSuccess":"Se envi\xf3 un enlace de verificaci\xf3n a su correo electr\xf3nico","verificationLinkSentFail":"Error al enviar un enlace de verificaci\xf3n a su correo electr\xf3nico","passwordResetLinkSentSuccess":"Se envi\xf3 un enlace a su correo electr\xf3nico para restablecer la contrase\xf1a","passwordResetLinkSentFail":"Error al enviar un enlace de restablecimiento de contrase\xf1a a su correo electr\xf3nico","passwordChangeSuccess":"Contrase\xf1a cambiada","passwordChangeFail":"No se pudo cambiar la contrase\xf1a","extendingSessionFail":"No se pudo extender la sesi\xf3n"},"course":{"fetchCoursesFail":"Error al recuperar cursos","requestSentSuccess":"Tu solicitud ha sido enviada","requestSentFailed":"No se pudo enviar la solicitud de inscripci\xf3n","enrollmentApproveFail":"Aprobar la inscripci\xf3n del estudiante fall\xf3","studentDenySuccess":"Se le ha denegado el acceso al estudiante","studentDenyFail":"No se pudo denegar el acceso","courseDropSuccess":"El curso fue abandonado","courseDropFail":"No se pudo abandonar el curso","fetchCourseFail":"No se pudo recuperar el curso","createCourseSuccess":"El curso fue creado","updateCourseSuccess":"El curso fue actualizado","createCourseFail":"Error al crear o actualizar el curso","uploadThumbnailFail":"Error en subir la miniatura del curso","changeStateFail":"No se pudo cambiar el estado del curso","deleteCourseFail":"No se pudo borrar el curso","gradeCourseFail":"No se pudo calificar el curso","updatingResourcesSuccess":"Los recursos fueron actualizados","updatingResourcesFail":"Error en actualizar los recursos","uploadingResourcesFail":"Error en subir el archivo de recursos"},"test":{"retrieveTestFail":"No se pudo recuperar la prueba o la tarea","retrieveTestFailDatePassed":"La prueba que estaba en progreso se cerr\xf3 y se envi\xf3","fetchTestResultsFail":"No se pud\xf3 obtener los resultados de la prueba","uploadAudioFail":"Error en subir el archivo de audio","studentTestSavedSuccess":"Se guard\xf3","studentTestSubmittedSuccess":"Fue enviado","creatingFail":"No se pudo crear","updatingFail":"No se pudo actualizar","uploadingTestResourcesFail":"Error en subir el archivo de recursos de texto","uploadingAudioResourcesFail":"Error en subir el archivo de recursos de audio","uploadingFillblanksAudioFail":"Error en subir el archivo de audio para llenar los espacios vac\xedos","uploadingSpeakingQuestionAudioFail":"Error en subir el archivo de audio para la pregunta de secci\xf3n oral","uploadingSpeakingAnswerAudioFail":"Error en subir el archivo de audio para la respuesta de secci\xf3n oral","testDeleteSuccess":"Prueba eliminada","testDeleteFail":"No se pudo borrar la prueba","closeTestFail":"No se pudo cerrar la prueba","testResetSuccess":"La prueba se reinici\xf3","testResetFail":"No se pudo restablecer la prueba","saveGradesSuccess":"Se guard\xf3 la calificaci\xf3n","postGradesSuccess":"Se subi\xf3 la calificaci\xf3n","saveGradesFail":"No se pudo guardar la calificaci\xf3n","postGradesFail":"No se pudo subir la calificaci\xf3n","uploadFeedbackAudioFail":"Error en subir el archivo de audio de comentarios"},"question":{"fetchQuestionBankFail":"Error al recuperar el banco de preguntas","createQuestionFail":"No se pudo crear la pregunta","updateQuestionFail":"No se pudo actualizar la pregunta","uploadingFillblanksAudioFail":"Error en subir el archivo de audio para llenar los espacios vac\xedos","uploadingSpeakingQuestionAudioFail":"Error en subir el archivo de audio para la pregunta de secci\xf3n oral","uploadingSpeakingAnswerAudioFail":"Error en subir el archivo de audio para la respuesta de secci\xf3n oral","deleteQuestionSuccess":"Pregunta eliminada","deleteQuestionFail":"No se pudo borrar la pregunta"},"lesson":{"markSlideFail":"Failed to mark slide as seen","lessonCreatedFail":"No se pudo crear la lecci\xf3n","lessonUpdatedFail":"No se pudo actualizar crear la lecci\xf3n","uploadingAudioFail":"Error en subir el archivo de audio","uploadingVideoFail":"Error en subir el archivo de video","lessonRetrieveFail":"Recuperar la lecci\xf3n fall\xf3","lessonDeleteSuccess":"Lecci\xf3n eliminada","lessonDeleteFail":"No se pudo borrar la lecci\xf3n"},"modules":{"retrieveModulesFailed":"No se pudieron recuperar los m\xf3dulos","updateModulesFailed":"Error al crear o actualizar los m\xf3dulos"},"config":{"fetchConfigFail":"No se pudo recuperar la configuraci\xf3n","updatedConfigFail":"No se pudo actualizar la configuraci\xf3n","updatedConfigSuccess":"Se actualiz\xf3 la configuraci\xf3n"},"notifications":{"retrieveNotificationsFail":"No se pudieron recuperar las notificaciones","markNotificationsFail":"No se pudo marcar la notificaci\xf3n como se ve"},"files":{"deleteFilesFailed":"No se pudieron borrar los archivos"},"student":{"retrieveStudentsFail":"No se pudo recuperar los estudiantes"},"instructor":{"retrieveInstructorsFail":"Error en recuperar los profesores"}}}')},584:function(e){e.exports=JSON.parse('{"en":{"students":"Students","instructor":"Instructor","from":"from","to":"to","typeMessage":"Type your message...","chatInstructorOnlyOfficeHours":"Chat with the instructor is only available during office hours","chatStudentOnlyOfficeHours":"Chat with students is only available during office hours."}}')},585:function(e){e.exports=JSON.parse('{"es":{"students":"Estudiantes","instructor":"Profesor","from":"de","to":"a","typeMessage":"Escribe su mensaje...","chatInstructorOnlyOfficeHours":"El chat con el instructor solo est\xe1 disponible durante las horas de oficina","chatStudentOnlyOfficeHours":"El chat con los estudiantes solo est\xe1 disponible durante las horas de oficina"}}')},586:function(e){e.exports=JSON.parse('{"en":{"test":"Test","assignment":"Assignment","yourProgress":"Your progress","studentProgress":"Student progress","grade":"Grade","classAverage":"Class average","assignmentsTests":"Assignments and tests"}}')},587:function(e){e.exports=JSON.parse('{"es":{"test":"Prueba","assignment":"Tarea","yourProgress":"Su progreso","studentProgress":"Progreso del estudiante","grade":"Calificaci\xf3n","classAverage":"Promedio de la clase","assignmentsTests":"Tareas y pruebas"}}')},588:function(e){e.exports=JSON.parse('{"en":{"studentsEnrolled":"Students enrolled","enrollmentRequested":"Enrollment requested","noCourses":"There are no courses at the moment","instructor":"Instructor","enrollmentStart":"Enrollement start date","enrollmentDeadline":"Enrollement deadline","courseNotActivated":"The course has not been activated by the instructor","deniedRequest":"The instructor has denied your request to enroll in this course","completePrereqs":"You must complete the prerequisites to enroll","buttons":{"edit":"Edit","delete":"Delete","syllabus":"Syllabus","enroll":"Enroll","drop":"Drop"},"fields":{"courseActive":"Course active","courseInactive":"Course inactive"}}}')},589:function(e){e.exports=JSON.parse('{"es":{"studentsEnrolled":"Estudiantes matriculados","enrollmentRequested":"Inscripci\xf3n solicitada","noCourses":"No hay cursos en este momento","instructor":"Profesor","enrollmentStart":"Fecha de inicio de la inscripci\xf3n","enrollmentDeadline":"Fecha de finalizaci\xf3n de la inscripci\xf3n","courseNotActivated":"El curso no ha sido activado por el profesor","deniedRequest":"El instructor ha denegado su solicitud para inscribirse en este curso","completePrereqs":"Debe completar los cursos de prerrequisito para inscribirse","buttons":{"edit":"Editar","delete":"Eliminar","syllabus":"Programa del curso","enroll":"Inscribirse en el curso","drop":"Dejar el curso"},"fields":{"courseActive":"Curso activo","courseInactive":"Curso inactivo"}}}')},590:function(e){e.exports=JSON.parse('{"en":{"multiplechoicequestions":"Multiple-choice questions","essayquestions":"Essay questions","speakingquestions":"Speaking questions","fillintheblanksquestions":"Fill-in-the-blanks questions","filterQuestions":"Filter questions","difficulty":"Difficulty","language":"Language","tag":"Tag","easy":"Easy","medium":"Medium","hard":"Hard","buttons":{"createQuestion":"Create question","resetFilters":"Reset filters"}}}')},591:function(e){e.exports=JSON.parse('{"es":{"multiplechoicequestions":"Preguntas de opci\xf3n m\xfaltiple","essayquestions":"Preguntas de ensayo","speakingquestions":"Preguntas oral","fillintheblanksquestions":"Preguntas para llenar los espacios en blanco","filterQuestions":"Filtrar preguntas","difficulty":"Dificultad","language":"Idioma","tag":"Etiqueta","easy":"Facil","medium":"Media","hard":"Dif\xedcil","buttons":{"createQuestion":"Crear pregunta","resetFilters":"Restablecer filtros"}}}')},592:function(e){e.exports=JSON.parse('{"en":{"hideActiveStatus":"Hide active status","chatAllowedOutsideOfficehours":"Allow chat outside office hours","chatNotifications":"Chat","chat":"Chat","tests":"Test","lessons":"Lesson","assignments":"Assignment","course":"Course update","notificationsHeader":"Notifications","emailsHeader":"E-mails","sendNotificationsHeader":"Notify by notification bell","sendEmailsHeader":"Notify by e-mail","dropCoursePenalty":"Drop course penalty","dropCourseGrade":"Drop course grade","coursePassGrade":"Course pass grade","enrollAllowedAfterDropCourse":"Enroll allowed after course dropped","instructorCoursesLimited":"Limit number of courses per instructor","instructorCoursesLimit":"Courses limit per instructor","approveInstructorAccounts":"Approve instructor accounts prior to access","approveStudentAccounts":"Approve student accounts prior to access","contentBlockedCourseEnd":"Block course content after course ends","studentFileSizeLimit":"Student file upload size limit","instructorFileSizeLimit":"Instructor file upload size limit","passwordRequiredStartTest":"Password required prior to starting test","voiceRecordTimeLimit":"Voice record time limit (seconds)","newInstructorAccountNotifications":"New instructor account","newInstructorAccountEmails":"New instructor account e-mails","enrollRequest":"Student requests enrollment","dropCourse":"Student drops out of course","platformConfiguration":"Platform configuration","privacy":"Privacy","allowInstructorAccountDeletion":"Allow instructor account deletion","allowStudentAccountDeletion":"Allow student account deletion","errors":{"required":"Required"},"buttons":{"updateConfig":"Update configuration"}}}')},593:function(e){e.exports=JSON.parse('{"es":{"hideActiveStatus":"Ocultar estado activo","chatAllowedOutsideOfficehours":"Permitir el chat fuera del horario de oficina","chatNotifications":"Notificaciones del chat","chat":"Chat","tests":"Pruebas","lessons":"Lecciones","assignments":"Tareas","course":"Actualizaci\xf3n del curso","notificationsHeader":"Notificaciones","emailsHeader":"Correos electr\xf3nicos","sendNotificationsHeader":"Enviar notificaciones","sendEmailsHeader":"Enviar correos electr\xf3nicos","dropCoursePenalty":"Penalizaci\xf3n para dejar el curso despu\xe9s de la fecha l\xedmite","dropCourseGrade":"Calificaci\xf3n del curso si deja el curso despu\xe9s de la fecha l\xedmite","coursePassGrade":"Nota aprobatoria del curso","enrollAllowedAfterDropCourse":"Se permite la inscripci\xf3n despu\xe9s de cancelar el curso","instructorCoursesLimited":"Limitar la cantidad de cursos por profesor","instructorCoursesLimit":"L\xedmite de cursos por profesor","approveInstructorAccounts":"Se requiere aprobaci\xf3n para cuentas de profesores","approveStudentAccounts":"Se requiere aprobaci\xf3n para cuentas de estudiantes","contentBlockedCourseEnd":"Bloquear el contenido del curso para estudiantes una vez finalizado el curso","studentFileSizeLimit":"L\xedmite de tama\xf1o de carga de archivos de estudiante","instructorFileSizeLimit":"L\xedmite de tama\xf1o de carga de archivos de profesor","passwordRequiredStartTest":"Se requiere contrase\xf1a para iniciar la prueba","voiceRecordTimeLimit":"L\xedmite de tiempo de grabaci\xf3n de voz (segundos)","newInstructorAccountNotifications":"Cuenta de nuevo profesor","newInstructorAccountEmails":"Correos electr\xf3nicos de cuenta de nuevo profesor","enrollRequest":"El estudiante solicita inscripci\xf3n","dropCourse":"El estudiante abandona el curso","platformConfiguration":"Configuraci\xf3n de la plataforma","privacy":"Privacidad","allowInstructorAccountDeletion":"Permitir la eliminaci\xf3n de la cuenta del profesor","allowStudentAccountDeletion":"Permitir la eliminaci\xf3n de la cuenta del estudiante","errors":{"required":"Required"},"buttons":{"updateConfig":"Actualizar configuraci\xf3n"}}}')},594:function(e){e.exports=JSON.parse('{"en":{"buttons":{"updateResources":"Update resources","select":"Select","addResource":"Add resource","resourceName":"Resource name"},"errors":{"giveResourceName":"Must give the resource a name","selectResource":"You must select a resource or remove the field","fileSize":"The file must be less than or equal to {{size}}"}}}')},595:function(e){e.exports=JSON.parse('{"es":{"buttons":{"updateResources":"Actualizar los recursos","select":"Elegir","addResource":"A\xf1adir recurso","resourceName":"Nombre del recurso"},"errors":{"giveResourceName":"Debe darle un nombre al recurso","selectResource":"Debes seleccionar un recurso o eliminar el campo","fileSize":"El archivo debe ser menor o igual a {{size}}"}}}')},596:function(e){e.exports=JSON.parse('{"en":{"close":"Close"}}')},597:function(e){e.exports=JSON.parse('{"es":{"close":"Cierre"}}')},598:function(e){e.exports=JSON.parse('{"en":{"goToPage":"Go to page","page":"page","of":"of"}}')},599:function(e){e.exports=JSON.parse('{"es":{"goToPage":"Ir a la pagina","page":"Pagina","of":"de"}}')},600:function(e){e.exports=JSON.parse('{"en":{"student":"Student","studentId":"Student ID","test":"Test","assignment":"Assignment","weight":"Weight","lessonsAllowed":"Lessons allowed","timer":"Timer","type":"Type","quiz":"Quiz","midterm":"Midterm","final":"Final","passingRequired":"Passing required to complete course","passingGrade":"Passing grade","availableOnDate":"Available on date","gradeReleaseDate":"Grade release date","dueDate":"Due date","closeDate":"Close date","lateSubmissionAllowed":"Late submission allowed","dailyPenalty":"Daily late penalty","maxLateDaysAllowed":"Late days allowed","yes":"Yes","no":"No","minute":"minute","plural":{"minute":"minutes"}}}')},601:function(e){e.exports=JSON.parse('{"es":{"student":"Estudiante","studentId":"Identificaci\xf3n del Estudiante","test":"Prueba","assignment":"Tarea","weight":"Porcentaje","lessonsAllowed":"Lecciones permitidas","timer":"Cronometrada","type":"Tipo","quiz":"Test","midterm":"Examen de mitad de per\xedodo","final":"Examen final","passingRequired":"Aprobaci\xf3n requerida para completar el curso","passingGrade":"Nota aprobatoria (%)","availableOnDate":"Fecha de disponibilidad","gradeReleaseDate":"Fecha de publicaci\xf3n de calificaciones","dueDate":"Fecha de vencimiento","closeDate":"Fecha de cierre","lateSubmissionAllowed":"Permitir env\xedo tard\xedo","dailyPenalty":"Penalizaci\xf3n diaria por retraso (%)","maxLateDaysAllowed":"D\xedas retrasados permitidos","yes":"S\xed","no":"No","minute":"minuto","plural":{"minute":"minutos"}}}')},602:function(e){e.exports=JSON.parse('{"en":{"useTheFollowingContent":"Use the following content to answer the questions","useTheAudio":"Use the audio to answer the questions"}}')},603:function(e){e.exports=JSON.parse('{"es":{"useTheFollowingContent":"Usa el contenido para responder las preguntas","useTheAudio":"Usa el audio para responder las preguntas"}}')},604:function(e){e.exports=JSON.parse('{"en":{"buttons":{"grade":"Grade","editGrade":"Edit grade","closeAndGrade":"Close and grade","resetTestFor":"Reset test for {{studentName}}","resetAssignmentFor":"Reset assignment for {{studentName}}"},"searchBy":"Search by","filterTests":"Filter tests","filterAssignments":"Filter assignments","student":"Student","studentId":"Student ID","test":"Test","assignment":"Assignment","toReview":"To review","graded":"Graded","all":"All","studentName":"Student name","studentDob":"Student dob","submittedOn":"Submitted on","gradeExpectedOn":"Grade expected on","lastSavedOn":"Last saved on","status":"Status","inProgress":"In progress, was not submitted","gradePending":"Grade pending","missed":"Missed"}}')},605:function(e){e.exports=JSON.parse('{"es":{"buttons":{"grade":"Calificar","editGrade":"Editar calificaci\xf3n","closeAndGrade":"Cerrar y calificar","resetTestFor":"Reiniciar la prueba para {{studentName}}","resetAssignmentFor":"Reiniciar la tarea para {{studentName}}"},"searchBy":"Buscar por","filterTests":"Filtrar pruebas","filterAssignments":"Filtrar tareas","student":"Estudiante","studentId":"Identificaci\xf3n del estudiante","test":"Prueba","assignment":"Tarea","toReview":"Para revisar","graded":"Calificada","all":"Todas","studentName":"Nombre del estudiante","studentDob":"Fecha de nacimiento","submittedOn":"Enviado el","gradeExpectedOn":"Se espera calificaci\xf3n en","lastSavedOn":"Se guard\xf3 por \xfaltima vez el","status":"Estado ","inProgress":"En curso, no se envi\xf3","gradePending":"Pendiente de calificaci\xf3n","missed":"Se perdi\xf3 la fecha de env\xedo"}}')},606:function(e){e.exports=JSON.parse('{"en":{"pendingRequests":"Pending requests","requestsDenied":"Requests denied","resubmissionAllowed":"Resubmission allowed","droppedOut":"Dropped out","buttons":{"gradebook":"Gradebook"}}}')},607:function(e){e.exports=JSON.parse('{"es":{"pendingRequests":"Solicitudes pendientes","requestsDenied":"Solicitudes denegadas","resubmissionAllowed":"Reenv\xedo permitido","droppedOut":"Abandon\xf3 el curso","buttons":{"gradebook":"Libro de calificaciones"}}}')},608:function(e){e.exports=JSON.parse('{"en":{"deleteCourse":"Delete course","deleteAssignment":"Delete assignment","deleteTest":"Delete test","resetAssignment":"Reset assignment","resetTest":"Reset test","deleteLesson":"Delete lesson","mcQuestion":"Multiple-choice question","essayQuestion":"Essay question","speakingQuestion":"Speaking question","fillblanksQuestion":"Fill-in-the-blanks question","enrollmentRequest":"Enrollment request","dropCourse":"Drop course","syllabus":"Syllabus","assignmentSummary":"Assignment summary","testSummary":"Test summary","lesson":"Lesson","startTest":"Start test","gradeAssignment":"Grade assignment","gradeTest":"Grade test","assignmentReview":"Assignment review","testReview":"Test review","moduleContents":"Module contents","subjectContents":"Subject contents","topicContents":"Topic contents","studentSummary":"Student summary","enrollmentConfirmation":"Enrollment confirmation","documents":"Documents","gradebook":"Gradebook","courseResource":"Course resource"}}')},609:function(e){e.exports=JSON.parse('{"es":{"deleteCourse":"Borrar curso","deleteAssignment":"Borrar tarea","deleteTest":"Borrar prueba","resetAssignment":"Reiniciar tarea","resetTest":"Reiniciar prueba","deleteLesson":"Borrar lecci\xf3n","mcQuestion":"Pregunta de opci\xf3n m\xfaltiple","essayQuestion":"Pregunta de ensayo","speakingQuestion":"Pregunta oral","fillblanksQuestion":"Pregunta de llenar los espacios vac\xedos","enrollmentRequest":"Solicitud de inscripci\xf3n","dropCourse":"Abandonar el curso","syllabus":"Programa del curso","assignmentSummary":"Resumen de tarea","testSummary":"Resumen de prueba","lesson":"Lecci\xf3n","startTest":"Iniciar prueba","gradeAssignment":"Calificar tarea","gradeTest":"Calificar prueba","assignmentReview":"Revisar tarea","testReview":"Revisar prueba","moduleContents":"Contenido del m\xf3dulo","subjectContents":"Contenido del sujeto","topicContents":"Contenido de la tema","studentSummary":"Resumen del estudiante","enrollmentConfirmation":"Confirmaci\xf3n de inscripci\xf3n","documents":"Documentos","gradebook":"Libro de calificaciones","courseResource":"Recurso del curso"}}')},610:function(e){e.exports=JSON.parse('{"en":{"language":"Language of teaching","courseInfo":"Course info","instructor":"Instructor","instructorEmail":"Instructor e-mail","coursePassGrade":"Passing grade","gradeIfCourseDropped":"Grade if course dropped after drop deadline","importantDates":"Important Dates","enrollmentStart":"Enrollement start date","enrollmentDeadline":"Enrollement deadline","courseStartDate":"Course start date","courseEndDate":"Course end date","dropDeadline":"Drop deadline without penalty","from":"from","to":"to","coursePrereqs":"Course prerequisites","noCoursePrereqs":"This course has no prerequisites","noOfficeHours":"The instructor has not posted any office hours","weeklyOfficehours":"Weekly office hours","otherOfficehours":"Other office hours","askQuestionsViaChat":"You will be able to ask questions via chat during these times","youAreRequesting":"You are requesting to enroll in ","accessWhenApproved":"You will get access to the course once the instructor approves your request","agree":"I agree","buttons":{"submitRequest":"Submit request"}}}')},611:function(e){e.exports=JSON.parse('{"es":{"language":"El idioma de ense\xf1anza","courseInfo":"Informaci\xf3n del curso","instructor":"Profesor","instructorEmail":"Correo electr\xf3nico del profesor","coursePassGrade":"Calificaci\xf3n aprobatoria","gradeIfCourseDropped":"Calificaci\xf3n si el curso se cancel\xf3 despu\xe9s de la fecha l\xedmite","importantDates":"Fechas importantes","enrollmentStart":"Fecha de inicio de la inscripci\xf3n","enrollmentDeadline":"Fecha de finalizaci\xf3n de la inscripci\xf3n","courseStartDate":"Fecha de inicio del curso","courseEndDate":"Fecha de finalizaci\xf3n del curso","dropDeadline":"Fecha l\xedmite para abandonar el curso sin penalizaci\xf3n","from":"de","to":"a","coursePrereqs":"Prerrequisitos del curso","noCoursePrereqs":"Este curso no tiene prerrequisitos","noOfficeHours":"No hay ning\xfan horario de oficina publicado","weeklyOfficehours":"Horas de oficina semanales","otherOfficehours":"Horas de oficina en fechas espec\xedficas","askQuestionsViaChat":"Podr\xe1 hacer preguntas a trav\xe9s del chat durante estos horarios","youAreRequesting":"Est\xe1 solicitando inscribirse en ","accessWhenApproved":"Tendr\xe1 acceso al curso una vez que el profesor apruebe tu solicitud","agree":"Estoy de acuerdo","buttons":{"submitRequest":"Enviar solicitud"}}}')},612:function(e){e.exports=JSON.parse('{"en":{"firstName":"First name","lastName":"Last name","email":"E-mail","dob":"Date of birth","studentId":"Student ID","lastLogin":"Last login","courseProgress":"Course progress","documents":"Documents","next":"Next","back":"Back","governmentId":"Government issued ID","birthCertificate":"Birth certificate","transcript":"Transcript","proofLegalStatus":"Proof of legal status","cv":"Curriculum vitae (cv)","proofTestScores":"Proof of test scores","letterReference":"Letter of reference","statementPurpose":"Statement of purpose","other":"Other","enrollCourse":{"language":"El idioma de ense\xf1anza"},"enrollConfirm":{"decision":"Decision","allow":"Allow access","deny":"Deny access","allowResubmission":"Allow resubmission","reason":"Reason for denied access","submit":"Submit"},"dropCourse":{"youAreDropping":"You are dropping","deadlineNotYet":"The deadline to drop the course has not yet passed therefore the course will not appear on your transcript, and will not affect your gpa.","deadlinePassed":"The deadline to drop the course has passed, therefore your grade will be","youCanReenroll":"You can still re-enroll in the course before the enrollment deadline.","youCanNotReenroll":"You will not be able to re-enroll into the course since the enrollment deadline has passed.","agree":"I agree","dropCourse":"Drop course"},"deleteCourse":{"youAreDeleting":"You are deleting","deletingCourseWillDeleteContent":"Deleting the course will also delete all of its tests, lessons, and assignments","studentsNoAccess":"Students will no longer have access to the course materials","courseRemovedFromRecord":"The course will be removed from students record","agree":"I agree","deleteCourse":"Delete Course","deactivateAlternative":"Alternatively you can de-activate the course","courseRemainsAccessibleToYou":"The course will remain accessible to you but not the students","wontEraseContent":"It will not erase the course content but students will not have access to the course material","deactivate":"De-activate Course"},"deleteTest":{"deleteAssignment":"Delete assignment","deleteTest":"Delete test","assignmentGradeRemoved":"Students who have taken the assignment will have their grade removed","testGradeRemoved":"Students who have taken the test will have their grade removed","questionBankNotAffected":"The question bank will not be affected","agree":"I agree"},"deleteLesson":{"youAreDeleting":"You are deleting","noAccess":"Students will no longer have access to the content in this lesson","deleteLesson":"Delete lesson","agree":"I agree"},"takeTest":{"saveOften":"Save your test often. If you exit the browser, you can still take the test as long as the timer has not expired. Your answers will be restored to the last time you saved the test","startTest":"Start test","agree":"I agree","loginPassword":"Login password","required":"Required","wrongPassword":"Wrong password","mc":"Multiple-choice","mcShort":"Mc","essay":"Essay","speaking":"Speaking","fillblanks":"Fill-in-the-blanks","fillblanksShort":"Fill-blanks"},"resetTest":{"resetingAssignment":"You are reseting assignment","resetingTest":"You are reseting test","willBeAbleTest":"will be able to take the test again","willBeAbleAssignment":"will be able to take the assignment again","gradeWillBeDeleted":"The current grade or progress will be deleted","everyStudentCanRetakeTest":"Every student in the course will be able to re-take the test and you will be able to make changes to the test","everyStudentCanRetakeAssignment":"Every student in the course will be able to re-take the assignment and you will be able to make changes to the assignment","studentsGradeWillBeErased":"The student\'s grade will be erased","resetTest":"Reset test","resetAssignment":"Reset assignment","reason":"Reason","agree":"I agree"}}}')},613:function(e){e.exports=JSON.parse('{"es":{"firstName":"Nombre","lastName":"Apellido","email":"Correo electr\xf3nico","dob":"Fecha de nacimiento","studentId":"Identificaci\xf3n del estudiante","lastLogin":"\xdaltima fecha de inicio de sesi\xf3n","courseProgress":"Progreso del curso","documents":"Documentos","next":"Siguiente","back":"Atr\xe1s","governmentId":"Identificaci\xf3n de gobierno","birthCertificate":"Certificado de nacimiento","transcript":"Boleta de calificaciones","proofLegalStatus":"Prueba de estatus legal","cv":"Curriculum vitae (cv)","proofTestScores":"Prueba de puntajes de ex\xe1menes","letterReference":"Carta de referencia","statementPurpose":"Declaraci\xf3n de prop\xf3sito","other":"Otra","enrollCourse":{"language":"El idioma de ense\xf1anza"},"enrollConfirm":{"decision":"Decisi\xf3n","allow":"Permitir el acceso","deny":"Negar acceso","allowResubmission":"Permitir reenv\xedo","reason":"Raz\xf3n del acceso denegado","submit":"Enviar"},"dropCourse":{"youAreDropping":"Est\xe1 dejando","deadlineNotYet":"La fecha l\xedmite para abandonar el curso no ha pasado. El curso no aparecer\xe1 en su expediente acad\xe9mico","deadlinePassed":"La fecha l\xedmite para dejar el curso ha pasado. Su nota ser\xe1","youCanReenroll":"Puede volver a inscribirse en el curso antes de la fecha l\xedmite de inscripci\xf3n","youCanNotReenroll":"No podr\xe1 volver a matricularte en el curso ya que ha pasado la fecha l\xedmite de inscripci\xf3n","agree":"Estoy de acuerdo","dropCourse":"Abandonar el curso"},"deleteCourse":{"youAreDeleting":"Est\xe1s borrando","deletingCourseWillDeleteContent":"Eliminar el curso tambi\xe9n eliminar\xe1 todas sus pruebas, lecciones y tareas","studentsNoAccess":"Los estudiantes ya no tendr\xe1n acceso a los materiales del curso","courseRemovedFromRecord":"El curso se eliminar\xe1 del registro de los estudiantes","agree":"Estoy de acuerdo","deleteCourse":"Eliminar curso","deactivateAlternative":"Alternativamente, puede desactivar el curso","courseRemainsAccessibleToYou":"El curso seguir\xe1 siendo accesible para usted, pero no para los estudiantes","wontEraseContent":"No borrar\xe1 el contenido del curso, pero los estudiantes no tendr\xe1n acceso al material del curso","deactivate":"Desactivar curso"},"deleteTest":{"deleteAssignment":"Borrar tarea","deleteTest":"Borrar prueba","assignmentGradeRemoved":"A los estudiantes que hayan realizado la tarea se les quitar\xe1 la calificaci\xf3n","testGradeRemoved":"A los estudiantes que hayan realizado la prueba se les quitar\xe1 la calificaci\xf3n","questionBankNotAffected":"El banco de preguntas no se ver\xe1 afectado","agree":"Estoy de acuerdo"},"deleteLesson":{"youAreDeleting":"Est\xe1s borrando","noAccess":"Los estudiantes ya no tendr\xe1n acceso al contenido de esta lecci\xf3n","deleteLesson":"Borrar lecci\xf3n","agree":"Estoy de acuerdo"},"takeTest":{"saveOften":"Guarde su prueba con frecuencia. Si sale del navegador, a\xfan puede realizar la prueba siempre que el temporizador no haya expirado. Sus respuestas se restaurar\xe1n a la \xfaltima vez que guard\xf3 la prueba","startTest":"Iniciar prueba","agree":"Estoy de acuerdo","loginPassword":"Contrase\xf1a de inicio de sesi\xf3n","required":"Requerido","wrongPassword":"Contrase\xf1a incorrecta","mc":"Opci\xf3n multiple","mcShort":"Opc mult","essay":"Ensayo","speaking":"Oral","fillblanks":"Llenar espacios vac\xedos","fillblanksShort":"Llenar vac\xedos"},"resetTest":{"resetingAssignment":"Est\xe1 reiniciando la tarea","resetingTest":"Est\xe1 reiniciando la prueba","willBeAbleTest":"podr\xe1 volver a realizar la prueba","willBeAbleAssignment":"podr\xe1 volver a realizar la tarea","gradeWillBeDeleted":"Se eliminar\xe1 la calificaci\xf3n o el progreso","everyStudentCanRetakeTest":"Todos los estudiantes del curso podr\xe1n volver a tomar la prueba y usted podr\xe1 realizar cambios en la prueba.","everyStudentCanRetakeAssignment":"Todos los estudiantes del curso podr\xe1n volver a tomar la tarea y usted podr\xe1 realizar cambios en la tarea.","studentsGradeWillBeErased":"Se borrar\xe1 la calificaci\xf3n de los estudiantes","resetTest":"Reiniciar prueba","resetAssignment":"Reiniciar tarea","reason":"Raz\xf3n","agree":"Estoy de acuerdo"}}}')},614:function(e){e.exports=JSON.parse('{"en":{"continueAssignment":"Continue assignment","assignmentIsDueOn":"Assignment is due on","assignmentWasDueOn":"Assignment was due on","assignmentWillOpenOn":"Assignment opens on","assignmentHasOpenedOn":"Assignment opened on","testWillOpenOn":"Test opens on","testHasOpenedOn":"Test opened on","testClosesOn":"Test closes on","testClosedOn":"Test closed on","wasDueOn":"Was due on","DueOn":"Due on","latePenalty":"late penalty per day","closesOn":"Closes on","availableOn":"Available on","missedDeadline":"Missed the deadline to submit","latePenaltyAccumulated":"Late penalty accumulated","startTest":"Start test","startAssignment":"Start assignment","quiz":"Quiz","midterm":"Midterm","final":"Final","notCompletedTests":"You have not completed any tests","notCompletedAssignments":"You have not completed any assignments","gradesReleaseOn":"Grades will be released on","gradePending":"Grade pending","reviewTest":"Review test","reviewAssignment":"Review assignment","summary":"Summary"}}')},615:function(e){e.exports=JSON.parse('{"es":{"continueAssignment":"Continuar tarea","assignmentIsDueOn":"La tarea vence el","assignmentWasDueOn":"La tarea Venc\xeda el","assignmentWillOpenOn":"La tarea se abre el","assignmentHasOpenedOn":"La tarea se abri\xf3 el","testWillOpenOn":"La prueba se abre el","testHasOpenedOn":"La prueba se abri\xf3 el","testClosesOn":"La prueba se cierra","testClosedOn":"La prueba cerr\xf3 el","wasDueOn":"Venc\xeda el","DueOn":"Vence el","latePenalty":"penalizaci\xf3n por retraso diario","closesOn":"Se cierra","availableOn":"Disponible el","missedDeadline":"Se perdi\xf3 la fecha de env\xedo","latePenaltyAccumulated":"Penalizaci\xf3n tard\xeda acumulada","startTest":"Iniciar prueba","startAssignment":"Iniciar tarea","quiz":"Test","midterm":"Examen de mitad de per\xedodo","final":"Examen final","notCompletedTests":"No ha completado ninguna prueba","notCompletedAssignments":"No ha completado ninguna tarea","gradesReleaseOn":"Las calificaciones se publicar\xe1n el","gradePending":"Pendiente de calificaci\xf3n","reviewTest":"Revisar la prueba","reviewAssignment":"Revisar la prueba","summary":"Resumen"}}')},616:function(e){e.exports=JSON.parse('{"en":{"lesson":"Lesson","lessons":"Lessons","availableOn":"Available on","completed":"Completed","buttons":{"next":"Next","back":"Back"}}}')},617:function(e){e.exports=JSON.parse('{"es":{"lesson":"Lecci\xf3n","lessons":"Lecci\xf3nes","availableOn":"Disponible el","completed":"Completada","buttons":{"next":"Siguiente","back":"Atr\xe1s"}}}')},618:function(e){e.exports=JSON.parse('{"en":{"classAverage":"Class average","courseProgress":"Course progress","weight":"Weight","result":"Result","passingRequired":"Passing required","showProgressReport":"Show progress report","hideProgressReport":"Hide progress report","test":"Test","assignment":"Assignment","tests":"Tests","assignments":"Assignments","passingGrade":"Passing grade","yes":"Yes","no":"No","studentProgress":"Student\'s progress","grade":"Grade","assignmentsTests":"Assignments and tests","finalGrade":"Final grade","passed":"Passed","failed":"Failed","agree":"I agree","overrideGrade":"Override grade","overrideFail":"Override fail","gradeAdjustment":"Grade adjustment","gradeAdjustmentExplanation":"Grade adjustment explanation","requiredTestNotPassed":"One or more tests required to pass the course were not passed or not attempted","warning":"Once the final grade has been posted, the student can no longer do assignments or take tests. Lessons will remain accessible until the course end date","buttons":{"gradebook":"Gradebook","postGrade":"Post final grade","updateFinalGrade":"Update final grade"},"errors":{"finalGrade":"Final grade must be between 0 and 100"}}}')},619:function(e){e.exports=JSON.parse('{"es":{"classAverage":"Promedio de la clase","courseProgress":"Progreso del curso","weight":"Porcentaje","result":"Resulto","passingRequired":"Aprobaci\xf3n requerida","showProgressReport":"Mostrar informe de progreso","hideProgressReport":"Esconder informe de progreso","test":"Prueba","assignment":"Tarea","tests":"Pruebas","assignments":"Tareas","passingGrade":"Nota aprobatoria","yes":"S\xed","no":"No","studentProgress":"Progreso del estudiante","grade":"Calificaci\xf3n","assignmentsTests":"Tareas y pruebas","finalGrade":"Calificaci\xf3n final","passed":"Aprobada","failed":"Fall\xf3","agree":"Estoy de acuerdo","overrideGrade":"Cambiar calificacione","overrideFail":"Cambiar aprobaci\xf3n","gradeAdjustment":"Ajuste de calificacione","gradeAdjustmentExplanation":"Explicaci\xf3n del ajuste de calificaci\xf3n","requiredTestNotPassed":"Una o m\xe1s pruebas requeridas para aprobar el curso no se aprobaron o no se intentaron","warning":"Una vez que se ha publicado la calificaci\xf3n final, el estudiante ya no puede realizar tareas ni tomar ex\xe1menes. Las lecciones permanecer\xe1n accesibles hasta la fecha de finalizaci\xf3n del curso","buttons":{"gradebook":"Libro de calificaciones","postGrade":"Publicar calificaci\xf3n final","updateFinalGrade":"Actualizar calificaci\xf3n final"},"errors":{"finalGrade":"La calificaci\xf3n final debe estar entre 0 y 100"}}}')},620:function(e){e.exports=JSON.parse('{"en":{"progressReport":"Progress report","increaseCapacity":"Increase student capacity to allow student in the course","buttons":{"submit":"Submit","showReport":"Show progress report","hideReport":"Hide progress report"}}}')},621:function(e){e.exports=JSON.parse('{"es":{"progressReport":"Informe de progreso","increaseCapacity":"Aumenta la capacidad de los estudiantes para permitirles a participar en el curso.","buttons":{"submit":"Enviar","showReport":"Mostrar informe de progreso","hideReport":"Esconder informe de progreso"}}}')},651:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__Zghgy"}},653:function(e,t,n){e.exports={Bold:"CourseSyllabus_Bold__wHvTJ",Contained:"CourseSyllabus_Contained___Xdu5"}},654:function(e,t,n){e.exports={Bold:"DropCourseConfirmation_Bold__1pNqd"}},72:function(e,t,n){e.exports={spacing:"DateTimePicker_spacing__2ajOF",general:"DateTimePicker_general__1-bTu",accountGeneral:"DateTimePicker_accountGeneral__2Ru5p",regularPadding:"DateTimePicker_regularPadding__OaSSx",fullWidth:"DateTimePicker_fullWidth__1RXrK",label:"DateTimePicker_label___WBu7",wrapper:"DateTimePicker_wrapper__3002c",noPaddingWrapper:"DateTimePicker_noPaddingWrapper__3SM05",smallWidth:"DateTimePicker_smallWidth__3ZSkm",timeRangeWrapper:"DateTimePicker_timeRangeWrapper__iLzug",noPaddingBottom:"DateTimePicker_noPaddingBottom__19Jm2",errorText:"DateTimePicker_errorText__IxjFD"}},745:function(e,t,n){e.exports=n(1125)},753:function(e,t,n){},754:function(e,t,n){},836:function(e,t,n){},88:function(e,t,n){e.exports={Auth:"AuthenticationForm_Auth__2M9sO",errorMessage:"AuthenticationForm_errorMessage__3WnqQ",radioGroupAlignment:"AuthenticationForm_radioGroupAlignment__3pc4v",ButtonContainer:"AuthenticationForm_ButtonContainer__2-2x7",ForgotPassword:"AuthenticationForm_ForgotPassword__Tn8W4",ResendVerificationEmail:"AuthenticationForm_ResendVerificationEmail__3XBec",Dob:"AuthenticationForm_Dob__1ird5"}},964:function(e,t){},967:function(e,t,n){},97:function(e,t,n){e.exports={TestContainer:"Test_TestContainer__7fONJ",flexPositioningSpaceBetween:"Test_flexPositioningSpaceBetween__3qcOt",flexPositioningEnd:"Test_flexPositioningEnd__1BT0d",button:"Test_button__3kZ9Q",Inline:"Test_Inline__2KPBl",center:"Test_center__3KQMR",TestTypeRadio:"Test_TestTypeRadio__2JWt_",ListHorizontalDisplay:"Test_ListHorizontalDisplay__3rpFy",TestFormList:"Test_TestFormList__2tEwo",Editor:"Test_Editor__1CVT1",greenIcon:"Test_greenIcon__3Ki1h",redIcon:"Test_redIcon__3oB4F",timer:"Test_timer__3Gexz",timerDanger:"Test_timerDanger__1UcdL",CorrectAnswerHighlight:"Test_CorrectAnswerHighlight__22Ntw",BlankPreview:"Test_BlankPreview__35Isy",InputField:"Test_InputField__36Ygf",FullWidth:"Test_FullWidth__3a30R",InputFieldBottomMargin:"Test_InputFieldBottomMargin__-lmnr",SelectField:"Test_SelectField__149Z_",Pointer:"Test_Pointer__8Sq0r",audioPlayerPreview:"Test_audioPlayerPreview__1ht6R"}}},[[745,1,2]]]);
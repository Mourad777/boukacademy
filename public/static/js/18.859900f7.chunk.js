(this["webpackJsonpe-learn"]=this["webpackJsonpe-learn"]||[]).push([[18],{1320:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(30),i=n(4),c=n(35),s=n(140),u=n(944),l=n(142),f=n.n(l),d=n(48);t.default=Object(r.b)((function(e){return{token:e.authentication.token,userId:e.authentication.userId,loading:e.studentCourse.loading||e.studentTest.loading||e.common.loading,notification:e.common.notification,tab:e.common.tab,selectedCourse:e.common.selectedCourse}}),(function(e){return{fetchCourses:function(t,n){return e(i.zb(t,n))},fetchTestResults:function(t,n){return e(i.Vb(t,n))},fetchNotifications:function(t){return e(i.Lb(t))},setNotification:function(t,n){return e(i.Sc(t,n))},setTab:function(t){return e(i.Yc(t))},setChatUser:function(t){e(i.Ic(t))},setTabLabels:function(t){return e(i.Zc(t))},setPanel:function(t){e(i.Lc(t))},logout:function(){e(i.jc())},fetchConfig:function(t){return e(i.tb(t))}}}))((function(e){var t=e.fetchTestResults,n=e.userId,r=e.token,i=e.loading,l=e.notification,m=e.fetchCourses,p=e.fetchNotifications,h=e.fetchConfig,b=e.setNotification,g=e.setTab,N=e.setChatUser,v=e.setTabLabels,k=e.setPanel,y=e.selectedCourse,_=e.logout;Object(a.useEffect)((function(){if(r){var e=f()("https://mernstackelearn.herokuapp.com/",{query:{token:r}}),a=function(){e.emit("loggedOut",{user:n})};return window.addEventListener("beforeunload",a),e.open(),e.on("updateCourses",(function(e){"student"!==e.userType&&"all"!==e.userType&&e.userId!==n||(m(r,"noSpinner"),p(r))})),e.on("updateResults",(function(e){"student"!==e.userType&&e.userId!==n||(t(r,"noSpinner"),p(r))})),e.emit("loggedIn",{user:n}),e.on("mainMenu",(function(e){e.userId===n&&(p(r),m(r,"noSpinner"))})),e.on("suspendAccount",(function(e){e.userId===n&&_()})),e.on("alert",(function(e){p(r);var t={_id:e._id,senderId:e.sender._id,message:e.content,type:e.type,avatar:e.sender.avatar,senderFirstName:e.sender.firstName,senderLastName:e.sender.lastName,courseName:e.course,courseId:e.courseId,userType:e.sender.type,file:e.file},n=setTimeout((function(){b(null,null)}),5e3);b(t,n)})),function(){e.emit("loggedOut",{user:n}),window.removeEventListener("beforeunload",a),e.disconnect()}}}),[]),Object(a.useEffect)((function(){if(r){var e=f()("https://mernstackelearn.herokuapp.com/",{query:{token:r}});return e.on("updateConfig",(function(e){"all"!==e.userType&&e.courseId!==(y||{})._id||h(r)})),function(){e.disconnect()}}}),[(y||{})._id]);return o.a.createElement(c.a,null,o.a.createElement(s.a,{active:i,transparent:!0}),l&&o.a.createElement(u.a,{onNotificationClick:function(e,t){g(1),k("chat"),v(["Contacts","Chat"]),N(e),b(null,null),d.a.push("/student-panel/course/".concat(t))},notification:l}))}))},944:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(30),i=n(945),c=n.n(i),s=n(78),u=n(947),l=n(4),f=n(420);t.a=Object(r.b)((function(e){return{tab:e.common.tab,coursePanel:e.common.coursePanel,testInSession:e.studentTest.testInSession,token:e.authentication.token}}),(function(e){return{markAsSeen:function(t,n){e(l.lc(t,n))},fetchNotifications:function(t){e(l.Lb(t))}}}))((function(e){var t,n,r=e.notification,i=e.onNotificationClick,l=e.coursePanel,d=e.tab,m=e.testInSession,p=e.token,h=(e.fetchNotifications,e.markAsSeen),b=Object(f.a)().t;return Object(a.useEffect)((function(){1===d&&"chat"===l&&h(r._id,p)}),[]),m||1===d&&"chat"===l||r.returnNull?null:(r.file&&(t=r.file.toLowerCase().split(".").pop()),"pdf"===t&&(n=o.a.createElement("i",{className:"far fa-file-pdf fa-2x"})),"mp3"===t&&(n=o.a.createElement("i",{className:"fas fa-file-audio fa-2x"})),"docx"!==t&&"doc"!==t||(n=o.a.createElement("i",{className:"fas fa-file-word fa-2x"})),"jpeg"!==t&&"jpg"!==t&&"jfif"!==t||(n=o.a.createElement("i",{className:"fas fa-file-image fa-2x"})),"avi"!==t&&"mp4"!==t&&"mkv"!==t&&"webm"!==t||(n=o.a.createElement("i",{className:"far fa-file-video fa-2x"})),o.a.createElement("div",{style:{transform:r?"translateY(0)":"translateY(-100vh)",opacity:r?"1":"0",cursor:"pointer"},className:[c.a.notification,c.a[r.type]].join(" "),onClick:function(){return i({_id:r.senderId,firstName:r.senderFirstName,lastName:r.senderLastName,profilePicture:r.avatar},r.courseId,r.userType,r.type)}},r.avatar&&o.a.createElement(u.a,{src:r.avatar}),o.a.createElement(s.a,{variant:"subtitle1"},"".concat(r.senderFirstName," ").concat(r.senderLastName," ").concat(b("notifications.from")," ").concat(r.courseName)),n,o.a.createElement(s.a,{variant:"subtitle1"},r.message.slice(0,25)+"...")))}))},945:function(e,t,n){e.exports={notification:"Notification_notification__ipYkd",withDrawer:"Notification_withDrawer__29NLM",noDrawer:"Notification_noDrawer__WZVKG",success:"Notification_success__1-5eR",chat:"Notification_chat__1_4NL",fail:"Notification_fail__3kH7Z"}},947:function(e,t,n){"use strict";var a=n(5),o=n(11),r=n(0),i=(n(2),n(10)),c=n(13),s=n(53),u=Object(s.a)(r.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var l=r.forwardRef((function(e,t){var n=e.alt,c=e.children,s=e.classes,l=e.className,f=e.component,d=void 0===f?"div":f,m=e.imgProps,p=e.sizes,h=e.src,b=e.srcSet,g=e.variant,N=void 0===g?"circle":g,v=Object(o.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),k=null,y=function(e){var t=e.src,n=e.srcSet,a=r.useState(!1),o=a[0],i=a[1];return r.useEffect((function(){if(t||n){i(!1);var e=!0,a=new Image;return a.src=t,a.srcSet=n,a.onload=function(){e&&i("loaded")},a.onerror=function(){e&&i("error")},function(){e=!1}}}),[t,n]),o}({src:h,srcSet:b}),_=h||b,E=_&&"error"!==y;return k=E?r.createElement("img",Object(a.a)({alt:n,src:h,srcSet:b,sizes:p,className:s.img},m)):null!=c?c:_&&n?n[0]:r.createElement(u,{className:s.fallback}),r.createElement(d,Object(a.a)({className:Object(i.a)(s.root,s.system,s[N],l,!E&&s.colorDefault),ref:t},v),k)}));t.a=Object(c.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(l)}}]);
(this["webpackJsonpe-learn"]=this["webpackJsonpe-learn"]||[]).push([[12],{1016:function(e,t,n){"use strict";n.r(t);var a=n(52),s=n(53),r=n(56),o=n(55),i=n(0),c=n.n(i),l=n(4),u=n(25),d=n(336),m=n(338),f=n(331),p=n(332),g=n(32),b=function(e){var t={mc:!1,essay:!1,speaking:!1,fillblanks:!1,allAnswersFilled:!0};return(e.mcQuestions||[]).forEach((function(e){0===e.length&&(t.mc=!0,t.allAnswersFilled=!1)})),(e.essayQuestions||[]).forEach((function(e){e||(t.essay=!0,t.allAnswersFilled=!1)})),(e.speakingQuestions||[]).forEach((function(e){e.audioFile||(t.speaking=!0,t.allAnswersFilled=!1)})),((e.fillBlankQuestions||{}).answers||[]).forEach((function(e){e&&"Select the correct answer"!==e||(t.fillblanks=!0,t.allAnswersFilled=!1)})),t},E=n(853),v=n(31),y=n(80),h=n(814),T=n(817),I=n(341),k=Object(f.a)({form:"studentTest",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:b})((function(e){var t=e.testInSession,n=Object(I.a)().t,a=t.readingMaterials[0]||{},s=t.audioMaterials[0]||{},r={background:"#1976d2",borderRadius:4,color:"white",padding:10};return c.a.createElement(v.a,null,c.a.createElement(T.a,{audioId:"mcAudioMaterial",pdfIndex:1,readingContent:a.content,audioSource:s.audio,onPreview:function(){return Object(h.b)("mcAudioMaterial")},fileUpload:a.fileUpload}),((t||{}).multipleChoiceQuestions||[]).map((function(e,t){var a=((e||{}).answerOptions||[]).map((function(e,t){return{label:e,value:e,placement:"start",color:"primary",name:"mc"}}));return c.a.createElement(v.a,{key:e._id},c.a.createElement(y.a,{paragraph:!0,variant:"h6"},"".concat(n("testSession.question")," ").concat(t+1)),c.a.createElement("div",{style:r,dangerouslySetInnerHTML:{__html:e.question}}),c.a.createElement(p.a,{name:"mcQuestions.".concat(t),component:E.a,numbered:!0,options:a,required:!1,column:!0}))})))})),O=Object(u.b)(null,(function(e){return{clearAnswers:function(t){e(Object(g.a)("testForm","mcQuestions[".concat(t,".correctAnswers]"),[]))}}}))(k),S=n(240),_=Object(f.a)({form:"studentTest",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:b})((function(e){var t=e.testInSession,n=e.path,a=Object(I.a)().t,s=t.readingMaterials[1]||{},r=t.audioMaterials[1]||{},o={background:"#1976d2",borderRadius:4,color:"white",padding:10,marginBottom:30};return c.a.createElement(v.a,null,c.a.createElement(T.a,{audioId:"essayAudioMaterial",pdfIndex:2,readingContent:s.content,audioSource:r.audio,onPreview:function(){return Object(h.b)("essayAudioMaterial")},fileUpload:s.fileUpload}),((t||{}).essayQuestions||[]).map((function(e,t){return c.a.createElement(v.a,{key:e._id},c.a.createElement(y.a,{paragraph:!0,variant:"h6"},"".concat(a("testSession.question")," ").concat(t+1)),c.a.createElement("div",{style:o,dangerouslySetInnerHTML:{__html:e.question}}),c.a.createElement(p.a,{component:S.a,noImage:!0,name:"essayQuestions.".concat(t),field:"essayQuestions.".concat(t),reduxForm:"studentTest",path:n}))})))})),D=n(849),w=n.n(D),j=n(850),x=n.n(j),C=n(881),M=n.n(C),A=n(898),R=n.n(A),P=n(819),L=n.n(P),H=n(746),B=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).blankListener=function(t){var n=parseInt((t.target.id.match(/\d+/)||[])[0]);(((e.props.formValues||{}).fillBlankQuestions||{}).answers||[]).map((function(e,t){return"blank-input-[".concat(t,"]")})).includes(t.target.id)&&e.props.updateAnswer(t.target.value,n)},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("change",(function(t){e.blankListener(t)}))}},{key:"render",value:function(){var e=this.props,t=e.formValues,n=e.t,a=e.testInSession,s=void 0===a?{}:a,r=(s.fillInBlanksQuestions||{}).blanks||[],o=x()(s.fillInBlanksQuestions.text,"-BLANK-",(function(e,a){var s=a/2-.5,o=(r[s]||[]).answerOptions;return!0===(r[s]||{}).selectableAnswer?c.a.createElement(v.a,{key:e+s},c.a.createElement("span",{className:M.a.BlankPreview},s+1," "),(r[s]||[]).audio&&c.a.createElement("span",{dangerouslySetInnerHTML:{__html:L.a.sanitize('\n                      <audio id="audio['.concat(s,']" src="').concat((r[s]||{}).audio,'">\n                        </audio>\n                        <span class="').concat(M.a.Pointer,'" onClick="(function(){\n                          const audio = document.getElementById(\'audio[').concat(s,']\');\n                          audio.play()\n                          return false;\n                          })();return false;" >\n                          <i class="fa fa-volume-down"></i>\n                        </span>\n                        '),{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}),c.a.createElement("select",{readOnly:!0,className:M.a.SelectField,id:"blank-input-[".concat(s,"]"),onChange:function(){return console.log("this is just to prevent error")},value:((((t||{}).fillBlankQuestions||{}).answers||[])[s]||"").trim()},c.a.createElement("option",null,n("testSession.fields.selectAnswer")),o.map((function(e,t){return c.a.createElement("option",{key:e+t,value:(e||"").replace(/"/g,"'").trim()},R()((e||"").replace(/"/g,"'")))})))):!1===(r[s]||[]).selectableAnswer?c.a.createElement(v.a,{key:e+s},c.a.createElement("span",{className:M.a.Inline},c.a.createElement("span",{className:M.a.BlankPreview},s+1," "),(r[s]||[]).audio&&c.a.createElement(v.a,null,c.a.createElement("span",{dangerouslySetInnerHTML:{__html:L.a.sanitize('\n                        <audio id="audio['.concat(s,']" src="').concat((r[s]||{}).audio,'">\n                        </audio>\n                        <span class="').concat(M.a.Pointer,'" onClick="(function(){\n                          const audio = document.getElementById(\'audio[').concat(s,']\');\n                          audio.play()\n                          return false;\n                          })();return false;" >\n                          <i class="fa fa-volume-down"></i>\n                        </span>\n                      '),{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}})),c.a.createElement("input",{type:"text",className:M.a.InputField,id:"blank-input-[".concat(s,"]"),onChange:function(){return console.log("this is just to prevent error")},value:(((t||{}).fillBlankQuestions||{}).answers||[])[s]}))):void 0})),i=[];o.forEach((function(e,t){"string"===typeof e?i.push(e):i.push(w.a.renderToString(e))}));var l=(i||[]).join(""),u=s.readingMaterials[3]||{},d=s.audioMaterials[3]||{};return c.a.createElement(v.a,null,c.a.createElement(T.a,{audioId:"fillBlankAudioMaterial",pdfIndex:1,readingContent:u.content,audioSource:d.audio,onPreview:function(){return Object(h.b)("fillBlankAudioMaterial")},fileUpload:u.fileUpload}),c.a.createElement("div",{dangerouslySetInnerHTML:{__html:L.a.sanitize(l,{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}))}}]),n}(i.Component),N=Object(f.a)({form:"studentTest",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:b})(B),U=Object(u.b)(null,(function(e){return{updateAnswer:function(t,n){e(Object(g.a)("studentTest","fillBlankQuestions.answers.".concat(n),t))}}}))(Object(H.a)("common")(N)),F=n(6),Y=n.n(F),W=n(73),Q=n(812),V=n(438),q=n(894),z=n.n(q),X=n(830),J=Object(f.a)({form:"studentTest",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:b})((function(e){var t=e.formValues,n=void 0===t?{}:t,a=e.changeField,s=e.testInSession,r={background:"#1976d2",borderRadius:4,color:"white",padding:10},o=Object(I.a)().t,l=Object(i.useState)(!1),u=Object(Q.a)(l,2),d=u[0],m=u[1],f=Object(i.useState)(!1),g=Object(Q.a)(f,2),b=g[0],E=g[1],k=function(e,t,n,s){s?(a("speakingQuestions.".concat(n,".recording"),s),a("speakingQuestions.".concat(n,".recorder"),e),a("speakingQuestions.".concat(n,".recordingTimeout"),t)):function(){clearTimeout(b),m(!0);var e=setTimeout((function(){m(!1)}),5e3);E(e)}()},O=function(e,t,n){a("speakingQuestions.".concat(n,".recording"),!1),a("speakingQuestions.".concat(n,".recordedBlob"),e),a("speakingQuestions.".concat(n,".audioFile"),t)},S=function(e){return((n||{}).speakingQuestions||[])[e]||{}},_=s.readingMaterials[2]||{},D=s.audioMaterials[2]||{};return Object(i.useEffect)((function(){return function(){clearTimeout(b)}}),[]),c.a.createElement(v.a,null,c.a.createElement(T.a,{audioId:"speakingAudioMaterial",pdfIndex:2,readingContent:_.content,audioSource:D.audio,onPreview:function(){return Object(h.b)("speakingAudioMaterial")},fileUpload:_.fileUpload}),s.speakingQuestions.map((function(e,t){return c.a.createElement(v.a,{key:e._id},c.a.createElement(y.a,{paragraph:!0,variant:"h6"},"".concat(o("testSession.question")," ").concat(t+1)),e.question?c.a.createElement("div",{style:r,dangerouslySetInnerHTML:{__html:e.question}}):c.a.createElement("div",null,c.a.createElement("audio",{id:"audioQuestion[".concat(t,"]"),src:e.questionAudio}),c.a.createElement(V.a,{fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){Object(h.b)("audioQuestion[".concat(t,"]"))},startIcon:c.a.createElement(z.a,null)},o("testSession.buttons.playQuestion"))),c.a.createElement(p.a,{component:X.a,isMicAlert:d,name:"speakingQuestions.".concat(t,".recordedBlob"),onStart:function(){var e=Object(W.a)(Y.a.mark((function e(n){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.c)(n,null,t,null,function(){var e=Object(W.a)(Y.a.mark((function e(n){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:a=e.sent,O(a.blob,a.file,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,k(a.recorder,a.recordingTimeout,t,a.isRecording);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onStop:function(){var e=Object(W.a)(Y.a.mark((function e(n){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)(n,null,t,S(t).recordingTimeout,S(t).recorder);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,O(a.blob,a.file,t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPreview:function(){Object(h.b)("audioAnswer[".concat(t,"]"))},onClear:function(){return O(null,null,t)},id:"audioAnswer[".concat(t,"]"),recordDisabled:S(t).recording,audioSource:S(t).recordedBlob,previewType:"button",recordButtonText:o("testSession.buttons.recordAnswer")}))})))})),G=Object(u.b)(null,(function(e){return{changeField:function(t,n){e(Object(g.a)("studentTest",t,n))}}}))(J),K=n(248),Z=n.n(K),$=n(247),ee=n.n($),te=n(85),ne=n(246),ae=n(251),se=n(61),re=n.n(se),oe=Object(u.b)((function(e){return{testInSession:e.studentTest.testInSession}}))((function(e){var t=e.testInSession,n=e.classes,a=e.submitTest,s=Object(I.a)().t,r=t.endTime,o=c.a.useState(null),l=Object(Q.a)(o,2),u=l[0],d=l[1];Object(i.useEffect)((function(){var e=setInterval((function(){var t=r-Date.now();d(t),t<0&&(a(),clearInterval(e))}),1e3);return function(){clearInterval(e)}}),[]);var m=parseInt(re()(parseInt((t||{}).endTime)).format("H")),f=(parseInt(re()(parseInt((t||{}).endTime)).format("HH")),re()(parseInt((t||{}).endTime)).format("HH:mm"));return c.a.createElement("div",{style:{overflow:"hidden"}},u>0&&c.a.createElement(ae.a,{danger:u/1e3<60,activeStep:60*parseInt((t||{}).timer)-u/1e3-1,steps:60*parseInt((t||{}).timer),progress:!0}),u>0&&c.a.createElement("div",{className:u/1e3<60?n.timerDanger:n.timer},(t||{}).timer&&c.a.createElement("div",null,c.a.createElement(y.a,{variant:"subtitle1"},"".concat(s("testSession.testClosesAt",{laOrLas:1===m?"la":"las",time:f}))),u/1e3<300&&u/1e3>60&&(t||{}).timer>5&&c.a.createElement("div",{className:n.timeWarning},c.a.createElement(y.a,{variant:"caption"},s("testSession.lessThanFiveMin"))),u/1e3<60&&c.a.createElement("div",{className:n.timeWarning},c.a.createElement(y.a,{variant:"caption"},s("testSession.lessThanOneMin"))))))})),ie=n(865),ce=n(77),le=n.n(ce),ue=n(40),de=n(98),me=n(822),fe=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).onSubmit=function(e,t,n,a){if(t||n||s.props.formErrors.allAnswersFilled||s.state.isWarned||a){var r=Object(ne.a)((s.props.studentTest||{}).values,"studentTest"),o=(s.state.initialUrls||[]).filter((function(e){if(!r.includes(e))return e}));s.props.submitTest((s.props.studentTest||{}).values,s.props.token,s.props.userId,!t,s.props.testInSession,s.props.course._id,o,n,e),n&&s.props.exitAssignment()}else s.setState({isWarned:!0})},s.nextPage=function(){s.setState((function(e){return{page:e.page+1}}))},s.previousPage=function(){s.setState((function(e){return{page:e.page-1}}))},s.state={page:1,initialUrls:[],isWarned:!1,socket:null},s}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.startingValues,n=e.courses,a=e.notifications,s=(e.course,e.token),r=e.testInSession,o=e.setCourse,i=e.markAsSeen,c=e.fetchNotifications,l=e.fetchCourses,u=e.returnToCourses,d=e.fetchTestResults,m=e.userId,f=e.setTabLabels,p=Object(ne.a)(t,"studentTest"),g=t.course,b=(n||[]).find((function(e){return e._id===g}));o(b);var E=(a||[]).find((function(e){if(e.documentId===t.test&&"assignment"===e.documentType)return e}));E&&(i(E._id,s),c(s));var v=le()("https://mernstackelearn.herokuapp.com/",{query:{token:s}});v.on("mainMenu",(function(e){"student"!==e.userType&&e.userId!==m||!("deleteTest"===e.action&&r._id===e.testId||"deactivateCourse"===e.action&&(b||{})._id===e.course||("closeTest"===e.action||"excuseTest"===e.action)&&(t||{}).test===e.testId||"denyStudentCourseAccess"===e.action&&(b||{})._id===e.course&&e.userId===m||"resetTest"===e.action&&r._id===e.testId)||(f(["All courses","Your courses"]),l(s),d(s),u(),ue.a.push("/student-panel/courses"))})),this.setState({initialUrls:p,socket:v})}},{key:"componentWillUnmount",value:function(){this.state.socket.disconnect()}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.testInSession,s=void 0===a?{}:a,r=n.isTest,o=n.loading,i=n.initialValues,l=n.formValues,u=n.formErrors,d=n.changeSection,m=(n.coursePanel,n.setCourse,n.width),f=n.t,p=(this.props.location.pathname,"courses/".concat((s||{}).course,"/tests/").concat((s||{})._id,"/results/").concat((i||{})._id)),g=(s||{}).sectionWeights||{},b=g.mcSection,E=g.essaySection,I=g.fillBlankSection,k=g.speakingSection,S=1,D=b?2:1;b&&E&&(e=3),!b&&E&&(e=2),b&&!E&&(e=2),b||E||(e=1);var w=((s||{}).audioMaterials||[])[4]||{},j=((s||{}).readingMaterials||[])[4]||{},x=w.audio&&""!==w.audio||j.content&&""!==j.content,C=Object.values((s||{}).sectionWeights||{}).filter((function(e){return null!==e})).length;x&&(S+=1,D+=1,e+=1,C+=1);var A=C,R=this.state.page;1===R&&x&&d("materials"),R===S&&b&&d("mc"),R===D&&E&&d("essay"),R===e&&k&&d("speaking"),R===A&&I&&d("fillblanks");var P,L=c.a.createElement("div",{className:1!==R?M.a.flexPositioningSpaceBetween:M.a.flexPositioningEnd},!(1===R)&&c.a.createElement(V.a,{color:"primary",style:{marginRight:"3px"},onClick:function(){t.previousPage(),t.setState({isWarned:!1})},startIcon:c.a.createElement(ee.a,null),size:"small"},x&&2===R?(s||{}).assignment?f("testSession.assignmentResources"):f("testSession.testResources"):f("testSession.buttons.previousSection")),!(R===C)&&c.a.createElement(V.a,{onClick:function(){t.nextPage(),t.setState({isWarned:!1})},style:{marginLeft:"3px"},color:"primary",endIcon:c.a.createElement(Z.a,null),size:"small"},f(x&&1===R?"testSession.buttons.questions":"testSession.buttons.nextSection")));return R===S&&b&&(P=f("testSession.multiplechoicesection")),R===D&&E&&(P=f("testSession.essaysection")),R===e&&k&&(P=f("testSession.speakingsection")),R===A&&I&&(P=f("testSession.fillintheblankssection")),c.a.createElement("div",{style:m<500?{marginTop:30}:null,className:M.a.TestContainer},c.a.createElement(te.a,{active:o,transparent:!0}),c.a.createElement("div",{className:M.a.flexPositioningSpaceBetween},c.a.createElement(V.a,{onClick:function(){return t.onSubmit(p,!0)},size:"small"},f("testSession.buttons.save")),(s||{}).assignment&&c.a.createElement(V.a,{onClick:function(){return t.onSubmit(p,!0,!0)},color:"secondary",size:"small"},f("testSession.buttons.exit"))),(s||{}).timer&&c.a.createElement(oe,{classes:M.a,submitTest:function(){return t.onSubmit(p,null,null,!0)}}),c.a.createElement(de.b,{exact:!0,path:r?"/student-panel/test-in-session":"*"},c.a.createElement(y.a,{style:{margin:20},variant:"h4",gutterBottom:!0},P),1===R&&x&&c.a.createElement(v.a,null,c.a.createElement(T.a,{audioId:"testAudioMaterial",pdfIndex:0,readingContent:j.content,audioSource:w.audio,onPreview:function(){return Object(h.b)("testAudioMaterial")},fileUpload:j.fileUpload})),R===S&&b&&c.a.createElement(v.a,null,c.a.createElement(O,{testInSession:s,test:r})),R===D&&E&&c.a.createElement(v.a,null,c.a.createElement(_,{test:r,path:p,testInSession:s})),R===e&&k&&c.a.createElement(v.a,null,c.a.createElement(G,{testInSession:s,test:r,formValues:l})),R===A&&I&&c.a.createElement(v.a,null,c.a.createElement(U,{formValues:l,testInSession:s,test:r})),L,this.state.isWarned&&!u.allAnswersFilled&&c.a.createElement(y.a,{paragraph:!0,color:"error",variant:"subtitle1",gutterBottom:!0},f("testSession.errors.questionsUnanswered")),c.a.createElement(me.a,{clicked:function(e){t.onSubmit(p)},isError:this.state.isWarned&&!u.allAnswersFilled},this.state.isWarned&&!u.allAnswersFilled?f("testSession.buttons.submitAnyway"):f("testSession.buttons.submit"))),c.a.createElement(de.b,{exact:!0,component:ie.a,path:"/student-panel/test-in-session/lessons"}))}}]),n}(i.Component);fe.getDerivedStateFromProps=function(e,t){return e.formErrors.allAnswersFilled?{isWarned:!1}:null};var pe=Object(f.a)({form:"studentTest",enableReinitialize:!0,destroyOnUnmount:!0,forceUnregisterOnUnmount:!0,validate:b})(fe);t.default=Object(de.k)(Object(u.b)((function(e,t){return{formValues:Object(d.a)("studentTest")(e),formErrors:Object(m.a)("studentTest")(e),token:e.authentication.token,userId:e.authentication.userId,testInSession:t.isTest?e.studentTest.testInSession:e.studentTest.assignmentInSession,studentTest:e.form.studentTest,testTimesUp:e.studentTest.testTimesUp,initialValues:e.studentTest.loadedTestDataInProgress,intervalId:e.studentTest.testTimerCheckerIntervalId,timeLeft:e.studentTest.testTimeLeft,loading:e.studentTest.loading,coursePanel:e.common.coursePanel,courses:e.common.courses,course:e.common.selectedCourse,testResults:e.studentTest.testResults,notifications:e.common.notifications,width:e.common.width,startingValues:e.studentTest.loadedTestDataInProgress}}),(function(e){return{submitTest:function(t,n,a,s,r,o,i,c,u){e(l.bd(t,n,a,s,r,o,i,c,u))},fetchNotifications:function(t){e(l.Fb(t))},fetchCourses:function(t,n){return e(l.tb(t,n))},fetchTestResults:function(t,n){return e(l.Pb(t,n))},changeSection:function(){e(l.Rc())},exitAssignment:function(){e(l.mb())},setTabLabels:function(t){e(l.Tc(t))},setCourse:function(t){e(l.Dc(t))},markAsSeen:function(t,n){e(l.fc(t,n))},returnToCourses:function(){e(l.xc())}}}))(Object(H.a)("common")(pe)))},1225:function(e,t,n){},1320:function(e,t,n){"use strict";n.r(t);var a=n(35),s=n(812),r=n(0),o=n.n(r),i=n(4),c=n(25),l=n(797),u=n(747),d=n(800),m=n(1013),f=n.n(m),p=n(893),g=n.n(p),b=n(1306),E=n(31),v=n(61),y=n.n(v),h=n(1309),T=n(80),I=n(821),k=n.n(I),O=n(846),S=n.n(O),_=n(806),D=n(741),w=n(341),j=Object(c.b)((function(e){return{course:e.common.selectedCourse,testResults:e.studentTest.testResults,token:e.authentication.token,notifications:e.common.notifications}}),(function(e){return{openModal:function(t,n){return e(i.nc(t,n))},onStartAssignment:function(t,n){e(i.Rb(t,!0,n,null,!1)),e(i.Fc("assignment")),e(i.Sc(0))},onContinueAssignment:function(t,n,a){e(i.Rb(t,!0,n,a,!1)),e(i.Fc("assignment")),e(i.Sc(0))},markAsSeen:function(t,n){e(i.fc(t,n))}}}))((function(e){var t=e.testResults,n=void 0===t?{}:t,a=e.isTest,s=(e.studentId,e.token),i=e.folder,c=e.isModules,l=e.course,m=e.isAssignment,f=e.notifications,p=e.onStartAssignment,g=e.onContinueAssignment,b=e.openModal,v=e.markAsSeen;e.fetchNotifications;Object(r.useEffect)((function(){var e=l.tests.filter((function(e){return!e.assignment})).map((function(e){return e._id})),t=l.tests.filter((function(e){return e.assignment})).map((function(e){return e._id})),n=(f||[]).find((function(n){return(e||[]).includes(n.documentId)&&a&&"test"===n.documentType&&!n.seen||(t||[]).includes(n.documentId)&&m&&"assignment"===n.documentType&&!n.seen||(t||[]).includes(n.documentId)&&m&&"resetAssignment"===n.documentType&&!n.seen?n:void 0}));n&&v(n._id,s)}),[]);var I,O=(n||{}).assignmentsInSession,j=(((n||{}).testResults||[]).filter((function(e){return e.course===l._id}))||[]).filter((function(e){return e.closed&&!e.isExcused?e.test:null})).map((function(e){return e.test})),x=(((n||{}).testResults||[]).filter((function(e){return e.isExcused}))||[]).map((function(e){return e.test})),C=(l.tests||[]).filter((function(e){return!e.assignment})),M=(l.tests||[]).filter((function(e){return e.assignment})),A=C.filter((function(e){return j.includes(e._id)?null:!e.assignment})).filter((function(e){return e})),R=M.filter((function(e){return j.includes(e._id)?null:e.assignment}));a&&(I=A),m&&(I=R);var P=(i||[]).map((function(e){return e.documentId}))||[],L=Object(w.a)().t;return o.a.createElement(E.a,null,(I||[]).map((function(e,t){if(!P.includes(e._id)&&c)return null;var a=new Date(parseInt(e.dueDate||"")).getTime(),r=Date.now()>a,i=Math.ceil((Date.now()-a)/864e5),l=i>(e.lateDaysAllowed||0),m=parseInt(e.availableOnDate)<Date.now();if(e.assignment)return o.a.createElement(E.a,{key:e._id},(O||[]).map((function(e){return e.assignment})).includes(e._id)?o.a.createElement(u.a,{disabled:l,style:{display:"block"},button:!0,onClick:function(t){t.stopPropagation();var a=((n||{}).testResults||[]).find((function(t){return t.test===e._id}));g(e._id,s,a)}},o.a.createElement("div",{style:{display:"flex"}},c&&o.a.createElement(E.a,null,o.a.createElement(D.a,{control:o.a.createElement(_.a,{checked:!1,value:"checked"})}),o.a.createElement(h.a,{style:{margin:"auto",minWidth:"30px"}},o.a.createElement(k.a,{color:"primary"}))),o.a.createElement(d.a,{primary:"".concat(L("tests.continueAssignment")," ").concat(e.testName)})),l&&o.a.createElement(T.a,{style:{color:"red"}},L("tests.missedDeadline")),e.dueDate&&o.a.createElement("div",null,o.a.createElement(d.a,{secondary:"\n                     ".concat(L(r?"tests.assignmentWasDueOn":"tests.assignmentIsDueOn")," ").concat(y()(parseInt(e.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                    ")}))):o.a.createElement(u.a,{style:{display:"block"},disabled:Date.now()<parseInt(e.availableOnDate||0)||l||x.includes(e._id),button:!0,onClick:function(t){t.stopPropagation(),p(e._id,s)}},o.a.createElement("div",{style:{display:"flex"}},c&&o.a.createElement(E.a,null,o.a.createElement(D.a,{control:o.a.createElement(_.a,{checked:!1,value:"checked"})}),o.a.createElement(h.a,{style:{margin:"auto",minWidth:"30px"}},o.a.createElement(k.a,{color:"primary"}))),o.a.createElement(d.a,{primary:"".concat(L("tests.startAssignment")," ").concat(e.testName)})),l&&o.a.createElement(T.a,{style:{color:"red"}},L("tests.missedDeadline")),x.includes(e._id)&&o.a.createElement(T.a,{style:{color:"red"}},L("tests.excused")),e.availableOnDate&&o.a.createElement("div",null,o.a.createElement(d.a,{secondary:"\n                         ".concat(L(m?"tests.assignmentHasOpenedOn":"tests.assignmentWillOpenOn")," ").concat(y()(parseInt(e.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                      ")})),e.dueDate&&o.a.createElement("div",null,o.a.createElement(d.a,{secondary:"".concat(L(l?"tests.wasDueOn":"tests.DueOn")," ").concat(y()(parseInt(e.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                          ")})),e.allowLateSubmission&&!l&&o.a.createElement(E.a,null,o.a.createElement(d.a,{secondary:"".concat(e.latePenalty,"% ").concat(L("tests.latePenalty"),"\n                      ")}),o.a.createElement(d.a,{secondary:"".concat(L("tests.closesOn")," ").concat(y()(parseInt(e.dueDate)+864e5*e.lateDaysAllowed).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                          ")})),e.allowLateSubmission&&!l&&r&&o.a.createElement(T.a,{style:{color:"red"}},"".concat(L("tests.latePenaltyAccumulated")," ").concat(i*e.latePenalty,"%"))));if(!e.assignment){var f=-1!==((n||{}).testResults||[]).findIndex((function(t){return t.test===e._id}));return o.a.createElement(E.a,{key:e._id},o.a.createElement(u.a,{disabled:Date.now()<parseInt(e.availableOnDate)||l||f,style:{display:"block"},button:!0,onClick:function(t){t.stopPropagation(),b(e,"startTestConfirmation")},key:e._id},o.a.createElement("div",{style:{display:"flex"}},c&&o.a.createElement(E.a,null,o.a.createElement(D.a,{control:o.a.createElement(_.a,{checked:!1,value:"checked"})}),o.a.createElement(h.a,{style:{margin:"auto",minWidth:"30px"}},o.a.createElement(S.a,{color:"primary"}))),o.a.createElement(d.a,{primary:"".concat(L("tests.startTest")," ").concat(e.testName)}),o.a.createElement(T.a,{style:{marginTop:"8px"},variant:"caption",color:"final"===e.testType||"midterm"===e.testType?"error":"inherit"},L("tests.".concat(e.testType)))),e.availableOnDate&&o.a.createElement("div",null,o.a.createElement(d.a,{secondary:"".concat(L(m?"tests.testHasOpenedOn":"tests.testWillOpenOn")," ").concat(y()(parseInt(e.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n              ")})),e.dueDate&&o.a.createElement("div",null,o.a.createElement(d.a,{secondary:"\n                      ".concat(L(l?"tests.testClosedOn":"tests.testClosesOn")," \n                      ").concat(y()(parseInt(e.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                    ")})),l&&o.a.createElement(T.a,{style:{color:"red"}},L("tests.missedDeadline"))))}})))})),x=n(984),C=n(985),M=n(987),A=n(986),R=n(438),P=n(1225),L=n.n(P),H=n(818),B=Object(c.b)((function(e){return{course:e.common.selectedCourse,testResults:e.studentTest.testResults,studentId:e.authentication.userId,token:e.authentication.token}}),(function(e){return{onReviewTest:function(t,n,a){e(i.Rb(n._id,!0,a,!1,t))}}}))((function(e){var t=e.testResults,n=e.isTest,a=e.isAssignment,s=e.folder,r=e.isModules,i=e.course,c=e.onReviewTest,l=(e.studentId,e.token),m=Object(w.a)().t,f=(s||[]).map((function(e){return e.documentId}))||[];return o.a.createElement(E.a,null,((t||{}).testResults||[]).map((function(e,s){if(!e.closed||e.isExcused)return null;var p=(e||{}).test,g=((i||{}).tests||[]).find((function(e){return e._id===p}))||{};if(g.course!==i._id)return null;if(!((t||{}).testResults.findIndex((function(e){return e.closed}))>-1))return o.a.createElement(T.a,{variant:"subtitle1"},m(n?"tests.notCompletedTests":"tests.notCompletedAssignments"));function b(e,t){return{info:e,value:t}}var v=[((g||{}).sectionWeights||{}).mcSection?b(m("testReview.multiplechoicesection"),"".concat(((e||{}).multiplechoiceSection||{}).grade,"%")):null,((g||{}).sectionWeights||{}).essaySection?b(m("testReview.essaysection"),"".concat(((e||{}).essaySection||{}).grade,"%")):null,((g||{}).sectionWeights||{}).speakingSection?b(m("testReview.speakingsection"),"".concat(((e||{}).speakingSection||{}).grade,"%")):null,((g||{}).sectionWeights||{}).fillBlankSection?b(m("testReview.fillintheblankssection"),"".concat(((e||{}).fillInBlanksSection||{}).grade,"%")):null].filter((function(e){return null!==e})),I=o.a.createElement(E.a,null,o.a.createElement(T.a,{variant:"h5",gutterBottom:!0},m("tests.summary")),o.a.createElement(x.a,{className:L.a.table,"aria-label":"simple table"},o.a.createElement(C.a,null,v.map((function(e,t){return o.a.createElement(A.a,{className:0===t?L.a.MuiTableRow:"",key:e.info},o.a.createElement(M.a,{className:0===t?L.a.MuiTableCell:"",component:"th",scope:"row"},e.info),o.a.createElement(M.a,{className:0===t?L.a.MuiTableCell:"",align:"right"},e.value))})))));return a&&!g.assignment||n&&g.assignment?null:(!e.graded||g.gradeReleaseDate>Date.now()&&g.gradeReleaseDate||!e.grade&&0!==e.grade)&&e.closed?o.a.createElement(E.a,{key:e._id},!r&&o.a.createElement(H.a,{index:s,disabled:!0,noDetails:!0,summary:g.testName+" "+m("tests.".concat(g.testType)),secondaryText:g.gradeReleaseDate>Date.now()?m("tests.gradesReleaseOn")+" "+y()(parseInt(g.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):m("tests.gradePending")}),r&&f.includes(e.test)&&o.a.createElement(u.a,{style:{display:"block"},disabled:!0},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(D.a,{control:o.a.createElement(_.a,{checked:!0,value:"checked"})}),o.a.createElement(h.a,{style:{margin:"auto",minWidth:"30px"}},n?o.a.createElement(S.a,{color:"primary"}):o.a.createElement(k.a,{color:"primary"})),o.a.createElement(d.a,{primary:g.testName})),o.a.createElement(d.a,{secondary:g.gradeReleaseDate>Date.now()?m("tests.gradesReleaseOn")+" "+y()(parseInt(g.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):m("tests.gradePending")}))):o.a.createElement(E.a,{key:e._id},!r&&o.a.createElement(H.a,{index:s,summary:"".concat(g.testName," ").concat(g.testType.charAt(0).toUpperCase()+g.testType.slice(1)," ").concat((e||{}).grade,"%")},I,o.a.createElement(R.a,{fullWidth:!0,color:"primary",onClick:function(){return c(e,g,l)}},n?m("tests.reviewTest"):null,a?m("tests.reviewAssignment"):null)),r&&f.includes(e.test)&&o.a.createElement(u.a,{button:!0,onClick:function(){return c(e,g,l)},style:{display:"block"}},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(D.a,{control:o.a.createElement(_.a,{checked:!0,value:"checked"})}),o.a.createElement(h.a,{style:{margin:"auto",minWidth:"30px"}},n?o.a.createElement(S.a,{color:"primary"}):o.a.createElement(k.a,{color:"primary"})),o.a.createElement(d.a,{primary:"".concat(g.testName," ").concat((e||{}).grade,"%")}))))})))})),N=n(865),U=Object(c.b)((function(e){return{course:e.common.selectedCourse}}))((function(e){var t=e.folder,n=void 0===t?[]:t,a=e.course,s=(a.tests||[]).filter((function(e){return!e.assignment})).map((function(e){return e._id})),r=(a.tests||[]).filter((function(e){return e.assignment})).map((function(e){return e._id})),i=n.find((function(e){return r.includes(e.documentId)})),c=n.find((function(e){return s.includes(e.documentId)})),l=Object(w.a)().t;return o.a.createElement(E.a,null,o.a.createElement(N.a,{isModules:!0,folder:n}),i&&o.a.createElement(u.a,{style:{background:"#2196f3"}},o.a.createElement(T.a,{style:{color:"white"}},l("studentModules.assignments"))),o.a.createElement("div",null,o.a.createElement(j,{folder:n,isAssignment:!0,isModules:!0}),o.a.createElement(B,{folder:n,isModules:!0,isAssignment:!0})),c&&o.a.createElement(u.a,{style:{background:"#2196f3"}},o.a.createElement(T.a,{style:{color:"white"}},l("studentModules.tests"))),o.a.createElement("div",null,o.a.createElement(j,{folder:n,isTest:!0,isModules:!0}),o.a.createElement(B,{folder:n,isModules:!0,isTest:!0})))})),F=n(85),Y=function e(t){var n,a,s=t.subjects,r=t.topics,i=t.moduleIndex,c=t.subjectIndex,m=t.folderType,f=Object(w.a)().t;return"subject"===m&&(n=s,a=[40,40,50]),"topic"===m&&(n=r,a=[80,80,90]),o.a.createElement(E.a,null,o.a.createElement(u.a,{style:{paddingLeft:a[0]}},o.a.createElement(d.a,{primary:f("studentModules.".concat(m,"s"))})),(n||[]).map((function(t,r){var f,p,g,b;return"subject"===m&&(n=s,f="module[".concat(i,"]subject[").concat(r,"]"),p=t.topics,g="topic",b="".concat(r+1," . ").concat(t.subjectName)),"topic"===m&&(n=t.topics,f="module[".concat(i,"]subject[").concat(c,"]topic[").concat(r,"]"),b="".concat(function(e){if(!+e)return!1;for(var t=String(+e).split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],a="",s=3;s--;)a=(n[+t.pop()+10*s]||"")+a;return Array(+t.join("")+1).join("M")+a}(r+1),". ").concat(t.topicName)),o.a.createElement(E.a,{key:f},o.a.createElement(u.a,{style:{paddingLeft:a[1]}},o.a.createElement(d.a,{secondary:b})),o.a.createElement("div",{style:{paddingLeft:a[2]}},o.a.createElement(U,{folder:t.folder})),"topic"!==m&&o.a.createElement(l.a,{component:"div",disablePadding:!0},p.length>0&&o.a.createElement(e,{subjects:s,topics:t.topics,moduleIndex:i,subjectIndex:"subject"===m?r:null,folderType:g})))})))},W=Object(c.b)((function(e){return{students:e.common.students,modules:e.common.modules}}))((function(e){var t=e.modules,n=e.loading,a=Object(w.a)().t,r=o.a.useState(-1),i=Object(s.a)(r,2),c=i[0],m=i[1];return o.a.createElement(l.a,null,o.a.createElement(F.a,{active:n,transparent:!0}),((t||{}).modules||[]).map((function(e,t){var n=-1!==c&&c!=="module[".concat(t,"]")||e.isDisabled;return o.a.createElement(E.a,{key:"module[".concat(t,"]")},o.a.createElement(u.a,{style:{background:c==="module[".concat(t,"]")?"#1769aa":"",color:c==="module[".concat(t,"]")?"white":"",opacity:n?.2:1,cursor:n?"auto":"pointer",borderLeft:-1===c||n?"none":"5px solid #2196f3"},button:!n,onClick:function(){var e;n||(e="module[".concat(t,"]"),m(c===e?-1:e))}},o.a.createElement(d.a,{primaryTypographyProps:{variant:"h6"},primary:"".concat(a("studentModules.module")," ").concat(t+1," ").concat(e.moduleName)}),c==="module[".concat(t,"]")?o.a.createElement(f.a,null):o.a.createElement(g.a,null)),o.a.createElement(b.a,{in:c==="module[".concat(t,"]"),timeout:"auto",unmountOnExit:!0},o.a.createElement("div",{style:{borderLeft:"5px solid #2196f3"}},o.a.createElement(U,{folder:e.folder}),o.a.createElement(l.a,{component:"div",disablePadding:!0},e.subjects.length>0&&o.a.createElement(Y,{folderType:"subject",module:e,subjects:e.subjects,moduleIndex:t})))))})))})),Q=n(1018),V=n(1012),q=n(1016),z=Object(c.b)((function(e){return{selectedCourse:e.common.selectedCourse,courses:e.common.courses}}),(function(e){return{openModal:function(t,n){e(i.nc(t,n))}}}))((function(e){var t=e.selectedCourse,n=e.courses,a=e.openModal,s=(Object(w.a)().t,n.find((function(e){return e._id===t._id})));return o.a.createElement(E.a,null,o.a.createElement(l.a,null,s.resources.map((function(e){var t,n=(e.resource||"").split(".").pop();return"pdf"===n&&(t=o.a.createElement("i",{className:"far fa-file-pdf fa-2x"})),"docx"!==n&&"doc"!==n||(t=o.a.createElement("i",{className:"fas fa-file-word fa-2x"})),"jpeg"!==n&&"jpg"!==n&&"jfif"!==n||(t=o.a.createElement("i",{className:"fas fa-file-image fa-2x"})),"mp4"!==n&&"avi"!==n||(t=o.a.createElement("i",{className:"far fa-file-video fa-2x"})),o.a.createElement(u.a,{key:e._id,button:!0,onClick:function(){return a({loadedFile:e.loadedResource,ext:n},"courseResource")}},t&&o.a.createElement("span",{style:{marginRight:20}},t),o.a.createElement(d.a,{primary:e.resourceName}))}))))})),X=n(879),J=n(172),G=n(77),K=n.n(G),Z=n(40),$=n(1014),ee=n(98);t.default=Object(c.b)((function(e){e.common.selectedCourse;var t=JSON.stringify((e.common.selectedCourse||{}).regularOfficeHours),n=JSON.stringify((e.common.selectedCourse||{}).irregularOfficeHours);return{userId:e.authentication.userId,selectedCourse:e.common.selectedCourse,courses:e.common.courses,tab:e.common.tab,coursePanelSection:e.common.coursePanel,assignmentInSession:e.studentTest.assignmentInSession,loadedTestDataInProgress:e.studentTest.loadedTestDataInProgress,token:e.authentication.token,regOfficeHours:t,irregOfficeHours:n,selectedChatUser:e.common.selectedChatUser,modalDocument:e.common.modalDocument,loading:e.common.loading,instructorLoggedIn:e.authentication.instructorLoggedIn,testInSession:e.studentTest.testInSession}}),(function(e){return{fetchCourses:function(t){return e(i.tb(t))},fetchTestResults:function(t){return e(i.Pb(t))},setTab:function(t){return e(i.Sc(t))},fetchNotifications:function(t){return e(i.Fb(t))},returnToCourses:function(){e(i.xc())},setCourse:function(t){e(i.Dc(t))},closeModal:function(){e(i.s())},fetchModules:function(t,n,a){return e(i.Cb(t,n,a))},fetchUser:function(t){return e(i.Ub(t))},fetchConfig:function(t){return e(i.nb(t))},fetchStudents:function(t,n,a){return e(i.Lb(t,n,null,a))}}}))((function(e){var t,n=e.tab,i=e.coursePanelSection,c=e.selectedCourse,l=e.assignmentInSession,u=e.loadedTestDataInProgress,d=e.token,m=e.loading,f=e.userId,p=e.courses,g=e.fetchUser,b=e.fetchConfig,v=e.fetchModules,y=e.fetchStudents,h=e.fetchNotifications,T=e.fetchCourses,I=e.fetchTestResults,k=e.returnToCourses,O=e.regOfficeHours,S=e.irregOfficeHours,_=e.selectedChatUser,D=e.testInSession,w=e.setCourse,x=e.instructorLoggedIn,C=Object(r.useState)(!1),M=Object(s.a)(C,2),A=M[0],R=M[1],P=Object(ee.i)().courseId,L=(p||[]).find((function(e){return e._id===P})),H=Object(ee.h)().pathname;return Object(r.useEffect)((function(){var e=(p||[]).find((function(e){return e._id===P}))||{};w(e),d&&(y(P,d),v(P,d),g(d),b(d));var t=c;null!==c&&c||(t={});var n=Object($.b)(c||{},Date.now()),s=n.isIrregOfficeHour,r=n.isRegOfficeHour;R(!(!s&&!r));var o,i=K()("https://mernstackelearn.herokuapp.com/",{query:{token:d}});i.on("updateStudents",(function(e){"all"!==e.userType&&"student"!==e.userType||e.courseId!==t._id||(y(t._id,d,"noSpinner"),h(d))})),i.on("updateCourses",(function(e){e.userId!==f&&"student"!==e.userType&&"all"!==e.userType||e.courseId!==t._id||"exitCourse"!==e.action||(T(d),h(d),c&&(k(),Z.a.push("/student-panel/courses")))})),i.on("updateModules",(function(e){"student"===e.userType&&v(t._id,d,"noSpinner")}));!function e(n){o=setTimeout((function(){var a=Object($.b)(t),s=a.isIrregOfficeHour,r=a.isRegOfficeHour;R(!(!s&&!r)),n?e(Object($.a)(t,Date.now())):clearTimeout(o)}),n-Date.now())}(Object($.a)(t,Date.now()));var l=(t.lessons||[]).filter((function(e){return e.availableOnDate&&Date.now()<parseInt(e.availableOnDate)})).map((function(e){return parseInt(e.availableOnDate)})),u=(t.tests||[]).filter((function(e){return e.availableOnDate&&Date.now()<parseInt(e.availableOnDate)})).map((function(e){return parseInt(e.availableOnDate)})),m=(t.tests||[]).filter((function(e){return e.dueDate&&Date.now()<parseInt(e.dueDate)&&!e.allowLateSubmission})).map((function(e){return parseInt(e.dueDate)})),E=[];(t.tests||[]).forEach((function(e){if(e.allowLateSubmission&&Date.now()<parseInt(e.dueDate)+864e5*e.lateDaysAllowed)for(var t=parseInt(e.dueDate);t<parseInt(e.dueDate)+864e5*e.lateDaysAllowed;t+=864e5)t>Date.now()&&E.push(t)}));var O,S=(t.tests||[]).filter((function(e){return Date.now()<parseInt(e.dueDate)+864e5*e.lateDaysAllowed&&e.allowLateSubmission})).map((function(e){return parseInt(e.dueDate)+864e5*e.lateDaysAllowed})),_=(t.tests||[]).filter((function(e){return e.gradeReleaseDate&&Date.now()<parseInt(e.gradeReleaseDate)})).map((function(e){return parseInt(e.gradeReleaseDate)})),D=[];return[].concat(Object(a.a)(l),Object(a.a)(u),Object(a.a)(m),Object(a.a)(S),E,Object(a.a)(_)).forEach((function(e){O=setTimeout((function(){D.push(O),T(d),I(d)}),e-Date.now())})),function(){D.forEach((function(e){clearTimeout(e)})),clearTimeout(o),i.disconnect(),w(null)}}),[O,S,P]),!L&&p?o.a.createElement(ee.a,{to:"/student-panel/courses"}):H==="/student-panel/course/".concat(P)&&x?o.a.createElement(ee.a,{to:"/instructor-panel/course/".concat(P)}):H.includes("/student-panel/course")&&D?o.a.createElement(ee.a,{to:"/student-panel/test-in-session"}):c?("assignment"===i&&(t=o.a.createElement(E.a,null,o.a.createElement(J.a,{value:n,index:0},l&&u?o.a.createElement(q.default,{startingValues:u,isAssignment:!0}):o.a.createElement(j,{isAssignment:!0})),o.a.createElement(J.a,{value:n,index:1},o.a.createElement(B,{isAssignment:!0})))),"test"===i&&(t=o.a.createElement(E.a,null,o.a.createElement(J.a,{value:n,index:0},o.a.createElement(j,{isTest:!0})),o.a.createElement(J.a,{value:n,index:1},o.a.createElement(B,{isTest:!0})))),"chat"===i&&(t=o.a.createElement(E.a,null,o.a.createElement(J.a,{value:n,index:0},o.a.createElement(V.a,{key:_,isOfficeHour:A,studentPanel:!0})),o.a.createElement(J.a,{value:n,index:1},_&&c&&o.a.createElement(Q.a,{key:(_||{})._id,isOfficeHour:A,userType:"student"})))),"lesson"===i&&(t=o.a.createElement(E.a,null,o.a.createElement(J.a,{value:n,index:0},o.a.createElement(N.a,null)),o.a.createElement(J.a,{value:n,index:1}))),"modules"===i&&(t=o.a.createElement(E.a,null,o.a.createElement(J.a,{value:n,index:0},o.a.createElement(W,{loading:m})))),"progressReport"===i&&(t=o.a.createElement(E.a,null,o.a.createElement(J.a,{value:n,index:0},o.a.createElement(X.a,null)))),"resources"===i&&(t=o.a.createElement(z,null)),"testSession"===i||"testLesson"===i?null:t):null}))},817:function(e,t,n){"use strict";var a=n(0),s=n.n(a),r=n(832),o=n(103),i=n(245),c=n.n(i),l=n(844),u=n(80),d=n(819),m=n.n(d),f=(n(872),n(341));t.a=function(e){var t,n=e.readingContent,a=e.audioSource,i=e.fileUpload,d=e.materialsSection,p=Object(f.a)().t,g=(Object(o.a)(n)||"").split(".").pop();return i&&("pdf"===g&&(t=s.a.createElement(r.a,{url:n,index:d})),"jfif"!==g&&"jpgeg"!==g&&"jpg"!==g||(t=s.a.createElement("div",{style:{backgroundImage:'url("'.concat(n,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"200px",borderRadius:"3px",width:"100%",margin:"auto"}}))),"docx"!==g&&"doc"!==g||(t=s.a.createElement(c.a,{fileType:g,filePath:n})),s.a.createElement("div",{style:{marginBottom:20}},n&&s.a.createElement(u.a,{paragraph:!0,variant:"h6"},p("testMaterials.useTheFollowingContent")),!i&&n&&s.a.createElement("div",{style:{background:"#1976d2",borderRadius:4,color:"white",padding:10,marginTop:40},dangerouslySetInnerHTML:{__html:m.a.sanitize(n)}}),i&&n&&s.a.createElement("div",null,t),a&&s.a.createElement("div",{style:{marginTop:40}},s.a.createElement(u.a,{paragraph:!0,variant:"h6"},p("testMaterials.useTheAudio")),s.a.createElement(l.a,{audioSource:a})))}},872:function(e,t,n){},879:function(e,t,n){"use strict";var a=n(1005),s=n(0),r=n.n(s),o=n(341),i=n(25);t.a=Object(i.b)((function(e){return{students:e.common.students,course:e.common.selectedCourse,token:e.authentication.token,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn,studentTestResults:e.studentTest.testResults,modalDocument:e.common.modalDocument,isDarkTheme:e.common.isDarkTheme}}))((function(e){var t=e.course,n=e.studentTestResults,s=e.modalDocument,i=(e.students,e.instructorLoggedIn),c=e.studentLoggedIn,l=e.isDarkTheme,u=Object(o.a)().t;if(!t)return null;var d,m=t.tests;(c&&(d=(n.testResults||[]).filter((function(e){return e.graded&&null!==e.grade&&!e.isExcused}))),i)&&(d=(((t.studentsEnrollRequests.filter((function(e){return e.approved||e.droppedOut||e.denied})).map((function(e){return e.student}))||[]||[]).find((function(e){return e._id===s._id}))||{}).testResults||[]).filter((function(e){return e.graded&&null!==e.grade&&!e.isExcused})));var f=function(e,t){return e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:0},p=d.filter((function(e){return e.course===t._id&&m.findIndex((function(t){return t._id===e.test}))>-1})),g=p.map((function(e,t){var n=m.find((function(t){return t._id===e.test})),a=n.testName,s=n.assignment,r=n.createdAt,o=n.availableOnDate;return{x:"".concat(a," (").concat(u(s?"progressReport.assignment":"progressReport.test"),")"),y:e.grade,createdAt:o?parseInt(o):parseInt(r)}})).sort(f),b=p.map((function(e,t){var n=m.find((function(t){return t._id===e.test})),a=n.classAverage,s=n.testName,r=n.assignment,o=n.createdAt,i=n.availableOnDate;return{x:"".concat(s," (").concat(u(r?"progressReport.assignment":"progressReport.test"),")"),y:a,createdAt:i?parseInt(i):parseInt(o)}})).sort(f),E=[{id:u(c?"progressReport.yourProgress":"progressReport.studentProgress"),color:"hsl(193, 70%, 50%)",data:g},{id:u("progressReport.classAverage"),color:"hsl(11, 70%, 50%)",data:b}];return r.a.createElement("div",{style:{height:700,width:"100%"}},r.a.createElement(a.a,{data:E,margin:{top:70,right:10,bottom:150,left:45},xScale:{type:"point"},yScale:{type:"linear",min:0,max:100,stacked:!1,reverse:!1},curve:"natural",axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:0,tickPadding:30,tickRotation:-85,legend:u("progressReport.assignmentsTests"),legendOffset:10,legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:u("progressReport.grade"),legendOffset:-40,legendPosition:"middle"},colors:{scheme:"category10"},lineWidth:5,theme:l?{textColor:"white",background:"#424242",tooltip:{basic:{background:"#424242"},container:{background:"#424242"}}}:{},pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,areaBaselineValue:30,areaOpacity:.05,useMesh:!0,legends:[{anchor:"top",direction:"row",justify:!1,translateX:-28,translateY:-60,itemsSpacing:20,itemDirection:"top-to-bottom",itemWidth:100,itemHeight:74,itemOpacity:.75,symbolSize:18,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",itemTextColor:l?"white":"black",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}],motionStiffness:80}))}))},881:function(e,t,n){e.exports={TestContainer:"Test_TestContainer__7fONJ",flexPositioningSpaceBetween:"Test_flexPositioningSpaceBetween__3qcOt",flexPositioningEnd:"Test_flexPositioningEnd__1BT0d",button:"Test_button__3kZ9Q",Inline:"Test_Inline__2KPBl",center:"Test_center__3KQMR",TestTypeRadio:"Test_TestTypeRadio__2JWt_",ListHorizontalDisplay:"Test_ListHorizontalDisplay__3rpFy",TestFormList:"Test_TestFormList__2tEwo",Editor:"Test_Editor__1CVT1",greenIcon:"Test_greenIcon__3Ki1h",redIcon:"Test_redIcon__3oB4F",timer:"Test_timer__3Gexz",timerDanger:"Test_timerDanger__1UcdL",CorrectAnswerHighlight:"Test_CorrectAnswerHighlight__22Ntw",BlankPreview:"Test_BlankPreview__35Isy",InputField:"Test_InputField__36Ygf",FullWidth:"Test_FullWidth__3a30R",InputFieldBottomMargin:"Test_InputFieldBottomMargin__-lmnr",SelectField:"Test_SelectField__149Z_",Pointer:"Test_Pointer__8Sq0r",audioPlayerPreview:"Test_audioPlayerPreview__1ht6R"}}}]);
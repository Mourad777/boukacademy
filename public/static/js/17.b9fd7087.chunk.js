(this["webpackJsonpe-learn"]=this["webpackJsonpe-learn"]||[]).push([[17],{1319:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(30),r=n(4),c=n(35),s=n(944),u=n(142),f=n.n(u),l=n(48),d=n(140);t.default=Object(i.b)((function(e){return{token:e.authentication.token,userId:e.authentication.userId,notification:e.common.notification,selectedCourse:e.common.selectedCourse,courses:e.common.courses,tab:e.common.tab,initialPath:e.authentication.initialPath,loading:e.authentication.loading||e.instructorCourse.loading||e.common.loading,instructorLoggedIn:e.authentication.instructorLoggedIn}}),(function(e){return{fetchUser:function(t){return e(r.ac(t))},fetchInstructors:function(t){return e(r.Cb(t))},fetchAllStudents:function(t,n){return e(r.qb(t,n))},fetchQuestionBank:function(t,n){return e(r.Ob(t,n))},fetchStudents:function(t,n){return e(r.Rb(t,n))},fetchConfig:function(t){return e(r.tb(t))},setChatUser:function(t){e(r.Ic(t))},setNotification:function(t,n){return e(r.Sc(t,n))},setTabLabels:function(t){return e(r.Zc(t))},setTab:function(t){return e(r.Yc(t))},fetchCourses:function(t,n){return e(r.zb(t,n))},setPanel:function(t){e(r.Lc(t))},fetchNotifications:function(t){e(r.Lb(t))},markAsSeen:function(t,n){e(r.lc(t,n))},logout:function(){e(r.jc())}}}))((function(e){var t=e.userId,n=e.notification,i=e.loading,r=e.setNotification,u=e.setChatUser,m=e.setTabLabels,p=e.setTab,h=e.setPanel,b=e.token,g=e.fetchAllStudents,N=e.fetchInstructors,v=e.fetchNotifications,k=e.fetchCourses,y=e.fetchConfig,_=e.selectedCourse,w=e.logout;Object(a.useEffect)((function(){if(b){var e=f()("https://mernstackelearn.herokuapp.com/",{query:{token:b}}),n=function(){e.emit("loggedOut",{user:t})};return window.addEventListener("beforeunload",n),e.open(),e.on("newAccount",(function(e){g(b),N(b),v(b)})),e.on("updateCourses",(function(e){"instructor"!==e.userType&&"all"!==e.userType||k(b,"noSpinner"),v(b)})),e.on("updateStudents",(function(e){"instructor"===e.userType&&e.userId===t&&e.fetchNotifications&&v(b)})),e.on("suspendAccount",(function(e){e.userId===t&&w()})),e.emit("loggedIn",{user:t}),e.on("alert",(function(e){v(b);var t={_id:e._id,senderId:e.sender._id,message:e.content,type:e.type,avatar:e.sender.avatar,senderFirstName:e.sender.firstName,senderLastName:e.sender.lastName,courseName:e.course,courseId:e.courseId,userType:e.sender.type,file:e.file},n=setTimeout((function(){r(null,null)}),5e3);r(t,n)})),function(){e.emit("loggedOut",{user:t}),window.removeEventListener("beforeunload",n),e.disconnect()}}}),[b]);return Object(a.useEffect)((function(){if(b){var e=f()("https://mernstackelearn.herokuapp.com/",{query:{token:b}});return e.on("updateConfig",(function(e){"all"===e.userType&&y(b)})),function(){e.disconnect()}}}),[(_||{})._id,b]),o.a.createElement(c.a,null,o.a.createElement(d.a,{active:i,transparent:!0}),n&&o.a.createElement(s.a,{onNotificationClick:function(e,t){p(1),h("chat"),m(["Contacts","Chat"]),u(e),r(null,null),l.a.push("/instructor-panel/course/".concat(t))},notification:n}))}))},944:function(e,t,n){"use strict";var a=n(0),o=n.n(a),i=n(30),r=n(945),c=n.n(r),s=n(78),u=n(947),f=n(4),l=n(420);t.a=Object(i.b)((function(e){return{tab:e.common.tab,coursePanel:e.common.coursePanel,testInSession:e.studentTest.testInSession,token:e.authentication.token}}),(function(e){return{markAsSeen:function(t,n){e(f.lc(t,n))},fetchNotifications:function(t){e(f.Lb(t))}}}))((function(e){var t,n,i=e.notification,r=e.onNotificationClick,f=e.coursePanel,d=e.tab,m=e.testInSession,p=e.token,h=(e.fetchNotifications,e.markAsSeen),b=Object(l.a)().t;return Object(a.useEffect)((function(){1===d&&"chat"===f&&h(i._id,p)}),[]),m||1===d&&"chat"===f||i.returnNull?null:(i.file&&(t=i.file.toLowerCase().split(".").pop()),"pdf"===t&&(n=o.a.createElement("i",{className:"far fa-file-pdf fa-2x"})),"mp3"===t&&(n=o.a.createElement("i",{className:"fas fa-file-audio fa-2x"})),"docx"!==t&&"doc"!==t||(n=o.a.createElement("i",{className:"fas fa-file-word fa-2x"})),"jpeg"!==t&&"jpg"!==t&&"jfif"!==t||(n=o.a.createElement("i",{className:"fas fa-file-image fa-2x"})),"avi"!==t&&"mp4"!==t&&"mkv"!==t&&"webm"!==t||(n=o.a.createElement("i",{className:"far fa-file-video fa-2x"})),o.a.createElement("div",{style:{transform:i?"translateY(0)":"translateY(-100vh)",opacity:i?"1":"0",cursor:"pointer"},className:[c.a.notification,c.a[i.type]].join(" "),onClick:function(){return r({_id:i.senderId,firstName:i.senderFirstName,lastName:i.senderLastName,profilePicture:i.avatar},i.courseId,i.userType,i.type)}},i.avatar&&o.a.createElement(u.a,{src:i.avatar}),o.a.createElement(s.a,{variant:"subtitle1"},"".concat(i.senderFirstName," ").concat(i.senderLastName," ").concat(b("notifications.from")," ").concat(i.courseName)),n,o.a.createElement(s.a,{variant:"subtitle1"},i.message.slice(0,25)+"...")))}))},945:function(e,t,n){e.exports={notification:"Notification_notification__ipYkd",withDrawer:"Notification_withDrawer__29NLM",noDrawer:"Notification_noDrawer__WZVKG",success:"Notification_success__1-5eR",chat:"Notification_chat__1_4NL",fail:"Notification_fail__3kH7Z"}},947:function(e,t,n){"use strict";var a=n(5),o=n(11),i=n(0),r=(n(2),n(10)),c=n(13),s=n(53),u=Object(s.a)(i.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var f=i.forwardRef((function(e,t){var n=e.alt,c=e.children,s=e.classes,f=e.className,l=e.component,d=void 0===l?"div":l,m=e.imgProps,p=e.sizes,h=e.src,b=e.srcSet,g=e.variant,N=void 0===g?"circle":g,v=Object(o.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),k=null,y=function(e){var t=e.src,n=e.srcSet,a=i.useState(!1),o=a[0],r=a[1];return i.useEffect((function(){if(t||n){r(!1);var e=!0,a=new Image;return a.src=t,a.srcSet=n,a.onload=function(){e&&r("loaded")},a.onerror=function(){e&&r("error")},function(){e=!1}}}),[t,n]),o}({src:h,srcSet:b}),_=h||b,w=_&&"error"!==y;return k=w?i.createElement("img",Object(a.a)({alt:n,src:h,srcSet:b,sizes:p,className:s.img},m)):null!=c?c:_&&n?n[0]:i.createElement(u,{className:s.fallback}),i.createElement(d,Object(a.a)({className:Object(r.a)(s.root,s.system,s[N],f,!w&&s.colorDefault),ref:t},v),k)}));t.a=Object(c.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(f)}}]);
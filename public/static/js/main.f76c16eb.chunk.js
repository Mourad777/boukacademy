(this["webpackJsonpe-learn"]=this["webpackJsonpe-learn"]||[]).push([[0],{103:function(e,t,n){e.exports={greenIcon:"AudioPlayer_greenIcon__knaj_",redIcon:"AudioPlayer_redIcon__VtpzN",flexPositioningEven:"AudioPlayer_flexPositioningEven__mBu5R",AudioAlignment:"AudioPlayer_AudioAlignment__1RjTd",Pointer:"AudioPlayer_Pointer__3IoHf",errorText:"AudioPlayer_errorText__1KeLa",advancedAudioPlayer:"AudioPlayer_advancedAudioPlayer__2hxRe","audio-player":"AudioPlayer_audio-player__q667P"}},1031:function(e,t){},1033:function(e,t){},1034:function(e,t){},1035:function(e,t){},1036:function(e,t){},105:function(e,t,n){e.exports={TestContainer:"Test_TestContainer__7fONJ",flexPositioningSpaceBetween:"Test_flexPositioningSpaceBetween__3qcOt",flexPositioningEnd:"Test_flexPositioningEnd__1BT0d",button:"Test_button__3kZ9Q",Inline:"Test_Inline__2KPBl",center:"Test_center__3KQMR",TestTypeRadio:"Test_TestTypeRadio__2JWt_",ListHorizontalDisplay:"Test_ListHorizontalDisplay__3rpFy",TestFormList:"Test_TestFormList__2tEwo",Editor:"Test_Editor__1CVT1",greenIcon:"Test_greenIcon__3Ki1h",redIcon:"Test_redIcon__3oB4F",timer:"Test_timer__3Gexz",timerDanger:"Test_timerDanger__1UcdL",CorrectAnswerHighlight:"Test_CorrectAnswerHighlight__22Ntw",BlankPreview:"Test_BlankPreview__35Isy",InputField:"Test_InputField__36Ygf",FullWidth:"Test_FullWidth__3a30R",InputFieldBottomMargin:"Test_InputFieldBottomMargin__-lmnr",SelectField:"Test_SelectField__149Z_",Pointer:"Test_Pointer__8Sq0r",audioPlayerPreview:"Test_audioPlayerPreview__1ht6R"}},1065:function(e,t,n){},1094:function(e,t){},1111:function(e,t,n){},1122:function(e,t,n){},1128:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return qk}));var a=n(0),r=n.n(a),o=n(53),s=n.n(o),i=n(72),c=n(6),l=n(56),u=n(670),d=(n(756),n(185)),m=n(665),p=n(1257),f=n(1233),g="LOGOUT",b="CLEAR_ALERT",h=function(e,t){return{type:"FETCH_TEST_RESULTS_START",payload:{token:e,spinner:t}}},E=function(e,t){return{type:"SUBMIT_TEST_SUCCESS",testClosed:e,message:t}},v=function(e){return{type:"SUBMIT_TEST_FAIL",message:e}},y=function(e){return{type:"MARK_SLIDE_AS_SEEN_FAIL",message:e}},T=function(e){return{type:"ENROLL_REQUEST_FAIL",message:e}},k=function(e,t,n){return{type:"ENROLL_COURSE_START",payload:{studentId:e,courseId:t,token:n}}},S=function(e){return{type:"ENROLL_COURSE_FAIL",message:e}},w=function(e,t,n,a,r){return{type:"ENROLL_DENY_START",payload:{student:e,course:t,token:n,reason:a,allowResubmission:r}}},O=function(e){return{type:"ENROLL_DENY_FAIL",message:e}},C=function(e){return{type:"DROP_COURSE_FAIL",message:e}},x=function(e){return{type:"SET_COURSE_FORM_PAGE",page:e}},A=function(e,t){return{type:"FETCH_COURSE_SUCCESS",formData:e,courseId:t}},F=function(e){return{type:"GRADE_COURSE_FAIL",message:e}},D=function(e){return{type:"UPDATE_COURSE_RESOURCES_FAIL",message:e}},_=function(e,t){return{type:"TOGGLE_COURSE_STATE_START",payload:{courseId:e,token:t}}},I=function(e,t,n,a,r,o){return{type:"CREATE_UPDATE_COURSE_START",payload:{formData:e,token:t,editing:n,courseId:a,changeStatus:r,filesToDelete:o}}},j=function(e){return{type:"CREATE_UPDATE_COURSE_SUCCESS",message:e}},R=function(e){return{type:"CREATE_UPDATE_COURSE_FAIL",message:e}},N=function(e){return{type:"DELETE_COURSE_FAIL",message:e}},L=function(e){return{type:"FETCH_INSTRUCTORS_START",payload:{token:e}}},P=function(e,t){return{type:"FETCH_LESSON_SUCCESS",formData:e,lessonId:t}},B=function(e){return{type:"CREATE_LESSON_FAIL",message:e}},M=function(e){return{type:"DELETE_LESSON_FAIL",message:e}},q=function(e){return{type:"SET_QUESTION_EDITING",question:e}},U=function(e,t){return{type:"FETCH_QUESTION_BANK_START",payload:{courseId:e,token:t}}},Q=function(e){return{type:"FETCH_QUESTION_BANK_SUCCESS",questions:e}},H=function(e){return{type:"CREATE_UPDATE_QUESTION_FAIL",message:e}},G=function(e){return{type:"DELETE_QUESTION_FAIL",message:e}},W=function(e,t,n,a){return{type:"MODULES_CHANGE_START",payload:{formValues:e,token:t,editing:n,courseId:a}}},z=function(e){return{type:"SET_INITIAL_GRADE_VALUES",gradeValues:e}},V=function(e){return{type:"CREATE_UPDATE_TEST_FAIL",message:e}},$=function(e,t){return{type:"DELETE_TEST_START",payload:{testId:e,token:t}}},Y=function(e){return{type:"DELETE_TEST_FAIL",message:e}},J=function(e){return{type:"RESET_TEST_SUCCESS",message:e}},K=function(e){return{type:"RESET_TEST_FAIL",message:e}},Z=function(e){return{type:"GRADE_TEST_FAIL",message:e}},X=function(e,t){return e&&e.preventDefault(),{type:"TOGGLE_FORM",form:t}},ee=function(e){return{type:"CREATE_ACCOUNT_FAIL",message:e}},te=function(e){return{type:"UPDATE_ACCOUNT_FAIL",message:e}},ne=function(e){return{type:"ACCOUNT_VERIFICATION_FAIL",message:e}},ae=function(e){return{type:"RESEND_EMAIL_VERIFICATION_FAIL",message:e}},re=function(e){return{type:"FETCH_USER_START",payload:{token:e}}},oe=function(e){return{type:"FETCH_USER_SUCCESS",user:e}},se=function(e){return{type:"FETCH_USER_FAIL",message:e}},ie=function(e){return{type:"AUTHENTICATION_SUCCESS",authData:e}},ce=function(e){return{type:"AUTHENTICATION_FAIL",message:e}},le=function(e){return{type:"PASSWORD_RESET_LINK_FAIL",message:e}},ue=function(e){return{type:"CHANGE_PASSWORD_FAIL",message:e}},de=function(e){return{type:"SET_SIGNUP_FORM_PAGE",page:e}},me=function(e){return{type:"REFRESH_TOKEN_START",payload:{token:e}}},pe=function(){return{type:g}},fe=function(e,t,n){return{type:"UPDATE_ACTIVITY_START",payload:{userId:e,token:t,activity:n}}},ge=function(e,t){return{type:"DELETE_FILES_START",payload:{fileUrls:e,token:t}}},be=function(e){return{type:"SET_CHAT_USER",user:e}},he=function(e){return{type:"FETCH_CONFIG_START",payload:{token:e}}},Ee=function(e){return{type:"UPDATE_CONFIG_SUCCESS",message:e}},ve=function(e,t){return{type:"SET_NOTIFICATION",notification:e,timeoutId:t}},ye=function(e){return{type:"FETCH_NOTIFICATIONS_START",payload:{token:e}}},Te=function(e){return{type:"FETCH_NOTIFICATIONS_SUCCESS",notifications:e}},ke=function(e,t){return{type:"MARK_AS_SEEN_START",payload:{notificationId:e,token:t}}},Se=function(e,t,n){return{type:"FETCH_MODULES_START",payload:{token:t,courseId:e,spinner:n}}},we=function(e){return{type:"FETCH_MODULES_SUCCESS",modules:e}},Oe=function(e){return{type:"SET_THEME",theme:e}},Ce=function(e){return{type:"SET_TAB_LABELS",tabLabels:e}},xe=function(e){return{type:"SET_TAB",tab:e}},Ae=function(e,t){return{type:"OPEN_MODAL",modalDocument:e,modalType:t}},Fe=function(){return{type:b}},De=function(e){return{type:"SET_SESSION_ALERT",alert:e}},_e=function(e){return{type:"SET_COURSE",course:e}},Ie=function(e,t){return{type:"FETCH_COURSES_START",payload:{token:e,spinner:t}}},je=function(e){return{type:"FETCH_COURSES_SUCCESS",courses:e}},Re=function(e){return{type:"SET_COURSE_PANEL",panel:e}},Ne=function(e,t,n,a){return{type:"FETCH_STUDENTS_START",payload:{token:t,courseId:e,action:n,spinner:a}}},Le=function(e){return{type:"FETCH_STUDENTS_SUCCESS",students:e}},Pe=function(e,t,n,a,r,o){return{type:"FETCH_TEST_START",payload:{testId:e,isStudent:t,token:n,testDataInProgress:a,studentResult:r,password:o}}},Be=function(e,t){return{type:"FETCH_TEST_SUCCESS",test:e,formData:t}},Me=function(e){return{type:"FETCH_TEST_FAIL",message:e}},qe=function(e){return e.children},Ue=n(392),Qe=n.n(Ue),He=n(164),Ge=n(1271),We=n(540),ze=Object(c.b)((function(e){return{tab:e.common.tab,coursePanel:e.common.coursePanel,testInSession:e.studentTest.testInSession,token:e.authentication.token}}),(function(e){return{markAsSeen:function(t,n){e(ke(t,n))},fetchNotifications:function(t){e(ye(t))}}}))((function(e){var t,n,o=e.notification,s=e.onNotificationClick,i=e.coursePanel,c=e.tab,l=e.testInSession,u=e.token,d=(e.fetchNotifications,e.markAsSeen),m=Object(We.a)().t;return Object(a.useEffect)((function(){1===c&&"chat"===i&&d(o._id,u)}),[]),l||1===c&&"chat"===i||o.returnNull?null:(o.file&&(t=o.file.toLowerCase().split(".").pop()),"pdf"===t&&(n=r.a.createElement("i",{className:"far fa-file-pdf fa-2x"})),"mp3"===t&&(n=r.a.createElement("i",{className:"fas fa-file-audio fa-2x"})),"docx"!==t&&"doc"!==t||(n=r.a.createElement("i",{className:"fas fa-file-word fa-2x"})),"jpeg"!==t&&"jpg"!==t&&"jfif"!==t||(n=r.a.createElement("i",{className:"fas fa-file-image fa-2x"})),"avi"!==t&&"mp4"!==t&&"mkv"!==t&&"webm"!==t||(n=r.a.createElement("i",{className:"far fa-file-video fa-2x"})),r.a.createElement("div",{style:{transform:o?"translateY(0)":"translateY(-100vh)",opacity:o?"1":"0",cursor:"pointer"},className:[Qe.a.notification,Qe.a[o.type]].join(" "),onClick:function(){return s({_id:o.senderId,firstName:o.senderFirstName,lastName:o.senderLastName,profilePicture:o.avatar},o.courseId,o.userType,o.type)}},o.avatar&&r.a.createElement(Ge.a,{src:o.avatar}),r.a.createElement(He.a,{variant:"subtitle1"},"".concat(o.senderFirstName," ").concat(o.senderLastName," ").concat(m("notifications.from")," ").concat(o.courseName)),n,r.a.createElement(He.a,{variant:"subtitle1"},o.message.slice(0,25)+"...")))})),Ve=n(62),$e=n.n(Ve),Ye=n(104),Je=Object(Ye.a)(),Ke=n(330),Ze=n.n(Ke),Xe=function(e){var t=e.active,n=e.transparent;return t?r.a.createElement("div",{className:n?Ze.a.Backdrop:null},r.a.createElement("div",{className:n?Ze.a.loader:Ze.a.Loader},"Loading...")):null},et=Object(c.b)((function(e){return{token:e.authentication.token,userId:e.authentication.userId,notification:e.common.notification,selectedCourse:e.common.selectedCourse,courses:e.common.courses,tab:e.common.tab,initialPath:e.authentication.initialPath,loading:e.authentication.loading||e.instructorCourse.loading||e.common.loading,instructorLoggedIn:e.authentication.instructorLoggedIn}}),(function(e){return{fetchUser:function(t){return e(re(t))},fetchInstructors:function(t){return e(L(t))},fetchQuestionBank:function(t,n){return e(U(t,n))},fetchStudents:function(t,n){return e(Ne(t,n))},fetchConfig:function(t){return e(he(t))},setChatUser:function(t){e(be(t))},setNotification:function(t,n){return e(ve(t,n))},setTabLabels:function(t){return e(Ce(t))},setTab:function(t){return e(xe(t))},fetchCourses:function(t,n){return e(Ie(t,n))},setPanel:function(t){e(Re(t))},fetchNotifications:function(t){e(ye(t))},markAsSeen:function(t,n){e(ke(t,n))},logout:function(){e(pe())}}}))((function(e){var t=e.userId,n=e.notification,o=(e.courses,e.loading),s=(e.fetchQuestionBank,e.fetchStudents,e.fetchUser,e.setNotification),i=e.setChatUser,c=e.setTabLabels,l=e.setTab,u=e.setPanel,d=e.token,m=(e.fetchModules,e.fetchNotifications),p=e.fetchCourses,f=(e.fetchInstructors,e.fetchConfig),g=e.selectedCourse;e.instructorLoggedIn;Object(a.useEffect)((function(){if(d){var e=$e()("https://mernstackelearn.herokuapp.com/",{query:{token:d}}),n=function(){e.emit("loggedOut",{user:t})};return window.addEventListener("beforeunload",n),e.open(),e.on("updateCourses",(function(e){"instructor"!==e.userType&&"all"!==e.userType||p(d,"noSpinner"),m(d)})),e.on("updateStudents",(function(e){"instructor"===e.userType&&e.userId===t&&e.fetchNotifications&&m(d)})),e.emit("loggedIn",{user:t}),e.on("alert",(function(e){m(d);var t={_id:e._id,senderId:e.sender._id,message:e.content,type:e.type,avatar:e.sender.avatar,senderFirstName:e.sender.firstName,senderLastName:e.sender.lastName,courseName:e.course,courseId:e.courseId,userType:e.sender.type,file:e.file},n=setTimeout((function(){s(null,null)}),5e3);s(t,n)})),function(){e.emit("loggedOut",{user:t}),window.removeEventListener("beforeunload",n),e.disconnect()}}}),[d]);return Object(a.useEffect)((function(){if(d){var e=$e()("https://mernstackelearn.herokuapp.com/",{query:{token:d}});return e.on("updateConfig",(function(e){"all"===e.userType&&f(d)})),function(){e.disconnect()}}}),[(g||{})._id,d]),r.a.createElement(qe,null,r.a.createElement(Xe,{active:o,transparent:!0}),n&&r.a.createElement(ze,{onNotificationClick:function(e,t){l(1),u("chat"),c(["Contacts","Chat"]),i(e),s(null,null),Je.push("/instructor-panel/course/".concat(t))},notification:n}))})),tt=Object(c.b)((function(e){return{nameOfUser:e.authentication.nameOfUser,token:e.authentication.token,sessionExpiration:e.authentication.sessionExpiration,userId:e.authentication.userId,courses:e.common.courses,loading:e.studentCourse.loading||e.studentTest.loading||e.common.loading,notification:e.common.notification,testInSession:e.studentTest.testInSession,loadedTestDataInProgress:e.studentTest.loadedTestDataInProgress,coursePanel:e.common.coursePanel,tab:e.common.tab,selectedCourse:e.common.selectedCourse,refreshTokenExpiration:e.authentication.refreshTokenExpiration}}),(function(e){return{fetchCourses:function(t,n){return e(Ie(t,n))},fetchTestResults:function(t,n){return e(h(t,n))},fetchNotifications:function(t){return e(ye(t))},setNotification:function(t,n){return e(ve(t,n))},setTab:function(t){return e(xe(t))},setChatUser:function(t){e(be(t))},setTabLabels:function(t){return e(Ce(t))},setPanel:function(t){e(Re(t))},markAsSeen:function(t,n){e(ke(t,n))},logout:function(){e(pe())},returnToCourses:function(){e({type:"RETURN_TO_COURSES"})},fetchConfig:function(t){return e(he(t))}}}))((function(e){var t=e.fetchTestResults,n=e.userId,o=e.token,s=e.loading,i=e.notification,c=e.fetchCourses,l=e.fetchNotifications,u=e.fetchConfig,d=e.setNotification,m=e.setTab,p=e.setChatUser,f=e.setTabLabels,g=e.setPanel,b=e.selectedCourse;Object(a.useEffect)((function(){if(o){var e=$e()("https://mernstackelearn.herokuapp.com/",{query:{token:o}}),a=function(){e.emit("loggedOut",{user:n})};return window.addEventListener("beforeunload",a),e.open(),e.on("updateCourses",(function(e){"student"!==e.userType&&"all"!==e.userType&&e.userId!==n||(c(o,"noSpinner"),l(o))})),e.on("updateResults",(function(e){"student"!==e.userType&&e.userId!==n||(t(o,"noSpinner"),l(o))})),e.emit("loggedIn",{user:n}),e.on("mainMenu",(function(e){e.userId===n&&(l(o),c(o,"noSpinner"))})),e.on("alert",(function(e){l(o);var t={_id:e._id,senderId:e.sender._id,message:e.content,type:e.type,avatar:e.sender.avatar,senderFirstName:e.sender.firstName,senderLastName:e.sender.lastName,courseName:e.course,courseId:e.courseId,userType:e.sender.type,file:e.file},n=setTimeout((function(){d(null,null)}),5e3);d(t,n)})),function(){e.emit("loggedOut",{user:n}),window.removeEventListener("beforeunload",a),e.disconnect()}}}),[]),Object(a.useEffect)((function(){if(o){var e=$e()("https://mernstackelearn.herokuapp.com/",{query:{token:o}});return e.on("updateConfig",(function(e){"all"!==e.userType&&e.courseId!==(b||{})._id||u(o)})),function(){e.disconnect()}}}),[(b||{})._id]);return r.a.createElement(qe,null,r.a.createElement(Xe,{active:s,transparent:!0}),i&&r.a.createElement(ze,{onNotificationClick:function(e,t){m(1),g("chat"),f(["Contacts","Chat"]),p(e),d(null,null),Je.push("/student-panel/course/".concat(t))},notification:i}))})),nt=n(536),at=n(10),rt=n(1220),ot=n(1224),st=n(1225),it=n(1227),ct=n(1228),lt=n(544),ut=n.n(lt),dt=n(543),mt=n.n(dt),pt=n(1222),ft=n(1223),gt=n(21),bt=n.n(gt),ht=n(1226),Et=n(1221),vt=(n(790),n(541)),yt=n.n(vt),Tt=n(1132),kt=n(1259);function St(e){var t=e.value,n=e.withLabel;return r.a.createElement(kt.a,{display:"flex",alignItems:"center"},r.a.createElement(kt.a,{width:"100%",mr:1},r.a.createElement(Tt.a,{variant:"determinate",value:t})),n&&r.a.createElement(kt.a,{minWidth:35},r.a.createElement(He.a,{variant:"body2",color:"textSecondary"},"".concat(Math.round(t),"%"))))}var wt=Object(rt.a)({root:{width:"100%"}});function Ot(e){var t=e.progress,n=e.withoutLabel,a=wt();return r.a.createElement("div",{className:a.root},r.a.createElement(St,{value:t,withLabel:!n}))}var Ct=function(e,t){var n=((t||[]).filter((function(t){return t.isExcused&&e._id===t.course}))||[]).map((function(e){return e.test})),a=(n||[]).length,r=(e.lessons||[]).reduce((function(e,t){return e+t.lessonSlides.length}),0),o=(e.lessons||[]).reduce((function(e,t){return t.lessonSlides.filter((function(e){return e.seen})).length+e}),0),s=e.totalIncludedTests-a,i=e.tests.filter((function(e){return e.completed&&!(n||[]).includes(e._id)})).length+o,c=r+s;return isNaN(parseInt(i/c*100))?0:parseInt(i/c*100)},xt=Object(at.a)({switchBase:{color:"#64b5f6","&$checked":{color:"#2196f3"},"&$checked + $track":{backgroundColor:"#2196f3"}},colorSecondary:{"&$checked":{"&:hover":{backgroundColor:"#64b5f6"}}},checked:{},track:{}})(Et.a),At=Object(rt.a)((function(e){return{root:{flexGrow:1},courseTitle:{textAlign:"center",cursor:"pointer"},button:{marginBottom:"10px"},media:{height:0,paddingTop:"56.25%",cursor:"pointer"},gridContainer:{gridTemplateAreas:"Card Card"},gridItem:{gridArea:"Card"},smallFont:{fontSize:"0.8em"},redText:{color:"#F44336"}}})),Ft=Object(c.b)((function(e){return{course:e.common.selectedCourse,courses:e.common.courses,tab:e.common.tab,studentLoggedIn:e.authentication.studentLoggedIn,instructorLoggedIn:e.authentication.instructorLoggedIn,token:e.authentication.token,studentId:e.authentication.userId,testResults:e.studentTest.testResults,configuration:e.common.configuration,isDarkTheme:e.common.isDarkTheme}}),(function(e){return{setTabLabels:function(t){return e(Ce(t))},setPanel:function(t){return e(Re(t))},setTab:function(t){return e(xe(t))},editCourse:function(t,n){return e(function(e,t,n){return{type:"FETCH_COURSE_START",payload:{courseId:e,token:t,changeStatus:n}}}(t,n))},changeStatus:function(t,n){return e(_(t,n))},fetchQuestionBank:function(t,n){return e(U(t,n))},fetchModules:function(t,n){return e(Se(t,n))},fetchStudents:function(t,n){return e(Ne(t,n))},onSelectCourse:function(t){e(_e(t)),e(Re("modules"))},openModal:function(t,n){return e(Ae(t,n))}}}))((function(e){var t=e.studentLoggedIn,n=e.instructorLoggedIn,o=(e.studentId,e.token),s=e.tab,i=(e.isDarkTheme,e.courses),c=e.openModal,l=e.editCourse,u=e.changeStatus,m=e.onSelectCourse,p=e.fetchModules,f=e.fetchStudents,g=e.setTab,b=e.fetchQuestionBank,h=e.testResults,E=e.configuration,v=Object(We.a)().t,y=Object(d.g)(),T=function(e){var a=(i||[]).find((function(t){return t._id===e}))||{};m(a),p(e,o),f(e,o),g(0),n&&(b(e,o),y.push("/instructor-panel/course/".concat(e))),t&&y.push("/student-panel/course/".concat(e))},k=At(),S=(i||[]).filter((function(e){return e.enrolled})),w=(i||[]).filter((function(e){return e.completed})).map((function(e){return e._id}));if(0===(i||[]).length)return r.a.createElement(He.a,{align:"center"},v("courseCards.noCourses"));var O=(0===s?i||[]:S||[]).map((function(e,a){var s,i=e.prerequisites.findIndex((function(e){if(!w.includes(e._id))return e}));if(t){var d=parseInt(e.enrollmentStartDate),m=parseInt(e.enrollmentEndDate),p=Date.now()>d&&Date.now()<m;s=r.a.createElement(qe,null,(i>-1&&!e.enrolled||e.enrolled||e.enrollmentRequested)&&r.a.createElement(pt.a,{color:"primary",type:"button",title:"Course syllabus",onClick:function(){return c(e,"syllabus")},fullWidth:!0},v("courseCards.buttons.syllabus")),!e.enrolled&&!e.accessDenied&&!e.enrollmentRequested&&!(i>-1)&&(e.studentCapacity>e.numberOfStudents&&e.studentCapacity||!e.studentCapacity)&&r.a.createElement(pt.a,{color:"primary",type:"button",title:"Enroll in Course",onClick:function(){return c(e,"enrollRequest")},fullWidth:!0,disabled:e.grade||parseInt(e.courseDropDeadline)>Date.now()&&e.droppedOut&&!(E||{}).isEnrollAllowedAfterDropCourse||e.droppedOut&&e.courseDropDeadline&&parseInt(e.courseDropDeadline)<Date.now()||!e.courseActive||!p&&!!d&&!!m||i>-1},v("courseCards.buttons.enroll")),e.enrolled&&r.a.createElement(qe,null,r.a.createElement(pt.a,{color:"secondary",type:"button",title:"Drop Course",fullWidth:!0,onClick:function(){return c(e,"dropConfirmation")},disabled:!e.courseActive||e.grade},v("courseCards.buttons.drop"))),e.enrollmentRequested&&r.a.createElement(He.a,{style:{textAlign:"center"},paragraph:!0,color:"error",variant:"caption"},v("courseCards.enrollmentRequested")),i>-1&&!e.enrolled&&r.a.createElement(He.a,{paragraph:!0,color:"error",variant:"caption"},v("courseCards.completePrereqs")),e.passed&&e.grade&&r.a.createElement(He.a,{align:"center",paragraph:!0,color:"success",variant:"caption"},v("courseCards.courseCompleted",{grade:e.grade})),!e.passed&&e.grade&&r.a.createElement(He.a,{align:"center",paragraph:!0,color:"error",variant:"caption"},v("courseCards.courseFailed",{grade:e.grade})),e.droppedOut&&r.a.createElement(He.a,{align:"center",paragraph:!0,color:"error",variant:"caption"},v("courseCards.droppedOut")))}return n&&(s=r.a.createElement(qe,null,r.a.createElement(pt.a,{className:k.button,color:"primary",type:"button",title:"Edit Course",onClick:function(){l(e._id,o),g(1)},fullWidth:!0},v("courseCards.buttons.edit")),r.a.createElement(pt.a,{className:k.button,color:"secondary",type:"button",title:"Delete Course",onClick:function(){return c(e,"deleteCourse")},fullWidth:!0},v("courseCards.buttons.delete")))),r.a.createElement(ft.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:e._id},r.a.createElement(ot.a,null,r.a.createElement(st.a,{action:t?r.a.createElement(qe,null,e.courseActive?r.a.createElement(mt.a,{style:{margin:"5px"},color:"primary"}):r.a.createElement(ut.a,{style:{margin:"5px"},color:"error"})):r.a.createElement(ht.a,{checked:e.courseActive,onChange:function(){u(e._id,o)},control:r.a.createElement(xt,null),label:e.courseActive?r.a.createElement(He.a,{variant:"body1"}," ",v("courseCards.fields.courseActive")):r.a.createElement(He.a,{variant:"body1",className:k.redText},v("courseCards.fields.courseInactive"))}),subheader:t&&r.a.createElement(qe,null,e.courseActive?r.a.createElement(He.a,{variant:"body1"}," ",v("courseCards.fields.courseActive")):r.a.createElement(He.a,{variant:"body1",className:k.redText},v("courseCards.fields.courseInactive")))}),r.a.createElement(it.a,{style:e.enrolled&&e.courseActive||!t?null:{opacity:.2,cursor:"auto"},onClick:function(){(e.enrolled&&e.courseActive||!t)&&T(e._id)},className:k.media,image:e.courseImage?e.courseImage:yt.a,title:"Course Image"}),r.a.createElement(ct.a,null,r.a.createElement("h2",{style:e.enrolled&&e.courseActive||!t?null:{opacity:.2,cursor:"auto"},onClick:function(){(e.enrolled&&e.courseActive||!t)&&T(e._id)},className:k.courseTitle},e.courseName),e.enrolled&&r.a.createElement(Ot,{progress:Ct(e,(h||{}).testResults)}),t&&r.a.createElement(He.a,{paragraph:!0,variant:"caption"},v("courseCards.instructor")+":"," ".concat(e.courseInstructor.firstName," ").concat(e.courseInstructor.lastName)),e.courseActive&&t?r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"caption"},v("courseCards.studentsEnrolled")+":"," ".concat(e.numberOfStudents," ").concat(e.studentCapacity?"/ "+e.studentCapacity:"")),e.enrollmentStartDate&&r.a.createElement(He.a,{paragraph:!0,variant:"caption"},v("courseCards.enrollmentStart")+":"," ".concat(bt()(parseInt(e.enrollmentStartDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")," ")),e.enrollmentEndDate&&r.a.createElement(He.a,{paragraph:!0,variant:"caption"},v("courseCards.enrollmentDeadline")+":"," ".concat(bt()(parseInt(e.enrollmentEndDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")," "))):t&&r.a.createElement(He.a,{paragraph:!0,color:"error",variant:"caption"},v("courseCards.courseNotActivated")),e.accessDenied&&r.a.createElement(He.a,{paragraph:!0,color:"error",variant:"caption"},v("courseCards.deniedRequest")),n&&r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"caption"},v("courseCards.studentsEnrolled")+":"," ".concat(e.numberOfStudents," ").concat(e.studentCapacity?"/ "+e.studentCapacity:""))),s)))}));return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:k.root},r.a.createElement(ft.a,{container:!0,justify:"space-around",spacing:3},O)))})),Dt=n(1),_t=n.n(Dt),It=n(13),jt=n(23),Rt=n(19),Nt=n(28),Lt=n(27),Pt=n(538),Bt=n(9),Mt=n(533),qt=n(409),Ut=n(545),Qt=n(44),Ht=n(45),Gt=n(546),Wt=n(547),zt=n(548),Vt=n(549),$t=n(550),Yt=n(551),Jt=n(552),Kt=n(553),Zt=n(554),Xt=n(555),en=n(556),tn=n(557),nn=n(558),an=n(559),rn=n(560),on=n(561),sn=n(562),cn=n(563),ln=n(564),un=n(565),dn=n(566),mn=n(567),pn=n(568),fn=n(569),gn=n(570),bn=n(571),hn=n(572),En=n(573),vn=n(574),yn=n(575),Tn=n(576),kn=n(577),Sn=n(578),wn=n(579),On=n(580),Cn=n(581),xn=n(582),An=n(583),Fn=n(584),Dn=n(585),_n=n(586),In=n(587),jn=n(588),Rn=n(589),Nn=n(590),Ln=n(591),Pn=n(592),Bn=n(593),Mn=n(594),qn=n(595),Un=n(596),Qn=n(597),Hn=n(598),Gn=n(599),Wn=n(600),zn=n(601),Vn=n(602),$n=n(603),Yn=n(604),Jn=n(605),Kn=n(606),Zn=n(607),Xn=n(608),ea=n(609),ta=n(610),na=n(611),aa=n(612),ra=n(613),oa=n(614),sa=n(615),ia=n(616),ca=n(617);Qt.es.testInfo=Qn.es,Qt.es.testMaterials=Gn.es,Qt.es.pdf=qn.es,Qt.es.modal=Bn.es,Qt.es.questions=In.es,Qt.es.resources=Ln.es,Qt.es.courseCards=Dn.es,Qt.es.syllabus=Zn.es,Qt.es.confirmations=ea.es,Qt.es.gradeBook=sa.es,Qt.es.students=$n.es,Qt.es.studentSummary=ca.es,Qt.es.gradeWork=zn.es,Qt.es.progressReport=An.es,Qt.es.modalHeaders=Jn.es,Qt.es.audioRecorder=gn.es,Qt.es.fileInput=En.es,Qt.es.layout=Gt.es,Qt.es.lessons=ra.es,Qt.es.tests=na.es,Qt.es.account=Zt.es,Qt.es.config=Rn.es,Qt.es.auth=Jt.es,Qt.es.courseForm=en.es,Qt.es.testForm=nn.es,Qt.es.questionForm=rn.es,Qt.es.lessonForm=ln.es,Qt.es.gradeTestForm=sn.es,Qt.es.testReview=pn.es,Qt.es.testSession=mn.es,Qt.es.instructorModules=zt.es,Qt.es.studentModules=$t.es,Qt.es.chat=Cn.es,Qt.es.alerts=wn.es,Qt.es.notifications=yn.es,Qt.es.calendar=kn.es,Ht.en.testInfo=Un.en,Ht.en.testMaterials=Hn.en,Ht.en.pdf=Mn.en,Ht.en.modal=Pn.en,Ht.en.questions=_n.en,Ht.en.resources=Nn.en,Ht.en.courseCards=Fn.en,Ht.en.syllabus=Kn.en,Ht.en.confirmations=Xn.en,Ht.en.gradeBook=oa.en,Ht.en.students=Vn.en,Ht.en.studentSummary=ia.en,Ht.en.gradeWork=Wn.en,Ht.en.progressReport=xn.en,Ht.en.modalHeaders=Yn.en,Ht.en.audioRecorder=bn.en,Ht.en.fileInput=hn.en,Ht.en.layout=Wt.en,Ht.en.lessons=aa.en,Ht.en.tests=ta.en,Ht.en.account=Xt.en,Ht.en.config=jn.en,Ht.en.auth=Kt.en,Ht.en.courseForm=tn.en,Ht.en.testForm=an.en,Ht.en.questionForm=on.en,Ht.en.lessonForm=un.en,Ht.en.gradeTestForm=cn.en,Ht.en.testReview=fn.en,Ht.en.testSession=dn.en,Ht.en.instructorModules=Vt.en,Ht.en.studentModules=Yt.en,Ht.en.chat=On.en,Ht.en.alerts=Sn.en,Ht.en.notifications=vn.en,Ht.en.calendar=Tn.en;var la={interpolation:{escapeValue:!1,load:"languageOnly"},debug:!0,resources:{es:{common:Qt.es},en:{common:Ht.en}},fallbackLng:"en",ns:["common"],defaultNS:"common",react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}};qt.a.use(Ut.a).init(la);var ua=qt.a,da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={pageOne:!1,pageTwo:!1,pageThree:!1,pageFour:!1,regularOfficeHours:{times:{Monday:{timeRange:null},Tuesday:{timeRange:null},Wednesday:{timeRange:null},Thursday:{timeRange:null},Friday:{timeRange:null},Saturday:{timeRange:null},Sunday:{timeRange:null}}}};(e.instructorCourses||[]).forEach((function(n){n._id!==e._id&&(n.courseName||"").toLowerCase().trim()===(e.courseName||"").toLowerCase().trim()&&(t.courseName=ua.t("courseForm.errors.noDuplicateNames"),t.pageOne=!0)})),e.courseName&&(e.courseName||"").trim()||(t.courseName=ua.t("courseForm.errors.enterCourseName"),t.pageOne=!0),e.studentCapacity<=0&&""!==e.studentCapacity&&null!==e.studentCapacity&&(t.studentCapacity=ua.t("courseForm.errors.studentCapacityGreaterThanZero"),t.pageOne=!0);var n=(e.instructorCourses||[]).find((function(t){return t._id===e._id}))||{},a=(n.studentsEnrollRequests||[]).filter((function(e){return e.approved})).length;e.studentCapacity&&(Number.isInteger(parseFloat(e.studentCapacity))||(t.studentCapacity=ua.t("courseForm.errors.studentCapacityInteger"),t.pageOne=!0),a>e.studentCapacity&&a>=1&&(t.studentCapacity=ua.t("courseForm.errors.studentCapacityGreaterThanOrEqualTo"),t.pageOne=!0));var r=new Date((e.enrollmentPeriod||[])[0]).getTime(),o=new Date((e.enrollmentPeriod||[])[1]).getTime(),s=new Date((e.courseTimeline||[])[0]).getTime(),i=new Date((e.courseTimeline||[])[1]).getTime(),c=new Date(e.courseDropDeadline).getTime(),l=new Date(e.createdAt).getTime();return!r||!e.editing||l<=r||(t.enrollmentPeriod=ua.t("courseForm.errors.laterDate"),t.pageTwo=!0),!r||!o||o>r||(t.enrollmentPeriod=ua.t("courseForm.errors.startDateNotBeforeEndDate"),t.pageTwo=!0),!s||!e.editing||l<=s||(t.courseTimeline=ua.t("courseForm.errors.laterDate"),t.pageTwo=!0),!s||!i||i>s||(t.courseTimeline=ua.t("courseForm.errors.startDateNotBeforeEndDate"),t.pageTwo=!0),!c||!e.editing||l<=c||(t.courseDropDeadline=ua.t("courseForm.errors.laterDate"),t.pageTwo=!0),r&&s&&s<r&&(t.courseTimeline=ua.t("courseForm.errors.courseStartDateNotBeforeEnrollmentStartDate"),t.pageTwo=!0),c&&r&&c<r&&(t.courseDropDeadline=ua.t("courseForm.errors.courseDropDateNotBeforeEnrollmentStartDate"),t.pageTwo=!0),i&&c&&c>i&&(t.courseDropDeadline=ua.t("courseForm.errors.courseDropDateNotAfterCourseEndDate"),t.pageTwo=!0),i&&r&&o&&(r>i||o>i)&&(t.enrollmentPeriod=ua.t("courseForm.errors.enrollmentStartAndEndDateNotAfterCourseEndDate"),t.pageTwo=!0),Array.from(n.tests||[]).forEach((function(e){!(e.availableOnDate&&s&&i)||parseInt(e.availableOnDate)>=s&&parseInt(e.availableOnDate)<=i||(t.courseTimeline="".concat(ua.t("courseForm.errors.testsHasAvailableOnDate")," ").concat(bt()(parseInt(e.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")).concat(ua.t("courseForm.errors.fallsOutsideCourseDuration"),"."),t.pageTwo=!0),!(e.dueDate&&s&&i)||parseInt(e.dueDate)>=s&&parseInt(e.dueDate)<=i||(t.courseTimeline="".concat(ua.t("courseForm.errors.testsHasDueDate")," ").concat(bt()(parseInt(e.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")).concat(ua.t("courseForm.errors.fallsOutsideCourseDuration"),"."),t.pageTwo=!0),!e.gradeReleaseDate||!s||parseInt(e.gradeReleaseDate)>=s||(t.courseTimeline="".concat(ua.t("courseForm.errors.testsHasGradeReleaseDate")," ").concat(bt()(parseInt(e.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")).concat(ua.t("courseForm.errors.isBeforeStartDateOfCourse")),t.pageTwo=!0)})),Array.from(n.lessons||[]).forEach((function(e){!(e.availableOnDate&&s&&i)||parseInt(e.availableOnDate)>=s&&parseInt(e.availableOnDate)<=i||(t.courseTimeline="".concat(ua.t("courseForm.errors.lessonsHasAvailableOnDate")," ").concat(bt()(parseInt(e.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")).concat(ua.t("courseForm.errors.fallsOutsideCourseDuration"),"."),t.pageTwo=!0)})),t.irregularOfficeHours=(e.irregularOfficeHours||[]).map((function(e){if(!e)return t.pageThree=!0,{date:ua.t("courseForm.errors.enterDateOrRemove")};var n,a,r=new Date(e.date).getTime();r<l&&(n=ua.t("courseForm.errors.laterDate")),i&&s&&(r<i||(n=ua.t("courseForm.errors.enterDateBeforeCourseEndDate")),r>s||(n=ua.t("courseForm.errors.enterDateAfterCourseStartDate"))),e.date||(n=ua.t("courseForm.errors.enterDateOrRemove"));var o=e.timeRange||[];return Date.parse("01/01/2011 ".concat(o[0]))===Date.parse("01/01/2011 ".concat(o[1]))&&(a=ua.t("courseForm.errors.startTimeEndTimeCannotBeSame")),Date.parse("01/01/2011 ".concat(o[0]))>Date.parse("01/01/2011 ".concat(o[1]))&&(a=ua.t("courseForm.errors.startTimeCannotBeAfterEndTime")),o[0]&&o[1]||(a=ua.t("courseForm.errors.enterCompleteTimeInterval")),(a||n)&&(t.pageThree=!0),{date:n,timeRange:a}})),Array.from((e.regularOfficeHours||{}).days||[]).forEach((function(n){var a,r=(((e.regularOfficeHours||{}).times||{})[n]||{}).timeRange||"";Date.parse("01/01/2011 ".concat(r[0]))>Date.parse("01/01/2011 ".concat(r[1]))&&(a=ua.t("courseForm.errors.startTimeCannotBeAfterEndTime")),Date.parse("01/01/2011 ".concat(r[0]))===Date.parse("01/01/2011 ".concat(r[1]))&&(a=ua.t("courseForm.errors.startTimeEndTimeCannotBeSame")),r[0]&&r[1]||(a=ua.t("courseForm.errors.enterCompleteTimeInterval")),(((e.regularOfficeHours||{}).times||{})[n]||{}).timeRange||(a="".concat(ua.t("courseForm.errors.enterTimeIntervalOrUncheck")," ").concat("en"===localStorage.getItem("i18nextLng")?ua.t("courseForm.days.".concat(n.toLowerCase())):ua.t("courseForm.days.".concat(n.toLowerCase())).toLowerCase())),a&&(t.pageThree=!0),t.regularOfficeHours.times[n].timeRange=a})),t},ma=n(178),pa=n.n(ma),fa=n(177),ga=n.n(fa),ba=n(390),ha=n(1133),Ea=n(1136),va=n(1134),ya=n(1157),Ta=Object(rt.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},textField:{minWidth:"80px",width:"100%",marginBottom:"20px"},InputField:{boxSizing:"border-box",border:"1px solid #C2C2C2",margin:"0 3px",flexGrow:1,borderRadius:"3px",padding:"7px",outline:"none",width:"100%"},InputFieldBlueShadow:{boxSizing:"border-box",border:"1px solid #C2C2C2",margin:"0 3px",flexGrow:1,borderRadius:"3px",padding:"7px",outline:"none",width:"100%"},textLabel:{margin:"0 3px 10px 3px"},languageContainer:{paddingRight:"4px",width:"100%"},errorText:{color:"#e91313",fontFamily:"Helvetica",fontSize:"0.75rem"},errorTextContainer:{marginLeft:"13px"},darkTheme:{background:"transparent",color:"white"}}})),ka=Object(c.b)((function(e){return{isDarkTheme:e.common.isDarkTheme}}))((function(e){var t=e.input,n=e.label,a=e.meta,o=void 0===a?{}:a,s=e.options,i=e.disabled,c=e.size,l=e.error,u=e.type,d=e.fullWidth,m=e.simple,p=e.blueBackground,f=e.textLabel,g=e.language,b=e.width,h=e.required,E=e.errorAbsolutePosition,v=e.isDarkTheme,y=Ta(),T=r.a.createElement("div",{style:d?{width:"100%"}:{}},r.a.createElement(ha.a,{className:y.textField,variant:"outlined"},r.a.createElement(va.a,{required:h,htmlFor:"component-outlined"},n),r.a.createElement(ya.a,Object.assign({error:(o.error||l)&&o.touched,type:u,size:c||"medium",label:n,disabled:i,autoComplete:"off"},t,s)),r.a.createElement(Ea.a,null,(o.error||l)&&o.touched?l||o.error:"")));if(m){var k=d?"100%":b;T=r.a.createElement("div",{className:g?y.languageContainer:""},f&&r.a.createElement("div",{className:y.textLabel},"".concat(n)),r.a.createElement("input",Object.assign({onClick:function(e){e.stopPropagation()},type:u||"text",style:{width:k||"95%"},className:[p?y.InputFieldBlueShadow:y.InputField,v?y.darkTheme:""].join(" "),placeholder:f?"":n},t,{disabled:i})),r.a.createElement("div",{style:{position:E?"absolute":"relative"},className:y.errorTextContainer},r.a.createElement("span",{className:y.errorText}," ",(o.error||l)&&o.touched?l||o.error:"")))}return T})),Sa=n(197),wa=n.n(Sa),Oa=Object(at.a)({switchBase:{color:"#64b5f6","&$checked":{color:"#2196f3"},"&$checked + $track":{backgroundColor:"#2196f3"}},colorSecondary:{"&$checked":{"&:hover":{backgroundColor:"#64b5f6"}}},checked:{},track:{}})(Et.a);function Ca(e){var t=e.input,n=e.options,a=(t.name,t.onChange);return r.a.createElement("div",{className:n.label?wa.a.Margin:wa.a.MarginNoLabel},r.a.createElement("span",{className:wa.a.Label},n.optionOne),r.a.createElement("div",{className:wa.a.Inline},r.a.createElement(ht.a,{className:wa.a.noMargin,onChange:function(e){a(e.target.checked)},disabled:n.disabled,checked:!!t.value&&t.value,control:r.a.createElement(Oa,null),label:n.label})),r.a.createElement("span",{className:wa.a.Label},n.optionTwo))}var xa=n(1231),Aa=n(1262);function Fa(e){var t=e.options,n=e.label,a=e.onOptionChange,o=e.selectedOption,s=(e.input,e.id),i=e.size;e.minWidth,e.width,e.margin;return r.a.createElement(Aa.a,{style:{width:"100%",marginBottom:23},id:s,size:i||"medium",value:o||null,onChange:a,options:t,getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(xa.a,Object.assign({},e,{label:n,variant:"outlined"}))}})}var Da=n(667),_a=Object(Da.a)({overrides:{PrivateNotchedOutline:{legendLabelled:{fontSize:"0.65em"}},MuiFormHelperText:{root:{color:"#e91313"}},MuiInputLabel:{formControl:{color:"white"}},MuiInputBase:{root:{color:"white"}},MuiOutlinedInput:{notchedOutline:{"&:hover":{color:"white !important"}},root:{"&$focused":{color:"#2196f3"},borderRadius:"4px",position:"relative","& $notchedOutline":{borderColor:"rgba(0, 0, 0, 0.23)"},"&:hover:not($disabled):not($focused):not($error) $notchedOutline":{borderColor:"#2196f3","@media (hover: none)":{borderColor:"rgba(0, 0, 0, 0.23)"}},"&$focused $notchedOutline":{borderColor:"#2196f3",borderWidth:2}}},MuiFormLabel:{root:{"&$focused":{color:"#2196f3"}}}}}),Ia=Object(Da.a)({overrides:{PrivateNotchedOutline:{legendLabelled:{fontSize:"0.65em"}},MuiFormHelperText:{root:{color:"#e91313"}},MuiOutlinedInput:{root:{borderRadius:"4px",position:"relative","& $notchedOutline":{borderColor:"rgba(0, 0, 0, 0.23)"},"&:hover:not($disabled):not($focused):not($error) $notchedOutline":{borderColor:"#2196f3","@media (hover: none)":{borderColor:"rgba(0, 0, 0, 0.23)"}},"&$focused $notchedOutline":{borderColor:"#2196f3",borderWidth:2}}},MuiFormLabel:{root:{"&$focused":{color:"#2196f3"}}}}}),ja=function(e){var t=e.isDarkTheme,n=e.children;return r.a.createElement(f.a,{theme:t?_a:Ia},n)},Ra=Object(rt.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},textField:{width:"180px",marginBottom:"20px"},fullWidth:{minWidth:"180px",width:"100%",marginBottom:"20px"},InputField:{boxSizing:"border-box",border:"1px solid #C2C2C2",borderRadius:"3px",padding:"7px",outline:"none",backgroundColor:"transparent"},InputFieldDark:{color:"white"},position:{display:"block",marginRight:10},errorText:{color:"red",fontSize:"0.7em",display:"block"},minWidth:{minWidth:250}}}));var Na=Object(c.b)((function(e){return{isDarkTheme:e.common.isDarkTheme}}))((function(e){var t=e.options,n=e.readOnly,a=e.input,o=e.disabled,s=e.fullWidth,i=e.simple,c=e.width,l=e.meta,u=void 0===l?{}:l,d=e.error,m=(e.customMargin,e.borderColor),p=e.compact,f=e.minWidth,g=e.errorBottomPosition,b=e.configInput,h=e.isDarkTheme,E=Ra(),v=r.a.createElement("div",{style:{marginBottom:20,maxWidth:250}},r.a.createElement(xa.a,Object.assign({className:E.position},a,t,{type:"number",helperText:(u.error||d)&&u.touched?d||u.error:null,variant:"outlined"})));if(p&&(v=r.a.createElement(ja,{isDarkTheme:h},r.a.createElement(xa.a,Object.assign({style:{marginBottom:20},inputProps:{style:{fontSize:14,minWidth:t.minWidth||f}},InputLabelProps:{style:{fontSize:14}},className:[s,E.position].join(" ")},a,t,{type:"number",helperText:(u.error||d)&&u.touched?d||u.error:null,variant:"outlined"})))),i){var y={width:c,borderColor:m,marginBottom:u.error&&b?40:0};v=r.a.createElement(qe,null,!g&&r.a.createElement("span",{className:E.errorText},(u.error||d)&&u.touched?d||u.error:null," "),r.a.createElement("input",Object.assign({disabled:o,type:"number",className:E.InputField},a,{style:y})),g&&r.a.createElement("span",{style:{transform:b?"translateY(-35px)":"",textAlign:b?"left":"",position:b?"absolute":""},className:E.errorText},(u.error||d)&&u.touched?d||u.error:null," ")),n&&(v=r.a.createElement("input",{type:"number",className:[E.InputField,h?E.InputFieldDark:""].join(" "),value:a.value,readOnly:!0,style:y}))}return v})),La=n(4),Pa=n.n(La),Ba=n(35),Ma=n(317),qa=n(141),Ua=n.n(qa),Qa=n(1234),Ha=n(620),Ga=n.n(Ha),Wa=n(674),za=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(e){var a;return Object(jt.a)(this,n),(a=t.call(this,e)).handleFileChange=function(){var e=Object(Ba.a)(Pa.a.mark((function e(t,n){var r,o,s,i,c,l,u,d;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({changingDoc:!0}),t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:if(r=a.props,o=r.extensionsAllowed,s=r.input,i=s.onChange,s.value,c=t.target.files[0].name.toLowerCase().split(".").pop(),o.includes(c)){e.next=7;break}return e.abrupt("return");case 7:if(l={maxSizeMB:2,maxWidthOrHeight:1920,useWebWorker:!0},u=t.target.files[0],!a.props.compressImage||"jpeg"!==c&&"jpg"!==c&&"jfif"!==c){e.next=14;break}return e.next=12,Object(Ma.a)(t.target.files[0],l);case 12:d=e.sent,u=new File([d],d.name);case 14:try{a.props.onChangeFile(URL.createObjectURL(u),n),i(u),t.target.value=null}catch(m){console.log("err: ",m)}case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.handleDocChange=function(e){a.setState({changingDoc:e})},a.componentDidUpdate=function(e,t,n){!0===t.changingDoc&&a.handleDocChange(!1)},a.state={changingDoc:!1},a}return Object(Rt.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,o=n.index,s=n.meta,i=void 0===s?{}:s,c=n.videoFile,l=n.loadedFile,u=n.onClear,d=n.source,m=n.children,p=n.uploadButtonText,f=n.circle,g=n.fullSizeImage,b=n.mimeTypesAllowed,h=n.input,E=n.preview,v=n.uploadButtonMinWidth,y=n.attachIcon,T=n.disabled,k=n.t;return e=h.value instanceof File?(h.value||{}).name.toLowerCase().split(".").pop():(h.value||"").toLowerCase().split(".").pop(),r.a.createElement(a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{disabled:T,accept:b,type:"file",onChange:function(e){console.log("e: ",e.target.files),e&&e.persist(),t.handleFileChange(e,o)},style:{display:"none"},id:"fileInput".concat(o)||!1})),l&&!1!==E&&("jpeg"===e||"jpg"===e||"jfif"===e)&&r.a.createElement("div",{style:{backgroundImage:'url("'.concat(l,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:g?"400px":"200px",borderRadius:f?"50%":"3px",maxWidth:g?"800px":f?"200px":"300px",width:"100%",margin:"auto"}}),r.a.createElement("label",{style:{textAlign:"center",display:"block"},htmlFor:"fileInput".concat(o)||!1},y?r.a.createElement(Wa.a,{style:{opacity:T?.3:1},onClick:function(){},disabled:T,component:"span"},r.a.createElement(Ga.a,{style:{color:"white"}})):r.a.createElement(pt.a,{style:{minWidth:v},variant:"contained",color:"primary",component:"span"},p||k("fileInput.buttons.upload"))),r.a.createElement("div",null,l&&!1!==E&&!1===this.state.changingDoc&&("docx"===e||"doc"===e)&&r.a.createElement("div",{id:"doc[".concat(o,"]")},r.a.createElement(Ua.a,{fileType:e,filePath:l}))),i.error&&i.touched&&r.a.createElement("span",{style:{color:"#E91313",fontSize:"0.7em",display:"block"}},i.error)),m,c&&r.a.createElement(pt.a,{type:"button",onClick:u,color:"secondary",disabled:!d},k("fileInput.buttons.clearVideo")))}}]),n}(a.Component),Va=Object(Qa.a)("common")(za),$a=n(90),Ya=n.n($a),Ja=["English","French","Spanish","Russian","Arabic","Hindi","Italian","Mandarin","Bengali","Portuguese","Japanese","Vietnamese","German","Ukranian","Dutch","Czech","Polish","Indonesian","Thai","Romanian","Persian","Javanese","Turkish","Korean","Urdu","Punjabi","Tagalog","Amharic","Igbo","Somali","Bavarian","Kazakh","Hungarian","Zulu","Rundi","Greek","Swedish","Creole","Nepali","Croatian","Uzbek"],Ka=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSelectedLanguage=function(t,n){e.props.changeField("language",n)},e}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this.props,t=e.formValues,n=void 0===t?{}:t,a=e.changeField,o=e.isImage,s=e.clearImage,i=e.editing,c=e.t,l={label:c("courseForm.fields.courseActive"),checked:!1};return r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"h5",gutterBottom:!0},c("courseForm.courseCustomization")),r.a.createElement(ba.a,{name:"courseActive",options:l,component:Ca}),r.a.createElement(ba.a,{name:"courseName",type:"text",component:ka,label:c("courseForm.fields.courseName")}),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"}},r.a.createElement(ba.a,{name:"studentCapacity",component:Na,fullWidth:!0,compact:!0,options:{label:c("courseForm.fields.maxStudents"),size:"small"},customMargin:"0 5px 0 0"}),r.a.createElement(ba.a,{name:"language",component:Fa,id:"language-autocomplete",selectedOption:n.language,onOptionChange:this.handleSelectedLanguage,options:Ja,label:c("courseForm.fields.taughtIn"),size:"small",minWidth:135})),r.a.createElement(He.a,{paragraph:!0,variant:"h5",gutterBottom:!0},c("courseForm.courseThumbnail")),r.a.createElement(ba.a,{name:"courseImage",onChangeFile:function(e){a("loadedCourseImage",e)},uploadButtonText:c("courseForm.fields.chooseImage"),uploadButtonMinWidth:200,compressImage:!0,editing:i,loadedFile:n.loadedCourseImage,component:Va,imageFile:!0,type:"file",mimeTypesAllowed:"image/jpeg",extensionsAllowed:["jpeg","jpg","jfif"]}),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(pt.a,{style:{minWidth:200},startIcon:r.a.createElement(Ya.a,null),disabled:!o,color:"secondary",onClick:function(){return s()}},c("courseForm.buttons.clearImage"))))}}]),n}(a.Component),Za=Object(Mt.a)({form:"courseForm",validate:da,destroyOnUnmount:!1})(Object(Qa.a)("common")(Ka)),Xa=Object(c.b)((function(e){return{editing:e.common.editing,formValues:Object(nt.a)("courseForm")(e)}}),(function(e){return{changeField:function(t,n){e(Object(Bt.a)("courseForm",t,n))},clearImage:function(){e(Object(Bt.a)("courseForm","courseImage",null)),e(Object(Bt.a)("courseForm","loadedCourseImage",null))}}}))(Za),er=n(70),tr=n.n(er),nr=(n(869),n(622)),ar=n.n(nr),rr=n(623),or=n.n(rr),sr=n(624),ir=n.n(sr),cr=n(625),lr=n.n(cr);var ur=Object(c.b)((function(e){return{width:e.common.width,isDarkTheme:e.common.isDarkTheme}}))((function(e){var t,n=e.input,a=e.type,o=e.error,s=e.handleChange,i=e.options,c=e.fullWidth,l=e.meta,u=(e.noPaddingBottom,e.maxDate),d=e.account,m=e.width,p=(e.isDarkTheme,i.disablePast),f=i.minDate,g=localStorage.getItem("i18nextLng");return"date"===a&&(t=r.a.createElement(ar.a,{format:"y/MM/dd",locale:g,className:[d?tr.a.accountGeneral:tr.a.general,tr.a.noPaddingWrapper,c?tr.a.fullWidth:"",m<360?tr.a.smallWidth:""].join(" "),value:n.value,onChange:s,minDate:f?new Date(f):p?new Date:null,maxDate:u})),"dateTime"===a&&(t=r.a.createElement(or.a,{locale:g,format:"y/MM/dd h:mm a",className:[tr.a.general,tr.a.wrapper,m<360?tr.a.smallWidth:"",c?tr.a.fullWidth:""].join(" "),value:n.value,onChange:s,disableClock:!0,minDate:f?new Date(f):p?new Date:null})),"timeRange"===a&&(t=r.a.createElement(ir.a,{locale:g,className:[tr.a.general,tr.a.timeRangeWrapper,c?tr.a.fullWidth:"",m<360?tr.a.smallWidth:""].join(" "),value:n.value,onChange:s,format:"h:mm a",disableClock:!0,minDate:f?new Date(f):p?new Date:null})),"dateTimeRange"===a&&(t=r.a.createElement(lr.a,{locale:g,format:"y/MM/dd h:mm a",className:[tr.a.general,tr.a.wrapper,c?tr.a.fullWidth:"",m<360?tr.a.smallWidth:""].join(" "),value:n.value,onChange:s,disableClock:!0,minDate:f?new Date(f):p?new Date:null})),r.a.createElement(qe,null,i.label&&r.a.createElement("span",{className:tr.a.label},"".concat(i.label,":")),t,r.a.createElement("span",{className:tr.a.errorText},(l.error||o)&&l.touched?l.error||o:""))})),dr=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){return Object(jt.a)(this,n),t.apply(this,arguments)}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this,t=this.props.t;return r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"h5",gutterBottom:!0},t("courseForm.importantDates")),r.a.createElement(ba.a,{name:"enrollmentPeriod",component:ur,fullWidth:!0,options:{minDate:this.props.createdAt,disablePast:!0,label:t("courseForm.fields.enrollmentPeriod")},type:"dateTimeRange",handleChange:function(t){return e.props.changeDateTime(t,"enrollmentPeriod")}}),r.a.createElement(ba.a,{name:"courseTimeline",component:ur,fullWidth:!0,options:{disablePast:!0,label:t("courseForm.fields.courseDuration"),minDate:this.props.createdAt},type:"dateTimeRange",handleChange:function(t){return e.props.changeDateTime(t,"courseTimeline")}}),r.a.createElement(ba.a,{name:"courseDropDeadline",component:ur,fullWidth:!0,options:{disablePast:!0,label:t("courseForm.fields.deadlineToDrop"),minDate:this.props.createdAt},type:"dateTime",handleChange:function(t){return e.props.changeDateTime(t,"courseDropDeadline")}}))}}]),n}(a.Component),mr=Object(Mt.a)({form:"courseForm",validate:da,destroyOnUnmount:!1})(Object(Qa.a)("common")(dr)),pr=Object(c.b)(null,(function(e){return{changeDateTime:function(t,n){e(Object(Bt.a)("courseForm",n,t))}}}))(mr),fr=n(534),gr=n(537),br=n(142),hr=n.n(br),Er=n(1235),vr=n(1236),yr=n(1156),Tr=n(1267),kr=Object(Da.a)({overrides:{MuiFormControl:{root:{width:"100%"}},MuiOutlinedInput:{root:{position:"relative","& $notchedOutline":{borderColor:"rgba(0, 0, 0, 0.23)"},"&:hover:not($disabled):not($focused):not($error) $notchedOutline":{borderColor:"#2196f3","@media (hover: none)":{borderColor:"rgba(0, 0, 0, 0.23)"}},"&$focused $notchedOutline":{borderColor:"#2196f3",borderWidth:1.5}}},MuiFormLabel:{root:{"&$focused":{color:"#2196f3"}}},MuiCheckbox:{colorSecondary:{"&$checked":{color:"#2196f3","&:hover":{backgroundColor:"rgba(33,150,243,0.4)"}}}},MuiIconButton:{colorSecondary:{"&:hover":{backgroundColor:"rgba(33,150,243,0.4)"}}}}}),Sr=function(e){return r.a.createElement(f.a,{theme:kr},e.children)},wr=Object(rt.a)((function(e){return{root:{marginLeft:25,maxWidth:574},formControl:{margin:e.spacing(1),minWidth:220,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),Or={PaperProps:{style:{maxHeight:224,width:250}}};function Cr(e){var t=e.input,n=e.label,o=Object(We.a)("common"),s=o.t,i=(o.i18n,wr()),c=r.a.useRef(null),l=n,u=t.value;return r.a.createElement(Sr,null,r.a.createElement(a.Fragment,null,r.a.createElement(ha.a,{className:i.root,variant:"outlined"},r.a.createElement(va.a,{htmlFor:"select-multiple-chip",ref:c,shrink:n&&(!!l||void 0!==u)},n),r.a.createElement(yr.a,Object.assign({},t,{labelId:"demo-mutiple-checkbox-label",id:"demo-mutiple-checkbox",multiple:!0,ref:c,value:t.value||[],input:r.a.createElement(ya.a,{label:n,notched:!0}),renderValue:function(e){return(e||[]).map((function(e){return s("courseForm.days.".concat(e.toLowerCase()))})).join(", ")},MenuProps:Or}),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((function(e){return r.a.createElement(Er.a,{key:e,value:e},r.a.createElement(Tr.a,{checked:(t.value||[]).indexOf(e)>-1}),r.a.createElement(vr.a,{primary:s("courseForm.days.".concat(e.toLowerCase()))}))}))))))}var xr=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).renderRegularOfficeHours=function(t){t.fields;var n=t.meta,a=(n.error,n.submitFailed,e.props.t);return r.a.createElement("div",null,["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((function(t,n){if(((e.props.regularOfficeHours||{}).days||[]).includes(t))return r.a.createElement(ot.a,{style:{padding:"5px",margin:"15px 0 0 25px"},key:"".concat(t,"[").concat(n,"]")},r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},a("courseForm.fields.weeklyOfficeHours.".concat(t.toLowerCase(),"OfficeHours"))),r.a.createElement(qe,null,r.a.createElement(ba.a,{name:"regularOfficeHours.times.".concat(t,".timeRange"),type:"timeRange",component:ur,handleChange:function(n){return e.props.changeDateTime(n,"regularOfficeHours.times.".concat(t,".timeRange"))},options:{label:a("courseForm.fields.timeRange")}})))})))},e.renderIrregularOfficeHours=function(t){var n=t.fields,a=t.meta,o=(a.error,a.submitFailed,e.props.t);return r.a.createElement("div",null,(n||[]).map((function(t,a){return r.a.createElement(ot.a,{style:{padding:"5px",margin:"15px 0 0 25px"},key:t},r.a.createElement(ba.a,{name:"irregularOfficeHours.".concat(a,".date"),type:"date",component:ur,handleChange:function(t){return e.props.changeDateTime(t,"irregularOfficeHours.".concat(a,".date"))},options:{label:o("courseForm.fields.date"),disablePast:!0,minDate:e.props.createdAt}}),r.a.createElement(ba.a,{name:"irregularOfficeHours.".concat(a,".timeRange"),type:"timeRange",component:ur,handleChange:function(t){return e.props.changeDateTime(t,"irregularOfficeHours.".concat(a,".timeRange"))},options:{label:o("courseForm.fields.timeRange")}}),r.a.createElement(pt.a,{color:"secondary",fullWidth:!0,startIcon:r.a.createElement(Ya.a,null),onClick:function(e){e.preventDefault(),n.remove(a)},"aria-label":"delete"},o("courseForm.buttons.removeDate")))})),r.a.createElement(pt.a,{startIcon:r.a.createElement(hr.a,null),color:"primary",onClick:function(e){e.preventDefault(),n.push()},"aria-label":"delete",fullWidth:!0},o("courseForm.buttons.addDate")))},e}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this.props.t;return r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"h5",gutterBottom:!0,style:{marginTop:"40px"}},e("courseForm.weeklyOfficeHours")),r.a.createElement(ba.a,{name:"regularOfficeHours.days",label:e("courseForm.fields.daysOfWeek"),component:Cr}),r.a.createElement(fr.a,{name:"times",component:this.renderRegularOfficeHours}),r.a.createElement(He.a,{paragraph:!0,variant:"h5",style:{marginTop:"40px"},gutterBottom:!0},e("courseForm.specificDateOfficeHours")),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(fr.a,{name:"irregularOfficeHours",component:this.renderIrregularOfficeHours})))}}]),n}(a.Component),Ar=Object(Mt.a)({form:"courseForm",validate:da,destroyOnUnmount:!1})(Object(Qa.a)("common")(xr)),Fr=Object(c.b)((function(e){var t=Object(gr.a)("courseForm");return{regularOfficeHours:t(e,"regularOfficeHours"),irregularOfficeHours:t(e,"irregularOfficeHours")}}),(function(e){return{changeDateTime:function(t,n){e(Object(Bt.a)("courseForm",n,t))}}}))(Ar),Dr=function(e,t){var n={language:localStorage.getItem("i18nextLng"),toolbar:{viewportTopOffset:56,items:t?["highlight","bold","imageTextAlternative","numberedList","bulletedList","heading"]:["highlight","imageUpload","bold","imageTextAlternative","imageStyle:full","imageStyle:side","numberedList","bulletedList","heading"]},highlight:{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"}]}};return e.testPanelFormFillBlankSection&&e.fillInBlankTestFormTextEditorContent&&(n.maxWidth="50%",n.placeholder="Write some text..",n.highlight.options=[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"}],n.toolbar={viewportTopOffset:56,items:["highlight","undo","redo","imageUpload","imageTextAlternative","imageStyle:full","imageStyle:side","bold","italic","numberedList","bulletedList","heading"]}),!e.courseDetailSection&&e.instructorLoggedIn&&(n.placeholder="Write a syllabus so that students will know what to expect in the course..."),(e.lessonFormTextEditorContent||[])[e.index]&&(n.placeholder=""),e.testPanelFormEssaySection&&e.essayTestFormTextEditorContent&&e.essayTestFormTextEditorContent[e.index]&&(n.placeholder="Start writing a question..."),e.testPanelFormMcSection&&e.mcTestFormTextEditorContent&&e.mcTestFormTextEditorContent[e.index]&&(n.placeholder="Start writing a question..."),e.testPanelFormSpeakingSection&&e.speakingTestFormTextEditorContent&&e.speakingTestFormTextEditorContent[e.index]&&(n.placeholder="Start writing some text, use the yellow marker to highlight text that needs to be pronounced by the student"),n},_r=n(626),Ir=n.n(_r),jr=n(119),Rr=n.n(jr),Nr=n(394),Lr=function(e,t){return Object(It.a)(Object(It.a)({},e),t)},Pr=n(332),Br=n.n(Pr),Mr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={mcQuestions:[],essayQuestions:[],speakingQuestions:[],fillBlankQuestions:{answers:[]},infoPageOneError:!1,infoPageTwoError:!1,infoPageThreeError:!1,infoPageFourError:!1,mcSectionPageError:!1,essayPageError:!1,speakingPageError:!1,fillblankPageError:!1,readingMaterial:{multipleChoice:{},essay:{},speaking:{},fillInTheBlanks:{},test:{}},audioMaterial:{multipleChoice:{},essay:{},speaking:{},fillInTheBlanks:{},test:{}}},n=function(e){return(e||[]).reduce((function(e,t,n,a){return a.indexOf(t)!==n&&e.indexOf(t)<0&&e.push(t),e}),[])};(e.testName||e.assignment)&&((e.testName||"").trim()||e.assignment)||(t.testName=ua.t("testForm.errors.required"),t.infoPageOneError=!0),(e.tests||[]).forEach((function(n){e._id===n._id||e.assignment||(n.testName||"").toLowerCase().trim()!==(e.testName||"").toLowerCase().trim()||(t.testName=ua.t("testForm.errors.noDuplicateTestNames"),t.infoPageOneError=!0)})),(e.assignments||[]).forEach((function(n){e._id!==n._id&&e.assignment&&(n.testName||"").toLowerCase().trim()===(e.assignmentName||"").toLowerCase().trim()&&(t.assignmentName=ua.t("testForm.errors.noDuplicateAssignmentNames"))})),(!e.assignmentName&&e.assignment||!(e.assignmentName||"").trim()&&e.assignment)&&(t.assignmentName=ua.t("testForm.errors.required"),t.infoPageOneError=!0),e.isGradeIncluded&&(!(e.testWeight>1e3)&&e.testWeight>0||e.assignment||(t.testWeight=ua.t("testForm.errors.mustBeBetweenZeroAndThousand"),t.infoPageOneError=!0),e.testWeight||e.assignment||(t.testWeight=ua.t("testForm.errors.required"),t.infoPageOneError=!0),!(e.assignmentWeight>1e3)&&e.assignmentWeight>0||!e.assignment||(t.assignmentWeight=ua.t("testForm.errors.mustBeBetweenZeroAndThousand"),t.infoPageOneError=!0),!e.assignmentWeight&&e.assignment&&(t.assignmentWeight=ua.t("testForm.errors.required"),t.infoPageOneError=!0)),!e.passingGrade||!(e.passingGrade>100)&&e.passingGrade>=1||(t.passingGrade=ua.t("testForm.errors.mustBeBetweenOneAndHundred"),t.infoPageOneError=!0),!e.passingGrade&&e.passingRequired&&(t.passingGrade=ua.t("testForm.errors.specifyPassGrade"),t.infoPageOneError=!0),!e.allowLateSubmission||e.latePenalty<100&&e.latePenalty>0||(t.latePenalty=ua.t("testForm.errors.mustBeGreaterThanZeroAndLessThanHundred"),t.infoPageOneError=!0),e.allowLateSubmission&&!e.latePenalty&&(t.latePenalty=ua.t("testForm.errors.required"),t.infoPageOneError=!0),e.allowLateSubmission&&(parseFloat(e.lateDaysAllowed)<=0||!Number.isInteger(parseFloat(e.lateDaysAllowed)))&&(t.lateDaysAllowed=ua.t("testForm.errors.intGreaterThanZero"),t.infoPageOneError=!0),e.allowLateSubmission&&!e.lateDaysAllowed&&(t.lateDaysAllowed=ua.t("testForm.errors.required"),t.infoPageOneError=!0),!e.assignment&&e.timedTest&&(0===parseFloat(e.testTime)||e.testTime<0||!Number.isInteger(parseFloat(e.testTime)))&&(t.testTime=ua.t("testForm.errors.intGreaterThanZero"),t.infoPageOneError=!0),e.assignment||!e.timedTest||e.testTime||(t.testTime=ua.t("testForm.errors.requiredOrDisableTimedTest"),t.infoPageOneError=!0),e.testType||e.assignment||(t.testType=ua.t("testForm.errors.required"),t.infoPageOneError=!0);var a=(e.tests||[]).find((function(e){return"final"===e.testType}));a&&"final"===e.testType&&a._id!==e._id&&(t.testType=ua.t("testForm.errors.onlyOneFinal"),t.infoPageOneError=!0),!(e.testSections||[]).includes("mc")||e.mcSectionWeight>0||(t.mcSectionWeight=ua.t("testForm.errors.greaterThanZero"),t.infoPageTwoError=!0),(e.testSections||[]).includes("mc")&&!e.mcSectionWeight&&(t.mcSectionWeight=ua.t("testForm.errors.required"),t.infoPageTwoError=!0),!(e.testSections||[]).includes("essay")||e.essaySectionWeight>0||(t.essaySectionWeight=ua.t("testForm.errors.greaterThanZero"),t.infoPageTwoError=!0),(e.testSections||[]).includes("essay")&&!e.essaySectionWeight&&(t.essaySectionWeight=ua.t("testForm.errors.required"),t.infoPageTwoError=!0),!(e.testSections||[]).includes("speaking")||e.speakingSectionWeight>0||(t.speakingSectionWeight=ua.t("testForm.errors.greaterThanZero"),t.infoPageTwoError=!0),(e.testSections||[]).includes("speaking")&&!e.speakingSectionWeight&&(t.speakingSectionWeight=ua.t("testForm.errors.required"),t.infoPageTwoError=!0),!(e.testSections||[]).includes("fillblanks")||e.fillBlankSectionWeight>0||(t.fillBlankSectionWeight=ua.t("testForm.errors.greaterThanZero"),t.infoPageTwoError=!0),(e.testSections||[]).includes("fillblanks")&&!e.fillBlankSectionWeight&&(t.fillBlankSectionWeight=ua.t("testForm.errors.required"),t.infoPageTwoError=!0);var r=[(e.testSections||[]).includes("mc")?parseFloat(e.mcSectionWeight):0,(e.testSections||[]).includes("essay")?parseFloat(e.essaySectionWeight):0,(e.testSections||[]).includes("speaking")?parseFloat(e.speakingSectionWeight):0,(e.testSections||[]).includes("fillblanks")?parseFloat(e.fillBlankSectionWeight):0].reduce((function(e,t){return e+t}),0);(r<99.99||r>100)&&(!e.testSections||(e.testSections||[]).length>0)&&(t.testSections=ua.t("testForm.errors.addToHundred"),t.infoPageTwoError=!0),e.testSections&&0!==(e.testSections||[]).length||(t.testSections=ua.t("testForm.errors.selectSections"),t.infoPageTwoError=!0),!e.dueDate||(e.editing||Date.now()<=new Date(e.dueDate).getTime())&&(!e.editing||new Date(e.createdAt).getTime()<=new Date(e.dueDate).getTime())||(t.dueDate=ua.t("testForm.errors.laterDate"),t.infoPageThreeError=!0),!e.gradeReleaseDate||(e.editing||Date.now()<=new Date(e.gradeReleaseDate).getTime())&&(!e.editing||new Date(e.createdAt).getTime()<=new Date(e.gradeReleaseDate).getTime())||(t.gradeReleaseDate=ua.t("testForm.errors.laterDate"),t.infoPageThreeError=!0),!e.availableOnDate||(e.editing||Date.now()<=new Date(e.availableOnDate).getTime())&&(!e.editing||new Date(e.createdAt).getTime()<=new Date(e.availableOnDate).getTime())||(t.availableOnDate=ua.t("testForm.errors.laterDate"),t.infoPageThreeError=!0),e.allowLateSubmission&&!e.dueDate&&(t.dueDate=ua.t("testForm.errors.disableLateSubmission"),t.infoPageThreeError=!0);var o=parseInt((e.course||{}).courseStartDate),s=parseInt((e.course||{}).courseEndDate),i=new Date(e.availableOnDate).getTime(),c=new Date(e.dueDate).getTime(),l=new Date(e.gradeReleaseDate).getTime();!(o&&s&&i)||i>o&&i<s||(t.availableOnDate=ua.t("testForm.errors.availableOnDateInCourseDuration"),t.infoPageThreeError=!0),!(o&&s&&c)||c>o&&c<s||(t.dueDate=ua.t("testForm.errors.dueDateInCourseDuration"),t.infoPageThreeError=!0),o&&s&&l&&!(l>o)&&(t.gradeReleaseDate=ua.t("testForm.errors.gradeReleaseDateAfterCourseStart"),t.infoPageThreeError=!0),!c||!i||i<c||(t.dueDate=ua.t("testForm.errors.dueDateAfterAvailableOnDate"),t.availableOnDate=e.assignment?ua.t("testForm.errors.availableOnDateBeforeDueDate"):ua.t("testForm.errors.availableOnDateBeforeCloseDate"),t.infoPageThreeError=!0),!l||!i||i<l||(t.gradeReleaseDate=ua.t("testForm.errors.gradeReleaseDateAfterAvailableOnDate"),t.availableOnDate=ua.t("testForm.errors.availableOnDateBeforeGradeReleaseDate"),t.infoPageThreeError=!0),!l||!c||c<l||(t.gradeReleaseDate=e.assignment?ua.t("testForm.errors.gradeReleaseDateAfterDueDate"):ua.t("testForm.errors.gradeReleaseDateAfterCloseDate"),t.dueDate=e.assignment?ua.t("testForm.errors.dueDateBeforeGradeReleaseDate"):ua.t("testForm.errors.closeDateBeforeGradeReleaseDate"),t.infoPageThreeError=!0),l&&c&&e.allowLateSubmission&&!(c+864e5*e.lateDaysAllowed<l)&&(t.gradeReleaseDate=ua.t("testForm.errors.gradeReleaseDateAfterDueDatePlusLateDays"),t.dueDate=ua.t("testForm.errors.dueDatePlusLateDaysBeforeGradeReleaseDate"),t.infoPageThreeError=!0);var u=["multipleChoice","essay","speaking","fillInTheBlanks","test"];u.forEach((function(n){var a=((e.readingMaterial||{})[n]||{}).file,r=((e.readingMaterial||{})[n]||{}).fileUpload,o=((e.audioMaterial||{})[n]||{}).audioFile,s=((e.audioMaterial||{})[n]||{}).fileUpload;a instanceof File&&!(a.size<1e3*e.instructorFileSizeLimit*1e3)&&r&&((t.readingMaterial[n]||{}).file="".concat(ua.t("testForm.errors.docCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB"),t.infoPageFourError=!0),o instanceof File&&!(o.size<1e3*e.instructorFileSizeLimit*1e3)&&s&&((t.audioMaterial[n]||{}).audioFile="".concat(ua.t("testForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB"),t.infoPageFourError=!0)})),t.mcQuestions=(e.mcQuestions||[]).map((function(e,a){var r;((e.answers||[]).includes(void 0)||(e.answers||[]).includes(""))&&(e.answers||[]).length>1&&(r=ua.t("testForm.errors.answersCantBeEmpty")),(e.answers||[]).length<2&&(r=ua.t("testForm.errors.atleastTwoAnswers")),(e.answers||[]).length===(e.correctAnswers||[]).length&&(e.answers||[]).length>1&&(r=ua.t("testForm.errors.atleastOneUnchecked")),(!e.correctAnswers||0===(e.correctAnswers||[]).length)&&(e.answers||[]).length>1&&(r=ua.t("testForm.errors.selectAtleastOneAnswer"));var o=(e.answers||[]).map((function(e){return(e||"").trim()})),s=n(o);(e.answers||[]).length>1&&(s||[]).length>0&&(r=ua.t("testForm.errors.answersDifferent"));var i=null;parseFloat(e.marks)>0||(i=ua.t("testForm.errors.greaterThanZero")),e.marks&&""!==e.marks||(i=ua.t("testForm.errors.required"));var c=null;return e.question&&""!==e.question||(c=ua.t("testForm.errors.required"),t.mcSectionPageError=!0),(i||c||r)&&(t.mcSectionPageError=!0),{question:c,marks:i,correctAnswers:r}})),t.essayQuestions=(e.essayQuestions||[]).map((function(e,t){var n;return parseFloat(e.marks)>0||(n=ua.t("testForm.errors.greaterThanZero")),e.marks&&""!==e.marks||(n=ua.t("testForm.errors.required")),{question:e.question&&""!==e.question?null:ua.t("testForm.errors.required"),marks:n}})),t.essayQuestions.map((function(e){(e.question||e.marks)&&(t.essayPageError=!0)})),t.speakingQuestions=(e.speakingQuestions||[]).map((function(n,a){var r=null;n.question&&""!==n.question||n.audioQuestion||(r=ua.t("testForm.errors.requiredOrMakeAudioQuestion"));var o=null;!n.audioQuestion||n.questionRecordedBlob&&""!==n.questionRecordedBlob||(o=ua.t("testForm.errors.requiredOrMakeTextQuestion"));var s=null;!n.audioAnswer||n.recordedBlob&&""!==n.recordedBlob||(s=ua.t("testForm.errors.requiredOrDisableAudioAnswer")),n.audioFile instanceof File&&n.audioFile.size>1e3*e.instructorFileSizeLimit*1e3&&n.audioAnswer&&(s="".concat(ua.t("testForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),n.audioFileQuestion instanceof File&&n.audioFileQuestion.size>1e3*e.instructorFileSizeLimit*1e3&&n.audioQuestion&&(o="".concat(ua.t("testForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),!n.audioAnswer||n.recordedBlob&&""!==n.recordedBlob||(s=ua.t("testForm.errors.requiredOrDisableAudioAnswer"));var i=null;return parseFloat(n.marks)>0||(i=ua.t("testForm.errors.greaterThanZero")),n.marks&&""!==n.marks||(i=ua.t("testForm.errors.required")),(i||o||r||s)&&(t.speakingPageError=!0),{question:r,marks:i,questionRecordedBlob:o,recordedBlob:s}})),t.speakingQuestions.map((function(e){(e.audioQuestion||e.marks||e.questionRecordedBlob)&&(t.speakingSectionPageError=!0)}));var d=(e.fillBlankQuestions||{}).answers||[];t.fillBlankQuestions.answers=d.map((function(a,r){var o;((Object.values(a.answerOptions||{})||[]).map((function(e){return(e||"").trim()}))||[]).includes((a.answer||"").trim())&&(o=ua.t("testForm.errors.incorrectAnswersCantBeSameAsCorrectAnswer"));var s=((Object.values(a.answerOptions||{})||[]).map((function(e){return(e||"").trim()}))||[]).filter((function(e){return""!==e}));!(s.findIndex((function(e){return""!==e&&e}))>-1)&&a.selectableAnswer&&(o=ua.t("testForm.errors.atLeastOneIncorrectAnswer")),n(s).length>0&&(o=ua.t("testForm.errors.noDuplicateIncorrectAnswers"));var i=null;parseFloat(a.marks)>0||(i=ua.t("testForm.errors.greaterThanZero")),a.marks&&""!==a.marks||(i=ua.t("testForm.errors.required"));var c=null;a.audio&&!a.browserAudioFile&&(c=ua.t("testForm.errors.requiredAudioOrDisableAudio")),a.audioFile instanceof File&&a.audioFile.size>1e3*e.instructorFileSizeLimit*1e3&&a.audio&&(c="".concat(ua.t("testForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB"));var l=null;return a.selectableAnswer&&o&&(l=o),(c||i||l)&&(t.fillblankPageError=!0),{marks:i,answerOptions:{incorrectAnswerThree:o},browserAudioFile:c}}));var m=null;return((e.fillBlankQuestions||{}).question||"").includes("-BLANK-")&&(m=ua.t("testForm.errors.blankIsReserved")),d.length>0||(m=ua.t("testForm.errors.createAtleastOneBlank")),((!e.fillBlankQuestions||{}).question||""===(e.fillBlankQuestions||{}).question)&&(m=ua.t("testForm.errors.required")),m&&(t.fillBlankQuestions.question=m,t.fillblankPageError=!0),(e.testSections||[]).includes("mc")||(t.mcSectionPageError=!1),(e.testSections||[]).includes("essay")||(t.essayPageError=!1),(e.testSections||[]).includes("speaking")||(t.speakingPageError=!1),(e.testSections||[]).includes("fillblanks")||(t.fillblankPageError=!1),t},qr=function(){var e=Object(Ba.a)(Pa.a.mark((function e(t,n,a){var r,o;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(o=new FormData).append("key",t),e.next=5,Rr()({url:"".concat("https://mernstackelearn.herokuapp.com/","get-file"),method:"PUT",headers:{Authorization:"Bearer "+a},data:o});case 5:r=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getting file failed: ",e.t0);case 11:return e.abrupt("return",r.data);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Ur=n(1263),Qr=function(e,t){console.log("v1()",Object(Ur.a)());var n=(e||{}).name||"",a=n.substring(n.lastIndexOf(".")+1,n.length)||n;return"".concat(t,"/").concat(Object(Ur.a)()+"."+a)},Hr=function(){var e=Object(Ba.a)(Pa.a.mark((function e(t,n){var a,r,o,s,i,c,l=arguments;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:"",r=l.length>3&&void 0!==l[3]?l[3]:"NA",(o=new FormData).append("key",n),o.append("fileType",r),e.next=7,Rr()({url:"".concat("https://mernstackelearn.herokuapp.com/","upload"),method:"PUT",headers:{Authorization:"Bearer "+a},data:o});case 7:return s=e.sent,console.log("Get pre-signed url response: ",s),e.prev=9,i=new FormData,Object.keys(s.data.presignedUrl.fields).forEach((function(e){i.append(e,s.data.presignedUrl.fields[e])})),i.append("file",t),e.next=15,Rr.a.post(s.data.presignedUrl.url,i);case 15:c=e.sent,console.log("Upload file response: ",c),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),console.log("Upload file error: ",e.t0);case 22:return e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t,n){return e.apply(this,arguments)}}(),Gr=(n(970),r.a.lazy((function(){return n.e(3).then(n.bind(null,1275))})),function(){function e(t,n,a){Object(jt.a)(this,e),this.loader=t,this.token=n,this.path=a}return Object(Rt.a)(e,[{key:"upload",value:function(){var e=Object(Ba.a)(Pa.a.mark((function e(){var t,n=this;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){e(n.loader.file)})).then(function(){var e=Object(Ba.a)(Pa.a.mark((function e(t){var a,r,o,s;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={maxSizeMB:2,maxWidthOrHeight:1920,useWebWorker:!0},e.next=3,Object(Ma.a)(t,a);case 3:return r=e.sent,o=new File([r],r.name),e.next=7,new Promise(function(){var e=Object(Ba.a)(Pa.a.mark((function e(a,r){var s,i,c,l,u,d;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Qr(o,n.path),(i=new FormData).append("key",s),e.next=5,Rr()({url:"".concat("https://mernstackelearn.herokuapp.com/","upload"),method:"PUT",headers:{Authorization:"Bearer "+n.token},data:i});case 5:return c=e.sent,l=new FormData,Object.keys(c.data.presignedUrl.fields).forEach((function(e){l.append(e,c.data.presignedUrl.fields[e])})),l.append("file",t),e.next=11,Rr.a.post(c.data.presignedUrl.url,l);case 11:return u=e.sent,console.log("Image upload adapter response: ",u),e.next=15,qr(s,"image/jpeg",n.token);case 15:d=e.sent,a(Object(It.a)(Object(It.a)({},c),{},{default:d.toString()}));case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"abort",value:function(){}}]),e}()),Wr=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(e,a){var r;return Object(jt.a)(this,n),(r=t.call(this,e,a)).handleContentStringChange=function(e){r.setState({editorContent:e})},r.getImgUrl=function(e){if(!r.props.testReviewing){var t=Array.from((new DOMParser).parseFromString(e,"text/html").querySelectorAll("img")).map((function(e){return e.getAttribute("src")})).map((function(e){return e&&e.includes("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/")?e.match(new RegExp("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/(.*)\\?X-Amz"))[1]:e})),n=r.state.previousImages;r.setState({previousImages:t});var a=r.state.previousImages,o=n.find((function(e){return!a.includes(e)}));!r.state.editingImages.includes(o)&&o&&r.props.deleteImg(o,r.props.token)}},r.state={previousImages:[],editingImages:[],latestTestFormValues:{},keys:[],editorContent:null},r}return Object(Rt.a)(n,[{key:"componentDidMount",value:function(){var e=Array.from((new DOMParser).parseFromString((this.props.input||{}).value,"text/html").querySelectorAll("img")).map((function(e){return e.getAttribute("src")})).map((function(e){return(e||"").includes("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/")?e.match(new RegExp("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/(.*)\\?X-Amz"))[1]:e}));this.setState({editingImages:e})}},{key:"componentWillReceiveProps",value:function(e){var t=e.testFormValues;this.setState({latestTestFormValues:t})}},{key:"getEditorType",value:function(e){return"balloon"===e?Nr.BalloonEditor:Nr.ClassicEditor}},{key:"render",value:function(){var e,t,n=this,a=this.props,o=a.meta,s=void 0===o?{}:o,i=a.error,c=a.input,l=void 0===c?{}:c,u=a.field,d=void 0===u?"":u,m=a.reduxForm,p=void 0===m?"":m,f=a.testFormErrors,g=a.updateTestFormErrors,b=a.changeField,h=a.questionType,E=a.type,v=a.border,y=(a.isModal,a.token),T=a.path,k=a.readOnly,S=a.testFormSection,w=a.noImage,O=a.blockFillblankSynchronization;a.isDarkTheme;if("studentTest"!==p){var C=Mr(this.state.latestTestFormValues)||{},x=((f||{}).fillBlankQuestions||{}).question;e=(Mr(this.state.latestTestFormValues)||{}).fillBlankQuestions.question;var A=(Mr(this.state.latestTestFormValues)||{}).fillBlankQuestions.answers;(A||[]).length>0&&(e||"").includes("Create at least 1 blank")&&(s.error=""),t="testForm"===p&&"fillblanks"===S||"questionForm"===p&&"fillInBlank"===h?e:s.error||i,e===x||!e||"fillInBlank"!==h&&"fillblanks"!==S||"testForm"!==p&&"questionForm"!==p||g(p,Object(It.a)(Object(It.a)({},C),{},{fillBlankQuestions:{question:e,answers:A},fillblankPageError:f.fillblankPageError}))}var F=(l||{}).value||"";return r.a.createElement("div",{className:["App",Br.a[v]].join(" ")},this.props.label&&r.a.createElement("div",{className:Br.a.textLabel},"".concat(this.props.label,":")),r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(r.a.Fragment,null)}),r.a.createElement(Ir.a,{config:Dr(this.props,w),editor:this.getEditorType(E),data:F||"",onInit:function(e){e.isReadOnly=k;e.plugins.get("FileRepository").createUploadAdapter=function(e){return new Gr(e,y,T)}},onChange:function(e,t){n.props.makeTouched(s.form,d);var a=t.getData();n.handleContentStringChange(a),p&&b(p,d,a),n.getImgUrl(a)}}),r.a.createElement("span",{className:Br.a.errorText},(s.error||i)&&s.touched&&!O?t:""))}}]),n}(a.Component),zr=Object(c.b)((function(e,t){return{testFormValues:Object(nt.a)(t.reduxForm)(e),testFormErrors:Object(Pt.a)(t.reduxForm)(e),testReviewing:e.studentTesttestReviewing,questionType:e.instructorQuestion.creatingQuestionType,fillBlankSection:e.instructorTest.testPanelFormFillInBlanksSection,token:e.authentication.token,testFormSection:e.instructorTest.testFormSection}}),(function(e){return{changeField:function(t,n,a){e(Object(Bt.a)(t,n,a))},makeTouched:function(t,n){e(Object(Bt.d)(t,n))},deleteImg:function(t,n){e(ge([t]),n)},updateTestFormErrors:function(t,n){e(Object(Bt.e)(t,n))}}}))(Wr),Vr=n(26),$r=n(1232),Yr=n(1139),Jr=n(1230),Kr=Object(rt.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0}}}));var Zr=function(e){var t=e.input,n=t.onChange,a=t.value,o=(e.meta,e.instructors),s=e.courseEditing,i=e.currentInstructorId,c=Kr(),l=Object(We.a)("common"),u=l.t;return l.i18n,r.a.createElement($r.a,{className:c.root,subheader:r.a.createElement("li",null)},(o||[]).map((function(e){return r.a.createElement("li",{key:"section-".concat(e._id),className:c.listSection},r.a.createElement("ul",{className:c.ul},(e.coursesTeaching||[]).length>0||(e.coursesTeaching||[]).length>1&&e._id===i?r.a.createElement(qe,null,r.a.createElement(Jr.a,null,"".concat(u("courseForm.instructor"),": ").concat(e.firstName)),(e.coursesTeaching||[]).map((function(t,o){if(t._id!==s){var i=a.includes(t._id);return r.a.createElement(Yr.a,{key:"item-".concat(e._id,"-").concat(t._id)},r.a.createElement(ht.a,{key:"checkbox-".concat(o),control:r.a.createElement(Tr.a,{name:"".concat(t.courseName,"[").concat(o,"]"),value:t._id,checked:i,onChange:function(e){var r=Object(Vr.a)(a);return e.target.checked?r.push(t._id):r.splice(r.indexOf(t._id),1),n(r)}}),label:"Course ".concat(t.courseName)}))}}))):null))})))},Xr=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){return Object(jt.a)(this,n),t.apply(this,arguments)}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=(e.formValues,e.courseId),a=e.userId,o=e.instructors,s=e.newCourseId,i=e.t,c=o.findIndex((function(e){return!e.coursesTeaching.includes(n)&&e.coursesTeaching.length>0}))>-1;return r.a.createElement(qe,null,c&&r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"h5",gutterBottom:!0},i("courseForm.coursePrerequisites")),r.a.createElement(ba.a,{name:"prerequisites",component:Zr,instructors:o,courseEditing:n,currentInstructorId:a,courseForm:!0})),r.a.createElement(He.a,{paragraph:!0,variant:"h5",gutterBottom:!0},i("courseForm.courseSyllabus")),r.a.createElement("div",{className:t.editor},r.a.createElement(ba.a,{name:"syllabus",reduxForm:"courseForm",field:"syllabus",component:zr,path:"courses/".concat(n||s,"/syllabus")})))}}]),n}(a.Component),eo=Object(Mt.a)({form:"courseForm",validate:da,destroyOnUnmount:!1})(Object(Qa.a)("common")(Xr)),to=Object(c.b)((function(e){return{courseId:e.instructorCourse.loadedCourseFormData._id,instructors:e.instructorCourse.instructors,formValues:Object(nt.a)("courseForm")(e),userId:e.authentication.userId}}),null)(Object(at.a)((function(){return{editor:{width:"100%",margin:"auto"}}}))(eo)),no=n(1272),ao=n(1237),ro=n(1269),oo=n(1238),so=Object(Da.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FF4136"}},overrides:{MuiLinearProgress:{colorPrimary:{backgroundColor:"#ff8a80"},barColorPrimary:{backgroundColor:"#d32f2f"}}}}),io=function(e){return r.a.createElement(f.a,{theme:so},e.children)},co=Object(at.a)({rootProgress:{width:"200%",flexGrow:1,padding:0,marginBottom:"10px",backgroundColor:"white"},root:{MuiLinearProgress:{backgroundColor:"red !important"}},Danger:{backgroundColor:"red !important"}})((function(e){var t=e.activeStep,n=e.completed,a=e.stepsLabels,o=e.error,s=e.steps,i=e.progress,c=e.classes,l=e.danger,u=r.a.createElement("div",{className:c.root},r.a.createElement(no.a,{activeStep:t,alternativeLabel:!0},(a||[]).map((function(e,a){return r.a.createElement(ao.a,{completed:!!(n||[]).includes(a)||a<=t-1,key:e},r.a.createElement(ro.a,{error:o===a},""))}))));return i&&(u=r.a.createElement("div",{style:{overflowX:"hidden"}},r.a.createElement(oo.a,{variant:"progress",steps:s,position:"static",activeStep:t,className:c.rootProgress}))),i&&l&&(u=r.a.createElement(io,null,r.a.createElement(oo.a,{variant:"progress",steps:s,position:"static",activeStep:t,className:c.rootProgress}))),u})),lo=n(143),uo=function(e){return e&&"string"===typeof e?e.includes("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/")?e.match(new RegExp("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/(.*)\\?X-Amz"))[1]:e:null},mo=function(e,t,n){var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Array.from((new DOMParser).parseFromString(e,"text/html").querySelectorAll("img")).map((function(e){return e.getAttribute("src")}));return t};if("gradeTestAnswers"===t){var r=[];return(((e||{}).essaySection||{}).answers||[]).map((function(e){return e.answer})).forEach((function(e){a(e).forEach((function(e){r.push(uo(e))}))})),r}if("gradeTest"===t){var o=[];return((e||{}).essaySection||[]).map((function(e){return e.instructorCorrection})).forEach((function(e){a(e).forEach((function(e){o.push(uo(e))}))})),((e||{}).speakingSection||[]).map((function(e){return e.audioFile})).forEach((function(e){return o.push(uo(e))})),o}if("studentTest"===t){var s=[];return((e||{}).essayQuestions||[]).forEach((function(e){a(e).forEach((function(e){s.push(uo(e))}))})),((e||{}).speakingQuestions||[]).filter((function(e){return e})).map((function(e){return e.audioFile})).forEach((function(e){return s.push(uo(e))})),s}if("courseQuestions"===t){var i=[];return(e||[]).forEach((function(e){"mc"===e.type&&(a((e.mcQuestion||{}).question)||[]).forEach((function(e){return i.push(uo(e))}));"essay"===e.type&&(a((e.essayQuestion||{}).question)||[]).forEach((function(e){return i.push(uo(e))}));if("speaking"===e.type){(a((e.speakingQuestion||{}).question)||[]).forEach((function(e){return i.push(uo(e))}));var t=(e.speakingQuestion||{}).audioQuestion;t&&""!==t&&i.push(uo(t));var n=(e.speakingQuestion||{}).audio;n&&""!==n&&i.push(uo(n))}"fillInBlank"===e.type&&((a((e.fillBlankQuestions||{}).question)||[]).forEach((function(e){return i.push(uo(e))})),Array.from((e.fillBlankQuestions||{}).blanks||[]).forEach((function(e){e.audio&&i.push(uo(e.audio))})))})),i}if("courseTests"===t){var c=[];return(e||[]).forEach((function(e){(e.multipleChoiceQuestions||[]).forEach((function(e){(a(e.question)||[]).forEach((function(e){return c.push(uo(e))}))})),(e.essayQuestions||[]).forEach((function(e){(a(e.question)||[]).forEach((function(e){return c.push(uo(e))}))})),(e.speakingQuestions||[]).forEach((function(e){(a(e.question)||[]).forEach((function(e){return c.push(uo(e))})),e.questionAudio&&""!==e.questionAudio&&c.push(uo(e.questionAudio)),e.audio&&""!==e.audio&&c.push(uo(e.audio))}));var t=(e.fillInBlanksQuestions||{}).text,n=(e.fillInBlanksQuestions||{}).blanks||[];(a(t)||[]).forEach((function(e){return c.push(uo(e))})),n.forEach((function(e){e.audio&&c.push(uo(e.audio))}))})),c}if("testForm"===t){var l=e||{},u=[];(l.mcQuestions||[]).map((function(e){return e.question})).forEach((function(e){a(e).forEach((function(e){u.push(uo(e))}))})),(l.essayQuestions||[]).map((function(e){return e.question})).forEach((function(e){a(e).forEach((function(e){u.push(uo(e))}))})),(l.speakingQuestions||[]).map((function(e){if(!e.audioQuestion)return e.question})).forEach((function(e){a(e).forEach((function(e){u.push(uo(e))}))}));var d=(l.speakingQuestions||[]).filter((function(e){if(e.audioQuestion)return e})).map((function(e){return e.questionRecordedBlob})),m=(l.speakingQuestions||[]).filter((function(e){if(e.audioAnswer)return e})).map((function(e){return e.recordedBlob}));d.forEach((function(e){return u.push(uo(e))})),m.forEach((function(e){return u.push(uo(e))}));var p=(l.fillBlankQuestions||{}).question,f=a(p)||[],g=((l.fillBlankQuestions||{}).answers||[]).map((function(e){return e.browserAudioFile})).filter((function(e,t){if((((l.fillBlankQuestions||{}).answers||[])[t]||{}).audio)return e}));return f.forEach((function(e){u.push(uo(e))})),g.forEach((function(e){u.push(uo(e))})),Object.values(l.readingMaterial||{}).forEach((function(e){e.fileUpload&&e.loadedPDF&&u.push(uo(e.loadedPDF)),!e.fileUpload&&e.content&&(a(e.content)||[]).forEach((function(e){return u.push(uo(e))}))})),Object.values(l.audioMaterial||{}).forEach((function(e){e.recordedBlob&&u.push(uo(e.recordedBlob))})),u}if("questionForm"===t){var b="",h=["mcQuestion","essayQuestion","speakingQuestion","fillBlankQuestions"],E=e||{},v=[];["mc","essay","speaking","fillInBlank"].forEach((function(e,t){e===n&&(b=h[t])}));var y=(E[b]||{}).question;if("speakingQuestion"===b&&(y=((E.speakingQuestion||[])[0]||{}).audioQuestion?null:((E.speakingQuestion||[])[0]||{}).question),a(y).forEach((function(e){v.push(uo(e))})),"speaking"===n){var T=((E.speakingQuestion||[])[0]||{}).questionRecordedBlob;T&&!1!==(((e||{}).speakingQuestion||[])[0]||{}).audioQuestion&&v.push(uo(T));var k=((E.speakingQuestion||[])[0]||{}).recordedBlob;k&&!1!==(((e||{}).speakingQuestion||[])[0]||{}).audioAnswer&&v.push(uo(k))}if("fillInBlank"===n){var S=(E.fillBlankQuestions||{}).answers||[];S.forEach((function(e,t){e.browserAudioFile&&(S[t]||{}).audio&&v.push(uo(e.browserAudioFile))}))}return v}if("lessonForm"===t){var w=[];((e||{}).slides||[]).filter((function(e){return!e.videoContent})).map((function(e){return e.slideContent})).forEach((function(e){a(e).forEach((function(e){w.push(uo(e))}))}));var O=(e.slides||[]).filter((function(e){if(e.recordedBlob&&!e.videoContent)return e})).map((function(e){return e.recordedBlob})),C=(e.slides||[]).filter((function(e){if(e.loadedVideo&&e.videoContent)return e})).map((function(e){return e.loadedVideo}));return O.forEach((function(e){return w.push(uo(e))})),C.forEach((function(e){return w.push(uo(e))})),w}return a(e)},po=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(e){var a;return Object(jt.a)(this,n),(a=t.call(this,e)).handleWindowClose=function(e){e.preventDefault(),a.state.isUpdating||a.handleDeleteUnsavedImages()},a.handleDeleteUnsavedImages=function(){var e=a.getCourseUrls(a.props.formValues),t=[];(e||[]).forEach((function(e){-1===a.state.initialUrls.findIndex((function(t){return t===e}))&&t.push(e)})),t.length>0&&a.props.deleteImg(t,a.props.token)},a.componentWillUnmount=function(){window.removeEventListener("beforeunload",a.handleWindowClose),a.state.isUpdating||a.handleDeleteUnsavedImages(),a.props.clearCourseForm()},a.onSubmit=function(){a.setState({isUpdating:!0});var e=a.getCourseUrls(a.props.formValues),t=(a.state.initialUrls||[]).filter((function(t){if(!e.includes(t))return t}));a.props.submitCourse(a.props.formValues,a.props.token,a.props.editing,a.props.editing?a.props.initialValues._id:a.state.newCourseId,t)},a.state={initialUrls:[],newCourseId:null,isValid:!0,isUpdating:!1},a}return Object(Rt.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.handleWindowClose);var e=this.getCourseUrls(this.props.startingValues,"isInitialValues");this.setState({initialUrls:e,newCourseId:this.props.editing?null:(new lo.a.ObjectId).toHexString()})}},{key:"getCourseUrls",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=mo(e.syllabus);return(n||[]).forEach((function(e){e&&t.push(e.match(new RegExp("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/(.*)\\?X-Amz"))[1])})),t.push(e.courseImage),t}},{key:"checkPageValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return 1===n&&(a("courseName"),a("courseImage")),2===n&&["enrollmentPeriod","courseTimeline","courseDropDeadline"].forEach((function(e){return a(e)})),3===n&&((e.irregularOfficeHours||[]).forEach((function(e,t){a("irregularOfficeHours.".concat(t,".date")),a("irregularOfficeHours.".concat(t,".timeRange"))})),((e.regularOfficeHours||{}).days||[]).forEach((function(e,t){a("regularOfficeHours.times.".concat(e,".timeRange"))}))),1===n&&t.pageOne||2===n&&t.pageTwo||3===n&&t.pageThree?(this.setState({isValid:!1}),!1):(this.setState({isValid:!0}),!0)}},{key:"getButtons",value:function(e,t,n,a,o,s,i){var c=this;return r.a.createElement("div",{className:[1!==e?t.evenDistribution:t.floatRight].join(" ")},1!==e&&r.a.createElement(pt.a,{color:"primary",onClick:function(){o(e-1),c.setState({isValid:!0})},startIcon:r.a.createElement(ga.a,null)},""),4!==e&&r.a.createElement(pt.a,{onClick:function(){c.checkPageValidity(n,a,e,s)&&o(e+1)},color:i?"secondary":"primary",startIcon:r.a.createElement(pa.a,null)},""))}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.page,o=t.formValues,s=t.formErrors,i=t.setCourseFormPage,c=t.touchField,l=t.loading,u=t.editing,d=t.t,m=!s.courseName&&!s.courseImage,p=(o||{}).createdAt||null,f=!(this.state.isValid||!s.pageOne&&!s.pageTwo&&!s.pageThree&&!s.pageFour);return r.a.createElement("div",{style:{maxWidth:600,margin:"auto"}},r.a.createElement(Xe,{active:l,transparent:!0}),r.a.createElement(co,{size:"small",stepsLabels:["1","2","3","4"],activeStep:a-1,completed:m?[0]:null}),r.a.createElement("div",null,1===a&&r.a.createElement(Xa,{page:a,nextPage:function(){return e.props.setCourseFormPage(2)},isImage:(this.props.formValues||{}).courseImage}),2===a&&r.a.createElement(pr,{page:a,previousPage:function(){return e.props.setCourseFormPage(1)},nextPage:function(){return e.props.setCourseFormPage(3)},createdAt:p}),3===a&&r.a.createElement(Fr,{page:a,previousPage:function(){return e.props.setCourseFormPage(2)},nextPage:function(){return e.props.setCourseFormPage(4)},createdAt:p}),4===a&&r.a.createElement(to,{page:a,previousPage:function(){return e.props.setCourseFormPage(3)},newCourseId:this.state.newCourseId}),f&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},r.a.createElement(He.a,{color:"error"},d("courseForm.errors.correctForm")))),this.getButtons(a,n,o,s,i,c,f),4===this.props.page&&r.a.createElement(pt.a,{fullWidth:!0,variant:"outlined",style:{color:"#43a047",borderColor:"#43a047",backgroundColor:"#e8f5e9"},type:"button",onClick:function(){return e.onSubmit()}},d(u?"courseForm.buttons.update":"courseForm.buttons.publish")))}}]),n}(a.Component),fo=Object(Mt.a)({form:"courseForm",enableReinitialize:!0,validate:da,destroyOnUnmount:!0})(Object(Qa.a)("common")(po)),go=Object(c.b)((function(e){var t=e.instructorCourse.loadedCourseFormData,n=e.common.courses,a=e.common.editing;return{formValues:Object(nt.a)("courseForm")(e),formErrors:Object(Pt.a)("courseForm")(e),token:e.authentication.token,editing:a,page:e.instructorCourse.courseFormPage,initialValues:a?Object(It.a)(Object(It.a)({},t),{},{instructorCourses:n}):{instructorCourses:n,courseActive:!0},loading:e.instructorCourse.loading}}),(function(e){return{setCourseFormPage:function(t){e(x(t))},submitCourse:function(t,n,a,r,o){e(I(t,n,a,r,null,o))},touchField:function(t){e(Object(Bt.d)("courseForm",t))},clearCourseForm:function(){return e({type:"CLEAR_LOADED_INSTRUCTOR_DATA"})},deleteImg:function(t,n){e(ge(t),n)}}}))(Object(at.a)((function(){return{editor:{width:"100%",margin:"auto"},list:{listStyleType:"none",padding:"0",margin:"0"},button:{margin:"10px 0",width:"100%"},Form:{overflow:"hidden",background:"white",borderRadius:"4px",padding:"10px"},evenDistribution:{display:"flex",justifyContent:"space-between"},floatRight:{display:"flex",justifyContent:"flex-end"}}}))(fo)),bo=n(225);var ho=function(e){var t=e.children,n=e.value,a=e.index,o=Object(bo.a)(e,["children","value","index"]);return r.a.createElement(He.a,Object.assign({component:"div",role:"tabpanel",hidden:n!==a,id:"scrollable-force-tabpanel-".concat(a),"aria-labelledby":"scrollable-force-tab-".concat(a)},o),n===a&&r.a.createElement(kt.a,{p:3},t))};ho.propTypes={children:_t.a.node,index:_t.a.any.isRequired,value:_t.a.any.isRequired};var Eo=Object(c.b)((function(e){return{userId:e.authentication.userId,questionFormValues:Object(nt.a)("questionForm")(e),loadedLessonFormData:e.instructorLesson.loadedLessonFormData,token:e.authentication.token,selectedCourse:e.common.selectedCourse,tab:e.common.tab,questionBank:e.instructorQuestion.questionBank,questionEditing:e.instructorQuestion.questionEditing,editing:e.common.editing,loadedCourseFormData:e.instructorCourse.loadedCourseFormData,loading:e.common.loading,userFirstName:e.authentication.userFirstName,userLastName:e.authentication.userLastName,loadedUser:e.authentication.loadedUser}}),(function(e){return{setOpenFolder:function(t){return e({type:"SET_INSTRUCTOR_FOLDER",folder:t})}}}))((function(e){var t=e.tab,n=e.loadedCourseFormData,a=e.token;return r.a.createElement(qe,null,!a&&r.a.createElement(d.a,{to:"/authentication"}),r.a.createElement(ho,{value:t,index:0},r.a.createElement(Ft,null)),r.a.createElement(ho,{value:t,index:1},n&&r.a.createElement(go,{startingValues:n})))})),vo=n(15),yo=n(11),To=n(335),ko=n(1239),So=Object(at.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(ko.a),wo=n(32),Oo=n(1240),Co=n(704),xo=n(1241),Ao=n(111),Fo=n.n(Ao),Do=n(631),_o=n.n(Do),Io=(n(971),function(){return r.a.createElement("div",{className:"spinner"})}),jo=n(255),Ro=n.n(jo),No=n(254),Lo=n.n(No),Po=n(630),Bo=n.n(Po),Mo=n(627),qo=n.n(Mo),Uo=function(e){var t=e.url,n=e.play,a=e.ended,o=e.pause,s=e.playAutomatically,i=e.muted;return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(qo.a,{playing:s,onPlay:n,onEnded:a,onPause:o,controls:!0,width:"100%",height:"100%",url:t,muted:i}))},Qo=(n(497),n(395)),Ho=n.n(Qo),Go=n(628),Wo=n.n(Go),zo=function(){var e=Object(Ba.a)(Pa.a.mark((function e(t,n,a,r){var o;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("saving"),o=new Ho.a({bitRate:128}),(r||{}).lameEncoder&&(o=r),(t||{}).lameEncoder&&(o=t),console.log("is recorder: ",o),!o){e.next=9;break}return e.next=8,o.stop().getMp3().then((function(e){var t=Object(vo.a)(e,2),r=t[0],o=t[1];return{blob:URL.createObjectURL(o),file:new File(r,n?"".concat(a,"-[").concat(n,"]recording.mp3"):"".concat(a,"-recording.mp3"),{type:o.type,lastModified:Date.now()}),index:a}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Vo=function(e,t,n,a,r){if(e){e.preventDefault();var o=zo(null,t,n,r);return clearTimeout(a),o}},$o=function(){var e=Object(Ba.a)(Pa.a.mark((function e(t,n,a,r,o){var s,i,c,l;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=new Ho.a({bitRate:128}),t){e.next=3;break}return e.abrupt("return");case 3:return t.preventDefault(),e.prev=4,e.next=7,s.start();case 7:return i=qk.getState(),c=i.common.configuration.voiceRecordTimeLimit||60,l=setTimeout((function(){var e=zo(s,n,a);o(e)}),1e3*c),e.abrupt("return",{recordingTimeout:l,isRecording:!0,recorder:s,index:a});case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",{isRecording:!1});case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),Yo=function(e){var t=document.getElementById(e);t&&t.play()},Jo=function(){var e=Object(Ba.a)(Pa.a.mark((function e(t,n){var a,r,o;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 3:a=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("e: ",e.t0);case 9:return r=Wo()(a,{type:"video",mimeType:"video/webm;codecs=h264",canvas:{width:640,height:480}}),t({recorder:r,stream:a}),r.startRecording(),o=function(e){return new Promise((function(t){return setTimeout(t,e)}))},6e4,e.next=16,o(6e4);case 16:r.stopRecording(Object(Ba.a)(Pa.a.mark((function e(){var o,s;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.getBlob(),s=new File([o],"video-recording.webm",{type:"video/webm"}),n(s),t({recorder:null,stream:null}),a.stop();case 5:case"end":return e.stop()}}),e)}))));case 17:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),Ko=n(629),Zo=n.n(Ko),Xo=n(103),es=n.n(Xo),ts={width:"fit-content"},ns=[{className:"tier-top",style:{padding:"5px 0",margin:"auto",textAlign:"center"},innerComponents:[{type:"play",style:ts},{type:"time",style:ts}]}],as=[{className:"tier-top",style:{padding:"5px 0",margin:"auto",textAlign:"center"},innerComponents:[{type:"play",style:ts},{type:"time",style:ts},{type:"seek"}]}],rs=function(e){var t=e.audioSource,n=e.noSeek,a=e.id;return r.a.createElement(Zo.a,{id:a||"audioplayerabc",playerWidth:"100%",audioFiles:[{src:t}],rearrange:n?ns:as,iconSize:"1.5rem",fontSize:"1.2rem",sliderClass:"invert-blue-grey",hideForward:!0,hideRewind:!0,hideLoop:!0})},os=Object(rt.a)((function(e){var t;return{formLayout:{display:"flex",justifyContent:"space-between"},appBar:(t={bottom:"48px",top:"auto",width:"100%"},Object(yo.a)(t,e.breakpoints.up(500),{bottom:0}),Object(yo.a)(t,e.breakpoints.up(600),{width:"calc(100vw - 216px)"}),t),inputContainer:{backgroundColor:Object(wo.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(wo.c)(e.palette.common.white,.25)},borderRadius:e.shape.borderRadius,position:"relative",width:"100%"},icon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,7),width:"100%"}}}));var ss=Object(Qa.a)("common")((function(e){var t,n,a,o=e.handleContent,s=e.handleSubmit,i=e.content,c=e.t,l=e.isSelectedInstructor,u=e.isOfficeHour,d=e.isInstructorPanel,m=(e.configuration,e.chatAlwaysOpen),p=e.handleAttachedFile,f=e.loadedFile,g=e.isUploading,b=e.onSetRecorder,h=e.onSetAudioRecorder,E=e.recorder,v=e.stream,y=e.audioRecorder,T=e.audioTimeoutId,k=e.isFile,S=os();f&&(t=(f||{}).name.toLowerCase().split(".").pop()),"pdf"===t&&(n=r.a.createElement("i",{className:"far fa-file-pdf fa-2x"})),"mp3"===t&&(a="audio"),"docx"!==t&&"doc"!==t||(n=r.a.createElement("i",{className:"fas fa-file-word fa-2x"})),"jpeg"!==t&&"jpg"!==t&&"jfif"!==t||(a="image"),"avi"!==t&&"mp4"!==t&&"mkv"!==t&&"webm"!==t||(a="video");var w,O=y||E||g||!m&&(l&&!u||d&&!u);return f&&(w=URL.createObjectURL(f)),r.a.createElement(Oo.a,{position:"fixed",className:S.appBar},E&&r.a.createElement(Uo,{muted:!0,playAutomatically:!0,url:v}),f&&r.a.createElement("div",{style:{display:"flex",padding:5}},r.a.createElement("div",{style:{display:"contents"}},"audio"===a&&r.a.createElement(rs,{audioSource:w}),"image"===a&&r.a.createElement("div",{style:{backgroundImage:'url("'.concat(w,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:80,borderRadius:"3px",width:"30%"}}),"video"===a&&r.a.createElement(Uo,{url:w})),g&&r.a.createElement("div",{style:{marginLeft:25}}," ",r.a.createElement(Io,null)),r.a.createElement("div",{style:{opacity:g?.3:1,color:"white",marginLeft:15}},n),r.a.createElement("div",{style:{marginLeft:15,cursor:"pointer"},onClick:function(){return p("")}},r.a.createElement("i",{style:{color:"#ffc000"},className:"fas fa-window-close fa-2x"}))),r.a.createElement(xo.a,{style:{padding:"5px"}},r.a.createElement("div",{className:S.inputContainer},r.a.createElement("form",{onSubmit:s,className:S.formLayout},r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse",width:"100%"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse",justifyContent:"center"}},r.a.createElement("div",{className:S.icon},r.a.createElement(Fo.a,null)),r.a.createElement(Co.a,{multiline:!0,disabled:!m&&(l&&!u||d&&!u),onChange:o,onKeyPress:function(e){13!==e.keyCode&&13!==e.charCode||O||s(e)},value:i,placeholder:c("chat.typeMessage"),style:{width:"100%"},classes:{root:S.inputRoot,input:S.inputInput},inputProps:{"aria-label":"content"}})),r.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(Wa.a,{disabled:f||E,onClick:function(){var e=Object(Ba.a)(Pa.a.mark((function e(t){var n,a;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=10;break}return e.next=3,$o(t,null,null,"chatAudioRecorder",function(){var e=Object(Ba.a)(Pa.a.mark((function e(t){var n;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.next=5,p(n.file);case 5:h({audioRecorder:null,audioTimeoutId:null});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:n=e.t0,h({audioRecorder:n.recorder,audioTimeoutId:n.recordingTimeout}),e.next=19;break;case 10:return e.next=12,Vo(t,null,"chatAudioRecorder",T,y);case 12:if(e.t1=e.sent,e.t1){e.next=15;break}e.t1={};case 15:return a=e.t1,h({audioRecorder:null,audioTimeoutId:null}),e.next=19,p(a.file);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),component:"span"},y?r.a.createElement(Lo.a,{style:{color:"white"}}):r.a.createElement(Ro.a,{style:{color:"white",opacity:f||E?.3:1}})),r.a.createElement(Wa.a,{disabled:f||y,onClick:Object(Ba.a)(Pa.a.mark((function e(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=5;break}return e.next=3,Jo((function(e){var t=e.recorder,n=e.stream;b({recorder:t,stream:n})}),function(){var e=Object(Ba.a)(Pa.a.mark((function e(t){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:e.next=6;break;case 5:E.stopRecording(Object(Ba.a)(Pa.a.mark((function e(){var t,n;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.getBlob(),n=new File([t],"video-recording.webm",{type:"video/webm"}),e.next=4,p(n);case 4:b({recorder:null,stream:null}),v.stop();case 6:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)}))),component:"span"},E?r.a.createElement(Lo.a,{style:{color:"white"}}):r.a.createElement(Bo.a,{style:{color:"white",opacity:f||y?.3:1}})),r.a.createElement(Va,{mimeTypesAllowed:"audio/*, video/*, video/x-matroska, image/jpeg, application/pdf, .doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",extensionsAllowed:["jpeg","jpg","jfif","png","pdf","docx","doc","mp4","avi","mkv","mp3","webm"],input:{value:"",onChange:function(e){p(e)}},onChangeFile:function(e){},attachIcon:!0,disabled:f||E||y}),k&&r.a.createElement(Wa.a,{style:{color:"white",opacity:O?.3:1},size:"medium","aria-label":"delete",onClick:s,disabled:O},r.a.createElement(_o.a,null))))))))})),is=function(e){return((e||"").match(new RegExp("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/(.*)\\?X-Amz"))||[])[1]},cs=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(e){var a;return Object(jt.a)(this,n),(a=t.call(this,e)).handleWindowClose=function(e){e.preventDefault(),e.returnValue="";var t="".concat("https://mernstackelearn.herokuapp.com/","delete-files"),n=new FormData;n.append("url",a.state.fileAWSKey),n.append("Authorization","Bearer "+a.props.token),a.setState({fileAWSKey:"",file:""}),fetch(t,{method:"put",headers:new Headers({Authorization:"Bearer "+a.props.token}),body:n,keepalive:!0})},a.handleSetRecorder=function(e){var t=e.recorder,n=e.stream;a.setState({recorder:t,stream:n})},a.handleSetAudioRecorder=function(e){var t=e.audioRecorder,n=e.audioTimeoutId;a.setState({audioRecorder:t,audioTimeoutId:n})},a.handleSubmit=function(e){a.state.content.replace(/\s/g,"").length&&(e.preventDefault(),(a.state.file||a.state.content)&&a.setState((function(e){return a.socket.emit("message",{content:e.content,recipient:a.props.selectedChatUser,course:a.props.course._id,userType:a.props.userType,file:e.fileAWSKey?e.fileAWSKey:null}),{chat:[].concat(Object(Vr.a)(e.chat),[{sender:a.props.userId,content:e.content,file:e.file}]),content:"",file:"",fileAWSKey:"",recorder:null,audioRecorder:null,audioTimeoutId:null}}),a.scrollToBottom))},a.onHandleAttachedFile=function(e){if(!e)return a.setState({file:"",fileAWSKey:""}),void(a.state.fileAWSKey&&a.props.deleteFile([a.state.fileAWSKey],a.props.token));var t="users/".concat(a.props.userId,"/chat"),n=Qr(e,t);a.props.uploadFile(e,n,a.props.token,"chat"),a.setState({file:e,fileAWSKey:n})},a.state={chat:[],activeUsers:[],content:"",file:"",fileAWSKey:"",recorder:null,stream:null,audioRecorder:null,audioTimeoutId:null},a}return Object(Rt.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("visibilitychange",this.handleWindowClose),this.socket=$e()("https://mernstackelearn.herokuapp.com/",{query:{token:this.props.token}});var t=(this.props.notifications||[]).find((function(t){if(t.toSpecificUser===e.props.userId&&t.fromUser===e.props.selectedChatUser._id||t.toSpecificUser===e.props.selectedChatUser._id&&t.fromUser===e.props.userId)return t}));t&&(this.props.markAsSeen(t._id,this.props.token),this.props.fetchNotifications(this.props.token)),this.socket.emit("join",{recipient:this.props.selectedChatUser,course:this.props.course._id}),this.socket.on("init",(function(t){var n=t.messages,a=t.activeUsers;e.setState((function(e){return{chat:[].concat(Object(Vr.a)(e.chat),Object(Vr.a)(n.reverse())),activeUsers:a}}),e.scrollToBottom)})),this.socket.on("activeUsers",(function(t){e.setState({activeUsers:t})})),this.socket.on("push",(function(t){e.setState((function(e){return{chat:[].concat(Object(Vr.a)(e.chat),[t])}}),e.scrollToBottom)}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.selectedChatUser._id!==e.selectedChatUser._id){var n=(this.props.notifications||[]).find((function(e){if(e.toSpecificUser===t.props.userId&&e.fromUser===t.props.selectedChatUser._id||e.toSpecificUser===t.props.selectedChatUser._id&&e.fromUser===t.props.userId)return e}));n&&(this.props.markAsSeen(n._id,this.props.token),this.props.fetchNotifications(this.props.token)),this.socket.emit("join",{recipient:this.props.selectedChatUser,course:this.props.course._id}),this.socket.on("init",(function(e){var n=e.messages,a=e.activeUsers;t.setState((function(e){return{chat:[].concat(Object(Vr.a)(e.chat),Object(Vr.a)(n.reverse())),activeUsers:a}}),t.scrollToBottom)}))}else console.log("user did not change")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("visibilitychange",this.handleWindowClose),this.state.fileAWSKey,this.socket.emit("leave",{recipient:this.props.selectedChatUser}),this.socket.off("activeUsers"),this.socket.off("push")}},{key:"handleContent",value:function(e){this.setState({content:e.target.value})}},{key:"scrollToBottom",value:function(){var e=document.getElementById("chat");e.scrollTop=e.scrollHeight}},{key:"render",value:function(){var e=this.props,t=e.selectedChatUser,n=void 0===t?{}:t,a=e.course,o=e.students,s=void 0===o?[]:o,i=e.isOfficeHour,c=e.instructorPanel,l=e.configuration,u=e.userId,d=e.width,m=e.uploading,p=l.isChatAllowedOutsideOfficehours;c||(p=(l.coursesIsChatAllowedOutsideOfficehours||[]).includes((a||{})._id));var f=(a||{}).courseInstructor,g=(n||{})._id===(f||{})._id,b=200;return d<460&&(b=150),d<360&&(b=100),r.a.createElement("div",{className:"Chat"},r.a.createElement("div",{style:{display:"flex"}},this.state.activeUsers.includes(n._id)?r.a.createElement(So,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(Ge.a,{src:n.profilePicture})):r.a.createElement(Ge.a,{src:n.profilePicture}),r.a.createElement(He.a,{style:{padding:"10px"}},"".concat((n||{}).firstName," ").concat((n||{}).lastName))),r.a.createElement(To.a,Object(yo.a)({style:{maxHeight:"calc(93vh - 219px)"},id:"chat",elevation:3},"style",{display:"flex",flexDirection:"column",marginBottom:d<500?this.state.file?150:120:this.state.file?100:70}),this.state.chat.map((function(e,t){var n,a;e.file&&(e.file instanceof File?(a=URL.createObjectURL(e.file),n=(e.file||{}).name.toLowerCase().split(".").pop()):(a=e.file,n=(is(e.file)||"").toLowerCase().split(".").pop()));(s||[]).find((function(t){return t._id===e.sender})),f._id,e.sender;var o="jfif"===n||"jpeg"===n||"jpg"===n||"png"===n,i="mp4"===n||"avi"===n||"mkv"===n||"webm"===n,c="mp3"===n,l="pdf"===n,d="docx"===n||"doc"===n;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:e.sender===u?"flex-end":"flex-start",alignSelf:e.sender===u?"flex-end":"flex-start",maxWidth:"80%",minWidth:e.file?c?"20%":"50%":"10%",borderRadius:5,padding:5,marginBottom:5,backgroundColor:e.sender===u?"#0288d1":"#455a64"},key:t},e.file&&o&&r.a.createElement("div",{style:{backgroundImage:'url("'.concat(a,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:b,borderRadius:"3px",width:"100%"}}),e.file&&(l||d)&&r.a.createElement("a",{href:a},r.a.createElement("div",{style:{borderRadius:"3px",width:"50%"}},d&&r.a.createElement("i",{style:{color:"white"},className:"fas fa-file-word fa-2x"}),l&&r.a.createElement("i",{style:{color:"white"},className:"far fa-file-pdf fa-2x"}))),e.file&&c&&r.a.createElement("div",{className:"chatAudio[".concat(t,"]")},r.a.createElement(rs,{noSeek:!0,audioSource:a})),e.file&&i&&r.a.createElement(Uo,{url:a}),e.file&&(i||o||c)&&r.a.createElement("a",{href:a},r.a.createElement("i",{style:{color:"white",padding:"5px 0"},className:"fas fa-file-download fa-2x"})),r.a.createElement(He.a,{style:{fontSize:"0.8em",color:"white"},variant:"body1",className:"content"},e.content))}))),r.a.createElement(ss,{isOfficeHour:i,isSelectedInstructor:g,content:this.state.content,handleContent:this.handleContent.bind(this),handleSubmit:this.handleSubmit.bind(this),isInstructorPanel:c,chatAlwaysOpen:p,handleAttachedFile:this.onHandleAttachedFile,loadedFile:this.state.file,isUploading:m,onSetRecorder:this.handleSetRecorder,onSetAudioRecorder:this.handleSetAudioRecorder,recorder:this.state.recorder,stream:this.state.stream,audioRecorder:this.state.audioRecorder,audioTimeoutId:this.state.audioTimeoutId,isFile:!!this.state.file}))}}]),n}(r.a.Component),ls=Object(c.b)((function(e){return{students:e.common.students,userId:e.authentication.userId,course:e.common.selectedCourse,token:e.authentication.token,selectedChatUser:e.common.selectedChatUser,notifications:e.common.notifications,configuration:e.common.configuration,uploading:e.common.uploading,width:e.common.width}}),(function(e){return{fetchNotifications:function(t){e(ye(t))},markAsSeen:function(t,n){e(ke(t,n))},uploadFile:function(t,n,a,r){e(function(e,t,n,a){return{type:"UPLOAD_FILE_START",payload:{file:e,key:t,type:a,token:n}}}(t,n,a,r))},deleteFile:function(t,n){e(ge(t),n)}}}))(cs),us=function(e){var t;switch(e){case"Sunday":t=0;break;case"Monday":t=1;break;case"Tuesday":t=2;break;case"Wednesday":t=3;break;case"Thursday":t=4;break;case"Friday":t=5;break;case"Saturday":t=6}return t},ds=n(80),ms=n.n(ds),ps=Object(c.b)((function(e){return{students:e.common.students,course:e.common.selectedCourse,userId:e.authentication.userId,token:e.authentication.token,configuration:e.common.configuration}}),(function(e){return{setChatUser:function(t){e(be(t))},setTab:function(t){e(xe(t))}}}))((function(e){var t=e.instructorPanel,n=e.studentPanel,o=e.students,s=e.course,i=e.userId,c=e.setChatUser,l=e.setTab,u=e.token,d=e.isOfficeHour,m=e.configuration,p=Object(We.a)().t,f=r.a.useState([]),g=Object(vo.a)(f,2),b=g[0],h=g[1],E=m.isChatAllowedOutsideOfficehours;n&&(E=(m.coursesIsChatAllowedOutsideOfficehours||[]).includes(s._id)),Object(a.useEffect)((function(){var e=$e()("https://mernstackelearn.herokuapp.com/",{query:{token:u}});return e.emit("initializeContacts"),e.on("activeUsers",(function(e){h(e)})),function(){return e.off("activeUsers")}}),[]);var v=function(e){var t=o.find((function(t){return e===t._id}));"instructor"===e&&(t=s.courseInstructor),c(t),l(1)},y=r.a.createElement(qe,null,!d&&!E&&r.a.createElement(He.a,{gutterBottom:!0,variant:"subtitle1"},p(n?"chat.chatInstructorOnlyOfficeHours":"chat.chatStudentOnlyOfficeHours")),(s.regularOfficeHours||[]).map((function(e,t){var n=ms()(new Date(Date.now())).tz(e.timezoneRegion).format("z");return r.a.createElement(qe,{key:e._id},r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"caption",style:{display:"block",fontWeight:"bold"}},p("courseForm.days.".concat(e.day.toLowerCase()))),r.a.createElement(He.a,{variant:"caption"},"".concat(p("chat.from")," ").concat(e.startTime," ").concat(p("chat.to")," ").concat(e.endTime," ").concat(n))))})),(s.irregularOfficeHours||[]).map((function(e,t){var n=ms()(new Date(Date.now())).tz(e.timezoneRegion).format("z");return r.a.createElement(qe,{key:e._id},r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"caption",style:{display:"block",fontWeight:"bold"}},"".concat(bt()(parseInt(e.date)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY")," ")),r.a.createElement(He.a,{variant:"caption"}," ".concat(p("chat.from")," ").concat(e.startTime," ").concat(p("chat.to")," ").concat(e.endTime," ").concat(n))))})));return r.a.createElement($r.a,null,n&&r.a.createElement(qe,null,!d&&n&&!E&&r.a.createElement(qe,null,y),r.a.createElement(Yr.a,null,r.a.createElement(vr.a,{secondary:p("chat.instructor")})),r.a.createElement(Yr.a,{disabled:!d&&!E,button:!0,onClick:function(){return v("instructor")}},b.includes(s.courseInstructor._id)?r.a.createElement(So,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(Ge.a,{style:{marginRight:10},src:s.courseInstructor.profilePicture})):r.a.createElement(Ge.a,{style:{marginRight:10},src:s.courseInstructor.profilePicture}),r.a.createElement(vr.a,{primary:"".concat(s.courseInstructor.firstName," ").concat(s.courseInstructor.lastName)}))),r.a.createElement(qe,null,!d&&!n&&!E&&r.a.createElement(qe,null,y),(o||[]).map((function(e,a){return r.a.createElement(qe,{key:e._id},i!==e._id&&r.a.createElement(qe,null,0===a&&t||1===a&&n&&r.a.createElement(Yr.a,null,r.a.createElement(vr.a,{secondary:p("chat.students")})),0===a&&r.a.createElement(Yr.a,null,r.a.createElement(vr.a,{secondary:p("chat.students")})),r.a.createElement(Yr.a,{disabled:t&&!d&&!E,button:!0,onClick:function(){return v(e._id)}},b.includes(e._id)?r.a.createElement(So,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(Ge.a,{style:{marginRight:10},src:e.profilePicture})):r.a.createElement(Ge.a,{style:{marginRight:10},src:e.profilePicture}),r.a.createElement(vr.a,{primary:"".concat(e.firstName," ").concat(e.lastName)}),r.a.createElement(vr.a,{secondary:"ID: ".concat(e._id.replace(/\D/g,""))}))))}))))})),fs=n(1242),gs=n(1140),bs=n(633),hs=n.n(bs),Es=n(632),vs=n.n(Es),ys=n(319),Ts=n.n(ys),ks=n(220),Ss=n.n(ks),ws=n(69),Os=n.n(ws),Cs=n(59),xs=n.n(Cs),As=n(94),Fs=n.n(As),Ds=Object(rt.a)((function(e){return{root:{overflowX:"hidden",maxWidth:600,margin:"30px auto",paddingLeft:e.spacing(1),paddingTop:30},nested:{paddingLeft:e.spacing(1.5)},nestedTwice:{paddingLeft:e.spacing(2)},nestedFile:{paddingLeft:e.spacing(5)}}})),_s=function e(t){var n=t.fields,a=(t.meta.error,t.moduleIndex),o=t.subjectIndex,s=t.topicIndex,i=t.lessons,c=t.tests,l=t.assignments,u=t.subjects,d=t.topics,m=t.handleOpenFolder,p=t.updateCategories,f=t.modulesFormValues,g=t.onSelectDocument,b=t.secondaryBlue,h=t.t,E=t.folderType,v=t.modules,y=Ds(),T=r.a.useState(-1),k=Object(vo.a)(T,2),S=k[0],w=k[1];return r.a.createElement(qe,null,(n||[]).map((function(t,n){var T,k,O,C,x,A;"module"===E&&(T="node[".concat(n,"]"),k="modules.".concat(n,".moduleName"),O=[n],C="modules.".concat(n,".subjects"),x=(v[n]||{}).folder,A="subject"),"subject"===E&&(T="node[".concat(a,"][").concat(n,"]"),k="modules.".concat(a,".subjects.").concat(n,".subjectName"),O=[a,n],C="modules.".concat(a,".subjects.").concat(n,".topics"),x=(u[n]||{}).folder,A="topic"),"topic"===E&&(T="node[".concat(a,"][").concat(o,"][").concat(n,"]"),k="modules.".concat(a,".subjects.").concat(o,".topics.").concat(n,".topicName"),O=[a,o,n],x=(d[n]||{}).folder),console.log("fieldName",k);var F=-1!==S&&S!==T;return r.a.createElement(qe,{key:T},r.a.createElement(Yr.a,{style:{opacity:F?.2:1,cursor:F?"auto":"pointer",borderLeft:F||-1===S?"":"4px ".concat(b," solid"),marginLeft:15},button:!0,onClick:function(){F||function(e,t){w(S===t?-1:t)}(0,T)},className:y.nested},r.a.createElement(vr.a,{style:{flex:"none"},primary:"".concat(n+1,".")}),r.a.createElement(ba.a,{simple:!0,disabled:F,name:k,onBlur:p,component:ka,label:"".concat(h("instructorModules.".concat(E))," ").concat(n+1)}),r.a.createElement(fs.a,null,r.a.createElement(Wa.a,{style:{cursor:F?"auto":"pointer"},onClick:function(e){F||(e.stopPropagation(),m(O))}},r.a.createElement(vs.a,null))),r.a.createElement(Wa.a,{style:{cursor:F?"auto":"pointer"},onClick:function(e){if(!F){e.stopPropagation();var t=function(e,t,n,a,r,o){console.log("modulesFormValues",e),console.log("folderType",t),console.log("moduleIndex",n),console.log("subjectIndex",a),console.log("topicIndex",r),console.log("index",o);var s=(e||{}).modules,i=Object(Vr.a)(s);return console.log("docs copy before: ",s),"module"===t&&(i||[]).splice(o,1),"subject"===t&&(((i||[])[n]||{}).subjects||[]).splice(o,1),"topic"===t&&(((((i||[])[n]||{}).subjects||[])[a]||{}).topics||[]).splice(o,1),console.log("docs copy after: ",i),i}(f,E,a,o,s,n);p(e,t,"deleting")}}},r.a.createElement(Ya.a,{fontSize:"small",style:{color:b}})),S===T?r.a.createElement(Ts.a,null):r.a.createElement(Ss.a,null)),r.a.createElement(gs.a,{in:S===T,timeout:"auto",unmountOnExit:!0},r.a.createElement("div",{style:{marginLeft:15,borderLeft:"4px ".concat(b," solid")}},(x||[]).map((function(e){var t,n,a=(x||[]).find((function(e){return"lesson"===e.documentType}))||{},o=(x||[]).find((function(e){return"test"===e.documentType}))||{},s=(x||[]).find((function(e){return"assignment"===e.documentType}))||{};return"test"===e.documentType&&(t=(c||[]).find((function(t){return e.documentId===t._id}))),"assignment"===e.documentType&&(t=(l||[]).find((function(t){return e.documentId===t._id}))),"lesson"===e.documentType&&(t=(i||[]).find((function(t){return e.documentId===t._id}))),t?("test"===e.documentType&&(n=r.a.createElement(Os.a,{fontSize:"small",color:"primary"})),"assignment"===e.documentType&&(n=r.a.createElement(xs.a,{fontSize:"small",color:"primary"})),"lesson"===e.documentType&&(n=r.a.createElement(Fs.a,{fontSize:"small",color:"primary"})),r.a.createElement(qe,{key:e.documentId},["assignment","test","lesson"].map((function(t,n){var i;return 0===n&&(i=s),1===n&&(i=o),2===n&&(i=a),e.documentId===i.documentId&&e.documentType===t?r.a.createElement(Yr.a,{key:"".concat(t,"[document.documentId]"),style:{marginLeft:15}},r.a.createElement(vr.a,{primary:h("instructorModules.".concat(t,"s"))})):null})),r.a.createElement(Yr.a,{className:y.nestedFile,key:e.documentId,button:!0,onClick:function(){F||g(e.documentType,e.documentId)}},r.a.createElement(fs.a,null,n),"test"===e.documentType&&r.a.createElement(vr.a,{primary:"".concat(t.testName)}),"assignment"===e.documentType&&r.a.createElement(vr.a,{primary:"".concat(t.testName)}),"lesson"===e.documentType&&r.a.createElement(vr.a,{primary:"".concat(t.lessonName)})))):null})),"topic"!==E&&r.a.createElement($r.a,{component:"div",disablePadding:!0,subheader:r.a.createElement(He.a,{variant:"h6",align:"center",style:{color:b}},h("instructorModules.".concat(A)))},r.a.createElement(fr.a,{name:C,component:e,moduleIndex:"module"===E?n:a,subjectIndex:"subject"===E?n:o,topicIndex:"topic"===E?n:null,t:h,topics:"subject"===E?(u[n]||{}).topics:null,subjects:"module"===E?(v[n]||{}).subjects:null,tests:c,assignments:l,lessons:i,handleOpenFolder:function(e){m(e)},updateCategories:function(e,t,n){return p(e,t,n)},secondaryBlue:b,modulesFormValues:f,folderType:A,onSelectDocument:function(e,t){g(e,t)}})))))})),r.a.createElement(Yr.a,{button:!0,onClick:function(){return n.push()}},r.a.createElement(hr.a,{style:{color:b}},r.a.createElement(hs.a,null)),r.a.createElement(He.a,{style:{color:b}},h("instructorModules.buttons.add".concat(E)))))},Is=Object(rt.a)((function(e){return{root:{overflowX:"hidden",maxWidth:600,margin:"30px auto",paddingLeft:e.spacing(1),paddingTop:30},nested:{paddingLeft:e.spacing(1.5)},nestedTwice:{paddingLeft:e.spacing(2)},nestedFile:{paddingLeft:e.spacing(5)}}}));var js=Object(Mt.a)({form:"category",enableReinitialize:!0,destroyOnUnmount:!1})((function(e){var t=e.initialValues,n=e.token,a=e.formValues,o=e.course,s=e.updateCategory,i=e.loading,c=e.openModal,l=e.closeModal,u=e.width,d=e.isDarkTheme,m=Object(We.a)().t,p=Is(),f=(a||{}).modules,g=(o||{}).lessons,b=((o||{}).tests||[]).filter((function(e){return!e.assignment})),h=((o||{}).tests||[]).filter((function(e){return e.assignment})),E="#0058AE";return d&&(E="#2196f3"),r.a.createElement(qe,null,r.a.createElement(Xe,{active:i,transparent:!0}),r.a.createElement($r.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:p.root},r.a.createElement(fr.a,{name:"modules",component:_s,tests:b,width:u,assignments:h,modules:f||[],secondaryBlue:E,lessons:g,t:m,folderType:"module",updateCategories:function(e,r,i){!function(e,r,i){var c=!!(t||{})._id;s("deleting"===i?{modules:r}:a,n,c,o._id),l()}(0,r,i)},handleOpenFolder:function(e){!function(e){var t,n=e,a=(f||[]).findIndex((function(e,t){return t===(n||[])[0]})),r=(((f||[]).find((function(e,t){return t===(n||[])[0]}))||{}).subjects||[]).findIndex((function(e,t){return t===(n||[])[1]})),o=(((((f||[]).find((function(e,t){return t===(n||[])[0]}))||{}).subjects||[]).find((function(e,t){return t===(n||[])[1]}))||{}).topics||[]).findIndex((function(e,t){return t===(n||[])[2]}));a>-1&&(t="modules.".concat(a,".folder")),r>-1&&(t="modules.".concat(a,".subjects.").concat(r,".folder")),o>-1&&(t="modules.".concat(a,".subjects.").concat(r,".topics.").concat(o,".folder")),c({folderId:e,tests:b,assignments:h,lessons:g,field:t},"contents")}(e)},modulesFormValues:a,onSelectDocument:function(e,t){if("lesson"===e){var n=o.lessons.find((function(e){return e._id===t}));c(n,"lesson")}if("test"===e||"assignment"===e){var a=o.tests.find((function(e){return e._id===t}));c(a,"testSummary")}}})))})),Rs=Object(c.b)((function(e){return{formValues:Object(nt.a)("category")(e),openFolderPath:e.instructorModules.openFolderPath,token:e.authentication.token,initialValues:e.common.modules,course:e.common.selectedCourse,loading:e.instructorModules.loading,width:e.common.width,isDarkTheme:e.common.isDarkTheme}}),(function(e){return{updateCategory:function(t,n,a,r){e(W(t,n,a,r))},clearModalStates:function(){return e({type:"CLEAR_INSTRUCTOR_MODAL_STATES"})},openModal:function(t,n){return e(Ae(t,n))},closeModal:function(){return e({type:"CLOSE_MODAL"})}}}))(js),Ns=n(221),Ls=n.n(Ns),Ps=Object(c.b)((function(e){return{course:e.common.selectedCourse,token:e.authentication.token,notifications:e.common.notifications,students:e.common.students}}),(function(e){return{editTest:function(t,n){e(Pe(t,!1,n)),e({type:"SET_EDITING"})},openModal:function(t,n){return e(Ae(t,n))}}}))((function(e){var t=e.course,n=e.token,o=e.editTest,s=e.openModal,i=e.isTest,c=e.isAssignment,l=e.students,u=Object(We.a)().t,d=Object(a.useState)(-1),m=Object(vo.a)(d,2),p=m[0],f=m[1],g=Object(a.useState)([]),b=Object(vo.a)(g,2),h=b[0],E=b[1],v=[];(l||[]).forEach((function(e){e.testResults.forEach((function(e){v.push(e.test)}))})),Object(a.useEffect)((function(){return function(){h.forEach((function(e){clearTimeout(e)}))}}),[h]);return r.a.createElement(qe,null,r.a.createElement($r.a,null,(t.tests||[]).map((function(e,t){return e.assignment&&i||!e.assignment&&c?null:r.a.createElement(qe,{key:e._id},r.a.createElement(Yr.a,{dense:!0,button:!0,onClick:function(){s(e,"testSummary")}},r.a.createElement(vr.a,{primary:e.testName}),r.a.createElement(vr.a,{secondary:e.testType.charAt(0).toUpperCase()+e.testType.slice(1)}),r.a.createElement(Wa.a,{onClick:function(t){t.stopPropagation(),s(e,"resetTest")}},r.a.createElement(Ls.a,{color:p===t?"primary":"inherit"})),r.a.createElement(Wa.a,{disabled:p===t,onClick:function(a){return function(e,t,a){if(e.stopPropagation(),v.includes(t._id)){f(a);var r=setTimeout((function(){f(-1),clearTimeout(r)}),3e3);E([].concat(Object(Vr.a)(h),[r]))}else o(t._id,n)}(a,e,t)}},r.a.createElement(xs.a,{color:p!==t?"primary":"secondary"})),r.a.createElement(Wa.a,{onClick:function(t){t.stopPropagation(),s(e,"deleteTest")}},r.a.createElement(Ya.a,{color:"secondary"}))),v.includes(e._id)&&p===t&&r.a.createElement(He.a,{variant:"caption",color:"error"},u(i?"testForm.errors.resetTestToMakeChanges":"testForm.errors.resetAssignmentToMakeChanges")))}))))})),Bs=n(1243),Ms=n(1245),qs=n(1244),Us=Object(rt.a)((function(e){return{root:{width:"100%",marginBottom:"20px"},heading:{fontSize:e.typography.pxToRem(15),flexShrink:0},headingModules:{fontSize:e.typography.pxToRem(18),flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,marginLeft:"10px"},flex:{display:"flex",marginTop:10,justifyContent:"space-between"},searchItem:{flexGrow:1,width:"98%"}}})),Qs=function(e){var t,n=e.index,o=e.disabled,s=e.summary,i=e.expandedSummary,c=e.secondaryText,l=e.noDetails,u=e.children,d=Us(),m=r.a.useState(!1),p=Object(vo.a)(m,2),f=p[0],g=p[1];return r.a.createElement(a.Fragment,null,r.a.createElement(Bs.a,{disabled:o,expanded:f===n,onChange:l?null:(t=n,function(e,n){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),g(n?t:-1)})},r.a.createElement(qs.a,{expandIcon:l?null:r.a.createElement(Ss.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement("div",null,r.a.createElement(He.a,{className:d.heading},f&&-1!==f&&i||s),r.a.createElement(He.a,{className:d.secondaryHeading},c))),l?null:r.a.createElement(Ms.a,null,u)))},Hs=Object(rt.a)((function(e){return{formControl:{minWidth:80,width:"100%",marginBottom:"20px"},textLabel:{margin:"0 3px 10px 3px"},SelectField:{boxSizing:"border-box",border:"1px solid #C2C2C2",borderRadius:"3px",padding:"7px",outline:"none",margin:"0 3px 0 0",cursor:"pointer"},SelectFieldDark:{background:"transparent",color:"white"}}})),Gs=Object(c.b)((function(e){return{isDarkTheme:e.common.isDarkTheme}}))((function(e){var t=e.input,n=e.meta,a=void 0===n?{}:n,o=e.options,s=e.label,i=e.fullWidth,c=e.simple,l=e.textLabel,u=e.error,d=e.disabled,m=e.isDarkTheme,p=Hs(),f=o.map((function(e){return r.a.createElement("option",{style:m?{background:"#424242",color:"white"}:{},key:e.primaryText,value:e.value},e.primaryText)})),g=r.a.useRef(null),b=r.a.useState(0),h=Object(vo.a)(b,2),E=h[0],v=h[1];r.a.useEffect((function(){v((g.current||200).offsetWidth)}),[]);var y=r.a.createElement(ha.a,{variant:"outlined",className:p.formControl},r.a.createElement(va.a,{ref:g},s),r.a.createElement(yr.a,Object.assign({disabled:d,native:!0,renderValue:function(){return t.value},labelWidth:E,className:p.cssOutlinedInput},t),f),r.a.createElement(Ea.a,null,(a.error||u)&&a.touched?a.error||u:""));return c&&(y=r.a.createElement("div",null,l&&r.a.createElement("div",{className:p.textLabel},"".concat(l)),r.a.createElement("select",Object.assign({value:l?"":s,className:[p.SelectField,m?p.SelectFieldDark:""].join(" "),style:i?{width:"95%"}:null},t),!l&&r.a.createElement("option",{style:m?{background:"#424242",color:"white"}:{},hidden:!0,key:-1,value:s},s),f),a.error&&a.touched&&r.a.createElement("span",{style:{color:"#E91313",fontSize:"0.7em",display:"block"}},a.error))),y})),Ws=Object(rt.a)((function(e){return{root:{width:"100%",marginBottom:"20px"},heading:{fontSize:e.typography.pxToRem(15),flexShrink:0},headingModules:{fontSize:e.typography.pxToRem(18),flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,marginLeft:"10px"},flex:{display:"flex",marginTop:10,justifyContent:"space-between"},searchItem:{flexGrow:1,width:"98%"},createButton:{margin:"20px 0 20px 0"}}})),zs=Object(c.b)((function(e){return{questions:e.instructorQuestion.questionBank,questionEditing:e.instructorQuestion.questionEditing,editing:e.common.editing,creatingQuestionType:e.instructorQuestion.creatingQuestionType}}),(function(e){var t;return t={addQToTest:function(t,n){e(Object(Bt.a)("testForm",t,n))},setQuestionForm:function(t,n,a){e(function(e,t,n){return{type:"SET_QUESTION_FORM",questionType:e,editing:t,questionFormData:n}}(t,!!n,a)),e(Ae({qType:t,questionFormData:a},"question"))},setQuestionEditing:function(t,n){return e(q(t))}},Object(yo.a)(t,"setQuestionEditing",(function(t,n){return e(q(t))})),Object(yo.a)(t,"setEditing",(function(){return e({type:"SET_EDITING"})})),t}))((function(e){var t=e.questions,n=(e.questionEditing,e.setQuestionForm),a=e.setQuestionEditing,o=e.selecting,s=e.questionType,i=e.indexToAdd,c=e.onBlockSync,l=(e.creatingQuestionType,e.addQToTest),u=e.setEditing,d=Object(We.a)().t,m=Ws(),p=r.a.useState(""),f=Object(vo.a)(p,2),g=f[0],b=f[1],h=r.a.useState(""),E=Object(vo.a)(h,2),v=E[0],y=E[1],T=r.a.useState(""),k=Object(vo.a)(T,2),S=k[0],w=k[1],O=[{value:"",primaryText:""},{value:"easy",primaryText:d("questions.easy")},{value:"medium",primaryText:d("questions.medium")},{value:"hard",primaryText:d("questions.hard")}],C=(t||[]).filter((function(e){return""!==e.language||null!==e.language})).reduce((function(e,t){return e.map((function(e){return e.language})).indexOf(t.language)<0&&e.push(t),e}),[]).map((function(e){return{value:e.language,primaryText:e.language}})),x=0,A=0,F=0,D=0;return r.a.createElement(qe,null,!o&&r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(pt.a,{color:"primary",className:m.createButton,onClick:function(e){var t;e.stopPropagation(),"Multiple-choice questions"===s&&(t="mc"),"Essay questions"===s&&(t="essay"),"Speaking questions"===s&&(t="speaking"),"Fill-in-the-blanks questions"===s&&(t="fillInBlank"),n(t,!1,function(e,t){var n=t("questionForm.fillblanksSectionDefaultText"),a={difficulty:"medium",language:t("questionForm.english")};return"mc"===e&&(a=Object(It.a)(Object(It.a)({},a),{},{mcQuestion:{answers:["".concat(t("questionForm.option")," 1"),"".concat(t("questionForm.option")," 2")],correctAnswers:["1"]}})),"essay"===e&&(a=Object(It.a)(Object(It.a)({},a),{},{essayQuestion:{question:""}})),"speaking"===e&&(a=Object(It.a)(Object(It.a)({},a),{},{speakingQuestion:[{audioAnswer:!1,audioQuestion:!1}]})),"fillInBlank"===e&&(a=Object(It.a)(Object(It.a)({},a),{},{fillBlankQuestions:{question:n,answers:[{marks:1,selectableAnswer:!1,answer:t("questionForm.pieceOfText")}],correctAnswers:[t("questionForm.pieceOfText")]}})),a}(t,d))}},d("questions.buttons.createQuestion"))),r.a.createElement(He.a,{variant:"subtitle1"},d("questions.filterQuestions")),r.a.createElement("div",{className:m.flex},r.a.createElement("div",{className:m.searchItem},r.a.createElement(Gs,{fullWidth:!0,simple:!0,textLabel:d("questions.difficulty"),label:"difficulty",options:O,input:{onChange:function(e){b(e.target.value)},value:g}})),r.a.createElement("div",{className:m.searchItem}," ",r.a.createElement(Gs,{fullWidth:!0,simple:!0,textLabel:d("questions.language"),label:"language",options:[{primaryText:"",value:""}].concat(Object(Vr.a)(C)),input:{onChange:function(e){w(e.target.value)},value:S}})),r.a.createElement("div",{className:m.searchItem}," ",r.a.createElement(ka,{label:"Tag",width:"97.5%",simple:!0,textLabel:d("questions.tag"),input:{onChange:function(e){y(e.target.value)},value:v}}))),r.a.createElement(pt.a,{fullWidth:!0,color:"secondary",size:"small",onClick:function(){b(""),y(""),w("")},style:{margin:"5px 0 0 0"}},d("questions.buttons.resetFilters")),(t||[]).filter((function(e){if(""===S||e.language===S)return e})).filter((function(e){if(""===g||e.difficulty===g)return e})).filter((function(e){if((e.tags||[]).find((function(e){if(e.toLowerCase().includes(v.toLowerCase()))return e}))||""===v)return e})).map((function(e,d){var m;if("mc"===e.type&&(x+=1),"essay"===e.type&&(A+=1),"speaking"===e.type&&(F+=1),"fillInBlank"===e.type&&(D+=1),"Multiple-choice questions"===s&&(m="mc"),"Essay questions"===s&&(m="essay"),"Speaking questions"===s&&(m="speaking"),"Fill-in-the-blanks questions"===s&&(m="fillInBlank"),e.type===m)return r.a.createElement($r.a,{key:e._id},r.a.createElement(Yr.a,{dense:!0,button:!0,onClick:function(r){var s;o?(r.stopPropagation(),function(e,t,n,a){if("mc"===e.type&&n("mcQuestions.".concat(t),Object(It.a)(Object(It.a)({},e.mcQuestion),{},{marks:1})),"essay"===e.type&&n("essayQuestions.".concat(t),Object(It.a)(Object(It.a)({},e.essayQuestion),{},{marks:1})),"speaking"===e.type){var r={questionRecordedBlob:(e.speakingQuestion||{}).audioQuestion&&""!==(e.speakingQuestion||{}).audioQuestion?(e.speakingQuestion||{}).audioQuestion:"",recordedBlob:(e.speakingQuestion||{}).audio&&""!==(e.speakingQuestion||{}).audio?(e.speakingQuestion||{}).audio:"",question:(e.speakingQuestion||{}).question,audioAnswer:!!(e.speakingQuestion||{}).audio,audioQuestion:!!(e.speakingQuestion||{}).audioQuestion,audioFile:(e.speakingQuestion||{}).audio,audioFileQuestion:(e.speakingQuestion||{}).audioQuestion,marks:1};n("speakingQuestions.".concat(t),r)}"fillInBlank"===e.type&&(n("fillBlankQuestions",function(e){var t=(e.fillBlankQuestions||{}).blanks||[],n=t.map((function(e,t){var n=e.audio&&""!==e.audio,a=(e.incorrectAnswers||[]).filter((function(e){return e})).reduce((function(e,t,n){var a;return 0===n&&(a="One"),1===n&&(a="Two"),2===n&&(a="Three"),e["incorrectAnswer".concat(a)]=t,e}),{});return{answer:e.correctAnswer,selectableAnswer:e.selectableAnswer,answerOptions:a,marks:1,audio:n,browserAudioFile:n?e.audio:"",audioFile:n?e.audio:null}}));return{question:(e.fillBlankQuestions||{}).question,answers:n,correctAnswers:t.map((function(e){return e.correctAnswer}))}}(e)),a())}((s=e._id,(t||[]).find((function(e){return s===e._id}))),i,(function(e,t){l(e,t)}),c)):(n(e.type,!0,function(e,t){var n=(t||[]).find((function(t){return t._id===e})),a=(n||{}).speakingQuestion||{},r=n;"speaking"===(n||{}).type&&(r=Object(It.a)(Object(It.a)({},n),{},{speakingQuestion:[{question:a.question,questionRecordedBlob:a.audioQuestion?a.audioQuestion:"",recordedBlob:a.audio?a.audio:"",audioFileQuestion:a.audioQuestion,audioFile:a.audio,audioAnswer:!(!a.audio||""===a.audio),audioQuestion:!(!a.audioQuestion||""===a.audioQuestion)}]}));var o=(n||{}).fillBlankQuestions||{},s=o.blanks||[];return"fillInBlank"===(n||{}).type&&(r=Object(It.a)(Object(It.a)({},n),{},{fillBlankQuestions:{question:o.question,answers:s.map((function(e){var t=(e.incorrectAnswers||[]).filter((function(e){return e})).reduce((function(e,t,n){var a;return 0===n&&(a="One"),1===n&&(a="Two"),2===n&&(a="Three"),e["incorrectAnswer".concat(a)]=t,e}),{});return{answer:e.correctAnswer,audioFile:e.audio,browserAudioFile:e.audio?e.audio:"",audio:!(!e.audio||""===e.audio),selectableAnswer:e.selectableAnswer,answerOptions:t}})),correctAnswers:s.map((function(e){return e.correctAnswer}))}})),r}(e._id,t)),a(e._id),u())}},o?r.a.createElement(fs.a,null,r.a.createElement(hr.a,null)):r.a.createElement(fs.a,null,r.a.createElement(xs.a,null)),"mc"===e.type&&r.a.createElement(vr.a,{primary:x+" "+((e.mcQuestion||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."}),"essay"===e.type&&r.a.createElement(vr.a,{primary:A+" "+((e.essayQuestion||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."}),"speaking"===e.type&&r.a.createElement(vr.a,{primary:(F+" "+(e.speakingQuestion||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."}),"fillInBlank"===e.type&&r.a.createElement(vr.a,{primary:(D+" "+(e.fillBlankQuestions||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."})))})))})),Vs=n(671),$s=Object(rt.a)((function(e){return{SuccessButton:{background:"#4caf50","&:hover":{backgroundColor:"#388e3c",color:"#FFF"}},ErrorButton:{background:"#c62828","&:hover":{backgroundColor:"#b71c1c",color:"#FFF"}}}})),Ys=Object(Vs.a)(pt.a)({border:0,borderRadius:3,color:"white",height:48,padding:"0 30px"}),Js=function(e){var t=e.isError,n=e.children,o=e.clicked,s=e.disabled,i=$s();return r.a.createElement(a.Fragment,null,r.a.createElement(Ys,{disabled:s,onClick:o,fullWidth:!0,className:t?i.ErrorButton:i.SuccessButton},n))},Ks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={isValid:!0,resourcesAreValid:!0};return t.resources=(e.resources||[]).map((function(n,a){var r;return(n||{}).resourceName&&(n.resourceName||"").trim()||(r=ua.t("resources.errors.giveResourceName")),(n||{}).resource||(r=ua.t("resources.errors.selectResource")),(n||{}).resource instanceof File&&(n||{}).resource.size>1e6*e.instructorFileSizeLimit&&(r=ua.t("resources.errors.fileSize",{size:"".concat(e.instructorFileSizeLimit,"MB")})),(r||r)&&(t.resourcesAreValid=!1,t.isValid=!1),{resourceName:r}})),t},Zs=function(e){var t=e.fields,n=e.formValues,a=void 0===n?{}:n,o=e.changeDocument,s=e.openModal,i=e.t,c=e.isDarkTheme;return r.a.createElement(qe,null,r.a.createElement($r.a,null,t.map((function(e,n){var c,l=((a.resources||[])[n]||{}).loadedResource,u=((a.resources||[])[n]||{}).resource instanceof File?((((a.resources||[])[n]||{}).resource||{}).name||"").toLowerCase().split(".").pop():(((a.resources||[])[n]||{}).resource||"").toLowerCase().split(".").pop();return"pdf"===u&&(c=r.a.createElement("i",{className:"far fa-file-pdf fa-2x"})),"docx"!==u&&"doc"!==u||(c=r.a.createElement("i",{className:"fas fa-file-word fa-2x"})),"jpeg"!==u&&"jpg"!==u&&"jfif"!==u||(c=r.a.createElement("i",{className:"fas fa-file-image fa-2x"})),"avi"!==u&&"mp4"!==u||(c=r.a.createElement("i",{className:"far fa-file-video fa-2x"})),r.a.createElement(Yr.a,{key:n},l&&c&&r.a.createElement("span",{style:{marginRight:20,cursor:"pointer"},onClick:function(e){e.stopPropagation(),s({loadedFile:l,ext:u},"courseResource")}},c),r.a.createElement(ba.a,{simple:!0,label:i("resources.buttons.resourceName"),name:"resources.".concat(n,".resourceName"),component:ka,errorAbsolutePosition:!0}),r.a.createElement(ba.a,{name:"resources.".concat(n,".resource"),component:Va,loadedFile:l,mimeTypesAllowed:"video/*, image/jpeg, application/pdf, .doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",extensionsAllowed:["jpeg","jpg","jfif","pdf","docx","doc","mp4","avi"],onChangeFile:function(e){o("resources.".concat(n,".loadedResource"),e)},preview:!1,compressImage:!0,index:n,uploadButtonText:i("resources.buttons.select")}),r.a.createElement(Wa.a,{onClick:function(e){e.stopPropagation(),t.remove(n)}},r.a.createElement(Ya.a,{fontSize:"small",style:{color:"red"}})))}))),r.a.createElement(Yr.a,{button:!0,onClick:function(){return t.push()}},r.a.createElement(hr.a,{style:{color:c?"#2196f3":"#0058AE"}}),r.a.createElement(He.a,{style:{color:c?"#2196f3":"#0058AE"}},i("resources.buttons.addResource"))))},Xs=Object(Mt.a)({form:"courseResources",enableReinitialize:!1,destroyOnUnmount:!0,validate:Ks})((function(e){var t=e.token,n=e.course,o=(e.modalDocument,e.formValues),s=e.updateResources,i=e.changeDocument,c=e.initialValues,l=e.openModal,u=e.touchField,d=e.configuration,m=e.isDarkTheme,p=Object(a.useState)(null),f=Object(vo.a)(p,2),g=f[0],b=f[1],h=Object(a.useState)(!1),E=Object(vo.a)(h,2),v=E[0],y=E[1];Object(a.useEffect)((function(){var e=c.resources.map((function(e){return e.resource}));b(e)}),[]);var T=Object(We.a)().t,k=Ks(o,d).isValid;return r.a.createElement(qe,null,r.a.createElement(fr.a,{name:"resources",formValues:o,component:Zs,changeDocument:i,openModal:l,isDarkTheme:m,t:T}),r.a.createElement(Js,{clicked:function(){var e=Ks(o,d).isValid;if(o.resources.forEach((function(e,t){u("resources.".concat(t,".resourceName")),u("resources.".concat(t,".resource"))})),y(!0),e){var a=o.resources.map((function(e){return e.resource})),r=(g||[]).filter((function(e){if(!a.includes(e))return e}));s(n._id,o.resources,r,t)}},isError:v&&!k},T("resources.buttons.updateResources")))})),ei=Object(c.b)((function(e){var t=((e.common.courses||[]).find((function(t){return t._id===(e.common.selectedCourse||{})._id}))||{}).resources||[],n=e.common.configuration.instructorFileSizeLimit,a=0===t.length?[{resourceName:""}]:t;return{formValues:Object(nt.a)("courseResources")(e),courses:e.common.courses,course:e.common.selectedCourse,students:e.common.students,modalDocument:e.common.modalDocument,configuration:e.common.configuration,token:e.authentication.token,initialValues:{resources:a,instructorFileSizeLimit:n},isDarkTheme:e.common.isDarkTheme}}),(function(e){return{updateResources:function(t,n,a,r){return e(function(e,t,n,a){return{type:"UPDATE_COURSE_RESOURCES_START",payload:{courseId:e,resources:t,filesToDelete:n,token:a}}}(t,n,a,r))},changeDocument:function(t,n){e(Object(Bt.a)("courseResources",t,n))},openModal:function(t,n){e(Ae(t,n))},touchField:function(t){e(Object(Bt.d)("courseResources",t))}}}))(Xs),ti=n(1264),ni=n(1246),ai=n(1135),ri=Object(rt.a)((function(e){return{margin:{marginBottom:"15px"},MuiFormLabel:{fontSize:"1.2em"},errorText:{color:"#e91313",fontFamily:"Helvetica",fontSize:"0.75rem"},font:{fontSize:"0.7em !important"}}})),oi=function(e){var t=e.input,n=e.meta,a=void 0===n?{}:n,o=e.options,s=e.title,i=e.error,c=e.row,l=void 0!==c&&c,u=ri(),d=a.touched&&(a.error||i),m=o.map((function(e){return r.a.createElement(ht.a,Object.assign({key:e.label},t,{value:e.value,control:r.a.createElement(ti.a,{color:e.color}),label:e.label,labelPlacement:e.placement,checked:e.checked,className:u.font}))}));return r.a.createElement("div",{className:u.margin},r.a.createElement(ha.a,{margin:"dense",component:"fieldset"},r.a.createElement(ai.a,{className:u.MuiFormLabel},s),r.a.createElement(ni.a,{row:l,value:t.value,"aria-label":"gender"},m),r.a.createElement("span",{className:u.errorText},d?a.error||i:""," ")))},si=n(1249),ii=n(1250),ci=n(1252),li=n(1251),ui=n(668),di=Object(c.b)((function(e){return{width:e.common.width,isDarkTheme:e.common.isDarkTheme}}))((function(e){var t=e.data,n=e.width,a=e.testForm,o=e.isDarkTheme,s={top:n>450?0:-200,right:110,bottom:n>450?0:-200,left:110};return a&&(s={top:n>450?50:-150,right:n>450?130:70,bottom:n>450?50:-150,left:n>450?130:70}),r.a.createElement(ui.a,{data:t,margin:s,innerRadius:0,padAngle:.7,cornerRadius:3,colors:{scheme:"category10"},borderWidth:1,borderColor:{from:"color",modifiers:[["darker","0.2"]]},radialLabelsSkipAngle:10,radialLabelsTextXOffset:0,radialLabelsLinkOffset:-10,radialLabelsLinkDiagonalLength:15,radialLabelsLinkHorizontalLength:3,radialLabelsLinkStrokeWidth:1,radialLabelsLinkColor:{from:"color"},enableSlicesLabels:!1,slicesLabelsSkipAngle:3,slicesLabelsTextColor:"#333333",animate:!0,motionStiffness:90,motionDamping:15,theme:o?{textColor:"white",labels:{text:{fill:"white"}},background:"#424242",tooltip:{chip:{color:"white"},basic:{background:"#424242"},container:{background:"#424242"}}}:{}})})),mi=Object(rt.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},textField:{width:"100%",borderRadius:"1px",margin:"0 auto 5px"},textLabel:{margin:"0 3px 10px 3px"},marginTop:{marginTop:"5px"},darkBackground:{background:"#424242",color:"white"},lightBackground:{background:"white"}}})),pi=Object(c.b)((function(e){return{isDarkTheme:e.common.isDarkTheme}}))((function(e){var t,n=e.input,o=e.label,s=(e.meta,e.options),i=void 0===s?{}:s,c=e.placeholder,l=e.textLabel,u=e.isDarkTheme,d=mi();return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:[d.root,i.marginTop?d.marginTop:null].join(" ")},l?r.a.createElement("div",{className:d.textLabel},"".concat(o,":")):null,r.a.createElement(xa.a,Object.assign({className:[d.textField,u?d.darkBackground:d.lightBackground].join(" "),autoComplete:"off"},n,(t={rows:i.rows,variant:i.variant,multiline:!0},Object(yo.a)(t,"variant","outlined"),Object(yo.a)(t,"placeholder",c),Object(yo.a)(t,"InputProps",{readOnly:i.readOnly}),Object(yo.a)(t,"disabled",i.disabled),t)))))})),fi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.reduce((function(e,n){return n._id!==t._id?e+n.weight:e}),0),a=t.testWeight||t.assignmentWeight;return!a||parseFloat(a)<0?n:n+(t.isGradeIncluded?parseFloat(parseFloat(a).toFixed(2)):0)},gi=Object(Mt.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Mr})((function(e){var t=e.isTest,n=e.course,a=e.formValues,o=void 0===a?{}:a,s=Object(We.a)("common").t,i=[{label:s("testForm.fields.quiz"),value:"quiz",placement:"end",color:"primary"},{label:s("testForm.fields.midterm"),value:"midterm",placement:"end",color:"primary"},{label:s("testForm.fields.final"),value:"final",placement:"end",color:"primary"}],c={label:"".concat(s(t?"testForm.fields.testWeight":"testForm.fields.assignmentWeight")),size:"small",disabled:!o.isGradeIncluded},l={label:s("testForm.fields.testTime"),size:"small",disabled:!o.timedTest,minWidth:223},u={label:s("testForm.fields.passingGrade"),size:"small"},d={label:s("testForm.fields.passingRequired"),size:"small",disabled:"quiz"===o.testType},m={label:s("testForm.fields.dailyPenalty"),size:"small",disabled:!o.allowLateSubmission,minWidth:223},p={label:s("testForm.fields.lateDaysAllowed"),size:"small",disabled:!o.allowLateSubmission,minWidth:223},f={label:s("testForm.fields.timedTest"),checked:!1},g={label:s("testForm.fields.blockLessons"),checked:!1},b={label:s("testForm.fields.allowLateSubmission"),checked:!1},h={label:s("testForm.fields.publish"),checked:!1},E={label:s("testForm.fields.includeGrade"),checked:!0},v=o.testWeight||o.assignmentWeight&&parseFloat(o.testWeight||o.assignmentWeight)>0&&parseFloat(o.testWeight||o.assignmentWeight)<=1e3,y=n.tests.map((function(e){return e._id===o._id?null:["".concat(e.testName," (").concat(e.assignment?s("testForm.assignment"):s("testForm.fields.".concat(e.testType)),")"),"".concat(e.weight," ").concat(s("testForm.points")," (").concat(parseFloat(parseFloat(e.weight/fi(n.tests,o)*100).toFixed(2)).toString(),"%)")]})).filter((function(e){return e})),T=parseFloat(parseInt(o.testWeight||o.assignmentWeight||0)/fi(n.tests,o)*100).toFixed(2),k=[{id:"".concat(s(t?"testForm.currentTest":"testForm.currentAssignment")," ").concat(parseFloat(parseFloat(T).toFixed(2)).toString(),"%"),label:s(t?"testForm.currentTest":"testForm.currentAssignment"),value:parseFloat(parseFloat(T).toFixed(2)).toString(),color:"hsl(88, 70%, 50%)"},{id:"".concat(s("testForm.others")," ").concat(parseFloat(parseFloat(100-T).toFixed(2)).toString(),"%"),label:s("testForm.others"),value:parseFloat(parseFloat(100-T).toFixed(2)).toString(),color:"hsl(245, 70%, 50%)"}];return r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"h4",gutterBottom:!0},s(t?"testForm.testCustomization":"testForm.assignmentCustomization")),r.a.createElement(ba.a,{name:t?"testName":"assignmentName",type:"text",component:ka,label:s(t?"testForm.fields.testName":"testForm.fields.assignmentName")}),r.a.createElement(ba.a,{name:"published",options:h,component:Ca}),r.a.createElement(ba.a,{name:"isGradeIncluded",options:E,component:Ca}),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start"}},r.a.createElement(ba.a,{name:t?"testWeight":"assignmentWeight",component:Na,options:c}),!!v&&!!o.isGradeIncluded&&r.a.createElement("div",{style:{minWidth:50}},r.a.createElement(He.a,{style:{lineHeight:3,marginLeft:10},paragraph:!0,variant:"body1",gutterBottom:!0}," / ".concat(fi(n.tests,o))))),!!v&&!!o.isGradeIncluded&&r.a.createElement("div",null,r.a.createElement(He.a,{paragraph:!0,variant:"body1"},s("testForm.worthXOfTheCourse",{weight:o.isGradeIncluded?parseFloat(parseFloat(T).toFixed(2)).toString():0}))),!!v&&!!o.isGradeIncluded&&r.a.createElement("div",{style:{height:200}},r.a.createElement(di,{data:k,testForm:!0})),r.a.createElement(Qs,{index:"testWeightDistribution",summary:s("testForm.otherTestsWeights")},r.a.createElement(si.a,{"aria-label":"simple table"},r.a.createElement(ii.a,null,y.map((function(e,t){return r.a.createElement(li.a,{key:t},r.a.createElement(ci.a,{component:"th",scope:"row"},e[0]),r.a.createElement(ci.a,{align:"right"},e[1]))}))))),t?r.a.createElement(qe,null,r.a.createElement(ba.a,{name:"blockedNotes",options:g,component:Ca}),r.a.createElement(ba.a,{name:"timedTest",options:f,component:Ca}),r.a.createElement(ba.a,{name:"testTime",component:Na,options:l}),r.a.createElement(ba.a,{component:oi,name:"testType",title:s("testForm.fields.testType"),required:!0,options:i,orientation:"horizontal"}),r.a.createElement(ba.a,{name:"passingRequired",options:d,component:Ca}),r.a.createElement(ba.a,{name:"passingGrade",component:Na,compact:!0,options:u}),r.a.createElement(ba.a,{name:"notes",component:pi,placeholder:s("testForm.fields.notesPlaceholder"),label:s("testForm.fields.notes"),options:{multiline:!0,rows:3,variant:ya.a},textLabel:!0})):r.a.createElement(qe,null,r.a.createElement(ba.a,{name:"allowLateSubmission",options:b,component:Ca}),r.a.createElement(ba.a,{disabled:!0,name:"latePenalty",component:Na,compact:!0,options:m}),r.a.createElement(ba.a,{disabled:!0,name:"lateDaysAllowed",component:Na,compact:!0,options:p})))})),bi=Object(c.b)((function(e){return{formValues:Object(nt.a)("testForm")(e),course:e.common.selectedCourse}}))(gi),hi=n(1141),Ei=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).field=function(t){var n=t.input,a=t.meta,o=t.options,s=t.classes,i=t.column,c=t.error,l=(n.name,n.onChange),u=n.value,d=o.map((function(t,n){var a=t.label,o=t.value,s=t.name,i=u.includes(o);return r.a.createElement("div",{key:a+n,style:{display:"flex",alignItems:"center"}},e.props.numbered&&r.a.createElement(He.a,{style:{marginRight:10},variant:"subtitle1"},n+1),r.a.createElement(ht.a,{key:"checkbox-".concat(n),control:r.a.createElement(Tr.a,{name:"".concat(s,"[").concat(n,"]"),value:o,checked:i,onChange:function(e){var t=Object(Vr.a)(u);return e.target.checked?t.push(o):t.splice(t.indexOf(o),1),l(t)}}),label:a}))}));return r.a.createElement(ha.a,{component:"fieldset"},r.a.createElement(He.a,{variant:"h6"},e.props.title),r.a.createElement(hi.a,{row:!i,className:s.Margin},d),r.a.createElement(Ea.a,null,(a.error||c)&&a.touched?c||a.error:""))},e}return Object(Rt.a)(n,[{key:"render",value:function(){return r.a.createElement(ba.a,Object.assign({name:"checkbox"},this.props,{type:"checkbox",component:this.field}))}}]),n}(a.Component),vi=Object(at.a)((function(){return{MuiFormLabel:{fontSize:"1.2em"},Margin:{marginBottom:"15px"}}}))(Ei);function yi(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}var Ti=Object(Mt.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Mr})((function(e){var t=e.formValues,n=void 0===t?{}:t,a=e.setDefaultSectionWeights,o=e.touchCheckboxes,s=e.isTest,i=Object(We.a)("common").t,c=[{label:i("testForm.fields.mc"),value:"mc",placement:"start",color:"primary",name:"mc"},{label:i("testForm.fields.essay"),value:"essay",placement:"start",color:"primary",name:"essay"},{label:i("testForm.fields.speaking"),value:"speaking",placement:"start",color:"primary",name:"speaking"},{label:i("testForm.fields.fillblanks"),value:"fillblanks",placement:"start",color:"primary",name:"fillBlanks"}],l={label:i("testForm.fields.equallyDistributeMarks"),checked:!1,disabled:!((n.testSections||[]).length>1)},u=["Multiple-choice","Essay","Speaking","Fill-in-the-blanks"].map((function(e,t){var a;return"Multiple-choice"===e&&(a="mc"),"Essay"===e&&(a="essay"),"Speaking"===e&&(a="speaking"),"Fill-in-the-blanks"===e&&(a="fillblanks"),{label:i("testForm.fields.".concat(a)),size:"small",disabled:!(n.testSections||[]).includes(a)||n.equalSectionWeight||!((n.testSections||[]).length>1)}})),d=n.equalSectionWeight,m=yi(d),p=(n.testSections||[]).length,f=yi(p);return(m!==d||f!==p&&d||1===p)&&a(n.testSections,d),r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"h4",gutterBottom:!0},i("testForm.marksDistribution")),r.a.createElement(ba.a,{name:"testSections",title:i(s?"testForm.fields.testSections":"testForm.fields.assignmentSections"),component:vi,onChange:function(){return o("testSections")},options:c,required:!1,column:!0}),r.a.createElement(ba.a,{name:"equalSectionWeight",options:l,component:Ca}),r.a.createElement(He.a,{variant:"h6",style:{marginBottom:20}},i("testForm.fields.sectionWeights")),r.a.createElement(ba.a,{name:"mcSectionWeight",component:Na,options:u[0]}),r.a.createElement(ba.a,{name:"essaySectionWeight",component:Na,options:u[1]}),r.a.createElement(ba.a,{name:"speakingSectionWeight",component:Na,options:u[2]}),r.a.createElement(ba.a,{name:"fillBlankSectionWeight",component:Na,options:u[3]}))})),ki=Object(c.b)((function(e,t){return{formValues:Object(nt.a)("testForm")(e),testForm:e.form.testForm}}),(function(e){return{touchCheckboxes:function(t){e(Object(Bt.d)("testForm",t))},setDefaultSectionWeights:function(t,n){var a=100/(t||[]).length;(t||[]).includes("mc")?e(Object(Bt.a)("testForm","mcSectionWeight",n||1!==(t||[]).length?parseFloat(a.toFixed(2)):100)):e(Object(Bt.a)("testForm","mcSectionWeight",null)),(t||[]).includes("essay")?e(Object(Bt.a)("testForm","essaySectionWeight",n||1!==(t||[]).length?parseFloat(a.toFixed(2)):100)):e(Object(Bt.a)("testForm","essaySectionWeight",null)),(t||[]).includes("speaking")?e(Object(Bt.a)("testForm","speakingSectionWeight",n||1!==(t||[]).length?parseFloat(a.toFixed(2)):100)):e(Object(Bt.a)("testForm","speakingSectionWeight",null)),(t||[]).includes("fillblanks")?e(Object(Bt.a)("testForm","fillBlankSectionWeight",n||1!==(t||[]).length?parseFloat(a.toFixed(2)):100)):e(Object(Bt.a)("testForm","fillBlankSectionWeight",null))}}}))(Ti),Si=Object(Mt.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Mr})((function(e){var t=e.formValues,n=void 0===t?{}:t,a=e.changeDateTime,o=e.isTest,s=n.createdAt||null,i=Object(We.a)("common").t;return r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"h4",gutterBottom:!0},i("testForm.importantDates")),r.a.createElement(ba.a,{name:"availableOnDate",type:"dateTime",handleChange:function(e){return a(e,"availableOnDate")},component:ur,options:{disablePast:!0,label:i("testForm.fields.availableOnDate"),minDate:s}}),r.a.createElement(ba.a,{name:"gradeReleaseDate",type:"dateTime",handleChange:function(e){return a(e,"gradeReleaseDate")},component:ur,options:{disablePast:!0,label:i("testForm.fields.gradeReleaseDate"),minDate:s}}),r.a.createElement(ba.a,{name:"dueDate",type:"dateTime",handleChange:function(e){return a(e,"dueDate")},component:ur,options:{disablePast:!0,label:i(o?"testForm.fields.closeDate":"testForm.fields.dueDate"),minDate:s},noPaddingBottom:!0}))})),wi=Object(c.b)((function(e,t){return{formValues:Object(nt.a)("testForm")(e)}}),(function(e){return{changeDateTime:function(t,n){e(Object(Bt.a)("testForm",n,t)),t||e(Object(Bt.d)("testForm",n))}}}))(Si),Oi=n(262),Ci=n.n(Oi),xi=n(263),Ai=n(641),Fi=n.n(Ai),Di=n(640),_i=n.n(Di);xi.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(xi.pdfjs.version,"/pdf.worker.js");var Ii=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={numPages:null,pageNumber:1,scale:.6},e.onDocumentLoadSuccess=function(t){var n=t.numPages;e.setState({numPages:n,pageNumber:1})},e.previousPdfPage=function(){e.state.pageNumber>1&&e.setState({pageNumber:e.state.pageNumber-1})},e.nextPdfPage=function(){e.state.pageNumber<e.state.numPages&&e.setState({pageNumber:e.state.pageNumber+1})},e.setPdfPage=function(t){var n=parseInt(t.target.value),a=n;n>e.state.numPages&&(a=e.state.numPages),n<1&&(a=1),NaN!==n&&n||(a=1),e.setState({pageNumber:parseInt(a)})},e.handleScale=function(t){"in"===t&&e.setState((function(e){return{scale:e.scale+.2}})),"out"===t&&e.setState((function(e){return{scale:e.scale-.2}}))},e}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.pageNumber,a=t.numPages,o=t.scale,s=this.props,i=s.url,c=s.t,l={label:c("pdf.goToPage"),size:"small"};return r.a.createElement("div",null,r.a.createElement("p",{className:Ci.a.pageNumberDisplay},c("pdf.page")," ",n," ",c("pdf.of")," ",a),r.a.createElement("div",{className:Ci.a.flexPositioningEven},r.a.createElement(pt.a,{disabled:1===n,color:"default",onClick:this.previousPdfPage,startIcon:r.a.createElement(ga.a,null),size:"small"},c("pdf.page")," ",1===n?1:n-1),r.a.createElement(pt.a,{disabled:n===a,onClick:this.nextPdfPage,color:"default",endIcon:r.a.createElement(pa.a,null),size:"small"},c("pdf.page")," ",n===a?a:n+1)),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},r.a.createElement(Na,{options:l,input:{onChange:this.setPdfPage}})),r.a.createElement("div",{style:{overflow:"scroll",maxHeight:"450px"}},r.a.createElement(xi.Document,{className:Ci.a.pdfCanvas,file:i,onLoadSuccess:this.onDocumentLoadSuccess,onLoadError:function(e){return console.log(e)},renderMode:"svg"},r.a.createElement(xi.Page,{scale:o,pageNumber:n}))),r.a.createElement("div",{className:Ci.a.flexPositioningEven},r.a.createElement(Wa.a,{onClick:function(){e.state.scale>=0&&e.handleScale("out")},color:"primary",component:"span"},r.a.createElement(_i.a,null)),r.a.createElement(Wa.a,{onClick:function(){e.handleScale("in")},color:"primary",component:"span"},r.a.createElement(Fi.a,null))))}}]),n}(a.Component),ji=Object(Qa.a)("common")(Ii),Ri=function(e){var t=e.onPreview,n=e.audioSource,a=e.id,o=e.previewType,s=e.previewText,i=e.disabled,c=e.fullWidth,l=Object(We.a)().t;return r.a.createElement(qe,null,"button"===o?r.a.createElement(qe,null,r.a.createElement("audio",{id:a,src:n}),r.a.createElement(pt.a,{fullWidth:c,onClick:t,color:"primary",disabled:!n||""===n||i},s||l("audioRecorder.buttons.preview"))):r.a.createElement("div",{className:es.a.AudioAlignment},r.a.createElement("audio",{id:a,src:n}),r.a.createElement("span",{className:es.a.Pointer,onClick:t},r.a.createElement("i",{className:"fa fa-volume-down fa-2x ".concat(n?es.a.greenIcon:es.a.redIcon)}))))},Ni=function(e){var t=e.onClear,n=e.clearDisabled,a=Object(We.a)().t;return r.a.createElement("div",{className:es.a.flexPositioningEven},r.a.createElement(pt.a,{color:"secondary",onClick:t,disabled:n},a("audioRecorder.buttons.clearAudio")))},Li=function(e){var t=e.onStart,n=e.onStop,a=e.onPreview,o=e.recordDisabled,s=e.audioSource,i=e.id,c=e.meta,l=void 0===c?{}:c,u=e.error,d=e.onClear,m=e.clearDisabled,p=(e.playerDisabled,e.recordButtonText),f=e.previewType,g=e.isMicAlert,b=(e.chatRecorder,e.token,Object(We.a)().t);return r.a.createElement(qe,null,"button"===f&&r.a.createElement("div",{className:es.a.flexPositioningEven},r.a.createElement(pt.a,{onClick:t,disabled:o||g,startIcon:r.a.createElement(Ro.a,null),fullWidth:!0},p||b("audioRecorder.buttons.record"))),r.a.createElement("div",{style:{margin:"auto",display:"block",width:"60%"}},g&&r.a.createElement(He.a,{style:{textAlign:"center"},variant:"caption",color:"error"},b("audioRecorder.errors.micBlocked"))),r.a.createElement("div",{className:es.a.flexPositioningEven},"button"!==f&&r.a.createElement(pt.a,{onClick:t,disabled:o||g,startIcon:r.a.createElement(Ro.a,null)},p||b("audioRecorder.buttons.record")),r.a.createElement(pt.a,{onClick:n,disabled:!o||g,startIcon:r.a.createElement(Lo.a,null)},b("audioRecorder.buttons.stop")),r.a.createElement(Ri,{onPreview:s?a:null,audioSource:s,id:i,previewType:f})),r.a.createElement("div",{className:es.a.flexPositioningEven},r.a.createElement("span",{className:es.a.errorText},(l.error||u)&&l.touched?l.error||u:""," ")),r.a.createElement("div",{className:es.a.flexPositioningEven},r.a.createElement(Ni,{onClear:d,clearDisabled:m})))},Pi=(n(1065),Object(Mt.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Mr})((function(e){var t,n=e.formValues,o=void 0===n?{}:n,s=e.changeField,i=e.errors,c=e.isTest,l=e.path,u=Object(We.a)("common").t,d=Object(a.useState)(!1),m=Object(vo.a)(d,2),p=m[0],f=m[1],g=Object(a.useState)(null),b=Object(vo.a)(g,2),h=b[0],E=b[1];Object(a.useEffect)((function(){return function(){clearTimeout(h)}}),[]);var v,y=o.audioMaterial||{},T=o.readingMaterial||{},k={label:u("testForm.fields.useUploadDoc"),checked:!1},S={label:u("testForm.fields.useUploadAudio"),checked:!1},w=o.materialsDisplay||"",O=((o.audioMaterial||[])[w]||{}).recordingTimeout,C=((o.audioMaterial||[])[w]||{}).recorder||{},x=o.testSections||[],A=x.includes("mc"),F=x.includes("essay"),D=x.includes("speaking"),_=x.includes("fillblanks"),I=[A?{value:"multipleChoice",primaryText:u("testForm.fields.mc")}:null,F?{value:"essay",primaryText:u("testForm.fields.essay")}:null,D?{value:"speaking",primaryText:u("testForm.fields.speaking")}:null,_?{value:"fillInTheBlanks",primaryText:u("testForm.fields.fillblanks")}:null,{value:"test",primaryText:u(c?"testForm.fields.atBeginningOfTest":"testForm.fields.atBeginningOfAssignment")}].filter((function(e){return e})),j=function(e,t,n,a){a?(s("audioMaterial.".concat(n,".recording"),a),s("audioMaterial.".concat(n,".recorder"),e),s("audioMaterial.".concat(n,".recordingTimeout"),t)):function(){clearTimeout(h),f(!0);var e=setTimeout((function(){f(!1)}),5e3);E(e)}()},R=function(e,t,n){s("audioMaterial.".concat(n,".recording"),!1),s("audioMaterial.".concat(n,".recordedBlob"),e),s("audioMaterial.".concat(n,".audioFile"),t)},N=((o.audioMaterial||{})[w]||{}).recording,L=(y[w]||{}).recordedBlob,P=["multipleChoice","essay","speaking","fillInTheBlanks","test"],B=P.find((function(e){return((i.readingMaterial||{})[e]||{}).file})),M=P.find((function(e){return((i.audioMaterial||{})[e]||{}).audioFile}));return v=(T[w]||{}).file instanceof File?(((T[w]||{}).file||{}).name||"").split(".").pop():((T[w]||{}).file||"").split(".").pop(),r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"h4",gutterBottom:!0},u(c?"testForm.testResources":"testForm.assignmentResources")),r.a.createElement(ba.a,{name:"materialsDisplay",component:Gs,label:u("testForm.fields.section"),variant:"outlined",options:I,disabled:!(!B&&!M)}),w&&r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},u("testForm.text")),r.a.createElement(ba.a,{name:"readingMaterial.".concat(w,".fileUpload"),options:k,component:Ca,type:"checkbox"}),(T[w]||{}).fileUpload&&r.a.createElement(qe,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ba.a,{name:"readingMaterial.".concat(w,".file"),onChangeFile:function(e){s("readingMaterial.".concat(w,".loadedPDF"),e)},fullSizeImage:!0,index:w,loadedFile:(T[w]||{}).loadedPDF,uploadButtonText:u("testForm.buttons.selectDoc"),component:Va,mimeTypesAllowed:"image/jpeg, application/pdf, .doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",extensionsAllowed:["jpeg","jpg","jfif","pdf","docx","doc"]})),(T[w]||{}).loadedPDF&&"pdf"===v&&r.a.createElement(ji,{url:(T[w]||{}).loadedPDF,index:w})),!(T[w]||{}).fileUpload&&r.a.createElement(qe,null,P.map((function(e){return e===w&&r.a.createElement(ba.a,{key:w,name:"readingMaterial.".concat(w,".content"),component:zr,reduxForm:"testForm",field:"readingMaterial.".concat(w,".content"),path:l})}))),r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},u("testForm.audio")),r.a.createElement(ba.a,{name:"audioMaterial.".concat(w,".fileUpload"),options:S,component:Ca,type:"checkbox"})),w&&r.a.createElement(qe,null,(y[w]||{}).fileUpload?r.a.createElement(qe,null,r.a.createElement("div",{style:{display:"flex",textAlign:"center",justifyContent:"space-between",margin:"auto",width:"60%"}},r.a.createElement(ba.a,(t={name:"audioMaterial.".concat(w,".audioFile"),component:Va,uploadButtonText:u("testForm.buttons.selectAudioFile"),index:"materialSectionAudio[".concat(w,"]"),onChangeFile:function(e){s("audioMaterial.".concat(w,".recordedBlob"),e)},loadedFile:N,mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]},Object(yo.a)(t,"mimeTypesAllowed","audio/*"),Object(yo.a)(t,"extensionsAllowed",["mp3","wav","wma"]),t)),r.a.createElement(Ri,{onPreview:function(){L&&Yo("audioMaterial[".concat(w,"]"))},id:"audioMaterial[".concat(w,"]"),audioSource:L})),r.a.createElement(Ni,{onClear:function(){return R(null,null,w)}})):r.a.createElement(Li,{onStart:function(){var e=Object(Ba.a)(Pa.a.mark((function e(t){var n;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$o(t,null,w,null,function(){var e=Object(Ba.a)(Pa.a.mark((function e(t){var n;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,R(n.blob,n.file,w);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:n=e.t0,j(n.recorder,n.recordingTimeout,w,n.isRecording);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onStop:function(){var e=Object(Ba.a)(Pa.a.mark((function e(t){var n;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vo(t,null,w,O,C);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:n=e.t0,R(n.blob,n.file,w);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPreview:function(){Yo("audioMaterial[".concat(w,"]"))},onClear:function(){return R(null,null,w)},id:"audioMaterial[".concat(w,"]"),recordDisabled:N,audioSource:L,isMicAlert:p})))}))),Bi=Object(c.b)((function(e,t){return{formValues:Object(nt.a)("testForm")(e),errors:Object(Pt.a)("testForm")(e),editing:e.common.editing}}),(function(e){return{changeField:function(t,n){e(Object(Bt.a)("testForm",t,n))}}}))(Pi),Mi=n(50),qi=n.n(Mi),Ui=function(e){var t=e.input,n=e.label,a=e.type,o=e.meta,s=o.touched,i=o.error;return r.a.createElement("div",null,r.a.createElement("label",null,n),r.a.createElement("div",null,r.a.createElement("input",Object.assign({className:[qi.a.InputField,qi.a.FullWidth].join(" ")},t,{placeholder:n,type:a})),s&&i&&r.a.createElement("span",null,i)))},Qi=function(e){var t=e.clearAnswers,n=e.questionIndex,a=e.fields,o=e.meta.error,s=e.t;return r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"subtitle1",gutterBottom:!0},s("testForm.writeAnswers")),r.a.createElement($r.a,null,a.map((function(e,o){return r.a.createElement(Yr.a,{key:o},r.a.createElement(pt.a,{onClick:function(){a.remove(o),t(n)},color:"secondary",startIcon:r.a.createElement(Ya.a,null)},""),r.a.createElement(ba.a,{name:e,type:"text",component:Ui,label:""}))})),o&&r.a.createElement(Yr.a,{className:"error"},o)),r.a.createElement(pt.a,{fullWidth:!0,color:"primary",onClick:function(){return a.push()}},s("testForm.buttons.addAnswer")))},Hi=function(e){var t=e.fields,n=e.meta,a=n.error,o=n.submitFailed,s=e.touchCheckboxes,i=e.clearAnswers,c=e.formValues,l=void 0===c?{}:c,u=e.path,d=e.t;return r.a.createElement("ul",{className:qi.a.TestFormList},t.map((function(e,n){var a=(((l.mcQuestions||[])[n]||{}).answers||[]).map((function(t,n){return{label:"".concat(t||""),value:"".concat(n+1),placement:"start",color:"primary",name:"".concat(e,".correctAnswers")}})),o=r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"subtitle1",gutterBottom:!0},d("testForm.selectCorrectAnswers")),r.a.createElement(ba.a,{name:"".concat(e,".correctAnswers"),component:vi,onChange:function(){return s("".concat(e,".correctAnswers"))},options:a,required:!1,column:!0}));return r.a.createElement("li",{key:n,className:qi.a.QuestionCustomizationContainer},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(d("testForm.question")," ").concat(n+1)),r.a.createElement("div",{className:qi.a.TextEditor},r.a.createElement(ba.a,{name:"".concat(e,".question"),field:"".concat(e,".question"),reduxForm:"testForm",component:zr,index:n,path:u})),r.a.createElement(fr.a,{name:"".concat(e,".answers"),questionIndex:n,clearAnswers:i,component:Qi,t:d}),o,r.a.createElement(ba.a,{name:"".concat(e,".solution"),component:pi,label:d("testForm.fields.solution"),options:{multiline:!0,rows:3,variant:ya.a},textLabel:!0}),r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(ba.a,{name:"".concat(e,".marks"),component:Na,options:{label:d("testForm.fields.marks"),size:"small"}})),r.a.createElement(pt.a,{fullWidth:!0,color:"default",onClick:function(){return t.remove(n)},disabled:1===(l.mcQuestions||[]).length},d("testForm.buttons.removeQuestion")))})),r.a.createElement("li",null,r.a.createElement(pt.a,{color:"default",onClick:function(){return t.push({marks:1})},fullWidth:!0},d("testForm.buttons.addQuestion")),o&&a&&r.a.createElement("span",null,a)))},Gi=Object(Mt.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,enableReinitialize:!1,validate:Mr})((function(e){var t=e.clearAnswers,n=e.formValues,a=void 0===n?{}:n,o=Object(bo.a)(e,["clearAnswers","formValues"]),s=Object(We.a)(),i=s.t,c=(s.i18n,(a.mcQuestions||[]).length);return r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h4",gutterBottom:!0},i("testForm.mcSection")),r.a.createElement(fr.a,{name:"mcQuestions",clearAnswers:t,props:o,formValues:a,component:Hi,t:i}),r.a.createElement(Qs,{index:0,summary:i("testForm.selectQuestion")},r.a.createElement(zs,{questionType:"Multiple-choice questions",selecting:!0,indexToAdd:c})))})),Wi=Object(c.b)((function(e){return{formValues:Object(nt.a)("testForm")(e),initialValues:e.instructorTest.loadedTestFormData}}),(function(e){return{clearAnswers:function(t){e(Object(Bt.a)("testForm","mcQuestions[".concat(t,".correctAnswers]"),[]))},touchCheckboxes:function(t){e(Object(Bt.d)("testForm",t))}}}))(Gi),zi=function(e){var t=e.fields,n=e.meta,a=n.error,o=n.submitFailed,s=e.formValues,i=e.path,c=e.t;return r.a.createElement("ul",{className:qi.a.TestFormList},t.map((function(e,n){return r.a.createElement("li",{className:qi.a.QuestionCustomizationContainer,key:n},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(c("testForm.question")," ").concat(n+1)),r.a.createElement("div",{className:qi.a.TextEditor},r.a.createElement(ba.a,{name:"".concat(e,".question"),field:"".concat(e,".question"),reduxForm:"testForm",component:zr,index:n,path:i})),r.a.createElement(ba.a,{name:"".concat(e,".solution"),component:pi,label:c("testForm.fields.solution"),options:{multiline:!0,rows:3,variant:ya.a},textLabel:!0}),r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(ba.a,{name:"".concat(e,".marks"),component:Na,options:{label:c("testForm.fields.marks"),size:"small"}})),r.a.createElement(pt.a,{onClick:function(){return t.remove(n)},fullWidth:!0,disabled:1===((s||{}).essayQuestions||[]).length},c("testForm.buttons.removeQuestion")))})),r.a.createElement("li",null,r.a.createElement(pt.a,{onClick:function(){return t.push({marks:1})},fullWidth:!0},c("testForm.buttons.addQuestion")),o&&a&&r.a.createElement("span",null,a)))},Vi=Object(Mt.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Mr})((function(e){var t=e.formValues,n=void 0===t?{}:t,a=e.path,o=Object(We.a)().t,s=(n.essayQuestions||[]).length;return r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h4",gutterBottom:!0},o("testForm.essaySection")),r.a.createElement(fr.a,{name:"essayQuestions",component:zi,formValues:n,path:a,t:o}),r.a.createElement(Qs,{index:0,summary:o("testForm.selectQuestion")},r.a.createElement(zs,{questionType:"Essay questions",selecting:!0,indexToAdd:s})))})),$i=Object(c.b)((function(e){return{formValues:Object(nt.a)("testForm")(e),token:e.authentication.token,initialValues:e.instructorTest.loadedTestFormData}}),null)(Vi),Yi=n(144),Ji=n.n(Yi),Ki=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0,r=t.length-e.length;if(t.length!==e.length){var o={marks:1,incorrectAnswerOptions:{incorrectAnswerOne:"",incorrectAnswerTwo:"",incorrectAnswerThree:""},selectableAnswer:!1,audio:!1,browserAudioFile:null,audioFile:null},s={marks:null,answerOptions:{incorrectAnswerThree:null},browserAudioFile:null};if(e.length<t.length){var i=t.findIndex((function(t,n){return!e.includes(t)}));if(t.length>0){if(0!==i){var c=function(e,t,n){return[].concat(Object(Vr.a)(e.slice(0,t)),[n],Object(Vr.a)(e.slice(t)))},l=e.length-1;t.splice.apply(e,[l,0].concat(e));new Array(r);var u=c(n,i,Object(It.a)(Object(It.a)({},o),{},{answer:t[i]})),d=c(a,i,s);return{answersToUpdate:u.map((function(e,n){return Object(It.a)(Object(It.a)({},e),{},{answer:t[n]})})),errorsToUpdate:d}}n.unshift(Object(It.a)(Object(It.a)({},o),{},{answer:t[0]})),a.unshift(s)}}if(e.length>t.length){var m=function(e,t){var n=[];return e.forEach((function(a,r){t.includes(e[r])||n.push(r)})),n},p=m(e,t);if(1===p.length)n.splice(p[0],1),a.splice(p[0],1);else{var f=p[0],g=p.length;n.splice(f,g),a.splice(f,g)}}if(e.length<t.length&&!n){var b=e.length-1;t.splice.apply(e,[b,0].concat(e));var h=new Array(r);n=h.map((function(e){return o})),a=h.map((function(e){return s}))}return{answersToUpdate:n.map((function(e,n){return Object(It.a)(Object(It.a)({},e),{},{answer:t[n]})})),errorsToUpdate:a}}},Zi=n(145),Xi=n.n(Zi),ec=function(e){var t=e.blankIndex,n=e.t,a=e.answers,o=e.meta,s=void 0===o?{}:o,i=e.error;return r.a.createElement(qe,null,r.a.createElement("select",{readOnly:!0,value:"select the correct answer",className:qi.a.SelectField},["select the correct answer","Correct option","Incorrect option 1","Incorrect option 2","Incorrect option 3"].map((function(e,o){var s,i=(a[t]||{}).answerOptions||{};return 0===o&&(s=n("testForm.fields.selectCorrectAnswerInline")),1===o&&(s=(a[t]||{}).answer),2===o&&(s=i.incorrectAnswerOne),3===o&&(s=i.incorrectAnswerTwo),4===o&&(s=i.incorrectAnswerThree),r.a.createElement("option",{key:"".concat(e,"[").concat(o,"]"),className:1===o?qi.a.CorrectAnswerHighlight:null,disabled:!0,value:e},s)}))),r.a.createElement("div",{className:qi.a.flexPositioningEven},r.a.createElement("span",{className:qi.a.errorText},(s.error||i)&&s.touched?s.error||i:""," ")))},tc=function(e){var t=e.source,n=e.id;return r.a.createElement("td",{dangerouslySetInnerHTML:{__html:'\n        <audio id="'.concat(n,'" src="').concat(t,'">\n        </audio>\n        <span class="').concat(es.a.Pointer,'" onClick="(function(){\n        const audio = document.getElementById(\'').concat(n,'\');\n        audio.play()\n        return false;\n        })();return false;" >\n        <i class="fa fa-volume-down"></i>\n        </span>\n        ')}})},nc=n(326),ac=n.n(nc),rc=(n(1109),n(51)),oc=n.n(rc),sc=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(e,a){var r;return Object(jt.a)(this,n),(r=t.call(this,e,a)).handleMicAlert=function(){clearTimeout(r.state.micBlockedWarningTO),r.setState({micBlockedWarning:!0});var e=setTimeout((function(){r.setState({micBlockedWarning:!1})}),5e3);r.setState({micBlockedWarningTO:e})},r.initiateRecording=function(e,t,n,a){if(a){var o=r.props,s=o.changeField,i=o.form,c="fillBlankQuestions.answers";s(i,"".concat(c,".").concat(n,".recordingQuestion"),a),s(i,"".concat(c,".").concat(n,".questionRecorder"),e),s(i,"".concat(c,".").concat(n,".questionRecordingTimeout"),t)}else r.handleMicAlert()},r.setAudioData=function(e,t,n){var a=r.props,o=a.changeField,s=a.touchField,i=a.form,c="fillBlankQuestions.answers";o(i,"".concat(c,".").concat(n,".recordingQuestion"),!1),o(i,"".concat(c,".").concat(n,".browserAudioFile"),e),o(i,"".concat(c,".").concat(n,".audioFile"),t),s(i,"".concat(c,".").concat(n,".browserAudioFile"))},r.state={previousCorrectAnswers:[],currentCorrectAnswers:[],previousAnswers:[],currentAnswers:[],blockSync:!1,micBlockedWarning:!1,micBlockedWarningTO:null},r}return Object(Rt.a)(n,[{key:"componentDidMount",value:function(){var e=Mr(this.props.formValues);this.props.updateErrors("testForm",e)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.formValues,n=void 0===t?{}:t,a=e.formValues,r=void 0===a?{}:a,o=n.fillBlankQuestions||[],s=r.fillBlankQuestions||[];this.setState({previousAnswers:o.answers,currentAnswers:s.answers,previousCorrectAnswers:o.correctAnswers,currentCorrectAnswers:s.correctAnswers})}},{key:"componentDidUpdate",value:function(){this.state.blockSync&&this.setState({blockSync:!1})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.state.micBlockedWarningTO)}},{key:"getRecordingTimeoutQuestion",value:function(e){return(((this.props.formValues.fillBlankQuestions||[]).answers||[])[e]||{}).questionRecordingTimeout}},{key:"getRecorderFromClickQuestion",value:function(e){return(((this.props.formValues.fillBlankQuestions||[]).answers||[])[e]||{}).questionRecorder}},{key:"touchIncorrectAnswerFields",value:function(e){var t=this,n="fillBlankQuestions.answers.".concat(e,".answerOptions.incorrectAnswer");["One","Two","Three"].forEach((function(e){t.props.touchField(t.props.form,n+e)}))}},{key:"handleBlockSync",value:function(e){this.setState({blockSync:!!e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.formValues,a=void 0===n?{}:n,o=t.formErrors,s=void 0===o?{}:o,i=t.touchField,c=t.changeField,l=t.updateErrors,u=t.form,d=t.isModal,m=t.path,p=t.t,f=(a.fillBlankQuestions||{}).answers||[],g=(s.fillBlankQuestions||{}).answers||[];if((this.state.previousCorrectAnswers||[]).findIndex((function(t,n){return t!==e.state.currentCorrectAnswers[n]?t:null}))>-1){var b=(this.state.currentAnswers||[]).map((function(t,n){return Object(It.a)(Object(It.a)({},t),{},{answer:e.state.currentCorrectAnswers[n]})}));c(u,"fillBlankQuestions.answers",b)}var h=(a.fillBlankQuestions||{}).correctAnswers;if((this.state.currentCorrectAnswers||[]).length!==(this.state.previousCorrectAnswers||[]).length&&!this.state.blockSync){var E=Ki(this.state.previousCorrectAnswers,h,this.state.currentAnswers,g),v=E.answersToUpdate,y=E.errorsToUpdate;c(u,"fillBlankQuestions.answers",v),l(u,Object(It.a)(Object(It.a)({},s),{},{fillBlankQuestions:{question:(s.fillBlankQuestions||{}).question,answers:y}})),this.state.currentCorrectAnswers.forEach((function(t,n){var a={fillBlankQuestions:{answers:v}};t.marks||i("fillBlankQuestions.answers.".concat(n,".marks"));var r=Mr(a);((r.fillBlankQuestions.answers[n]||{}).answerOptions||{}).incorrectAnswerThree&&e.touchIncorrectAnswerFields(n),(r.fillBlankQuestions.answers[n]||{}).browserAudioFile&&i("fillBlankQuestions.answers.".concat(n,".browserAudioFile"))}))}var T=(a.fillBlankQuestions||{}).question||"",k=T.match(/<mark [^>]+>(.*?)<\/mark>/g),S=Xi()(T,/<mark [^>]+>(.*?)<\/mark>/g,(function(e,t){var n=t/2-.5,a=((f||[])[n]||{}).answer,o=(f[n]||{}).browserAudioFile,s=((f||[])[n]||{}).selectableAnswer;return!0===s?r.a.createElement(qe,{key:e+n},r.a.createElement("span",{className:qi.a.BlankPreview},n+1," "),(f[n]||{}).audio&&o&&r.a.createElement(tc,{id:"audio[".concat(n,"]"),source:o}),r.a.createElement(ec,{blankIndex:n,answers:f,t:p})):!1===s?r.a.createElement(qe,{key:e+n},r.a.createElement("span",{className:qi.a.Inline},r.a.createElement("span",{className:qi.a.BlankPreview},n+1," "),(f[n]||{}).audio&&o&&r.a.createElement(tc,{id:"audio[".concat(n,"]"),source:o}),r.a.createElement("input",{readOnly:!0,type:"text",className:qi.a.InputField,value:"".concat(ac()(a))}))):void 0})),w=[];S.forEach((function(e,t){"string"===typeof e?w.push(e):w.push(Ji.a.renderToString(e))}));var O=(w||[]).join("").replace(/<img/g,'<img style="width:100%"'),C=(k||[]).map((function(e){return e.replace(/<[^>]+>/g,"")}));return c(u,"fillBlankQuestions.correctAnswers",C),r.a.createElement(qe,null,"testForm"===u&&r.a.createElement(He.a,{variant:"h4",gutterBottom:!0,paragraph:!0},p("testForm.fillblanksSection")),r.a.createElement("div",{className:qi.a.TextEditor},r.a.createElement(ba.a,{component:zr,isModal:d,name:"fillBlankQuestions.question",label:p("testForm.fillblanksText"),field:"fillBlankQuestions.question",reduxForm:u,error:(s.fillBlankQuestions||{}).question,path:m,blockFillblankSynchronization:this.state.blockSync})),O&&r.a.createElement("div",{className:qi.a.PreviewContainer},r.a.createElement(He.a,{paragraph:!0,variant:"h6"},p("testForm.preview")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:oc.a.sanitize(O,{ALLOW_UNKNOWN_PROTOCOLS:!0,ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}})),"testForm"===u&&r.a.createElement(Qs,{summary:p("testForm.textFromQuestionbank"),index:0},r.a.createElement(zs,{questionType:"Fill-in-the-blanks questions",selecting:!0,onBlockSync:function(){return e.handleBlockSync(!0)}})),f.length>0?r.a.createElement(He.a,{style:{marginTop:20},variant:"h6",gutterBottom:!0,paragraph:!0},p("testForm.customizeAnswers")):"",r.a.createElement("ul",{className:qi.a.TestFormList},f.map((function(t,n){var a=r.a.createElement(qe,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},r.a.createElement(ba.a,{name:"fillBlankQuestions.answers.".concat(n,".audioFile"),component:Va,uploadButtonText:p("testForm.buttons.selectAudioFile"),index:n,onChangeFile:function(e,t){c(u,"fillBlankQuestions.answers.".concat(t,".browserAudioFile"),e)},mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]})),r.a.createElement(ba.a,{component:Li,name:"fillBlankQuestions.answers.".concat(n,".browserAudioFile"),onStart:function(){var t=Object(Ba.a)(Pa.a.mark((function t(a){var r;return Pa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$o(a,null,n,null,function(){var t=Object(Ba.a)(Pa.a.mark((function t(a){var r;return Pa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a;case 2:r=t.sent,e.setAudioData(r.blob,r.file,n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:r=t.t0,e.initiateRecording(r.recorder,r.recordingTimeout,n,r.isRecording);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onStop:function(){var t=Object(Ba.a)(Pa.a.mark((function t(a){var r;return Pa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Vo(a,null,n,e.getRecordingTimeoutQuestion(n),e.getRecorderFromClickQuestion(n));case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:r=t.t0,e.setAudioData(r.blob,r.file,n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onPreview:function(){Yo("audioQuestion[".concat(n,"]"))},onClear:function(){return e.setAudioData(null,null,n)},id:"audioQuestion[".concat(n,"]"),recordDisabled:(f[n]||{}).recordingQuestion,audioSource:(f[n]||{}).browserAudioFile,isMicAlert:e.state.micBlockedWarning}));return r.a.createElement("li",{key:"blanks[".concat(n,"]")},r.a.createElement("div",{className:qi.a.QuestionCustomizationContainer},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(p("testForm.blank")," ").concat(n+1)),r.a.createElement(He.a,{className:qi.a.CorrectAnswer,variant:"body1",gutterBottom:!0,paragraph:!0},"".concat(p("testForm.correctAnswer"),": "),f[n]?f[n].answer.replace(/&nbsp;/g," "):""),r.a.createElement(ba.a,{name:"fillBlankQuestions.answers.".concat(n,".selectableAnswer"),options:{checked:!1,label:p("testForm.fields.selectableAnswer")},component:Ca,type:"checkbox"}),r.a.createElement(ba.a,{name:"fillBlankQuestions.answers.".concat(n,".audio"),type:"checkbox",options:{checked:!1,label:p("testForm.audio")},component:Ca}),f[n].selectableAnswer&&r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"body1",gutterBottom:!0,paragraph:!0},p("testForm.incorrectAnswerOptions")),["incorrectAnswerOne","incorrectAnswerTwo","incorrectAnswerThree"].map((function(t,a){return r.a.createElement("div",{key:"".concat(t,"[").concat(a,"]"),className:qi.a.TextField},r.a.createElement(ba.a,{wait:250,component:ka,name:"fillBlankQuestions.answers.".concat(n,".answerOptions.").concat(t),label:"".concat(p("testForm.incorrectOption")," ").concat(a+1),margin:"dense",variant:"outlined",size:"small",simple:!0,width:"95%",debounce:!0,onChange:function(){return e.touchIncorrectAnswerFields(a)}}))}))),(f[n]||{}).audio?a:null,"testForm"===u&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(ba.a,{name:"fillBlankQuestions.answers.".concat(n,".marks"),component:Na,error:(g[n]||{}).marks,options:{label:p("testForm.fields.marks"),size:"small"}}))))}))))}}]),n}(a.Component),ic=Object(Mt.a)({destroyOnUnmount:!1,forceUnregisterOnUnmount:!1,validate:Mr})(sc),cc=Object(c.b)((function(e,t){var n=t.form;return{formValues:Object(nt.a)(n)(e),formErrors:Object(Pt.a)(n)(e)}}),(function(e){return{touchField:function(t,n){e(Object(Bt.d)(t,n))},changeField:function(t,n,a){e(Object(Bt.a)(t,n,a))},updateErrors:function(t,n){e(Object(Bt.e)(t,n))}}}))(Object(Qa.a)("common")(ic)),lc=function(e){var t=e.changeField,n=e.makeAudioFieldTouched,o=e.fields,s=e.meta,i=e.formValues,c=void 0===i?{}:i,l=e.path,u=e.t,d=Object(a.useState)(!1),m=Object(vo.a)(d,2),p=m[0],f=m[1],g=Object(a.useState)(null),b=Object(vo.a)(g,2),h=b[0],E=b[1];Object(a.useEffect)((function(){return function(){clearTimeout(h)}}),[]);var v={label:u("testForm.fields.audioQuestion"),checked:!1},y={label:u("testForm.fields.audioAnswer"),checked:!1},T=function(e,n,a,r,o){o?("question"===r&&(t("speakingQuestions.".concat(a,".isRecordingQuestion"),o),t("speakingQuestions.".concat(a,".questionRecorder"),e),t("speakingQuestions.".concat(a,".questionRecordingTimeout"),n)),"answer"===r&&(t("speakingQuestions.".concat(a,".isRecording"),!0),t("speakingQuestions.".concat(a,".recorder"),e),t("speakingQuestions.".concat(a,".recordingTimeout"),n))):function(){clearTimeout(h),f(!0);var e=setTimeout((function(){f(!1)}),5e3);E(e)}()},k=function(e,a,r,o){"question"===o&&(t("speakingQuestions.".concat(r,".isRecordingQuestion"),!1),t("speakingQuestions.".concat(r,".questionRecordedBlob"),e),t("speakingQuestions.".concat(r,".audioFileQuestion"),a),n("speakingQuestions.".concat(r,".questionRecordedBlob"))),"answer"===o&&(t("speakingQuestions.".concat(r,".isRecording"),!1),t("speakingQuestions.".concat(r,".recordedBlob"),e),t("speakingQuestions.".concat(r,".audioFile"),a),n("speakingQuestions.".concat(r,".recordedBlob")))};return r.a.createElement("ul",{className:qi.a.TestFormList},o.map((function(e,n){var a,s,i=(c.speakingQuestions||[])[n]||{},d=i.recordingTimeout,m=i.questionRecordingTimeout,f=i.recorder,g=i.questionRecorder,b=i.questionRecordedBlob,h=i.recordedBlob,E=i.isRecordingQuestion,S=i.isRecording,w=["question","answer"].map((function(e,t){return r.a.createElement(ba.a,{component:Li,name:"speakingQuestions.".concat(n,".").concat(0===t?"questionRecordedBlob":"recordedBlob"),onStart:function(){var t=Object(Ba.a)(Pa.a.mark((function t(a){var r;return Pa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$o(a,e,n,null,function(){var t=Object(Ba.a)(Pa.a.mark((function t(a){var r;return Pa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a;case 2:r=t.sent,k(r.blob,r.file,n,e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:r=t.t0,T(r.recorder,r.recordingTimeout,n,e,r.isRecording);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onStop:function(){var a=Object(Ba.a)(Pa.a.mark((function a(r){var o;return Pa.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Vo(r,null,n,0===t?m:d,0===t?g:f);case 2:if(a.t0=a.sent,a.t0){a.next=5;break}a.t0={};case 5:o=a.t0,k(o.blob,o.file,n,e);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),onPreview:function(){Yo(0===t?"audioQuestion[".concat(n,"]"):"audioAnswer[".concat(n,"]"))},onClear:function(){return k(null,null,n,e)},id:0===t?"audioQuestion[".concat(n,"]"):"audioAnswer[".concat(n,"]"),recordDisabled:0===t?E:S,audioSource:0===t?b:h,isMicAlert:p})})),O=["question","answer"].map((function(e){return r.a.createElement(ba.a,{name:"speakingQuestions.".concat(n,".").concat("question"===e?"audioQuestion":"audioAnswer"),options:"question"===e?v:y,component:Ca,type:"checkbox"})}));return r.a.createElement("li",{key:n,className:qi.a.QuestionCustomizationContainer},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(u("testForm.question")," ").concat(n+1)),O[0],i.audioQuestion?r.a.createElement(qe,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ba.a,(a={name:"speakingQuestions.".concat(n,".audioFileQuestion"),index:"q".concat(n),onChangeFile:function(e){t("speakingQuestions.".concat(n,".questionRecordedBlob"),e)},uploadButtonText:u("testForm.buttons.selectAudioFile"),component:Va},Object(yo.a)(a,"uploadButtonText",u("testForm.buttons.selectAudioFile")),Object(yo.a)(a,"mimeTypesAllowed","audio/*"),Object(yo.a)(a,"extensionsAllowed",["mp3","wav","wma"]),Object(yo.a)(a,"loadedFile",i.questionRecordedBlob),a))),w[0]):r.a.createElement("div",{className:qi.a.TextEditor},r.a.createElement(ba.a,{name:"".concat(e,".question"),field:"".concat(e,".question"),reduxForm:"testForm",component:zr,path:l})),r.a.createElement("div",null,O[1],!0===i.audioAnswer&&r.a.createElement(qe,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ba.a,(s={name:"speakingQuestions.".concat(n,".audioFile"),uploadButtonText:u("testForm.buttons.selectAudioFile"),index:"a".concat(n),onChangeFile:function(e){t("speakingQuestions.".concat(n,".recordedBlob"),e)}},Object(yo.a)(s,"uploadButtonText",u("testForm.buttons.selectAudioFile")),Object(yo.a)(s,"component",Va),Object(yo.a)(s,"mimeTypesAllowed","audio/*"),Object(yo.a)(s,"extensionsAllowed",["mp3","wav","wma"]),Object(yo.a)(s,"loadedFile",i.recordedBlob),s))),w[1])),r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(ba.a,{name:"".concat(e,".marks"),component:Na,options:{label:u("testForm.fields.marks"),size:"small"}})),r.a.createElement(pt.a,{onClick:function(){return o.remove(n)},fullWidth:!0,disabled:1===(c.speakingQuestions||[]).length},u("testForm.buttons.removeQuestion")))})),r.a.createElement("li",null,r.a.createElement(pt.a,{onClick:function(){return o.push({marks:1})},fullWidth:!0},u("testForm.buttons.addQuestion")),s.submitFailed&&s.error&&r.a.createElement("span",null,s.error)))},uc=Object(Mt.a)({form:"testForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Mr})((function(e){var t=e.formValues,n=void 0===t?{}:t,a=Object(bo.a)(e,["formValues"]),o=Object(We.a)().t,s=(n.speakingQuestions||[]).length;return r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h4",gutterBottom:!0,paragraph:!0},o("testForm.speakingSection")),r.a.createElement(fr.a,{name:"speakingQuestions",formValues:n,component:lc,props:a,t:o}),r.a.createElement(Qs,{index:0,summary:o("testForm.selectQuestion")},r.a.createElement(zs,{questionType:"Speaking questions",selecting:!0,indexToAdd:s})))})),dc=Object(c.b)((function(e){return{formValues:Object(nt.a)("testForm")(e),initialValues:e.instructorTest.loadedTestFormData}}),(function(e){return{changeField:function(t,n){e(Object(Bt.a)("testForm",t,n))},makeAudioFieldTouched:function(t){return e(Object(Bt.d)("testForm",t))}}}))(uc),mc=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(e){var a;return Object(jt.a)(this,n),(a=t.call(this,e)).handleWindowClose=function(e){e.preventDefault(),a.state.isUpdating||a.handleDeleteUnsavedImages()},a.handleDeleteUnsavedImages=function(){var e=mo(a.props.questions,"courseQuestions")||[],t=mo(a.props.formValues,"testForm")||[],n=[];t.forEach((function(e){-1===a.state.initialUrls.findIndex((function(t){return t===e}))&&n.push(e)})),n.filter((function(t){return e.includes(t)?null:t})).filter((function(e){return e})).length>0&&a.props.deleteImg(n,a.props.token)},a.closeModalHandler=function(){a.setState({modalOpen:!1})},a.openModalHandler=function(){a.setState({modalOpen:!0})},a.onSubmit=function(){var e=a.props,t=e.addNewTest,n=e.formValues,r=e.token,o=e.editing,s=e.course,i=e.userId,c=e.initialValues,l=e.coursePanel,u=e.questions,d=e.students;e.t;if(a.checkPageValidity()){var m=[];d.forEach((function(e){e.testResults.forEach((function(e){m.push(e.test)}))})),o&&m.includes(c._id)?a.setState({isBlockedByStudent:!0}):a.setState({isUpdating:!0},(function(){var e=mo(u,"courseQuestions")||[],d=mo(n,"testForm")||[],m=(a.state.initialUrls||[]).filter((function(e){return d.includes(e)?null:e})).filter((function(t){return e.includes(t)?null:t}));t(n,r,o,s._id,i,o?c._id:a.state.newTestId,"test"===l?"test":"assignment",m)}))}},a.nextPage=function(){a.setState((function(e){return{page:e.page+1}}))},a.previousPage=function(){a.setState((function(e){return{page:e.page-1}}))},a.checkPageValidity=function(e){var t=a.props,n=t.touchField,r=(t.testForm,t.formValues),o=t.coursePanel,s=t.testFormSection,i=Mr(r),c="test"===o?"test":"assignment";if(1===e&&["".concat(c,"Name"),"".concat(c,"Weight"),"latePenalty","lateDaysAllowed","testTime","test"===o?"testType":null].forEach((function(e){n(e)})),2===e&&["mcSectionWeight","essaySectionWeight","speakingSectionWeight","fillBlankSectionWeight","testSections"].forEach((function(e){n(e)})),3===e&&(n("dueDate"),n("gradeReleaseDate"),n("availableOnDate")),4===e){["multipleChoice","essay","speaking","fillInTheBlanks","test"].forEach((function(e){n("readingMaterial.".concat(e,".file")),n("audioMaterial.".concat(e,".audioFile"))}))}return"mc"===s&&Array.from(r.mcQuestions||[]).forEach((function(e,t){n("mcQuestions.".concat(t,".question")),n("mcQuestions.".concat(t,".correctAnswers"))})),"essay"===s&&Array.from(r.essayQuestions||[]).forEach((function(e,t){n("essayQuestions.".concat(t,".question"))})),"speaking"===s&&Array.from(r.speakingQuestions||[]).forEach((function(e,t){n("speakingQuestions.".concat(t,".question")),n("speakingQuestions.".concat(t,".questionRecordedBlob")),n("speakingQuestions.".concat(t,".recordedBlob"))})),"fillblanks"===s&&Array.from(a.state.latestFillBlankAnswers).forEach((function(e,t){n("fillBlankQuestions.answers.".concat(t,".browserAudioFile")),n("fillBlankQuestions.answers.".concat(t,".audioFile")),n("fillBlankQuestions.answers.".concat(t,".answerOptions.incorrectAnswerThree"))})),1===e&&i.infoPageOneError||2===e&&i.infoPageTwoError||3===e&&i.infoPageThreeError||4===e&&i.infoPageFourError||"mc"===s&&i.mcSectionPageError||"essay"===s&&i.essayPageError||"speaking"===s&&i.speakingPageError?(a.setState({isValid:!1}),!1):"fillblanks"!==s||!i.fillblankPageError||(a.setState({isValid:!1}),!1)},a.getButtons=function(e,t,n,o,s){var i=a.props.t;return r.a.createElement(qe,null,r.a.createElement("div",{className:1===e?qi.a.flexPositioningEnd:qi.a.flexPositioningSpaceBetween},1!==e&&r.a.createElement(pt.a,{color:"primary",onClick:function(){a.previousPage(),a.resetFormValidity()},startIcon:r.a.createElement(ga.a,null)},""),!(t===e)&&r.a.createElement(pt.a,{color:s?"secondary":"primary",onClick:function(){a.checkPageValidity(e)&&(a.nextPage(),a.resetFormValidity())},startIcon:r.a.createElement(pa.a,null)},"")),r.a.createElement("div",{className:qi.a.flexPositioningEven},t===e&&!n&&r.a.createElement(Js,{fullWidth:!0,isError:!(!s&&!a.state.isBlockedByStudent),clicked:a.onSubmit},i(o?"testForm.buttons.update":"testForm.buttons.publish"))))},a.resetFormValidity=function(){a.setState((function(e){if(e.page!==a.state.page)return{isValid:!0}}))},a.state={page:1,modalOpen:!1,initialUrls:[],latestFillBlankAnswers:[],newTestId:null,isValid:!0,isUpdating:!1,isBlockedByStudent:!1},a}return Object(Rt.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.handleWindowClose);var e=mo(this.props.initialValues,"testForm");this.setState({initialUrls:e,newTestId:this.props.editing?null:(new lo.a.ObjectId).toHexString()})}},{key:"componentWillReceiveProps",value:function(e){var t=((e.formValues||{}).fillBlankQuestions||{}).answers;this.setState({latestFillBlankAnswers:t})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.handleWindowClose),this.state.isUpdating||this.handleDeleteUnsavedImages(),this.props.clearTestForm()}},{key:"render",value:function(){var e,t=this.props,n=(t.testForm,t.setTestSection),a=t.questions,o=t.setQuestionEditing,s=t.addQuestionToTest,i=t.editing,c=t.loading,l=t.coursePanel,u=t.course,d=t.formValues,m=void 0===d?{}:d,p=t.formErrors,f=t.testFormSection,g=t.initialValues,b=t.t,h=this.state.isValid||!p.infoPageOneError&&"info1"===f||!p.infoPageTwoError&&"info2"===f||!p.infoPageThreeError&&"info3"===f||!p.infoPageFourError&&"info4"===f||!p.mcSectionPageError&&"mc"===f||!p.essayPageError&&"essay"===f||!p.speakingPageError&&"speaking"===f||!p.fillblankPageError&&"fillblanks"===f||!1!==p.fillblankPageError&&!0!==p.fillblankPageError&&"fillblanks"===f,E="test"===l,v=m.testSections||[],y=v.find((function(e){return"mc"===e})),T=v.find((function(e){return"essay"===e})),k=v.find((function(e){return"fillblanks"===e})),S=v.find((function(e){return"speaking"===e})),w=v.length+4,O="mc"===y?6:5;"mc"===y&&"essay"===T&&(e=7),"mc"!==y&&"essay"===T&&(e=6),"mc"===y&&"essay"!==T&&(e=6),"mc"!==y&&"essay"!==T&&(e=5);var C=w,x=this.state,A=x.page,F=x.newTestId;A>=1&&A<5&&n("info".concat(A)),y&&5===A&&n("mc"),A===O&&T&&n("essay"),A===e&&S&&n("speaking"),A===C&&k&&n("fillblanks");var D="courses/".concat(u._id,"/tests/").concat(i?m._id:F);return r.a.createElement("div",{className:qi.a.Background},r.a.createElement(Xe,{active:c,transparent:!0}),r.a.createElement(co,{activeStep:this.state.page-1,steps:w+1,progress:!0}),r.a.createElement("div",{style:{paddingTop:"20px"}},1===A&&r.a.createElement(bi,{isTest:E}),2===A&&r.a.createElement(ki,{isTest:E}),3===A&&r.a.createElement(wi,{isTest:E}),4===A&&r.a.createElement(Bi,{path:D,isTest:E}),5===A&&y&&r.a.createElement(Wi,{path:D,questions:a,setQuestionEditing:function(e){return o(e)},addQuestionToTest:function(e,t){return s(e,t)}}),A===O&&T&&r.a.createElement($i,{path:D,questions:a,setQuestionEditing:function(e){return o(e)},addQuestionToTest:function(e,t){return s(e,t)}}),A===e&&S&&r.a.createElement(dc,{path:D,questions:a,setQuestionEditing:function(e){return o(e)},addQuestionToTest:function(e,t){return s(e,t)}}),A===C&&k&&r.a.createElement(cc,{path:D,form:"testForm",questions:a,setQuestionEditing:function(e){return o(e)},addQuestionToTest:function(e,t){return s(e,t)}})),!h&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},r.a.createElement(He.a,{color:"error"},b("testForm.errors.correctForm"))),this.state.isBlockedByStudent&&i&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},r.a.createElement(He.a,{variant:"caption",color:"error"},g.assignment?b("testForm.errors.studentTakingAssignment"):b("testForm.errors.studentTakingTest"))),this.getButtons(A,w,null,i,!h))}}]),n}(a.Component),pc=Object(Mt.a)({form:"testForm",enableReinitialize:!1,validate:Mr,destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})(mc),fc=Object(c.b)((function(e){var t=ua.t("testForm.fillblanksSectionDefaultText"),n=e.common.selectedCourse,a=e.instructorTest.loadedTestFormData,r=(n.tests||[]).filter((function(e){return!e.assignment})),o=(n.tests||[]).filter((function(e){return e.assignment})),s=e.common.configuration.instructorFileSizeLimit,i={instructorFileSizeLimit:s,tests:r,assignments:o,course:n,published:!0,isGradeIncluded:!0,passingRequired:!1,assignment:"assignment"===e.common.coursePanel||null,materialsDisplay:"test",equalSectionWeight:!0,mcQuestions:((a||{}).mcQuestions||[]).length>0?(a||{}).mcQuestions:[{marks:1,answers:["".concat(ua.t("testForm.fields.option")," 1"),"".concat(ua.t("testForm.fields.option")," 2")],correctAnswers:["1"]}],essayQuestions:((a||{}).essayQuestions||[]).length>0?(a||{}).essayQuestions:[{marks:1}],speakingQuestions:((a||{}).speakingQuestions||[]).length>0?(a||{}).speakingQuestions:[{marks:1}],fillBlankQuestions:((a||{}).fillBlankQuestions||{}).question?(a||{}).fillBlankQuestions:{question:t,answers:[{marks:1,selectableAnswer:!1,answer:"piece of text"}],correctAnswers:["piece of text"]}},c=(a||{}).testSections||[],l=[];c.forEach((function(e){"mc"===e&&l.push("multipleChoice"),"essay"===e&&l.push("essay"),"speaking"===e&&l.push("speaking"),"fillblanks"===e&&l.push("fillInTheBlanks")}));var u=l.includes("fillInTheBlanks"),d=e.common.editing;return{formValues:Object(nt.a)("testForm")(e),formErrors:Object(Pt.a)("testForm")(e),token:e.authentication.token,userId:e.authentication.userId,initialValues:d?Object(It.a)(Object(It.a)({},a),{},{instructorFileSizeLimit:s,tests:r,fillBlankQuestions:u?a.fillBlankQuestions:{question:t,answers:[{marks:1,selectableAnswer:!1,answer:"piece of text"}],correctAnswers:["piece of text"]},assignments:o,course:n,materialsDisplay:l[0]||"test"}):i,editing:e.common.editing,course:e.common.selectedCourse,testForm:e.form.testForm,testFormSection:e.instructorTest.testFormSection,section:e.instructorTest.testSection,coursePanel:e.common.coursePanel,questions:e.instructorQuestion.questionBank,loading:e.instructorTest.loading,students:e.common.students}}),(function(e){return{addNewTest:function(t,n,a,r,o,s,i,c){e(function(e,t,n,a,r,o,s,i){return{type:"CREATE_UPDATE_TEST_START",payload:{formData:e,token:t,editing:n,courseId:a,instructorId:r,testId:o,formType:s,filesToDelete:i}}}(t,n,a,r,o,s,i,c))},clearTestForm:function(){return e({type:"CLEAR_LOADED_INSTRUCTOR_DATA"})},setTestSection:function(t){return e({type:"SET_TEST_FORM_SECTION",testSection:t})},touchField:function(t){e(Object(Bt.d)("testForm",t))},deleteImg:function(t,n){e(ge(t),n)}}}))(Object(Qa.a)("common")(pc)),gc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={slides:[],isValid:!0};e.lessonName&&(e.lessonName||"").trim()||(t.isValid=!1,t.lessonName=ua.t("lessonForm.errors.required")),Array.from(e.lessons||[]).forEach((function(n){e._id!==n._id&&(n.lessonName||"").toLowerCase().trim()===(e.lessonName||"").toLowerCase().trim()&&(t.isValid=!1,t.lessonName=ua.t("lessonForm.errors.noDuplicateLessonNames"))}));var n=parseInt((e.course||{}).courseStartDate),a=parseInt((e.course||{}).courseEndDate),r=new Date(e.availableOnDate).getTime();return!(n&&a&&r)||r>n&&r<a||(t.availableOnDate=ua.t("lessonForm.errors.availableOnDateInCourseDuration"),t.isValid=!1),t.slides=Array.from(e.slides||{}).map((function(n){var a={};return n.slideContent||n.videoContent||(t.isValid=!1,a.slideContent=ua.t("lessonForm.errors.required")),!n.loadedVideo&&n.videoContent&&(t.isValid=!1,a.videoFile=ua.t("lessonForm.errors.uploadOrDisable")),n.audioFile instanceof File&&n.audioUpload&&(n.audioFile||{}).size>1e3*e.instructorFileSizeLimit*1e3&&(t.isValid=!1,a.audioFile="".concat(ua.t("lessonForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),n.videoFile instanceof File&&n.videoContent&&(n.videoFile||{}).size>1e3*e.instructorFileSizeLimit*1e3&&(t.isValid=!1,a.videoFile="".concat(ua.t("lessonForm.errors.videoCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),a.videoFile||a.audioFile||a.slideContent?a:null})),t},bc=n(231),hc=n.n(bc),Ec=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(e){var a;return Object(jt.a)(this,n),(a=t.call(this,e)).handleWindowClose=function(e){e.preventDefault(),a.state.isUpdating||a.handleDeleteUnsavedImages()},a.handleDeleteUnsavedImages=function(){var e=mo(a.props.formValues.values,"lessonForm"),t=[];(e||[]).forEach((function(e){-1===a.state.initialUrls.findIndex((function(t){return t===e}))&&t.push(e)})),t.length>0&&a.props.deleteImg(t,a.props.token)},a.checkPageValidity=function(){var e=a.props,t=e.formErrors,n=e.touchField;if(((e.formValues.values||{}).slides||[]).forEach((function(e,t){n("slides.".concat(t,".slideContent")),n("slides.".concat(t,".videoFile")),n("slides.".concat(t,".audioFile"))})),n("availableOnDate"),n("lessonName"),t.isValid)return!0},a.onSubmit=function(){var e=a.props,t=e.addNewLesson,n=e.editing,r=e.token,o=e.course,s=(e.changeTab,e.formValues);if(a.checkPageValidity()){var i=mo(s.values,"lessonForm"),c=(a.state.initialUrls||[]).filter((function(e){return i.includes(e)?null:e}));a.setState({isUpdating:!0},(function(){t(n?s.values:Object(It.a)(Object(It.a)({},s.values),{},{_id:a.state.newLessonId}),r,n,o._id,c)}))}else a.setState({isValid:!1})},a.initiateRecording=function(e,t,n){var r=a.props.changeField;r("slides.".concat(n,".recording"),!0),r("slides.".concat(n,".recorder"),e),r("slides.".concat(n,".recordingTimeout"),t)},a.setAudioData=function(e,t,n){var r=a.props.changeField;r("slides.".concat(n,".recording"),!1),r("slides.".concat(n,".recordedBlob"),e),r("slides.".concat(n,".audioFile"),t)},a.getAudioSource=function(e,t){return((e.slides||[])[t]||{}).recordedBlob},a.getAudioRecording=function(e,t){return((e.slides||[])[t]||{}).recording},a.getRecorderFromClick=function(e,t){return((e.slides||[])[t]||{}).recorder||{}},a.getRecordingTimeout=function(e,t){return((e.slides||[])[t]||{}).recordingTimeout},a.renderSlides=function(e){var t=e.fields,n=e.meta,o=n.error,s=n.submitFailed,i=e.formValues,c=void 0===i?{}:i,l=e.course,u=e.formErrors,d=e.touchField,m=e.t;return r.a.createElement("ul",{className:hc.a.FormList},t.map((function(e,n){var o={label:m("lessonForm.fields.videoContent"),checked:!1},s={label:m("lessonForm.fields.audioFromFile"),checked:!1,disabled:!!((u.slides||[])[n]||{}).audioFile},i=a.props.changeField;return r.a.createElement("li",{className:hc.a.SlideCustomizationContainer,key:n},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(m("lessonForm.slide")," ").concat(n+1)),r.a.createElement(ba.a,{name:"slides.".concat(n,".videoContent"),options:o,component:Ca}),((c.slides||[])[n]||{}).videoContent?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ba.a,{name:"slides.".concat(n,".videoFile"),onChangeFile:function(e){i("slides.".concat(n,".loadedVideo"),e)},uploadButtonText:m("lessonForm.buttons.selectVideoFile"),index:n,component:Va,loadedFile:((c.slides||[])[n]||{}).loadedVideo,onClear:function(){i("slides.".concat(n,".loadedVideo"),null),i("slides.".concat(n,".videoFile"),null)},videoFile:!0,mimeTypesAllowed:"video/*,video/x-matroska",extensionsAllowed:["mp4","avi","mov","mkv","webm"]},((c.slides||[])[n]||{}).loadedVideo&&r.a.createElement(Uo,{url:((c.slides||[])[n]||{}).loadedVideo}))):r.a.createElement(qe,null,r.a.createElement("div",{className:hc.a.TextEditor},r.a.createElement(ba.a,{name:"slides.".concat(n,".slideContent"),component:zr,path:"courses/".concat(l._id,"/lessons/").concat(a.props.editing?c._id:a.state.newLessonId),reduxForm:"lessonForm",field:"slides.".concat(n,".slideContent")})),r.a.createElement(ba.a,{name:"slides.".concat(n,".audioUpload"),options:s,component:Ca}),r.a.createElement(qe,null,((c.slides||[])[n]||{}).audioUpload?r.a.createElement(qe,null,r.a.createElement("div",{style:{textAlign:"center"},className:hc.a.flexPositioningEven},r.a.createElement(ba.a,{name:"slides.".concat(n,".audioFile"),index:n,uploadButtonText:m("lessonForm.buttons.selectAudioFile"),onChangeFile:function(e){i("slides.".concat(n,".recordedBlob"),e),d("slides.".concat(n,".audioFile"))},component:Va,loadedFile:a.getAudioRecording(c,n),mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]}),r.a.createElement(Ri,{onPreview:function(){a.getAudioSource(c,n)&&Yo("slideAudio[".concat(n,"]"))},id:"slideAudio[".concat(n,"]"),audioSource:a.getAudioSource(c,n)})),r.a.createElement(Ni,{onClear:function(){return a.setAudioData(null,null,n)}})):r.a.createElement(Li,{onStart:function(){var e=Object(Ba.a)(Pa.a.mark((function e(t){var r;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$o(t,null,n,null,function(){var e=Object(Ba.a)(Pa.a.mark((function e(t){var r;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:r=e.sent,a.setAudioData(r.blob,r.file,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:r=e.t0,a.initiateRecording(r.recorder,r.recordingTimeout,n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onStop:function(){var e=Object(Ba.a)(Pa.a.mark((function e(t){var r;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vo(t,null,n,a.getRecordingTimeout(c,n),a.getRecorderFromClick(c,n));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:r=e.t0,a.setAudioData(r.blob,r.file,n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPreview:function(){Yo("slideAudio[".concat(n,"]"))},onClear:function(){return a.setAudioData(null,null,n)},id:"slideAudio[".concat(n,"]"),recordDisabled:a.getAudioRecording(c,n),audioSource:a.getAudioSource(c,n)}))),r.a.createElement(pt.a,{fullWidth:!0,type:"button",title:"Remove Slide",onClick:function(){t.remove(n)},disabled:1===(c.slides||[]).length},m("lessonForm.buttons.removeSlide")))})),r.a.createElement("li",null,r.a.createElement(pt.a,{title:"Add Slide",type:"button",onClick:function(){return t.push({})},fullWidth:!0},m("lessonForm.buttons.addSlide")),s&&o&&r.a.createElement("span",null,o)))},a.state={initialUrls:[],newLessonId:null,isValid:!0,isUpdating:!1},a}return Object(Rt.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.handleWindowClose);var e=mo(this.props.initialValues,"lessonForm");this.setState({initialUrls:e,newLessonId:this.props.editing?null:(new lo.a.ObjectId).toHexString()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.handleWindowClose),this.state.isUpdating||this.handleDeleteUnsavedImages(),this.props.clearLessonForm()}},{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.formValues,a=void 0===n?{}:n,o=e.editing,s=(e.handleSubmit,e.loading,e.course),i=e.changeField,c=e.formErrors,l=e.touchField,u=e.t,d={label:u("lessonForm.fields.publish"),checked:!1},m=(a.values||{}).createdAt;return r.a.createElement(qe,null,r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement(ba.a,{className:hc.a.center,name:"lessonName",type:"text",component:ka,label:u("lessonForm.fields.lessonName")}),r.a.createElement(ba.a,{name:"published",options:d,component:Ca}),r.a.createElement(ba.a,{name:"availableOnDate",type:"dateTime",handleChange:function(e){return i("availableOnDate",e)},component:ur,fullWidth:!0,options:{disablePast:!0,label:u("lessonForm.fields.availableOnDate"),minDate:m}})),r.a.createElement(fr.a,{formValues:a.values,t:u,name:"slides",component:this.renderSlides,course:s,formErrors:c,touchField:l}),!this.state.isValid&&!c.isValid&&r.a.createElement(He.a,{style:{textAlign:"center",marginBottom:"20px"},gutterBottom:!0,color:"error"},u("lessonForm.errors.correctForm")),r.a.createElement(Js,{isError:!(this.state.isValid||c.isValid),disabled:t,clicked:this.onSubmit},u(o?"lessonForm.buttons.update":"lessonForm.buttons.publish")))}}]),n}(a.Component),vc=Object(Mt.a)({form:"lessonForm",enableReinitialize:!0,validate:gc})(Ec),yc=Object(c.b)((function(e,t){var n=e.common.selectedCourse,a=n.lessons||[],r=e.common.editing,o=e.common.configuration.instructorFileSizeLimit;return{formErrors:Object(Pt.a)("lessonForm")(e),loading:e.instructorLesson.loading,token:e.authentication.token,formValues:e.form.lessonForm,initialValues:Object(It.a)(Object(It.a)({},e.instructorLesson.loadedLessonFormData),{},{instructorFileSizeLimit:o,lessons:a,course:n,published:!r||e.instructorLesson.loadedLessonFormData.published}),editing:r,course:n}}),(function(e){return{addNewLesson:function(t,n,a,r,o){e(function(e,t,n,a,r){return{type:"CREATE_LESSON_START",payload:{formValues:e,token:t,editing:n,course:a,filesToDelete:r}}}(t,n,a,r,o))},changeField:function(t,n){return e(Object(Bt.a)("lessonForm",t,n))},touchField:function(t){e(Object(Bt.d)("lessonForm",t))},clearLessonForm:function(){return e({type:"CLEAR_LOADED_INSTRUCTOR_DATA"})},deleteImg:function(t,n){e(ge(t),n)}}}))(Object(Qa.a)("common")(vc)),Tc=function(e){var t=e.lessonSlides.length,n=e.lessonSlides.filter((function(e){return e.seen})).length/t*100;return Number.isNaN(n)?0:Math.round(100*(n+Number.EPSILON))/100},kc=Object(c.b)((function(e){return{course:e.common.selectedCourse,studentLoggedIn:e.authentication.studentLoggedIn,instructorLoggedIn:e.authentication.instructorLoggedIn,token:e.authentication.token,notifications:e.common.notifications,testInSession:e.studentTest.testInSession}}),(function(e){return{onEditLesson:function(t,n){return e(function(e,t){return{type:"FETCH_LESSON_START",payload:{lessonId:e,token:t}}}(t,n))},changeTab:function(t){return e(xe(t))},openModal:function(t,n){return e(Ae(t,n))}}}))((function(e){var t=e.course,n=void 0===t?{}:t,a=e.instructorLoggedIn,o=e.studentLoggedIn,s=e.token,i=e.folder,c=e.isModules,l=e.onEditLesson,u=e.openModal,d=e.changeTab,m=e.testInSession,p=Object(We.a)().t;return((n||{}).lessons||[]).map((function(e,t){var f=n.lessons.map((function(e){return e._id})),g=(i||[]).filter((function(e){return"lesson"===e.documentType})).map((function(e){return e.documentId}))||[];if(!g.includes(e._id)&&c)return null;var b=[];return f.forEach((function(e){g.includes(e)&&b.push(e)})),r.a.createElement(qe,{key:e._id},m&&0===t&&r.a.createElement(He.a,{style:{margin:20},variant:"h4"},"Lessons"),c&&b[0]===e._id&&r.a.createElement(Yr.a,{style:{background:"#2196f3"}},r.a.createElement(He.a,{style:{color:"white"}},p("lessons.lessons"))),r.a.createElement("div",null,r.a.createElement(Yr.a,{onClick:function(){u(e,"lesson")},button:!0,disabled:o&&Date.now()<e.availableOnDate},o&&0===(e.lessonSlides||[]).length&&r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{disabled:!0,checked:!1,value:"checked"})}),o&&(e.lessonSlides||[]).length>0&&r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:-1===e.lessonSlides.findIndex((function(e){return!e.seen})),value:"checked"})}),c&&r.a.createElement(fs.a,{style:{margin:"auto",minWidth:"30px"}},r.a.createElement(Fs.a,{color:"primary"})),r.a.createElement(vr.a,{primary:c?o?"".concat(e.lessonName," ").concat(Tc(e),"%"):e.lessonName:o?"".concat(p("lessons.lesson")," ").concat(t+1," ").concat(e.lessonName," ").concat(Tc(e),"%"):"".concat(p("lessons.lesson")," ").concat(t+1," ").concat(e.lessonName),secondary:Date.now()<e.availableOnDate?"".concat(p("lessons.availableOn")," ").concat(bt()(parseInt(e.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")):null}),a&&r.a.createElement(qe,null,r.a.createElement(Wa.a,{onClick:function(t){t.stopPropagation(),l((e||{})._id,s),d(1)}},r.a.createElement(xs.a,{color:"primary"})),r.a.createElement(Wa.a,{onClick:function(t){t.stopPropagation(),u(e,"deleteLesson")}},r.a.createElement(Ya.a,{color:"secondary"}))))))}))})),Sc=n(1253),wc=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;n.length>0&&(t=(Array.from(n).find((function(t){return t.test._id===e.test._id}))||{}).test),a&&(t=a);var r=(e||{}).testResult||{},o=r.gradingInProgress,s=r.graded,i=(r.multiplechoiceSection||{}).answers,c=(r.fillInBlanksSection||{}).answers,l=((t||{}).multipleChoiceQuestions||[]).map((function(e,t){var n=((r.multiplechoiceSection||{}).answers||[])[t]||{};if(o||s)return{marks:n.marks,additionalNotes:n.additionalNotes};return function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(((e||{}).answerOptions||[]).filter((function(t,n){if(((e||{}).correctAnswers||[]).includes((n+1).toString()))return t})),((i||[]).find((function(e){return e.questionNumber===t+1}))||{}).answers||[])?{marks:(e||{}).marks}:{marks:0}})),u=((t||{}).essayQuestions||[]).map((function(e,t){var n=((r.essaySection||{}).answers||[])[t]||{};return o||s?{marks:n.marks,additionalNotes:n.additionalNotes,instructorCorrection:n.instructorCorrection,allowCorrection:n.allowCorrection}:{marks:0,instructorCorrection:n.answer}})),d=((t||{}).speakingQuestions||[]).map((function(e,t){var n=((r.speakingSection||{}).answers||[])[t]||{};return o||s?{marks:n.marks,additionalNotes:n.additionalNotes,recordedBlob:n.feedbackAudio?n.feedbackAudio:"",audioFile:n.feedbackAudio||""}:{marks:0}})),m=(((t||{}).fillInBlanksQuestions||{}).blanks||[]).map((function(e,t){var n=((r.fillInBlanksSection||{}).answers||[])[t]||{};return o||s?{marks:n.marks,additionalNotes:n.additionalNotes}:((e||{}).correctAnswer||"").toLowerCase()===(((c||[]).find((function(e){return e.questionNumber===t+1}))||{}).answer||"").toLowerCase()?{marks:(e||{}).marks}:{marks:0}})),p=function(){if(o||s)return r.latePenalty||0;if((t||{}).assignment&&(t||{}).allowLateSubmission&&!(parseInt(r.submittedOn)<parseInt((t||{}).dueDate))){var e=(parseInt(r.submittedOn)-parseInt((t||{}).dueDate))/864e5;return Math.ceil(e)*(t||{}).latePenalty}};return{mcSection:l,essaySection:u,speakingSection:d,fillInBlankSection:m,latePenalty:p(),gradeOverride:r.gradeOverride,gradeAdjustmentExplanation:r.gradeOverride?r.gradeAdjustmentExplanation:null,gradeAdjusted:r.gradeOverride?r.grade:null}},Oc=Object(rt.a)({table:{minWidth:200},MuiTableRowBlue:{background:"#2196f3"},MuiTableRowDanger:{background:"#f44336"},WhiteText:{color:"white"},DangerText:{color:"#f44336"},SuccessText:{color:"#4caf50"},MuiButton:{marginLeft:"20px","&:hover":{border:"1px solid #1976d2",backgroundColor:"#e3f2fd",color:"#1976d2"}},studentFilterContainer:{width:"100%",display:"flex",justifyContent:"space-around",marginBottom:10,marginTop:30}});var Cc=Object(c.b)((function(e){return{token:e.authentication.token,selectedTest:e.instructorTest.selectedTest,testGrading:e.instructorTest.testGrading,course:e.common.selectedCourse,students:e.common.students,initialGradeValues:e.instructorTest.initialGradeValues}}),(function(e){return{setTestToGrade:function(t,n){return e(function(e,t){return{type:"SET_TEST_TO_GRADE",test:e,student:t}}(t,n))},setInitialGradeValues:function(t){return e(z(t))},closeTest:function(t,n,a,r,o){e(function(e,t,n,a,r){return{type:"CLOSE_TEST_START",payload:{testId:e,studentId:t,token:n,instructorTest:a,isExcused:r}}}(t,n,a,r,o))},openModal:function(t,n){return e(Ae(t,n))}}}))((function(e){var t=e.isTest,n=e.isAssignment,o=e.course,s=(e.testGrading,e.students),i=void 0===s?[]:s,c=e.setInitialGradeValues,l=e.token,u=e.closeTest,d=e.openModal,m=Object(We.a)().t,p=Object(a.useState)(""),f=Object(vo.a)(p,2),g=f[0],b=f[1],h=Object(a.useState)(""),E=Object(vo.a)(h,2),v=E[0],y=E[1],T=Object(a.useState)(""),k=Object(vo.a)(T,2),S=k[0],w=k[1],O=Object(a.useState)("studentName"),C=Object(vo.a)(O,2),x=C[0],A=C[1],F=Object(a.useState)("all"),D=Object(vo.a)(F,2),_=D[0],I=D[1];Object(a.useEffect)((function(){var e=(i||[])[0];if(e){b("".concat(e.firstName," ").concat(e.lastName)),w(e._id.replace(/\D/g,""));var n=t?(o.tests||[]).filter((function(e){return!e.assignment}))[0]:(o.tests||[]).filter((function(e){return e.assignment}))[0];y((n||{}).testName)}}),[JSON.stringify(i)]);var j=Oc();function R(e,t){return{info:e,value:t}}var N=o.tests.filter((function(e){return!e.assignment&&e.published}))||[],L=function(e){return o.tests.find((function(t){return t._id===e}))},P=o.tests.filter((function(e){return e.assignment&&e.published}))||[],B=N.map((function(e){return e._id})),M=P.map((function(e){return e._id})),q=[],U=N.filter((function(e){var t=parseInt(e.dueDate);return Date.now()>t?e:null})).map((function(e){return e._id})),Q=P.filter((function(e){var t=parseInt(e.dueDate);return Math.ceil((Date.now()-t)/864e5)>(e.lateDaysAllowed||0)?e:null})).map((function(e){return e._id})),H=[],G=[];t&&((i||[]).forEach((function(e){e.testResults.forEach((function(t){var n={student:e,testResult:t,test:N.find((function(e){return e._id===t.test}))};B.includes(t.test)&&t.closed&&q.push(n),(B.includes(t.test)&&!t.closed&&U.includes(t.test)||(t||{}).test===(e.testInSession||{}).test)&&G.push(n)}))})),U.forEach((function(e){(i||[]).forEach((function(t){var n={student:t,test:N.find((function(t){return t._id===e}))};t.testResults.map((function(e){return e.test})).includes(e)||H.push(n)}))})));var W=[],z=[];n&&((i||[]).forEach((function(e){return e.testResults.forEach((function(t){var n={student:e,testResult:t,test:P.find((function(e){return e._id===t.test}))};M.includes(t.test)&&t.closed&&q.push(n),M.includes(t.test)&&!t.closed&&z.push(n)}))})),Q.forEach((function(e){(i||[]).forEach((function(t){var n={student:t,test:P.find((function(t){return t._id===e}))};t.testResults.map((function(e){return e.test})).includes(e)||W.push(n)}))})));var V=(i||[]).map((function(e){return"".concat(e.firstName," ").concat(e.lastName)})),$=(N||[]).map((function(e){return e.testName})),Y=(P||[]).map((function(e){return e.testName})),J=[{label:m("gradeWork.all"),value:"all",placement:"end",color:"primary"},{label:m("gradeWork.toReview"),value:"toReview",placement:"end",color:"primary"},{label:m("gradeWork.graded"),value:"graded",placement:"end",color:"primary"}],K=[{label:m("gradeWork.studentName"),value:"studentName",placement:"end",color:"primary"},{label:m("gradeWork.studentId"),value:"studentId",placement:"end",color:"primary"},{label:"".concat(m(t?"gradeWork.test":"gradeWork.assignment")),value:"testName",placement:"end",color:"primary"}];return r.a.createElement(qe,null,r.a.createElement("div",{className:j.studentFilterContainer},"studentName"===x&&r.a.createElement(Fa,{id:"student-autocomplete",selectedOption:g,onOptionChange:function(e,t){b(t)},options:V,label:m("gradeWork.student"),width:300,margin:"0 0 22px 0"}),"testName"===x&&r.a.createElement(Fa,{id:"test-autocomplete",selectedOption:v,onOptionChange:function(e,t){y(t)},options:t?$:Y,label:"".concat(m(t?"gradeWork.test":"gradeWork.assignment")),width:300,margin:"0 0 22px 0"}),"studentId"===x&&r.a.createElement(ka,{fullWidth:!0,type:"text",label:m("gradeWork.studentId"),input:{value:S,onChange:function(e,t){w(e.target.value)}}})),r.a.createElement("div",{className:j.studentFilterContainer},r.a.createElement(oi,{title:m("gradeWork.searchBy"),options:K,input:{value:x,onChange:function(e){A(e.target.value)}}}),r.a.createElement(oi,{title:m(t?"gradeWork.filterTests":"gradeWork.filterAssignments"),options:J,input:{value:_,onChange:function(e){I(e.target.value)}}})),r.a.createElement(Sc.a,null,q.map((function(e,t){if(g!=="".concat(e.student.firstName," ").concat(e.student.lastName)&&"studentName"===x)return null;if(v!==e.test.testName&&"testName"===x)return null;if(S.replace(/\D/g,"")!==e.student._id.replace(/\D/g,"")&&"studentId"===x)return null;if("toReview"===_&&(e.testResult||{}).graded)return null;if("graded"===_&&!(e.testResult||{}).graded)return null;var n=(e.testResult||{}).graded,a=[R("",e.test.testName),R(m("gradeWork.studentName"),"".concat(e.student.firstName," ").concat(e.student.lastName)),e.test.gradeReleaseDate?R(m("gradeWork.gradeExpectedOn"),e.test.gradeReleaseDate?bt()(parseInt(e.test.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,R(m("gradeWork.submittedOn"),(e.testResult||{}).submittedOn?bt()(parseInt((e.testResult||{}).submittedOn)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""),R(m("gradeWork.status"),(e.testResult||{}).isExcused?m("gradeWork.buttons.excused"):(e.testResult||{}).graded?"".concat(m("gradeWork.graded")," ").concat((e.testResult||{}).grade,"%"):m("gradeWork.gradePending"))],o=(e.testResult||{}).isExcused;return r.a.createElement(qe,{key:e.testResult._id},r.a.createElement(si.a,{className:j.table,"aria-label":"simple table"},r.a.createElement(ii.a,null,a.map((function(t,a){var s;if(0===a&&(s="WhiteText"),2===a&&parseInt(e.test.gradeReleaseDate)<Date.now()+864e5&&!n&&(s="DangerText"),4===a&&n&&!e.testResult.isExcused&&(s="SuccessText"),4===a&&n&&e.testResult.isExcused&&(s="DangerText"),4===a&&o&&(s="DangerText"),t)return r.a.createElement(li.a,{key:t.info+a,className:0===a?j.MuiTableRowBlue:""},r.a.createElement(ci.a,{className:0===a?j.WhiteText:"",component:"th",scope:"row"},t.info,0===a&&r.a.createElement(pt.a,{size:"small",className:j.MuiButton,variant:"outlined",color:"primary",type:"button",title:"Grade",onClick:function(){d({results:q,testId:e.test._id,studentId:e.student._id},"gradeTest"),c(wc(e,q))}},(e.testResult||{}).graded||(e.testResult||{}).gradingInProgress?m("gradeWork.buttons.editGrade"):m("gradeWork.buttons.grade"))),r.a.createElement(ci.a,{className:j[s],align:"right"},t.value))})))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(pt.a,{style:{width:"40%"},color:"secondary",onClick:function(t){t.stopPropagation(),d(Object(It.a)(Object(It.a)({},e.test),{},{student:e.student}),"resetTest")}},m("gradeWork.buttons.reset")),r.a.createElement(pt.a,{color:"secondary",style:{width:"40%"},disabled:e.testResult.isExcused,onClick:function(){var t=e.student._id,n=e.test._id;u(n,t,l,L(n),!0)}},e.testResult.isExcused?m("gradeWork.buttons.excused"):m("gradeWork.buttons.excuse"))))})),(t?G:z).map((function(e){var t=e.test||{};if(g!=="".concat(e.student.firstName," ").concat(e.student.lastName)&&"studentName"===x)return null;if(v!==t.testName&&"testName"===x)return null;if(S.replace(/\D/g,"")!==e.student._id.replace(/\D/g,"")&&"studentId"===x)return null;if("graded"===_)return null;var n=[R("",t.testName),R(m("gradeWork.student"),"".concat(e.student.firstName," ").concat(e.student.lastName)),t.gradeReleaseDate?R(m("gradeWork.gradeExpectedOn"),t.gradeReleaseDate?bt()(parseInt(t.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,t.lastSavedOn?R(m("gradeWork.lastSavedOn"),(e.testResult||{}).lastSavedOn?bt()(parseInt((e.testResult||{}).lastSavedOn)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,R(m("gradeWork.status"),m("gradeWork.inProgress"))];return r.a.createElement(qe,{key:e.testResult._id},r.a.createElement(si.a,{key:e.testResult._id,className:j.table,"aria-label":"simple table"},r.a.createElement(ii.a,null,n.map((function(n,a){var o;if(0===a&&(o="WhiteText"),4===a&&(o="DangerText"),n)return r.a.createElement(li.a,{key:n.info+a,className:0===a?j.MuiTableRowBlue:""},r.a.createElement(ci.a,{className:0===a?j.WhiteText:"",component:"th",scope:"row"},n.info,0===a&&r.a.createElement(pt.a,{size:"small",className:j.MuiButton,variant:"outlined",color:"primary",type:"button",title:"Grade",onClick:function(){var n=e.student._id,a=t._id;u(a,n,l,L(a),!1)}},m("gradeWork.buttons.closeAndGrade"))),r.a.createElement(ci.a,{className:j[o],align:"right"},n.value))})))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(pt.a,{color:"secondary",style:{width:"40%"},onClick:function(t){t.stopPropagation(),d(Object(It.a)(Object(It.a)({},e.test),{},{student:e.student}),"resetTest")}},m("gradeWork.buttons.reset")),r.a.createElement(pt.a,{color:"secondary",style:{width:"40%"},disabled:e.testResult.isExcused,onClick:function(){var t=e.student._id,n=e.test._id;u(n,t,l,L(n),!0)}},e.testResult.isExcused?m("gradeWork.buttons.excused"):m("gradeWork.buttons.excuse"))))})),(t?H:W).map((function(e){if(g!=="".concat(e.student.firstName," ").concat(e.student.lastName)&&"studentName"===x)return null;if(v!==e.test.testName&&"testName"===x)return null;if(S.replace(/\D/g,"")!==e.student._id.replace(/\D/g,"")&&"studentId"===x)return null;if("graded"===_)return null;var t=[R("",e.test.testName),R(m("gradeWork.student"),"".concat(e.student.firstName," ").concat(e.student.lastName)),e.test.gradeReleaseDate?R(m("gradeWork.gradeExpectedOn"),e.test.gradeReleaseDate?bt()(parseInt(e.test.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,R(m("gradeWork.status"),m("gradeWork.missed"))];return r.a.createElement(qe,null,r.a.createElement(si.a,{key:"".concat(e.student.firstName,"[").concat(e.test._id,"]"),className:j.table,"aria-label":"simple table"},r.a.createElement(ii.a,null,t.map((function(t,n){var a,o;if(0===n&&(a="MuiTableRowBlue"),0===n&&(o="WhiteText"),3===n&&(o="DangerText"),t)return r.a.createElement(li.a,{key:t.info+n,className:j[a]},r.a.createElement(ci.a,{className:0===n?j.WhiteText:"",component:"th",scope:"row"},t.info,0===n&&r.a.createElement(qe,null,r.a.createElement(pt.a,{size:"small",className:j.MuiButton,variant:"outlined",color:"primary",type:"button",title:"Grade",onClick:function(){var t=e.student._id,n=e.test._id;u(n,t,l,L(n),!1)}},m("gradeWork.buttons.closeAndGrade")))),r.a.createElement(ci.a,{className:j[o],align:"right"},t.value))})))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(pt.a,{color:"secondary",style:{width:"40%"},onClick:function(){var t=e.student._id,n=e.test._id;u(n,t,l,L(n),!0)}},m("gradeWork.buttons.excuse"))))})),(i||[]).map((function(e){var n=o.tests.filter((function(e){return e.published}));return r.a.createElement(qe,{key:e._id},n.map((function(n){if(e.testResults.find((function(t){return t.student===e._id&&t.test===n._id})))return null;var a=H.find((function(e){return e.test._id===n._id})),o=W.find((function(e){return e.test._id===n._id})),s=G.find((function(e){return e.test._id===n._id})),i=z.find((function(e){return e.test._id===n._id}));if((!t||!n.assignment)&&(t||n.assignment)&&!(a||o||s||i)){if(g!=="".concat(e.firstName," ").concat(e.lastName)&&"studentName"===x)return null;if(v!==n.testName&&"testName"===x)return null;if(S.replace(/\D/g,"")!==e._id.replace(/\D/g,"")&&"studentId"===x)return null;if("all"!==_)return null;var c=[R("",n.testName),R(m("gradeWork.student"),"".concat(e.firstName," ").concat(e.lastName)),n.gradeReleaseDate?R(m("gradeWork.gradeExpectedOn"),n.gradeReleaseDate?bt()(parseInt(n.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):""):null,R(m("gradeWork.status"),m("gradeWork.notAttempted"))];return r.a.createElement(qe,null,r.a.createElement(si.a,{key:"".concat(e.firstName,"[").concat(n._id,"]"),className:j.table,"aria-label":"simple table"},r.a.createElement(ii.a,null,c.map((function(e,t){var n,a;if(0===t&&(n="MuiTableRowBlue"),0===t&&(a="WhiteText"),e)return r.a.createElement(li.a,{key:e.info+t,className:j[n]},r.a.createElement(ci.a,{className:0===t?j.WhiteText:"",component:"th",scope:"row"},e.info),r.a.createElement(ci.a,{className:j[a],align:"right"},e.value))})))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(pt.a,{color:"secondary",style:{width:"40%"},onClick:function(){var t=e._id,a=n._id;u(a,t,l,L(a),!0)}},m("gradeWork.buttons.excuse"))))}})))}))))})),xc=Object(c.b)((function(e){return{courses:e.common.courses,course:e.common.selectedCourse,students:e.common.students}}),(function(e){return{openModal:function(t,n){return e(Ae(t,n))}}}))((function(e){var t=e.enrollmentRequests,n=e.course,a=e.openModal,o=n.studentsEnrollRequests.filter((function(e){return!e.approved&&!e.denied&&!e.droppedOut}))||[],s=n.studentsEnrollRequests.filter((function(e){return e.denied}))||[],i=n.studentsEnrollRequests.filter((function(e){return e.approved}))||[],c=n.studentsEnrollRequests.filter((function(e){return e.droppedOut}))||[],l=function(e,t){a(e,t)},u=Object(We.a)().t;return t?r.a.createElement(qe,null,o.length>0&&r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},u("students.pendingRequests")),r.a.createElement($r.a,null,o.map((function(e,t){return r.a.createElement(Yr.a,{button:!0,key:e.student._id,onClick:function(){return l(e.student,"processEnrollmentRequest")}}," ",r.a.createElement(Ge.a,{src:e.student.profilePicture}),"".concat(e.student.firstName," ").concat(e.student.lastName))}))),s.length>0&&r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},u("students.requestsDenied")),r.a.createElement($r.a,null,s.map((function(e){return r.a.createElement(Yr.a,{button:!0,key:e.student._id,onClick:function(){return l(e.student,"studentSummary")}}," ",r.a.createElement(Ge.a,{src:e.student.profilePicture}),r.a.createElement(vr.a,{style:{marginLeft:"5px"},primary:"".concat(e.student.firstName," ").concat(e.student.lastName)}),e.resubmissionAllowed&&r.a.createElement(He.a,{style:{marginLeft:"10px"},variant:"caption",color:"primary"},u("students.resubmissionAllowed")))})))):r.a.createElement(qe,null,r.a.createElement($r.a,null,[].concat(Object(Vr.a)(i||[]),Object(Vr.a)(c||[])).map((function(e,t){var n=(c||[]).findIndex((function(t){return t.student._id===e.student._id}))>-1;return r.a.createElement(qe,{key:"".concat(e.student._id,"[").concat(e.droppedOut?"dropped":"enrolled","]")},r.a.createElement(Yr.a,{button:!0,onClick:function(){return l(e.student,"studentSummary")}}," ",r.a.createElement(Ge.a,{src:e.student.profilePicture}),r.a.createElement(vr.a,{style:{marginLeft:"5px"},primary:"".concat(e.student.firstName," ").concat(e.student.lastName)}),n&&r.a.createElement(He.a,{style:{marginLeft:10,marginRight:10},variant:"caption",color:"error"},u("students.droppedOut")),r.a.createElement(pt.a,{color:"primary",onClick:function(t){return function(e,t){e.stopPropagation(),a(t,"gradebook")}(t,e.student)}},u("students.buttons.gradebook"))))}))))})),Ac=function(e){return new Date("01/01/2020 ".concat(e)).getTime()},Fc=function(e){if(!e)return{isIrregOfficeHour:null,isRegOfficeHour:null};var t="".concat(bt()().hour(),":").concat(bt()().minutes());return{isRegOfficeHour:(e.regularOfficeHours||[]).findIndex((function(e){var n=Ac((e||{}).startTime),a=60*ms.a.tz.zone((e||{}).timezoneRegion).utcOffset(n)*1e3+n,r=Ac((e||{}).endTime),o=60*ms.a.tz.zone((e||{}).timezoneRegion).utcOffset(r)*1e3+r,s=60*ms.a.tz.zone((e||{}).timezoneRegion).utcOffset(Ac(t))*1e3+Ac(t);if((new Date).getDay()===us(e.day)&&s>=a&&s<o)return e}))>-1,isIrregOfficeHour:(e.irregularOfficeHours||[]).findIndex((function(e){var n=Ac((e||{}).startTime),a=60*ms.a.tz.zone((e||{}).timezoneRegion).utcOffset(n)*1e3+n,r=Ac((e||{}).endTime),o=60*ms.a.tz.zone((e||{}).timezoneRegion).utcOffset(r)*1e3+r,s=60*ms.a.tz.zone((e||{}).timezoneRegion).utcOffset(Ac(t))*1e3+Ac(t);if(new Date(Date.now()).setHours(0,0,0,0).toString()===parseInt(e.date).toString()&&s>=a&&s<o)return e}))>-1}},Dc=function(e,t,n){if(e)return(e.regularOfficeHours||[]).map((function(e){for(var n,a=bt()(Date.now()),r=bt()(parseInt(Date.now()+1728e5)),o=us(e.day),s=a.clone();s.day(0+o).isBefore(r);){n=s.clone()._d;var i=new Date("".concat(bt()(new Date(n)).format("MM/DD/YYYY")," ").concat(e[t])).getTime();return i<Date.now()?null:new Date(i).getTime()}})).sort().filter((function(e){return e}))[0]},_c=function(e,t,n){if(e)return(e.irregularOfficeHours||[]).map((function(e){var a=new Date("".concat(bt()(parseInt(e.date)).format("MM/DD/YYYY")," ").concat(e[t])).getTime();return a<=(n||Date.now())?null:a})).sort().filter((function(e){return e}))[0]},Ic=function(e,t){var n,a,r,o,s=Fc(e),i=s.isIrregOfficeHour,c=s.isRegOfficeHour;return(i||c)&&(a=Dc(e,"endTime"),o=_c(e,"endTime",t)),i||c||(n=Dc(e,"startTime"),r=_c(e,"startTime",t)),[r,n,o,a].filter((function(e){return e})).sort()[0]},jc=Object(c.b)((function(e){var t=e.common.selectedCourse,n=JSON.stringify((e.common.courses||[]).find((function(e){return e._id===(t||{})._id})));return{coursePanel:e.common.coursePanel,selectedCourse:e.common.selectedCourse,courses:e.common.courses,loadedLessonFormData:e.instructorLesson.loadedLessonFormData,tab:e.common.tab,editing:e.common.editing,loadedTestFormData:e.instructorTest.loadedTestFormData,token:e.authentication.token,userId:e.authentication.userId,studentLoggedIn:e.authentication.studentLoggedIn,modules:e.common.modules,loading:e.instructorTest.loading||e.instructorLesson.loading||e.instructorQuestion.loading||e.instructorModules.loading,stringifiedCourse:n,selectedChatUser:e.common.selectedChatUser}}),(function(e){return{setChatUser:function(t){e(be(t))},setTab:function(t){e(function(e){return{type:"SET_INSTRUCTOR_TAB",tab:e}}(t)),e({type:"CLEAR_INSTRUCTOR_TAB_CONTENT"}),e(x(1))},setCourse:function(t){e(_e(t))},fetchModules:function(t,n){return e(Se(t,n))},fetchStudents:function(t,n,a){return e(Ne(t,n,null,a))},fetchNotifications:function(t){return e(ye(t))},fetchUser:function(t){return e(re(t))},fetchInstructors:function(t){return e(L(t))},fetchQuestionBank:function(t,n){return e(U(t,n))},fetchConfig:function(t){return e(he(t))}}}))((function(e){var t=e.coursePanel,n=e.tab,o=e.loadedLessonFormData,s=e.loading,i=e.token,c=e.c,l=e.studentLoggedIn,u=(e.modules,e.userId),m=e.fetchStudents,p=e.fetchNotifications,f=e.selectedCourse,g=e.setCourse,b=e.stringifiedCourse,h=e.selectedChatUser,E=e.fetchModules,v=e.fetchUser,y=e.fetchQuestionBank,T=e.fetchConfig,k=e.courses,S=Object(We.a)().t,w=Object(a.useState)(!1),O=Object(vo.a)(w,2),C=O[0],x=O[1],A=Object(d.i)().courseId,F=Object(d.h)().pathname,D=(k||[]).find((function(e){return e._id===A}));if(Object(a.useEffect)((function(){if(i){E(A,i),m(A,i),v(i),y(A,i),T(i);var e=(k||[]).find((function(e){return e._id===A}))||{};g(e)}var t,n=Fc((t=c||{})||{},Date.now()),a=n.isIrregOfficeHour,r=n.isRegOfficeHour;x(!(!a&&!r));var o,s=$e()("https://mernstackelearn.herokuapp.com/",{query:{token:i}});s.on("updateStudents",(function(e){"instructor"!==e.userType&&"all"!==e.userType||e.userId!==u&&e.courseId!==A||m(A,i,"noSpinner"),e.fetchNotifications&&p(i)}));!function e(n){o=setTimeout((function(){var a=Fc(t),r=a.isIrregOfficeHour,s=a.isRegOfficeHour;x(!(!r&&!s)),n?e(Ic(t,Date.now())):clearTimeout(o)}),n-Date.now())}(Ic(t,Date.now()));var l=((t||{}).tests||[]).filter((function(e){return Date.now()<parseInt(e.dueDate)+864e5*e.lateDaysAllowed&&e.allowLateSubmission})).map((function(e){return parseInt(e.dueDate)+864e5*e.lateDaysAllowed})),d=((t||{}).tests||[]).filter((function(e){return e.dueDate&&Date.now()<parseInt(e.dueDate)&&!e.allowLateSubmission})).map((function(e){return parseInt(e.dueDate)})),f=[];return[].concat(Object(Vr.a)(d),Object(Vr.a)(l)).forEach((function(e){setTimeout((function(){f.push(o),m((t||{})._id,i)}),e-Date.now())})),function(){f.forEach((function(e){clearTimeout(e)})),clearTimeout(o),s.disconnect(),g(null)}}),[b,A]),!D&&k)return r.a.createElement(d.a,{to:"/instructor-panel/courses"});if(F==="/instructor-panel/course/".concat(A)&&l)return r.a.createElement(d.a,{to:"/student-panel/course/".concat(A)});var _;return"assignment"===t&&(_=r.a.createElement(qe,null,r.a.createElement(ho,{value:n,index:0},r.a.createElement(Ps,{isAssignment:!0})),r.a.createElement(ho,{value:n,index:1},!s&&r.a.createElement(fc,null)),r.a.createElement(ho,{value:n,index:2},["Multiple-choice questions","Essay questions","Speaking questions","Fill-in-the-blanks questions"].map((function(e,t){return r.a.createElement(Qs,{key:e,index:t,summary:S("questions.".concat(e.replace(/ /g,"").replace(/-/g,"").toLowerCase()))},r.a.createElement(zs,{questionType:e}))}))))),"test"===t&&(_=r.a.createElement(qe,null,r.a.createElement(ho,{value:n,index:0},r.a.createElement(Ps,{isTest:!0})),r.a.createElement(ho,{value:n,index:1},!s&&r.a.createElement(fc,null)),r.a.createElement(ho,{value:n,index:2},["Multiple-choice questions","Essay questions","Speaking questions","Fill-in-the-blanks questions"].map((function(e,t){return r.a.createElement(Qs,{key:e,index:t,summary:e},r.a.createElement(zs,{questionType:e}))}))))),"resources"===t&&(_=r.a.createElement(qe,null,r.a.createElement(ei,null))),"grade"===t&&(_=r.a.createElement(qe,null,r.a.createElement(ho,{value:n,index:0},r.a.createElement(Cc,{isTest:!0})),r.a.createElement(ho,{value:n,index:1},r.a.createElement(Cc,{isAssignment:!0})))),"lesson"===t&&(_=r.a.createElement(qe,null,r.a.createElement(ho,{value:n,index:0},r.a.createElement(kc,null)),r.a.createElement(ho,{value:n,index:1},o&&r.a.createElement(yc,null)))),"chat"===t&&(_=r.a.createElement(qe,null,r.a.createElement(ho,{value:n,index:0},r.a.createElement(ps,{isOfficeHour:C,instructorPanel:!0})),r.a.createElement(ho,{value:n,index:1},f&&h&&r.a.createElement(ls,{key:(h||{})._id,isOfficeHour:C,instructorPanel:!0,userType:"instructor"})))),"student"===t&&(_=r.a.createElement(qe,null,r.a.createElement(ho,{value:n,index:0},r.a.createElement(xc,null)),r.a.createElement(ho,{value:n,index:1},r.a.createElement(xc,{enrollmentRequests:!0})))),"modules"===t&&(_=r.a.createElement(Rs,null)),r.a.createElement(qe,null,r.a.createElement(Xe,{active:s,transparent:!0}),r.a.createElement("div",{style:{maxWidth:600,margin:"auto",height:"100%"}}," ",_))}));ho.propTypes={children:_t.a.node,index:_t.a.any.isRequired,value:_t.a.any.isRequired};var Rc=Object(c.b)((function(e){return{tab:e.common.tab,token:e.authentication.token,courses:e.common.courses,testInSession:e.studentTest.testInSession,loadedTestDataInProgress:e.studentTest.loadedTestDataInProgress}}),(function(e){return{clearModalStates:function(){return e({type:"CLEAR_STUDENT_MODAL_STATES"})},fetchCourses:function(t){return e(Ie(t))}}}))((function(e){var t=e.tab,n=e.courses,o=e.token,s=e.fetchCourses,i=e.testInSession,c=e.loadedTestDataInProgress,l=Object(d.h)().pathname;return Object(a.useEffect)((function(){var e,t=(n||[]).filter((function(e){return e.enrollmentStartDate&&Date.now()<parseInt(e.enrollmentStartDate)})).map((function(e){return parseInt(e.enrollmentStartDate)})),a=(n||[]).filter((function(e){return e.enrollmentEndDate&&Date.now()<parseInt(e.enrollmentEndDate)})).map((function(e){return parseInt(e.enrollmentEndDate)})),r=(n||[]).filter((function(e){return e.courseDropDeadline&&Date.now()<parseInt(e.courseDropDeadline)})).map((function(e){return parseInt(e.courseDropDeadline)})),i=[];[].concat(Object(Vr.a)(t),Object(Vr.a)(a),Object(Vr.a)(r)).forEach((function(t){e=setTimeout((function(){i.push(e),s(o)}),t-Date.now())}))}),[n]),r.a.createElement(qe,null,!o&&r.a.createElement(d.a,{to:"/authentication"}),l.includes("/student-panel/course")&&i&&c&&r.a.createElement(d.a,{to:"/student-panel/test-in-session"}),r.a.createElement(ho,{value:t,index:0},r.a.createElement(Ft,null)),r.a.createElement(ho,{value:t,index:1},r.a.createElement(Ft,null)))})),Nc=function(e){var t={mc:!1,essay:!1,speaking:!1,fillblanks:!1,allAnswersFilled:!0};return(e.mcQuestions||[]).forEach((function(e){0===e.length&&(t.mc=!0,t.allAnswersFilled=!1)})),(e.essayQuestions||[]).forEach((function(e){e||(t.essay=!0,t.allAnswersFilled=!1)})),(e.speakingQuestions||[]).forEach((function(e){e.audioFile||(t.speaking=!0,t.allAnswersFilled=!1)})),((e.fillBlankQuestions||{}).answers||[]).forEach((function(e){e&&"Select the correct answer"!==e||(t.fillblanks=!0,t.allAnswersFilled=!1)})),t},Lc=(n(1111),function(e){var t,n=e.readingContent,a=e.audioSource,o=e.fileUpload,s=e.materialsSection,i=Object(We.a)().t,c=(is(n)||"").split(".").pop();return o&&("pdf"===c&&(t=r.a.createElement(ji,{url:n,index:s})),"jfif"!==c&&"jpgeg"!==c&&"jpg"!==c||(t=r.a.createElement("div",{style:{backgroundImage:'url("'.concat(n,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"200px",borderRadius:"3px",width:"100%",margin:"auto"}}))),"docx"!==c&&"doc"!==c||(t=r.a.createElement(Ua.a,{fileType:c,filePath:n})),r.a.createElement("div",{style:{marginBottom:20}},n&&r.a.createElement(He.a,{paragraph:!0,variant:"h6"},i("testMaterials.useTheFollowingContent")),!o&&n&&r.a.createElement("div",{style:{background:"#1976d2",borderRadius:4,color:"white",padding:10,marginTop:40},dangerouslySetInnerHTML:{__html:oc.a.sanitize(n)}}),o&&n&&r.a.createElement("div",null,t),a&&r.a.createElement("div",{style:{marginTop:40}},r.a.createElement(He.a,{paragraph:!0,variant:"h6"},i("testMaterials.useTheAudio")),r.a.createElement(rs,{audioSource:a})))}),Pc=Object(Mt.a)({form:"studentTest",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Nc})((function(e){var t=e.testInSession,n=Object(We.a)().t,a=t.readingMaterials[0]||{},o=t.audioMaterials[0]||{},s={background:"#1976d2",borderRadius:4,color:"white",padding:10};return r.a.createElement(qe,null,r.a.createElement(Lc,{audioId:"mcAudioMaterial",pdfIndex:1,readingContent:a.content,audioSource:o.audio,onPreview:function(){return Yo("mcAudioMaterial")},fileUpload:a.fileUpload}),((t||{}).multipleChoiceQuestions||[]).map((function(e,t){var a=((e||{}).answerOptions||[]).map((function(e,t){return{label:e,value:e,placement:"start",color:"primary",name:"mc"}}));return r.a.createElement(qe,{key:e._id},r.a.createElement(He.a,{paragraph:!0,variant:"h6"},"".concat(n("testSession.question")," ").concat(t+1)),r.a.createElement("div",{style:s,dangerouslySetInnerHTML:{__html:e.question}}),r.a.createElement(ba.a,{name:"mcQuestions.".concat(t),component:vi,numbered:!0,options:a,required:!1,column:!0}))})))})),Bc=Object(c.b)(null,(function(e){return{clearAnswers:function(t){e(Object(Bt.a)("testForm","mcQuestions[".concat(t,".correctAnswers]"),[]))}}}))(Pc),Mc=Object(Mt.a)({form:"studentTest",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Nc})((function(e){var t=e.testInSession,n=e.path,a=Object(We.a)().t,o=t.readingMaterials[1]||{},s=t.audioMaterials[1]||{},i={background:"#1976d2",borderRadius:4,color:"white",padding:10,marginBottom:30};return r.a.createElement(qe,null,r.a.createElement(Lc,{audioId:"essayAudioMaterial",pdfIndex:2,readingContent:o.content,audioSource:s.audio,onPreview:function(){return Yo("essayAudioMaterial")},fileUpload:o.fileUpload}),((t||{}).essayQuestions||[]).map((function(e,t){return r.a.createElement(qe,{key:e._id},r.a.createElement(He.a,{paragraph:!0,variant:"h6"},"".concat(a("testSession.question")," ").concat(t+1)),r.a.createElement("div",{style:i,dangerouslySetInnerHTML:{__html:e.question}}),r.a.createElement(ba.a,{component:zr,noImage:!0,name:"essayQuestions.".concat(t),field:"essayQuestions.".concat(t),reduxForm:"studentTest",path:n}))})))})),qc=n(105),Uc=n.n(qc),Qc=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).blankListener=function(t){var n=parseInt((t.target.id.match(/\d+/)||[])[0]);(((e.props.formValues||{}).fillBlankQuestions||{}).answers||[]).map((function(e,t){return"blank-input-[".concat(t,"]")})).includes(t.target.id)&&e.props.updateAnswer(t.target.value,n)},e}return Object(Rt.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("change",(function(t){e.blankListener(t)}))}},{key:"render",value:function(){var e=this.props,t=e.formValues,n=e.t,a=e.testInSession,o=void 0===a?{}:a,s=(o.fillInBlanksQuestions||{}).blanks||[],i=Xi()(o.fillInBlanksQuestions.text,"-BLANK-",(function(e,a){var o=a/2-.5,i=(s[o]||[]).answerOptions;return!0===(s[o]||{}).selectableAnswer?r.a.createElement(qe,{key:e+o},r.a.createElement("span",{className:Uc.a.BlankPreview},o+1," "),(s[o]||[]).audio&&r.a.createElement("span",{dangerouslySetInnerHTML:{__html:oc.a.sanitize('\n                      <audio id="audio['.concat(o,']" src="').concat((s[o]||{}).audio,'">\n                        </audio>\n                        <span class="').concat(Uc.a.Pointer,'" onClick="(function(){\n                          const audio = document.getElementById(\'audio[').concat(o,']\');\n                          audio.play()\n                          return false;\n                          })();return false;" >\n                          <i class="fa fa-volume-down"></i>\n                        </span>\n                        '),{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}),r.a.createElement("select",{readOnly:!0,className:Uc.a.SelectField,id:"blank-input-[".concat(o,"]"),onChange:function(){return console.log("this is just to prevent error")},value:((((t||{}).fillBlankQuestions||{}).answers||[])[o]||"").trim()},r.a.createElement("option",null,n("testSession.fields.selectAnswer")),i.map((function(e,t){return r.a.createElement("option",{key:e+t,value:(e||"").replace(/"/g,"'").trim()},ac()((e||"").replace(/"/g,"'")))})))):!1===(s[o]||[]).selectableAnswer?r.a.createElement(qe,{key:e+o},r.a.createElement("span",{className:Uc.a.Inline},r.a.createElement("span",{className:Uc.a.BlankPreview},o+1," "),(s[o]||[]).audio&&r.a.createElement(qe,null,r.a.createElement("span",{dangerouslySetInnerHTML:{__html:oc.a.sanitize('\n                        <audio id="audio['.concat(o,']" src="').concat((s[o]||{}).audio,'">\n                        </audio>\n                        <span class="').concat(Uc.a.Pointer,'" onClick="(function(){\n                          const audio = document.getElementById(\'audio[').concat(o,']\');\n                          audio.play()\n                          return false;\n                          })();return false;" >\n                          <i class="fa fa-volume-down"></i>\n                        </span>\n                      '),{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}})),r.a.createElement("input",{type:"text",className:Uc.a.InputField,id:"blank-input-[".concat(o,"]"),onChange:function(){return console.log("this is just to prevent error")},value:(((t||{}).fillBlankQuestions||{}).answers||[])[o]}))):void 0})),c=[];i.forEach((function(e,t){"string"===typeof e?c.push(e):c.push(Ji.a.renderToString(e))}));var l=(c||[]).join(""),u=o.readingMaterials[3]||{},d=o.audioMaterials[3]||{};return r.a.createElement(qe,null,r.a.createElement(Lc,{audioId:"fillBlankAudioMaterial",pdfIndex:1,readingContent:u.content,audioSource:d.audio,onPreview:function(){return Yo("fillBlankAudioMaterial")},fileUpload:u.fileUpload}),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:oc.a.sanitize(l,{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}))}}]),n}(a.Component),Hc=Object(Mt.a)({form:"studentTest",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Nc})(Qc),Gc=Object(c.b)(null,(function(e){return{updateAnswer:function(t,n){e(Object(Bt.a)("studentTest","fillBlankQuestions.answers.".concat(n),t))}}}))(Object(Qa.a)("common")(Hc)),Wc=n(259),zc=n.n(Wc),Vc=Object(Mt.a)({form:"studentTest",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:Nc})((function(e){var t=e.formValues,n=void 0===t?{}:t,o=e.changeField,s=e.testInSession,i={background:"#1976d2",borderRadius:4,color:"white",padding:10},c=Object(We.a)().t,l=Object(a.useState)(!1),u=Object(vo.a)(l,2),d=u[0],m=u[1],p=Object(a.useState)(!1),f=Object(vo.a)(p,2),g=f[0],b=f[1],h=function(e,t,n,a){a?(o("speakingQuestions.".concat(n,".recording"),a),o("speakingQuestions.".concat(n,".recorder"),e),o("speakingQuestions.".concat(n,".recordingTimeout"),t)):function(){clearTimeout(g),m(!0);var e=setTimeout((function(){m(!1)}),5e3);b(e)}()},E=function(e,t,n){o("speakingQuestions.".concat(n,".recording"),!1),o("speakingQuestions.".concat(n,".recordedBlob"),e),o("speakingQuestions.".concat(n,".audioFile"),t)},v=function(e){return((n||{}).speakingQuestions||[])[e]||{}},y=s.readingMaterials[2]||{},T=s.audioMaterials[2]||{};return Object(a.useEffect)((function(){return function(){clearTimeout(g)}}),[]),r.a.createElement(qe,null,r.a.createElement(Lc,{audioId:"speakingAudioMaterial",pdfIndex:2,readingContent:y.content,audioSource:T.audio,onPreview:function(){return Yo("speakingAudioMaterial")},fileUpload:y.fileUpload}),s.speakingQuestions.map((function(e,t){return r.a.createElement(qe,{key:e._id},r.a.createElement(He.a,{paragraph:!0,variant:"h6"},"".concat(c("testSession.question")," ").concat(t+1)),e.question?r.a.createElement("div",{style:i,dangerouslySetInnerHTML:{__html:e.question}}):r.a.createElement("div",null,r.a.createElement("audio",{id:"audioQuestion[".concat(t,"]"),src:e.questionAudio}),r.a.createElement(pt.a,{fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){Yo("audioQuestion[".concat(t,"]"))},startIcon:r.a.createElement(zc.a,null)},c("testSession.buttons.playQuestion"))),r.a.createElement(ba.a,{component:Li,isMicAlert:d,name:"speakingQuestions.".concat(t,".recordedBlob"),onStart:function(){var e=Object(Ba.a)(Pa.a.mark((function e(n){var a;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$o(n,null,t,null,function(){var e=Object(Ba.a)(Pa.a.mark((function e(n){var a;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:a=e.sent,E(a.blob,a.file,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,h(a.recorder,a.recordingTimeout,t,a.isRecording);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onStop:function(){var e=Object(Ba.a)(Pa.a.mark((function e(n){var a;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vo(n,null,t,v(t).recordingTimeout,v(t).recorder);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,E(a.blob,a.file,t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPreview:function(){Yo("audioAnswer[".concat(t,"]"))},onClear:function(){return E(null,null,t)},id:"audioAnswer[".concat(t,"]"),recordDisabled:v(t).recording,audioSource:v(t).recordedBlob,previewType:"button",recordButtonText:c("testSession.buttons.recordAnswer")}))})))})),$c=Object(c.b)(null,(function(e){return{changeField:function(t,n){e(Object(Bt.a)("studentTest",t,n))}}}))(Vc),Yc=Object(c.b)((function(e){return{testInSession:e.studentTest.testInSession}}))((function(e){var t=e.testInSession,n=e.classes,o=e.submitTest,s=Object(We.a)().t,i=t.endTime,c=r.a.useState(null),l=Object(vo.a)(c,2),u=l[0],d=l[1];Object(a.useEffect)((function(){var e=setInterval((function(){var t=i-Date.now();d(t),t<0&&(o(),clearInterval(e))}),1e3);return function(){clearInterval(e)}}),[]);var m=parseInt(bt()(parseInt((t||{}).endTime)).format("H")),p=(parseInt(bt()(parseInt((t||{}).endTime)).format("HH")),bt()(parseInt((t||{}).endTime)).format("HH:mm"));return r.a.createElement("div",{style:{overflow:"hidden"}},u>0&&r.a.createElement(co,{danger:u/1e3<60,activeStep:60*parseInt((t||{}).timer)-u/1e3-1,steps:60*parseInt((t||{}).timer),progress:!0}),u>0&&r.a.createElement("div",{className:u/1e3<60?n.timerDanger:n.timer},(t||{}).timer&&r.a.createElement("div",null,r.a.createElement(He.a,{variant:"subtitle1"},"".concat(s("testSession.testClosesAt",{laOrLas:1===m?"la":"las",time:p}))),u/1e3<300&&u/1e3>60&&(t||{}).timer>5&&r.a.createElement("div",{className:n.timeWarning},r.a.createElement(He.a,{variant:"caption"},s("testSession.lessThanFiveMin"))),u/1e3<60&&r.a.createElement("div",{className:n.timeWarning},r.a.createElement(He.a,{variant:"caption"},s("testSession.lessThanOneMin"))))))})),Jc=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(e){var a;return Object(jt.a)(this,n),(a=t.call(this,e)).onSubmit=function(e,t,n,r){if(t||n||a.props.formErrors.allAnswersFilled||a.state.isWarned||r){var o=mo((a.props.studentTest||{}).values,"studentTest"),s=(a.state.initialUrls||[]).filter((function(e){if(!o.includes(e))return e}));a.props.submitTest((a.props.studentTest||{}).values,a.props.token,a.props.userId,!t,a.props.testInSession,a.props.course._id,s,n,e),n&&a.props.exitAssignment()}else a.setState({isWarned:!0})},a.nextPage=function(){a.setState((function(e){return{page:e.page+1}}))},a.previousPage=function(){a.setState((function(e){return{page:e.page-1}}))},a.state={page:1,initialUrls:[],isWarned:!1,socket:null},a}return Object(Rt.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.startingValues,n=e.courses,a=e.notifications,r=(e.course,e.token),o=e.testInSession,s=e.setCourse,i=e.markAsSeen,c=e.fetchNotifications,l=e.fetchCourses,u=e.returnToCourses,d=e.fetchTestResults,m=e.userId,p=e.setTabLabels,f=mo(t,"studentTest"),g=t.course,b=(n||[]).find((function(e){return e._id===g}));s(b);var h=(a||[]).find((function(e){if(e.documentId===t.test&&"assignment"===e.documentType)return e}));h&&(i(h._id,r),c(r));var E=$e()("https://mernstackelearn.herokuapp.com/",{query:{token:r}});E.on("mainMenu",(function(e){"student"!==e.userType&&e.userId!==m||!("deleteTest"===e.action&&o._id===e.testId||"deactivateCourse"===e.action&&(b||{})._id===e.course||("closeTest"===e.action||"excuseTest"===e.action)&&(t||{}).test===e.testId||"denyStudentCourseAccess"===e.action&&(b||{})._id===e.course&&e.userId===m||"resetTest"===e.action&&o._id===e.testId)||(p(["All courses","Your courses"]),l(r),d(r),u(),Je.push("/student-panel/courses"))})),this.setState({initialUrls:f,socket:E})}},{key:"componentWillUnmount",value:function(){this.state.socket.disconnect()}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.testInSession,o=void 0===a?{}:a,s=n.isTest,i=n.loading,c=n.initialValues,l=n.formValues,u=n.formErrors,m=n.changeSection,p=(n.coursePanel,n.setCourse,n.width),f=n.t,g=(this.props.location.pathname,"courses/".concat((o||{}).course,"/tests/").concat((o||{})._id,"/results/").concat((c||{})._id)),b=(o||{}).sectionWeights||{},h=b.mcSection,E=b.essaySection,v=b.fillBlankSection,y=b.speakingSection,T=1,k=h?2:1;h&&E&&(e=3),!h&&E&&(e=2),h&&!E&&(e=2),h||E||(e=1);var S=((o||{}).audioMaterials||[])[4]||{},w=((o||{}).readingMaterials||[])[4]||{},O=S.audio&&""!==S.audio||w.content&&""!==w.content,C=Object.values((o||{}).sectionWeights||{}).filter((function(e){return null!==e})).length;O&&(T+=1,k+=1,e+=1,C+=1);var x=C,A=this.state.page;1===A&&O&&m("materials"),A===T&&h&&m("mc"),A===k&&E&&m("essay"),A===e&&y&&m("speaking"),A===x&&v&&m("fillblanks");var F,D=r.a.createElement("div",{className:1!==A?Uc.a.flexPositioningSpaceBetween:Uc.a.flexPositioningEnd},!(1===A)&&r.a.createElement(pt.a,{color:"primary",style:{marginRight:"3px"},onClick:function(){t.previousPage(),t.setState({isWarned:!1})},startIcon:r.a.createElement(ga.a,null),size:"small"},O&&2===A?(o||{}).assignment?f("testSession.assignmentResources"):f("testSession.testResources"):f("testSession.buttons.previousSection")),!(A===C)&&r.a.createElement(pt.a,{onClick:function(){t.nextPage(),t.setState({isWarned:!1})},style:{marginLeft:"3px"},color:"primary",endIcon:r.a.createElement(pa.a,null),size:"small"},f(O&&1===A?"testSession.buttons.questions":"testSession.buttons.nextSection")));return A===T&&h&&(F=f("testSession.multiplechoicesection")),A===k&&E&&(F=f("testSession.essaysection")),A===e&&y&&(F=f("testSession.speakingsection")),A===x&&v&&(F=f("testSession.fillintheblankssection")),r.a.createElement("div",{style:p<500?{marginTop:30}:null,className:Uc.a.TestContainer},r.a.createElement(Xe,{active:i,transparent:!0}),r.a.createElement("div",{className:Uc.a.flexPositioningSpaceBetween},r.a.createElement(pt.a,{onClick:function(){return t.onSubmit(g,!0)},size:"small"},f("testSession.buttons.save")),(o||{}).assignment&&r.a.createElement(pt.a,{onClick:function(){return t.onSubmit(g,!0,!0)},color:"secondary",size:"small"},f("testSession.buttons.exit"))),(o||{}).timer&&r.a.createElement(Yc,{classes:Uc.a,submitTest:function(){return t.onSubmit(g,null,null,!0)}}),r.a.createElement(d.b,{exact:!0,path:s?"/student-panel/test-in-session":"*"},r.a.createElement(He.a,{style:{margin:20},variant:"h4",gutterBottom:!0},F),1===A&&O&&r.a.createElement(qe,null,r.a.createElement(Lc,{audioId:"testAudioMaterial",pdfIndex:0,readingContent:w.content,audioSource:S.audio,onPreview:function(){return Yo("testAudioMaterial")},fileUpload:w.fileUpload})),A===T&&h&&r.a.createElement(qe,null,r.a.createElement(Bc,{testInSession:o,test:s})),A===k&&E&&r.a.createElement(qe,null,r.a.createElement(Mc,{test:s,path:g,testInSession:o})),A===e&&y&&r.a.createElement(qe,null,r.a.createElement($c,{testInSession:o,test:s,formValues:l})),A===x&&v&&r.a.createElement(qe,null,r.a.createElement(Gc,{formValues:l,testInSession:o,test:s})),D,this.state.isWarned&&!u.allAnswersFilled&&r.a.createElement(He.a,{paragraph:!0,color:"error",variant:"subtitle1",gutterBottom:!0},f("testSession.errors.questionsUnanswered")),r.a.createElement(Js,{clicked:function(e){t.onSubmit(g)},isError:this.state.isWarned&&!u.allAnswersFilled},this.state.isWarned&&!u.allAnswersFilled?f("testSession.buttons.submitAnyway"):f("testSession.buttons.submit"))),r.a.createElement(d.b,{exact:!0,component:kc,path:"/student-panel/test-in-session/lessons"}))}}]),n}(a.Component);Jc.getDerivedStateFromProps=function(e,t){return e.formErrors.allAnswersFilled?{isWarned:!1}:null};var Kc=Object(Mt.a)({form:"studentTest",enableReinitialize:!0,destroyOnUnmount:!0,forceUnregisterOnUnmount:!0,validate:Nc})(Jc),Zc=Object(d.k)(Object(c.b)((function(e,t){return{formValues:Object(nt.a)("studentTest")(e),formErrors:Object(Pt.a)("studentTest")(e),token:e.authentication.token,userId:e.authentication.userId,testInSession:t.isTest?e.studentTest.testInSession:e.studentTest.assignmentInSession,studentTest:e.form.studentTest,testTimesUp:e.studentTest.testTimesUp,initialValues:e.studentTest.loadedTestDataInProgress,intervalId:e.studentTest.testTimerCheckerIntervalId,timeLeft:e.studentTest.testTimeLeft,loading:e.studentTest.loading,coursePanel:e.common.coursePanel,courses:e.common.courses,course:e.common.selectedCourse,testResults:e.studentTest.testResults,notifications:e.common.notifications,width:e.common.width,startingValues:e.studentTest.loadedTestDataInProgress}}),(function(e){return{submitTest:function(t,n,a,r,o,s,i,c,l){e(function(e,t,n,a,r,o,s,i,c){return{type:"SUBMIT_TEST_START",payload:{formValues:e,token:t,studentId:n,testClosed:a,test:r,courseId:o,filesToDelete:s,exitAssignment:i,filePath:c}}}(t,n,a,r,o,s,i,c,l))},fetchNotifications:function(t){e(ye(t))},fetchCourses:function(t,n){return e(Ie(t,n))},fetchTestResults:function(t,n){return e(h(t,n))},changeSection:function(){var t;e({type:"SET_STUDENT_TEST_SECTION",section:t})},exitAssignment:function(){e({type:"EXIT_ASSIGNMENT"})},setTabLabels:function(t){e(Ce(t))},setCourse:function(t){e(_e(t))},markAsSeen:function(t,n){e(ke(t,n))},returnToCourses:function(){e({type:"RETURN_TO_COURSES"})}}}))(Object(Qa.a)("common")(Kc))),Xc=Object(c.b)((function(e){return{course:e.common.selectedCourse,testResults:e.studentTest.testResults,token:e.authentication.token,notifications:e.common.notifications}}),(function(e){return{openModal:function(t,n){return e(Ae(t,n))},onStartAssignment:function(t,n){e(Pe(t,!0,n,null,!1)),e(Re("assignment")),e(xe(0))},onContinueAssignment:function(t,n,a){e(Pe(t,!0,n,a,!1)),e(Re("assignment")),e(xe(0))},markAsSeen:function(t,n){e(ke(t,n))}}}))((function(e){var t=e.testResults,n=void 0===t?{}:t,o=e.isTest,s=(e.studentId,e.token),i=e.folder,c=e.isModules,l=e.course,u=e.isAssignment,d=e.notifications,m=e.onStartAssignment,p=e.onContinueAssignment,f=e.openModal,g=e.markAsSeen;e.fetchNotifications;Object(a.useEffect)((function(){var e=l.tests.filter((function(e){return!e.assignment})).map((function(e){return e._id})),t=l.tests.filter((function(e){return e.assignment})).map((function(e){return e._id})),n=(d||[]).find((function(n){return(e||[]).includes(n.documentId)&&o&&"test"===n.documentType&&!n.seen||(t||[]).includes(n.documentId)&&u&&"assignment"===n.documentType&&!n.seen||(t||[]).includes(n.documentId)&&u&&"resetAssignment"===n.documentType&&!n.seen?n:void 0}));n&&g(n._id,s)}),[]);var b,h=(n||{}).assignmentsInSession,E=(((n||{}).testResults||[]).filter((function(e){return e.course===l._id}))||[]).filter((function(e){return e.closed&&!e.isExcused?e.test:null})).map((function(e){return e.test})),v=(((n||{}).testResults||[]).filter((function(e){return e.isExcused}))||[]).map((function(e){return e.test})),y=(l.tests||[]).filter((function(e){return!e.assignment})),T=(l.tests||[]).filter((function(e){return e.assignment})),k=y.filter((function(e){return E.includes(e._id)?null:!e.assignment})).filter((function(e){return e})),S=T.filter((function(e){return E.includes(e._id)?null:e.assignment}));o&&(b=k),u&&(b=S);var w=(i||[]).map((function(e){return e.documentId}))||[],O=Object(We.a)().t;return r.a.createElement(qe,null,(b||[]).map((function(e,t){if(!w.includes(e._id)&&c)return null;var a=new Date(parseInt(e.dueDate||"")).getTime(),o=Date.now()>a,i=Math.ceil((Date.now()-a)/864e5),l=i>(e.lateDaysAllowed||0),u=parseInt(e.availableOnDate)<Date.now();if(e.assignment)return r.a.createElement(qe,{key:e._id},(h||[]).map((function(e){return e.assignment})).includes(e._id)?r.a.createElement(Yr.a,{disabled:l,style:{display:"block"},button:!0,onClick:function(t){t.stopPropagation();var a=((n||{}).testResults||[]).find((function(t){return t.test===e._id}));p(e._id,s,a)}},r.a.createElement("div",{style:{display:"flex"}},c&&r.a.createElement(qe,null,r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:!1,value:"checked"})}),r.a.createElement(fs.a,{style:{margin:"auto",minWidth:"30px"}},r.a.createElement(xs.a,{color:"primary"}))),r.a.createElement(vr.a,{primary:"".concat(O("tests.continueAssignment")," ").concat(e.testName)})),l&&r.a.createElement(He.a,{style:{color:"red"}},O("tests.missedDeadline")),e.dueDate&&r.a.createElement("div",null,r.a.createElement(vr.a,{secondary:"\n                     ".concat(O(o?"tests.assignmentWasDueOn":"tests.assignmentIsDueOn")," ").concat(bt()(parseInt(e.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                    ")}))):r.a.createElement(Yr.a,{style:{display:"block"},disabled:Date.now()<parseInt(e.availableOnDate||0)||l||v.includes(e._id),button:!0,onClick:function(t){t.stopPropagation(),m(e._id,s)}},r.a.createElement("div",{style:{display:"flex"}},c&&r.a.createElement(qe,null,r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:!1,value:"checked"})}),r.a.createElement(fs.a,{style:{margin:"auto",minWidth:"30px"}},r.a.createElement(xs.a,{color:"primary"}))),r.a.createElement(vr.a,{primary:"".concat(O("tests.startAssignment")," ").concat(e.testName)})),l&&r.a.createElement(He.a,{style:{color:"red"}},O("tests.missedDeadline")),v.includes(e._id)&&r.a.createElement(He.a,{style:{color:"red"}},O("tests.excused")),e.availableOnDate&&r.a.createElement("div",null,r.a.createElement(vr.a,{secondary:"\n                         ".concat(O(u?"tests.assignmentHasOpenedOn":"tests.assignmentWillOpenOn")," ").concat(bt()(parseInt(e.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                      ")})),e.dueDate&&r.a.createElement("div",null,r.a.createElement(vr.a,{secondary:"".concat(O(l?"tests.wasDueOn":"tests.DueOn")," ").concat(bt()(parseInt(e.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                          ")})),e.allowLateSubmission&&!l&&r.a.createElement(qe,null,r.a.createElement(vr.a,{secondary:"".concat(e.latePenalty,"% ").concat(O("tests.latePenalty"),"\n                      ")}),r.a.createElement(vr.a,{secondary:"".concat(O("tests.closesOn")," ").concat(bt()(parseInt(e.dueDate)+864e5*e.lateDaysAllowed).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                          ")})),e.allowLateSubmission&&!l&&o&&r.a.createElement(He.a,{style:{color:"red"}},"".concat(O("tests.latePenaltyAccumulated")," ").concat(i*e.latePenalty,"%"))));if(!e.assignment){var d=-1!==((n||{}).testResults||[]).findIndex((function(t){return t.test===e._id}));return r.a.createElement(qe,{key:e._id},r.a.createElement(Yr.a,{disabled:Date.now()<parseInt(e.availableOnDate)||l||d,style:{display:"block"},button:!0,onClick:function(t){t.stopPropagation(),f(e,"startTestConfirmation")},key:e._id},r.a.createElement("div",{style:{display:"flex"}},c&&r.a.createElement(qe,null,r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:!1,value:"checked"})}),r.a.createElement(fs.a,{style:{margin:"auto",minWidth:"30px"}},r.a.createElement(Os.a,{color:"primary"}))),r.a.createElement(vr.a,{primary:"".concat(O("tests.startTest")," ").concat(e.testName)}),r.a.createElement(He.a,{style:{marginTop:"8px"},variant:"caption",color:"final"===e.testType||"midterm"===e.testType?"error":"inherit"},O("tests.".concat(e.testType)))),e.availableOnDate&&r.a.createElement("div",null,r.a.createElement(vr.a,{secondary:"".concat(O(u?"tests.testHasOpenedOn":"tests.testWillOpenOn")," ").concat(bt()(parseInt(e.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n              ")})),e.dueDate&&r.a.createElement("div",null,r.a.createElement(vr.a,{secondary:"\n                      ".concat(O(l?"tests.testClosedOn":"tests.testClosesOn")," \n                      ").concat(bt()(parseInt(e.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),"\n                    ")})),l&&r.a.createElement(He.a,{style:{color:"red"}},O("tests.missedDeadline"))))}})))})),el=n(264),tl=n.n(el),nl=Object(c.b)((function(e){return{course:e.common.selectedCourse,testResults:e.studentTest.testResults,studentId:e.authentication.userId,token:e.authentication.token}}),(function(e){return{onReviewTest:function(t,n,a){e(Pe(n._id,!0,a,!1,t))}}}))((function(e){var t=e.testResults,n=e.isTest,a=e.isAssignment,o=e.folder,s=e.isModules,i=e.course,c=e.onReviewTest,l=(e.studentId,e.token),u=Object(We.a)().t,d=(o||[]).map((function(e){return e.documentId}))||[];return r.a.createElement(qe,null,((t||{}).testResults||[]).map((function(e,o){if(!e.closed||e.isExcused)return null;var m=(e||{}).test,p=((i||{}).tests||[]).find((function(e){return e._id===m}))||{};if(p.course!==i._id)return null;if(!((t||{}).testResults.findIndex((function(e){return e.closed}))>-1))return r.a.createElement(He.a,{variant:"subtitle1"},u(n?"tests.notCompletedTests":"tests.notCompletedAssignments"));function f(e,t){return{info:e,value:t}}var g=[((p||{}).sectionWeights||{}).mcSection?f(u("testReview.multiplechoicesection"),"".concat(((e||{}).multiplechoiceSection||{}).grade,"%")):null,((p||{}).sectionWeights||{}).essaySection?f(u("testReview.essaysection"),"".concat(((e||{}).essaySection||{}).grade,"%")):null,((p||{}).sectionWeights||{}).speakingSection?f(u("testReview.speakingsection"),"".concat(((e||{}).speakingSection||{}).grade,"%")):null,((p||{}).sectionWeights||{}).fillBlankSection?f(u("testReview.fillintheblankssection"),"".concat(((e||{}).fillInBlanksSection||{}).grade,"%")):null].filter((function(e){return null!==e})),b=r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h5",gutterBottom:!0},u("tests.summary")),r.a.createElement(si.a,{className:tl.a.table,"aria-label":"simple table"},r.a.createElement(ii.a,null,g.map((function(e,t){return r.a.createElement(li.a,{className:0===t?tl.a.MuiTableRow:"",key:e.info},r.a.createElement(ci.a,{className:0===t?tl.a.MuiTableCell:"",component:"th",scope:"row"},e.info),r.a.createElement(ci.a,{className:0===t?tl.a.MuiTableCell:"",align:"right"},e.value))})))));return a&&!p.assignment||n&&p.assignment?null:(!e.graded||p.gradeReleaseDate>Date.now()&&p.gradeReleaseDate||!e.grade&&0!==e.grade)&&e.closed?r.a.createElement(qe,{key:e._id},!s&&r.a.createElement(Qs,{index:o,disabled:!0,noDetails:!0,summary:p.testName+" "+u("tests.".concat(p.testType)),secondaryText:p.gradeReleaseDate>Date.now()?u("tests.gradesReleaseOn")+" "+bt()(parseInt(p.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):u("tests.gradePending")}),s&&d.includes(e.test)&&r.a.createElement(Yr.a,{style:{display:"block"},disabled:!0},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:!0,value:"checked"})}),r.a.createElement(fs.a,{style:{margin:"auto",minWidth:"30px"}},n?r.a.createElement(Os.a,{color:"primary"}):r.a.createElement(xs.a,{color:"primary"})),r.a.createElement(vr.a,{primary:p.testName})),r.a.createElement(vr.a,{secondary:p.gradeReleaseDate>Date.now()?u("tests.gradesReleaseOn")+" "+bt()(parseInt(p.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"):u("tests.gradePending")}))):r.a.createElement(qe,{key:e._id},!s&&r.a.createElement(Qs,{index:o,summary:"".concat(p.testName," ").concat(p.testType.charAt(0).toUpperCase()+p.testType.slice(1)," ").concat((e||{}).grade,"%")},b,r.a.createElement(pt.a,{fullWidth:!0,color:"primary",onClick:function(){return c(e,p,l)}},n?u("tests.reviewTest"):null,a?u("tests.reviewAssignment"):null)),s&&d.includes(e.test)&&r.a.createElement(Yr.a,{button:!0,onClick:function(){return c(e,p,l)},style:{display:"block"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:!0,value:"checked"})}),r.a.createElement(fs.a,{style:{margin:"auto",minWidth:"30px"}},n?r.a.createElement(Os.a,{color:"primary"}):r.a.createElement(xs.a,{color:"primary"})),r.a.createElement(vr.a,{primary:"".concat(p.testName," ").concat((e||{}).grade,"%")}))))})))})),al=Object(c.b)((function(e){return{course:e.common.selectedCourse}}))((function(e){var t=e.folder,n=void 0===t?[]:t,a=e.course,o=(a.tests||[]).filter((function(e){return!e.assignment})).map((function(e){return e._id})),s=(a.tests||[]).filter((function(e){return e.assignment})).map((function(e){return e._id})),i=n.find((function(e){return s.includes(e.documentId)})),c=n.find((function(e){return o.includes(e.documentId)})),l=Object(We.a)().t;return r.a.createElement(qe,null,r.a.createElement(kc,{isModules:!0,folder:n}),i&&r.a.createElement(Yr.a,{style:{background:"#2196f3"}},r.a.createElement(He.a,{style:{color:"white"}},l("studentModules.assignments"))),r.a.createElement("div",null,r.a.createElement(Xc,{folder:n,isAssignment:!0,isModules:!0}),r.a.createElement(nl,{folder:n,isModules:!0,isAssignment:!0})),c&&r.a.createElement(Yr.a,{style:{background:"#2196f3"}},r.a.createElement(He.a,{style:{color:"white"}},l("studentModules.tests"))),r.a.createElement("div",null,r.a.createElement(Xc,{folder:n,isTest:!0,isModules:!0}),r.a.createElement(nl,{folder:n,isModules:!0,isTest:!0})))})),rl=function e(t){var n,a,o=t.subjects,s=t.topics,i=t.moduleIndex,c=t.subjectIndex,l=t.folderType,u=Object(We.a)().t;return"subject"===l&&(n=o,a=[40,40,50]),"topic"===l&&(n=s,a=[80,80,90]),r.a.createElement(qe,null,r.a.createElement(Yr.a,{style:{paddingLeft:a[0]}},r.a.createElement(vr.a,{primary:u("studentModules.".concat(l,"s"))})),(n||[]).map((function(t,s){var u,d,m,p;return"subject"===l&&(n=o,u="module[".concat(i,"]subject[").concat(s,"]"),d=t.topics,m="topic",p="".concat(s+1," . ").concat(t.subjectName)),"topic"===l&&(n=t.topics,u="module[".concat(i,"]subject[").concat(c,"]topic[").concat(s,"]"),p="".concat(function(e){if(!+e)return!1;for(var t=String(+e).split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],a="",r=3;r--;)a=(n[+t.pop()+10*r]||"")+a;return Array(+t.join("")+1).join("M")+a}(s+1),". ").concat(t.topicName)),r.a.createElement(qe,{key:u},r.a.createElement(Yr.a,{style:{paddingLeft:a[1]}},r.a.createElement(vr.a,{secondary:p})),r.a.createElement("div",{style:{paddingLeft:a[2]}},r.a.createElement(al,{folder:t.folder})),"topic"!==l&&r.a.createElement($r.a,{component:"div",disablePadding:!0},d.length>0&&r.a.createElement(e,{subjects:o,topics:t.topics,moduleIndex:i,subjectIndex:"subject"===l?s:null,folderType:m})))})))},ol=Object(c.b)((function(e){return{students:e.common.students,modules:e.common.modules}}))((function(e){var t=e.modules,n=e.loading,a=Object(We.a)().t,o=r.a.useState(-1),s=Object(vo.a)(o,2),i=s[0],c=s[1];return r.a.createElement($r.a,null,r.a.createElement(Xe,{active:n,transparent:!0}),((t||{}).modules||[]).map((function(e,t){var n=-1!==i&&i!=="module[".concat(t,"]")||e.isDisabled;return r.a.createElement(qe,{key:"module[".concat(t,"]")},r.a.createElement(Yr.a,{style:{background:i==="module[".concat(t,"]")?"#1769aa":"",color:i==="module[".concat(t,"]")?"white":"",opacity:n?.2:1,cursor:n?"auto":"pointer",borderLeft:-1===i||n?"none":"5px solid #2196f3"},button:!n,onClick:function(){var e;n||(e="module[".concat(t,"]"),c(i===e?-1:e))}},r.a.createElement(vr.a,{primaryTypographyProps:{variant:"h6"},primary:"".concat(a("studentModules.module")," ").concat(t+1," ").concat(e.moduleName)}),i==="module[".concat(t,"]")?r.a.createElement(Ts.a,null):r.a.createElement(Ss.a,null)),r.a.createElement(gs.a,{in:i==="module[".concat(t,"]"),timeout:"auto",unmountOnExit:!0},r.a.createElement("div",{style:{borderLeft:"5px solid #2196f3"}},r.a.createElement(al,{folder:e.folder}),r.a.createElement($r.a,{component:"div",disablePadding:!0},e.subjects.length>0&&r.a.createElement(rl,{folderType:"subject",module:e,subjects:e.subjects,moduleIndex:t})))))})))})),sl=Object(c.b)((function(e){return{selectedCourse:e.common.selectedCourse,courses:e.common.courses}}),(function(e){return{openModal:function(t,n){e(Ae(t,n))}}}))((function(e){var t=e.selectedCourse,n=e.courses,a=e.openModal,o=(Object(We.a)().t,n.find((function(e){return e._id===t._id})));return r.a.createElement(qe,null,r.a.createElement($r.a,null,o.resources.map((function(e){var t,n=(e.resource||"").split(".").pop();return"pdf"===n&&(t=r.a.createElement("i",{className:"far fa-file-pdf fa-2x"})),"docx"!==n&&"doc"!==n||(t=r.a.createElement("i",{className:"fas fa-file-word fa-2x"})),"jpeg"!==n&&"jpg"!==n&&"jfif"!==n||(t=r.a.createElement("i",{className:"fas fa-file-image fa-2x"})),"mp4"!==n&&"avi"!==n||(t=r.a.createElement("i",{className:"far fa-file-video fa-2x"})),r.a.createElement(Yr.a,{key:e._id,button:!0,onClick:function(){return a({loadedFile:e.loadedResource,ext:n},"courseResource")}},t&&r.a.createElement("span",{style:{marginRight:20}},t),r.a.createElement(vr.a,{primary:e.resourceName}))}))))})),il=n(643),cl=Object(c.b)((function(e){return{students:e.common.students,course:e.common.selectedCourse,token:e.authentication.token,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn,studentTestResults:e.studentTest.testResults,modalDocument:e.common.modalDocument,isDarkTheme:e.common.isDarkTheme}}))((function(e){var t=e.course,n=e.studentTestResults,a=e.modalDocument,o=(e.students,e.instructorLoggedIn),s=e.studentLoggedIn,i=e.isDarkTheme,c=Object(We.a)().t;if(!t)return null;var l,u=t.tests;(s&&(l=(n.testResults||[]).filter((function(e){return e.graded&&null!==e.grade&&!e.isExcused}))),o)&&(l=(((t.studentsEnrollRequests.filter((function(e){return e.approved||e.droppedOut||e.denied})).map((function(e){return e.student}))||[]||[]).find((function(e){return e._id===a._id}))||{}).testResults||[]).filter((function(e){return e.graded&&null!==e.grade&&!e.isExcused})));var d=function(e,t){return e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:0},m=l.filter((function(e){return e.course===t._id&&u.findIndex((function(t){return t._id===e.test}))>-1})),p=m.map((function(e,t){var n=u.find((function(t){return t._id===e.test})),a=n.testName,r=n.assignment,o=n.createdAt,s=n.availableOnDate;return{x:"".concat(a," (").concat(c(r?"progressReport.assignment":"progressReport.test"),")"),y:e.grade,createdAt:s?parseInt(s):parseInt(o)}})).sort(d),f=m.map((function(e,t){var n=u.find((function(t){return t._id===e.test})),a=n.classAverage,r=n.testName,o=n.assignment,s=n.createdAt,i=n.availableOnDate;return{x:"".concat(r," (").concat(c(o?"progressReport.assignment":"progressReport.test"),")"),y:a,createdAt:i?parseInt(i):parseInt(s)}})).sort(d),g=[{id:c(s?"progressReport.yourProgress":"progressReport.studentProgress"),color:"hsl(193, 70%, 50%)",data:p},{id:c("progressReport.classAverage"),color:"hsl(11, 70%, 50%)",data:f}];return r.a.createElement("div",{style:{height:700,width:"100%"}},r.a.createElement(il.a,{data:g,margin:{top:70,right:10,bottom:150,left:45},xScale:{type:"point"},yScale:{type:"linear",min:0,max:100,stacked:!1,reverse:!1},curve:"natural",axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:0,tickPadding:30,tickRotation:-85,legend:c("progressReport.assignmentsTests"),legendOffset:10,legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:c("progressReport.grade"),legendOffset:-40,legendPosition:"middle"},colors:{scheme:"category10"},lineWidth:5,theme:i?{textColor:"white",background:"#424242",tooltip:{basic:{background:"#424242"},container:{background:"#424242"}}}:{},pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,areaBaselineValue:30,areaOpacity:.05,useMesh:!0,legends:[{anchor:"top",direction:"row",justify:!1,translateX:-28,translateY:-60,itemsSpacing:20,itemDirection:"top-to-bottom",itemWidth:100,itemHeight:74,itemOpacity:.75,symbolSize:18,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",itemTextColor:i?"white":"black",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}],motionStiffness:80}))})),ll=Object(c.b)((function(e){e.common.selectedCourse;var t=JSON.stringify((e.common.selectedCourse||{}).regularOfficeHours),n=JSON.stringify((e.common.selectedCourse||{}).irregularOfficeHours);return{userId:e.authentication.userId,selectedCourse:e.common.selectedCourse,courses:e.common.courses,tab:e.common.tab,coursePanelSection:e.common.coursePanel,assignmentInSession:e.studentTest.assignmentInSession,loadedTestDataInProgress:e.studentTest.loadedTestDataInProgress,token:e.authentication.token,regOfficeHours:t,irregOfficeHours:n,selectedChatUser:e.common.selectedChatUser,modalDocument:e.common.modalDocument,loading:e.common.loading,instructorLoggedIn:e.authentication.instructorLoggedIn,testInSession:e.studentTest.testInSession}}),(function(e){return{fetchCourses:function(t){return e(Ie(t))},fetchTestResults:function(t){return e(h(t))},setTab:function(t){return e(xe(t))},fetchNotifications:function(t){return e(ye(t))},returnToCourses:function(){e({type:"RETURN_TO_COURSES"})},setCourse:function(t){e(_e(t))},closeModal:function(){e({type:"CLOSE_MODAL"})},fetchModules:function(t,n,a){return e(Se(t,n,a))},fetchUser:function(t){return e(re(t))},fetchConfig:function(t){return e(he(t))},fetchStudents:function(t,n,a){return e(Ne(t,n,null,a))}}}))((function(e){var t,n=e.tab,o=e.coursePanelSection,s=e.selectedCourse,i=e.assignmentInSession,c=e.loadedTestDataInProgress,l=e.token,u=e.loading,m=e.userId,p=e.courses,f=e.fetchUser,g=e.fetchConfig,b=e.fetchModules,h=e.fetchStudents,E=e.fetchNotifications,v=e.fetchCourses,y=e.fetchTestResults,T=e.returnToCourses,k=e.regOfficeHours,S=e.irregOfficeHours,w=e.selectedChatUser,O=e.testInSession,C=e.setCourse,x=e.instructorLoggedIn,A=Object(a.useState)(!1),F=Object(vo.a)(A,2),D=F[0],_=F[1],I=Object(d.i)().courseId,j=(p||[]).find((function(e){return e._id===I})),R=Object(d.h)().pathname;return Object(a.useEffect)((function(){var e=(p||[]).find((function(e){return e._id===I}))||{};C(e),l&&(h(I,l),b(I,l),f(l),g(l));var t=s;null!==s&&s||(t={});var n=Fc(s||{},Date.now()),a=n.isIrregOfficeHour,r=n.isRegOfficeHour;_(!(!a&&!r));var o,i=$e()("https://mernstackelearn.herokuapp.com/",{query:{token:l}});i.on("updateStudents",(function(e){"all"!==e.userType&&"student"!==e.userType||e.courseId!==t._id||(h(t._id,l,"noSpinner"),E(l))})),i.on("updateCourses",(function(e){e.userId!==m&&"student"!==e.userType&&"all"!==e.userType||e.courseId!==t._id||"exitCourse"!==e.action||(v(l),E(l),s&&(T(),Je.push("/student-panel/courses")))})),i.on("updateModules",(function(e){"student"===e.userType&&b(t._id,l,"noSpinner")}));!function e(n){o=setTimeout((function(){var a=Fc(t),r=a.isIrregOfficeHour,s=a.isRegOfficeHour;_(!(!r&&!s)),n?e(Ic(t,Date.now())):clearTimeout(o)}),n-Date.now())}(Ic(t,Date.now()));var c=(t.lessons||[]).filter((function(e){return e.availableOnDate&&Date.now()<parseInt(e.availableOnDate)})).map((function(e){return parseInt(e.availableOnDate)})),u=(t.tests||[]).filter((function(e){return e.availableOnDate&&Date.now()<parseInt(e.availableOnDate)})).map((function(e){return parseInt(e.availableOnDate)})),d=(t.tests||[]).filter((function(e){return e.dueDate&&Date.now()<parseInt(e.dueDate)&&!e.allowLateSubmission})).map((function(e){return parseInt(e.dueDate)})),k=[];(t.tests||[]).forEach((function(e){if(e.allowLateSubmission&&Date.now()<parseInt(e.dueDate)+864e5*e.lateDaysAllowed)for(var t=parseInt(e.dueDate);t<parseInt(e.dueDate)+864e5*e.lateDaysAllowed;t+=864e5)t>Date.now()&&k.push(t)}));var S,w=(t.tests||[]).filter((function(e){return Date.now()<parseInt(e.dueDate)+864e5*e.lateDaysAllowed&&e.allowLateSubmission})).map((function(e){return parseInt(e.dueDate)+864e5*e.lateDaysAllowed})),O=(t.tests||[]).filter((function(e){return e.gradeReleaseDate&&Date.now()<parseInt(e.gradeReleaseDate)})).map((function(e){return parseInt(e.gradeReleaseDate)})),x=[];return[].concat(Object(Vr.a)(c),Object(Vr.a)(u),Object(Vr.a)(d),Object(Vr.a)(w),k,Object(Vr.a)(O)).forEach((function(e){S=setTimeout((function(){x.push(S),v(l),y(l)}),e-Date.now())})),function(){x.forEach((function(e){clearTimeout(e)})),clearTimeout(o),i.disconnect(),C(null)}}),[k,S,I]),!j&&p?r.a.createElement(d.a,{to:"/student-panel/courses"}):R==="/student-panel/course/".concat(I)&&x?r.a.createElement(d.a,{to:"/instructor-panel/course/".concat(I)}):R.includes("/student-panel/course")&&O?r.a.createElement(d.a,{to:"/student-panel/test-in-session"}):s?("assignment"===o&&(t=r.a.createElement(qe,null,r.a.createElement(ho,{value:n,index:0},i&&c?r.a.createElement(Zc,{startingValues:c,isAssignment:!0}):r.a.createElement(Xc,{isAssignment:!0})),r.a.createElement(ho,{value:n,index:1},r.a.createElement(nl,{isAssignment:!0})))),"test"===o&&(t=r.a.createElement(qe,null,r.a.createElement(ho,{value:n,index:0},r.a.createElement(Xc,{isTest:!0})),r.a.createElement(ho,{value:n,index:1},r.a.createElement(nl,{isTest:!0})))),"chat"===o&&(t=r.a.createElement(qe,null,r.a.createElement(ho,{value:n,index:0},r.a.createElement(ps,{key:w,isOfficeHour:D,studentPanel:!0})),r.a.createElement(ho,{value:n,index:1},w&&s&&r.a.createElement(ls,{key:(w||{})._id,isOfficeHour:D,userType:"student"})))),"lesson"===o&&(t=r.a.createElement(qe,null,r.a.createElement(ho,{value:n,index:0},r.a.createElement(kc,null)),r.a.createElement(ho,{value:n,index:1}))),"modules"===o&&(t=r.a.createElement(qe,null,r.a.createElement(ho,{value:n,index:0},r.a.createElement(ol,{loading:u})))),"progressReport"===o&&(t=r.a.createElement(qe,null,r.a.createElement(ho,{value:n,index:0},r.a.createElement(cl,null)))),"resources"===o&&(t=r.a.createElement(sl,null)),"testSession"===o||"testLesson"===o?null:t):null})),ul=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=qk.getState().authentication.formIsSignup,n={},a=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,r=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/;return e.firstName||(n.firstName=ua.t("auth.errors.enterFirstName")),e.lastName||(n.lastName=ua.t("auth.errors.enterLastName")),/^[ a-zA-Z\xc0-\xff\u00f1\u00d1]*$/g.test(e.firstName)||(n.firstName=ua.t("auth.errors.enterFirstNameOnlyAlpha")),/^[ a-zA-Z\xc0-\xff\u00f1\u00d1]*$/g.test(e.lastName)||(n.lastName=ua.t("auth.errors.enterLastNameOnlyAlpha")),e.type||(n.type=ua.t("auth.errors.makeSelection")),e.dob||(n.dob=ua.t("auth.errors.enterDateOfBirth")),a.test(e.email)||(n.email=ua.t("auth.errors.enterValidEmail")),e.email||(n.email=ua.t("auth.errors.required")),!r.test(e.password)&&t&&(n.password=ua.t("auth.errors.passwordConditions")),e.password||t||(n.password=ua.t("auth.errors.required")),e.confirmPassword?e.confirmPassword!==e.password&&(n.confirmPassword=ua.t("auth.errors.passwordMismatched")):n.confirmPassword=ua.t("auth.errors.required"),n},dl=n(151),ml=n.n(dl),pl=function(e){return r.a.createElement("button",{type:e.type,disabled:e.disabled,className:e.modal?[ml.a.ModalButton,e.isError?ml.a.ModalError:e.isDarkTheme?ml.a.darkBackground:ml.a.lightBackground].join(" "):[e.halfWidth?ml.a.HalfWidth:ml.a.FullWidth,ml.a.Button,e.isError?ml.a.Error:ml.a.SubmitForm].join(" "),onClick:e.clicked},e.children)},fl=n(86),gl=n.n(fl),bl=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isValid:!0},e}return Object(Rt.a)(n,[{key:"setFormValidity",value:function(e){this.setState({isValid:e})}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.loading,o=n.formValues,s=n.formIsSignup,i=n.completed,c=n.page,l=n.changeDOB,u=n.triggerSignupValidation,d=n.submitForm,m=n.pristine,p=n.toggleLoginSubmitForm,f=n.formIsForgotPassword,g=n.triggerPasswordResetValidation,b=n.triggerSigninValidation,h=n.forgotPassword,E=n.formErrors,v=n.resendVerificationEmail,y=n.t,T=(n.i18n,ul(o||{})||{}),k=!!(T.firstName||T.lastName||T.dob||T.sex),S=!!(T.email||T.password||T.type),w=!(!T.email&&!T.type),O=[{value:"",primaryText:""},{value:"student",primaryText:y("auth.student")},{value:"instructor",primaryText:y("auth.instructor")}],C=(y("languages.english"),y("languages.spanish"),(!S||this.state.isValid)&&!E.asyncError||!1),x=k&&!this.state.isValid;return e=s?r.a.createElement(qe,null,r.a.createElement("div",{className:gl.a.header},r.a.createElement(He.a,{style:{textAlign:"center"},variant:"h5"},y("auth.signUp")),r.a.createElement("div",{className:gl.a.steps},r.a.createElement(co,{completed:i?[0]:null,size:"small",stepsLabels:["1","2"],activeStep:c-1}))),r.a.createElement(ba.a,{name:"firstName",error:T.firstName,component:ka,label:y("auth.firstName")}),r.a.createElement(ba.a,{name:"lastName",error:T.lastName,component:ka,label:y("auth.lastName")}),r.a.createElement(ba.a,{error:T.dob,name:"dob",fullWidth:!0,component:ur,type:"date",maxDate:new Date(Date.now()-943488e5),options:{disableFuture:!0,label:y("auth.dob")},handleChange:l}),r.a.createElement("div",{className:gl.a.ButtonContainer},r.a.createElement(pl,{halfWidth:!0,type:"submit",isError:x,clicked:function(){if(k||m)return u(),void t.setFormValidity(!1);d(!0,!1)}},y("auth.buttons.next")),r.a.createElement(pl,{halfWidth:!0,clicked:function(){p(),t.setFormValidity(!0)}},y(s?"auth.buttons.switchToSignIn":"auth.buttons.switchToSignUp")))):r.a.createElement(qe,null,r.a.createElement("div",{id:"123",className:gl.a.header},r.a.createElement(He.a,{style:{textAlign:"center",marginBottom:30},gutterBottom:!0,variant:"h5"},y("auth.signIn"))),r.a.createElement(ba.a,{name:"email",error:T.email,component:ka,label:y("auth.email")}),r.a.createElement(ba.a,{error:T.password,name:"password",component:ka,label:y("auth.password"),type:"password"}),r.a.createElement(ba.a,{name:"type",error:T.type,component:Gs,label:y("auth.accountType"),options:O,variant:"outlined"}),E.type===y("auth.errors.notVerifiedCheckEmail")&&r.a.createElement("div",{className:gl.a.ResendVerificationEmail},r.a.createElement("span",{onClick:function(){v(o.email,o.type),t.setFormValidity(!0)}},y("auth.buttons.resendEmail"))),r.a.createElement("div",{className:gl.a.ButtonContainer},r.a.createElement(pl,{halfWidth:!0,isError:!C,clicked:function(){if(S||m)return t.setFormValidity(!1),void b();d(!1,!1)}},y(s?"auth.buttons.switchToSignIn":"auth.signIn")),r.a.createElement(pl,{halfWidth:!0,clicked:function(){p(),t.setFormValidity(!0)}},y(s?"auth.buttons.switchToSignIn":"auth.buttons.switchToSignUp"))),r.a.createElement("div",{style:{margin:"15px 0"}},r.a.createElement("span",{className:gl.a.ForgotPassword,onClick:function(){h(),t.setFormValidity(!0)}},y("auth.forgotPassword")))),f&&(e=r.a.createElement(qe,null,r.a.createElement("div",{className:gl.a.header},r.a.createElement(He.a,{style:{textAlign:"center"},gutterBottom:!0,variant:"h5"},y("auth.resetPassword"))),r.a.createElement("p",null,y("auth.enterEmailToResetPassword")),r.a.createElement(ba.a,{name:"email",error:T.email,component:ka,label:y("auth.email")}),r.a.createElement(ba.a,{name:"type",error:T.type,component:Gs,label:y("auth.accountType"),options:O,variant:"outlined"}),r.a.createElement("div",{className:gl.a.ButtonContainer},r.a.createElement(pl,{halfWidth:!0,clicked:function(e){p(e,"signin"),t.setFormValidity(!0)}},y("auth.buttons.returnToSignIn")),r.a.createElement(pl,{halfWidth:!0,isError:w&&!this.state.isValid,clicked:function(){if(w||m)return t.setFormValidity(!1),void g();d(!1,!0)}},y("auth.buttons.sendLink"))))),r.a.createElement(qe,null,r.a.createElement(Xe,{transparent:!0,active:a}),r.a.createElement("div",{className:gl.a.Auth},e))}}]),n}(a.Component),hl=Object(Mt.a)({form:"authenticationForm",validate:ul,destroyOnUnmount:!1,touchOnBlur:!0})(Object(Qa.a)("common")(bl)),El=Object(c.b)((function(e){return{formValues:Object(nt.a)("authenticationForm")(e),formErrors:Object(Pt.a)("authenticationForm")(e),loading:e.authentication.loading,formIsSignup:e.authentication.formIsSignup,formIsForgotPassword:e.authentication.formIsForgotPassword}}),(function(e){return{triggerSignupValidation:function(){e(Object(Bt.d)("authenticationForm","firstName")),e(Object(Bt.d)("authenticationForm","lastName")),e(Object(Bt.d)("authenticationForm","dob"))},triggerSigninValidation:function(){e(Object(Bt.d)("authenticationForm","email")),e(Object(Bt.d)("authenticationForm","password")),e(Object(Bt.d)("authenticationForm","type"))},triggerPasswordResetValidation:function(){e(Object(Bt.d)("authenticationForm","email")),e(Object(Bt.d)("authenticationForm","type"))},toggleLoginSubmitForm:function(t,n){e(X(t,n)),e(Object(Bt.b)("authenticationForm"))},forgotPassword:function(){e({type:"FORGOT_PASSWORD_PAGE"}),e(Object(Bt.b)("authenticationForm"))},changeDOB:function(t){e(Object(Bt.a)("authenticationForm","dob",t))},resendVerificationEmail:function(t,n){e(function(e,t){return{type:"RESEND_EMAIL_VERIFICATION_START",payload:{email:e,accountType:t}}}(t,n))}}}))(hl),vl=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isValid:!0},e.triggerValidation=function(){var t=e.props,n=t.touchField,a=t.formValues,r=void 0===a?{}:a;["type","password","confirmPassword","email"].forEach((function(e){n(e)}));var o=ul(r)||{};!!(o.email||o.password||o.confirmPassword||o.type)&&e.setFormValidity(!1)},e}return Object(Rt.a)(n,[{key:"setFormValidity",value:function(e){this.setState({isValid:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.formIsSignup,a=t.formValues,o=void 0===a?{}:a,s=t.page,i=t.completed,c=t.previousPage,l=(t.nextPage,t.toggleLoginSubmitForm),u=(t.touchField,t.loading),d=t.pristine,m=t.setFormPage,p=t.submitForm,f=t.formErrors,g=t.t,b=[{value:"",primaryText:""},{value:"student",primaryText:g("auth.student")},{value:"instructor",primaryText:g("auth.instructor")}],h=ul(o)||{},E=!!(h.email||h.password||h.confirmPassword||h.type),v=(!E||this.state.isValid)&&!f.asyncError||!1;return r.a.createElement(qe,null,r.a.createElement(Xe,{transparent:!0,active:u}),r.a.createElement("div",{className:gl.a.Auth},r.a.createElement("div",{className:gl.a.header},r.a.createElement(He.a,{style:{textAlign:"center"},variant:"h5"},g("auth.signUp"))),r.a.createElement("div",{className:gl.a.steps},r.a.createElement(co,{size:"small",stepsLabels:["1","2"],activeStep:s-1,completed:i?[0,1]:[0]})),r.a.createElement(ba.a,{name:"type",error:h.type,component:Gs,label:g("auth.accountType"),variant:"outlined",options:b}),r.a.createElement(ba.a,{name:"email",error:h.email,component:ka,label:g("auth.email")}),r.a.createElement(ba.a,{name:"password",error:h.password,component:ka,label:g("auth.password"),type:"password"}),r.a.createElement(ba.a,{name:"confirmPassword",error:h.confirmPassword,component:ka,label:g("auth.confirmPassword"),type:"password"}),r.a.createElement("div",{className:gl.a.ButtonContainer},r.a.createElement(pl,{halfWidth:!0,clicked:function(e){e.preventDefault(),c()}},g("auth.buttons.back")),r.a.createElement(pl,{halfWidth:!0,clicked:function(){E||d?e.triggerValidation():p(!0)},isError:!v},g("auth.buttons.submit"))),r.a.createElement("div",{className:gl.a.ButtonContainer},r.a.createElement(pl,{clicked:function(){l(),m(1)}},g(n?"auth.buttons.switchToSignIn":"auth.buttons.switchToSignUp")))))}}]),n}(a.Component),yl=Object(Mt.a)({form:"authenticationForm",validate:ul,destroyOnUnmount:!1,touchOnBlur:!0})(Object(Qa.a)("common")(vl)),Tl=Object(c.b)((function(e){return{formValues:Object(nt.a)("authenticationForm")(e),formErrors:Object(Pt.a)("authenticationForm")(e),loading:e.authentication.loading,error:e.authentication.error,isAuthenticated:null!==e.authentication.token,authRedirectPath:e.authentication.authRedirectPath,formIsSignup:e.authentication.formIsSignup,formIsForgotPassword:e.authentication.formIsForgotPassword}}),(function(e){return{touchField:function(t){e(Object(Bt.d)("authenticationForm",t))},toggleLoginSubmitForm:function(t){e(X(t)),e(Object(Bt.b)("authenticationForm"))},setFormPage:function(t){e(de(t))}}}))(yl),kl=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){return Object(jt.a)(this,n),t.apply(this,arguments)}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this,t=this.props.page,n=ul(this.props.formValues)||{},a=!n.firstName&&!n.lastName&&!n.sex&&!n.dob,o=!n.type&&!n.email&&!n.password&&!n.confirmPassword;return this.props.token&&this.props.instructorLoggedIn?r.a.createElement(d.a,{to:"/instructor-panel/courses"}):this.props.token&&this.props.studentLoggedIn?r.a.createElement(d.a,{to:"/student-panel/courses"}):r.a.createElement(qe,null,(1===t||!this.props.formIsSignup)&&r.a.createElement(El,{page:t,completed:a,submitForm:function(t,n){t||e.props.formIsForgotPassword||e.props.login(e.props.formValues),t&&e.props.setSignupFormPage(2),e.props.formIsForgotPassword&&e.props.sendPasswordResetLink(e.props.formValues)}}),2===t&&this.props.formIsSignup&&r.a.createElement(Tl,{page:t,previousPage:function(){return e.props.setSignupFormPage(1)},nextPage:function(){return e.props.setSignupFormPage(3)},completed:o,submitForm:function(t){return e.props.submitAuthForm(Object(It.a)(Object(It.a)({},e.props.formValues),{},{language:localStorage.getItem("i18nextLng")||"en"}),t)}}))}}]),n}(a.Component),Sl=Object(Mt.a)({form:"authenticationForm",validate:ul,destroyOnUnmount:!0,touchOnBlur:!1})(kl),wl=Object(c.b)((function(e){return{formValues:Object(nt.a)("authenticationForm")(e),formIsSignup:e.authentication.formIsSignup,formIsForgotPassword:e.authentication.formIsForgotPassword,page:e.authentication.signupFormPage,token:e.authentication.token,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn}}),(function(e){return{login:function(t,n){e({type:"AUTHENTICATION_START",payload:{formData:t}})},submitAuthForm:function(t,n){return e({type:"CREATE_ACCOUNT_START",payload:{formData:t}})},sendPasswordResetLink:function(t){e({type:"PASSWORD_RESET_LINK_START",payload:{authData:t}})},setSignupFormPage:function(t){e(de(t))}}}))(Sl),Ol=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){return Object(jt.a)(this,n),t.apply(this,arguments)}return Object(Rt.a)(n,[{key:"componentDidMount",value:function(){this.props.onLogout()}},{key:"render",value:function(){return r.a.createElement(d.a,{to:"/authentication"})}}]),n}(a.Component),Cl=Object(c.b)(null,(function(e){return{onLogout:function(){e(pe())}}}))(Ol),xl=n(403),Al=n.n(xl),Fl=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isValid:!0},e.onSubmit=function(){var t=e.props.formErrors;t.password||t.confirmPassword?e.setState({isValid:!1}):e.props.submitNewPassword(e.props.formValues,e.props.match.params.token,e.props.match.params.accountType)},e}return Object(Rt.a)(n,[{key:"setFormValidity",value:function(e){this.setState({isValid:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.formErrors,a=t.triggerPasswordResetValidation,o=t.loading,s=t.t,i=n.password||n.confirmPassword,c=r.a.createElement("div",null,r.a.createElement(Xe,{transparent:!0,active:o}),r.a.createElement(ba.a,{name:"password",component:ka,label:s("account.newPassword"),type:"password"}),r.a.createElement(ba.a,{name:"confirmPassword",component:ka,label:s("account.confirmPassword"),type:"password"}),r.a.createElement("div",{className:Al.a.ButtonContainer},r.a.createElement(pl,{isError:!this.state.isValid&&i,btnType:"SubmitForm",clicked:function(){if(i)return a(),void e.setFormValidity(!1);e.onSubmit()}},s("account.buttons.setNewPassword"))));return r.a.createElement("div",{className:Al.a.Auth},r.a.createElement(He.a,{style:{margin:"20px 0"},variant:"h5"},s("account.passwordReset")),c)}}]),n}(a.Component),Dl=Object(Mt.a)({form:"passwordReset",validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/;return n.test(e.password)||(t.password=ua.t("account.errors.passwordConditions")),e.password||(t.password=ua.t("account.errors.required")),e.confirmPassword?e.confirmPassword!==e.password&&(t.confirmPassword=ua.t("account.errors.passwordMismatched")):t.confirmPassword=ua.t("account.errors.required"),t},destroyOnUnmount:!0,touchOnBlur:!0})(Fl),_l=Object(c.b)((function(e){return Object(yo.a)({loading:e.authentication.loading,error:e.authentication.error,isAuthenticated:null!==e.authentication.token,authRedirectPath:e.authentication.authRedirectPath,formValues:Object(nt.a)("passwordReset")(e),formErrors:Object(Pt.a)("passwordReset")(e)},"loading",e.authentication.loading)}),(function(e){return{submitNewPassword:function(t,n,a){return e(function(e,t,n){return{type:"CHANGE_PASSWORD_START",payload:{authData:e,token:t,accountType:n}}}(t,n,a))},triggerPasswordResetValidation:function(){e(Object(Bt.d)("passwordReset","password")),e(Object(Bt.d)("passwordReset","confirmPassword"))}}}))(Object(Qa.a)("common")(Dl)),Il=n(404),jl=n.n(Il),Rl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return e.password||(t.password=ua.t("auth.errors.required")),t},Nl=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(){e.props.touchField("password"),Rl(e.props.formValues).password||e.props.verifyAccount((e.props.formValues||{}).password,e.props.match.params.token,e.props.match.params.accountType)},e.onLoginPage=function(){Je.push("/authentication")},e.handleForgotPasswordPage=function(t){Je.push("/authentication"),e.props.forgotPasswordPage()},e}return Object(Rt.a)(n,[{key:"componentDidMount",value:function(){localStorage.removeItem("userFirstName"),localStorage.removeItem("userLastName"),localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),localStorage.removeItem("userType"),localStorage.removeItem("profilePicture"),localStorage.removeItem("refreshTokenExpiration")}},{key:"render",value:function(){var e=this.props.t,t=r.a.createElement("div",null,r.a.createElement(Xe,{transparent:!0,active:this.props.loading}),r.a.createElement(ba.a,{name:"password",component:ka,label:e("auth.password"),type:"password"}),r.a.createElement("div",{className:jl.a.ButtonContainer},(this.props.formErrors.password||"").includes("alreadyVerified")?r.a.createElement(pt.a,{variant:"outlined",color:"primary",onClick:this.onLoginPage},e("auth.signIn")):r.a.createElement(pt.a,{variant:"outlined",color:"primary",onClick:this.onSubmit},e("auth.buttons.verifyAccount"))),r.a.createElement("div",{style:{margin:"15px 0"}},r.a.createElement("span",{style:{color:"#2196f3",textAlign:"left",cursor:"pointer",margin:"15px 0"},onClick:this.handleForgotPasswordPage},e("auth.forgotPassword"))));return r.a.createElement("div",{className:jl.a.Auth},r.a.createElement(He.a,{style:{margin:"20px 0"},variant:"h5"},e("auth.accountVerification")),t)}}]),n}(a.Component),Ll=Object(Mt.a)({form:"verifyAccount",destroyOnUnmount:!0,touchOnBlur:!0,validate:Rl})(Nl),Pl=Object(c.b)((function(e){return{formValues:Object(nt.a)("verifyAccount")(e),formErrors:Object(Pt.a)("verifyAccount")(e),loading:e.authentication.loading}}),(function(e){return{verifyAccount:function(t,n,a){return e(function(e,t,n){return{type:"ACCOUNT_VERIFICATION_START",payload:{password:e,token:t,userType:n}}}(t,n,a))},forgotPasswordPage:function(){e({type:"FORGOT_PASSWORD_PAGE"})},touchField:function(t){e(Object(Bt.d)("verifyAccount",t))}}}))(Object(Qa.a)("common")(Ll)),Bl=n(1256),Ml=n(661),ql=n.n(Ml),Ul=Object(rt.a)((function(e){var t;return t={root:{display:"flex",flexGrow:1,width:"100%",background:"white",height:"100%"},smallFontSize:{fontSize:"0.7em"},drawer:Object(yo.a)({width:0},e.breakpoints.up("sm"),{width:200,flexShrink:0}),appBarNoDrawer:{zIndex:2,marginLeft:0,backgroundColor:e.palette.primary.mainColor},appBar:Object(yo.a)({marginLeft:0,zIndex:2,backgroundColor:e.palette.primary.mainColor},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(200,"px)"),marginLeft:200}),menuButton:Object(yo.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar},Object(yo.a)(t,"toolbar",e.mixins.toolbar),Object(yo.a)(t,"drawerPaper",{width:200,overflowX:"hidden"}),Object(yo.a)(t,"content",{width:"0",flexGrow:1,marginBottom:80}),Object(yo.a)(t,"authContent",{width:"0",flexGrow:1}),Object(yo.a)(t,"primaryColor",{color:"#2196f3"}),Object(yo.a)(t,"whiteColor",{color:"white",textAlign:"center"}),Object(yo.a)(t,"blueHeader",{backgroundColor:"#2196f3"}),Object(yo.a)(t,"toolbarLayout",{justifyContent:"space-between",minHeight:"64px"}),Object(yo.a)(t,"center",{textAlign:"center"}),Object(yo.a)(t,"bottomFixed",Object(yo.a)({},"@media (max-width:500px)",{position:"fixed",bottom:"0"})),Object(yo.a)(t,"smallFontSize",{fontSize:"0.7em"}),Object(yo.a)(t,"panelContainer",{width:"100%",background:"white",margin:"30px auto 20px auto",padding:"20px 10px 10px 10px",height:"100%"}),Object(yo.a)(t,"panelContainerBreakPoints",Object(yo.a)({},"@media (min-width:500px)",{margin:"80px auto 0 auto"})),Object(yo.a)(t,"CustomTabBar",Object(yo.a)({position:"absolute",width:"100%"},"@media (min-width:500px)",{top:"64px"})),t})),Ql=Object(rt.a)((function(e){var t;return t={root:{display:"flex",flexGrow:1,width:"100%",background:"#424242",height:"100%"},smallFontSize:{fontSize:"0.7em"},drawer:Object(yo.a)({width:0},e.breakpoints.up("sm"),{width:200,flexShrink:0}),appBarNoDrawer:{zIndex:2,marginLeft:0,backgroundColor:e.palette.primary.mainColor},appBar:Object(yo.a)({marginLeft:0,zIndex:2,backgroundColor:e.palette.primary.mainColor},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(200,"px)"),marginLeft:200}),menuButton:Object(yo.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar},Object(yo.a)(t,"toolbar",e.mixins.toolbar),Object(yo.a)(t,"drawerPaper",{width:200,overflowX:"hidden"}),Object(yo.a)(t,"content",{width:"0",flexGrow:1,marginBottom:80}),Object(yo.a)(t,"authContent",{width:"0",flexGrow:1}),Object(yo.a)(t,"primaryColor",{color:"#2196f3"}),Object(yo.a)(t,"whiteColor",{color:"white",textAlign:"center"}),Object(yo.a)(t,"blueHeader",{backgroundColor:"#01579b"}),Object(yo.a)(t,"toolbarLayout",{justifyContent:"space-between",minHeight:"64px"}),Object(yo.a)(t,"center",{textAlign:"center"}),Object(yo.a)(t,"bottomFixed",Object(yo.a)({},"@media (max-width:500px)",{position:"fixed",bottom:"0"})),Object(yo.a)(t,"smallFontSize",{fontSize:"0.7em"}),Object(yo.a)(t,"panelContainer",{width:"100%",background:"#424242",margin:"30px auto 20px auto",padding:"20px 10px 10px 10px",height:"100%"}),Object(yo.a)(t,"panelContainerBreakPoints",Object(yo.a)({},"@media (min-width:500px)",{margin:"80px auto 0 auto"})),Object(yo.a)(t,"CustomTabBar",Object(yo.a)({position:"absolute",width:"100%"},"@media (min-width:500px)",{top:"64px"})),Object(yo.a)(t,"AppStyle",{backgroundColor:e.palette.primary.dark}),t})),Hl=n(1261),Gl=n(1254),Wl=Object(d.k)(Object(c.b)((function(e){return{course:e.common.selectedCourse,courses:e.common.courses,lessons:e.common.courseLessons,coursePanel:e.common.coursePanel,selectedChatUser:e.common.selectedChatUser,editing:e.common.editing,tab:e.common.tab,tabLabels:e.common.tabLabels,token:e.authentication.token,userId:e.authentication.userId,studentLoggedIn:e.authentication.studentLoggedIn,instructorLoggedIn:e.authentication.instructorLoggedIn,testInSession:e.studentTest.testInSession,notifications:e.common.notifications,configuration:e.common.configuration}}),(function(e){return{setCourseForm:function(){return e({type:"SET_CREATE_COURSE_FORM"})},setLessonForm:function(t,n){return e({type:"SET_CREATE_LESSON_FORM",initialValues:{slides:[{}],published:!1,lessons:t,course:n}})},setTab:function(t){e(xe(t))},setTabLabels:function(t){e(Ce(t))},cancelEditing:function(){e({type:"CANCEL_EDITING"})},resetTabContent:function(){e({type:"CLEAR_INSTRUCTOR_TAB_CONTENT"}),e(x(1))},fetchNotifications:function(t){e(ye(t))},markAsSeen:function(t,n){e(ke(t,n))},updateActivity:function(t,n){e(fe(t,n))}}}))((function(e){var t=e.width,n=(e.match,e.location),o=e.tab,s=e.tabLabels,i=e.coursePanel,c=e.selectedChatUser,l=e.course,u=e.courses,d=e.lessons,m=e.token,p=e.studentLoggedIn,f=e.instructorLoggedIn,g=e.testInSession,b=(e.notifications,e.setTab),h=e.resetTabContent,E=e.setCourseForm,v=e.setLessonForm,y=(e.setTestForm,e.setTabLabels),T=e.cancelEditing,k=e.configuration,S=e.classes;Object(a.useEffect)((function(){p&&y(0===s.length?["All courses","Your courses"]:s),f&&y(0===s.length?["Courses","New course"]:s)}),[m]);var w=Object(We.a)("common").t;if((p||f)&&l&&"modules"===i)return null;if(l&&"resources"===i)return null;if(p&&l&&"lesson"===i)return null;if(p&&l&&"progressReport"===i)return null;if(p&&g)return null;if("/account"===n.pathname)return null;if("/configuration"===n.pathname)return null;var O=!c&&"chat"===i||(k||{}).instructorCoursesLimit<=(u||[]).length&&(k||{}).isInstructorCoursesLimit&&f;return r.a.createElement(Oo.a,{className:t<500?S.bottomFixed:S.appBar,position:"static",color:"default"},!("category"===i)&&r.a.createElement(Hl.a,{centered:!0,value:o,onChange:function(e,t){o!==t&&(b(t),p||(h(),1!==t||l||E(),1===t&&"lesson"===i&&l&&v(d,l),0!==t||l||(y(["Courses","New course"]),T()),2===t&&"test"===i&&f&&(y(["Tests","New test","Question bank"]),T()),2===t&&"assignment"===i&&f&&(y(["Assignments","New assignment","Question bank"]),T()),0===t&&"lesson"===i&&f&&(y(["Lessons","New lesson"]),T()),0===t&&"test"===i&&f&&(y(["Tests","New test","Question bank"]),T()),0===t&&"assignment"===i&&f&&(y(["Assignments","New assignment","Question bank"]),T()),0===t&&"student"===i&&f&&(y(["Students","Enrollment requests"]),T())))},scrollButtons:"on",indicatorColor:"primary",textColor:"primary","aria-label":"scrollable force tabs example"},r.a.createElement(Gl.a,{label:r.a.createElement(He.a,{className:t<500?S.smallFontSize:""},w("layout.tabBar.".concat(((s||[])[0]||"").replace(" ","").toLowerCase())))}),r.a.createElement(Gl.a,{disabled:O,label:r.a.createElement(He.a,{className:t<500?S.smallFontSize:""},w("layout.tabBar.".concat(((s||[])[1]||"").replace(" ","").toLowerCase())))}),("test"===i&&l&&f||"assignment"===i&&l&&f)&&r.a.createElement(Gl.a,{label:r.a.createElement(He.a,{className:t<500?S.smallFontSize:""},w("layout.tabBar.".concat(((s||[])[2]||"").replace(" ","").toLowerCase())))})))}))),zl=n(1270),Vl=n(1265),$l=n(58),Yl=function(e){var t=e.container,n=e.children,a=e.onHandleDrawerToggle,o=e.mobileOpen,s=e.classes;return r.a.createElement("nav",{className:s.drawer,"aria-label":"mailbox folders"},r.a.createElement(Vl.a,{smUp:!0,implementation:"css"},r.a.createElement(zl.a,{style:{overflowX:"hidden"},container:t,variant:"temporary",anchor:"rtl"===Object($l.a)().direction?"right":"left",open:o,onClose:a,classes:{paper:s.drawerPaper},ModalProps:{keepMounted:!0}},n)),r.a.createElement(Vl.a,{xsDown:!0,implementation:"css"},r.a.createElement(zl.a,{classes:{paper:s.drawerPaper},variant:"permanent",open:!0},n)))},Jl=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmCheckbox:!1},e.handleChange=function(t){e.setState({confirmCheckbox:t.target.checked})},e}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalDocument,n=e.deleteCourse,a=e.token,o=e.deActivateCourse,s=e.t;return r.a.createElement("div",null,r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},"".concat(s("confirmations.deleteCourse.youAreDeleting")," ").concat((t||{}).courseName)),r.a.createElement(He.a,{paragraph:!0,variant:"body1",gutterBottom:!0},s("confirmations.deleteCourse.deletingCourseWillDeleteContent")),r.a.createElement(He.a,{paragraph:!0,variant:"body1",gutterBottom:!0},s("confirmations.deleteCourse.studentsNoAccess")),r.a.createElement(He.a,{paragraph:!0,variant:"body1",gutterBottom:!0},s("confirmations.deleteCourse.courseRemovedFromRecord")),r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:this.state.confirmCheckbox,onChange:this.handleChange,value:"checked"}),label:s("confirmations.deleteCourse.agree")}),r.a.createElement(pt.a,{disabled:!this.state.confirmCheckbox,color:"secondary",onClick:function(){n(t._id,a)}},s("confirmations.deleteCourse.deleteCourse")),(t||{}).courseActive&&r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.deleteCourse.deactivateAlternative")),r.a.createElement(He.a,{paragraph:!0,variant:"body1",gutterBottom:!0},s("confirmations.deleteCourse.courseRemainsAccessibleToYou")),r.a.createElement(He.a,{paragraph:!0,variant:"body1",gutterBottom:!0},s("confirmations.deleteCourse.wontEraseContent")),r.a.createElement(pt.a,{color:"secondary",fullWidth:!0,onClick:function(){o(t._id,a)}},s("confirmations.deleteCourse.deactivate"))))}}]),n}(a.Component),Kl=Object(c.b)((function(e){return{token:e.authentication.token,modalDocument:e.common.modalDocument}}),(function(e){return{deleteCourse:function(t,n){return e(function(e,t){return{type:"DELETE_COURSE_START",payload:{courseId:e,token:t}}}(t,n))},deActivateCourse:function(t,n){return e(_(t,n))}}}))(Object(Qa.a)("common")(Jl)),Zl=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmCheckbox:!1},e.handleChange=function(t){e.setState({confirmCheckbox:t.target.checked})},e}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this.props,t=e.deleteLesson,n=e.modalDocument,a=void 0===n?{}:n,o=e.token,s=e.t;return r.a.createElement("div",null,r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},"".concat(s("confirmations.deleteLesson.youAreDeleting")," ").concat(a.lessonName)),r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.deleteLesson.noAccess")),r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:this.state.confirmCheckbox,onChange:this.handleChange,value:"checked"}),label:s("confirmations.deleteLesson.agree")}),r.a.createElement(pt.a,{disabled:!this.state.confirmCheckbox,variant:"outlined",color:"secondary",type:"button",title:"Delete Lesson",onClick:function(){t(a._id,o)}},s("confirmations.deleteLesson.deleteLesson")))}}]),n}(a.Component),Xl=Object(c.b)((function(e){return{token:e.authentication.token,modalDocument:e.common.modalDocument}}),(function(e){return{deleteLesson:function(t,n){e(function(e,t){return{type:"DELETE_LESSON_START",payload:{lessonId:e,token:t}}}(t,n))}}}))(Object(Qa.a)("common")(Zl)),eu=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmCheckbox:!1},e.handleChange=function(t){e.setState({confirmCheckbox:t.target.checked})},e.resetCheckbox=function(t){e.setState({confirmCheckbox:!1})},e}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalDocument,n=e.token,a=e.deleteTest,o=e.t;return r.a.createElement("div",null,r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},t.assignment?o("confirmations.deleteTest.assignmentGradeRemoved"):o("confirmations.deleteTest.testGradeRemoved")),r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},o("confirmations.deleteTest.questionBankNotAffected")),r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:this.state.confirmCheckbox,onChange:this.handleChange,value:"checked"}),label:o("confirmations.deleteTest.agree")}),r.a.createElement(pt.a,{disabled:!this.state.confirmCheckbox,variant:"outlined",color:"secondary",type:"button",title:"Delete Test",onClick:function(){a(t._id,n)}},t.assignment?o("confirmations.deleteTest.deleteAssignment"):o("confirmations.deleteTest.deleteTest")))}}]),n}(a.Component),tu=Object(c.b)((function(e){return{token:e.authentication.token,modalDocument:e.common.modalDocument}}),(function(e){return{deleteTest:function(t,n){return e($(t,n))}}}))(Object(Qa.a)("common")(eu)),nu=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmCheckbox:!1,message:""},e.handleCheckbox=function(t){e.setState({confirmCheckbox:t.target.checked})},e.handleMessage=function(t){e.setState({message:t.target.value})},e}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.modalDocument,a=t.token,o=t.resetTest,s=t.course,i=t.t;return r.a.createElement("div",null,n.student?r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},n.assignment?i("confirmations.resetTest.resetingAssignment"):i("confirmations.resetTest.resetingTest")),r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},"".concat(n.student.firstName," ").concat(n.assignment?i("confirmations.resetTest.willBeAbleAssignment"):i("confirmations.resetTest.willBeAbleTest"))),r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},i("confirmations.resetTest.gradeWillBeDeleted")),r.a.createElement(pi,{label:i("confirmations.resetTest.reason"),options:{multiline:!0,rows:3,variant:ya.a},textLabel:!0,input:{value:this.state.message,onChange:this.handleMessage}})):r.a.createElement(qe,null,r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},n.assignment?i("confirmations.resetTest.resetingAssignment"):i("confirmations.resetTest.resetingTest")),r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},n.assignment?i("confirmations.resetTest.everyStudentCanRetakeAssignment"):i("confirmations.resetTest.everyStudentCanRetakeTest")),r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},i("confirmations.resetTest.studentsGradeWillBeErased"))),r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:this.state.confirmCheckbox,onChange:this.handleCheckbox,value:"checked"}),label:i("confirmations.resetTest.agree")}),r.a.createElement(pt.a,{disabled:!this.state.confirmCheckbox,color:"secondary",onClick:function(){o(n._id,(n.student||{})._id,s._id,e.state.message,a)}},n.assignment?i("confirmations.resetTest.resetAssignment"):i("confirmations.resetTest.resetTest")))}}]),n}(a.Component),au=Object(c.b)((function(e){return{token:e.authentication.token,modalDocument:e.common.modalDocument,course:e.common.selectedCourse}}),(function(e){return{resetTest:function(t,n,a,r,o){return e(function(e,t,n,a,r){return{type:"RESET_TEST_START",payload:{testId:e,token:r,studentId:t,courseId:n,message:a}}}(t,n,a,r,o))}}}))(Object(Qa.a)("common")(nu)),ru=n(163),ou=n.n(ru),su=n(647),iu=n.n(su),cu=function(e){return e.show?r.a.createElement("div",{className:iu.a.Backdrop,onClick:e.clicked}):null},lu=n(2),uu=function(e,t){return Rr()({url:"".concat("https://mernstackelearn.herokuapp.com/","graphql"),method:"POST",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},data:JSON.stringify(e),validateStatus:!1})},du=function(e){var t=e.configData;return{query:"\n           mutation UpdateConfiguration(\n             $isChatNotifications:Boolean!\n             $isHideActiveStatus: Boolean!\n             $dropCourseGrade: Float\n             $isDropCoursePenalty: Boolean\n             $coursePassGrade: Float\n             $isEnrollAllowedAfterDropCourse:Boolean\n             $isInstructorCoursesLimit:Boolean\n             $instructorCoursesLimit:Int\n             $isApproveInstructorAccounts:Boolean\n             $isApproveStudentAccounts:Boolean\n             $isContentBlockedCourseEnd:Boolean\n             $studentFileSizeLimit:Float\n             $instructorFileSizeLimit:Float\n             $isPasswordRequiredStartTest:Boolean\n             $voiceRecordTimeLimit:Float\n             $blockedInstructors:[ID]\n             $isChatAllowedOutsideOfficehours:Boolean\n             $isTestNotifications:Boolean\n             $isTestEmails:Boolean\n             $isLessonNotifications:Boolean\n             $isLessonEmails:Boolean\n             $isAssignmentNotifications:Boolean\n             $isAssignmentEmails:Boolean\n             $isCourseNotifications:Boolean\n             $isCourseEmails:Boolean\n             $isSendTestNotifications:Boolean\n             $isSendTestEmails:Boolean\n             $isSendLessonNotifications:Boolean\n             $isSendLessonEmails:Boolean\n             $isSendAssignmentNotifications:Boolean\n             $isSendAssignmentEmails:Boolean\n             $isSendCourseNotifications:Boolean\n             $isSendCourseEmails:Boolean\n             $blockedStudents:[ID]\n             $blockedStudentsChat:[ID]\n             $isAllowDeleteStudentAccount:Boolean\n             $isAllowDeleteInstructorAccount:Boolean\n             $isNewInstructorAccountEmails:Boolean\n             $isNewInstructorAccountNotifications:Boolean\n             $isDropCourseEmails:Boolean\n             $isDropCourseNotifications:Boolean\n             $isEnrollEmails:Boolean\n             $isEnrollNotifications:Boolean\n             ) {\n             updateConfiguration(configurationInput: {\n              isChatNotifications:$isChatNotifications,\n              isHideActiveStatus: $isHideActiveStatus,\n              dropCourseGrade: $dropCourseGrade,\n              isDropCoursePenalty: $isDropCoursePenalty\n              coursePassGrade: $coursePassGrade\n              isEnrollAllowedAfterDropCourse: $isEnrollAllowedAfterDropCourse\n              instructorCoursesLimit: $instructorCoursesLimit\n              isInstructorCoursesLimit: $isInstructorCoursesLimit\n              isApproveInstructorAccounts: $isApproveInstructorAccounts\n              isApproveStudentAccounts: $isApproveStudentAccounts\n              isContentBlockedCourseEnd: $isContentBlockedCourseEnd\n              studentFileSizeLimit: $studentFileSizeLimit\n              instructorFileSizeLimit: $instructorFileSizeLimit\n              isPasswordRequiredStartTest: $isPasswordRequiredStartTest\n              voiceRecordTimeLimit: $voiceRecordTimeLimit\n              blockedInstructors: $blockedInstructors\n              isChatAllowedOutsideOfficehours: $isChatAllowedOutsideOfficehours\n              isTestNotifications: $isTestNotifications\n              isTestEmails: $isTestEmails\n              isLessonNotifications: $isLessonNotifications\n              isLessonEmails: $isLessonEmails\n              isAssignmentNotifications: $isAssignmentNotifications\n              isAssignmentEmails: $isAssignmentEmails\n              isCourseNotifications: $isCourseNotifications\n              isCourseEmails: $isCourseEmails\n              isSendTestNotifications:$isSendTestNotifications\n              isSendTestEmails:$isSendTestEmails\n              isSendLessonNotifications:$isSendLessonNotifications\n              isSendLessonEmails:$isSendLessonEmails\n              isSendAssignmentNotifications:$isSendAssignmentNotifications\n              isSendAssignmentEmails:$isSendAssignmentEmails\n              isSendCourseNotifications:$isSendCourseNotifications\n              isSendCourseEmails:$isSendCourseEmails\n              blockedStudents: $blockedStudents\n              blockedStudentsChat: $blockedStudentsChat\n              isAllowDeleteStudentAccount: $isAllowDeleteStudentAccount\n              isAllowDeleteInstructorAccount: $isAllowDeleteInstructorAccount\n              isNewInstructorAccountEmails: $isNewInstructorAccountEmails\n              isNewInstructorAccountNotifications: $isNewInstructorAccountNotifications\n              isDropCourseEmails: $isDropCourseEmails\n              isDropCourseNotifications: $isDropCourseNotifications\n              isEnrollEmails: $isEnrollEmails\n              isEnrollNotifications: $isEnrollNotifications\n              })\n           }\n         ",variables:{isChatNotifications:t.isChatNotifications,isHideActiveStatus:t.isHideActiveStatus,dropCourseGrade:parseFloat(parseFloat(t.dropCourseGrade).toFixed(2)),isDropCoursePenalty:t.isDropCoursePenalty,coursePassGrade:parseFloat(parseFloat(t.coursePassGrade).toFixed(2)),isEnrollAllowedAfterDropCourse:t.isEnrollAllowedAfterDropCourse,isInstructorCoursesLimit:t.isInstructorCoursesLimit,instructorCoursesLimit:parseInt(t.instructorCoursesLimit),isApproveInstructorAccounts:t.isApproveInstructorAccounts,isApproveStudentAccounts:t.isApproveStudentAccounts,isContentBlockedCourseEnd:t.isContentBlockedCourseEnd,studentFileSizeLimit:parseFloat(parseFloat(t.studentFileSizeLimit).toFixed(2)),instructorFileSizeLimit:parseFloat(parseFloat(t.instructorFileSizeLimit).toFixed(2)),isPasswordRequiredStartTest:t.isPasswordRequiredStartTest,voiceRecordTimeLimit:parseFloat(parseFloat(t.voiceRecordTimeLimit).toFixed(2)),blockedInstructors:t.blockedInstructors,isChatAllowedOutsideOfficehours:t.isChatAllowedOutsideOfficehours,isTestNotifications:t.isTestNotifications,isTestEmails:t.isTestEmails,isLessonNotifications:t.isLessonNotifications,isLessonEmails:t.isLessonEmails,isAssignmentNotifications:t.isAssignmentNotifications,isAssignmentEmails:t.isAssignmentEmails,isCourseNotifications:t.isCourseNotifications,isCourseEmails:t.isCourseEmails,blockedStudents:t.blockedStudents,blockedStudentsChat:t.blockedStudentsChat,isSendTestNotifications:t.isSendTestNotifications,isSendTestEmails:t.isSendTestEmails,isSendLessonNotifications:t.isSendLessonNotifications,isSendLessonEmails:t.isSendLessonEmails,isSendAssignmentNotifications:t.isSendAssignmentNotifications,isSendAssignmentEmails:t.isSendAssignmentEmails,isSendCourseNotifications:t.isSendCourseNotifications,isSendCourseEmails:t.isSendCourseEmails,isAllowDeleteStudentAccount:t.isAllowDeleteStudentAccount,isAllowDeleteInstructorAccount:t.isAllowDeleteInstructorAccount,isNewInstructorAccountEmails:t.isNewInstructorAccountEmails,isNewInstructorAccountNotifications:t.isNewInstructorAccountNotifications,isDropCourseEmails:t.isDropCourseEmails,isDropCourseNotifications:t.isDropCourseNotifications,isEnrollEmails:t.isEnrollEmails,isEnrollNotifications:t.isEnrollNotifications}}},mu=Pa.a.mark(bu),pu=Pa.a.mark(hu),fu=Pa.a.mark(Eu),gu=Pa.a.mark(vu);function bu(e){var t,n,a,r;return Pa.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.token,n={query:"\n            query Configuration {\n              configuration {\n                _id\n                user\n                isChatNotifications\n                isHideActiveStatus\n                dropCourseGrade\n                isDropCoursePenalty\n                coursePassGrade\n                isEnrollAllowedAfterDropCourse\n                isInstructorCoursesLimit\n                instructorCoursesLimit\n                isApproveInstructorAccounts\n                isApproveStudentAccounts\n                isContentBlockedCourseEnd\n                studentFileSizeLimit\n                instructorFileSizeLimit\n                isPasswordRequiredStartTest\n                voiceRecordTimeLimit\n                blockedInstructors\n                isChatAllowedOutsideOfficehours\n                isSendTestNotifications\n                isSendTestEmails\n                isSendLessonNotifications\n                isSendLessonEmails\n                isSendAssignmentNotifications\n                isSendAssignmentEmails\n                isSendCourseNotifications\n                isSendCourseEmails\n                isTestNotifications\n                isTestEmails\n                isLessonNotifications\n                isLessonEmails\n                isAssignmentNotifications\n                isAssignmentEmails\n                isCourseNotifications\n                isCourseEmails\n                blockedStudents\n                blockedStudentsChat\n\n                isAllowDeleteStudentAccount\n                isAllowDeleteInstructorAccount\n\n                isNewInstructorAccountEmails\n                isNewInstructorAccountNotifications\n\n                isDropCourseEmails\n                isDropCourseNotifications\n\n                isEnrollEmails\n                isEnrollNotifications\n\n                coursesIsChatAllowedOutsideOfficehours\n              }\n            }\n          "},o.prev=2,o.next=5,Object(lu.b)(uu,n,t);case 5:if(a=o.sent,console.log("Fetch config response",a),!a.data.errors){o.next=9;break}throw new Error("Failed to get the configuration");case 9:return o.next=11,Object(lu.e)({type:"FETCH_CONFIG_SUCCESS",configuration:a.data.data.configuration});case 11:o.next=23;break;case 13:return o.prev=13,o.t0=o.catch(2),console.log("e: ",o.t0),r=ua.t("alerts.config.fetchConfigFail"),o.next=19,Object(lu.e)(se(r));case 19:return o.next=21,Object(lu.c)(3e3);case 21:return o.next=23,Object(lu.e)(Fe());case 23:case"end":return o.stop()}}),mu,null,[[2,13]])}function hu(e){var t,n,a,r,o,s,i;return Pa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.token,a=t.configData,console.log("configData",a),c.prev=2,r=du({configData:a}),c.next=6,Object(lu.b)(uu,r,n);case 6:if(o=c.sent,console.log("Update configuration response: ",o),!o.data.errors){c.next=10;break}throw new Error("Failed to update the configuration");case 10:c.next=23;break;case 12:return c.prev=12,c.t0=c.catch(2),console.log("Error updating the configuration: ",c.t0),s=ua.t("alerts.config.updatedConfigFail"),c.next=18,Object(lu.e)({type:"UPDATE_CONFIG_FAIL",message:s});case 18:return c.next=20,Object(lu.c)(3e3);case 20:return c.next=22,Object(lu.e)(Fe());case 22:return c.abrupt("return");case 23:return i=ua.t("alerts.config.updatedConfigSuccess"),c.next=26,Object(lu.e)(Ee(i));case 26:return c.next=28,Object(lu.c)(3e3);case 28:return c.next=30,Object(lu.e)(Fe());case 30:return c.next=32,Object(lu.e)(he(n));case 32:case"end":return c.stop()}}),pu,null,[[2,12]])}function Eu(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("FETCH_CONFIG_START",bu);case 2:case"end":return e.stop()}}),fu)}function vu(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("UPDATE_CONFIG_START",hu);case 2:case"end":return e.stop()}}),gu)}var yu=[Object(lu.d)(Eu),Object(lu.d)(vu)],Tu=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(e){var a;return Object(jt.a)(this,n),(a=t.call(this,e)).handleCloseModal=function(){var e=a.props,t=e.modalType,n=e.token,r=e.modules,o=e.modulesFormValues,s=e.course,i=e.updateModules,c=e.cancelEditing,l=e.closeModal,u=e.accountFormErrors,d=void 0===u?{}:u,m=e.accountFormValues,p=void 0===m?{}:m,f=e.touchField,g=e.clearLoadedData;e.isDarkTheme;if("contents"===t&&r&&i(o,n,!!r._id,s._id),"question"===t&&(c(),g()),"gradeTest"===t&&g(),"studentDocuments"===t&&!d.documentsAreValid)return a.setState({isAccountFormValid:!1}),void p.documents.forEach((function(e,t){f("documents.".concat(t,".document")),f("documents.".concat(t,".documentType"))}));l()},a.state={isAccountFormValid:!0},a}return Object(Rt.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,a=n.isModal,r=n.children;return e.show!==a||e.children!==r}},{key:"render",value:function(){var e=this.props,t=e.isModal,n=e.large,a=e.header,o=e.children,s=e.modalType,i=e.isDarkTheme,c=e.t,l=e.configuration,u=e.accountFormErrors,d=void 0===u?{}:u;if(!t)return null;var m=!this.state.isAccountFormValid&&!d.documentsAreValid;return r.a.createElement(qe,null,r.a.createElement(cu,{show:t,clicked:this.handleCloseModal}),r.a.createElement("div",{className:[i?ou.a.ModalBackgroundDark:ou.a.ModalBackgroundLight,ou.a.Modal,n?ou.a.Large:ou.a.Regular].join(" "),style:{transform:t?"translateY(0)":"translateY(-100vh)",opacity:t?"1":"0"}},r.a.createElement("div",{className:[i?ou.a.HeaderDark:ou.a.Header]},r.a.createElement(He.a,{variant:"h5",style:{margin:"6px 0",textAlign:"center"},paragraph:!0},a)),r.a.createElement("div",{className:ou.a.Main},o),m&&"studentDocuments"===s&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},r.a.createElement(He.a,{color:"error"},"".concat(c("account.errors.correctTheFormAtDocument")," ").concat(d.atIndex+1,", ").concat(c("account.errors.selectDocTypeAndDoNotExceed",{size:l.studentFileSizeLimit})))),r.a.createElement(pl,{isDarkTheme:i,modal:!0,isError:m&&"studentDocuments"===s,clicked:this.handleCloseModal},c("modal.close"))))}}]),n}(a.Component),ku=Object(c.b)((function(e){var t;return t={modulesFormValues:Object(nt.a)("category")(e),accountFormValues:Object(nt.a)("accountForm")(e),accountFormErrors:Object(Pt.a)("accountForm")(e),modules:e.common.modules,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn,token:e.authentication.token,isModal:e.common.isModal,modalType:e.common.modalType,isDarkTheme:e.common.isDarkTheme,course:e.common.selectedCourse},Object(yo.a)(t,"token",e.authentication.token),Object(yo.a)(t,"configuration",e.common.configuration),Object(yo.a)(t,"loading",e.instructorCourse.loading||e.instructorTest.loading||e.instructorQuestion.loading||e.instructorLesson.loading||e.common.loading||e.studentCourse.loading||e.studentTest.loading),t}),(function(e){return{closeModal:function(){e({type:"CLOSE_MODAL"})},touchField:function(t){return e(Object(Bt.d)("accountForm",t))},cancelEditing:function(){return e({type:"CANCEL_EDITING"})},updateModules:function(t,n,a,r){return e(W(t,n,a,r))},clearLoadedData:function(){return e({type:"CLEAR_LOADED_INSTRUCTOR_DATA"})}}}))(Object(Qa.a)("common")(Tu)),Su=n(134),wu=n.n(Su),Ou=function(e,t){var n;return"mc"===t&&(n=0),"essay"===t&&(n=1),"speaking"===t&&(n=2),"fillblanks"===t&&(n=3),"test"===t&&(n=4),{audioMaterials:((e||{}).audioMaterials||[])[n]||{},readingMaterials:((e||{}).readingMaterials||[])[n]||{}}},Cu=n(47),xu=n.n(Cu),Au=Object(c.b)((function(e){return{course:e.common.selectedCourse,isDarkTheme:e.common.isDarkTheme}}))((function(e){var t=e.test,n=e.student,a=e.startTest,o=e.course,s=e.isDarkTheme,i=Object(We.a)().t,c=parseFloat(t.weight),l=((o||{}).tests||[]).reduce((function(e,t){return e+t.weight}),0),u=parseFloat((c/l*100).toFixed(2)),d=!t.assignment,m=[n?[i("testInfo.student"),"".concat(n.firstName," ").concat(n.lastName)]:null,n?[i("testInfo.studentId"),"".concat((n._id||"").replace(/\D/g,""))]:null,[i(d?"testInfo.test":"testInfo.assignment"),t.testName],[i("testInfo.weight"),"".concat(Number.isNaN(u)?0:u,"%")],d?[i("testInfo.lessonsAllowed"),t.blockedNotes?i("testInfo.no"):i("testInfo.yes")]:null,d?[i("testInfo.timer"),t.timer?"".concat(t.timer," ").concat(1==t.timer?i("testInfo.minute"):i("testInfo.plural.minute")):i("testInfo.no")]:null,d?[i("testInfo.type"),i("testInfo.".concat(t.testType))]:null,d?[i("testInfo.passingRequired"),t.passingRequired?i("testInfo.yes"):i("testInfo.no")]:null,t.passingGrade?[i("testInfo.passingGrade"),"".concat(t.passingGrade,"%")]:null,d?null:[i("testInfo.lateSubmissionAllowed"),t.allowLateSubmission?i("testInfo.yes"):i("testInfo.no")],!d&&t.allowLateSubmission?[i("testInfo.dailyPenalty"),"".concat(t.latePenalty,"%")]:null,!d&&t.allowLateSubmission?[i("testInfo.maxLateDaysAllowed"),t.lateDaysAllowed]:null,t.availableOnDate&&!a?[i("testInfo.availableOnDate"),bt()(parseInt(t.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")]:null,t.dueDate?[i(d?"testInfo.closeDate":"testInfo.dueDate"),bt()(parseInt(t.dueDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")]:null,t.gradeReleaseDate?[i("testInfo.gradeReleaseDate"),bt()(parseInt(t.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")]:null].filter((function(e){return e})),p={backgroundColor:s?"#424242":"white",padding:"5px",borderRadius:"4px"};return r.a.createElement("div",{style:p},r.a.createElement(si.a,{className:xu.a.table,"aria-label":"simple table"},r.a.createElement(ii.a,null,m.map((function(e,t){return r.a.createElement(li.a,{key:t,className:xu.a.MuiTableRow},r.a.createElement(ci.a,{component:"th",scope:"row"},e[0]),r.a.createElement(ci.a,{align:"right"},e[1]))})))),t.notes&&r.a.createElement(pi,{label:i("testForm.fields.notes"),input:{value:t.notes},options:{multiline:!0,rows:3,variant:ya.a,readOnly:!0},textLabel:!0}))})),Fu=n(75),Du=n.n(Fu),_u=n(76),Iu=n.n(_u),ju=Object(c.b)((function(e){return{modalDocument:e.common.modalDocument,course:e.common.selectedCourse,width:e.common.width,isDarkTheme:e.common.isDarkTheme}}))((function(e){var t=e.modalDocument,n=e.width,a=e.isDarkTheme,o=Object($l.a)(),s=r.a.useState([0,0,0]),i=Object(vo.a)(s,2),c=i[0],l=i[1],u=Object(We.a)().t,d=function(e){l((function(t){var n=Object(Vr.a)(t);return n[e]=n[e]+1,n}))},m=function(e){var t={background:"#1976d2",borderRadius:4,color:"white",padding:10};return"question"===e&&(t.background="#1976d2"),"solution"===e&&(t.background="#388e3c"),t},p=function(e){l((function(t){var n=Object(Vr.a)(t);return n[e]=n[e]-1,n}))},f={padding:10,borderRadius:4,backgroundColor:a?"#424242":"white"},g=[{id:"".concat(u(n>560?"confirmations.takeTest.mc":"confirmations.takeTest.mcShort")," ").concat(t.sectionWeights.mcSection,"%"),label:u("confirmations.takeTest.mc"),value:t.sectionWeights.mcSection,color:"hsl(128, 70%, 50%)"},{id:"".concat(u("confirmations.takeTest.essay")," ").concat(t.sectionWeights.essaySection,"%"),label:u("confirmations.takeTest.essay"),value:t.sectionWeights.essaySection,color:"hsl(88, 70%, 50%)"},{id:"".concat(u("confirmations.takeTest.speaking")," ").concat(t.sectionWeights.speakingSection,"%"),label:u("confirmations.takeTest.speaking"),value:t.sectionWeights.speakingSection,color:"hsl(245, 70%, 50%)"},{id:"".concat(u(n>560?"confirmations.takeTest.fillblanks":"confirmations.takeTest.fillblanksShort")," ").concat(t.sectionWeights.fillBlankSection,"%"),label:u("confirmations.takeTest.fillblanks"),value:t.sectionWeights.fillBlankSection,color:"hsl(340, 70%, 50%)"}].filter((function(e){return e.value})),b=(t.fillInBlanksQuestions||"").text,h=(t.fillInBlanksQuestions||"").blanks,E=Xi()(b||"",/<mark [^>]+>(.*?)<\/mark>/g,(function(e,t){var n=t/2-.5,a=((h||[])[n]||{}).correctAnswer;return!0===((h||[])[n]||{}).selectableAnswer?r.a.createElement(qe,{key:e+n},r.a.createElement("span",{className:wu.a.BlankPreview},n+1," "),((h||[])[n]||{}).audio&&r.a.createElement("td",{dangerouslySetInnerHTML:{__html:oc.a.sanitize('\n                  <audio id="audio['.concat(n,']" src="').concat(((h||[])[n]||{}).audio,'"> </source>\n                  </audio>\n                   <span class="').concat(wu.a.Pointer,'" onClick="(function(){\n                     const audio = document.getElementById(\'audio[').concat(n,']\');\n                     audio.play()\n                     return false;\n                     })();return false;" >\n                     <i class="fa fa-volume-down"></i>\n                     </span>\n                '),{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}),r.a.createElement("select",{readOnly:!0,value:u("testReview.selectCorrectAnswer"),className:wu.a.SelectField},r.a.createElement("option",{disabled:!0},u("testReview.selectCorrectAnswer")),r.a.createElement("option",{className:wu.a.CorrectAnswerHighlight,disabled:!0,value:"Correct Option"},a),(((h||[])[n]||{}).incorrectAnswers||[])[0]&&r.a.createElement("option",{disabled:!0,value:"Incorrect Option 1"},(((h||[])[n]||{}).incorrectAnswers||[])[0]),(((h||[])[n]||{}).incorrectAnswers||[])[1]&&r.a.createElement("option",{disabled:!0,value:"Incorrect Option 2"},(((h||[])[n]||{}).incorrectAnswers||[])[1]),(((h||[])[n]||{}).incorrectAnswers||[])[2]&&r.a.createElement("option",{disabled:!0,value:"Incorrect Option 3"},(((h||[])[n]||{}).incorrectAnswers||[])[2]))):!1===(h[n]||{}).selectableAnswer?r.a.createElement(qe,{key:e+n},r.a.createElement("span",{className:wu.a.Inline},r.a.createElement("span",{className:wu.a.BlankPreview},n+1," "),((h||[])[n]||{}).audio&&r.a.createElement(qe,null,r.a.createElement("td",{dangerouslySetInnerHTML:{__html:oc.a.sanitize('\n                        <audio id="audio['.concat(n,']" src="').concat(((h||[])[n]||{}).audio,'"> </source>\n                        </audio>\n                        <span class="').concat(wu.a.Pointer,'" onClick="(function(){\n                        const audio = document.getElementById(\'audio[').concat(n,']\');\n                        audio.play()\n                        return false;\n                        })();return false;" >\n                        <i class="fa fa-volume-down"></i>\n                        </span>\n                    '),{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}})),r.a.createElement("input",{readOnly:!0,type:"text",className:wu.a.InputField,value:"".concat(a)}))):void 0})),v=[];E.forEach((function(e,t){"string"===typeof e?v.push(e):v.push(Ji.a.renderToString(e))}));var y=(v||"").join(""),T=function(e){document.getElementById(e).play()};return r.a.createElement(qe,null,r.a.createElement(Au,{test:t}),Object.values(t.sectionWeights).filter((function(e){return e})).length>1&&r.a.createElement("div",{style:{height:n>450?300:200}},r.a.createElement(di,{data:g})),r.a.createElement(Qs,{index:"testSectionReview",summary:t.assignment?u("testReview.assignmentResources"):u("testReview.testResources"),disabled:!Ou(t,"test").readingMaterials.content&&!Ou(t,"test").audioMaterials.audio},r.a.createElement(Lc,{audioId:"testAudioMaterialReviewTest",pdfIndex:4,readingContent:Ou(t,"test").readingMaterials.content,audioSource:Ou(t,"test").audioMaterials.audio,onPreview:function(){return T("testAudioMaterialReviewTest")},fileUpload:Ou(t,"test").readingMaterials.fileUpload})),(t.sectionWeights||{}).mcSection&&r.a.createElement(qe,null,r.a.createElement("div",{style:Object(It.a)({marginTop:20},f)},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},u("testReview.multiplechoicesection")),r.a.createElement(Qs,{disabled:!Ou(t,"mc").readingMaterials.content&&!Ou(t,"mc").audioMaterials.audio,index:"mcSectionPreview",summary:u("testReview.sectionResources")},r.a.createElement(Lc,{audioId:"mcAudioMaterialPreviewTest",pdfIndex:0,readingContent:Ou(t,"mc").readingMaterials.content,audioSource:Ou(t,"mc").audioMaterials.audio,onPreview:function(){return T("mcAudioMaterialPreviewTest")},fileUpload:Ou(t,"mc").readingMaterials.fileUpload})),(t.multipleChoiceQuestions||[]).map((function(e,t){return t!==c[0]?null:r.a.createElement(qe,{key:e+t},r.a.createElement(He.a,{style:{marginTop:20},variant:"subtitle1",gutterBottom:!0},"".concat(u("testReview.question")," ").concat(t+1)),r.a.createElement("div",{style:m("question"),dangerouslySetInnerHTML:{__html:oc.a.sanitize(e.question)}}),e.answerOptions.map((function(t,n){return r.a.createElement(He.a,{className:e.correctAnswers.includes((n+1).toString())?wu.a.GreenText:wu.a.RedText,key:t+n,variant:"body2",gutterBottom:!0},t)})),e.solution&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(He.a,{variant:"subtitle1",gutterBottom:!0},u("testReview.solution")),r.a.createElement("div",{style:m("solution")},r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},e.solution))))})),r.a.createElement(oo.a,{steps:t.multipleChoiceQuestions.length,position:"static",variant:"text",activeStep:c[0],nextButton:r.a.createElement(pt.a,{size:"small",onClick:function(){return d(0)},disabled:c[0]===t.multipleChoiceQuestions.length-1},u("testReview.buttons.next"),"rtl"===o.direction?r.a.createElement(Du.a,null):r.a.createElement(Iu.a,null)),backButton:r.a.createElement(pt.a,{size:"small",onClick:function(){return p(0)},disabled:0===c[0]},"rtl"===o.direction?r.a.createElement(Iu.a,null):r.a.createElement(Du.a,null),u("testReview.buttons.back"))}))),(t.sectionWeights||{}).essaySection&&r.a.createElement(qe,null,r.a.createElement("div",{style:Object(It.a)({marginTop:20},f)},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},u("testReview.essaysection")),r.a.createElement(Qs,{disabled:!Ou(t,"essay").readingMaterials.content&&!Ou(t,"essay").audioMaterials.audio,index:"essaySectionPreview",summary:u("testReview.sectionResources")},r.a.createElement(Lc,{audioId:"essayAudioMaterialPreviewTest",pdfIndex:1,readingContent:Ou(t,"essay").readingMaterials.content,audioSource:Ou(t,"essay").audioMaterials.audio,onPreview:function(){return T("essayAudioMaterialPreviewTest")},fileUpload:Ou(t,"essay").readingMaterials.fileUpload})),(t.essayQuestions||[]).map((function(e,t){return t!==c[1]?null:r.a.createElement(qe,{key:e+t},r.a.createElement(He.a,{style:{marginTop:20},variant:"subtitle1",gutterBottom:!0},"".concat(u("testReview.question")," ").concat(t+1)),r.a.createElement("div",{style:m("question"),dangerouslySetInnerHTML:{__html:oc.a.sanitize(e.question)}}),e.solution&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(He.a,{variant:"subtitle1",gutterBottom:!0},u("testReview.solution")),r.a.createElement("div",{style:m("solution")},r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},e.solution))))})),r.a.createElement(oo.a,{steps:t.essayQuestions.length,position:"static",variant:"text",activeStep:c[1],nextButton:r.a.createElement(pt.a,{size:"small",onClick:function(){return d(1)},disabled:c[1]===t.essayQuestions.length-1},u("testReview.buttons.next"),"rtl"===o.direction?r.a.createElement(Du.a,null):r.a.createElement(Iu.a,null)),backButton:r.a.createElement(pt.a,{size:"small",onClick:function(){return p(1)},disabled:0===c[1]},"rtl"===o.direction?r.a.createElement(Iu.a,null):r.a.createElement(Du.a,null),u("testReview.buttons.back"))}))),(t.sectionWeights||{}).speakingSection&&r.a.createElement(qe,null,r.a.createElement("div",{style:Object(It.a)({marginTop:20},f)},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},u("testReview.speakingsection")),r.a.createElement(Qs,{index:"speakingSectionPreview",summary:u("testReview.sectionResources"),disabled:!Ou(t,"speaking").readingMaterials.content&&!Ou(t,"speaking").audioMaterials.audio},r.a.createElement(Lc,{audioId:"speakingAudioMaterialPreviewTest",pdfIndex:2,readingContent:Ou(t,"speaking").readingMaterials.content,audioSource:Ou(t,"speaking").audioMaterials.audio,onPreview:function(){return T("speakingAudioMaterialPreviewTest")},fileUpload:Ou(t,"speaking").readingMaterials.fileUpload})),(t.speakingQuestions||[]).map((function(e,t){return t!==c[2]?null:r.a.createElement(qe,{key:e+t},r.a.createElement(He.a,{style:{marginTop:20},variant:"subtitle1",gutterBottom:!0},"".concat(u("testReview.question")," ").concat(t+1)),e.question&&r.a.createElement("div",{style:m("question"),dangerouslySetInnerHTML:{__html:oc.a.sanitize(e.question)}}),e.questionAudio&&r.a.createElement("div",null,r.a.createElement("audio",{id:"audioQuestion[".concat(t,"]"),src:e.questionAudio}),r.a.createElement(pt.a,{startIcon:r.a.createElement(zc.a,null),variant:"outlined",fullWidth:!0,color:"primary",onClick:function(){T("audioQuestion[".concat(t,"]"))}},u("testReview.buttons.playQuestion"))),e.audio&&r.a.createElement("div",null,r.a.createElement("audio",{id:"audioAnswer[".concat(t,"]"),src:e.audio}),r.a.createElement(pt.a,{startIcon:r.a.createElement(zc.a,null),variant:"outlined",fullWidth:!0,color:"primary",onClick:function(){T("audioAnswer[".concat(t,"]"))}},u("testReview.buttons.playAnswer"))),e.solution&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(He.a,{variant:"subtitle1",gutterBottom:!0},u("testReview.solution")),r.a.createElement("div",{style:m("solution")},r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},e.solution))))})),r.a.createElement(oo.a,{steps:t.speakingQuestions.length,position:"static",variant:"text",activeStep:c[2],nextButton:r.a.createElement(pt.a,{size:"small",onClick:function(){return d(2)},disabled:c[2]===t.speakingQuestions.length-1},u("testReview.buttons.next"),"rtl"===o.direction?r.a.createElement(Du.a,null):r.a.createElement(Iu.a,null)),backButton:r.a.createElement(pt.a,{size:"small",onClick:function(){return p(2)},disabled:0===c[2]},"rtl"===o.direction?r.a.createElement(Iu.a,null):r.a.createElement(Du.a,null),u("testReview.buttons.back"))}))),(t.sectionWeights||{}).fillBlankSection&&r.a.createElement(qe,null,r.a.createElement("div",{style:Object(It.a)({marginTop:20},f)},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},u("testReview.fillintheblankssection")),r.a.createElement(Qs,{index:"fillblanksSectionPreview",summary:u("testReview.sectionResources"),disabled:!Ou(t,"fillblanks").readingMaterials.content&&!Ou(t,"fillblanks").audioMaterials.audio},r.a.createElement(Lc,{audioId:"fillblanksAudioMaterialPreviewTest",pdfIndex:3,readingContent:Ou(t,"fillblanks").readingMaterials.content,audioSource:Ou(t,"fillblanks").audioMaterials.audio,onPreview:function(){return T("fillblanksAudioMaterialPreviewTest")},fileUpload:Ou(t,"fillblanks").readingMaterials.fileUpload})),r.a.createElement("div",{style:{marginTop:20},dangerouslySetInnerHTML:{__html:oc.a.sanitize(y,{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}))))})),Ru=n(121),Nu=n.n(Ru),Lu=function(e){var t=e.input,n=e.label,a=e.type,o=e.meta,s=o.touched,i=o.error;return r.a.createElement("div",null,r.a.createElement("label",null,n),r.a.createElement("div",null,r.a.createElement("input",Object.assign({className:[Nu.a.InputField,Nu.a.FullWidth].join(" ")},t,{placeholder:n,type:a})),s&&i&&r.a.createElement("span",null,i)))},Pu=function(e){var t=e.clearAnswers,n=e.fields,a=e.t,o=e.meta.error;return r.a.createElement(qe,null,r.a.createElement(pt.a,{fullWidth:!0,type:"button",color:"primary",onClick:function(){return n.push()},startIcon:r.a.createElement(hr.a,null),size:"small"},a("questionForm.buttons.addAnswer")),r.a.createElement(He.a,{variant:"body1",style:{fontSize:"0.8rem"},gutterBottom:!0},a("questionForm.writeAnswers")),r.a.createElement($r.a,null,n.map((function(e,a){return r.a.createElement(Yr.a,{key:a},r.a.createElement(pt.a,{onClick:function(){n.remove(a),t()},color:"secondary",startIcon:r.a.createElement(Ya.a,null)},""),r.a.createElement(ba.a,{name:e,type:"text",component:Lu,label:""}))})),o&&r.a.createElement(Yr.a,{className:"error"},o)))},Bu=Object(Mt.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.clearAnswers,n=e.touchCheckboxes,a=e.formValues,o=void 0===a?{}:a,s=e.path,i=Object(We.a)().t,c=((o.mcQuestion||{}).answers||[]).map((function(e,t){return{label:"".concat(e||""),value:"".concat(t+1),placement:"start",color:"primary",name:"mcQuestion.correctAnswers"}})),l=r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"body1",style:{fontSize:"0.8rem"},gutterBottom:!0},i("questionForm.selectCorrectAnswers")),r.a.createElement(ba.a,{name:"mcQuestion.correctAnswers",component:vi,options:c,column:!0,required:!1,onChange:function(){return n("mcQuestion.correctAnswers")}}));return r.a.createElement("div",{className:Nu.a.QuestionCustomizationContainer},r.a.createElement("div",{className:Nu.a.TextEditor},r.a.createElement(ba.a,{name:"mcQuestion.question",component:zr,reduxForm:"questionForm",field:"mcQuestion.question",label:i("questionForm.question"),path:s})),l,r.a.createElement(fr.a,{name:"mcQuestion.answers",clearAnswers:t,component:Pu,t:i}),r.a.createElement(ba.a,{name:"mcQuestion.solution",component:pi,label:i("questionForm.fields.solution"),options:{multiline:!0,rows:3,variant:ya.a},textLabel:!0}))})),Mu=Object(c.b)((function(e){return{formValues:Object(nt.a)("questionForm")(e)}}),(function(e){return{updateTags:function(t){e(Object(Bt.a)("questionForm","tags",t))},clearAnswers:function(){e(Object(Bt.a)("questionForm","mcQuestion.correctAnswers]",[]))},touchCheckboxes:function(t){e(Object(Bt.d)("questionForm",t))}}}))(Bu),qu=Object(Mt.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.path,n=Object(We.a)().t;return r.a.createElement(qe,null,r.a.createElement("div",{className:Nu.a.TextEditor},r.a.createElement(ba.a,{name:"essayQuestion.question",component:zr,reduxForm:"questionForm",field:"essayQuestion.question",label:n("questionForm.question"),path:t})),r.a.createElement(ba.a,{name:"essayQuestion.solution",component:pi,label:n("questionForm.fields.solution"),options:{multiline:!0,rows:3,variant:ya.a},textLabel:!0}))})),Uu=Object(Mt.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.changeField,n=e.formValues,o=void 0===n?{}:n,s=e.formErrors,i=void 0===s?{}:s,c=e.makeAudioFieldTouched,l=e.path,u=Object(We.a)().t,d=Object(a.useState)(!1),m=Object(vo.a)(d,2),p=m[0],f=m[1],g=Object(a.useState)(!1),b=Object(vo.a)(g,2),h=b[0],E=b[1];Object(a.useEffect)((function(){return function(){clearTimeout(h)}}),[]);var v={label:u("questionForm.fields.audioQuestion"),checked:!1},y={label:u("questionForm.fields.audioAnswer"),checked:!1},T=(o.speakingQuestion||[])[0]||{},k=T.recordingTimeout,S=T.questionRecordingTimeout,w=T.recorder,O=T.questionRecorder,C=T.questionRecordedBlob,x=T.recordedBlob,A=T.isRecordingQuestion,F=T.isRecording,D=function(e,n,a,r,o){o?("question"===r&&(t("speakingQuestion.".concat(a,".isRecordingQuestion"),o),t("speakingQuestion.".concat(a,".questionRecorder"),e),t("speakingQuestion.".concat(a,".questionRecordingTimeout"),n)),"answer"===r&&(t("speakingQuestion.".concat(a,".isRecording"),!0),t("speakingQuestion.".concat(a,".recorder"),e),t("speakingQuestion.".concat(a,".recordingTimeout"),n))):function(){clearTimeout(h),f(!0);var e=setTimeout((function(){f(!1)}),5e3);E(e)}()},_=function(e,n,a,r){"question"===r&&(t("speakingQuestion.".concat(a,".isRecordingQuestion"),!1),t("speakingQuestion.".concat(a,".questionRecordedBlob"),e),t("speakingQuestion.".concat(a,".audioFileQuestion"),n),c("speakingQuestion.".concat(a,".questionRecordedBlob"))),"answer"===r&&(t("speakingQuestion.".concat(a,".isRecording"),!1),t("speakingQuestion.".concat(a,".recordedBlob"),e),t("speakingQuestion.".concat(a,".audioFile"),n),c("speakingQuestion.".concat(a,".recordedBlob")))},I=["question","answer"].map((function(e,t){return r.a.createElement(ba.a,{component:Li,name:"speakingQuestion.".concat(0,".").concat(0===t?"questionRecordedBlob":"recordedBlob"),onStart:function(){var t=Object(Ba.a)(Pa.a.mark((function t(n){var a;return Pa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$o(n,e,0,null,function(){var t=Object(Ba.a)(Pa.a.mark((function t(n){var a;return Pa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:a=t.sent,_(a.blob,a.file,0,e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:a=t.t0,D(a.recorder,a.recordingTimeout,0,e,a.isRecording);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onStop:function(){var n=Object(Ba.a)(Pa.a.mark((function n(a){var r;return Pa.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Vo(a,null,0,0===t?S:k,0===t?O:w);case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:r=n.t0,_(r.blob,r.file,0,e);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),onPreview:function(){Yo(0===t?"audioQuestion[".concat(0,"]"):"audioAnswer[".concat(0,"]"))},onClear:function(){return _(null,null,0,e)},id:0===t?"audioQuestion[".concat(0,"]"):"audioAnswer[".concat(0,"]"),recordDisabled:0===t?A:F,audioSource:0===t?C:x,isMicAlert:p})})),j=["question","answer"].map((function(e){return r.a.createElement(ba.a,{name:"speakingQuestion.".concat(0,".").concat("question"===e?"audioQuestion":"audioAnswer"),options:"question"===e?v:y,component:Ca,type:"checkbox"})}));return r.a.createElement(qe,{className:Nu.a.QuestionCustomizationContainer},r.a.createElement(qe,null,j[0],T.audioQuestion?r.a.createElement(qe,null,r.a.createElement("div",{className:Nu.a.flexPositioningEven},r.a.createElement(ba.a,{name:"speakingQuestion.".concat(0,".audioFileQuestion"),index:"q".concat(0),onChangeFile:function(e){t("speakingQuestion.".concat(0,".questionRecordedBlob"),e)},component:Va,loadedFile:T.questionRecordedBlob,mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]})),I[0]):r.a.createElement("div",{className:Nu.a.TextEditor},r.a.createElement(ba.a,{name:"speakingQuestion.".concat(0,".question"),field:"speakingQuestion.".concat(0,".question"),reduxForm:"questionForm",component:zr,label:u("questionForm.question"),path:l,error:(i.speakingQuestion||{}).question})),r.a.createElement("div",null,j[1],!0===T.audioAnswer?r.a.createElement(qe,null,r.a.createElement("div",{className:Nu.a.flexPositioningEven},r.a.createElement(ba.a,{name:"speakingQuestion.".concat(0,".audioFile"),component:Va,index:"a".concat(0),onChangeFile:function(e){t("speakingQuestion.".concat(0,".recordedBlob"),e)},loadedFile:T.recordedBlob,mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]})),I[1]):null)))})),Qu=Object(c.b)((function(e,t){return{formValues:Object(nt.a)("questionForm")(e),formErrors:Object(Pt.a)("questionForm")(e)}}),(function(e){return{changeField:function(t,n){e(Object(Bt.a)("questionForm",t,n))},makeAudioFieldTouched:function(t){e(Object(Bt.d)("questionForm",t))}}}))(Uu),Hu=n(648),Gu=n.n(Hu),Wu=n(405),zu=n.n(Wu),Vu=(n(1121),function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){return Object(jt.a)(this,n),t.apply(this,arguments)}return Object(Rt.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:zu.a.spacing},r.a.createElement("span",null,this.props.label),r.a.createElement("div",{className:zu.a.inputContainer},r.a.createElement(Gu.a,{inputProps:{placeholder:""},value:this.props.tagValues,onChange:this.props.onTagChange})))}}]),n}(a.Component)),$u=n(1255),Yu=function(e){var t={mcQuestion:{},essayQuestion:{},speakingQuestion:[{}],fillBlankQuestions:{}};if(e.mcQuestion){var n,a=e.mcQuestion;e.mcQuestion.question||(t.mcQuestion.question=ua.t("questionForm.errors.required")),((a.answers||[]).includes(void 0)||(a.answers||[]).includes(""))&&(a.answers||[]).length>1&&(n=ua.t("questionForm.errors.answersCantBeEmpty")),(a.answers||[]).length<2&&(n=ua.t("questionForm.errors.atleastTwoAnswers")),(a.answers||[]).length===(a.correctAnswers||[]).length&&(a.answers||[]).length>1&&(n=ua.t("questionForm.errors.atleastOneUnchecked")),(!a.correctAnswers||0===(a.correctAnswers||[]).length)&&(a.answers||[]).length>1&&(n=ua.t("questionForm.errors.selectAtleastOneAnswer"));var r=(a.answers||[]).map((function(e){return(e||"").trim()})),o=(r||[]).reduce((function(e,t,n,a){return a.indexOf(t)!==n&&e.indexOf(t)<0&&e.push(t),e}),[]);(a.answers||[]).length>1&&(o||[]).length>0&&(n=ua.t("questionForm.errors.answersDifferent")),t.mcQuestion.correctAnswers=n,(n||t.mcQuestion.question)&&(t.mcQuestionError=!0)}if(e.essayQuestion&&(e.essayQuestion.question||(t.essayQuestion.question=ua.t("questionForm.errors.required"),t.essayQuestionError=!0)),e.speakingQuestion){var s=(e.speakingQuestion||{})[0]||{};s.question||s.audioQuestion||(t.speakingQuestion[0].question=ua.t("questionForm.errors.requiredOrMakeAudioQuestion")),!s.questionRecordedBlob&&s.audioQuestion&&(t.speakingQuestion[0].questionRecordedBlob=ua.t("questionForm.errors.requiredOrMakeTextQuestion")),s.audioFileQuestion instanceof File&&s.audioFileQuestion.size>1e3*e.instructorFileSizeLimit*1e3&&s.audioQuestion&&(t.speakingQuestion[0].questionRecordedBlob="".concat(ua.t("questionForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),s.audioFile instanceof File&&s.audioFile.size>1e3*e.instructorFileSizeLimit*1e3&&s.audioAnswer&&(t.speakingQuestion[0].recordedBlob="".concat(ua.t("questionForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),!s.recordedBlob&&s.audioAnswer&&(t.speakingQuestion[0].recordedBlob=ua.t("questionForm.errors.requiredOrDisableAudioAnswer")),(t.speakingQuestion[0].question||t.speakingQuestion[0].questionRecordedBlob||t.speakingQuestion[0].recordedBlob)&&(t.speakingQuestionError=!0)}return t},Ju=Object(Mt.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0,enableReinitialize:!0,validate:Yu})((function(e){var t=e.editing,n=e.formValues,o=void 0===n?{}:n,s=e.formErrors,i=e.token,c=e.course,l=e.submitQuestion,u=e.deleteQuestion,d=e.questionType,m=e.changeField,p=e.touchField,f=e.loadedQuestion,g=e.loading,b=e.deleteImg,h=e.clearQuestionForm,E=Object(We.a)().t,v=c.tests,y=r.a.useState([]),T=Object(vo.a)(y,2),k=T[0],S=T[1],w=r.a.useState(!0),O=Object(vo.a)(w,2),C=O[0],x=O[1],A=r.a.useState(!1),F=Object(vo.a)(A,2),D=F[0],_=F[1],I=r.a.useState([]),j=Object(vo.a)(I,2),R=j[0],N=j[1],L=r.a.useState([]),P=Object(vo.a)(L,2),B=P[0],M=P[1],q=r.a.useState(null),U=Object(vo.a)(q,2),Q=U[0],H=U[1],G=r.a.useRef(),W=r.a.useRef();Object(a.useEffect)((function(){G.current=o,W.current=D}),[o,D]),Object(a.useEffect)((function(){if(D){var e=mo(v,"courseTests")||[],n=mo(o,"questionForm",d).filter((function(t){return e.includes(t)?null:t})),a=(k||[]).filter((function(e){return n.includes(e)?null:e})).filter((function(t){return e.includes(t)?null:t}));l(t?o:Object(It.a)(Object(It.a)({},o),{},{_id:Q}),i,t,c._id,a,d)}}),[D]);var z=[{value:"easy",primaryText:E("questionForm.fields.easy")},{value:"medium",primaryText:E("questionForm.fields.medium")},{value:"hard",primaryText:E("questionForm.fields.hard")}],V=function(e,t,n){if(!W.current){var a=mo(v,"courseTests")||[],r=mo(t,"questionForm",n),o=[];r.forEach((function(t){-1===e.findIndex((function(e){return e===t}))&&o.push(t)})),o.filter((function(e){return a.includes(e)?null:e})).filter((function(e){return e})).length>0&&b(o,i)}};Object(a.useEffect)((function(){var e=mo(f,"questionForm",d);return H(t?null:(new lo.a.ObjectId).toHexString()),S(e),window.addEventListener("beforeunload",(function(t){return $(t,e,G.current,d)})),function(){h(),window.removeEventListener("beforeunload",(function(t){return $(t,e,G.current,d)})),W.current||V(e,G.current,d)}}),[]),Object(a.useEffect)((function(){var e=(o.fillBlankQuestions||{}).answers,t=(s.fillBlankQuestions||{}).answers;N(e),M(t)}),[o,s]);var $=function(e,t,n,a){e.preventDefault(),W.current||V(t,n,a)},Y=function(){if(o.mcQuestion&&(p("mcQuestion.question"),p("mcQuestion.correctAnswers")),o.essayQuestion&&p("essayQuestion.question"),o.speakingQuestion&&(p("speakingQuestion.0.question"),p("speakingQuestion.0.recordedBlob"),p("speakingQuestion.0.questionRecordedBlob")),o.fillBlankQuestions&&Array.from(R).forEach((function(e,t){p("fillBlankQuestions.answers.".concat(t,".browserAudioFile")),p("fillBlankQuestions.answers.".concat(t,".answerOptions.incorrectAnswerThree"))})),o.mcQuestion&&s.mcQuestionError)return!1;if(o.essayQuestion&&s.essayQuestionError)return!1;if(o.speakingQuestion&&s.speakingQuestionError)return!1;if(o.fillBlankQuestions){var e=R.map((function(e,t){return(((B||[])[t]||{}).answerOptions||{}).incorrectAnswerThree||((B||[])[t]||{}).browserAudioFile?"error":null})),t=(s.fillBlankQuestions||{}).question;if(e.includes("error")||t)return!1}return!0},J="courses/".concat(c._id,"/questions/").concat(t?o._id:Q);return r.a.createElement(qe,null,r.a.createElement(Xe,{active:g,transparent:!0}),"mc"===d&&r.a.createElement(Mu,{path:J,question:d}),"essay"===d&&r.a.createElement(qu,{path:J,question:d}),"speaking"===d&&r.a.createElement(Qu,{path:J,question:d}),"fillInBlank"===d&&r.a.createElement(cc,{path:J,isModal:!0,form:"questionForm",question:d}),r.a.createElement($u.a,null),r.a.createElement("div",{style:{display:"flex",marginTop:10}},r.a.createElement(ba.a,{name:"difficulty",simple:!0,component:Gs,options:z,textLabel:E("questionForm.fields.difficulty"),defaultValue:"medium"}),r.a.createElement(ba.a,{component:ka,name:"language",label:E("questionForm.fields.language"),simple:!0,textLabel:!0,language:!0,fullWidth:!0})),r.a.createElement(ba.a,{name:"tags",label:E("questionForm.fields.tags"),component:Vu,onTagChange:function(e){m("tags",e)},tagValues:(o||{}).tags||[]}),r.a.createElement($u.a,null),!C&&!Y()&&r.a.createElement(He.a,{style:{textAlign:"center",marginBottom:"20px"},gutterBottom:!0,color:"error"},E("questionForm.errors.correctForm")),r.a.createElement(Js,{isError:!(C||Y()),clicked:function(){Y()?_(!0):x(!1)}},E(t?"questionForm.buttons.updateQuestion":"questionForm.buttons.saveQuestion")),t&&r.a.createElement(pt.a,{fullWidth:!0,color:"secondary",onClick:function(){return u((o||{})._id,i,c._id)}},E("questionForm.buttons.removeQuestion")))})),Ku=Object(c.b)((function(e){var t=e.common.configuration.instructorFileSizeLimit;return{formValues:Object(nt.a)("questionForm")(e),formErrors:Object(Pt.a)("questionForm")(e),token:e.authentication.token,editing:e.common.editing,course:e.common.selectedCourse,questionType:e.instructorQuestion.creatingQuestionType,initialValues:Object(It.a)(Object(It.a)({},e.instructorQuestion.loadedQuestionFormData),{},{instructorFileSizeLimit:t}),loading:e.instructorQuestion.loading,loadedQuestion:e.instructorQuestion.loadedQuestionFormData}}),(function(e){return{changeField:function(t,n){e(Object(Bt.a)("questionForm",t,n))},touchField:function(t){e(Object(Bt.d)("questionForm",t))},submitQuestion:function(t,n,a,r,o,s){e(function(e,t,n,a,r,o){return{type:"CREATE_UPDATE_QUESTION_START",payload:{formData:e,questionType:t,token:n,editing:a,courseId:r,filesToDelete:o}}}(t,s,n,a,r,o))},deleteQuestion:function(t,n,a){e(function(e,t,n){return{type:"DELETE_QUESTION_START",payload:{questionId:e,token:t,courseId:n}}}(t,n,a))},deleteImg:function(t,n){e(ge(t),n)},clearQuestionForm:function(){return e({type:"CLEAR_LOADED_INSTRUCTOR_DATA"})}}}))(Ju),Zu=n(649),Xu=n.n(Zu),ed=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){return Object(jt.a)(this,n),t.apply(this,arguments)}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalDocument,n=e.courses,a=e.configuration,o=e.t,s={backgroundColor:e.isDarkTheme?"":"white",padding:10,margin:"10px auto 10px auto"},i=n.find((function(e){return e._id===t._id})),c=i.courseStartDate||i.courseEndDate||i.courseDropDeadline||i.enrollmentStartDate||i.enrollmentEndDate,l=a.dropCourseGrade,u=[i.language?[o("syllabus.language"),o("languages.".concat(i.language.toLowerCase()))]:null,[o("syllabus.instructor"),"".concat(i.courseInstructor.firstName," ").concat(i.courseInstructor.lastName)],[o("syllabus.instructorEmail"),i.courseInstructor.email],[o("syllabus.coursePassGrade"),"".concat(a.coursePassGrade,"%")],a.isDropCoursePenalty?[o("syllabus.gradeIfCourseDropped"),"".concat(l,"%")]:null].filter((function(e){return e})),d=[i.enrollmentStartDate?[o("syllabus.enrollmentStart")," ".concat(bt()(parseInt(i.enrollmentStartDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"))]:null,i.enrollmentEndDate?[o("syllabus.enrollmentDeadline")," ".concat(bt()(parseInt(i.enrollmentEndDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"))]:null,i.courseStartDate?[o("syllabus.courseStartDate")," ".concat(bt()(parseInt(i.courseStartDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"))]:null,i.courseEndDate?[o("syllabus.courseEndDate")," ".concat(bt()(parseInt(i.courseEndDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"))]:null,i.courseDropDeadline?[o("syllabus.dropDeadline")," ".concat(bt()(parseInt(i.courseDropDeadline)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"))]:null].filter((function(e){return e})),m=!(0===(i.regularOfficeHours||[]).length&&0===(i.irregularOfficeHours||[]).length);return r.a.createElement(qe,null,r.a.createElement("div",{style:s},r.a.createElement(He.a,{variant:"h6"},o("syllabus.courseInfo")),r.a.createElement(si.a,{"aria-label":"simple table"},r.a.createElement(ii.a,null,u.map((function(e,t){return r.a.createElement(li.a,{key:e[0]},r.a.createElement(ci.a,{scope:"row"},e[0]),r.a.createElement(ci.a,{align:"right"},e[1]))}))))),r.a.createElement("div",{className:Xu.a.Contained,dangerouslySetInnerHTML:{__html:oc.a.sanitize(i.syllabus)}}),c&&r.a.createElement("div",{style:s},r.a.createElement(He.a,{variant:"h6"},o("syllabus.importantDates")),r.a.createElement(si.a,{"aria-label":"simple table"},r.a.createElement(ii.a,null,d.map((function(e,t){return r.a.createElement(li.a,{key:e[0]},r.a.createElement(ci.a,{scope:"row"},e[0]),r.a.createElement(ci.a,{align:"right"},e[1]))}))))),(i.prerequisites||[]).length>0&&r.a.createElement(He.a,{variant:"h6"},o("syllabus.coursePrereqs")),r.a.createElement("div",{style:s},0===(i.prerequisites||[]).length?r.a.createElement(He.a,{gutterBottom:!0,variant:"h6"},o("syllabus.noCoursePrereqs")):r.a.createElement($r.a,null,(i.prerequisites||[]).map((function(e){return r.a.createElement(Yr.a,{key:(e||"")._id},(e||"").courseName)})))),!a.isChatAllowedOutsideOfficehours&&r.a.createElement("div",{style:s},m?r.a.createElement(qe,null,(i.regularOfficeHours||[]).length>0&&r.a.createElement(He.a,{gutterBottom:!0,variant:"h6"},o("syllabus.weeklyOfficehours")),r.a.createElement(si.a,{"aria-label":"simple table"},r.a.createElement(ii.a,null,(i.regularOfficeHours||[]).map((function(e,t){return r.a.createElement(li.a,{key:e.day},r.a.createElement(ci.a,{scope:"row"},o("courseForm.days.".concat(e.day.toLowerCase()))),r.a.createElement(ci.a,{align:"right"},"".concat(o("syllabus.from")," ").concat(e.startTime," ").concat(o("syllabus.to")," ").concat(e.endTime," ").concat(ms()(new Date(Date.now())).tz(e.timezoneRegion).format("z"))))})))),(i.irregularOfficeHours||[]).length>0&&r.a.createElement(He.a,{gutterBottom:!0,variant:"h6"},o("syllabus.otherOfficehours")),r.a.createElement(si.a,{"aria-label":"simple table"},r.a.createElement(ii.a,null,(i.irregularOfficeHours||[]).map((function(e,t){return r.a.createElement(li.a,{key:e.date},r.a.createElement(ci.a,{scope:"row"},"".concat(bt()(parseInt(e.date)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY")," ")),r.a.createElement(ci.a,{align:"right"},"".concat(o("syllabus.from")," ").concat(e.startTime," ").concat(o("syllabus.to")," ").concat(e.endTime," ").concat(ms()(new Date(Date.now())).tz(e.timezoneRegion).format("z"))))})))),r.a.createElement(He.a,{paragraph:!0,variant:"subtitle1"},o("syllabus.askQuestionsViaChat"))):r.a.createElement(He.a,{paragraph:!0,variant:"h6"},o("syllabus.noOfficeHours"))))}}]),n}(a.Component),td=Object(c.b)((function(e){return{modalDocument:e.common.modalDocument,courses:e.common.courses,isDarkTheme:e.common.isDarkTheme,configuration:e.common.configuration}}))(Object(Qa.a)("common")(ed)),nd=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmCheckbox:!1},e.handleChange=function(t){e.setState({confirmCheckbox:t.target.checked})},e}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this.props,t=e.userId,n=e.token,a=e.modalDocument,o=e.enroll,s=e.t,i={backgroundColor:e.isDarkTheme?"":"white",padding:10,margin:"10px auto 10px auto"};return r.a.createElement("div",null,r.a.createElement("div",{style:i},r.a.createElement(He.a,{paragraph:!0,variant:"subtitle1",gutterBottom:!0},s("syllabus.youAreRequesting"),r.a.createElement("span",{style:{fontWeight:"bold"}},a.courseName))),r.a.createElement(td,null),r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:this.state.confirmCheckbox,onChange:this.handleChange,value:"checked"}),label:s("syllabus.agree")}),r.a.createElement(pt.a,{disabled:!this.state.confirmCheckbox,color:"primary",type:"button",title:"Request enrollment",onClick:function(){o(t,a._id,n)}},s("syllabus.buttons.submitRequest")),r.a.createElement("div",{style:i},r.a.createElement(He.a,{paragraph:!0,variant:"caption",gutterBottom:!0},s("syllabus.accessWhenApproved"))))}}]),n}(a.Component),ad=Object(c.b)((function(e){return{userId:e.authentication.userId,token:e.authentication.token,modalDocument:e.common.modalDocument,isDarkTheme:e.common.isDarkTheme}}),(function(e){return{enroll:function(t,n,a){e(function(e,t,n){return{type:"ENROLL_REQUEST_START",payload:{student:e,course:t,token:n}}}(t,n,a))}}}))(Object(Qa.a)("common")(nd)),rd=function(e,t,n){var a=n||t.testResults,r=(e.lessons||[]).reduce((function(e,t){return e+t.lessonSlides.length}),0),o=(e.lessons||[]).reduce((function(e,n){return n.lessonSlides.filter((function(e){return e.studentsSeen.includes(t._id)})).length+e}),0),s=(a||[]).filter((function(t){return t.isExcused&&t.course===e._id})).length,i=e.tests.length-s,c=e.tests.filter((function(e){return(a||[]).findIndex((function(t){return e._id===t.test&&t.closed&&!t.isExcused}))>-1})).length+o,l=r+i;return isNaN(parseInt(c/l*100))?0:parseInt(c/l*100)},od=Object(Mt.a)({form:"processEnrollmentRequestForm",enableReinitialize:!0,destroyOnUnmount:!0})((function(e){var t=e.token,n=e.modalDocument,o=e.enroll,s=e.deny,i=e.course,c=e.markAsSeen,l=e.notifications,u=e.formValues,d=void 0===u?{}:u,m=e.isDarkTheme,p=Object(We.a)().t;Object(a.useEffect)((function(){var e=[];(l||[]).forEach((function(t){"courseEnrollRequest"!==t.documentType&&"courseDrop"!==t.documentType||t.fromUser!==n._id||e.push(t)})),e.forEach((function(e){c(e._id,t)}))}),[]);var f=Object($l.a)(),g=[{label:p("confirmations.enrollConfirm.allow"),value:"approve",placement:"end",color:"primary"},{label:p("confirmations.enrollConfirm.deny"),value:"deny",placement:"end",color:"primary"}],b={label:p("confirmations.enrollConfirm.allowResubmission"),checked:!1},h=[{value:"",primaryText:""},{value:"governmentId",primaryText:p("confirmations.governmentId")},{value:"birthCertificate",primaryText:p("confirmations.birthCertificate")},{value:"transcript",primaryText:p("confirmations.transcript")},{value:"legalStatusProof",primaryText:p("confirmations.proofLegalStatus")},{value:"cv",primaryText:p("confirmations.cv")},{value:"testScoresProof",primaryText:p("confirmations.proofTestScores")},{value:"referenceLetter",primaryText:p("confirmations.letterReference")},{value:"statementPurpose",primaryText:p("confirmations.statementPurpose")},{value:"other",primaryText:p("confirmations.other")}],E=r.a.useState(0),v=Object(vo.a)(E,2),y=v[0],T=v[1],k=(n.documents||[]).length,S={backgroundColor:m?"":"white",padding:10,margin:"10px auto 10px auto"},w=[[p("confirmations.firstName"),n.firstName],[p("confirmations.lastName"),n.lastName],[p("confirmations.studentId"),n._id.replace(/\D/g,"")],[p("confirmations.dob"),bt()(new Date(n.dob).getTime()).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY")],[p("confirmations.email"),n.email],[p("confirmations.lastLogin"),bt()(new Date(parseInt(n.lastLogin)).getTime()).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")],[p("confirmations.courseProgress"),"".concat(rd(i,n),"%")]];return r.a.createElement("div",null,r.a.createElement("div",{style:Object(It.a)({backgroundImage:'url("'.concat(n.profilePicture,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"200px",borderRadius:"50%",maxWidth:"200px",width:"100%"},S)}),r.a.createElement("div",{style:S},r.a.createElement(si.a,{"aria-label":"simple table"},r.a.createElement(ii.a,null,w.map((function(e){return r.a.createElement(li.a,{key:e[0]},r.a.createElement(ci.a,{component:"th",scope:"row"},e[0]),r.a.createElement(ci.a,{align:"right"},e[1]))}))))),k>0&&r.a.createElement("div",{style:S},r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},p("confirmations.documents")),k>0&&r.a.createElement(oo.a,{steps:k,position:"static",variant:"text",activeStep:y,nextButton:r.a.createElement(pt.a,{size:"small",onClick:function(){T((function(e){return e+1}))},disabled:y===k-1},p("confirmations.next"),"rtl"===f.direction?r.a.createElement(Du.a,null):r.a.createElement(Iu.a,null)),backButton:r.a.createElement(pt.a,{size:"small",onClick:function(){T((function(e){return e-1}))},disabled:0===y},"rtl"===f.direction?r.a.createElement(Iu.a,null):r.a.createElement(Du.a,null),p("confirmations.back"))}),(n.documents||[]).map((function(e,t){if(t!==y)return null;var n=(is(e.document)||"").split(".").pop(),a=e.document,o=h.find((function(t){return t.value===e.documentType})).primaryText;return r.a.createElement("div",{key:e.document+t},r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},o),("jpeg"===n||"jpg"===n||"jfif"===n)&&r.a.createElement("div",{style:{backgroundImage:'url("'.concat(a,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"300px",borderRadius:"3px",width:"100%",margin:"auto"}}),("docx"===n||"doc"===n)&&r.a.createElement(Ua.a,{fileType:n,filePath:a}),"pdf"===n&&r.a.createElement(ji,{url:a,index:t}))}))),r.a.createElement("div",{style:S},r.a.createElement(ba.a,{component:oi,name:"decision",title:"Decision",required:!0,label:"Test Type",options:g,orientation:"horizontal"}),r.a.createElement(ba.a,{name:"reason",component:pi,label:p("confirmations.enrollConfirm.reason"),options:{multiline:!0,rows:3,variant:ya.a,disabled:"approve"===d.decision||!d.decision},textLabel:!0}),"deny"===d.decision&&r.a.createElement(ba.a,{name:"allowResubmission",options:b,component:Ca}),r.a.createElement(pt.a,{disabled:!d.decision,variant:"outlined",color:"default",type:"button",title:"Enroll in Course",onClick:function(){var e=d.decision,a=d.reason,r=d.allowResubmission;"approve"===e&&o(n._id,i._id,t),"deny"===e&&s(n._id,i._id,t,a,r)}},p("confirmations.enrollConfirm.submit"))))})),sd=Object(c.b)((function(e){return{token:e.authentication.token,modalDocument:e.common.modalDocument,notifications:e.common.notifications,course:e.common.selectedCourse,isDarkTheme:e.common.isDarkTheme,initialValues:{allowResubmission:!1},formValues:Object(nt.a)("processEnrollmentRequestForm")(e)}}),(function(e){return{markAsSeen:function(t,n){e(ke(t,n))},enroll:function(t,n,a){e(k(t,n,a))},deny:function(t,n,a,r,o){e(w(t,n,a,r,o))}}}))(od),id=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return(e.configuration||{}).isPasswordRequiredStartTest?(e.password||(t.password=ua.t("confirmations.takeTest.required")),t):t},cd=Object(Mt.a)({form:"takeTestConfirmation",validate:id,destroyOnUnmount:!0,touchOnBlur:!1})((function(e){var t=e.startTest,n=e.userId,o=e.token,s=e.modalDocument,i=void 0===s?{}:s,c=e.markAsSeen,l=e.fetchNotifications,u=e.notifications,d=e.modalDocument,m=e.modalType,p=e.width,f=e.formValues,g=e.touchField,b=e.configuration,h=Object(a.useState)(!1),E=Object(vo.a)(h,2),v=E[0],y=E[1],T=Object(We.a)().t;Object(a.useEffect)((function(){if("startTestConfirmation"===m){var e=(u||[]).find((function(e){return e.documentId===(d||{})._id&&"test"===e.documentType||e.documentId===(d||{})._id&&"resetTest"===e.documentType?e:void 0}));e&&(c(e._id,o),l(o))}}),[]);i.testType,i.testType,i.testType;parseInt(i.dueDate),Date.now(),parseInt(i.timer);var k=[{id:"".concat(T(p>560?"confirmations.takeTest.mc":"confirmations.takeTest.mcShort")," ").concat(i.sectionWeights.mcSection,"%"),label:T("confirmations.takeTest.mc"),value:i.sectionWeights.mcSection,color:"hsl(128, 70%, 50%)"},{id:"".concat(T("confirmations.takeTest.essay")," ").concat(i.sectionWeights.essaySection,"%"),label:T("confirmations.takeTest.essay"),value:i.sectionWeights.essaySection,color:"hsl(88, 70%, 50%)"},{id:"".concat(T("confirmations.takeTest.speaking")," ").concat(i.sectionWeights.speakingSection,"%"),label:T("confirmations.takeTest.speaking"),value:i.sectionWeights.speakingSection,color:"hsl(245, 70%, 50%)"},{id:"".concat(T(p>560?"confirmations.takeTest.fillblanks":"confirmations.takeTest.fillblanksShort")," ").concat(i.sectionWeights.fillBlankSection,"%"),label:T("confirmations.takeTest.fillblanks"),value:i.sectionWeights.fillBlankSection,color:"hsl(340, 70%, 50%)"}].filter((function(e){return e.value}));return r.a.createElement("div",null,r.a.createElement(Au,{test:i,startTest:!0}),Object.values(i.sectionWeights).filter((function(e){return e})).length>1&&r.a.createElement("div",{style:{height:p>450?300:200}},r.a.createElement(di,{data:k})),r.a.createElement(He.a,{paragraph:!0,variant:"caption",gutterBottom:!0},T("confirmations.takeTest.saveOften")),r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:v,onChange:function(e){y(e.target.checked)},value:"checked"}),label:T("confirmations.takeTest.agree")}),r.a.createElement(pt.a,{disabled:!v,color:"secondary",onClick:function(){var e=id(f);g("password"),e.password||t(i._id,n,o,f.password)}},T("confirmations.takeTest.startTest")),v&&b.isPasswordRequiredStartTest&&r.a.createElement(qe,null,r.a.createElement(ba.a,{component:ka,name:"password",simple:!0,label:T("confirmations.takeTest.loginPassword"),type:"password",textLabel:!0})))})),ld=Object(c.b)((function(e){var t=e.common.configuration;return{formValues:Object(nt.a)("takeTestConfirmation")(e),userId:e.authentication.userId,token:e.authentication.token,modalDocument:e.common.modalDocument,modalType:e.common.modalType,notifications:e.common.notifications,width:e.common.width,configuration:t,initialValues:{configuration:t}}}),(function(e){return{startTest:function(t,n,a,r){return e(Pe(t,n,a,null,null,r))},markAsSeen:function(t,n){e(ke(t,n))},fetchNotifications:function(t){e(ye(t))},touchField:function(t){e(Object(Bt.d)("takeTestConfirmation",t))}}}))(cd),ud=n(650),dd=n.n(ud),md=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){var e;Object(jt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmCheckbox:!1},e.handleChange=function(t){e.setState({confirmCheckbox:t.target.checked})},e.resetCheckbox=function(t){e.setState({confirmCheckbox:!1})},e}return Object(Rt.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalDocument,n=e.token,a=e.userId,o=e.drop,s=e.t,i=e.configuration,c=(i.dropCourseGrade,i.isEnrollAllowedAfterDropCourse);return r.a.createElement("div",null,r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.dropCourse.youAreDropping")+" ",r.a.createElement("span",{className:dd.a.Bold},(t||{}).courseName)),(t||{}).courseDropDeadline&&parseInt((t||{}).courseDropDeadline)>Date.now()&&r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},"".concat(s("confirmations.dropCourse.deadlineNotYet")," ").concat(c?"":s("confirmations.dropCourse.noEnroll"))),(t||{}).courseDropDeadline&&parseInt((t||{}).courseDropDeadline)<Date.now()&&(t||{}).courseDropDeadline&&r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.dropCourse.deadlinePassed")),(t||{}).enrollmentEndDate&&parseInt((t||{}).enrollmentEndDate)>Date.now()&&r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.dropCourse.youCanReenroll")),parseInt((t||{}).enrollmentEndDate)<Date.now()&&(t||{}).enrollmentEndDate&&r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},s("confirmations.dropCourse.youCanNotReenroll")),r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:this.state.confirmCheckbox,onChange:this.handleChange,value:"checked"}),label:s("confirmations.dropCourse.agree")}),r.a.createElement(pt.a,{disabled:!this.state.confirmCheckbox,color:"secondary",type:"button",title:"Drop Course",onClick:function(){o(a,t._id,n)}},s("confirmations.dropCourse.dropCourse")))}}]),n}(a.Component),pd=Object(c.b)((function(e){return{courses:e.common.courses,courseDropping:e.studentCourse.courseDropping,modalDocument:e.common.modalDocument,token:e.authentication.token,userId:e.authentication.userId,configuration:e.common.configuration}}),(function(e){return{drop:function(t,n,a){e(function(e,t,n){return{type:"DROP_COURSE_START",payload:{student:e,course:t,token:n}}}(t,n,a))}}}))(Object(Qa.a)("common")(md)),fd=n(37),gd=n.n(fd),bd=function(e){var t=e.instructorTest,n=void 0===t?{}:t,a=e.sections,o=e.studentInput,s=e.testResult,i=void 0===s?[]:s,c=e.isDarkTheme,l=((n||{}).audioMaterials||[])[0]||{},u=((n||{}).readingMaterials||[])[0]||{},d=Object(We.a)().t,m={background:"#1976d2",borderRadius:4,color:"white",padding:10};return r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h5",gutterBottom:!0},d("testReview.multiplechoicesection")),a>1&&r.a.createElement(He.a,{style:{margin:"20px 0"},variant:"body2",gutterBottom:!0},"".concat(d("testReview.sectionWorth")," ").concat(((n||{}).sectionWeights||{}).mcSection,"%")),r.a.createElement(Qs,{index:"mcSectionReview",summary:d("testReview.sectionResources"),disabled:!u.content&&!l.audio},r.a.createElement(Lc,{audioId:"mcAudioMaterialReviewTest",pdfIndex:0,readingContent:u.content,audioSource:l.audio,onPreview:function(){return Yo("mcAudioMaterialReviewTest")},fileUpload:u.fileUpload})),((n||{}).multipleChoiceQuestions||[]).map((function(e,t){var n=(e.correctAnswers||[]).map((function(e){return parseInt(e)-1})),a=(e.answerOptions||[]).filter((function(e,t){if(n.includes(t))return e})),s=(e.answerOptions||[]).filter((function(e,t){if(!n.includes(t))return e})),l=(o.answers||[]).find((function(e){return e.questionNumber===t+1})),u=(l||{}).answers,p=((e.answerOptions||[]).filter((function(e){if(!(u||[]).includes(e))return e}))||[]).filter((function(e){if((a||[]).includes(e))return e})),f=s.filter((function(e){if((u||[]).includes(e))return e})),g="#ffc107",b=((i.answers||[])[t]||{}).marks;return e.marks===b&&(g="#4caf50"),0===b&&(g="#F44336"),r.a.createElement("div",{className:c?gd.a.QuestionContainerDark:gd.a.QuestionContainer,key:e+t},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(d("testReview.question")," ").concat(t+1)),r.a.createElement(He.a,{paragraph:!0,color:"error",variant:"caption",gutterBottom:!0},1===p.length?d("testReview.oneAnswerMissing"):null),r.a.createElement(He.a,{paragraph:!0,color:"error",variant:"caption",gutterBottom:!0},f.length>1?"".concat(f.length," ").concat(d("testReview.xAnswersSelectedIncorrectly")," "):null),r.a.createElement(He.a,{paragraph:!0,color:"error",variant:"caption",gutterBottom:!0},p.length>1?"".concat(f.length," ").concat(d("testReview.xAnswersMissing")," "):null),r.a.createElement("div",{style:m,dangerouslySetInnerHTML:{__html:oc.a.sanitize(e.question)}}),e.answerOptions.map((function(e,t){return r.a.createElement(He.a,{key:e+t,variant:"body2",gutterBottom:!0},r.a.createElement("span",null,"".concat(t+1,") ")),r.a.createElement("span",{className:(u||[]).includes(e)?gd.a.YellowBackground:""},"".concat(e)),r.a.createElement("span",{className:((p||[]).includes(e)||(f||[]).includes(e))&&(u||[]).includes(e)?gd.a.RedText:""},((p||[]).includes(e)||(f||[]).includes(e))&&(u||[]).includes(e)?r.a.createElement("span",{className:gd.a.RedText},r.a.createElement("i",{className:"fa fa-times"})):""),r.a.createElement("span",{className:(p||[]).includes(e)||(f||[]).includes(e)||!(u||[]).includes(e)?"":gd.a.GreenText},!(p||[]).includes(e)&&!(f||[]).includes(e)&&(u||[]).includes(e)&&r.a.createElement("span",{className:gd.a.GreenText},r.a.createElement("i",{className:"fa fa-check"}))))})),r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},n.length>1?d("testReview.correctAnswerPlural")+": ":d("testReview.correctAnswer")+": ",n.map((function(e,t){return r.a.createElement("span",{key:e+t},"".concat(e+1,"\n                    ").concat(n.length>1&&t!==n.length-1?",":""," "))}))),r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},d("testReview.marks")),r.a.createElement(Na,{input:{value:((i.answers||[])[t]||{}).marks||0},simple:!0,readOnly:!0,width:80,borderColor:g})," / ".concat(e.marks),e.solution&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(He.a,{variant:"body1",gutterBottom:!0},d("testReview.solution")),r.a.createElement(ba.a,{name:"instructorTest.multipleChoiceQuestions.".concat(t,".solution"),component:pi,options:{multiline:!0,rows:2,variant:ya.a,readOnly:!0}})),(l||{}).additionalNotes&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(He.a,{className:gd.a.RedText,variant:"body1",gutterBottom:!0},d("testReview.feedback")),r.a.createElement(pi,{input:{value:(l||{}).additionalNotes},options:{multiline:!0,rows:2,variant:ya.a,readOnly:!0}})))})))},hd=function(e){var t=e.instructorTest,n=void 0===t?{}:t,a=e.sections,o=e.studentInput,s=e.testResult,i=void 0===s?{}:s,c=(e.test,e.formValues),l=void 0===c?{}:c,u=e.isDarkTheme,d={background:"#1976d2",borderRadius:4,color:"white",padding:10,marginBottom:20},m=((n||{}).audioMaterials||[])[1]||{},p=((n||{}).readingMaterials||[])[1]||{},f=Object(We.a)().t;return r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h5",gutterBottom:!0},f("testReview.essaysection")),a>1&&r.a.createElement(He.a,{style:{margin:"20px 0"},variant:"body2",gutterBottom:!0},"".concat(f("testReview.sectionWorth")," ").concat(((n||{}).sectionWeights||{}).essaySection,"%")),r.a.createElement(Qs,{index:"essaySectionReview",summary:f("testReview.sectionResources"),disabled:!p.content&&!m.audio},r.a.createElement(Lc,{audioId:"essayAudioMaterialReviewTest",pdfIndex:1,readingContent:p.content,audioSource:m.audio,onPreview:function(){return Yo("essayAudioMaterialReviewTest")},fileUpload:p.fileUpload})),((n||{}).essayQuestions||[]).map((function(e,t){var n=(o.answers||[]).find((function(e){return e.questionNumber===t+1})),a="#ffc107",s=(((i.essaySection||{}).answers||[])[t]||{}).marks;(e||{}).marks===s&&(a="#4caf50"),0===s&&(a="#F44336");var c=(((l.testResult||{}).essaySection||{}).answers||[])[t]||{},m=((l.essaySection||[])[t]||{}).uneditedAnswer;return r.a.createElement("div",{className:u?gd.a.QuestionContainerDark:gd.a.QuestionContainer,key:e+t},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(f("testReview.question")," ").concat(t+1)),r.a.createElement("div",{style:d,dangerouslySetInnerHTML:{__html:oc.a.sanitize(e.question)}}),c.allowCorrection&&c.answer!==c.instructorCorrection&&r.a.createElement(ba.a,{name:"essaySection.".concat(t,".uneditedAnswer"),options:{label:"Show unedited answer",checked:!1},component:Ca}),r.a.createElement(ba.a,{border:"yellowBorder",type:"balloon",reduxForm:"testReview",name:"testResult.essaySection.answers.".concat(t,".").concat(m?"answer":"instructorCorrection"),component:zr,readOnly:!0}),r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},f("testReview.marks")),r.a.createElement(Na,{borderColor:a,input:{value:(((i.essaySection||{}).answers||[])[t]||{}).marks||0},simple:!0,readOnly:!0,width:80})," / ".concat((e||{}).marks),(e||{}).solution&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(He.a,{variant:"body1",gutterBottom:!0},f("testReview.solution")),r.a.createElement(ba.a,{name:"instructorTest.essayQuestions.".concat(t,".solution"),component:pi,options:{multiline:!0,rows:2,variant:ya.a,readOnly:!0}})),(n||{}).additionalNotes&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(He.a,{className:gd.a.RedText,variant:"body1",gutterBottom:!0},f("testReview.feedback")),r.a.createElement(pi,{input:{value:(n||{}).additionalNotes},options:{multiline:!0,rows:2,variant:ya.a,readOnly:!0}})))})))},Ed=function(e){var t=e.instructorTest,n=void 0===t?{}:t,a=e.sections,o=e.studentInput,s=void 0===o?{}:o,i=e.testResult,c=void 0===i?{}:i,l=(e.test,e.isDarkTheme),u=((n||{}).audioMaterials||[])[2]||{},d=((n||{}).readingMaterials||[])[2]||{},m=Object(We.a)().t,p={background:"#1976d2",borderRadius:4,color:"white",padding:10};return r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h5",gutterBottom:!0},m("testReview.speakingsection")),a>1&&r.a.createElement(He.a,{style:{margin:"20px 0"},variant:"body2",gutterBottom:!0},"".concat(m("testReview.sectionWorth")," ").concat(((n||{}).sectionWeights||{}).speakingSection,"%")),r.a.createElement(Qs,{index:"speakingSectionReview",summary:m("testReview.sectionResources"),disabled:!d.content&&!u.audio},r.a.createElement(Lc,{audioId:"speakingAudioMaterialReviewTest",pdfIndex:2,readingContent:d.content,audioSource:u.audio,onPreview:function(){return Yo("speakingAudioMaterialReviewTest")},fileUpload:d.fileUpload})),(n.speakingQuestions||[]).map((function(e,t){var n=(s.answers||[]).find((function(e){if(e.questionNumber===t+1)return e}))||{},a="#ffc107",o=((c.answers||[])[t]||{}).marks;return(e||{}).marks===o&&(a="#4caf50"),0===o&&(a="#F44336"),r.a.createElement("div",{className:l?gd.a.QuestionContainerDark:gd.a.QuestionContainer,key:e+t},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(m("testReview.question")," ").concat(t+1)),!n.answer&&r.a.createElement(He.a,{variant:"caption",color:"error",gutterBottom:!0},m("testReview.noAnswerProvided")),e.question&&r.a.createElement("div",{style:p,dangerouslySetInnerHTML:{__html:oc.a.sanitize(e.question)}}),e.questionAudio&&r.a.createElement(qe,null,r.a.createElement("audio",{id:"audioQuestion[".concat(t,"]"),src:e.questionAudio}),r.a.createElement(pt.a,{fullWidth:!0,color:"primary",onClick:function(){Yo("audioQuestion[".concat(t,"]"))}},m("testReview.buttons.playQuestion"))),r.a.createElement(qe,null,r.a.createElement("audio",{id:"audioAnswer[".concat(t,"]"),src:n?n.answer:null}),r.a.createElement(pt.a,{fullWidth:!0,color:"secondary",disabled:!n.answer||""===n.answer,onClick:function(){Yo("audioAnswer[".concat(t,"]"))}},n.answer&&""!==n.answer?m("testReview.buttons.playYourAnswer"):m("testReview.buttons.noAnswer"))),r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},m("testReview.marks")),r.a.createElement(Na,{input:{value:((c.answers||[])[t]||{}).marks||0},simple:!0,readOnly:!0,width:80,borderColor:a})," / ".concat((e||{}).marks),e.audio&&r.a.createElement(qe,null,r.a.createElement("audio",{id:"audioExplanation[".concat(t,"]"),src:e.audio}),r.a.createElement(pt.a,{fullWidth:!0,color:"primary",onClick:function(){Yo("audioExplanation[".concat(t,"]"))}},m("testReview.buttons.playAnswer"))),(e||{}).solution&&r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"body1",gutterBottom:!0},m("testReview.solution")),r.a.createElement(ba.a,{name:"instructorTest.speakingQuestions.".concat(t,".solution"),component:pi,label:"Solution",options:{multiline:!0,rows:2,variant:ya.a,readOnly:!0}})),n.additionalNotes&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(He.a,{className:gd.a.RedText,variant:"body1",gutterBottom:!0},m("testReview.feedback")),r.a.createElement(pi,{input:{value:n.additionalNotes},options:{multiline:!0,rows:2,variant:ya.a,readOnly:!0}})),n.feedbackAudio&&r.a.createElement(qe,null,r.a.createElement("audio",{id:"audioFeedBack[".concat(t,"]"),src:n.feedbackAudio}),r.a.createElement(pt.a,{disabled:!n.feedbackAudio,color:"primary",onClick:function(){Yo("audioFeedBack[".concat(t,"]"))},className:gd.a.buttonSpace,fullWidth:!0},m("testReview.buttons.playFeedback"))))})))},vd=function(e){var t=e.instructorTest,n=void 0===t?{}:t,a=e.sections,o=e.studentInput,s=void 0===o?[]:o,i=e.testResult,c=void 0===i?{}:i,l=(e.test,e.formValues,e.isDarkTheme),u=Object(We.a)().t,d=(n.fillInBlanksQuestions||"").text,m=(n.fillInBlanksQuestions||"").blanks||[],p=((n||{}).audioMaterials||[])[3]||{},f=((n||{}).readingMaterials||[])[3]||{},g=Xi()(d||"",/<mark [^>]+>(.*?)<\/mark>/g,(function(e,t){var n=t/2-.5,a=m[n]||{},o=a.correctAnswer;if(!0===a.selectableAnswer){var i=((s||[]).find((function(e){return e.questionNumber===n+1}))||{}).answer;return r.a.createElement(qe,{key:e+n},r.a.createElement("span",{className:gd.a.BlankPreview},n+1," "),a.audio&&r.a.createElement("td",{dangerouslySetInnerHTML:{__html:'\n                <audio id="audio['.concat(n,']" src="').concat(a.audio,'">\n                </audio>\n                 <span class="').concat(gd.a.Pointer,'" onClick="(function(){\n                   const audio = document.getElementById(\'audio[').concat(n,']\');\n                   audio.play()\n                   return false;\n                   })();return false;" >\n                   <i class="fa fa-volume-down"></i>\n                   </span>\n              ')}}),r.a.createElement("select",{readOnly:!0,value:"student selected",className:gd.a.SelectField},r.a.createElement("option",{disabled:!0,value:o===i?"student selected":"Correct Option"},o),["1","2","3"].map((function(e,t){return r.a.createElement("option",{disabled:!0,key:"incorrectOption[".concat(e,"]"),value:(a.incorrectAnswers||[])[t]===i?"student selected":"Incorrect option ".concat(e)},(a.incorrectAnswers||[])[t])}))),o===i?r.a.createElement("span",{className:gd.a.GreenText},r.a.createElement("i",{className:"fa fa-check"})):r.a.createElement("span",{className:gd.a.RedText},r.a.createElement("i",{className:"fa fa-times"})))}if(!1===a.selectableAnswer){var c=((s||[]).find((function(e){return e.questionNumber===n+1}))||{}).answer;return r.a.createElement(qe,{key:e+n},r.a.createElement("span",{className:gd.a.Inline},r.a.createElement("span",{className:gd.a.BlankPreview},n+1," "),a.audio&&r.a.createElement(qe,null,r.a.createElement("td",{dangerouslySetInnerHTML:{__html:'\n                      <audio id="audio['.concat(n,']" src="').concat(a.audio,'">\n                      </audio>\n                      <span class="').concat(gd.a.Pointer,'" onClick="(function(){\n                      const audio = document.getElementById(\'audio[').concat(n,']\');\n                      audio.play()\n                      return false;\n                      })();return false;" >\n                      <i class="fa fa-volume-down"></i>\n                      </span>\n                  ')}})),r.a.createElement("input",{readOnly:!0,type:"text",className:gd.a.InputField,value:"".concat(c||"")}),(o||"").toLowerCase()===(c||"").toLowerCase()?r.a.createElement("span",{className:gd.a.GreenText},r.a.createElement("i",{className:"fa fa-check"})):r.a.createElement("span",{className:gd.a.RedText},r.a.createElement("i",{className:"fa fa-times"}))))}})),b=[];return g.forEach((function(e,t){"string"===typeof e?b.push(e):b.push(Ji.a.renderToString(e))})),r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h5",gutterBottom:!0},u("testReview.fillintheblankssection")),a>1&&r.a.createElement(He.a,{style:{margin:"20px 0"},variant:"body2",gutterBottom:!0},"".concat(u("testReview.sectionWorth")," ").concat(((n||{}).sectionWeights||{}).fillBlankSection,"%")),r.a.createElement(Qs,{index:"fillBlankSectionReview",summary:u("testReview.sectionResources"),disabled:!f.content&&!p.audio},r.a.createElement(Lc,{audioId:"fillblanksAudioMaterialReviewTest",pdfIndex:3,readingContent:f.content,audioSource:p.audio,onPreview:function(){return Yo("fillblanksAudioMaterialReviewTest")},fileUpload:f.fileUpload})),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:oc.a.sanitize(b.join(""),{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}),((n.fillInBlanksQuestions||{}).blanks||[]).map((function(e,t){var n=(c.answers||[])[t]||{},a=(s.find((function(e){return e.questionNumber===t+1}))||{}).answer,o=(s.find((function(e){return e.questionNumber===t+1}))||{}).additionalNotes,i="#ffc107",d=n.marks;return(e||{}).marks===d&&(i="#4caf50"),0===d&&(i="#F44336"),r.a.createElement("div",{className:l?gd.a.QuestionContainerDark:gd.a.QuestionContainer,key:e+t},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(u("testReview.blank")," ").concat(t+1)),r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},u("testReview.yourAnswer"),r.a.createElement("span",{className:"Select the correct answer"!==a&&a?gd.a.YellowBackground:""},"Select the correct answer"===a?"":a)),r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},u("testReview.correctAnswer")+": "," ",r.a.createElement("span",null,(e||{}).correctAnswer)),r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},u("testReview.marks")),r.a.createElement(Na,{borderColor:i,input:{value:n.marks||0},simple:!0,readOnly:!0,width:80})," / ".concat((e||{}).marks),(e||{}).solution&&(e||{}).solution&&r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"body1",gutterBottom:!0},u("testReview.solution")),r.a.createElement(ba.a,{name:"instructorTest.fillInBlanksQuestions.blanks.".concat(t,".solution"),component:pi,options:{multiline:!0,rows:2,variant:ya.a,readOnly:!0}})),o&&r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(He.a,{className:gd.a.RedText,variant:"body1",gutterBottom:!0},u("testReview.feedback")),r.a.createElement(pi,{input:{value:o},options:{multiline:!0,rows:2,variant:ya.a,readOnly:!0}})))})))},yd=function(e,t){var n=(t||{}).instructorTest;return"mcSection"===e?((n||{}).multipleChoiceQuestions||[]).reduce((function(e,t){return e+t.marks}),0):"essay"===e?((n||{}).essayQuestions||[]).reduce((function(e,t){return e+t.marks}),0):"speaking"===e?((n||{}).speakingQuestions||[]).reduce((function(e,t){return e+t.marks}),0):"fillInBlanks"===e?(((n||{}).fillInBlanksQuestions||{}).blanks||[]).reduce((function(e,t){return e+t.marks}),0):void 0};function Td(e,t){return{info:e,value:t}}var kd=function(e){var t=e.instructorTest,n=e.test,a=e.testResult,o=void 0===a?{}:a,s=e.testReviewing,i=e.isDarkTheme,c=Object(We.a)().t;return r.a.createElement("div",{className:i?gd.a.SummaryContainerDark:gd.a.SummaryContainer},r.a.createElement(He.a,{variant:"h5",gutterBottom:!0},c("testReview.summary")),(o||{}).latePenalty&&r.a.createElement(He.a,{className:gd.a.RedText,variant:"h6",gutterBottom:!0},"".concat(c("testReview.latePenalty"),": ").concat((o||{}).latePenalty,"%")),r.a.createElement(si.a,{className:gd.a.table,"aria-label":"simple table"},r.a.createElement(ii.a,null,function(e){var t=["Multiple-choice section","Essay section","Speaking section","Fill-in-the-blanks section"];return["mcSection","essay","speaking","fillInBlanks"].map((function(n,a){return parseFloat(yd(n,e).toFixed(2))>0?Td(t[a],"".concat(parseFloat(function(e,t){var n=(t||{}).testResult;return"mcSection"===e?(((n||{}).multiplechoiceSection||[]).answers||[]).reduce((function(e,t){return e+t.marks}),0):"essay"===e?(((n||{}).essaySection||[]).answers||[]).reduce((function(e,t){return e+t.marks}),0):"speaking"===e?(((n||{}).speakingSection||[]).answers||[]).reduce((function(e,t){return e+t.marks}),0):"fillInBlanks"===e?(((n||{}).fillInBlanksSection||{}).answers||[]).reduce((function(e,t){return e+t.marks}),0):void 0}(n,e).toFixed(2))," / ").concat(parseFloat(yd(n,e).toFixed(2)))):null}))}(s).map((function(e,t){return e?r.a.createElement(li.a,{className:0===t?gd.a.MuiTableRow:"",key:e.info},r.a.createElement(ci.a,{className:0===t?gd.a.MuiTableCell:"",component:"th",scope:"row"},c("testReview.".concat((e.info||"").replace(/ /g,"").replace(/-/g,"").toLowerCase()))),r.a.createElement(ci.a,{className:0===t?gd.a.MuiTableCell:"",align:"right"},e.value)):null})))),r.a.createElement(si.a,{className:gd.a.table,"aria-label":"simple table"},r.a.createElement(ii.a,null,function(e,t){return[Td(t?"Test Grade":"Assignment Grade","".concat(e.grade,"%"))]}(o,n).map((function(e,n){return r.a.createElement(li.a,{className:0===n?gd.a.MuiTableRow:"",key:e.info},r.a.createElement(ci.a,{className:0===n?gd.a.MuiTableCell:"",component:"th",scope:"row"},r.a.createElement("span",null,c("testReview.".concat((e.info||"").replace(/ /g,"").toLowerCase())))," ",t.passingGrade&&r.a.createElement(qe,null,parseFloat(e.value)>=(t||{}).passingGrade?r.a.createElement("span",{style:{color:"#4caf50",marginLeft:5}},c("testReview.passed")):r.a.createElement("span",{style:{color:"red",marginLeft:5}},c("testReview.failed")))),r.a.createElement(ci.a,{className:0===n?gd.a.MuiTableCell:"",align:"right"},r.a.createElement(He.a,{variant:"body1",gutterBottom:!0},e.value)))})))),r.a.createElement(He.a,{variant:"caption",gutterBottom:!0},t.assignment?c("testReview.gradeAdjustedForWeightsAndLatePenalty"):c("testReview.gradeAdjustedForWeights")),(o||{}).gradeOverride&&r.a.createElement(qe,null,r.a.createElement(He.a,{className:gd.a.RedText,variant:"subtitle1",gutterBottom:!0},c("testReview.instructorAdjustedGrade")),(o||{}).gradeAdjustmentExplanation&&r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"body1"},c("testReview.gradeAdjustmentExplanation")),r.a.createElement(ba.a,{name:"testResult.gradeAdjustmentExplanation",component:pi,options:{multiline:!0,rows:2,variant:ya.a,readOnly:!0}}))))},Sd=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(){return Object(jt.a)(this,n),t.apply(this,arguments)}return Object(Rt.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialValues,n=e.userId,a=e.token,r=e.notifications,o=e.markAsSeen,s=(r||[]).find((function(e){if(e.toSpecificUser===n&&e.documentId===t.testResult.test&&"testReview"===e.documentType)return e}));s&&o(s._id,a)}},{key:"render",value:function(){var e=this.props,t=e.test,n=e.formValues,a=void 0===n?{}:n,o=e.assignment,s=e.initialValues,i=void 0===s?{}:s,c=e.t,l=e.isDarkTheme,u=i.instructorTest||{},d=i.testResult||{},m=Object.values(u.sectionWeights||[]).filter((function(e){return e})).length,p=d.multiplechoiceSection,f=d.essaySection,g=d.speakingSection,b=(d.fillInBlanksSection||{}).answers,h=((u||{}).audioMaterials||[])[4]||{},E=((u||{}).readingMaterials||[])[4]||{};return r.a.createElement("div",null,r.a.createElement(Au,{test:u}),r.a.createElement(Qs,{index:"testSectionReview",summary:c(o?"testReview.assignmentResources":"testReview.testResources"),disabled:!E.content&&!h.audio},r.a.createElement(Lc,{isDarkTheme:l,audioId:"testAudioMaterialReviewTest",pdfIndex:4,readingContent:E.content,audioSource:h.audio,onPreview:function(){return Yo("testAudioMaterialReviewTest")},fileUpload:E.fileUpload})),(u.sectionWeights||{}).mcSection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(bd,{isDarkTheme:l,formValues:a,instructorTest:u,test:t,sections:m,studentInput:p,testResult:(a.testResult||{}).multiplechoiceSection||{}})),(u.sectionWeights||{}).essaySection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(hd,{isDarkTheme:l,formValues:a,instructorTest:u,test:t,sections:m,studentInput:f,testResult:a.testResult||{}})),(u.sectionWeights||{}).speakingSection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(Ed,{isDarkTheme:l,test:t,instructorTest:u,sections:m,studentInput:g,testResult:(a.testResult||{}).speakingSection})),(u.sectionWeights||{}).fillBlankSection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(vd,{isDarkTheme:l,studentInput:b,test:t,instructorTest:u,sections:m,testResult:(a.testResult||{}).fillInBlanksSection||{}})),r.a.createElement(kd,{isDarkTheme:l,testResult:a.testResult,test:t,instructorTest:a.instructorTest||{},testReviewing:i}))}}]),n}(a.Component),wd=Object(Mt.a)({form:"testReview"})(Sd),Od=Object(c.b)((function(e){var t=e.common.modalDocument.test;return{formValues:Object(nt.a)("testReview")(e),initialValues:t,notifications:e.common.notifications,token:e.authentication.token,userId:e.authentication.userId,isDarkTheme:e.common.isDarkTheme}}),(function(e){return{markAsSeen:function(t,n){e(ke(t,n))}}}))(Object(Qa.a)("common")(wd)),Cd=n(1266),xd=Object(rt.a)((function(e){return{root:Object(yo.a)({maxWidth:"99%",flexGrow:1},e.breakpoints.up("960px"),{maxWidth:400}),header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:Object(yo.a)({height:"100%",maxWidth:300,overflow:"hidden",display:"block",width:"100%"},e.breakpoints.up("960px"),Object(yo.a)({maxWidth:800},"maxWidth",400)),editor:{width:"100%"}}}));var Ad=Object(c.b)((function(e){return{modalDocument:e.common.modalDocument,token:e.authentication.token,studentLoggedIn:e.authentication.studentLoggedIn,courses:e.common.courses,selectedCourse:e.common.selectedCourse,notifications:e.common.notifications}}),(function(e){return{markSlideAsSeen:function(t,n,a){e(function(e,t,n){return{type:"MARK_SLIDE_AS_SEEN_START",payload:{lessonId:e,slideNumber:t,token:n}}}(t,n,a))},markAsSeen:function(t,n){e(ke(t,n))},closeModal:function(){e({type:"CLOSE_MODAL"})}}}))((function(e){var t=e.modalDocument,n=e.markAsSeen,o=e.markSlideAsSeen,s=e.token,i=e.studentLoggedIn,c=e.selectedCourse,l=e.notifications,u=e.closeModal,d=Object(We.a)().t,m=c.lessons.find((function(e){return e._id===t._id})),p=(m||{}).lessonSlides||[],f=xd(),g=Object($l.a)(),b=r.a.useState(0),h=Object(vo.a)(b,2),E=h[0],v=h[1],y=r.a.useState(!1),T=Object(vo.a)(y,2),k=T[0],S=T[1],w=r.a.useState([]),O=Object(vo.a)(w,2),C=O[0],x=O[1],A=p.length,F=((m||{}).lessonSlides||[])[E]||{};return Object(a.useEffect)((function(){var e,t=function(){o(m._id,E,s)},n=document.querySelectorAll("audio");return n.length>0&&n[0].addEventListener("ended",t),C.forEach((function(e){return clearTimeout(e)})),F.seen||F.video||F.audio||(e=setTimeout(t,5e3)),x((function(t){return[].concat(Object(Vr.a)(t),[e])})),function(){n.length>0&&n[0].removeEventListener("ended",t),clearTimeout(e),C.forEach((function(e){return clearTimeout(e)}))}}),[E]),Object(a.useEffect)((function(){E+1>p.length&&v(p.length-1),p.length&&0!==p.length||u()}),[p.length]),Object(a.useEffect)((function(){var e=(l||[]).find((function(e){if(e.documentId===m._id&&i&&!e.seen)return e}));e&&n(e._id,s)}),[]),m?r.a.createElement("div",{className:f.root},i&&F.seen&&r.a.createElement(Cd.a,{severity:"success"}," ",d("lessons.completed")),r.a.createElement("div",{style:{minHeight:300}},F.slideContent&&!F.video&&r.a.createElement("div",{className:f.editor},r.a.createElement(zr,{videoPlaying:k,type:"balloon",readOnly:!0,input:{value:F.slideContent+" "}})),F.audio&&r.a.createElement("div",{className:"lessonPreview[".concat(E,"]")},r.a.createElement(rs,{key:"slideAudio[".concat(E,"]"),audioSource:F.audio})),F.video&&!F.slideContent&&r.a.createElement(Uo,{play:function(){return S(!0)},pause:function(){return S(!1)},ended:function(){S(!1),o(m._id,E,s)},url:F.video})),r.a.createElement(oo.a,{steps:A,position:"static",variant:"text",activeStep:E,nextButton:r.a.createElement(pt.a,{size:"small",onClick:function(){v((function(e){return e+1}))},disabled:E===A-1},d("lessons.buttons.next"),"rtl"===g.direction?r.a.createElement(Du.a,null):r.a.createElement(Iu.a,null)),backButton:r.a.createElement(pt.a,{size:"small",onClick:function(){v((function(e){return e-1}))},disabled:0===E},"rtl"===g.direction?r.a.createElement(Iu.a,null):r.a.createElement(Du.a,null),d("lessons.buttons.back"))})):null})),Fd=function(e){var t=e.fields,n=e.formValues,a=void 0===n?{}:n,o=e.meta,s=(o.error,o.submitFailed,e.changeDocument),i=Object(We.a)().t,c=Object($l.a)(),l=r.a.useState(0),u=Object(vo.a)(l,2),d=u[0],m=u[1],p=function(){m((function(e){return e-1}))},f=[{value:"",primaryText:""},{value:"governmentId",primaryText:i("account.governmentId")},{value:"birthCertificate",primaryText:i("account.birthCertificate")},{value:"transcript",primaryText:i("account.transcript")},{value:"legalStatusProof",primaryText:i("account.proofLegalStatus")},{value:"cv",primaryText:i("account.cv")},{value:"testScoresProof",primaryText:i("account.proofTestScores")},{value:"referenceLetter",primaryText:i("account.letterReference")},{value:"statementPurpose",primaryText:i("account.statementPurpose")},{value:"other",primaryText:i("account.other")}],g=(t||[]).length;return r.a.createElement(qe,null,g>0&&r.a.createElement(oo.a,{steps:g,position:"static",variant:"text",activeStep:d,nextButton:r.a.createElement(pt.a,{size:"small",onClick:function(){m((function(e){return e+1}))},disabled:d===g-1},i("account.buttons.next"),"rtl"===c.direction?r.a.createElement(Du.a,null):r.a.createElement(Iu.a,null)),backButton:r.a.createElement(pt.a,{size:"small",onClick:p,disabled:0===d},"rtl"===c.direction?r.a.createElement(Iu.a,null):r.a.createElement(Du.a,null),i("account.buttons.back"))}),r.a.createElement("div",null,r.a.createElement(pt.a,{onClick:function(e){e.preventDefault(),m(g),t.push()},"aria-label":"delete",fullWidth:!0},i("account.buttons.addDocument")),r.a.createElement(pt.a,{fullWidth:!0,disabled:!(g>0),onClick:function(e){e.preventDefault(),0!==d&&p(),t.remove(d)},"aria-label":"delete"},i("account.buttons.removeDocument")),(t||[]).map((function(e,t){if(t!==d)return null;var n=(a.documents[t]||{}).document instanceof File?(((a.documents[t]||{}).document||{}).name||"").split(".").pop():((a.documents[t]||{}).document||"").split(".").pop(),o=((a.documents||[])[t]||{}).loadedDocument;return r.a.createElement(qe,{key:e},r.a.createElement(ba.a,{name:"documents.".concat(t,".documentType"),fullWidth:!0,simple:!0,textLabel:i("account.documentType"),component:Gs,label:"document type",options:f}),r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(ba.a,{name:"documents.".concat(t,".document"),component:Va,loadedFile:o,mimeTypesAllowed:"image/jpeg, application/pdf, .doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",extensionsAllowed:["jpeg","jpg","jfif","pdf","docx","doc"],onChangeFile:function(e){s("documents.".concat(t,".loadedDocument"),e)},compressImage:!0,index:t,uploadButtonText:((a.documents||[])[t]||{}).document?i("account.buttons.updateDocument"):i("account.buttons.uploadDocument")})),"pdf"===n&&r.a.createElement(ji,{url:(a.documents[t]||{}).loadedDocument,index:t}))}))))},Dd=Object(Mt.a)({form:"accountForm",destroyOnUnmount:!1})((function(e){var t=e.formValues,n=void 0===t?{}:t,a=e.changeDocument;return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(fr.a,{name:"documents",formValues:n,changeDocument:a,component:Fd})))})),_d=Object(c.b)((function(e){return{formValues:Object(nt.a)("accountForm")(e),token:e.authentication.token,userId:e.authentication.userId,notification:e.common.notification,course:e.common.selectedCourse,courses:e.common.courses,coursePanel:e.common.coursePanel,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn,adminLoggedIn:e.authentication.adminLoggedIn,tab:e.common.tab,user:e.authentication,initialValues:e.authentication.loadedUser}}),(function(e){return{changeDocument:function(t,n){e(Object(Bt.a)("accountForm",t,n))}}}))(Dd),Id=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={mcSection:[],essaySection:[],speakingSection:[],fillInBlankSection:[]},n=!0,a=e.instructorTest||{};(parseFloat(e.gradeAdjusted)>100||parseFloat(e.gradeAdjusted)<0)&&e.gradeOverride&&(t.gradeAdjusted=ua.t("gradeTestForm.errors.finalGradeBetweenZeroAndHundred"),n=!1),(parseFloat(e.latePenalty)>100||parseFloat(e.latePenalty)<0)&&(t.latePenalty=ua.t("gradeTestForm.errors.latePenaltyBetweenZeroAndHundred"),n=!1),e.gradeOverride&&!e.gradeAdjusted&&(t.gradeAdjusted=ua.t("gradeTestForm.errors.provideGrade"),n=!1);var r=a.multipleChoiceQuestions||[];t.mcSection=(e.mcSection||[]).map((function(e,t){var a,o=(r[t]||{}).marks;return parseFloat(e.marks)<0&&(a=ua.t("gradeTestForm.errors.valueCantBeNegative")),parseFloat(e.marks)>o&&(a="".concat(ua.t("gradeTestForm.errors.valueCantBeGreaterThan")," ").concat(o)),e.marks&&""!==e.marks||0===e.marks||(a=ua.t("gradeTestForm.errors.required")),a&&(n=!1),{marks:a}}));var o=a.essayQuestions||[];t.essaySection=(e.essaySection||[]).map((function(e,t){var a,r=(o[t]||{}).marks;return parseFloat(e.marks)<0&&(a=ua.t("gradeTestForm.errors.valueCantBeNegative")),parseFloat(e.marks)>r&&(a="".concat(ua.t("gradeTestForm.errors.valueCantBeGreaterThan")," ").concat(r)),e.marks&&""!==e.marks||0===e.marks||(a=ua.t("gradeTestForm.errors.required")),a&&(n=!1),{marks:a}}));var s=a.speakingQuestions||[];t.speakingSection=(e.speakingSection||[]).map((function(e,t){var a,r=(s[t]||{}).marks;return parseFloat(e.marks)<0&&(a=ua.t("gradeTestForm.errors.valueCantBeNegative")),parseFloat(e.marks)>r&&(a="".concat(ua.t("gradeTestForm.errors.valueCantBeGreaterThan")," ").concat(r)),e.marks&&""!==e.marks||0===e.marks||(a=ua.t("gradeTestForm.errors.required")),a&&(n=!1),{marks:a}}));var i=(a.fillInBlanksQuestions||{}).blanks||[];return t.fillInBlankSection=(e.fillInBlankSection||[]).map((function(e,t){var a,r=(i[t]||{}).marks;return parseFloat(e.marks)<0&&(a=ua.t("gradeTestForm.errors.valueCantBeNegative")),parseFloat(e.marks)>r&&(a="".concat(ua.t("gradeTestForm.errors.valueCantBeGreaterThan")," ").concat(r)),e.marks&&""!==e.marks||0===e.marks||(a=ua.t("gradeTestForm.errors.required")),a&&(n=!1),{marks:a}})),t.isValid=n,t},jd=function(e){var t=e.test,n=(e.isTest,e.mcSectionStudentInput),a=e.sections,o=(e.formValues,e.isDarkTheme,Object(We.a)().t),s={background:"#1976d2",borderRadius:4,color:"white",padding:10};return r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h5",gutterBottom:!0},o("gradeTestForm.multiplechoicesection")),a>1&&r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},"".concat(o("gradeTestForm.sectionWorth")," ").concat(((t||{}).sectionWeights||{}).mcSection,"%")),((t||{}).multipleChoiceQuestions||[]).map((function(e,t){var a=((e||{}).correctAnswers||[]).map((function(e){return parseInt(e)-1})),i=((e||{}).answerOptions||[]).filter((function(e,t){if(a.includes(t))return e})),c=((e||{}).answerOptions||[]).filter((function(e,t){if(!a.includes(t))return e})),l=(n.answers.find((function(e){return e.questionNumber===t+1}))||{}).answers,u=(((e||{}).answerOptions||[]).filter((function(e){if(!(l||[]).includes(e))return e}))||[]).filter((function(e){if((i||[]).includes(e))return e})),d=c.filter((function(e){if((l||[]).includes(e))return e})),m=0===u.length&&0===d.length;return r.a.createElement("div",{className:xu.a.QuestionContainer,key:e+t},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(o("gradeTestForm.question")," ").concat(t+1)),r.a.createElement("div",{style:s,dangerouslySetInnerHTML:{__html:oc.a.sanitize(e.question)}}),r.a.createElement(He.a,{style:{display:"block"},color:"error",variant:"caption",gutterBottom:!0},1===d.length?o("gradeTestForm.oneAnswerIncorrect"):null),r.a.createElement(He.a,{style:{display:"block"},color:"error",variant:"caption",gutterBottom:!0},1===u.length?o("gradeTestForm.oneAnswerMissing"):null),r.a.createElement(He.a,{style:{display:"block"},color:"error",variant:"caption",gutterBottom:!0},d.length>1?"".concat(d.length,"  ").concat(o("gradeTestForm.xAnswersSelectedIncorrectly")):null),r.a.createElement(He.a,{style:{display:"block"},color:"error",variant:"caption",gutterBottom:!0},u.length>1?"".concat(d.length,"  ").concat(o("gradeTestForm.xAnswersMissing")):null),r.a.createElement(He.a,{style:{display:"block",marginBottom:20},variant:"body1",gutterBottom:!0},m&&r.a.createElement("span",{className:xu.a.GreenText},o("gradeTestForm.studentAnsweredCorrectly"))),e.answerOptions.map((function(e,t){return r.a.createElement(He.a,{key:e+t,variant:"body2",gutterBottom:!0},r.a.createElement("span",null,"".concat(t+1,") ")),r.a.createElement("span",{className:(l||[]).includes(e)?xu.a.YellowBackground:""},"".concat(e)),r.a.createElement("span",{className:((u||[]).includes(e)||(d||[]).includes(e))&&(l||[]).includes(e)?xu.a.RedText:""},((u||[]).includes(e)||(d||[]).includes(e))&&(l||[]).includes(e)&&r.a.createElement("span",{className:xu.a.RedText},r.a.createElement("i",{className:"fa fa-times"}))),r.a.createElement("span",{className:(u||[]).includes(e)||(d||[]).includes(e)||!(l||[]).includes(e)?"":xu.a.GreenText},!(u||[]).includes(e)&&!(d||[]).includes(e)&&(l||[]).includes(e)&&r.a.createElement("span",{className:xu.a.GreenText},r.a.createElement("i",{className:"fa fa-check"}))))})),r.a.createElement(He.a,{style:{marginTop:15},variant:"body2",gutterBottom:!0},a.length>1?o("gradeTestForm.correctAnswerPlural"):o("gradeTestForm.correctAnswer")+": ",a.map((function(e,t){return r.a.createElement("span",{key:e+t},"".concat(e+1,"\n                    ").concat(a.length>1&&t!==a.length-1?",":""," "))}))),r.a.createElement(He.a,{style:{marginTop:10},variant:"body1",gutterBottom:!0},o("gradeTestForm.fields.marks")),r.a.createElement(ba.a,{name:"mcSection.".concat(t,".marks"),simple:!0,component:Na,width:80})," / ".concat((e||{}).marks),e.solution&&r.a.createElement(qe,null,r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},o("gradeTestForm.solution")),r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},e.solution)),r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},o("gradeTestForm.fields.feedback")),r.a.createElement(ba.a,{name:"mcSection.".concat(t,".additionalNotes"),component:pi,options:{rows:3,variant:ya.a,marginTop:!0}}))})))},Rd=function(e){var t=e.test,n=(e.isTest,e.essaySectionStudentInput),a=e.sections,o=e.formValues,s=e.path,i={background:"#1976d2",borderRadius:4,color:"white",padding:10},c=Object(We.a)().t;return r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h5",gutterBottom:!0},c("gradeTestForm.essaysection")),a>1&&r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},"".concat(c("gradeTestForm.sectionWorth")," ").concat(((t||{}).sectionWeights||{}).essaySection,"%")),((t||{}).essayQuestions||[]).map((function(e,t){var a=n.answers.find((function(e){return e.questionNumber===t+1}));return r.a.createElement("div",{className:xu.a.QuestionContainer,key:e+t},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(c("gradeTestForm.question")," ").concat(t+1)),r.a.createElement("div",{style:i,dangerouslySetInnerHTML:{__html:oc.a.sanitize(e.question)}}),(a||{}).answer?r.a.createElement(qe,null,r.a.createElement(ba.a,{name:"essaySection.".concat(t,".allowCorrection"),options:{label:c("gradeTestForm.fields.correctUsingTextEditor"),checked:!1},component:Ca}),r.a.createElement("div",{style:{border:"2px solid #ffc107",borderRadius:4,padding:5}},r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},"".concat(c("gradeTestForm.studentAnswer"))),(((o||{}).essaySection||[])[t]||!1).allowCorrection?r.a.createElement(ba.a,{reduxForm:"gradeForm",component:zr,name:"essaySection.".concat(t,".instructorCorrection"),field:"essaySection.".concat(t,".instructorCorrection"),path:s}):r.a.createElement("div",{dangerouslySetInnerHTML:{__html:oc.a.sanitize((a||{}).answer)}}))):r.a.createElement(He.a,{variant:"caption",color:"error",gutterBottom:!0},c("gradeTestForm.noAnswerProvided")),r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},c("gradeTestForm.fields.marks")),r.a.createElement(ba.a,{name:"essaySection.".concat(t,".marks"),simple:!0,component:Na,width:80})," / ".concat((e||{}).marks),e.solution&&r.a.createElement(qe,null,r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},c("gradeTestForm.solution")),r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},e.solution)),r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},c("gradeTestForm.fields.feedback")),r.a.createElement(ba.a,{name:"essaySection.".concat(t,".additionalNotes"),component:pi,options:{rows:3,variant:ya.a,marginTop:!0}}))})))},Nd=function(e){var t=e.test,n=(e.isTest,e.speakingSectionStudentInput),a=e.sections,o=e.formValues,s=e.onInitiateRecording,i=e.onSetAudioData,c=e.onGetRecordingTimeout,l=e.onGetRecorderFromClick,u=e.micBlockedWarning,d={background:"#1976d2",borderRadius:4,color:"white",padding:10},m=Object(We.a)().t;return r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h5",gutterBottom:!0},m("gradeTestForm.speakingsection")),a>1&&r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},"".concat(m("gradeTestForm.sectionWorth")," ").concat(((t||{}).sectionWeights||{}).speakingSection,"%")),((t||{}).speakingQuestions||[]).map((function(e,t){var a=((n||{}).answers||[]).find((function(e){if(e.questionNumber===t+1)return e}));return r.a.createElement("div",{className:xu.a.QuestionContainer,key:e+t},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(m("gradeTestForm.question")," ").concat(t+1)),e.question&&r.a.createElement("div",{style:d,dangerouslySetInnerHTML:{__html:oc.a.sanitize(e.question)}}),e.questionAudio&&r.a.createElement(Ri,{onPreview:e.questionAudio?function(){return Yo("audioQuestion[".concat(t,"]"))}:null,audioSource:e.questionAudio,id:"audioQuestion[".concat(t,"]"),previewType:"button",previewText:m("gradeTestForm.buttons.playQuestion"),fullWidth:!0}),!(a||{}).answer&&r.a.createElement("div",{style:{margin:"auto",width:"50%"}},r.a.createElement(He.a,{style:{textAlign:"center"},variant:"caption",color:"error",gutterBottom:!0},m("gradeTestForm.noAnswerProvided"))),r.a.createElement(Ri,{onPreview:a.answer?function(){return Yo("audioAnswer[".concat(t,"]"))}:null,audioSource:a?(a||{}).answer:null,id:"audioAnswer[".concat(t,"]"),previewType:"button",previewText:m("gradeTestForm.buttons.playStudentsAnswer"),disabled:!(a||{}).answer,fullWidth:!0}),r.a.createElement(He.a,{variant:"body1",gutterBottom:!0},m("gradeTestForm.fields.marks")),r.a.createElement(ba.a,{name:"speakingSection.".concat(t,".marks"),simple:!0,component:Na,width:80})," / ".concat((e||{}).marks),e.audio&&r.a.createElement(Ri,{onPreview:e.audio?function(){return Yo("audioExplanation[".concat(t,"]"))}:null,audioSource:e.audio,id:"audioExplanation[".concat(t,"]"),previewType:"button",previewText:m("gradeTestForm.buttons.playSolution"),fullWidth:!0}),r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},m("gradeTestForm.fields.feedback")),r.a.createElement(ba.a,{name:"speakingSection.".concat(t,".additionalNotes"),component:pi,options:{multiline:!0,rows:3,variant:ya.a}}),r.a.createElement(ba.a,{component:Li,name:"speakingSection.".concat(t,".recordedBlob"),onStart:function(){var e=Object(Ba.a)(Pa.a.mark((function e(n){var a;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$o(n,null,t,null,function(){var e=Object(Ba.a)(Pa.a.mark((function e(n){var a;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:a=e.sent,i(a.blob,a.file,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,s(a.recorder,a.recordingTimeout,t,a.isRecording);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onStop:function(){var e=Object(Ba.a)(Pa.a.mark((function e(n){var a;return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vo(n,null,t,c(t),l(t));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,i(a.blob,a.file,t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPreview:function(){Yo("audioFeedback[".concat(t,"]"))},onClear:function(){return i(null,null,t)},id:"audioFeedback[".concat(t,"]"),recordDisabled:((o.speakingSection||[])[t]||{}).recording,audioSource:((o.speakingSection||[])[t]||{}).recordedBlob,previewType:"button",recordButtonText:m("gradeTestForm.buttons.recordFeedback"),isMicAlert:u}))})))},Ld=function(e){var t=e.test,n=void 0===t?{}:t,a=(e.isTest,e.sections),o=e.fillInBlanksStudentAnswers,s=Object(We.a)().t,i=(n.fillInBlanksQuestions||"").text,c=(n.fillInBlanksQuestions||"").blanks,l=Xi()(i||"",/<mark [^>]+>(.*?)<\/mark>/g,(function(e,t){var n=t/2-.5,a=(c||[])[n]||{},i=a.correctAnswer;if(!0===a.selectableAnswer){var l=((o||[]).find((function(e){return e.questionNumber===n+1}))||{}).answer;return r.a.createElement(qe,{key:e+n},r.a.createElement("span",{className:xu.a.BlankPreview},n+1," "),a.audio&&r.a.createElement(tc,{id:n,source:a.audio}),r.a.createElement("select",{readOnly:!0,value:s("gradeTestForm.studentSelected"),className:xu.a.SelectField},r.a.createElement("option",{disabled:!0,value:i===l?s("gradeTestForm.studentSelected"):"Correct Option"},i),(a.incorrectAnswers||[]).map((function(e){return r.a.createElement("option",{key:e,disabled:!0,value:s(e===l?"gradeTestForm.studentSelected":"gradeTestForm.incorrectOptionOne")},e)}))),i===l?r.a.createElement("span",{className:xu.a.GreenText},r.a.createElement("i",{className:"fa fa-check"})):r.a.createElement("span",{className:xu.a.RedText},r.a.createElement("i",{className:"fa fa-times"})))}if(!1===a.selectableAnswer){var u=((o||[]).find((function(e){return e.questionNumber===n+1}))||{}).answer;return r.a.createElement(qe,{key:e+n},r.a.createElement("span",{className:xu.a.Inline},r.a.createElement("span",{className:xu.a.BlankPreview},n+1," "),a.audio&&r.a.createElement(tc,{id:n,source:a.audio}),r.a.createElement("input",{readOnly:!0,type:"text",className:xu.a.InputField,value:"".concat(u||"")}),(i||"").toLowerCase()===(u||"").toLowerCase()?r.a.createElement("span",{className:xu.a.GreenText},r.a.createElement("i",{className:"fa fa-check"})):r.a.createElement("span",{className:xu.a.RedText},r.a.createElement("i",{className:"fa fa-times"}))))}})),u=[];l.forEach((function(e,t){"string"===typeof e?u.push(e):u.push(Ji.a.renderToString(e))}));var d=(u||"").join("");return r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h5",gutterBottom:!0},s("gradeTestForm.fillintheblankssection")),a>1&&r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},"".concat(s("gradeTestForm.sectionWorth")," ").concat(((n||{}).sectionWeights||{}).fillBlanksSection,"%")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:oc.a.sanitize(d,{ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}}),((n.fillInBlanksQuestions||{}).blanks||[]).map((function(e,t){var n=((o||[]).find((function(e){return e.questionNumber===t+1}))||{}).answer;return r.a.createElement("div",{className:xu.a.QuestionContainer,key:e+t},r.a.createElement(He.a,{variant:"h6",gutterBottom:!0},"".concat(s("gradeTestForm.blank")," ").concat(t+1)),r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},s("gradeTestForm.studentAnswer"),"Select the correct answer"!==n&&n&&r.a.createElement("span",{className:"Select the correct answer"!==n&&n?xu.a.YellowBackground:null},"Select the correct answer"===n?"":n)),r.a.createElement(He.a,{variant:"body2",gutterBottom:!0},s("gradeTestForm.correctAnswer")+": "," ",r.a.createElement("span",null,(e||{}).correctAnswer)),r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},s("gradeTestForm.fields.marks")),r.a.createElement(ba.a,{name:"fillInBlankSection.".concat(t,".marks"),simple:!0,component:Na,width:80})," / ".concat((e||{}).marks),r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},s("gradeTestForm.fields.feedback")),r.a.createElement(ba.a,{name:"fillInBlankSection.".concat(t,".additionalNotes"),placeholder:"Additional notes for student",component:pi,label:"Additional Notes",options:{multiline:!0,rows:3,variant:ya.a}}))})))},Pd=function(e){var t=e.onGetRowSectionMarks,n=e.onGetFinalGradeRow,a=e.formValues,o=e.test,s=e.isTest,i=Object(We.a)().t;return r.a.createElement(qe,null,r.a.createElement(He.a,{variant:"h5",gutterBottom:!0},i("gradeTestForm.summary")),r.a.createElement(si.a,{className:xu.a.table,"aria-label":"simple table"},r.a.createElement(ii.a,null,t(o).map((function(e,t){return e?r.a.createElement(li.a,{className:0===t?xu.a.MuiTableRow:"",key:e.info},r.a.createElement(ci.a,{className:0===t?xu.a.MuiTableCell:"",component:"th",scope:"row"},i("gradeTestForm.".concat((e.info||"").replace(/ /g,"").replace(/-/g,"").toLowerCase()))),r.a.createElement(ci.a,{className:0===t?xu.a.MuiTableCell:"",align:"right"},e.value)):null})))),!(a||{}).gradeOverride&&r.a.createElement(qe,null,r.a.createElement(si.a,{className:xu.a.table,"aria-label":"simple table"},r.a.createElement(ii.a,null,n(o).map((function(e,t){return r.a.createElement(li.a,{className:0===t?xu.a.MuiTableRow:"",key:e.info},r.a.createElement(ci.a,{className:0===t?xu.a.MuiTableCell:"",component:"th",scope:"row"},r.a.createElement(He.a,{variant:"body1",gutterBottom:!0},r.a.createElement("span",null,i("gradeTestForm.".concat((e.info||"").replace(" ","").replace("-","").toLowerCase()))),(o||{}).passingGrade&&r.a.createElement(qe,null,parseFloat(e.value)>=(o||{}).passingGrade?r.a.createElement("span",{style:{color:"#4caf50",marginLeft:5}},i("gradeTestForm.passed")):r.a.createElement("span",{style:{color:"red",marginLeft:5}},i("gradeTestForm.failed"))))),r.a.createElement(ci.a,{className:0===t?xu.a.MuiTableCell:"",align:"right"},r.a.createElement(He.a,{variant:"body1",gutterBottom:!0},parseFloat(parseFloat(e.value||0).toFixed(2)))))})))),r.a.createElement(He.a,{variant:"caption",gutterBottom:!0},i(s?"gradeTestForm.gradeAdjustedForWeights":"gradeTestForm.gradeAdjustedForWeightsAndLatePenalty"))))},Bd=function(e){Object(Nt.a)(n,e);var t=Object(Lt.a)(n);function n(e){var a;return Object(jt.a)(this,n),(a=t.call(this,e)).handleMicAlert=function(){clearTimeout(a.state.micBlockedWarningTO),a.setState({micBlockedWarning:!0});var e=setTimeout((function(){a.setState({micBlockedWarning:!1})}),5e3);a.setState({micBlockedWarningTO:e})},a.handleWindowClose=function(e){return e.preventDefault(),a.state.isUpdating||a.handleDeleteUnsavedImages(),e.returnValue},a.handleDeleteUnsavedImages=function(){var e=mo(a.props.formValues,"gradeTest"),t=[];(e||[]).forEach((function(e){-1===a.state.initialUrls.findIndex((function(t){return t===e}))&&t.push(e)})),t.length>0&&a.props.deleteImg(t,a.props.token)},a.handleSubmit=function(e,t,n,r,o){a.props.touchField("latePenalty"),a.props.touchField("gradeAdjusted"),a.setState({isUpdating:!0},(function(){var s=a.props,i=s.formValues,c=s.token,l=s.studentGrading,u=s.clearTestGrading,d=s.postGrades;r.isValid?(d(i,c,l,n,"post"===e,!0,a.getSectionGrades(n),"post"!==e,a.getFinalGrade(n),a.getFilesToDelete(i,t),o),u()):a.setValidity(!1)}))},a.handleCheckboxChange=function(e){a.setState({confirmCheckBox:!a.state.confirmCheckBox})},a.initiateRecording=function(e,t,n,r){if(r){var o=a.props.changeField;o("speakingSection.".concat(n,".recording"),r),o("speakingSection.".concat(n,".recorder"),e),o("speakingSection.".concat(n,".recorderTimeout"),t)}else a.handleMicAlert()},a.setAudioData=function(e,t,n){var r=a.props.changeField;r("speakingSection.".concat(n,".recording"),!1),r("speakingSection.".concat(n,".recordedBlob"),e),r("speakingSection.".concat(n,".audioFile"),t)},a.state={initialUrls:[],confirmCheckBox:!1,isValid:!0,isUpdating:!1,micBlockedWarning:!1,micBlockedWarningTO:null},a}return Object(Rt.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("beforeunload",this.handleWindowClose);var t=mo(this.props.initialValues,"gradeTest");this.setState({initialUrls:t});var n=(this.props.notifications||[]).find((function(t){if(t.fromUser===e.props.studentGrading&&t.documentId===e.props.testGrading&&("testSubmitted"===t.documentType||"assignmentSubmitted"===t.documentType))return t}));n&&this.props.markAsSeen(n._id,this.props.token)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.handleWindowClose),this.state.isUpdating||this.handleDeleteUnsavedImages(),clearTimeout(this.state.micBlockedWarningTO)}},{key:"getFilesToDelete",value:function(e,t){var n=mo(t,"gradeTestAnswers")||[],a=mo(e,"gradeTest");return(this.state.initialUrls||[]).filter((function(e){if(!a.includes(e)&&!n.includes(e))return e}))}},{key:"getResults",value:function(){var e=this;return(this.props.results||[]).find((function(t){if(t.test._id===e.props.testGrading&&t.student._id===e.props.studentGrading)return t}))||{}}},{key:"getTestSections",value:function(e){return"camelCase"===e?["multipleChoice","essay","speaking","fillInBlanks"]:"camelCaseSection"===e?["mcSection","essaySection","speakingSection","fillInBlankSection"]:"camelCaseQuestions"===e?["multipleChoiceQuestions","essayQuestions","speakingQuestions","fillInBlanksQuestions"]:["Multiple-choice section","Essay section","Speaking section","Fill-in-the-blanks section"]}},{key:"getTotalMarks",value:function(e,t){var n=this;return this.getTestSections("camelCaseQuestions").map((function(a,r){var o=n.getTestSections("camelCase");if(t===o[r])return(3!==r?(e||{})[a]||[]:((e||{})[a]||{}).blanks||[]).reduce((function(e,t){return e+t.marks}),0)})).find((function(e){return e}))||0}},{key:"getDaysLate",value:function(e,t){if(!this.props.test&&(e||{}).allowLateSubmission&&!(parseInt((t||{}).submittedOn)<parseInt((e||{}).dueDate))){var n=(parseInt((t||{}).submittedOn)-parseInt((e||{}).dueDate))/864e5;return Math.ceil(n)}}},{key:"getStudentSectionMarks",value:function(e){var t=this,n=this.props.formValues||{};return this.getTestSections("camelCase").map((function(a,r){if(e===a)return(((n||{})[t.getTestSections("camelCaseSection")[r]]||[]).map((function(e){return""===e.marks?0:parseFloat(e.marks)}))||[]).reduce((function(e,t){return e+t}),0)})).find((function(e){return e}))||0}},{key:"getRecordingTimeout",value:function(e){return((this.props.formValues.speakingSection||[])[e]||{}).recorderTimeout}},{key:"getRecorderFromClick",value:function(e){return((this.props.formValues.speakingSection||[])[e]||{}).recorder}},{key:"getFinalGrade",value:function(e){var t=this,n=this.props.formValues,a=this.getTestSections("camelCase").map((function(n){return t.getTotalMarks(e,n)})).filter((function(e){return 0!==e})).length,r=this.getTestSections("camelCase").map((function(n,r){return t.getTotalMarks(e,n)>0?t.getStudentSectionMarks(n)/t.getTotalMarks(e,n)*((e||{}).sectionWeights||{})[3!==r?t.getTestSections("camelCaseSection")[r]:"fillBlankSection"]*a:0})).reduce((function(e,t){return e+t}))/a,o=this.props.test?parseFloat(r.toFixed(2)):parseFloat(r.toFixed(2))-((n||{}).latePenalty||0);return NaN===o?0:o}},{key:"createData",value:function(e,t){return{info:e,value:t}}},{key:"getSections",value:function(e){(Object.values((e||{}).sectionWeights||[]).filter((function(e){return null!==e}))||[]).length}},{key:"getRowSectionMarks",value:function(e){var t=this;return this.getTestSections("camelCase").map((function(n,a){return parseFloat(t.getTotalMarks(e,n).toFixed(2))>0?t.createData(t.getTestSections()[a],"".concat(parseFloat(t.getStudentSectionMarks(n).toFixed(2))," / ").concat(parseFloat(t.getTotalMarks(e,n).toFixed(2)))):null}))||[]}},{key:"getFinalGradeRow",value:function(e){return[this.createData(this.props.test?"Test grade":"Assignment grade","".concat(this.getFinalGrade(e)<0?0:this.getFinalGrade(e),"%"))]||[]}},{key:"getSectionGrades",value:function(e){var t=this;return this.getTestSections("camelCase").map((function(n){return t.getStudentSectionMarks(n)/t.getTotalMarks(e,n)*100}))}},{key:"setValidity",value:function(e){this.setState({isValid:e})}},{key:"render",value:function(){var e,t,n=this,a=this.props,o=a.errors,s=a.loading,i=a.formValues,c=void 0===i?{}:i,l=a.course,u=void 0===l?{}:l,d=a.modalDocument,m=a.t,p=!o.isValid&&!this.state.isValid,f=this.getResults().test||{},g=this.getResults().testResult||{},b=g.multiplechoiceSection,h=g.essaySection,E=g.speakingSection,v=g.fillInBlanksSection,y=(v||{}).answers,T="courses/".concat(u._id,"/tests/").concat(f._id,"/results/").concat(g._id);this.state.confirmCheckBox||(g||{}).graded||(t={color:"rgba(0,0,0,0.12)",borderColor:"rgba(0,0,0,0.12)",backgroundColor:"white"}),this.state.confirmCheckBox&&p&&(t={color:"#FF4136",borderColor:"#FF4136",backgroundColor:"#ffcdd2"}),this.state.confirmCheckBox&&!p&&(t={color:"#43a047",borderColor:"#43a047",backgroundColor:"#e8f5e9"});var k=d.results.find((function(e){return e.student._id===g.student}))||{};return r.a.createElement("div",null,r.a.createElement(Xe,{active:s,transparent:!0}),r.a.createElement(Au,{test:f,student:k.student}),r.a.createElement(Qs,(e={index:"testSectionReview",summary:"".concat(f.assignment?"Assignment":"Test"," resources")},Object(yo.a)(e,"summary",f.assignment?m("gradeTestForm.assignmentResources"):m("gradeTestForm.testResources")),Object(yo.a)(e,"disabled",!Ou(f,"test").readingMaterials.content&&!Ou(f,"test").audioMaterials.audio),e),r.a.createElement(Lc,{audioId:"testAudioMaterialReviewTest",pdfIndex:4,readingContent:Ou(f,"test").readingMaterials.content,audioSource:Ou(f,"test").audioMaterials.audio,onPreview:function(){return Yo("testAudioMaterialReviewTest")},fileUpload:Ou(f,"test").readingMaterials.fileUpload})),((f||{}).sectionWeights||{}).mcSection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(jd,{formValues:c,sections:this.getSections(f),mcSectionStudentInput:b,isTest:this.props.test,test:f}),r.a.createElement(Qs,{index:"mcSectionPreview",summary:m("gradeTestForm.sectionResources"),disabled:!Ou(f,"mc").readingMaterials.content&&!Ou(f,"mc").audioMaterials.audio},r.a.createElement(Lc,{audioId:"mcAudioMaterialPreviewTest",pdfIndex:0,readingContent:Ou(f,"mc").readingMaterials.content,audioSource:Ou(f,"mc").audioMaterials.audio,onPreview:function(){return Yo("mcAudioMaterialPreviewTest")},fileUpload:Ou(f,"mc").readingMaterials.fileUpload}))),((f||{}).sectionWeights||{}).essaySection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(Rd,{formValues:c,sections:this.getSections(f),essaySectionStudentInput:h,isTest:this.props.test,test:f,path:T}),r.a.createElement(Qs,{index:"essaySectionPreview",summary:m("gradeTestForm.sectionResources"),disabled:!Ou(f,"essay").readingMaterials.content&&!Ou(f,"essay").audioMaterials.audio},r.a.createElement(Lc,{audioId:"essayAudioMaterialPreviewTest",pdfIndex:1,readingContent:Ou(f,"essay").readingMaterials.content,audioSource:Ou(f,"essay").audioMaterials.audio,onPreview:function(){return Yo("essayAudioMaterialPreviewTest")},fileUpload:Ou(f,"essay").readingMaterials.fileUpload}))),((f||{}).sectionWeights||{}).speakingSection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(Nd,{formValues:c,micBlockedWarning:this.state.micBlockedWarning,sections:this.getSections(f),speakingSectionStudentInput:E,isTest:this.props.test,test:f,onInitiateRecording:function(e,t,a,r){return n.initiateRecording(e,t,a,r)},onSetAudioData:function(e,t,a){return n.setAudioData(e,t,a)},onGetRecordingTimeout:function(e){return n.getRecordingTimeout(e)},onGetRecorderFromClick:function(e){return n.getRecorderFromClick(e)}}),r.a.createElement(Qs,{index:"speakingSectionPreview",summary:m("gradeTestForm.sectionResources"),disabled:!Ou(f,"speaking").readingMaterials.content&&!Ou(f,"speaking").audioMaterials.audio},r.a.createElement(Lc,{audioId:"speakingAudioMaterialPreviewTest",pdfIndex:2,readingContent:Ou(f,"speaking").readingMaterials.content,audioSource:Ou(f,"speaking").audioMaterials.audio,onPreview:function(){return Yo("speakingAudioMaterialPreviewTest")},fileUpload:Ou(f,"speaking").readingMaterials.fileUpload}))),((f||{}).sectionWeights||{}).fillBlankSection&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(Ld,{formValues:c,fillInBlanksStudentAnswers:y,sections:this.getSections(f),fillblankSectionStudentInput:v,isTest:this.props.test,test:f}),r.a.createElement(Qs,{index:"fillblanksSectionPreview",summary:m("gradeTestForm.sectionResources"),disabled:!Ou(f,"fillblanks").readingMaterials.content&&!Ou(f,"fillblanks").audioMaterials.audio},r.a.createElement(Lc,{audioId:"fillblanksAudioMaterialPreviewTest",pdfIndex:3,readingContent:Ou(f,"fillblanks").readingMaterials.content,audioSource:Ou(f,"fillblanks").audioMaterials.audio,onPreview:function(){return Yo("fillblanksAudioMaterialPreviewTest")},fileUpload:Ou(f,"fillblanks").readingMaterials.fileUpload}))),(f||{}).allowLateSubmission&&r.a.createElement(qe,null,r.a.createElement(He.a,{style:{marginTop:40},variant:"h6",gutterBottom:!0},m("gradeTestForm.latePenalty")),r.a.createElement(ba.a,{name:"latePenalty",simple:!0,component:Na}),r.a.createElement(He.a,{variant:"caption",gutterBottom:!0,paragraph:!0},"".concat(this.getDaysLate(f,g)||0," ").concat(1===this.getDaysLate(f,g)?m("gradeTestForm.dayLateSingular"):m("gradeTestForm.dayLatePlural")," x ").concat((f||{}).latePenalty,"% ").concat(m("gradeTestForm.latePenalty").toLowerCase()))),r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(Pd,{isTest:this.props.test,test:f,formValues:c,onGetRowSectionMarks:function(e){return n.getRowSectionMarks(e)},onGetFinalGradeRow:function(e){return n.getFinalGradeRow(e)}})),r.a.createElement(ba.a,{name:"gradeOverride",options:{label:m("gradeTestForm.fields.overrideGrade"),checked:!1},component:Ca}),r.a.createElement("div",{style:{display:"flex",justifyContent:"start"}},r.a.createElement(ba.a,{name:"gradeAdjusted",component:Na,options:{label:m("gradeTestForm.fields.gradeAdjustment"),size:"small",disabled:!(c||{}).gradeOverride}}),(f||{}).passingGrade&&c.gradeOverride&&parseFloat(c.gradeAdjusted)>=0&&parseFloat(c.gradeAdjusted)<=100&&r.a.createElement(qe,null,parseFloat(c.gradeAdjusted)>=(f||{}).passingGrade?r.a.createElement("span",{style:{color:"#4caf50",marginLeft:25,lineHeight:3}},m("gradeTestForm.passed")):r.a.createElement("span",{style:{color:"red",marginLeft:25,lineHeight:3}},m("gradeTestForm.failed")))),r.a.createElement(He.a,{style:{marginTop:15},variant:"body1",gutterBottom:!0},m("gradeTestForm.fields.gradeAdjustmentExplanation")),r.a.createElement(ba.a,{name:"gradeAdjustmentExplanation",component:pi,options:{multiline:!0,rows:3,variant:ya.a,disabled:!(c||{}).gradeOverride}}),!(g||{}).graded&&r.a.createElement(pt.a,{onClick:function(){n.handleSubmit("save",g,f,o,T)},style:p?{color:"#FF4136",borderColor:"#FF4136",backgroundColor:"#ffcdd2"}:{},fullWidth:!0},m("gradeTestForm.buttons.saveGradesExit")),(f||{}).gradeReleaseDate?r.a.createElement(He.a,{paragraph:!0,variant:"body1",gutterBottom:!0},parseInt((f||{}).gradeReleaseDate)<Date.now()?m("gradeTestForm.gradeRelaseDatePassedWarning"):"".concat(m("gradeTestForm.gradeReleaseDateNotYetPassedWarning")," ").concat(bt()(parseInt((f||{}).gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm"),".")):r.a.createElement(He.a,{paragraph:!0,variant:"body1",gutterBottom:!0},m("gradeTestForm.noGradeReleaseDateWarning")),!(g||{}).graded&&r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:this.state.confirmCheckBox,onChange:this.handleCheckboxChange,value:"checked"}),label:m("gradeTestForm.fields.agree")}),p&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},r.a.createElement(He.a,{color:"error"}," ",m("gradeTestForm.errors.correctForm"))),r.a.createElement(pt.a,{onClick:function(){n.handleSubmit("post",g,f,o,T)},style:t,disabled:!this.state.confirmCheckBox&&!(g||{}).graded},(g||{}).graded?m("gradeTestForm.buttons.updateGrades"):m("gradeTestForm.buttons.postGrades")))}}]),n}(a.Component),Md=Object(Mt.a)({form:"gradeForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0,enableReinitialize:!0,validate:Id})(Bd),qd=Object(c.b)((function(e){var t=e.instructorTest.initialGradeValues,n=e.common.modalDocument,a=e.common.selectedCourse,r=(a.tests||[]).find((function(e){return e._id===n.testId}));return{formValues:Object(nt.a)("gradeForm")(e),errors:Object(Pt.a)("gradeForm")(e),loading:e.instructorTest.loading,token:e.authentication.token,course:a,testGrading:n.testId,studentGrading:n.studentId,results:n.results,initialValues:Object(It.a)(Object(It.a)({},t),{},{instructorTest:r}),isTest:0===e.common.tab,notifications:e.common.notifications,modalDocument:e.common.modalDocument,test:0===e.common.tab}}),(function(e){return{postGrades:function(t,n,a,r,o,s,i,c,l,u,d){e(function(e,t,n,a,r,o,s,i,c,l,u){return{type:"GRADE_TEST_START",payload:{formValues:e,token:t,studentId:n,test:a,graded:r,marking:o,sectionGrades:s,gradingInProgress:i,grade:c,filesToDelete:l,filePath:u}}}(t,n,a,r,o,s,i,c,l,u,d))},clearTestGrading:function(){return e({type:"CLEAR_TEST_TO_GRADE"})},changeField:function(t,n){e(Object(Bt.a)("gradeForm",t,n))},markAsSeen:function(t,n){e(ke(t,n))},deleteImg:function(t,n){e(ge(t),n)},touchField:function(t){e(Object(Bt.d)("gradeForm",t))}}}))(Object(Qa.a)("common")(Md)),Ud=Object(rt.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0}}})),Qd=function(e){var t=e.modalDocument,n=e.changeField,a=e.input,o=Ud(),s=t.tests,i=t.assignments,c=t.lessons,l=t.field,u=a.value,d=Object(We.a)().t;return r.a.createElement($r.a,{className:o.root,subheader:r.a.createElement("li",null)},[{type:"lesson",list:c},{type:"test",list:s},{type:"assignment",list:i}].map((function(e){return r.a.createElement("li",{key:"subheader-".concat(e.type),className:o.listSection},r.a.createElement("ul",{className:o.ul},r.a.createElement(qe,null,r.a.createElement(Jr.a,null,"lesson"===e.type?d("instructorModules.lessons"):"","test"===e.type?d("instructorModules.tests"):"","assignment"===e.type?d("instructorModules.assignments"):""),(e.list||[]).map((function(t,a){var o=(u||[]).find((function(e){return t._id===e.documentId}));return r.a.createElement(Yr.a,{key:"item-".concat(e.type,"-").concat(t._id)},r.a.createElement(ht.a,{key:"checkbox-".concat(a),control:r.a.createElement(Tr.a,{name:"lesson"===e.type?"".concat(t.lessonName,"[").concat(a,"]"):"".concat(t.testName,"[").concat(a,"]"),value:t._id,checked:!!o,onChange:function(a){var r=Object(Vr.a)(u);return a.target.checked?r.push({documentId:t._id,documentType:e.type}):r.splice(r.findIndex((function(e){return t._id===e.documentId})),1),n(l,r)}}),label:"lesson"===e.type?t.lessonName:t.testName}))})))))})))},Hd=Object(Mt.a)({form:"category",enableReinitialize:!0,destroyOnUnmount:!1})((function(e){var t=e.modalDocument,n=e.changeField;return r.a.createElement(ba.a,{name:t.field,modalDocument:t,changeField:n,component:Qd})})),Gd=Object(c.b)((function(e){return{formValues:Object(nt.a)("category")(e),modalDocument:e.common.modalDocument}}),(function(e){return{changeField:function(t,n){e(Object(Bt.a)("category",t,n))}}}))(Hd),Wd=Object(c.b)((function(e){return{courses:e.common.courses,course:e.common.selectedCourse,students:e.common.students,modalDocument:e.common.modalDocument,token:e.authentication.token,isDarkTheme:e.common.isDarkTheme}}),(function(e){return{approveEnroll:function(t,n,a){return e(k(t,n,a))},denyEnroll:function(t,n,a){return e(w(t,n,a))}}}))((function(e){var t=e.token,n=e.course,a=e.modalDocument,o=e.approveEnroll,s=e.denyEnroll,i=e.isDarkTheme,c=(a.testResults,Object(We.a)().t),l=Object($l.a)(),u=r.a.useState(!1),d=Object(vo.a)(u,2),m=d[0],p=d[1],f=(n.studentsEnrollRequests||[]).findIndex((function(e){return e.student._id===a._id&&e.denied}))>-1,g=r.a.useState(0),b=Object(vo.a)(g,2),h=b[0],E=b[1],v=(n.studentsEnrollRequests||[]).filter((function(e){return e.approved})).length,y=[{value:"",primaryText:""},{value:"governmentId",primaryText:c("confirmations.governmentId")},{value:"birthCertificate",primaryText:c("confirmations.birthCertificate")},{value:"transcript",primaryText:c("confirmations.transcript")},{value:"legalStatusProof",primaryText:c("confirmations.proofLegalStatus")},{value:"cv",primaryText:c("confirmations.cv")},{value:"testScoresProof",primaryText:c("confirmations.proofTestScores")},{value:"referenceLetter",primaryText:c("confirmations.letterReference")},{value:"statementPurpose",primaryText:c("confirmations.statementPurpose")},{value:"other",primaryText:c("confirmations.other")}],T=(a.documents||[]).length,k={backgroundColor:i?"#424242":"white",padding:10,margin:"10px auto 10px auto"},S=[[c("confirmations.firstName"),a.firstName],[c("confirmations.lastName"),a.lastName],[c("confirmations.studentId"),a._id.replace(/\D/g,"")],[c("confirmations.dob"),bt()(new Date(a.dob).getTime()).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY")],[c("confirmations.email"),a.email],[c("confirmations.lastLogin"),bt()(new Date(parseInt(a.lastLogin)).getTime()).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")],[c("confirmations.courseProgress"),"".concat(rd(n,a),"%")]];return r.a.createElement(qe,null,r.a.createElement("div",{style:Object(It.a)({backgroundImage:'url("'.concat(a.profilePicture,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"200px",borderRadius:"50%",maxWidth:"200px",width:"100%"},k)}),r.a.createElement("div",{style:k},r.a.createElement(si.a,{"aria-label":"simple table"},r.a.createElement(ii.a,null,S.map((function(e){return r.a.createElement(li.a,{key:e[0]},r.a.createElement(ci.a,{component:"th",scope:"row"},e[0]),r.a.createElement(ci.a,{align:"right"},e[1]))}))))),r.a.createElement(Qs,{index:"progressReportStudentSummary",summary:c("studentSummary.buttons.showReport"),expandedSummary:c("studentSummary.buttons.hideReport")},r.a.createElement(He.a,{style:{textAlign:"center"},paragraph:!0,variant:"h6",gutterBottom:!0},c("studentSummary.progressReport")),r.a.createElement(cl,null)),T>0&&r.a.createElement("div",{style:k},r.a.createElement(He.a,{style:{textAlign:"center"},paragraph:!0,variant:"h6",gutterBottom:!0},c("confirmations.documents")),r.a.createElement(oo.a,{steps:T,position:"static",variant:"text",activeStep:h,nextButton:r.a.createElement(pt.a,{size:"small",onClick:function(){E((function(e){return e+1}))},disabled:h===T-1},c("confirmations.next"),"rtl"===l.direction?r.a.createElement(Du.a,null):r.a.createElement(Iu.a,null)),backButton:r.a.createElement(pt.a,{size:"small",onClick:function(){E((function(e){return e-1}))},disabled:0===h},"rtl"===l.direction?r.a.createElement(Iu.a,null):r.a.createElement(Du.a,null),c("confirmations.back"))}),(a.documents||[]).map((function(e,t){if(t!==h)return null;var n,a=(is(e.document)||"").toLowerCase().split(".").pop();"pdf"===a&&(n=r.a.createElement(ji,{url:e.document,index:t})),"jfif"!==a&&"jpeg"!==a&&"jpg"!==a||(n=r.a.createElement("div",{style:{backgroundImage:'url("'.concat(e.document,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"300px",borderRadius:"3px",width:"100%",margin:"auto"}})),"docx"!==a&&"doc"!==a||(n=r.a.createElement(Ua.a,{fileType:a,filePath:e.document}));var o=y.find((function(t){return t.value===e.documentType})).primaryText;return r.a.createElement(qe,{key:"document[".concat(t,"]")},r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},o),n)}))),n.studentsEnrollRequests.findIndex((function(e){return e.student._id===a._id&&!e.droppedOut}))>-1&&r.a.createElement(qe,null,r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:m,onChange:function(e){p(e.target.checked)},value:"checked",disabled:f&&v===n.studentCapacity}),label:"".concat(c(f?"confirmations.enrollConfirm.allow":"confirmations.enrollConfirm.deny"))}),r.a.createElement(pt.a,{disabled:!m,onClick:function(){f&&o(a._id,n._id,t),f||s(a._id,n._id,t)}},c("studentSummary.buttons.submit")),f&&v===n.studentCapacity&&r.a.createElement(He.a,{paragraph:!0,color:"error",variant:"subtitle1",gutterBottom:!0},c("studentSummary.increaseCapacity"))))})),zd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;e.minGrade&&(t=e.minGrade);var n={},a=!0;return(parseFloat(e.gradeAdjusted)>100||parseFloat(e.gradeAdjusted)<t)&&e.gradeOverride&&(n.gradeAdjusted=ua.t("gradeBook.errors.finalGrade",{minValue:t}),a=!1),(parseFloat(e.autoGrade)>100||parseFloat(e.autoGrade)<t)&&!e.gradeOverride&&(n.gradeAdjusted=ua.t("gradeBook.errors.finalGrade",{minValue:t}),a=!1),e.gradeOverride&&!e.gradeAdjusted&&(n.gradeAdjusted=ua.t("gradeBook.errors.required"),a=!1),n.isValid=a,n},Vd=function(e,t){var n=((t||[]).filter((function(e){return e.isExcused}))||[]).map((function(e){return e.test}));return(e.tests||[]).filter((function(e){return!n.includes(e._id)})).reduce((function(e,t){return e+t.weight}),0)},$d=function(e,t){return e.tests.find((function(e){var n=t.testResults.find((function(t){return t.test===e._id}));return!(n||!e.passingRequired)||e.passingRequired&&n.grade<e.passingGrade}))},Yd=function(e,t){var n=((t||[]).filter((function(e){return e.isExcused}))||[]).map((function(e){return e.test})),a=(e.tests||[]).filter((function(e){return!n.includes(e._id)&&e.isGradeIncluded&&e.weight>0})),r=(a||[]).reduce((function(n,a){var r=t.find((function(e){return e.graded&&e.test===a._id}));return r?n+a.weight/Vd(e,t)*r.grade:n}),0),o=parseFloat(parseFloat(r).toFixed(2)).toString();return 0===a.length?100:o},Jd=function(e,t){return((e.studentsEnrollRequests||[]).find((function(e){return e.student._id===t._id})).student||{}).testResults},Kd=Object(Mt.a)({form:"gradeCourse",enableReinitialize:!0,validate:zd,destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.token,n=e.course,o=e.modalDocument,s=e.formValues,i=void 0===s?{}:s,c=e.formErrors,l=e.gradeCourse,u=e.touchField,d=e.configuration,m=e.isDarkTheme,p=Object(We.a)().t,f=Object(a.useState)(!1),g=Object(vo.a)(f,2),b=g[0],h=g[1],E=Object(a.useState)(!0),v=Object(vo.a)(E,2),y=v[0],T=v[1],k=(Object($l.a)(),d.coursePassGrade),S={backgroundColor:m?"#424242":"white",padding:10,margin:"10px auto 10px auto"},w=Jd(n,o),O=(n.studentsEnrollRequests||[]).map((function(e){return e.student})),C=n.tests.filter((function(e){return!e.assignment})),x=n.tests.filter((function(e){return e.assignment})),A=$d(n,o),F=function(e){return r.a.createElement(li.a,null,r.a.createElement(ci.a,{component:"th",scope:"row"},p("gradeBook.".concat(e))),r.a.createElement(ci.a,{component:"th",align:"right"},p("gradeBook.weight")),r.a.createElement(ci.a,{component:"th",align:"right"},p("gradeBook.result")),"test"===e&&r.a.createElement(ci.a,{component:"th",align:"right"},p("gradeBook.passingRequired")))},D=function(e){T(e)},_=function(e){var t=(w.find((function(t){return t.test===e._id&&t.graded}))||{}).grade,n=(w||[]).find((function(t){return t.test===e._id}))||{},a=n.isExcused,r=e.dueDate,o=e.allowLateSubmission,s=e.lateDaysAllowed,i=n.closed,c=parseInt(e.dueDate);o&&(c=parseInt(e.dueDate)+864e5*s);var l=Date.now()>c;return r&&!a&&!i&&l?p("gradeBook.missedDueDate"):a?p("gradeBook.excused"):t?t+"%":"-"},I=function(e,t){var n=(e/t*100).toFixed(2);return"NaN"===n?0:n},j=parseInt(n.courseDropDeadline)<Date.now(),R=!!n.courseDropDeadline,N=d.dropCourseGrade;return r.a.createElement(qe,null,(x.length>0||C.length>0)&&r.a.createElement(Qs,{index:"progressReportGradebook",summary:p("gradeBook.showProgressReport"),expandedSummary:p("gradeBook.hideProgressReport")},r.a.createElement(cl,null)),x.length>0&&r.a.createElement("div",{style:S},r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},p("gradeBook.assignments")),r.a.createElement(si.a,{"aria-label":"simple table"},r.a.createElement(ii.a,null,F("assignment"),x.map((function(e,t){return r.a.createElement(li.a,{key:e._id},r.a.createElement(ci.a,{scope:"row"},e.testName),r.a.createElement(ci.a,{align:"right"},w.find((function(t){return t.isExcused&&t.test===e._id}))?"N/A":"".concat(I(e.weight,Vd(n,w)),"%")),r.a.createElement(ci.a,{align:"right"},_(e)))}))))),C.length>0&&r.a.createElement("div",{style:S},r.a.createElement(He.a,{paragraph:!0,variant:"h6",gutterBottom:!0},p("gradeBook.tests")),r.a.createElement(si.a,{"aria-label":"simple table"},r.a.createElement(ii.a,null,F("test"),C.map((function(e,t){return r.a.createElement(li.a,{key:e._id},r.a.createElement(ci.a,{scope:"row"},r.a.createElement("span",{style:{display:"block"}},e.testName),r.a.createElement("span",{style:{display:"block",fontSize:"0.7em"}},p("testInfo.".concat(e.testType)))),r.a.createElement(ci.a,{align:"right"},w.find((function(t){return t.isExcused&&t.test===e._id}))?"N/A":"".concat(I(e.weight,Vd(n,w)),"%")),r.a.createElement(ci.a,{align:"right"},_(e)),r.a.createElement(ci.a,{align:"right"},e.passingRequired?"".concat(p("gradeBook.yes")," ").concat(e.passingGrade,"%"):p("gradeBook.no")))}))))),r.a.createElement("div",{style:S},r.a.createElement(si.a,{"aria-label":"simple table"},r.a.createElement(ii.a,null,r.a.createElement(li.a,null,r.a.createElement(ci.a,{component:"th",scope:"row"},p("gradeBook.courseProgress")),r.a.createElement(ci.a,{align:"right"},"".concat(rd(n,o,w),"%"))),r.a.createElement(li.a,null,r.a.createElement(ci.a,{component:"th",scope:"row"},p("gradeBook.classAverage")),r.a.createElement(ci.a,{align:"right"},"".concat(function(e,t){var n=t.reduce((function(t,n){var a=Yd(e,n.testResults);return t+parseFloat(a)}),0),a=parseFloat(parseFloat(n/t.length).toFixed(2)).toString();return"NaN"===a?0:a}(n,O),"%"))),r.a.createElement(li.a,null,r.a.createElement(ci.a,{component:"th",scope:"row"},p("gradeBook.passingGrade")),r.a.createElement(ci.a,{align:"right"},"".concat(k,"%"))),!(i||{}).gradeOverride&&r.a.createElement(li.a,null,r.a.createElement(ci.a,{component:"th",scope:"row"},r.a.createElement("span",null," ",p("gradeBook.finalGrade"))," ",Yd(n,w)>=k&&!A||i.failOverride?r.a.createElement("span",{style:{color:"#4caf50",marginLeft:5}},p("gradeBook.passed")):r.a.createElement("span",{style:{color:"red",marginLeft:5}}," ",p("gradeBook.failed"))),r.a.createElement(ci.a,{align:"right"},"".concat(Yd(n,w),"%")))))),(R&&j||!R)&&r.a.createElement(qe,null,r.a.createElement(ba.a,{name:"gradeOverride",options:{label:p("gradeBook.overrideGrade"),checked:!1},component:Ca}),r.a.createElement(ba.a,{name:"failOverride",options:{label:p("gradeBook.overrideFail"),checked:!1,disabled:!A&&(i.gradeOverride?i.gradeAdjusted>=k:Yd(n,w)>=k)},component:Ca}),r.a.createElement("div",{style:{display:"flex",justifyContent:"start"}},r.a.createElement(ba.a,{name:"gradeAdjusted",component:Na,options:{label:p("gradeBook.gradeAdjustment"),size:"small",disabled:!(i||{}).gradeOverride}}),i.gradeOverride&&parseFloat(i.gradeAdjusted)>=0&&parseFloat(i.gradeAdjusted)<=100&&r.a.createElement(qe,null,parseFloat(i.gradeAdjusted)>=k&&!A||i.failOverride?r.a.createElement("span",{style:{color:"#4caf50",marginLeft:25,lineHeight:3}},p("gradeBook.passed")):r.a.createElement("span",{style:{color:"red",marginLeft:25,lineHeight:3}},p("gradeBook.failed")))),A&&r.a.createElement(He.a,{paragraph:!0,variant:"body1",gutterBottom:!0,color:"error"},p("gradeBook.requiredTestNotPassed")),r.a.createElement("div",{style:{marginBottom:20}},r.a.createElement(He.a,{paragraph:!0,variant:"body1",gutterBottom:!0},p("gradeBook.gradeAdjustmentExplanation")),r.a.createElement(ba.a,{name:"gradeAdjustmentExplanation",component:pi,label:p("gradeBook.gradeAdjustmentExplanation"),options:{multiline:!0,rows:3,variant:ya.a,disabled:!(i||{}).gradeOverride}})),r.a.createElement(He.a,{paragraph:!0,variant:"caption"},p("gradeBook.warning")),r.a.createElement(ht.a,{control:r.a.createElement(Tr.a,{checked:b,onChange:function(){h((function(e){return!e}))},value:"checked"}),label:p("gradeBook.agree")}),Yd(n,w)<d.dropCourseGrade&&!i.gradeOverride&&r.a.createElement(He.a,{paragraph:!0,color:"error",variant:"caption"},c.gradeAdjusted),r.a.createElement(Js,{clicked:function(){return function(e){var a=zd(i,e);if(u("gradeAdjusted"),a.isValid){var r=Yd(n,w),s=i.gradeOverride?i.gradeAdjusted>k:Yd(n,w)>k;A&&!1===i.failOverride&&(s=!1),!0===i.failOverride&&(s=!0),l(i,o._id,n._id,parseFloat(parseFloat(r).toFixed(2)),s,t)}else D(!1)}(N)},disabled:!b,isError:!(y||c.isValid)},p("gradeBook.buttons.postGrade"))))})),Zd=Object(c.b)((function(e){var t,n=e.common.modalDocument,a=e.common.selectedCourse,r=e.common.configuration,o=r.dropCourseGrade,s=a.passingGrade||50,i=a.studentGrades.find((function(e){return e.student===n._id})),c=Yd(a,Jd(a,n));if(i){var l=(i.grade<s||$d(a,n))&&i.passed;t={gradeOverride:i.gradeOverride,gradeAdjusted:i.gradeOverride?i.grade:null,gradeAdjustmentExplanation:i.gradeAdjustmentExplanation,failOverride:l,minGrade:o,autoGrade:c}}else t={failOverride:!1,gradeOverride:!1,minGrade:o,autoGrade:c};return{formValues:Object(nt.a)("gradeCourse")(e),formErrors:Object(Pt.a)("gradeCourse")(e),courses:e.common.courses,course:a,students:e.common.students,modalDocument:n,token:e.authentication.token,initialValues:t,configuration:r,isDarkTheme:e.common.isDarkTheme}}),(function(e){return{approveEnroll:function(t,n,a){return e(k(t,n,a))},touchField:function(t){e(Object(Bt.d)("gradeCourse",t))},denyEnroll:function(t,n,a){return e(w(t,n,a))},gradeCourse:function(t,n,a,r,o,s){e(function(e,t,n,a,r,o){return{type:"GRADE_COURSE_START",payload:{courseId:n,studentId:t,token:o,formValues:e,passed:r,suggestedGrade:a}}}(t,n,a,r,o,s))}}}))(Kd),Xd=Object(c.b)((function(e){return{courses:e.common.courses,course:e.common.selectedCourse,students:e.common.students,modalDocument:e.common.modalDocument,token:e.authentication.token}}))((function(e){var t,n=e.modalDocument,a=n.loadedFile,o=n.ext;return"jfif"!==o&&"jpeg"!==o&&"jpg"!==o||(t=r.a.createElement("div",{style:{backgroundImage:'url("'.concat(a,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"300px",borderRadius:"3px",width:"100%",margin:"auto"}})),"docx"!==o&&"doc"!==o||(t=r.a.createElement(Ua.a,{fileType:o,filePath:a})),"pdf"===o&&(t=r.a.createElement(ji,{url:a})),"mp4"!==o&&"avi"!==o||(t=r.a.createElement(Uo,{url:a})),r.a.createElement("div",null,t)})),em=Object(c.b)((function(e){var t=(e.common.modalDocument||{}).test;return{isModal:e.common.isModal,modalType:e.common.modalType,modalDocument:e.common.modalDocument,loadedQuestionFormData:e.instructorQuestion.loadedQuestionFormData,initialGradeValues:e.instructorTest.initialGradeValues,initialTestReviewValues:t}}),(function(e){return{removeTest:function(t,n){e($(t,n))},startTest:function(t,n,a){return e(Pe(t,!0,a,null))}}}))((function(e){var t,n,a,o=e.modalType,s=e.modalDocument,i=e.loadedQuestionFormData,c=e.initialGradeValues,l=e.initialTestReviewValues,u=Object(We.a)().t;return"deleteCourse"===o&&(t=u("modalHeaders.deleteCourse"),a=r.a.createElement(Kl,null)),"deleteTest"===o&&(t=s.assignment?u("modalHeaders.deleteAssignment"):u("modalHeaders.deleteTest"))&&(a=r.a.createElement(tu,null)),"resetTest"===o&&(t=s.assignment?u("modalHeaders.resetAssignment"):u("modalHeaders.resetTest"))&&(a=r.a.createElement(au,null)),"deleteLesson"===o&&(a=r.a.createElement(Xl,null),t=u("modalHeaders.deleteLesson")),"question"===o&&i&&("mc"===s.qType&&(t=u("modalHeaders.mcQuestion")),"essay"===s.qType&&(t=u("modalHeaders.essayQuestion")),"speaking"===s.qType&&(t=u("modalHeaders.speakingQuestion")),"fillInBlank"===s.qType&&(t=u("modalHeaders.fillblanksQuestion")),a=r.a.createElement(Ku,null)),"enrollRequest"===o&&(a=r.a.createElement(ad,null),t=u("modalHeaders.enrollmentRequest")),"dropConfirmation"===o&&(a=r.a.createElement(pd,null),t=u("modalHeaders.dropCourse")),"syllabus"===o&&(a=r.a.createElement(td,null),t=u("modalHeaders.syllabus")),"testSummary"===o&&(t=s.assignment?u("modalHeaders.assignmentSummary"):u("modalHeaders.testSummary"),a=r.a.createElement(ju,null)),"lesson"===o&&(t=u("modalHeaders.lesson"),a=r.a.createElement(Ad,null),n=!0),"startTestConfirmation"===o&&(t=u("modalHeaders.startTest"),a=r.a.createElement(ld,null)),"gradeTest"===o&&c&&(t=t=s.results.findIndex((function(e){return e.test._id===s.testId&&e.test.assignment}))>-1?u("modalHeaders.gradeAssignment"):u("modalHeaders.gradeTest"),a=r.a.createElement(qd,null)),"testReview"===o&&l&&(t=s.test.instructorTest.assignment?u("modalHeaders.assignmentReview"):u("modalHeaders.testReview"))&&(a=r.a.createElement(Od,null)),"contents"===o&&(t=u("modalHeaders.moduleContents"),s.field.includes("subjects")&&(t=u("modalHeaders.subjectContents")),s.field.includes("topics")&&(t=u("modalHeaders.topicContents")),a=r.a.createElement(Gd,null)),"studentSummary"===o&&(t=u("modalHeaders.studentSummary"),a=r.a.createElement(Wd,null)),"processEnrollmentRequest"===o&&(t=u("modalHeaders.enrollmentConfirmation"),a=r.a.createElement(sd,null)),"studentDocuments"===o&&(t=u("modalHeaders.documents"),a=r.a.createElement(_d,null)),"gradebook"===o&&(t=u("modalHeaders.gradebook"),a=r.a.createElement(Zd,null)),"courseResource"===o&&(t=u("modalHeaders.courseResource"),a=r.a.createElement(Xd,null)),r.a.createElement(qe,null,r.a.createElement(ku,{header:t,large:n},a))})),tm=n(660),nm=(n(1122),n(406)),am=n.n(nm),rm=Object(c.b)((function(e){return{token:e.authentication.token,sessionExpiration:e.authentication.sessionExpiration,refreshTokenExpiration:e.authentication.refreshTokenExpiration}}),(function(e){return{refreshToken:function(t){return e(me(t))}}}))((function(e){var t,n=e.token,o=e.refreshTokenExpiration,s=e.sessionExpiration,i=e.refreshToken,c=Object(a.useState)(new Date(s).getTime()-Date.now()),l=Object(vo.a)(c,2),u=l[0],d=l[1],m=Object(a.useState)(!1),p=Object(vo.a)(m,2),f=p[0],g=p[1];return Object(a.useEffect)((function(){var e;return t=setInterval((function(){d(new Date(s).getTime()-Date.now())}),1e3),e=setTimeout((function(){g(!0)}),o-Date.now()),function(){clearInterval(t),clearTimeout(e)}}),[]),r.a.createElement("div",{className:[am.a.alert,f?am.a.refreshBlocked:""].join(" ")},r.a.createElement(He.a,{style:{textAlign:"center"}},"Your session will expire in ".concat(new Date(u).getMinutes(),":").concat(new Date(u).getSeconds()<10?"0":"").concat(new Date(u).getSeconds())),!f&&r.a.createElement(pt.a,{style:{display:"block",margin:"auto"},color:"primary",onClick:function(){n&&i(n)}},"Stay logged in"))})),om=function(e){e.shrinkLabel;var t=Object(We.a)(),n=t.t,a=t.i18n,o=[{value:"en",primaryText:n("languages.english")},{value:"es",primaryText:n("languages.spanish")}];return r.a.createElement("div",{style:{margin:"5px 0 0 3px"}},r.a.createElement(Gs,{fullWidth:!0,simple:!0,component:Gs,input:{value:localStorage.getItem("i18nextLng"),onChange:function(e){return a.changeLanguage(e.target.value)}},options:o}))},sm=n(658),im=n.n(sm),cm=n(327),lm=n.n(cm),um=n(666),dm=n(120),mm=n.n(dm),pm=n(224),fm=n.n(pm),gm=function(e){var t,n=e.d;return"testDueDate"!==n.documentType||"midterm"!==n.document.testType&&"final"!==n.document.testType||(t=r.a.createElement(Os.a,{style:{color:"#e53935"}})),"testDueDate"===n.documentType&&"quiz"===n.document.testType&&(t=r.a.createElement(Os.a,{style:{color:"#ef6c00"}})),"testDueDate"===n.documentType&&n.document.assignment&&(t=r.a.createElement(xs.a,{style:{color:"#ef6c00"}})),"courseDropDeadline"===n.documentType&&(t=r.a.createElement(fm.a,{style:{color:"#e53935"}})),"testGradeReleaseDateInstructor"===n.documentType&&(t=r.a.createElement(mm.a,{style:{color:"#e53935"}})),"lessonAvailableOnDate"===n.documentType&&(t=r.a.createElement(Fs.a,{style:{color:"#43a047"}})),"testAvailableOnDate"===n.documentType&&(t=r.a.createElement(Os.a,{style:{color:"#43a047"}})),"testGradeReleaseDateStudent"===n.documentType&&(t=r.a.createElement(mm.a,{style:{color:"#43a047"}})),"regularOfficeHour"===n.documentType&&(t=r.a.createElement(Fo.a,{style:{color:"#0277bd"}})),"irregularOfficeHour"===n.documentType&&(t=r.a.createElement(Fo.a,{style:{color:"#0277bd"}})),t},bm=function(e){var t,n,a,o,s,i,c=e.date,l=e.documentDates,u=new Date(c).getTime();return l.findIndex((function(e){return e.date===u&&("testDueDate"===e.documentType||"testAvailableOnDate"===e.documentType)&&!e.document.assignment}))>-1&&(t=!0),l.findIndex((function(e){return e.date===u&&("testDueDate"===e.documentType||"testAvailableOnDate"===e.documentType)&&e.document.assignment}))>-1&&(n=!0),l.findIndex((function(e){return e.date===u&&("regularOfficeHour"===e.documentType||"irregularOfficeHour"===e.documentType)}))>-1&&(i=!0),l.findIndex((function(e){return e.date===u&&"lessonAvailableOnDate"===e.documentType}))>-1&&(o=!0),l.findIndex((function(e){return e.date===u&&"courseDropDeadline"===e.documentType}))>-1&&(s=!0),l.findIndex((function(e){return e.date===u&&("testGradeReleaseDateInstructor"===e.documentType||"testGradeReleaseDateStudent"===e.documentType)}))>-1&&(a=!0),r.a.createElement("div",{style:{display:"block"}},t&&r.a.createElement(Os.a,{style:{fontSize:"0.7rem"}}),n&&r.a.createElement(xs.a,{style:{fontSize:"0.7rem"}}),a&&r.a.createElement(mm.a,{style:{fontSize:"0.7rem"}}),o&&r.a.createElement(Fs.a,{style:{fontSize:"0.7rem"}}),i&&r.a.createElement(Fo.a,{style:{fontSize:"0.7rem"}}),s&&r.a.createElement(fm.a,{style:{fontSize:"0.7rem"}}))},hm=n(669),Em=Object(c.b)((function(e){return{courses:e.common.courses,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn}}))((function(e){var t=e.courses,n=e.studentLoggedIn,a=e.instructorLoggedIn,o=e.calendar,s=e.handleDocument,i=e.handleClose,c=function(e,t,n,a){var r=[];return(e||[]).forEach((function(e){(t&&e.courseActive&&e.enrolled||n)&&((e.irregularOfficeHours||[]).forEach((function(t){r.push({course:e._id,document:t,documentType:"irregularOfficeHour",date:new Date(parseInt(t.date)).setHours(0,0,0,0),docName:a("calendar.officehours",{start:t.startTime,end:t.endTime})+" "+ms()(new Date(Date.now())).tz(t.timezoneRegion).format("z")})})),(e.regularOfficeHours||[]).forEach((function(t){for(var n=bt()(parseInt(e.courseStartDate||Date.now()-78624e5)),o=bt()(parseInt(e.courseEndDate)||Date.now()+78624e5),s=us(t.day),i=[],c=n.clone();c.day(7+s).isBefore(o);)i.push(c.clone()),r.push({course:e._id,document:t,documentType:"regularOfficeHour",date:new Date(c.clone()._d).setHours(0,0,0,0),docName:a("calendar.officehours",{start:t.startTime,end:t.endTime})+" "+ms()(new Date(Date.now())).tz(t.timezoneRegion).format("z")})})),t&&(e.courseDropDeadline&&r.push({course:e._id,document:e,documentType:"courseDropDeadline",date:new Date(parseInt(e.courseDropDeadline)).setHours(0,0,0,0),docName:a("calendar.dropDeadline",{courseName:e.courseName})}),e.tests.forEach((function(t){var n="assignment";if("midterm"===t.testType&&(n="mid-term"),t.availableOnDate){var o="midterm"!==t.testType&&t.testType?t.testType:n;r.push({course:e._id,document:t,documentType:"testAvailableOnDate",date:new Date(parseInt(t.availableOnDate)).setHours(0,0,0,0),docName:a("calendar.testAvailableOnDate",{testName:t.testName,testType:a("calendar.".concat(o)),ofTheTestType:a("calendar.ofThe".concat(o))})})}if(t.dueDate){var s="midterm"!==t.testType&&t.testType?t.testType:"assignment";r.push({course:e._id,document:t,documentType:"testDueDate",date:new Date(parseInt(t.dueDate)).setHours(0,0,0,0),docName:a("calendar.testDueDate",{testType:a("calendar.".concat(s)),ofTheTestType:a("calendar.ofThe".concat(s)),testName:t.testName})})}if(t.gradeReleaseDate){var i="midterm"!==t.testType&&a.test?a.test:"assignment";r.push({course:e._id,document:t,documentType:"testGradeReleaseDateStudent",date:new Date(parseInt(t.gradeReleaseDate)).setHours(0,0,0,0),docName:a("calendar.testGradeReleaseDateStudent",{testName:t.testName,testType:a("calendar.".concat(i)),ofTheTestType:a("calendar.ofThe".concat(i))})})}})),(e.lessons||[]).forEach((function(t){r.push({course:e._id,document:t,documentType:"lessonAvailableOnDate",date:new Date(parseInt(t.availableOnDate)).setHours(0,0,0,0),docName:a("calendar.lessonAvailableOnDate",{lessonName:t.lessonName})})}))),n&&e.tests.forEach((function(t){var n="midterm"!==t.testType&&t.testType?t.testType:"assignment";t.gradeReleaseDate&&r.push({course:e._id,document:t,documentType:"testGradeReleaseDateInstructor",date:parseInt(t.gradeReleaseDate),docName:a("calendar.testGradeReleaseDateInstructor",{testType:a("calendar.".concat(n)),ofTheTestType:a("calendar.ofThe".concat(n)),testName:t.testName})})})))})),r}(t,n,a,Object(We.a)("common").t),l=r.a.useState(null),u=Object(vo.a)(l,2),d=u[0],m=u[1],p=Boolean(o),f=function(e){m(e)};return r.a.createElement(hm.a,{anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:p,onClose:i},r.a.createElement("div",{style:{minHeight:200,padding:5}},d?r.a.createElement("div",null,r.a.createElement(He.a,{variant:"h5"}," ",bt()(d).locale(localStorage.getItem("i18nextLng")).format("MMMM DD")),(t||[]).map((function(e){return c.findIndex((function(t){return t.date===d&&e._id===t.course}))>-1?r.a.createElement(qe,{key:e._id},r.a.createElement($r.a,{style:{margin:"10px auto 10px auto",padding:"5px"}},r.a.createElement(Yr.a,{style:{backgroundColor:"#2196f3",color:"white"}},r.a.createElement(vr.a,null,e.courseName)),c.filter((function(t){return t.course===e._id})).filter((function(e){return e.date===d})).map((function(e,t){return r.a.createElement(qe,{key:e.docName+t},r.a.createElement(Yr.a,{button:!0,onClick:function(){return s(e,"calendar")}},r.a.createElement(fs.a,null,r.a.createElement(gm,{d:e})),r.a.createElement(vr.a,null,e.docName)))})))):null})),d&&r.a.createElement(Wa.a,{color:"inherit",onClick:function(){return f(null)}},r.a.createElement(lm.a,null))):r.a.createElement(um.a,{locale:localStorage.getItem("i18nextLng"),onClickDay:function(e){f(new Date(e).getTime())},tileContent:function(e){e.activeStartDate;var t=e.date;e.view;return r.a.createElement(bm,{date:t,documentDates:c})},tileClassName:function(e){var t=e.date;e.view;return function(e,t){var n=new Date(e).setHours(0,0,0,0);return t.findIndex((function(e){return e.date===n&&"testDueDate"===e.documentType&&("midterm"===(e.document||{}).testType||"final"===(e.document||{}).testType)}))>-1||t.findIndex((function(e){return e.date===n&&"courseDropDeadline"===e.documentType}))>-1||t.findIndex((function(e){return e.date===n&&"testGradeReleaseDateInstructor"===e.documentType}))>-1?"highlight-red":t.findIndex((function(e){return e.date===n&&"testDueDate"===e.documentType}))>-1?"highlight-orange":t.findIndex((function(e){return e.date===n&&("lessonAvailableOnDate"===e.documentType||"testAvailableOnDate"===e.documentType||"testGradeReleaseDateStudent"===e.documentType)}))>-1?"highlight-green":t.findIndex((function(e){return e.date===n&&"regularOfficeHour"===e.documentType}))>-1||t.findIndex((function(e){return e.date===n&&"irregularOfficeHour"===e.documentType}))>-1?"highlight-blue":void 0}(t,c)}})))})),vm=n(407),ym=n.n(vm),Tm=n(408),km=n.n(Tm),Sm=n(653),wm=n.n(Sm),Om=n(652),Cm=n.n(Om),xm=n(655),Am=n.n(xm),Fm=n(656),Dm=n.n(Fm),_m=n(657),Im=n.n(_m),jm=n(654),Rm=n.n(jm),Nm=n(651),Lm=n.n(Nm),Pm=function(e){var t,n=e.n,a=e.courses;return"courseOfficeHours"===n.documentType&&(t=r.a.createElement(Lm.a,{color:n.seen?"disabled":"primary"})),"assignment"===n.documentType&&(t=r.a.createElement(xs.a,{color:n.seen?"disabled":"primary"})),"test"===n.documentType&&(t=r.a.createElement(Os.a,{color:n.seen?"disabled":"primary"})),"lesson"===n.documentType&&(t=r.a.createElement(Fs.a,{color:n.seen?"disabled":"primary"})),"testReview"===n.documentType&&(t=r.a.createElement(mm.a,{color:n.seen?"disabled":"primary"})),"assignmentReview"===n.documentType&&(t=r.a.createElement(mm.a,{color:n.seen?"disabled":"primary"})),"testExcused"===n.documentType&&(t=r.a.createElement(ym.a,{color:n.seen?"disabled":"primary"})),"assignmentExcused"===n.documentType&&(t=r.a.createElement(ym.a,{color:n.seen?"disabled":"primary"})),"resetTest"===n.documentType&&(t=r.a.createElement(Ls.a,{color:n.seen?"disabled":"primary"})),"resetAssignment"===n.documentType&&(t=r.a.createElement(Ls.a,{color:n.seen?"disabled":"primary"})),"testSubmitted"===n.documentType&&(t=r.a.createElement(km.a,{color:n.seen?"disabled":"primary"})),"assignmentSubmitted"===n.documentType&&(t=r.a.createElement(km.a,{color:n.seen?"disabled":"primary"})),"courseEnrollRequest"===n.documentType&&(t=r.a.createElement(Cm.a,{color:n.seen?"disabled":"primary"})),"courseEnrollDeny"===n.documentType&&(t=r.a.createElement(wm.a,{color:n.seen?"disabled":"primary"})),"courseEnrollApprove"===n.documentType&&(t=r.a.createElement(Rm.a,{color:n.seen?"disabled":"primary"})),"courseDrop"===n.documentType&&(t=r.a.createElement(fm.a,{color:n.seen?"disabled":"primary"})),"courseDropDeadline"===n.documentType&&(t=r.a.createElement(Am.a,{color:n.seen?"disabled":"primary"})),"courseGrade"===n.documentType&&(a||[]).findIndex((function(e){return e._id===n.documentId&&e.completed}))>-1&&(t=r.a.createElement(Dm.a,{color:n.seen?"disabled":"primary"})),"courseGrade"===n.documentType&&(a||[]).findIndex((function(e){return e._id===n.documentId&&!e.completed}))>-1&&(t=r.a.createElement(Im.a,{color:n.seen?"disabled":"primary"})),"chat"===n.documentType&&(t=r.a.createElement(Ge.a,{src:n.avatar})),t},Bm=Object(c.b)((function(e){return{courses:e.common.courses,studentTestResults:e.studentTest.testResults}}))((function(e){var t=e.notifications,n=e.handleClose,a=e.handleDoc,o=e.menuType,s=e.chatMenu,i=e.notificationsMenu,c=e.chatMenuOpen,l=e.notificationsMenuOpen,u=e.courses,d=e.studentTestResults,m=Object(We.a)("common").t;return r.a.createElement(hm.a,{anchorEl:"chat"===o?s:i,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:"chat"===o?c:l,onClose:n},(t||[]).filter((function(e){return"chat"===o?"chat"===e.documentType:"notifications"===o?"chat"!==e.documentType:void 0})).map((function(e){var t=(((u||[]).find((function(t){return t._id===e.course}))||{}).tests||[]).find((function(t){return t._id===e.documentId&&t.published}))||{};return"assignmentExcused"!==e.documentType&&"testExcused"!==e.documentType||t?(console.log("n",e),r.a.createElement(Er.a,{style:{whiteSpace:"normal",opacity:e.seen&&"chat"===e.documentType?.6:1},key:e._id,onClick:function(){return a(e)}},r.a.createElement(fs.a,null,r.a.createElement(Pm,{courses:u,n:e})),r.a.createElement("div",null,e.senderFirstName&&r.a.createElement(He.a,null,e.senderFirstName),r.a.createElement(He.a,{variant:"caption",style:{display:"block"}},function(e,t,n,a){var r=(t||[]).find((function(t){return t._id===e.course}))||{},o=((r.studentsEnrollRequests||[]).find((function(t){return t.student._id===e.toSpecificUser||t.student._id===e.fromUser}))||{}).student||{},s=r.grade,i=r.passed?a("notifications.passed"):a("notifications.failed"),c=(r.lessons||[]).find((function(t){return t._id===e.documentId}))||{},l=(r.tests||[]).find((function(t){return t._id===e.documentId}))||{},u=((n||{}).testResults||[]).find((function(t){return t.test===e.documentId}))||{},d=l.passingGrade?u.grade>=l.passingGrade?a("notifications.passed"):a("notifications.failed"):"",m="";if("chat"===e.documentType&&(m=e.content[0]),"courseOfficeHours"===e.documentType&&(m=a("notifications.".concat(e.content[0]),{courseName:r.courseName})),"courseDropDeadline"===e.documentType&&(m=a("notifications.".concat(e.content[0]),{courseName:r.courseName})),"courseEnrollRequest"===e.documentType&&(m=a("notifications.".concat(e.content[0]),{firstName:o.firstName,lastName:o.lastName,courseName:r.courseName})),"courseEnrollApprove"===e.documentType&&(m=a("notifications.".concat(e.content[0]),{courseName:r.courseName})),"courseEnrollDeny"===e.documentType&&(m=a("notifications.".concat(e.content[0]),{courseName:r.courseName}),m+=e.message?" ".concat(a("notifications.reason"),": ").concat(e.message," "):"",e.content[1]&&(m+=a("notifications.allowResubmission")+" ")),"courseDrop"===e.documentType&&(m=a("notifications.".concat(e.content[0]),{firstName:o.firstName,lastName:o.lastName,courseName:r.courseName})),"courseGrade"===e.documentType&&(m=a("notifications.".concat(e.content[0]),{passOrFail:i,courseName:r.courseName,grade:s})),"lesson"===e.documentType&&(m=a("notifications.".concat(e.content[0]),{lessonName:c.lessonName,date:bt()(parseInt(c.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm")})),"assignment"!==e.documentType&&"test"!==e.documentType||e.content.forEach((function(t,n){var r="test"===e.documentType;m+=a("notifications.".concat(t),{availableOnDate:bt()(parseInt(l.availableOnDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"),dueDate:bt()(parseInt(l.dueDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"),dueDateOrCloseDate:r?"close date":"due date",testOrAssignment:a(r?"notifications.test":"notifications.assignment"),grade:u.grade,passOrFail:d,message:e.message,latePenalty:l.latePenalty,lateDaysAllowed:l.lateDaysAllowed,testName:l.testName})+" "})),"assignmentSubmitted"===e.documentType||"testSubmitted"===e.documentType){var p="testSubmitted"===e.documentType;m=a("notifications.".concat(e.content[0]),{firstName:o.firstName,testOrAssignment:a(p?"notifications.test":"notifications.assignment"),aOrAn:p?"a":"an"})}if("assignmentReview"===e.documentType||"testReview"===e.documentType){var f="testReview"===e.documentType;m=a("notifications.".concat(e.content[0]),{grade:u.grade,testOrAssignment:a(f?"notifications.test":"notifications.assignment"),passOrFail:d,gradeReleaseDate:bt()(parseInt(l.gradeReleaseDate)).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY, HH:mm"),testName:l.testName})}if("resetAssignment"===e.documentType||"resetTest"===e.documentType){var g="resetTest"===e.documentType;m=a("notifications.".concat(e.content[0]),{testName:l.testName,testOrAssignment:a(g?"notifications.test":"notifications.assignment"),message:e.message})}if("assignmentExcused"===e.documentType||"testExcused"===e.documentType){var b="testExcused"===e.documentType;m=a("notifications.".concat(e.content[0]),{testName:l.testName,testOrAssignment:a(b?"notifications.test":"notifications.assignment"),message:e.message})}return m}(e,u,d,m))))):null})))})),Mm=Object(c.b)((function(e){return{studentLoggedIn:e.authentication.studentLoggedIn,instructorLoggedIn:e.authentication.instructorLoggedIn,profilePicture:(e.authentication.loadedUser||{}).loadedProfilePicture,testInSession:e.studentTest.testInSession,notifications:e.common.notifications,courses:e.common.courses,token:e.authentication.token}}),(function(e){return{setChatUser:function(t){e(be(t))},setTab:function(t){e(xe(t))},setTabLabels:function(t){e(Ce(t))},fetchStudents:function(t,n,a){return e(Ne(t,n,a))},fetchModules:function(t,n){return e(Se(t,n))},fetchQuestionBank:function(t,n){return e(U(t,n))},setCourse:function(t){e(_e(t))},setPanel:function(t){e(Re(t))},markAsSeen:function(t,n){e(ke(t,n))},openModal:function(t,n){e(Ae(t,n))}}}))((function(e){var t=e.profilePicture,n=e.markAsSeen,a=e.courses,o=e.studentLoggedIn,s=e.instructorLoggedIn,c=e.setTab,l=e.setPanel,u=e.setTabLabels,m=e.setChatUser,p=e.fetchStudents,f=e.openModal,g=e.fetchModules,b=e.fetchQuestionBank,h=e.setCourse,E=e.handlePanelChange,v=e.token,y=e.testInSession,T=e.notifications,k=r.a.useState(null),S=Object(vo.a)(k,2),w=S[0],O=S[1],C=r.a.useState(null),x=Object(vo.a)(C,2),A=x[0],F=x[1],D=r.a.useState(null),_=Object(vo.a)(D,2),I=_[0],j=_[1],R=r.a.useState(null),N=Object(vo.a)(R,2),L=N[0],P=N[1],B=Boolean(A),M=Boolean(I),q=Object(d.g)(),U=function(){F(null),j(null),O(null)},Q=function(e,t){!function(e,t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h){var E="calendar"===t;E||n(e._id,g);var v,y=e.course,T=(a||[]).find((function(t){return t._id===e.course})),k=((T.tests||[]).find((function(t){return t._id===e.documentId}))||{}).assignment,S=(e.document||{}).assignment||k;if(s(),"chat"===e.documentType||"irregularOfficeHour"===e.documentType||"regularOfficeHour"===e.documentType){var w={_id:e.fromUser,firstName:e.senderFirstName,lastName:e.senderLastName,profilePicture:e.avatar};i(E?0:1),c("chat"),l(["Contacts","Chat"]),E||u(w,y)}if(("testReview"===e.documentType||"testGradeReleaseDateStudent"===e.documentType&&!S)&&(i(1),c("test"),l(["Tests","Completed Tests"])),("assignmentReview"===e.documentType||"testGradeReleaseDateStudent"===e.documentType&&S)&&(i(1),c("assignment"),l(["Assignments","Completed Assignments"])),"testSubmitted"===e.documentType||"assignmentSubmitted"===e.documentType||"testGradeReleaseDateInstructor"===e.documentType){var O=T.tests.find((function(t){return t._id===e.documentId}));E?((e.document||{}).assignment&&i(1),(e.document||{}).assignment||i(0)):(d(y,g,{actionType:"openSubmittedTest",payload:{notification:e,test:O}}),i("testSubmitted"===e.documentType?0:1)),c("grade"),l(["Tests","Assignments"])}if("test"!==e.documentType&&"testAvailableOnDate"!==e.documentType&&"testDueDate"!==e.documentType&&"resetTest"!==e.documentType&&"testExcused"!==e.documentType||S||(i(0),c("test"),l(["Tests","Completed Tests"])),"assignment"!==e.documentType&&"testAvailableOnDate"!==e.documentType&&"testDueDate"!==e.documentType&&"resetAssignment"!==e.documentType&&"assignmentExcused"!==e.documentType||!S||(i(0),c("assignment"),l(["Assignments","Completed Assignments"])),"lesson"===e.documentType||"lessonAvailableOnDate"===e.documentType){var C=T.lessons.find((function(t){return t._id===e.documentId||(e.document||{})._id}))||{};i(0),c("lesson"),l(["",""]);var x=Date.now()>new Date(parseInt(C.availableOnDate)).getTime();(C.availableOnDate&&x||!C.availableOnDate)&&m(C,"lesson")}"courseEnrollRequest"===e.documentType&&(i(1),c("student"),l(["Students","Enrollment requests"])),v=E?(a||[]).find((function(t){return t._id===e.course}))||{}:(a||[]).find((function(e){return e._id===y}))||{},"courseOfficeHours"!==e.documentType&&"courseDropDeadline"!==e.documentType?("courseDrop"===e.documentType&&(i(0),c("student"),l(["Students","Enrollment requests"])),"courseEnrollDeny"!==e.documentType&&(b(v),r&&v&&(p(y,g),d(y,g),h.push("/student-panel/course/".concat(y))),o&&v&&(p(y,g),d(y,g),f(y,g),h.push("/instructor-panel/course/".concat(y))))):m(v,"syllabus")}(e,t,n,a,o,s,U,c,l,u,m,p,f,g,b,v,h,q)},H=(T||[]).filter((function(e){return"chat"!==e.documentType})).length>0,G=(T||[]).filter((function(e){return"chat"===e.documentType})).length>0;return r.a.createElement("div",{style:{height:"100%"}},!y&&r.a.createElement(qe,null,r.a.createElement(ko.a,{style:{marginRight:"10px",marginTop:"7px"},color:"secondary",badgeContent:y?0:(T||[]).filter((function(e){return!e.seen&&"chat"===e.documentType})).length},r.a.createElement(Fo.a,{style:{cursor:G?"pointer":"auto"},edge:"end",color:"inherit",onClick:function(e){var t;!y&&G&&(t=e,0!==(T||[]).length&&(F(t.currentTarget),P("chat")))}})),r.a.createElement(ko.a,{style:{marginRight:"10px",marginTop:"7px"},color:"secondary",badgeContent:y?0:(T||[]).filter((function(e){return!e.seen&&"chat"!==e.documentType})).length},r.a.createElement(im.a,{style:{cursor:H&&!y?"pointer":"auto"},onClick:function(e){var t;H&&(y||(t=e,0!==(T||[]).length&&(j(t.currentTarget),P("notifications"))))}})),r.a.createElement(ko.a,{style:{marginRight:"10px",marginTop:"7px",cursor:"pointer"},edge:"end",onClick:function(e){y||O(e.currentTarget)}},r.a.createElement(lm.a,null))),r.a.createElement(ko.a,null,y?r.a.createElement(Ge.a,{style:{cursor:y?"auto":"pointer"},onClick:function(){y||E(["All courses","Your courses"],"modules","exitCourse")},src:t}):r.a.createElement(i.b,{to:"/account"},r.a.createElement(Ge.a,{style:{cursor:y?"auto":"pointer"},onClick:function(){y||E(["All courses","Your courses"],"modules","exitCourse")},src:t}))),r.a.createElement(Em,{handleDocument:Q,handleClose:U,calendar:w}),r.a.createElement(Bm,{handleClose:U,handleDoc:Q,menuType:L,chatMenu:A,notifications:T,notificationsMenu:I,chatMenuOpen:B,notificationsMenuOpen:M}))})),qm=n(180),Um=n.n(qm),Qm=n(182),Hm=n.n(Qm),Gm=n(179),Wm=n.n(Gm),zm=n(329),Vm=n.n(zm),$m=n(328),Ym=n.n($m),Jm=n(659),Km=n.n(Jm),Zm=n(181),Xm=n.n(Zm),ep=n(333),tp=n.n(ep),np=Object(c.b)((function(e){return{isDarkTheme:e.common.isDarkTheme}}))((function(e){return r.a.createElement("li",{className:e.isDarkTheme?tp.a.NavigationItemDark:tp.a.NavigationItem},r.a.createElement(i.b,{to:e.link,exact:e.exact,activeClassName:e.notSelected?"":tp.a.active},e.children))})),ap=Object(c.b)((function(e){return{course:e.common.selectedCourse,coursePanel:e.common.coursePanel,token:e.authentication.token,userId:e.authentication.userId}}),(function(e){return{exitCourse:function(){e({type:"RETURN_TO_COURSES"})},setTabLabels:function(t){return e(Ce(t))},setTab:function(t){return e(xe(t))},setPanel:function(t){return e(Re(t))},cancelEditing:function(){return e({type:"CANCEL_EDITING"})}}}))((function(e){var t=e.mobileOpen,n=e.onHandleDrawerToggle,a=e.coursePanel,o=e.course,s=e.cancelEditing,i=e.exitCourse,c=e.setTabLabels,l=e.setTab,u=e.setPanel,d=(e.token,e.classes),m=Object(We.a)("common").t,p=function(e,a,r){t&&n(),r&&i(),s(),l(0),u(a),c(e)};return r.a.createElement("div",null,r.a.createElement("div",{className:d.toolbar}),r.a.createElement($u.a,null),r.a.createElement($r.a,null,r.a.createElement(np,{link:"/instructor-panel/courses",notSelected:!!o},r.a.createElement(Yr.a,{button:!0,onClick:function(e){p(["Courses","New course"],"modules","exitCourse")}},r.a.createElement(fs.a,null,r.a.createElement(Wm.a,null)),r.a.createElement(vr.a,{primary:m("layout.drawer.courses")}))),r.a.createElement(np,{link:"/account"},r.a.createElement(Yr.a,{onClick:function(){p(["Courses","New course"],"modules","exitCourse")},button:!0},r.a.createElement(fs.a,null,r.a.createElement(Um.a,null)),r.a.createElement(vr.a,{primary:m("layout.drawer.account")}))),r.a.createElement(np,{link:"/configuration"},r.a.createElement(Yr.a,{onClick:function(){p(["Courses","New course"],"modules","exitCourse")},button:!0},r.a.createElement(fs.a,null,r.a.createElement(Xm.a,null)),r.a.createElement(vr.a,{primary:m("layout.drawer.config")}))),r.a.createElement(np,{link:"/logout"},r.a.createElement(Yr.a,{button:!0,onClick:n},r.a.createElement(fs.a,null,r.a.createElement(Hm.a,null)),r.a.createElement(vr.a,{primary:m("layout.drawer.logout")}))),r.a.createElement($u.a,null),r.a.createElement(Yr.a,{className:d.blueHeader},o.courseName&&r.a.createElement(vr.a,{primary:o.courseName,className:d.whiteColor})),r.a.createElement(Yr.a,{button:!0,onClick:function(){p([""],"modules")},className:"modules"===a?d.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(Ym.a,null)),r.a.createElement(vr.a,{primary:m("layout.drawer.modules")})),r.a.createElement(Yr.a,{button:!0,onClick:function(e){p(["Lessons","New lesson"],"lesson")},className:"lesson"===a?d.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(Fs.a,null)),r.a.createElement(vr.a,{primary:m("layout.drawer.lessons")})),r.a.createElement(Yr.a,{button:!0,onClick:function(){p(["Assignments","New assignment","Question bank"],"assignment")},className:"assignment"===a?d.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(xs.a,null)),r.a.createElement(vr.a,{primary:m("layout.drawer.assignments")})),r.a.createElement(Yr.a,{button:!0,onClick:function(){p(["Tests","New test","Question bank"],"test")},className:"test"===a?d.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(Os.a,null)),r.a.createElement(vr.a,{primary:m("layout.drawer.tests")})),r.a.createElement(Yr.a,{button:!0,onClick:function(){p(["Tests","Assignments"],"grade")},className:"grade"===a?d.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(mm.a,null)),r.a.createElement(vr.a,{primary:m("layout.drawer.grades")})),r.a.createElement(Yr.a,{button:!0,onClick:function(){p(["Contacts","Chat"],"chat")},className:"chat"===a?d.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(Fo.a,null)),r.a.createElement(vr.a,{primary:m("layout.drawer.chat")})),r.a.createElement(Yr.a,{button:!0,onClick:function(){p(["Students","Enrollment requests"],"student")},className:"student"===a?d.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(Km.a,null)),r.a.createElement(vr.a,{primary:m("layout.drawer.students")})),r.a.createElement(Yr.a,{button:!0,onClick:function(){p(["",""],"resources")},className:"resources"===a?d.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(Vm.a,null)),r.a.createElement(vr.a,{primary:m("layout.drawer.resources")}))),r.a.createElement($u.a,null),r.a.createElement(om,null))})),rp=Object(c.b)((function(e){return{course:e.common.selectedCourse,coursePanel:e.common.coursePanel,testInSession:e.studentTest.testInSession}}),(function(e){return{exitCourse:function(){e({type:"RETURN_TO_COURSES"})},setTabLabels:function(t){return e(Ce(t))},setTab:function(t){return e(xe(t))},setPanel:function(t){return e(Re(t))}}}))((function(e){var t=e.mobileOpen,n=e.onHandleDrawerToggle,a=e.setPanel,o=e.setTabLabels,s=e.setTab,i=e.exitCourse,c=e.testInSession,l=e.coursePanel,u=e.course,m=e.classes,p=Object(d.h)().pathname,f=Object(We.a)("common").t,g=function(e,r,c){o(e),s(0),a(r),t&&n(),c&&i()};return r.a.createElement("div",null,r.a.createElement("div",{className:m.toolbar}),r.a.createElement($u.a,null),r.a.createElement($r.a,null,!c&&r.a.createElement(qe,null,r.a.createElement(np,{link:"/student-panel/courses",notSelected:!!u},r.a.createElement(Yr.a,{button:!0,onClick:function(){g(["All courses","Your courses"],"modules","exitCourse")}},r.a.createElement(fs.a,null,r.a.createElement(Wm.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.courses")}))),r.a.createElement(np,{link:"/account"},r.a.createElement(Yr.a,{onClick:function(){g(["All courses","Your courses"],"modules","exitCourse")},button:!0},r.a.createElement(fs.a,null,r.a.createElement(Um.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.account")}))),r.a.createElement(np,{link:"/configuration"},r.a.createElement(Yr.a,{onClick:function(){g(["All courses","Your courses"],"modules","exitCourse")},button:!0},r.a.createElement(fs.a,null,r.a.createElement(Xm.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.config")})))),r.a.createElement(np,{link:"/logout"},r.a.createElement(Yr.a,{button:!0,onClick:n},r.a.createElement(fs.a,null,r.a.createElement(Hm.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.logout")}))),r.a.createElement($u.a,null),r.a.createElement(Yr.a,{className:m.blueHeader},u.courseName&&r.a.createElement(vr.a,{primary:"".concat(u.courseName," "),className:m.whiteColor})),!c&&r.a.createElement(qe,null,r.a.createElement(Yr.a,{button:!0,onClick:function(){g([""],"modules")},className:"modules"===l?m.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(Ym.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.modules")})),r.a.createElement(Yr.a,{button:!0,onClick:function(){g([""],"lesson")},className:"lesson"===l?m.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(Fs.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.lessons")})),r.a.createElement(Yr.a,{button:!0,onClick:function(){g(["Assignments","Completed assignments"],"assignment")},className:"assignment"===l?m.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(xs.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.assignments")})),r.a.createElement(Yr.a,{button:!0,onClick:function(){g(["Tests","Completed tests"],"test")},className:"test"===l?m.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(Os.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.tests")})),r.a.createElement(Yr.a,{button:!0,onClick:function(){g(["Contacts","Chat"],"chat")},className:"chat"===l?m.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(Fo.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.chat")})),r.a.createElement(Yr.a,{button:!0,onClick:function(){g([""],"progressReport")},className:"progressReport"===l?m.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(mm.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.progressReport")})),r.a.createElement(Yr.a,{button:!0,onClick:function(){g(["",""],"resources")},className:"resources"===l?m.primaryColor:""},r.a.createElement(fs.a,null,r.a.createElement(Vm.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.resources")}))),!(c||{}).blockedNotes&&c&&r.a.createElement(qe,null,r.a.createElement(np,{notSelected:!("/student-panel/test-in-session/lessons"===p),link:"/student-panel/test-in-session/lessons"},r.a.createElement(Yr.a,{button:!0,onClick:function(){g([""],"testLesson")}},r.a.createElement(fs.a,null,r.a.createElement(Fs.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.lessons")}))),r.a.createElement(np,{notSelected:!("/student-panel/test-in-session"===p),link:"/student-panel/test-in-session"},r.a.createElement(Yr.a,{button:!0,onClick:function(e){g([""],"testSession")}},r.a.createElement(fs.a,null,r.a.createElement(Os.a,null)),r.a.createElement(vr.a,{primary:f("layout.drawer.test")}))))),r.a.createElement($u.a,null),r.a.createElement(om,null))})),op=Object(c.b)((function(e){return{course:e.common.selectedCourse,token:e.authentication.token,userId:e.authentication.userId}}),(function(e){return{exitCourse:function(){e({type:"RETURN_TO_COURSES"})},setTab:function(t){return e(xe(t))},setCourseFormPage:function(t){return e(x(t))},cancelEditing:function(){return e({type:"CANCEL_EDITING"})},setTabLabels:function(t){return e(Ce(t))}}}))((function(e){var t=e.course,n=e.setTab,a=e.cancelEditing,o=e.setCourseFormPage,s=e.setTabLabels,i=e.onHandleDrawerToggle,c=e.classes,l=Object(We.a)("common").t,u=function(){a(),o(1),s(["Courses","New course"]),n(0)};return r.a.createElement("div",null,r.a.createElement("div",{className:c.toolbar}),r.a.createElement($u.a,null),r.a.createElement($r.a,null,r.a.createElement(np,{link:"/instructor-panel/courses",notSelected:!!t},r.a.createElement(Yr.a,{button:!0,onClick:u},r.a.createElement(fs.a,null,r.a.createElement(Wm.a,null)),r.a.createElement(vr.a,{primary:l("layout.drawer.courses")}))),r.a.createElement(np,{link:"/account"},r.a.createElement(Yr.a,{button:!0,onClick:u},r.a.createElement(fs.a,null,r.a.createElement(Um.a,null)),r.a.createElement(vr.a,{primary:l("layout.drawer.account")}))),r.a.createElement(np,{link:"/configuration"},r.a.createElement(Yr.a,{button:!0,onClick:u},r.a.createElement(fs.a,null,r.a.createElement(Xm.a,null)),r.a.createElement(vr.a,{primary:l("layout.drawer.config")}))),r.a.createElement(np,{link:"/logout"},r.a.createElement(Yr.a,{button:!0,onClick:i},r.a.createElement(fs.a,null,r.a.createElement(Hm.a,null)),r.a.createElement(vr.a,{primary:l("layout.drawer.logout")})))),r.a.createElement($u.a,null),r.a.createElement(om,null))})),sp=Object(c.b)((function(e){return{course:e.common.selectedCourse,coursePanel:e.common.coursePanel,testInSession:e.studentTest.testInSession,token:e.authentication.token,userId:e.authentication.userId}}),(function(e){return{exitCourse:function(){e({type:"RETURN_TO_COURSES"})},setPanel:function(t){return e(Re(t))},setTabLabels:function(t){return e(Ce(t))},setTab:function(t){return e(xe(t))}}}))((function(e){e.mobileOpen,e.setPanel;var t=e.course,n=e.onHandleDrawerToggle,a=(e.setTab,e.setTabLabels,e.classes),o=Object(We.a)("common").t;return r.a.createElement(qe,null,r.a.createElement("div",{style:{overflowX:"hidden"},className:a.toolbar}),r.a.createElement($u.a,null),r.a.createElement($r.a,null,r.a.createElement(qe,null,r.a.createElement(np,{notSelected:!!t,link:"/student-panel/courses"},r.a.createElement(Yr.a,{button:!0},r.a.createElement(fs.a,null,r.a.createElement(Wm.a,null)),r.a.createElement(vr.a,{primary:o("layout.drawer.courses")})))),r.a.createElement(np,{link:"/account"},r.a.createElement(Yr.a,{button:!0},r.a.createElement(fs.a,null,r.a.createElement(Um.a,null)),r.a.createElement(vr.a,{primary:o("layout.drawer.account")}))),r.a.createElement(np,{link:"/configuration"},r.a.createElement(Yr.a,{button:!0},r.a.createElement(fs.a,null,r.a.createElement(Xm.a,null)),r.a.createElement(vr.a,{primary:o("layout.drawer.config")}))),r.a.createElement(np,{link:"/logout"},r.a.createElement(Yr.a,{button:!0,onClick:n},r.a.createElement(fs.a,null,r.a.createElement(Hm.a,null)),r.a.createElement(vr.a,{primary:o("layout.drawer.logout")})))),r.a.createElement($u.a,null),r.a.createElement(om,null))})),ip=Object(c.b)((function(e){return{studentLoggedIn:e.authentication.studentLoggedIn,instructorLoggedIn:e.authentication.instructorLoggedIn,course:e.common.selectedCourse,testInSession:e.studentTest.testInSession}}))((function(e){var t=e.studentLoggedIn,n=e.instructorLoggedIn,a=e.testInSession,o=e.course,s=e.classes,i=e.mobileOpen,c=e.handleDrawerToggle;return!t||o||a?t&&o?r.a.createElement(rp,{classes:s,onHandleDrawerToggle:c,mobileOpen:i}):n&&!o?r.a.createElement(op,{classes:s,onHandleDrawerToggle:c}):n&&o?r.a.createElement(ap,{mobileOpen:i,onHandleDrawerToggle:c,classes:s}):void 0:r.a.createElement(sp,{classes:s,mobileOpen:i,studentCourseDetailId:(o||{})._id,onHandleDrawerToggle:c})})),cp=["en","es"],lp={label:"Dark mode",size:"small"};var up=Object(c.b)((function(e){return{isAuthenticated:null!==e.authentication.token,course:e.common.selectedCourse,coursePanel:e.common.coursePanel,tab:e.common.tab,testInSession:e.studentTest.testInSession,courses:e.common.courses,sessionAlert:e.common.sessionAlert,width:e.common.width,sessionExpiration:e.authentication.sessionExpiration,refreshTokenExpiration:e.authentication.refreshTokenExpiration,loadedTestDataInProgress:e.studentTest.loadedTestDataInProgress,isDarkTheme:e.common.isDarkTheme}}),(function(e){return{setTab:function(t){e(xe(t))},setTabLabels:function(t){e(Ce(t))},setPanel:function(t){e(Re(t))},changeWidth:function(t){e({type:"SET_WIDTH",width:t})},exitCourse:function(){e({type:"RETURN_TO_COURSES"})},setRefreshSessionAlert:function(t){e(De(t))},setTheme:function(t){e(Oe(t))},logout:function(){e(pe())}}}))((function(e){var t=e.isAuthenticated,n=e.children,o=e.course,s=e.coursePanel,i=e.testInSession,c=e.width,l=e.isDarkTheme,u=e.sessionAlert,m=e.refreshTokenExpiration,p=e.sessionExpiration,f=e.setRefreshSessionAlert,g=e.setTab,b=e.setTabLabels,h=e.setPanel,E=e.loadedTestDataInProgress,v=e.changeWidth,y=e.exitCourse,T=e.setTheme,k=e.logout,S=Ul(),w=Ql(),O=S;l&&(O=w);var C=(Object(d.j)("/verify-account/:accountType/:token")||{}).params,x=(Object(d.j)("/reset/:accountType/:token")||{}).params,A=C||x,F=Object(a.useState)(null),D=Object(vo.a)(F,2),_=D[0],I=D[1],j=Object(a.useState)(null),R=Object(vo.a)(j,2),N=R[0],L=R[1];function P(){v(window.innerWidth)}Object(a.useEffect)((function(){if(cp.includes(localStorage.getItem("i18nextLng"))||((localStorage.getItem("i18nextLng")||"").includes("es")?localStorage.setItem("i18nextLng","es"):localStorage.setItem("i18nextLng","en")),localStorage.setItem("timezone",ms.a.tz.guess()),p){clearTimeout(_),clearTimeout(N);var e=new Date(p).getTime()-Date.now(),t=setTimeout((function(){k()}),e);I(t);var n=setTimeout((function(){f("on")}),e-6e5);L(n),Date.now()>m&&clearTimeout(N)}return function(){clearTimeout(_),clearTimeout(N)}}),[p]),Object(a.useEffect)((function(){U(!1)}),[t]),Object(a.useLayoutEffect)((function(){return window.addEventListener("resize",Object(tm.a)(150,!1,(function(){P()}),!1)),P(),function(){return window.removeEventListener("resize",P)}}),[]);var B=r.a.useState(!1),M=Object(vo.a)(B,2),q=M[0],U=M[1],Q=function(){U(!q)},H=r.a.createElement("div",{className:O.CustomTabBar},r.a.createElement(Wl,{width:c,classes:O}));return r.a.createElement("div",{className:O.root},!localStorage.getItem("token")&&!(A||{}).token&&r.a.createElement(d.a,{to:"/authentication"}),i&&E&&r.a.createElement(d.a,{to:"/student-panel/test-in-session"}),r.a.createElement(Bl.a,null),r.a.createElement(Oo.a,{position:"fixed",className:[t?O.appBar:O.appBarNoDrawer,l?O.AppStyle:""].join(" ")},r.a.createElement(xo.a,{className:O.toolbarLayout},!t&&r.a.createElement(om,null),t&&r.a.createElement(qe,null,r.a.createElement(Wa.a,{edge:"end",color:"inherit","aria-label":"open drawer",onClick:Q,className:O.menuButton},r.a.createElement(ql.a,null)),r.a.createElement(He.a,{variant:"h6",noWrap:!0},"Learn"),r.a.createElement(Mm,{handlePanelChange:function(e,t,n){b(e),g(0),h(t),q&&Q(),n&&y()},testInSession:i})))),t&&r.a.createElement(Yl,{classes:O,mobileOpen:q,onHandleDrawerToggle:Q}," ",r.a.createElement("div",{style:{position:"absolute",top:15,left:15}},r.a.createElement(Ca,{options:lp,input:{value:l,onChange:function(){return T(l?"light":"dark")}}})),r.a.createElement(ip,{mobileOpen:q,handleDrawerToggle:Q,classes:O})),c>=500&&t?H:null,r.a.createElement("div",{className:[O.panelContainer,"modules"===s&&o?"":O.panelContainerBreakPoints].join(" ")},n),c<500&&t?H:null,r.a.createElement(em,null),u&&r.a.createElement(rm,null))})),dp=Object(Da.a)({palette:{primary:{light:"#757ce8",main:"#2196f3",dark:"#002884",contrastText:"#fff"},secondary:{main:"#FF4136"},success:{main:"#4caf50"}},props:{MuiButtonBase:{disableRipple:!0},MuiButton:{variant:"outlined",size:"small"}},overrides:{MuiFormHelperText:{root:{color:"#e91313"}},MuiTabs:{centered:{justifyContent:"space-evenly"}},MuiSvgIcon:{root:{colorPrimary:"#2196f3 !important"}},MuiAppBar:{root:{zIndex:1}},MuiCard:{root:{overflow:"none"}},MuiDrawer:{paper:{zIndex:"100"}},MuiButton:{root:{marginBottom:"10px",marginTop:"10px",backgroundColor:"white"},outlinedPrimary:{border:"1px solid #2196f3"},startIcon:{marginLeft:"0",marginRight:"0"}},MuiExpansionPanelDetails:{root:{padding:"8px 5px 24px",display:"block"}}}}),mp=Object(Da.a)({palette:{primary:{main:"#2196f3",dark:"#01579b"},secondary:{main:"#c62828"},background:{default:"#424242"},type:"dark"},props:{MuiButtonBase:{disableRipple:!0},MuiButton:{variant:"contained",size:"small"}},overrides:{MuiFormHelperText:{contained:{color:"#e91313"},root:{color:"#e91313"}},MuiTabs:{centered:{justifyContent:"space-evenly"}},MuiSvgIcon:{root:{colorPrimary:"#2196f3 !important"}},MuiAppBar:{colorDefault:{backgroundColor:"#424242"},root:{zIndex:1}},MuiCard:{root:{overflow:"none"}},MuiDrawer:{paper:{zIndex:"100"}},MuiButton:{root:{marginBottom:"10px",marginTop:"10px",backgroundColor:"white"},outlinedPrimary:{border:"1px solid #2196f3"},startIcon:{marginLeft:"0",marginRight:"0"}},MuiExpansionPanelDetails:{root:{padding:"8px 5px 24px",display:"block"}}}}),pp=n(1258),fp=n(232),gp=n.n(fp),bp=function(e){var t=e.successMessage,n=e.failMessage,a=e.noDrawer;return r.a.createElement("div",{style:{transform:t||n?"translateY(0)":"translateY(-100vh)",opacity:t||n?"1":"0"},className:[gp.a.alert,t?gp.a.success:gp.a.fail,a?gp.a.noDrawer:gp.a.withDrawer].join(" ")},t?r.a.createElement(He.a,{variant:"subtitle1"},t):r.a.createElement(He.a,{variant:"subtitle1"},n))},hp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={isValid:!0,documentsAreValid:!0},n=e.isEditingPassword,a=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,r=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/;return e.firstName||(t.firstName=ua.t("account.errors.enterFirstName"),t.isValid=!1),/^[ a-zA-Z\xc0-\xff\u00f1\u00d1]*$/g.test(e.firstName)||(t.firstName=ua.t("account.errors.enterFirstNameOnlyAlpha"),t.isValid=!1),e.lastName||(t.lastName=ua.t("account.errors.enterLastName"),t.isValid=!1),/^[ a-zA-Z\xc0-\xff\u00f1\u00d1]*$/g.test(e.lastName)||(t.lastName=ua.t("account.errors.enterLastNameOnlyAlpha"),t.isValid=!1),e.dob||(t.dob=ua.t("account.errors.enterDateOfBirth"),t.isValid=!1),a.test(e.email)||(t.email=ua.t("account.errors.enterValidEmail"),t.isValid=!1),e.email||(t.email=ua.t("account.errors.required"),t.isValid=!1),!e.newPassword&&n&&(t.newPassword=ua.t("account.errors.requiredOrSelectKeepPassword"),t.isValid=!1),!e.newPasswordConfirm&&n&&(t.newPasswordConfirm=ua.t("account.errors.requiredOrSelectKeepPassword"),t.isValid=!1),!e.currentPassword&&n&&(t.currentPassword=ua.t("account.errors.requiredOrSelectKeepPassword"),t.isValid=!1),!r.test(e.newPassword)&&n&&(t.newPassword=ua.t("account.errors.passwordConditions"),t.isValid=!1),e.newPasswordConfirm!==e.newPassword&&(t.newPasswordConfirm=ua.t("account.errors.passwordMismatched"),t.isValid=!1),t.documents=(e.documents||[]).map((function(n,a){var r=null;return n||(r=ua.t("account.errors.selectDocAndType")),(n||{}).document||(r=ua.t("account.errors.selectPdfWordJpg")),(n||{}).document instanceof File&&(n||{}).document.size>25e6&&(r="".concat(ua.t("account.errors.docMustBeLessThan",{size:e.maxFileSize}))),!r&&(n||{}).documentType||(t.documentsAreValid=!1,t.isValid=!1),!r&&(n||{}).documentType||(t.atIndex=a),{documentType:(n||{}).documentType?null:ua.t("account.errors.mustSelectDocType"),document:r}})),t},Ep=Object(rt.a)((function(e){return{root:{display:"flex"},smallFontSize:{fontSize:"0.7em"},GreenButton:{"&:hover":{backgroundColor:"#388e3c",color:"#FFF"}}}})),vp=(Object(Vs.a)(pt.a)({background:"#4caf50",border:0,borderRadius:3,color:"white",height:48,padding:"0 30px"}),function(e){if(e){var t=[];return t.push(e.profilePicture),(e.documents||[]).forEach((function(e){t.push(e.document)})),t}}),yp=Object(Mt.a)({form:"accountForm",enableReinitialize:!0,validate:hp,destroyOnUnmount:!0})((function(e){var t,n=e.token,o=e.instructorLoggedIn,s=e.studentLoggedIn,i=e.formValues,c=void 0===i?{}:i,l=e.initialValues,u=e.changeField,d=e.touchField,m=e.clearProfilePicture,p=e.updateAccount,f=e.showDocuments,g=e.formErrors,b=e.loading,h=e.fetchUser,E=e.width,v=Object(We.a)().t,y=Object(a.useState)(null),T=Object(vo.a)(y,2),k=T[0],S=T[1],w=Object(a.useState)(!0),O=Object(vo.a)(w,2),C=O[0],x=O[1],A=(Ep(),c.isEditingPassword);Object(a.useEffect)((function(){n&&h(n);var e=vp(l);S(e)}),[n]),s&&(t="student"),o&&(t="instructor");var F=function(){u("isEditingPassword",!!!A)};function D(e,t){return{info:e,fieldName:t}}var _=[D(v("account.firstName"),"firstName"),D(v("account.lastName"),"lastName"),D(v("account.email"),"email"),D(v("account.dob"),"dob"),D(v("account.id"),"numericalId"),A?D(v("account.currentPassword"),"currentPassword"):D(v("account.password"),v("account.buttons.edit")),A?D(v("account.newPassword"),"newPassword"):null,A?D(v("account.confirmPassword"),"newPasswordConfirm"):null],I=!((C||g.isValid)&&(!g.asyncError||g.isValid));return r.a.createElement(qe,null,r.a.createElement(Xe,{transparent:!0,active:b}),r.a.createElement("div",{style:{maxWidth:"500px",margin:E>500?"20px auto 0 auto":"40px auto 0 auto"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ba.a,{name:"profilePicture",circle:!0,onChangeFile:function(e){u("loadedProfilePicture",e)},compressImage:!0,loadedFile:c.loadedProfilePicture,component:Va,imageFile:!0,type:"file",uploadButtonText:c.loadedProfilePicture?v("account.buttons.updateProfilePicture"):v("account.buttons.uploadProfilePicture"),mimeTypesAllowed:"image/jpeg",extensionsAllowed:["jpeg","jpg","jfif"]}),r.a.createElement(pt.a,{disabled:!c.loadedProfilePicture,color:"secondary",type:"button",onClick:function(){return m()},style:{display:"block",margin:"auto"}},v("account.buttons.clearProfilePicture"))),r.a.createElement(si.a,{"aria-label":"simple table"},r.a.createElement(ii.a,null,_.map((function(e,t){return e?r.a.createElement(li.a,{key:e.info+t},r.a.createElement(ci.a,{component:"th",scope:"row"},e.info,5===t&&A&&r.a.createElement(He.a,{color:"primary",onClick:F,variant:"caption",style:{cursor:"pointer",display:"block"}},v("account.buttons.keepPassword"))),r.a.createElement(ci.a,{align:"left"}," ",!(3===t||5===t&&!A)&&r.a.createElement(ba.a,{disabled:4===t,name:"".concat(e.fieldName),component:ka,simple:!0,type:5===t||6===t||7===t?"password":"text"}),3===t&&r.a.createElement(ba.a,{name:e.fieldName,oneFifthWidth:!0,component:ur,type:"date",options:{disableFuture:!0},account:!0,handleChange:function(e){return u("dob",e)},maxDate:new Date(Date.now()-943488e5)}),5===t&&!A&&r.a.createElement(pt.a,{color:"primary",onClick:F},e.fieldName))):null})))),r.a.createElement(pt.a,{variant:"contained",onClick:function(){u("isEditingPassword",!1),f()},color:"primary",style:{margin:"20px auto 0 auto",display:"block"}},v("account.buttons.documents")),I&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},r.a.createElement(He.a,{color:"error"},v("account.errors.correctForm"))),r.a.createElement(Js,{fullWidth:!0,isError:I,clicked:function(){var e=vp(c),a=(k||[]).filter((function(t){if(!e.includes(t))return t}));!function(){if(d("firstName"),d("lastName"),d("dob"),d("sex"),d("currentPassword"),d("newPassword"),d("newPasswordConfirm"),g.isValid)return!0}()?x(!1):p(Object(It.a)(Object(It.a)({},c),{},{accountType:t,newPassword:A?c.newPassword:null,currentPassword:A?c.currentPassword:null,language:localStorage.getItem("i18nextLng")||"en"}),n,a)}},v("account.buttons.saveChanges"))))})),Tp=Object(c.b)((function(e){var t=e.common.configuration.studentFileSizeLimit,n=Object(It.a)(Object(It.a)({},e.authentication.loadedUser),{},{maxFileSize:t});return{formValues:Object(nt.a)("accountForm")(e),formErrors:Object(Pt.a)("accountForm")(e),token:e.authentication.token,userId:e.authentication.userId,notification:e.common.notification,course:e.common.selectedCourse,courses:e.common.courses,coursePanel:e.common.coursePanel,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn,user:e.authentication,initialValues:n,loading:e.authentication.loading,width:e.common.width}}),(function(e){return{updateAccount:function(t,n,a){return e(function(e,t,n){return{type:"UPDATE_ACCOUNT_START",payload:{formData:e,token:t,filesToDelete:n}}}(t,n,a))},logout:function(){e(pe())},changeField:function(t,n){e(Object(Bt.a)("accountForm",t,n))},touchField:function(t){e(Object(Bt.d)("accountForm",t))},fetchUser:function(t){return e(re(t))},showDocuments:function(){e(Ae(null,"studentDocuments"))},clearProfilePicture:function(){e(Object(Bt.a)("accountForm","profilePicture",null)),e(Object(Bt.a)("accountForm","loadedProfilePicture",null))}}}))(yp),kp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={isValid:!0};return e.coursePassGrade>0&&e.coursePassGrade<=100||(t.coursePassGrade=ua.t("config.errors.greaterThanZeroLessThanEqualOneHundred"),t.isValid=!1),e.isDropCoursePenalty&&(e.dropCourseGrade<e.coursePassGrade||(t.dropCourseGrade=ua.t("config.errors.dropGradeLessThanPassGrade"),t.coursePassGrade=ua.t("config.errors.passGradeMoreThanDropGrade"),t.isValid=!1),e.dropCourseGrade>=0&&e.dropCourseGrade<100||(t.dropCourseGrade=ua.t("config.errors.greaterEqualToZeroLessThanOneHundred"),t.isValid=!1)),e.isInstructorCoursesLimit&&(Number.isInteger(parseFloat(e.instructorCoursesLimit))&&e.instructorCoursesLimit>=1&&e.instructorCoursesLimit<=100||(t.instructorCoursesLimit=ua.t("config.errors.intGreaterThanEqualOneLessThanEqualOneHundred"),t.isValid=!1)),e.studentFileSizeLimit>=.1&&e.studentFileSizeLimit<=1e3||(t.studentFileSizeLimit=ua.t("config.errors.greaterThanEqualPointOneLessThanEqualOneThousand"),t.isValid=!1),e.instructorFileSizeLimit>=.1&&e.instructorFileSizeLimit<=1e3||(t.instructorFileSizeLimit=ua.t("config.errors.greaterThanEqualPointOneLessThanEqualOneThousand"),t.isValid=!1),e.voiceRecordTimeLimit>=1&&e.voiceRecordTimeLimit<=1e3||(t.voiceRecordTimeLimit=ua.t("config.errors.greaterThanEqualOneLessThanEqualOneThousand"),t.isValid=!1),t},Sp=["dropCourseGrade","coursePassGrade","instructorCoursesLimit","studentFileSizeLimit","instructorFileSizeLimit","voiceRecordTimeLimit"],wp=Object(Mt.a)({form:"configurationForm",enableReinitialize:!0,validate:kp,destroyOnUnmount:!0})((function(e){var t=e.instructorLoggedIn,n=e.studentLoggedIn,o=e.formValues,s=void 0===o?{}:o,i=e.formErrors,c=(e.initialValues,e.changeField,e.touchField),l=e.updateConfiguration,u=e.loading,d=e.width,m=e.loadedUser,p=e.fetchUser,f=e.fetchConfig,g=e.selectedCourse,b=e.token,h=Object(We.a)().t,E=Object(a.useState)(!0),v=Object(vo.a)(E,2),y=v[0],T=v[1];Object(a.useEffect)((function(){b&&(f(b),p(b));var e=$e()("https://mernstackelearn.herokuapp.com/",{query:{token:b}});return e.on("updateConfig",(function(e){"all"===e.userType&&f(b)})),function(){e.disconnect()}}),[(g||{})._id,b]);var k=function(e){Sp.forEach((function(e){c(e)})),i.isValid?l(e,b):T(!1)};function S(e,t,n,a){return{info:e,fieldName:t,type:n,user:a}}var w=[S(h("config.privacy"),"","header"),S(h("config.hideActiveStatus"),"isHideActiveStatus","switch"),S(h("config.notificationsHeader"),"","header"),S(h("config.course"),"isCourseNotifications","switch"),S(h("config.lessons"),"isLessonNotifications","switch"),S(h("config.assignments"),"isAssignmentNotifications","switch"),S(h("config.tests"),"isTestNotifications","switch"),S(h("config.chat"),"isChatNotifications","switch"),S(h("config.emailsHeader"),"","header"),S(h("config.course"),"isCourseEmails","switch"),S(h("config.lessons"),"isLessonEmails","switch"),S(h("config.assignments"),"isAssignmentEmails","switch"),S(h("config.tests"),"isTestEmails","switch")],O=[S(h("config.privacy"),"","header"),S(h("config.hideActiveStatus"),"isHideActiveStatus","switch"),S(h("config.chatAllowedOutsideOfficehours"),"isChatAllowedOutsideOfficehours","switch"),S(h("config.sendNotificationsHeader"),"","header"),S(h("config.tests"),"isSendTestNotifications","switch"),S(h("config.lessons"),"isSendLessonNotifications","switch"),S(h("config.assignments"),"isSendAssignmentNotifications","switch"),S(h("config.course"),"isSendCourseNotifications","switch"),S(h("config.sendEmailsHeader"),"","header"),S(h("config.tests"),"isSendTestEmails","switch"),S(h("config.lessons"),"isSendLessonEmails","switch"),S(h("config.assignments"),"isSendAssignmentEmails","switch"),S(h("config.course"),"isSendCourseEmails","switch"),S(h("config.notificationsHeader"),"","header"),S(h("config.enrollRequest"),"isEnrollNotifications","switch"),S(h("config.dropCourse"),"isDropCourseNotifications","switch"),S(h("config.assignments"),"isAssignmentNotifications","switch"),S(h("config.tests"),"isTestNotifications","switch"),S(h("config.chat"),"isChatNotifications","switch"),S(h("config.newInstructorAccountNotifications"),"isNewInstructorAccountNotifications","switch","admin"),S(h("config.emailsHeader"),"","header"),S(h("config.assignments"),"isAssignmentEmails","switch"),S(h("config.tests"),"isTestEmails","switch"),S(h("config.enrollRequest"),"isEnrollEmails","switch"),S(h("config.dropCourse"),"isDropCourseEmails","switch"),S(h("config.newInstructorAccountEmails"),"isNewInstructorAccountEmails","switch","admin")],C=[S(h("config.platformConfiguration"),"","header"),S(h("config.dropCoursePenalty"),"isDropCoursePenalty","switch"),s.isDropCoursePenalty?S(h("config.dropCourseGrade")+" (%)","dropCourseGrade","numberField"):null,S(h("config.coursePassGrade")+" (%)","coursePassGrade","numberField"),S(h("config.enrollAllowedAfterDropCourse"),"isEnrollAllowedAfterDropCourse","switch"),S(h("config.instructorCoursesLimited"),"isInstructorCoursesLimit","switch"),s.isInstructorCoursesLimit?S(h("config.instructorCoursesLimit"),"instructorCoursesLimit","numberField"):null,S(h("config.approveInstructorAccounts"),"isApproveInstructorAccounts","switch"),S(h("config.approveStudentAccounts"),"isApproveStudentAccounts","switch"),S(h("config.contentBlockedCourseEnd"),"isContentBlockedCourseEnd","switch"),S(h("config.studentFileSizeLimit")+" (MB)","studentFileSizeLimit","numberField"),S(h("config.instructorFileSizeLimit")+" (MB)","instructorFileSizeLimit","numberField"),S(h("config.passwordRequiredStartTest"),"isPasswordRequiredStartTest","switch"),S(h("config.voiceRecordTimeLimit"),"voiceRecordTimeLimit","numberField")].filter((function(e){return e})).map((function(e){return Object(It.a)(Object(It.a)({},e),{},{user:"admin"})})),x=[];n&&(x=w),t&&(x=[].concat(O,Object(Vr.a)(C)));var A=!(y||i.isValid);return r.a.createElement(qe,null,r.a.createElement(Xe,{transparent:!0,active:u}),r.a.createElement("div",{style:{maxWidth:"500px",margin:d>500?"20px auto 0 auto":"40px auto 0 auto"}},r.a.createElement(si.a,{"aria-label":"simple table"},r.a.createElement(ii.a,null,x.map((function(e,t){var n;return"switch"===e.type&&(n=Ca),"textField"===e.type&&(n=ka),"numberField"===e.type&&(n=Na),r.a.createElement(li.a,{style:{marginTop:"header"===e.type?20:0},key:e.info+t},r.a.createElement(ci.a,{style:{fontSize:"header"===e.type?"1.5em":"1em"},component:"th",scope:"row"},e.info),r.a.createElement(ci.a,{align:"right"},"header"!==e.type&&r.a.createElement(ba.a,{width:80,disabled:!(m||{}).admin&&"admin"===e.user,errorBottomPosition:!0,configInput:!0,options:{label:"",disabled:!(m||{}).admin&&"admin"===e.user},name:e.fieldName,component:n,simple:!0})))})))),r.a.createElement(Js,{clicked:function(){return k(s)},isError:A},h("account.buttons.saveChanges"))))})),Op=Object(c.b)((function(e){return{formValues:Object(nt.a)("configurationForm")(e),formErrors:Object(Pt.a)("configurationForm")(e),token:e.authentication.token,userId:e.authentication.userId,notification:e.common.notification,course:e.common.selectedCourse,courses:e.common.courses,coursePanel:e.common.coursePanel,instructorLoggedIn:e.authentication.instructorLoggedIn,studentLoggedIn:e.authentication.studentLoggedIn,user:e.authentication,initialValues:e.common.configuration,loading:e.authentication.loading,loadedUser:e.authentication.loadedUser,width:e.common.width,selectedCourse:e.common.selectedCourse}}),(function(e){return Object(yo.a)({fetchUser:function(t){return e(re(t))},updateConfiguration:function(t,n){return e(function(e,t){return{type:"UPDATE_CONFIG_START",payload:{token:t,configData:e}}}(t,n))},fetchConfig:function(t){return e(he(t))},touchField:function(t){e(Object(Bt.d)("configurationForm",t))}},"fetchConfig",(function(t){return e(he(t))}))}))(wp),Cp=n(662),xp=(n(1123),n(1124),n(1125),n(1126),n(1127),n(663)),Ap=Object(d.k)(Object(c.b)((function(e){return{isAuthenticated:null!==e.authentication.token,studentLoggedIn:e.authentication.studentLoggedIn,instructorLoggedIn:e.authentication.instructorLoggedIn,adminLoggedIn:e.authentication.adminLoggedIn,loadedUser:e.authentication.loadedUser,successMessage:e.authentication.successMessage||e.studentCourse.successMessage||e.studentTest.successMessage||e.instructorCourse.successMessage||e.instructorTest.successMessage||e.instructorQuestion.successMessage||e.instructorModules.successMessage||e.instructorLesson.successMessage||e.common.successMessage,failMessage:e.authentication.failMessage||e.studentCourse.failMessage||e.studentTest.failMessage||e.instructorCourse.failMessage||e.instructorTest.failMessage||e.instructorQuestion.failMessage||e.instructorModules.failMessage||e.instructorLesson.failMessage||e.common.failMessage,token:e.authentication.token,userId:e.authentication.userId,initialPath:e.authentication.initialPath,loadedTestDataInProgress:e.studentTest.loadedTestDataInProgress,isDarkTheme:e.common.isDarkTheme}}),(function(e){return{onTryAutoSignup:function(t){return e({type:"CHECK_USER_SESSION"})},updateActivity:function(t,n,a){console.log("should update activity: ",t,n),e(fe(t,n,a))}}}))((function(e){var t=e.onTryAutoSignup,n=e.successMessage,o=e.failMessage,s=e.userId,i=e.instructorLoggedIn,c=e.studentLoggedIn,l=e.updateActivity,u=e.token,g=e.loadedTestDataInProgress,b=e.isDarkTheme;Object(a.useEffect)((function(){t(window.location.href)}),[]);var h=r.a.createElement(qe,null,r.a.createElement(bp,{successMessage:n,failMessage:o}),c&&u&&r.a.createElement(tt,null),i&&u&&r.a.createElement(et,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/verify-account/:accountType/:token",component:Pl}),r.a.createElement(d.b,{exact:!0,path:"/reset/:accountType/:token",component:_l}),r.a.createElement(d.b,{exact:!0,path:"/account",render:function(e){return r.a.createElement(Tp,e)}}),r.a.createElement(d.b,{exact:!0,path:"/instructor-panel/course/:courseId",render:function(e){return r.a.createElement(jc,e)}}),r.a.createElement(d.b,{exact:!0,path:"/student-panel/course/:courseId",render:function(e){return r.a.createElement(ll,e)}}),r.a.createElement(d.b,{exact:!0,path:"/configuration",component:Op}),r.a.createElement(d.b,{exact:!0,path:"/instructor-panel/courses",component:Eo}),r.a.createElement(d.b,{exact:!0,path:"/student-panel/courses",component:Rc}),g&&r.a.createElement(d.b,{path:"/student-panel/test-in-session",render:function(e){return r.a.createElement(Zc,{isTest:!0})}}),r.a.createElement(d.b,{exact:!0,path:"/authentication",component:wl}),r.a.createElement(d.b,{exact:!0,path:"/logout",component:Cl}),r.a.createElement(d.a,{to:"/authentication"})));return r.a.createElement(qe,null,r.a.createElement(xp.a,null,r.a.createElement("style",{type:"text/css"},b?"\n.react-date-picker__inputGroup__input, .react-datetimerange-picker__inputGroup__input, .react-datetime-picker__inputGroup__input, .react-timerange-picker__inputGroup__input {\n    color: white !important;\n  }\n  .react-date-picker__inputGroup__input option, .react-datetimerange-picker__inputGroup__input option, .react-datetime-picker__inputGroup__input option, .react-timerange-picker__inputGroup__input option {\n    color: white !important;\n    background:#424242;\n  }\n.react-datetimerange-picker__wrapper {\n    border-color:white;\n}\n\n.react-datetimerange-picker__button svg, .react-datetime-picker__button svg, .react-date-picker__button svg, .react-timerange-picker__button svg {\n    stroke: white !important;\n}\n.react-calendar {\n    background-color:#424242;\n    border:1px solid #424242;\n  }\n.react-calendar button {\n    color: white;\n}\n\n.react-calendar__tile:enabled:hover, .react-calendar__navigation button:enabled:hover, .react-calendar__navigation button:enabled:focus {\n    background-color:white;\n    color:#424242;\n}\n\n.react-calendar__navigation button[disabled] {\n    background-color:#424242;\n    color:#424242;\n}\n\n.react-date-picker__wrapper {\n    border-color:white !important;\n}\n\n.react-calendar__tile:disabled {\n    background-color:#515151;\n    color:#807c7c;\n}\n\n\n/* word document dark style */\n.pg-viewer-wrapper .document-container {\n    background:#424242;\n}\n\n\n\n\n/* -- CKEDITOR DARK THEME ------------------------------------------------------------- */\n:root {\n    /* Overrides the border radius setting in the theme. */\n    --ck-border-radius: 4px;\n\n    /* Overrides the default font size in the theme. */\n    --ck-font-size-base: 14px;\n\n    /* Helper variables to avoid duplication in the colors. */\n    --ck-custom-background: hsl(270, 1%, 29%);\n    --ck-custom-foreground: hsl(255, 3%, 18%);\n    --ck-custom-border: hsl(300, 1%, 22%);\n    --ck-custom-white: hsl(0, 0%, 100%);\n\n    /* -- Overrides generic colors. ------------------------------------------------------------- */\n\n    --ck-color-base-foreground: var(--ck-custom-background);\n    --ck-color-focus-border: hsl(208, 90%, 62%);\n    --ck-color-text: hsl(0, 0%, 98%);\n    --ck-color-shadow-drop: hsla(0, 0%, 0%, 0.2);\n    --ck-color-shadow-inner: hsla(0, 0%, 0%, 0.1);\n\n    /* -- Overrides the default .ck-button class colors. ---------------------------------------- */\n\n    --ck-color-button-default-background: var(--ck-custom-background);\n    --ck-color-button-default-hover-background: hsl(270, 1%, 22%);\n    --ck-color-button-default-active-background: hsl(270, 2%, 20%);\n    --ck-color-button-default-active-shadow: hsl(270, 2%, 23%);\n    --ck-color-button-default-disabled-background: var(--ck-custom-background);\n\n    --ck-color-button-on-background: var(--ck-custom-foreground);\n    --ck-color-button-on-hover-background: hsl(255, 4%, 16%);\n    --ck-color-button-on-active-background: hsl(255, 4%, 14%);\n    --ck-color-button-on-active-shadow: hsl(240, 3%, 19%);\n    --ck-color-button-on-disabled-background: var(--ck-custom-foreground);\n\n    --ck-color-button-action-background: hsl(168, 76%, 42%);\n    --ck-color-button-action-hover-background: hsl(168, 76%, 38%);\n    --ck-color-button-action-active-background: hsl(168, 76%, 36%);\n    --ck-color-button-action-active-shadow: hsl(168, 75%, 34%);\n    --ck-color-button-action-disabled-background: hsl(168, 76%, 42%);\n    --ck-color-button-action-text: var(--ck-custom-white);\n\n    --ck-color-button-save: hsl(120, 100%, 46%);\n    --ck-color-button-cancel: hsl(15, 100%, 56%);\n\n    /* -- Overrides the default .ck-dropdown class colors. -------------------------------------- */\n\n    --ck-color-dropdown-panel-background: var(--ck-custom-background);\n    --ck-color-dropdown-panel-border: var(--ck-custom-foreground);\n\n    /* -- Overrides the default .ck-splitbutton class colors. ----------------------------------- */\n\n    --ck-color-split-button-hover-background: var(--ck-color-button-default-hover-background);\n    --ck-color-split-button-hover-border: var(--ck-custom-foreground);\n\n    /* -- Overrides the default .ck-input class colors. ----------------------------------------- */\n\n    --ck-color-input-background: var(--ck-custom-background);\n    --ck-color-input-border: hsl(257, 3%, 43%);\n    --ck-color-input-text: hsl(0, 0%, 98%);\n    --ck-color-input-disabled-background: hsl(255, 4%, 21%);\n    --ck-color-input-disabled-border: hsl(250, 3%, 38%);\n    --ck-color-input-disabled-text: hsl(0, 0%, 78%);\n\n    /* -- Overrides the default .ck-labeled-field-view class colors. ---------------------------- */\n\n    --ck-color-labeled-field-label-background: var(--ck-custom-background);\n\n    /* -- Overrides the default .ck-list class colors. ------------------------------------------ */\n\n    --ck-color-list-background: var(--ck-custom-background);\n    --ck-color-list-button-hover-background: var(--ck-color-base-foreground);\n    --ck-color-list-button-on-background: var(--ck-color-base-active);\n    --ck-color-list-button-on-background-focus: var(--ck-color-base-active-focus);\n    --ck-color-list-button-on-text: var(--ck-color-base-background);\n\n    /* -- Overrides the default .ck-balloon-panel class colors. --------------------------------- */\n\n    --ck-color-panel-background: var(--ck-custom-background);\n    --ck-color-panel-border: var(--ck-custom-border);\n\n    /* -- Overrides the default .ck-toolbar class colors. --------------------------------------- */\n\n    --ck-color-toolbar-background: var(--ck-custom-background);\n    --ck-color-toolbar-border: var(--ck-custom-border);\n\n    /* -- Overrides the default .ck-tooltip class colors. --------------------------------------- */\n\n    --ck-color-tooltip-background: hsl(252, 7%, 14%);\n    --ck-color-tooltip-text: hsl(0, 0%, 93%);\n\n    /* -- Overrides the default colors used by the ckeditor5-image package. --------------------- */\n\n    --ck-color-image-caption-background: hsl(0, 0%, 97%);\n    --ck-color-image-caption-text: hsl(0, 0%, 20%);\n\n    /* -- Overrides the default colors used by the ckeditor5-widget package. -------------------- */\n\n    --ck-color-widget-blurred-border: hsl(0, 0%, 87%);\n    --ck-color-widget-hover-border: hsl(43, 100%, 68%);\n    --ck-color-widget-editable-focus-background: var(--ck-custom-white);\n\n    /* -- Overrides the default colors used by the ckeditor5-link package. ---------------------- */\n\n    --ck-color-link-default: hsl(190, 100%, 75%);\n\n}\n\n\n\n.ck-content {\n    color: black;\n}\n\n.ck-read-only {\n    color:white;\n}\n\n\n.react-tagsinput-input {\n    color:white;\n}\n\n.react-tagsinput {\n    background: #424242;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n":"\n.react-date-picker__inputGroup__input, .react-datetimerange-picker__inputGroup__input, .react-datetime-picker__inputGroup__input {\n  color: black !important;\n}\n\n.react-datetimerange-picker__button svg, .react-datetime-picker__button svg, .react-date-picker__button svg {\n  stroke: black !important;\n}\n\n.react-calendar {\n  border:1px solid white;\n}\n"),r.a.createElement("style",{type:"text/css"},"\n/* removes vertical scroll on word documents */\n.pg-viewer-wrapper {\n  overflow-y: hidden;\n}\n")),r.a.createElement(p.a,{utils:m.a},r.a.createElement(pp.a,{i18n:ua},r.a.createElement(f.a,{theme:b?mp:dp},u&&r.a.createElement(Cp.a,{element:document,onActive:function(){console.log("active "),l(s,u,"active")},onIdle:function(){console.log("idle "),l(s,u,"idle")},debounce:1e3,timeout:15e3}),r.a.createElement(d.c,{history:Je},r.a.createElement(up,null,h))))))}))),Fp=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Dp(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var _p=n(535),Ip=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={query:"\n            query UserLogin($email: String!, $password: String!,$userType: String!) {\n              userLogin(email: $email, password: $password, userType: $userType) {\n                token\n                userId\n                expiresIn\n                firstName\n                lastName\n                language\n                profilePicture\n                lastLogin\n                refreshTokenExpiration\n                admin\n              }\n            }\n          ",variables:{email:e.email,password:e.password,userType:e.type}};return t},jp=function(e){var t=e.formData,n=e._id;return{query:"\n           mutation CreateAccount(\n             $email: String!,\n             $firstName: String!,\n             $lastName: String!,\n             $password: String!,\n             $dob: String!,\n             $language: String!,\n             $id:ID!,\n             $accountType:String!,\n                  ) {\n             createAccount(accountInput: {\n               email: $email, \n               firstName: $firstName, \n               lastName: $lastName, \n               password: $password, \n               dob: $dob, \n               language: $language, \n               id:$id,\n               accountType:$accountType,\n              }) {\n               _id\n               email\n             }\n           }\n         ",variables:{email:t.email,firstName:t.firstName,lastName:t.lastName,password:t.password,language:t.language,dob:t.dob,langauge:t.langauge,id:n,accountType:t.type}}},Rp=function(e){var t=e.formData,n=e.profilePictureKey,a=e.profilePictureFile,r=e.formattedDocuments;return{query:"\n           mutation UpdateAccount(\n             $email: String!, \n             $firstName: String!, \n             $lastName: String!, \n             $newPassword: String, \n             $currentPassword: String, \n             $dob: String!, \n             $language: String!, \n             $profilePicture: String,\n             $accountType: String!\n             ) {\n             updateAccount(accountInput: {\n               email: $email, \n               firstName: $firstName, \n               lastName: $lastName, \n               newPassword: $newPassword, \n               currentPassword: $currentPassword, \n               dob: $dob, \n               language: $language, \n               profilePicture: $profilePicture, \n               accountType: $accountType\n               documents: [".concat(r,"]\n              })\n           }\n         "),variables:{email:t.email,firstName:t.firstName,lastName:t.lastName,currentPassword:t.currentPassword,newPassword:t.newPassword,dob:t.dob,language:t.language,accountType:t.accountType,profilePicture:a instanceof File?n:a}}},Np=function(e,t){return{query:"\n        mutation VerifyAccount($password: String!, $token: String!) {\n          verifyAccount(password: $password, token: $token){\n            token\n            userId\n            expiresIn\n            firstName\n            lastName\n            language\n            refreshTokenExpiration\n          }\n        }\n      ",variables:{password:e,token:t}}},Lp=function(e,t){return{query:"\n        mutation ResendVerificationEmail($email: String!, $accountType: String!) {\n          resendVerificationEmail(email:$email,accountType:$accountType)\n        }\n      ",variables:{email:e,accountType:t}}},Pp=function(e,t){return{query:"\n        mutation PasswordResetInitialize($email: String!, $accountType: String!) {\n          passwordResetInitialize(passwordResetInitializeInput: {email: $email, accountType: $accountType}) {\n            token\n          }\n        }\n      ",variables:{email:e,accountType:t}}},Bp=function(e,t,n){return{query:"\n        mutation PasswordReset($password: String!, $confirmPassword: String!, $accountType: String!, $token: String!) {\n          passwordReset(passwordResetInput: {password: $password, confirmPassword: $confirmPassword, accountType: $accountType, token: $token})\n        }\n      ",variables:{password:e.password,confirmPassword:e.confirmPassword,token:t,accountType:n}}},Mp=Pa.a.mark(of),qp=Pa.a.mark(sf),Up=Pa.a.mark(cf),Qp=Pa.a.mark(lf),Hp=Pa.a.mark(uf),Gp=Pa.a.mark(df),Wp=Pa.a.mark(mf),zp=Pa.a.mark(pf),Vp=Pa.a.mark(ff),$p=Pa.a.mark(gf),Yp=Pa.a.mark(bf),Jp=Pa.a.mark(hf),Kp=Pa.a.mark(Ef),Zp=Pa.a.mark(vf),Xp=Pa.a.mark(yf),ef=Pa.a.mark(Tf),tf=Pa.a.mark(kf),nf=Pa.a.mark(Sf),af=Pa.a.mark(wf),rf=Pa.a.mark(Of);function of(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,E,v,y;return Pa.a.wrap((function(T){for(;;)switch(T.prev=T.next){case 0:return t=e.payload,n=t.formData,a=Ip(n),r=localStorage.getItem("theme"),T.prev=4,T.next=7,Object(lu.b)(uu,a);case 7:if(o=T.sent,console.log("Login response",o),(i=o.data.errors)&&(s=i[0].message),!i||"wrongPassword"!==s){T.next=14;break}return T.next=14,Object(lu.e)(Object(Bt.e)("authenticationForm",{password:ua.t("auth.errors.wrongPassword"),asyncError:!0}));case 14:if(!i||"studentNoAccount"!==s&&"instructorNoAccount"!==s){T.next=18;break}return s=i[0].message,T.next=18,Object(lu.e)(Object(Bt.e)("authenticationForm",{email:ua.t("auth.errors.".concat(s)),asyncError:!0}));case 18:if(!i||"notVerifiedCheckEmail"!==s){T.next=22;break}return s=i[0].message,T.next=22,Object(lu.e)(Object(Bt.e)("authenticationForm",{type:ua.t("auth.errors.notVerifiedCheckEmail"),asyncError:!0}));case 22:if(!i){T.next=26;break}return T.next=25,Object(lu.e)(ce());case 25:return T.abrupt("return");case 26:return c=o.data.data.userLogin,l=c.token,u=c.userId,d=c.expiresIn,m=c.firstName,p=c.lastName,f=n.type,g=c.profilePicture,b=c.language,E=c.refreshTokenExpiration,v=c.lastLogin,T.next=39,Object(lu.e)(Ie(l));case 39:return T.next=41,Object(lu.e)(ye(l));case 41:if("instructor"!==f){T.next=44;break}return T.next=44,Object(lu.e)(L(l));case 44:if("student"!==f){T.next=47;break}return T.next=47,Object(lu.e)(h(l));case 47:return T.next=49,Object(lu.e)(he(l));case 49:return T.next=51,Object(lu.e)(re(l));case 51:return T.next=53,Object(lu.e)(ie({token:l,userId:u,userType:f,firstName:m,lastName:p,profilePicture:g,expirationDate:d,refreshTokenExpiration:E,lastLogin:v,language:b}));case 53:if(localStorage.setItem("token",l),localStorage.setItem("userType",f),localStorage.setItem("userId",u),localStorage.setItem("userFirstName",m),localStorage.setItem("userLastName",p),localStorage.setItem("profilePicture",g),localStorage.setItem("i18nextLng",b),E&&localStorage.setItem("refreshTokenExpiration",E),"instructor"===f&&Je.push("/instructor-panel/courses"),"student"===f&&Je.push("/student-panel/courses"),"dark"!==r){T.next=66;break}return T.next=66,Object(lu.e)(Oe(r));case 66:if("light"!==r){T.next=71;break}return T.next=69,Object(lu.e)(Oe(r));case 69:T.next=73;break;case 71:return T.next=73,Object(lu.e)(Oe("dark"));case 73:T.next=85;break;case 75:return T.prev=75,T.t0=T.catch(4),console.log("e: ",T.t0),y=ua.t("alerts.auth.loginFail"),T.next=81,Object(lu.e)(ce(y));case 81:return T.next=83,Object(lu.c)(3e3);case 83:return T.next=85,Object(lu.e)(Fe());case 85:case"end":return T.stop()}}),Mp,null,[[4,75]])}function sf(e){var t,n,a,r,o,s;return Pa.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.token,n={query:"\n            query User {\n              user {\n                _id\n                dob\n                firstName\n                lastName\n                language\n                email\n                profilePicture\n                admin\n                documents {\n                  document\n                  documentType\n                }\n              }\n            }\n          "},i.prev=2,i.next=5,Object(lu.b)(uu,n,t);case 5:if(a=i.sent,console.log("Fetch user response",a),!a.data.errors){i.next=9;break}throw new Error("Failed to get te courses");case 9:return r=a.data.data.user,o=is(r.profilePicture),i.next=13,Object(lu.e)(oe(Object(It.a)(Object(It.a)({},r),{},{numericalId:r._id.replace(/\D/g,""),dob:new Date(r.dob),loadedProfilePicture:r.profilePicture,profilePicture:o,documents:r.documents.map((function(e){return{documentType:e.documentType,document:is(e.document),loadedDocument:e.document}}))})));case 13:i.next=25;break;case 15:return i.prev=15,i.t0=i.catch(2),console.log("e: ",i.t0),s=ua.t("alerts.auth.fetchUserFail"),i.next=21,Object(lu.e)(se(s));case 21:return i.next=23,Object(lu.c)(3e3);case 23:return i.next=25,Object(lu.e)(Fe());case 25:case"end":return i.stop()}}),qp,null,[[2,15]])}function cf(){var e,t,n,a,r,o,s,i;return Pa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=localStorage.getItem("token"),t=localStorage.getItem("theme"),c.prev=2,e){c.next=8;break}return c.next=6,Object(lu.e)(pe());case 6:c.next=45;break;case 8:if(!((n=new Date(localStorage.getItem("expirationDate"))).getTime()<=Date.now())){c.next=14;break}return c.next=12,Object(lu.e)(pe());case 12:c.next=45;break;case 14:return a=localStorage.getItem("userFirstName"),r=localStorage.getItem("userLastName"),o=localStorage.getItem("userId"),s=localStorage.getItem("userType"),i=localStorage.getItem("profilePicture"),c.next=21,Object(lu.e)(Ie(e));case 21:return c.next=23,Object(lu.e)(ye(e));case 23:if("instructor"!==s){c.next=26;break}return c.next=26,Object(lu.e)(L(e));case 26:if("student"!==s){c.next=29;break}return c.next=29,Object(lu.e)(h(e));case 29:return c.next=31,Object(lu.e)(he(e));case 31:return c.next=33,Object(lu.e)(re(e));case 33:return c.next=35,Object(lu.e)(ie({token:e,userId:o,userType:s,firstName:a,lastName:r,profilePicture:i,expirationDate:n}));case 35:if("dark"!==t){c.next=38;break}return c.next=38,Object(lu.e)(Oe(t));case 38:if("light"!==t){c.next=43;break}return c.next=41,Object(lu.e)(Oe(t));case 41:c.next=45;break;case 43:return c.next=45,Object(lu.e)(Oe("dark"));case 45:c.next=50;break;case 47:c.prev=47,c.t0=c.catch(2),console.log("e: ",c.t0);case 50:case"end":return c.stop()}}),Up,null,[[2,47]])}function lf(e){var t,n,a,r,o,s,i,c,l;return Pa.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.formData,a=(new lo.a.ObjectId).toHexString(),u.prev=3,r=jp({formData:n,_id:a}),u.next=7,Object(lu.b)(uu,r);case 7:if(o=u.sent,(s=o.data.errors)&&(i=i=s[0].data[0].message),!s||"emailTaken"!==i){u.next=18;break}return u.next=13,Object(lu.e)(Object(Bt.e)("authenticationForm",{email:ua.t("auth.errors.emailTaken"),asyncError:!0}));case 13:return u.next=15,Object(lu.e)(ee());case 15:return u.abrupt("return");case 18:if(!o.data.errors){u.next=20;break}throw new Error("Creating the account failed");case 20:return c=ua.t("alerts.auth.accountCreatedSuccess"),u.next=23,Object(lu.e)({type:"CREATE_ACCOUNT_SUCCESS",message:c});case 23:return u.next=25,Object(lu.e)(X());case 25:return u.next=27,Object(lu.e)(Object(Bt.b)("authenticationForm"));case 27:return u.next=29,Object(lu.e)(de(1));case 29:return u.next=31,Object(lu.c)(6e3);case 31:return u.next=33,Object(lu.e)(Fe());case 33:u.next=45;break;case 35:return u.prev=35,u.t0=u.catch(3),console.log("Error creating account: ",u.t0),l=ua.t("alerts.auth.accountCreatedFail"),u.next=41,Object(lu.e)(ee(l));case 41:return u.next=43,Object(lu.c)(3e3);case 43:return u.next=45,Object(lu.e)(Fe());case 45:case"end":return u.stop()}}),Qp,null,[[3,35]])}function uf(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E,v;return Pa.a.wrap((function(y){for(;;)switch(y.prev=y.next){case 0:return t=e.payload,n=t.formData,a=t.token,r=t.filesToDelete,o=n.profilePicture,s="users/".concat(n._id,"/profilePicture"),i=Qr(o,s),c="users/".concat(n._id,"/documents"),l=(n.documents||[]).map((function(e){var t;return t=e.document instanceof File?Qr(e.document,c):uo(e.document),Object(It.a)(Object(It.a)({},e),{},{key:t})})),u="",l.forEach((function(e,t){u+='{ \n                        document: "'.concat(l[t].key||"",'", \n                        documentType: "').concat(l[t].documentType,'",\n                        }')})),y.prev=11,d=Rp({formData:n,profilePictureKey:i,profilePictureFile:o,formattedDocuments:u}),y.next=15,Object(lu.b)(uu,d,a);case 15:if(m=y.sent,console.log("Update account response: ",m),(p=m.data.errors)&&(f=p[0].data[0].message),console.log("errorMessage",f),!p||"wrongPassword"!==f){y.next=28;break}return y.next=23,Object(lu.e)(Object(Bt.e)("accountForm",{currentPassword:ua.t("auth.errors.wrongPassword"),asyncError:!0,isValid:!1}));case 23:return y.next=25,Object(lu.e)(te());case 25:return y.abrupt("return");case 28:if(!p||"emailTaken"!==f){y.next=36;break}return y.next=31,Object(lu.e)(Object(Bt.e)("accountForm",{email:ua.t("auth.errors.emailTaken"),isValid:!1,asyncError:!0}));case 31:return y.next=33,Object(lu.e)(te());case 33:return y.abrupt("return");case 36:if(!m.data.errors){y.next=38;break}throw new Error("Updating account failed");case 38:if(!((r||[]).length>0)){y.next=41;break}return y.next=41,Object(lu.e)(ge(r,a));case 41:Je.push("/".concat(n.accountType,"-panel/courses")),y.next=55;break;case 44:return y.prev=44,y.t0=y.catch(11),console.log("Error updating account: ",y.t0),g=ua.t("alerts.auth.updatedAccountFail"),y.next=50,Object(lu.e)(te(g));case 50:return y.next=52,Object(lu.c)(3e3);case 52:return y.next=54,Object(lu.e)(Fe());case 54:return y.abrupt("return");case 55:if(!(n.profilePicture instanceof File)){y.next=72;break}return y.prev=56,y.next=59,Object(lu.b)(Hr,o,i,a);case 59:y.next=72;break;case 61:return y.prev=61,y.t1=y.catch(56),console.log("Error uploading profile picture: ",y.t1),b=ua.t("alerts.auth.uploadingPictureFail"),y.next=67,Object(lu.e)(te(b));case 67:return y.next=69,Object(lu.c)(3e3);case 69:return y.next=71,Object(lu.e)(Fe());case 71:return y.abrupt("return");case 72:y.prev=72,y.t2=Pa.a.keys(l);case 74:if((y.t3=y.t2()).done){y.next=83;break}if(h=y.t3.value,!l.hasOwnProperty(h)){y.next=81;break}if(!(l[h].document instanceof File)){y.next=81;break}return y.next=80,Object(lu.b)(Hr,l[h].document,l[h].key,a);case 80:return y.abrupt("continue",74);case 81:y.next=74;break;case 83:y.next=96;break;case 85:return y.prev=85,y.t4=y.catch(72),console.log("Error uploading account documents: ",y.t4),E=ua.t("alerts.auth.uploadingDocumentsFail"),y.next=91,Object(lu.e)(te(E));case 91:return y.next=93,Object(lu.c)(3e3);case 93:return y.next=95,Object(lu.e)(Fe());case 95:return y.abrupt("return");case 96:return v=ua.t("alerts.auth.updatedAccountSuccess"),y.next=99,Object(lu.e)({type:"UPDATE_ACCOUNT_SUCCESS",message:v});case 99:return y.next=101,Object(lu.c)(3e3);case 101:return y.next=103,Object(lu.e)(Fe());case 103:return y.next=105,Object(lu.e)(re(a));case 105:case"end":return y.stop()}}),Hp,null,[[11,44],[56,61],[72,85]])}function df(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h;return Pa.a.wrap((function(E){for(;;)switch(E.prev=E.next){case 0:return t=e.payload,n=t.password,a=t.token,r=t.userType,o=Np(n,a),E.prev=3,E.next=6,Object(lu.b)(uu,o);case 6:if(s=E.sent,console.log("Verify account response",s),(i=s.data.errors)&&i[0].message,!i||"wrongPassword"!==i[0].message){E.next=17;break}return i[0].message,E.next=14,Object(lu.e)(Object(Bt.e)("verifyAccount",{password:ua.t("auth.errors.wrongPassword")}));case 14:return E.next=16,Object(lu.e)(ne());case 16:return E.abrupt("return");case 17:if(!s.data.errors){E.next=19;break}throw new Error("Failed to verify account");case 19:return c=ua.t("alerts.auth.accountVerifySuccess"),E.next=22,Object(lu.e)({type:"ACCOUNT_VERIFICATION_SUCCESS",message:c});case 22:if(l=s.data.data.verifyAccount,u=l.token,d=l.userId,m=l.expiresIn,p=l.firstName,f=l.lastName,g=l.language,b=l.refreshTokenExpiration,"instructor"!==r){E.next=33;break}return E.next=33,Object(lu.e)(L(u));case 33:if("student"!==r){E.next=36;break}return E.next=36,Object(lu.e)(Ie(u));case 36:return E.next=38,Object(lu.e)(ye(u));case 38:return E.next=40,Object(lu.e)(he(u));case 40:return E.next=42,Object(lu.e)(re(u));case 42:return E.next=44,Object(lu.e)(ie({token:u,userId:d,userType:r,firstName:p,lastName:f,expirationDate:m,refreshTokenExpiration:b,language:g}));case 44:return"instructor"===r&&Je.push("/instructor-panel/courses"),"student"===r&&Je.push("/student-panel/courses"),E.next=48,Object(lu.c)(3e3);case 48:return E.next=50,Object(lu.e)(Fe());case 50:E.next=62;break;case 52:return E.prev=52,E.t0=E.catch(3),console.log("Error verifying the account"),h=ua.t("alerts.auth.accountVerifyFail"),E.next=58,Object(lu.e)(ne(h));case 58:return E.next=60,Object(lu.c)(3e3);case 60:return E.next=62,Object(lu.e)(Fe());case 62:case"end":return E.stop()}}),Gp,null,[[3,52]])}function mf(e){var t,n,a,r,o,s,i;return Pa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.email,a=t.accountType,r=Lp(n,a),c.prev=3,c.next=6,Object(lu.b)(uu,r);case 6:if(o=c.sent,console.log("Resend e-mail verification response",o),!o.data.errors){c.next=10;break}throw new Error("Failed to send a verification e-mail");case 10:return s=ua.t("alerts.auth.verificationLinkSentSuccess"),c.next=13,Object(lu.e)({type:"RESEND_EMAIL_VERIFICATION_SUCCESS",message:s});case 13:return c.next=15,Object(lu.c)(3e3);case 15:return c.next=17,Object(lu.e)(Fe());case 17:c.next=29;break;case 19:return c.prev=19,c.t0=c.catch(3),console.log("Error sending the verification e-mail"),i=ua.t("alerts.auth.verificationLinkSentFail"),c.next=25,Object(lu.e)(ae(i));case 25:return c.next=27,Object(lu.c)(3e3);case 27:return c.next=29,Object(lu.e)(Fe());case 29:case"end":return c.stop()}}),Wp,null,[[3,19]])}function pf(e){var t,n,a,r,o,s,i,c,l,u;return Pa.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,n=t.authData,a=n.email,r=n.type,o=Pp(a,r),d.prev=3,d.next=6,Object(lu.b)(uu,o);case 6:if(s=d.sent,console.log("Send password reset link response: ",s),(c=s.data.errors)&&(i=c[0].message),!c||"studentNoAccount"!==i&&"instructorNoAccount"!==i){d.next=17;break}return i=c[0].message,d.next=14,Object(lu.e)(Object(Bt.e)("authenticationForm",{email:ua.t("auth.errors.".concat(i)),asyncError:!0}));case 14:return d.next=16,Object(lu.e)(le());case 16:return d.abrupt("return");case 17:if(!s.data.errors){d.next=19;break}throw new Error("Failed to initialize password reset");case 19:return l=ua.t("alerts.auth.passwordResetLinkSentSuccess"),d.next=22,Object(lu.e)({type:"PASSWORD_RESET_LINK_SUCCESS",message:l});case 22:return d.next=24,Object(lu.e)(X(null,"signin"));case 24:return d.next=26,Object(lu.e)(Object(Bt.c)("authenticationForm"));case 26:return d.next=28,Object(lu.c)(3e3);case 28:return d.next=30,Object(lu.e)(Fe());case 30:d.next=42;break;case 32:return d.prev=32,d.t0=d.catch(3),console.log("Error sending password reset link"),u=ua.t("alerts.auth.passwordResetLinkSentFail"),d.next=38,Object(lu.e)(le(u));case 38:return d.next=40,Object(lu.c)(3e3);case 40:return d.next=42,Object(lu.e)(Fe());case 42:case"end":return d.stop()}}),zp,null,[[3,32]])}function ff(e){var t,n,a,r,o,s,i,c;return Pa.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.authData,a=t.token,r=t.accountType,o=Bp(n,a,r),l.prev=3,l.next=6,Object(lu.b)(uu,o);case 6:if(s=l.sent,console.log("Change password response",s),!s.data.errors){l.next=10;break}throw new Error("Failed to set a new password");case 10:return i=ua.t("alerts.auth.passwordChangeSuccess"),l.next=13,Object(lu.e)({type:"CHANGE_PASSWORD_SUCCESS",message:i});case 13:return l.next=15,Object(lu.e)(Object(Bt.c)("passwordReset"));case 15:return Je.push("/authentication"),l.next=18,Object(lu.c)(3e3);case 18:return l.next=20,Object(lu.e)(Fe());case 20:l.next=32;break;case 22:return l.prev=22,l.t0=l.catch(3),console.log("Error changing password"),c=ua.t("alerts.auth.passwordChangeFail"),l.next=28,Object(lu.e)(ue(c));case 28:return l.next=30,Object(lu.c)(3e3);case 30:return l.next=32,Object(lu.e)(Fe());case 32:case"end":return l.stop()}}),Vp,null,[[3,22]])}function gf(e){var t,n,a,r,o;return Pa.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.token,a={query:"\n        mutation refreshToken {\n          refreshToken {\n            token\n            expiresIn\n          }\n        }\n      "},s.prev=3,s.next=6,Object(lu.b)(uu,a,n);case 6:if(r=s.sent,console.log("Refresh session response",r),o=r.data.data.refreshToken,!r.data.errors){s.next=11;break}throw new Error("Failed to refresh session");case 11:return s.next=13,Object(lu.e)({type:"REFRESH_TOKEN_SUCCESS",authData:{token:"expired"===o.token?"":o.token,expirationDate:"same"===o.expiresIn?"":o.expiresIn}});case 13:return s.next=15,Object(lu.e)(De("off"));case 15:s.next=27;break;case 17:return s.prev=17,s.t0=s.catch(3),console.log("Error refreshing the token"),ua.t("alerts.auth.extendingSessionFail"),s.next=23,Object(lu.e)({type:"REFRESH_TOKEN_FAIL",message:void 0});case 23:return s.next=25,Object(lu.c)(3e3);case 25:return s.next=27,Object(lu.e)(Fe());case 27:case"end":return s.stop()}}),$p,null,[[3,17]])}function bf(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("AUTHENTICATION_START",of);case 2:case"end":return e.stop()}}),Yp)}function hf(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("CHECK_USER_SESSION",cf);case 2:case"end":return e.stop()}}),Jp)}function Ef(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("FETCH_USER_START",sf);case 2:case"end":return e.stop()}}),Kp)}function vf(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("CREATE_ACCOUNT_START",lf);case 2:case"end":return e.stop()}}),Zp)}function yf(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("PASSWORD_RESET_LINK_START",pf);case 2:case"end":return e.stop()}}),Xp)}function Tf(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("UPDATE_ACCOUNT_START",uf);case 2:case"end":return e.stop()}}),ef)}function kf(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("ACCOUNT_VERIFICATION_START",df);case 2:case"end":return e.stop()}}),tf)}function Sf(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("RESEND_EMAIL_VERIFICATION_START",mf);case 2:case"end":return e.stop()}}),nf)}function wf(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("CHANGE_PASSWORD_START",ff);case 2:case"end":return e.stop()}}),af)}function Of(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("REFRESH_TOKEN_START",gf);case 2:case"end":return e.stop()}}),rf)}var Cf=[Object(lu.d)(bf),Object(lu.d)(hf),Object(lu.d)(Ef),Object(lu.d)(vf),Object(lu.d)(yf),Object(lu.d)(Tf),Object(lu.d)(kf),Object(lu.d)(Sf),Object(lu.d)(wf),Object(lu.d)(Of)],xf=function(e,t){return{query:"mutation EnrollRequest($studentId: ID!, $courseId: ID!)  {\n                 enrollRequest(studentId: $studentId, courseId: $courseId) \n               }\n             ",variables:{studentId:e,courseId:t}}},Af=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={query:"mutation EnrollDeny($studentId: ID!, $courseId: ID!, $reason: String, $allowResubmission: Boolean!)  {\n                 enrollDeny(studentId: $studentId, courseId: $courseId, reason: $reason, allowResubmission: $allowResubmission) \n               }\n             ",variables:{studentId:e,courseId:t,reason:n,allowResubmission:a}};return r},Ff=function(e,t){return{query:"\n               mutation DropCourse ($studentId: ID!, $courseId: ID!)  {\n                 dropCourse(studentId: $studentId, courseId: $courseId) {\n                  coursesEnrolled\n                  _id\n                  firstName\n                  lastName\n                 }\n               }\n             ",variables:{studentId:e,courseId:t}}},Df=Pa.a.mark(Bf),_f=Pa.a.mark(Mf),If=Pa.a.mark(qf),jf=Pa.a.mark(Uf),Rf=Pa.a.mark(Qf),Nf=Pa.a.mark(Hf),Lf=Pa.a.mark(Gf),Pf=Pa.a.mark(Wf);function Bf(e){var t,n,a,r,o,s,i,c;return Pa.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.student,a=t.course,r=t.token,o=xf(n,a),l.prev=2,l.next=5,Object(lu.b)(uu,o,r);case 5:if(s=l.sent,console.log("Enroll request response: ",s),!s.data.errors){l.next=9;break}throw new Error("Enroll request failed!");case 9:return l.next=11,Object(lu.e)(Ie(r));case 11:return i=ua.t("alerts.course.requestSentSuccess"),l.next=14,Object(lu.e)({type:"ENROLL_REQUEST_SUCCESS",message:i});case 14:return l.next=16,Object(lu.e)({type:"CLOSE_MODAL"});case 16:return l.next=18,Object(lu.c)(3e3);case 18:return l.next=20,Object(lu.e)(Fe());case 20:l.next=34;break;case 22:return l.prev=22,l.t0=l.catch(2),console.log(l.t0),c=ua.t("alerts.course.requestSentFailed"),l.next=28,Object(lu.e)(T(c));case 28:return l.next=30,Object(lu.e)({type:"CLOSE_MODAL"});case 30:return l.next=32,Object(lu.c)(3e3);case 32:return l.next=34,Object(lu.e)(Fe());case 34:case"end":return l.stop()}}),Df,null,[[2,22]])}function Mf(e){var t,n,a,r,o,s,i;return Pa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.studentId,a=t.courseId,r=t.token,console.log("studentId, courseId, token",n,a,r),o={query:"mutation EnrollApprove($studentId: ID!, $courseId: ID!)  {\n                 enrollApprove(studentId: $studentId, courseId: $courseId) \n               }\n             ",variables:{studentId:n,courseId:a}},c.prev=3,c.next=6,Object(lu.b)(uu,o,r);case 6:if(s=c.sent,console.log("Enroll student approved response: ",s),!s.data.errors){c.next=10;break}throw new Error("Approving enrollment of the student failed!");case 10:return c.next=12,Object(lu.e)(Ie(r));case 12:return c.next=14,Object(lu.e)(Ne(a,r));case 14:return c.next=16,Object(lu.e)({type:"ENROLL_COURSE_SUCCESS",message:void 0});case 16:return c.next=18,Object(lu.e)({type:"CLOSE_MODAL"});case 18:return c.next=20,Object(lu.e)(xe(0));case 20:return c.next=22,Object(lu.c)(3e3);case 22:return c.next=24,Object(lu.e)(Fe());case 24:c.next=38;break;case 26:return c.prev=26,c.t0=c.catch(3),console.log(c.t0),i=ua.t("alerts.course.enrollmentApproveFail"),c.next=32,Object(lu.e)(S(i));case 32:return c.next=34,Object(lu.e)({type:"CLOSE_MODAL"});case 34:return c.next=36,Object(lu.c)(3e3);case 36:return c.next=38,Object(lu.e)(Fe());case 38:case"end":return c.stop()}}),_f,null,[[3,26]])}function qf(e){var t,n,a,r,o,s,i,c,l,u;return Pa.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,n=t.student,a=t.course,r=t.token,o=t.reason,s=t.allowResubmission,i=Af(n,a,o,s),d.prev=2,d.next=5,Object(lu.b)(uu,i,r);case 5:if(c=d.sent,console.log("Enroll course response: ",c),!c.data.errors){d.next=9;break}throw new Error("Enrolling in the course failed!");case 9:return d.next=11,Object(lu.e)(Ie(r));case 11:return d.next=13,Object(lu.e)(Ne(a,r));case 13:return l=ua.t("alerts.course.studentDenySuccess"),d.next=16,Object(lu.e)({type:"ENROLL_DENY_SUCCESS",message:l});case 16:return d.next=18,Object(lu.e)({type:"CLOSE_MODAL"});case 18:return d.next=20,Object(lu.e)(xe(1));case 20:return d.next=22,Object(lu.c)(3e3);case 22:return d.next=24,Object(lu.e)(Fe());case 24:d.next=36;break;case 26:return d.prev=26,d.t0=d.catch(2),console.log(d.t0),u=ua.t("alerts.course.studentDenyFail"),d.next=32,Object(lu.e)(O(u));case 32:return d.next=34,Object(lu.c)(3e3);case 34:return d.next=36,Object(lu.e)(Fe());case 36:case"end":return d.stop()}}),If,null,[[2,26]])}function Uf(e){var t,n,a,r,o,s,i,c;return Pa.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.student,a=t.course,r=t.token,o=Ff(n,a),l.prev=2,l.next=5,Object(lu.b)(uu,o,r);case 5:if(s=l.sent,console.log("Drop course response: ",s),!s.data.errors){l.next=9;break}throw new Error("Dropping the course failed!");case 9:return l.next=11,Object(lu.e)(Ie(r));case 11:return i=ua.t("alerts.course.courseDropSuccess"),l.next=14,Object(lu.e)({type:"DROP_COURSE_SUCCESS",message:i});case 14:return l.next=16,Object(lu.e)({type:"CLOSE_MODAL"});case 16:return l.next=18,Object(lu.c)(3e3);case 18:return l.next=20,Object(lu.e)(Fe());case 20:l.next=33;break;case 22:return l.prev=22,l.t0=l.catch(2),c=ua.t("alerts.course.courseDropFail"),l.next=27,Object(lu.e)(C(c));case 27:return l.next=29,Object(lu.e)({type:"CLOSE_MODAL"});case 29:return l.next=31,Object(lu.c)(3e3);case 31:return l.next=33,Object(lu.e)(Fe());case 33:case"end":return l.stop()}}),jf,null,[[2,22]])}function Qf(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("ENROLL_REQUEST_START",Bf);case 2:case"end":return e.stop()}}),Rf)}function Hf(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("ENROLL_COURSE_START",Mf);case 2:case"end":return e.stop()}}),Nf)}function Gf(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("ENROLL_DENY_START",qf);case 2:case"end":return e.stop()}}),Lf)}function Wf(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("DROP_COURSE_START",Uf);case 2:case"end":return e.stop()}}),Pf)}var zf=[Object(lu.d)(Qf),Object(lu.d)(Hf),Object(lu.d)(Gf),Object(lu.d)(Wf)],Vf=function(e,t,n,a,r,o,s){return{query:"\n            mutation SubmitTest(\n              $studentId: ID!, \n              $testId:ID!\n              $testClosed:Boolean!\n              $lastSavedOn:String\n              $submittedOn:String\n              $graded:Boolean!\n              $gradingInProgress:Boolean!\n              $grade: Float\n              $gradeOverride: Boolean\n              $gradeAdjustmentExplanation: String\n              $marking: Boolean!\n              ) {       \n              submitTest(\n                studentId:$studentId,\n                testId:$testId,\n                testClosed: $testClosed,\n                lastSavedOn: $lastSavedOn,\n                submittedOn: $submittedOn,\n                graded: $graded,\n                grade: $grade,\n                gradeAdjustmentExplanation: $gradeAdjustmentExplanation,\n                gradeOverride: $gradeOverride,\n                gradingInProgress: $gradingInProgress,\n                marking: $marking,\n                multipleChoiceAnswersInput: [".concat(a,"],\n                essayAnswersInput: [").concat(r,"],\n                speakingAnswersInput: [").concat(o,"],\n                fillBlankAnswersInput: [").concat(s,"],\n                )\n            }\n          "),variables:{testId:t._id,studentId:e,testClosed:n,gradingInProgress:!1,graded:!1,grade:null,gradeAdjustmentExplanation:null,gradeOverride:!1,marking:!1,lastSavedOn:n?null:Date.now().toString(),submittedOn:n?Date.now().toString():null}}},$f=function(e,t,n){var a="";((t||{}).multipleChoiceQuestions||[]).map((function(t,n){var r;((r=((e||{}).mcQuestions||[])[n]?((e||{}).mcQuestions||[])[n]:t.answerOptions.map((function(e){return""})))||[]).forEach((function(e){return e.replace(/"/g,"'")})),a+="{ questionNumber: ".concat(n+1," , answers: ").concat(JSON.stringify(r)," }")}));var r="";((t||{}).essayQuestions||[]).map((function(t,n){var a=((e||{}).essayQuestions||[])[n];r+="{ questionNumber: ".concat(n+1,' , answer: "').concat((a||"").replace(/"/g,"'"),'" }')}));var o="";((t||{}).speakingQuestions||[]).map((function(e,t){o+="{ questionNumber: ".concat(t+1," , answer: ").concat(JSON.stringify(n[t]||"")," }")}));var s="";return(((e||{}).fillBlankQuestions||{}).answers||[]).map((function(e,t){s+="{ questionNumber: ".concat(t+1,' , answer: "').concat((e||"").replace(/"/g,"'").trim(),'" }')})),{formattedMultipleChoiceAnswers:a,formattedEssayAnswers:r,formattedSpeakingAnswers:o,formattedFillBlankAnswers:s}},Yf=Pa.a.mark(Xf),Jf=Pa.a.mark(eg),Kf=Pa.a.mark(tg),Zf=Pa.a.mark(ng);function Xf(e){var t,n,a,r,o,s,i;return Pa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.token,n={query:"\n               query FetchTestResults {\n                testResults {\n                  testResults {\n                    _id\n                    test\n                    course\n                    closed\n                    latePenalty\n                    graded\n                    gradingInProgress\n                    grade\n                    gradeOverride\n                    isExcused\n                    gradeAdjustmentExplanation\n                    multiplechoiceSection {\n                      grade\n                      answers {\n                        questionNumber\n                        answers\n                        additionalNotes\n                        marks\n                      }\n                    }\n                    essaySection {\n                      grade\n                      answers {\n                        questionNumber\n                        answer\n                        additionalNotes\n                        marks\n                        instructorCorrection\n                        allowCorrection\n                      }\n                    }\n                    speakingSection {\n                      grade\n                      answers {\n                        questionNumber\n                        answer\n                        additionalNotes\n                        marks\n                        feedbackAudio\n                      }\n                    }\n                    fillInBlanksSection {\n                      grade\n                      answers {\n                        questionNumber\n                        answer\n                        additionalNotes\n                        marks\n                      }\n                    }\n                  }\n                  testInSession {\n                    test\n                    startTime\n                    endTime\n                  }\n                  assignmentsInSession {\n                      assignment\n                      startTime\n                    }\n                 }\n               }\n             "},c.prev=2,c.next=5,Object(lu.b)(uu,n,t);case 5:if(a=c.sent,console.log("Getting student test results response",a),!a.data.errors){c.next=9;break}throw new Error("Getting the test results failed!");case 9:return r=a.data.data,c.next=12,Object(lu.e)({type:"FETCH_TEST_RESULTS_SUCCESS",testResults:(r||[]).testResults});case 12:if(o=(((r||{}).testResults||{}).testInSession||{}).test,s=(((r||{}).testResults||{}).testResults||[]).find((function(e){return!1===e.closed&&e.test===o})),!o){c.next=17;break}return c.next=17,Object(lu.e)(Pe(o,!0,t,s));case 17:c.next=29;break;case 19:return c.prev=19,c.t0=c.catch(2),console.log(c.t0),i=ua.t("alerts.test.fetchTestResultsFail"),c.next=25,Object(lu.e)({type:"FETCH_TEST_RESULTS_FAIL",message:i});case 25:return c.next=27,Object(lu.c)(3e3);case 27:return c.next=29,Object(lu.e)(Fe());case 29:case"end":return c.stop()}}),Yf,null,[[2,19]])}function eg(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,y,T,k,S,w,O,C;return Pa.a.wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return t=e.payload,n=t.formValues,a=t.token,r=t.studentId,o=t.testClosed,s=t.test,i=t.courseId,c=t.filesToDelete,l=t.exitAssignment,u=t.filePath,d=((s||{}).speakingQuestions||[]).map((function(e,t){return(((n||{}).speakingQuestions||[])[t]||{}).audioFile})),m=d.map((function(e,t){var n;return n=e instanceof File?Qr(e,u):uo(e),e||(n=null),n})),p=$f(n,s,m),f=p.formattedMultipleChoiceAnswers,g=p.formattedEssayAnswers,b=p.formattedSpeakingAnswers,y=p.formattedFillBlankAnswers,T=Vf(r,s,o,f,g,b,y),x.prev=5,x.next=8,Object(lu.b)(uu,T,a);case 8:if(k=x.sent,console.log("test or assignment submit response: ",k),!k.data.errors){x.next=12;break}throw new Error("Submitting the test or assignment failed!");case 12:x.next=25;break;case 14:return x.prev=14,x.t0=x.catch(5),console.log("error submitting the test or assignment",x.t0),S=o?ua.t("alerts.test.studentTestSubmittedSuccess"):ua.t("alerts.test.studentTestSavedSuccess"),x.next=20,Object(lu.e)(v(S));case 20:return x.next=22,Object(lu.c)(3e3);case 22:return x.next=24,Object(lu.e)(Fe());case 24:return x.abrupt("return");case 25:x.prev=25,x.t1=Pa.a.keys(d);case 27:if((x.t2=x.t1()).done){x.next=35;break}if(w=x.t2.value,!d.hasOwnProperty(w)){x.next=33;break}if(!(d[w]instanceof File)){x.next=33;break}return x.next=33,Object(lu.b)(Hr,d[w],m[w],a);case 33:x.next=27;break;case 35:x.next=48;break;case 37:return x.prev=37,x.t3=x.catch(25),console.log("Error uploading audio file: ",x.t3),O=ua.t("alerts.test.uploadAudioFail"),x.next=43,Object(lu.e)(v(O));case 43:return x.next=45,Object(lu.c)(3e3);case 45:return x.next=47,Object(lu.e)(Fe());case 47:return x.abrupt("return");case 48:return x.next=50,Object(lu.e)(h(a));case 50:if(o||l){x.next=53;break}return x.next=53,Object(lu.e)(Pe(s._id,!0,a,!0));case 53:if(!(c.length>0)){x.next=56;break}return x.next=56,Object(lu.e)(ge(c,a));case 56:return C=o?ua.t("alerts.test.studentTestSubmittedSuccess"):ua.t("alerts.test.studentTestSavedSuccess"),x.next=59,Object(lu.e)(E(o,C));case 59:if(!o){x.next=73;break}return x.next=62,Object(lu.e)(Re("modules"));case 62:return Je.push("/student-panel/course/".concat(i)),x.next=65,Object(lu.e)(Ce([""]));case 65:return x.next=67,Object(lu.e)(h(a));case 67:return x.next=69,Object(lu.e)(Ie(a));case 69:return x.next=71,Object(lu.e)(Se(i,a));case 71:return x.next=73,Object(lu.e)(Ne(i,a));case 73:return x.next=75,Object(lu.c)(3e3);case 75:return x.next=77,Object(lu.e)(Fe());case 77:case"end":return x.stop()}}),Jf,null,[[5,14],[25,37]])}function tg(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("FETCH_TEST_RESULTS_START",Xf);case 2:case"end":return e.stop()}}),Kf)}function ng(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("SUBMIT_TEST_START",eg);case 2:case"end":return e.stop()}}),Zf)}var ag=[Object(lu.d)(tg),Object(lu.d)(ng)],rg=function(e,t){return{query:"\n        mutation MarkSlideAsSeen(\n          $lessonId: ID!,\n          $slideNumber: Int!, \n          )  {       \n          markSlideAsSeen(\n            lessonId:$lessonId,\n            slideNumber:$slideNumber,\n            )\n        }\n      ",variables:{lessonId:e,slideNumber:t}}},og=Pa.a.mark(ig),sg=Pa.a.mark(cg);function ig(e){var t,n,a,r,o,s,i;return Pa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.token,a=t.lessonId,r=t.slideNumber,console.log("lessonId, slideNumber",a,r),console.log("token: ",n),o=rg(a,r),c.prev=4,c.next=7,Object(lu.b)(uu,o,n);case 7:return s=c.sent,console.log("Mark slide as seen response: ",s),c.next=11,Object(lu.e)({type:"MARK_SLIDE_AS_SEEN_SUCCESS",message:void 0});case 11:return c.next=13,Object(lu.e)(Ie(n));case 13:c.next=25;break;case 15:return c.prev=15,c.t0=c.catch(4),console.log("Failed to mark slide as seen",c.t0),i=ua.t("alerts.lesson.markSlideFail"),c.next=21,Object(lu.e)(y(i));case 21:return c.next=23,Object(lu.c)(3e3);case 23:return c.next=25,Object(lu.e)(Fe());case 25:case"end":return c.stop()}}),og,null,[[4,15]])}function cg(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("MARK_SLIDE_AS_SEEN_START",ig);case 2:case"end":return e.stop()}}),sg)}var lg=[Object(lu.d)(cg)],ug=function(e){return{query:"query FetchQuestions($courseId: ID!) {\n                questions(courseId: $courseId) {\n                  _id\n                  course\n                  language\n                  tags\n                  difficulty\n                  type\n        \n                  mcQuestion {\n                    question\n                    solution\n                    correctAnswers\n                    answers\n                  }\n        \n                  essayQuestion {\n                    question\n                    solution\n                  }\n        \n                  speakingQuestion {\n                    question\n                    audioQuestion\n                    audio\n                  }\n        \n                  fillBlankQuestions {\n                    question\n                    blanks {\n                      correctAnswer\n                      selectableAnswer\n                      incorrectAnswers\n                      audio\n                      answerOptions\n                    }\n                  }\n        \n                }\n              }\n            ",variables:{courseId:e}}},dg=Pa.a.mark(pg),mg=Pa.a.mark(fg);function pg(e){var t,n,a,r,o,s,i;return Pa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.courseId,a=t.token,r=ug(n),c.prev=2,c.next=5,Object(lu.b)(uu,r,a);case 5:if(o=c.sent,console.log("Getting question bank response: ",o),!o.data.errors){c.next=9;break}throw new Error("Loading the question bank failed");case 9:return s=o.data.data.questions,c.next=12,Object(lu.e)(Q(s));case 12:c.next=24;break;case 14:return c.prev=14,c.t0=c.catch(2),console.log("err",c.t0),i=ua.t("alerts.question.fetchQuestionBankFail"),c.next=20,Object(lu.e)({type:"FETCH_QUESTION_BANK_FAIL",message:i});case 20:return c.next=22,Object(lu.c)(3e3);case 22:return c.next=24,Object(lu.e)(Fe());case 24:case"end":return c.stop()}}),dg,null,[[2,14]])}function fg(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("FETCH_QUESTION_BANK_START",pg);case 2:case"end":return e.stop()}}),mg)}var gg=[Object(lu.d)(fg)],bg=function(e,t,n,a,r,o,s,i){return{query:"\n                  mutation ".concat(t?"UpdateQuestion":"CreateQuestion","(\n                   $course:ID!\n                   $type:String\n                   $language:String\n                   $tags:[String]\n                   $difficulty:String\n                   $id:ID!\n                   $fillBlankContent:String\n                   $mcQuestion:String\n                   $mcSolution:String\n                   $mcAnswerOptions:[String]\n                   $mcCorrectAnswers:[String]\n                   $essayQuestion:String\n                   $essaySolution:String\n                   $speakingQuestion:String\n                   $speakingQuestionAudio:String\n                   $speakingQuestionAudioExplanation:String\n                  ){\n                    ").concat(t?"updateQuestion":"createQuestion","(\n                     questionInput: {\n                       course: $course\n                       type:$type\n                       language:$language\n                       tags:$tags\n                       difficulty:$difficulty\n                       id:$id\n                      }\n                      speakingQuestionInput: {\n                        question:$speakingQuestion\n                        questionAudio:$speakingQuestionAudio\n                        audio:$speakingQuestionAudioExplanation\n                      }\n\n                      multipleChoiceQuestionInput: {\n                        question:$mcQuestion\n                        solution:$mcSolution\n                        answerOptions:$mcAnswerOptions\n                        correctAnswers:$mcCorrectAnswers\n                      }\n\n                      essayQuestionInput: {\n                        question:$essayQuestion\n                        solution:$essaySolution\n                      }\n\n                      fillBlankQuestionInput: {\n                        blanks: [").concat(i,"],\n                        fillBlankContent: $fillBlankContent\n                      }\n                     ) {\n                         _id\n                    }\n                  }\n                "),variables:{id:e._id,course:n,type:a,language:e.language.charAt(0).toUpperCase()+e.language.slice(1).toLowerCase(),tags:e.tags,difficulty:e.difficulty,mcQuestion:((e.mcQuestion||{}).question||"").replace(/"/g,"'"),mcSolution:((e.mcQuestion||{}).solution||"").replace(/"/g,"'"),mcAnswerOptions:((e.mcQuestion||{}).answers||[]).map((function(e){return e.replace(/"/g,"'")})),mcCorrectAnswers:(e.mcQuestion||{}).correctAnswers,essayQuestion:((e.essayQuestion||{}).question||"").replace(/"/g,"'"),essaySolution:((e.essayQuestion||{}).solution||"").replace(/"/g,"'"),speakingQuestion:(r[0]||{}).audioQuestion?"":(o||"").replace(/"/g,"'"),speakingQuestionAudio:(r[0]||{}).audioQuestion?o:"",speakingQuestionAudioExplanation:(r[0]||{}).audioAnswer?s:"",fillBlankContent:((e.fillBlankQuestions||{}).question||"").replace(/"/g,"'")}}},hg=function(e,t,n){var a="";return((e.fillBlankQuestions||{}).answers||[]).map((function(e,r){var o=Object.values(t[r].answerOptions||{});a+="{ \n               incorrectAnswers: ".concat(JSON.stringify((t[r]||{}).selectableAnswer?o:["","",""]),', \n               correctAnswer: "').concat(((t[r]||{}).answer||"").replace(/"/g,"'"),'", \n               selectableAnswer: ').concat((t[r]||{}).selectableAnswer||!1,", \n               audio: ").concat(JSON.stringify(n[r])||"",",\n               }")})),a},Eg=Pa.a.mark(yg),vg=Pa.a.mark(Tg);function yg(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E,v,y,T,k,S,w;return Pa.a.wrap((function(O){for(;;)switch(O.prev=O.next){case 0:return t=e.payload,n=t.formData,a=void 0===n?{}:n,r=t.questionType,o=t.token,s=t.editing,i=t.courseId,c=t.filesToDelete,l="courses/".concat(i,"/questions/").concat(a._id),u=(a.fillBlankQuestions||{}).answers||[],"fillInBlank"===r&&(d=u.map((function(e,t){var n=e;return n=e.audioFile instanceof File?Qr(e.audioFile,l):uo(e.audioFile),e.audio||(n=null),n}))),m="",p="",b=a.speakingQuestion||[],"speaking"===r&&(f=b.map((function(e){return e.audioQuestion?e.audioFileQuestion:e.question}))[0],m=f instanceof File?Qr(f,l):b[0].audioQuestion?uo(f):f,g=b.map((function(e){return e.audioAnswer?e.audioFile:""}))[0],p=g instanceof File?Qr(g,l):uo(g)),O.prev=8,h=bg(a,s,i,r,b,m,p,hg(a,u,d)),O.next=12,Object(lu.b)(uu,h,o);case 12:if(E=O.sent,console.log("Create or update question response: ",E),!E.data.errors){O.next=16;break}throw new Error("Creating or updating the question failed");case 16:O.next=29;break;case 18:return O.prev=18,O.t0=O.catch(8),console.log("Error creating question: ",O.t0),v=s?ua.t("alerts.question.updateQuestionFail"):ua.t("alerts.question.createQuestionFail"),O.next=24,Object(lu.e)(H(v));case 24:return O.next=26,Object(lu.c)(3e3);case 26:return O.next=28,Object(lu.e)(Fe());case 28:return O.abrupt("return");case 29:if("fillInBlank"!==r){O.next=54;break}y=u.map((function(e){return e.audio?e.audioFile:null})),O.prev=31,O.t1=Pa.a.keys(y);case 33:if((O.t2=O.t1()).done){O.next=41;break}if(T=O.t2.value,!y.hasOwnProperty(T)){O.next=39;break}if(!(y[T]instanceof File)){O.next=39;break}return O.next=39,Object(lu.b)(Hr,y[T],d[T],o);case 39:O.next=33;break;case 41:O.next=54;break;case 43:return O.prev=43,O.t3=O.catch(31),console.log("Error fill in the blanks section audio files: ",O.t3),k=ua.t("alerts.question.uploadingFillblanksAudioFail"),O.next=49,Object(lu.e)(H(k));case 49:return O.next=51,Object(lu.c)(3e3);case 51:return O.next=53,Object(lu.e)(Fe());case 53:return O.abrupt("return");case 54:if("speaking"!==r){O.next=89;break}if(O.prev=55,!(f instanceof File)){O.next=59;break}return O.next=59,Object(lu.b)(Hr,f,m,o);case 59:O.next=72;break;case 61:return O.prev=61,O.t4=O.catch(55),console.log("Error uploading speaking question audio file: ",O.t4),S=ua.t("alerts.question.uploadingSpeakingQuestionAudioFail"),O.next=67,Object(lu.e)(H(S));case 67:return O.next=69,Object(lu.c)(3e3);case 69:return O.next=71,Object(lu.e)(Fe());case 71:return O.abrupt("return");case 72:if(O.prev=72,!(g instanceof File)){O.next=76;break}return O.next=76,Object(lu.b)(Hr,g,p,o);case 76:O.next=89;break;case 78:return O.prev=78,O.t5=O.catch(72),console.log("Error uploading speaking answer audio file: ",O.t5),w=ua.t("alerts.question.uploadingSpeakingAnswerAudioFail"),O.next=84,Object(lu.e)(H(w));case 84:return O.next=86,Object(lu.c)(3e3);case 86:return O.next=88,Object(lu.e)(Fe());case 88:return O.abrupt("return");case 89:return O.next=91,Object(lu.e)(U(i,o));case 91:return O.next=93,Object(lu.e)({type:"CLOSE_MODAL"});case 93:return O.next=95,Object(lu.e)({type:"CREATE_UPDATE_QUESTION_SUCCESS",message:void 0});case 95:return O.next=97,Object(lu.c)(3e3);case 97:return O.next=99,Object(lu.e)(Fe());case 99:if(!(c.length>0)){O.next=102;break}return O.next=102,Object(lu.e)(ge(c,o));case 102:case"end":return O.stop()}}),Eg,null,[[8,18],[31,43],[55,61],[72,78]])}function Tg(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("CREATE_UPDATE_QUESTION_START",yg);case 2:case"end":return e.stop()}}),vg)}var kg=[Object(lu.d)(Tg)],Sg=function(e){return{query:'\n            mutation {\n              deleteQuestion(id: "'.concat(e,'")\n            }\n          ')}},wg=Pa.a.mark(Cg),Og=Pa.a.mark(xg);function Cg(e){var t,n,a,r,o,s,i,c;return Pa.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.questionId,a=t.token,r=t.courseId,o=Sg(n),l.prev=3,l.next=6,Object(lu.b)(uu,o,a);case 6:if(s=l.sent,console.log("delete question response: ",s),!s.data.errors){l.next=10;break}throw new Error("Deleting the question failed");case 10:return l.next=12,Object(lu.e)(U(r,a));case 12:return i=ua.t("alerts.question.deleteQuestionSuccess"),l.next=15,Object(lu.e)({type:"DELETE_QUESTION_SUCCESS",message:i});case 15:return l.next=17,Object(lu.e)({type:"CLOSE_MODAL"});case 17:return l.next=19,Object(lu.c)(3e3);case 19:return l.next=21,Object(lu.e)(Fe());case 21:l.next=33;break;case 23:return l.prev=23,l.t0=l.catch(3),console.log("err",l.t0),c=ua.t("alerts.question.deleteQuestionFail"),l.next=29,Object(lu.e)(G(c));case 29:return l.next=31,Object(lu.c)(3e3);case 31:return l.next=33,Object(lu.e)(Fe());case 33:case"end":return l.stop()}}),wg,null,[[3,23]])}function xg(){var e;return Pa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(lu.f)("DELETE_QUESTION_START");case 3:return e=t.sent,t.next=6,Object(lu.b)(Cg,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}}),Og)}var Ag=[Object(lu.d)(xg)],Fg=function(e,t,n,a,r,o){return{query:"\n          mutation ".concat(o?"UpdateLesson":"CreateNewLesson","(\n            $lessonId: ID!,\n            $lessonName: String!,\n            $createdAt:String, \n            $slideContent:[String],\n            $slideAudio:[String],\n            $slideVideo:[String],\n            $course: ID!, \n            $published: Boolean!, \n            $availableOnDate: String) {\n            ").concat(o?"updateLesson":"createLesson","(lessonInput: {\n            _id: $lessonId,\n            lessonName: $lessonName,\n            createdAt: $createdAt,\n            slideContent:$slideContent,\n            slideAudio:$slideAudio, \n            slideVideo:$slideVideo,  \n            course: $course, \n            published: $published, \n            availableOnDate: $availableOnDate}) {\n              _id\n              lessonName\n              published\n              availableOnDate\n              course\n            }\n          }\n        "),variables:{lessonId:e._id,lessonName:e.lessonName,createdAt:e.createdAt,published:e.published,availableOnDate:e.availableOnDate,slideContent:t,slideAudio:n,slideVideo:a,course:r}}},Dg=function(e){return{query:"query FetchSingleLesson($lessonId: ID!) {\n          lesson(id: $lessonId) {\n            _id\n            lessonName\n            createdAt\n            published\n            availableOnDate\n            lessonSlides {\n              _id\n              slideContent\n              audio\n              video\n            }\n          }\n        }\n      ",variables:{lessonId:e}}},_g=function(e){return{query:'\n        mutation {\n          deleteLesson(id: "'.concat(e,'")\n        }\n      ')}},Ig=function(e){return{_id:e._id,lessonName:e.lessonName,createdAt:e.createdAt?new Date(parseInt(e.createdAt)):null,published:e.published,availableOnDate:e.availableOnDate?new Date(parseInt(e.availableOnDate)):null,slides:e.lessonSlides.map((function(e){return{_id:e._id,slideContent:e.slideContent,videoFile:e.video,audioFile:e.audio,recordedBlob:e.audio,loadedVideo:e.video,videoContent:!!e.video}}))}},jg=Pa.a.mark(Mg),Rg=Pa.a.mark(qg),Ng=Pa.a.mark(Ug),Lg=Pa.a.mark(Qg),Pg=Pa.a.mark(Hg),Bg=Pa.a.mark(Gg);function Mg(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E,v,y,T;return Pa.a.wrap((function(k){for(;;)switch(k.prev=k.next){case 0:return t=e.payload,n=t.formValues,a=t.token,r=t.editing,o=t.course,s=t.filesToDelete,i="courses/".concat(o,"/lessons/").concat(n._id),c=n.slides.map((function(e){return e.videoContent?"":e.slideContent})),l=(n.slides||[]).map((function(e){return e.audioFile})),u=(n.slides||[]).map((function(e){return e.videoFile})),d=l.map((function(e,t){var a;return a=e instanceof File?Qr(e,i):uo(e),((n.slides||[])[t]||{}).videoContent&&(a=""),a})),m=u.map((function(e,t){var a;return a=e instanceof File?Qr(e,i):uo(e),((n.slides||[])[t]||{}).videoContent||(a=""),a})),k.prev=7,p=Fg(n,c,d,m,o,r),k.next=11,Object(lu.b)(uu,p,a);case 11:if(f=k.sent,console.log("Create lesson response: ",f),!f.data.errors){k.next=15;break}throw new Error("Creating or updating the lesson failed");case 15:if(!(s.length>0)){k.next=18;break}return k.next=18,Object(lu.e)(ge(s,a));case 18:return k.next=20,Object(lu.e)(Ce(["Lessons","New lesson"]));case 20:return k.next=22,Object(lu.e)(xe(0));case 22:if(!r){k.next=25;break}return k.next=25,Object(lu.e)({type:"CANCEL_EDITING"});case 25:return k.next=27,Object(lu.e)({type:"CREATE_LESSON_SUCCESS",message:void 0});case 27:return k.next=29,Object(lu.c)(3e3);case 29:return k.next=31,Object(lu.e)(Fe());case 31:k.next=44;break;case 33:return k.prev=33,k.t0=k.catch(7),console.log("Error creating lesson: ",k.t0),g=r?ua.t("alerts.lesson.lessonUpdatedFail"):ua.t("alerts.lesson.lessonCreatedFail"),k.next=39,Object(lu.e)(B(g));case 39:return k.next=41,Object(lu.c)(3e3);case 41:return k.next=43,Object(lu.e)(Fe());case 43:return k.abrupt("return");case 44:k.prev=44,k.t1=Pa.a.keys(l);case 46:if((k.t2=k.t1()).done){k.next=55;break}if(b=k.t2.value,!l.hasOwnProperty(b)){k.next=53;break}if(h=!((n.slides||[])[b]||{}).videoContent,!(l[b]instanceof File&&h)){k.next=53;break}return k.next=53,Object(lu.b)(Hr,l[b],d[b],a);case 53:k.next=46;break;case 55:k.next=68;break;case 57:return k.prev=57,k.t3=k.catch(44),E=ua.t("alerts.lesson.uploadingAudioFail"),k.next=62,Object(lu.e)(B(E));case 62:return k.next=64,Object(lu.c)(3e3);case 64:return k.next=66,Object(lu.e)(Fe());case 66:return console.log("Error uploading audio: ",k.t3),k.abrupt("return");case 68:k.prev=68,k.t4=Pa.a.keys(u);case 70:if((k.t5=k.t4()).done){k.next=79;break}if(v=k.t5.value,!u.hasOwnProperty(v)){k.next=77;break}if(y=((n.slides||[])[v]||{}).videoContent,!(u[v]instanceof File&&y)){k.next=77;break}return k.next=77,Object(lu.b)(Hr,u[v],m[v],a);case 77:k.next=70;break;case 79:k.next=92;break;case 81:return k.prev=81,k.t6=k.catch(68),console.log("Error uploading video: ",k.t6),T=ua.t("alerts.lesson.uploadingVideoFail"),k.next=87,Object(lu.e)(B(T));case 87:return k.next=89,Object(lu.c)(3e3);case 89:return k.next=91,Object(lu.e)(Fe());case 91:return k.abrupt("return");case 92:return k.next=94,Object(lu.e)(Ie(a));case 94:case"end":return k.stop()}}),jg,null,[[7,33],[44,57],[68,81]])}function qg(e){var t,n,a,r,o,s,i,c;return Pa.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.lessonId,a=t.token,r=Dg(n),l.prev=2,l.next=5,Object(lu.b)(uu,r,a);case 5:if(o=l.sent,console.log("Fetching lesson response",o),!o.data.errors){l.next=9;break}throw new Error("Fetching the lesson failed!");case 9:return s=o.data.data.lesson,i=Ig(s),l.next=13,Object(lu.e)(P(i,n));case 13:return l.next=15,Object(lu.e)({type:"SET_EDITING"});case 15:return l.next=17,Object(lu.e)(Ce(["Lessons","Edit lesson"]));case 17:l.next=29;break;case 19:return l.prev=19,l.t0=l.catch(2),console.log("Failed to load the lesson",l.t0),c=ua.t("alerts.lesson.lessonRetrieveFail"),l.next=25,Object(lu.e)({type:"FETCH_LESSON_FAIL",message:c});case 25:return l.next=27,Object(lu.c)(3e3);case 27:return l.next=29,Object(lu.e)(Fe());case 29:case"end":return l.stop()}}),Rg,null,[[2,19]])}function Ug(e){var t,n,a,r,o,s,i;return Pa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.lessonId,a=t.token,r=_g(n),c.prev=3,c.next=6,Object(lu.b)(uu,r,a);case 6:if(o=c.sent,console.log("Deleting lesson response: ",o),!o.data.errors){c.next=10;break}throw new Error("Deleting the lesson failed");case 10:return c.next=12,Object(lu.e)(Ie(a));case 12:return c.next=14,Object(lu.e)({type:"CLOSE_MODAL"});case 14:return c.next=16,Object(lu.e)(xe(0));case 16:return s=ua.t("alerts.lesson.lessonDeleteSuccess"),c.next=19,Object(lu.e)({type:"DELETE_LESSON_SUCCESS",message:s});case 19:return c.next=21,Object(lu.c)(3e3);case 21:return c.next=23,Object(lu.e)(Fe());case 23:c.next=35;break;case 25:return c.prev=25,c.t0=c.catch(3),console.log("Failed to delete the lesson",c.t0),i=ua.t("alerts.lesson.lessonDeleteFail"),c.next=31,Object(lu.e)(M(i));case 31:return c.next=33,Object(lu.c)(3e3);case 33:return c.next=35,Object(lu.e)(Fe());case 35:case"end":return c.stop()}}),Ng,null,[[3,25]])}function Qg(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("FETCH_LESSON_START",qg);case 2:case"end":return e.stop()}}),Lg)}function Hg(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("CREATE_LESSON_START",Mg);case 2:case"end":return e.stop()}}),Pg)}function Gg(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("DELETE_LESSON_START",Ug);case 2:case"end":return e.stop()}}),Bg)}var Wg=[Object(lu.d)(Hg),Object(lu.d)(Qg),Object(lu.d)(Gg)],zg=function(e){return{query:"query FetchSingleCourse($courseId: ID!) {\n          course(id: $courseId) {\n            _id\n            courseName\n            createdAt\n            courseActive\n            studentCapacity\n            language\n            courseImage\n            enrollmentStartDate\n            enrollmentEndDate\n            courseStartDate\n            courseEndDate\n            courseDropDeadline\n            prerequisites {\n              _id\n              courseName\n            }\n            regularOfficeHours {\n              day\n              startTime\n              endTime\n              timezoneRegion\n            }\n            irregularOfficeHours {\n             date\n             startTime\n             endTime\n             timezoneRegion\n            }\n            syllabus\n          }\n        }\n      ",variables:{courseId:e}}},Vg=function(e){var t=e.formData,n=e.courseId,a=e.regularOfficeHours,r=e.irregularOfficeHours,o=e.editing,s=e.file,i=e.key;return{query:"\n            mutation ".concat(o?"UpdateCourse, ":"CreateNewCourse","(\n              $courseId: ID!,\n              $courseName: String!,\n              $createdAt: String,\n              $courseActive: Boolean!,\n              $studentCapacity: Int, \n              $language: String, \n              $enrollmentStartDate: String, \n              $enrollmentEndDate: String, \n              $courseStartDate: String,\n              $courseEndDate: String, \n              $courseDropDeadline: String, \n              $syllabus: String, \n              $courseImage: String, \n              $prerequisites:[ID] ) {\n                ").concat(o?"updateCourse, ":"createCourse","(\n                courseInput: {\n                  courseId: $courseId,\n                  courseName: $courseName,\n                  courseActive: $courseActive,\n                  createdAt: $createdAt,\n                  studentCapacity: $studentCapacity,\n                  language: $language,\n                  courseStartDate: $courseStartDate,\n                  courseEndDate: $courseEndDate,\n                  enrollmentStartDate: $enrollmentStartDate,\n                  enrollmentEndDate: $enrollmentEndDate,\n                  courseDropDeadline: $courseDropDeadline,\n                  syllabus: $syllabus,\n                  courseImage: $courseImage, \n                  prerequisites: $prerequisites,\n                  regularOfficeHours: [").concat(a,"],\n                  irregularOfficeHours: [").concat(r,"],\n                }) {\n                _id\n                courseName\n              }\n            }\n          "),variables:{courseId:n,courseName:t.courseName,createdAt:t.createdAt,courseActive:t.courseActive,studentCapacity:parseInt(t.studentCapacity),language:t.language,enrollmentStartDate:(t.enrollmentPeriod||[])[0],enrollmentEndDate:(t.enrollmentPeriod||[])[1],courseStartDate:(t.courseTimeline||[])[0],courseEndDate:(t.courseTimeline||[])[1],courseDropDeadline:t.courseDropDeadline,syllabus:t.syllabus,prerequisites:t.prerequisites,courseImage:s instanceof File?i:s}}},$g=function(e,t){return{query:"\n        mutation UpdateCourseResources(\n          $courseId: ID!, \n          ) {       \n          updateCourseResources(\n            courseId:$courseId,\n            resources: [".concat(t,"]\n            ) {\n              _id\n            }\n        }\n      "),variables:{courseId:e}}},Yg=function(e){return{query:"\n        mutation ChangeCourseState(\n          $courseId: ID!, \n          ) {       \n          changeCourseState(\n            courseId:$courseId,\n            ) {\n              _id\n            }\n        }\n      ",variables:{courseId:e}}},Jg=function(e,t,n,a,r){return{query:"\n        mutation GradeCourse(\n          $courseId: ID!,\n          $studentId: ID!,\n          $grade: Float!, \n          $gradeAdjustmentExplanation: String, \n          $gradeOverride: Boolean!,\n          $passed:Boolean!,\n          ) {       \n          gradeCourse(gradeCourseInput:{\n            courseId:$courseId,\n            studentId:$studentId,\n            grade:$grade,\n            gradeAdjustmentExplanation:$gradeAdjustmentExplanation,\n            gradeOverride:$gradeOverride,\n            passed:$passed,\n          }\n        )\n       }\n      ",variables:{courseId:e,studentId:t,grade:n.gradeOverride?parseFloat(parseFloat(n.gradeAdjusted).toFixed(2)):a,gradeOverride:n.gradeOverride,gradeAdjustmentExplanation:n.gradeOverride?n.gradeAdjustmentExplanation:null,passed:r}}},Kg=function(e){return{query:'\n        mutation {\n          deleteCourse(id: "'.concat(e,'")\n        }\n      ')}},Zg=function(e){var t,n=(e.regularOfficeHours||[]).map((function(e){return{day:e.day,timeRange:[e.startTime,e.endTime]}})),a=(e.irregularOfficeHours||[]).map((function(e){return{date:new Date(parseInt(e.date)),timeRange:[e.startTime,e.endTime]}})),r={days:e.regularOfficeHours.map((function(e){return e.day})),times:(t="day",n.reduce((function(e,n){return Object(It.a)(Object(It.a)({},e),{},Object(yo.a)({},n[t],n))}),{}))},o=e.prerequisites.map((function(e){return e._id})),s={enrollmentPeriod:[e.enrollmentStartDate?new Date(parseInt(e.enrollmentStartDate)):null,e.enrollmentEndDate?new Date(parseInt(e.enrollmentEndDate)):null],courseTimeline:[e.courseStartDate?new Date(parseInt(e.courseStartDate)):null,e.courseEndDate?new Date(parseInt(e.courseEndDate)):null],courseDropDeadline:e.courseDropDeadline?new Date(parseInt(e.courseDropDeadline)):null},i=((e.courseImage||"").match(new RegExp("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/(.*)\\?X-Amz"))||[])[1];return Object(It.a)(Object(It.a)({_id:e._id,courseName:e.courseName,studentCapacity:e.studentCapacity,studentsEnrolled:e.studentsEnrolled,language:e.language,syllabus:e.syllabus,courseActive:e.courseActive,courseImage:i,editing:!0,createdAt:e.createdAt?new Date(parseInt(e.createdAt)):null,prerequisites:o},s),{},{regularOfficeHours:r,irregularOfficeHours:a,loadedCourseImage:e.courseImage})},Xg=function(e){var t=Object.keys((e.regularOfficeHours||{}).times||[]),n=Object.values((e.regularOfficeHours||{}).times||[]),a=(e.regularOfficeHours||{}).days,r="";(t||[]).forEach((function(e,t){if(!a.includes(e))return null;r+='{\n            day:"'.concat(e,'",\n            startTime:"').concat((((n||[])[t]||{}).timeRange||[])[0],'",\n            endTime:"').concat((((n||[])[t]||{}).timeRange||[])[1],'",\n            timezoneRegion:"').concat(localStorage.getItem("timezone"),'",\n          }')}));var o=Object.keys(e.irregularOfficeHours||[]),s=Object.values(e.irregularOfficeHours||[]),i="";return(o||[]).forEach((function(e,t){if(!e)return null;i+='{\n            date:"'.concat(((s||[])[t]||{}).date,'",\n            startTime:"').concat((((s||[])[t]||{}).timeRange||[])[0],'",\n            endTime:"').concat((((s||[])[t]||{}).timeRange||[])[1],'",\n            timezoneRegion:"').concat(localStorage.getItem("timezone"),'",\n          }')})),{regularOfficeHours:r,irregularOfficeHours:i}},eb=function(e,t){$e()("https://mernstackelearn.herokuapp.com/",{query:{token:t}}).emit("notifyOfDocUpdate",{notificationType:e.notification,userType:e.userType,userId:e.userId,testId:e.testId,courseId:e.course,action:e.action,message:e.message})},tb=Pa.a.mark(pb),nb=Pa.a.mark(fb),ab=Pa.a.mark(gb),rb=Pa.a.mark(bb),ob=Pa.a.mark(hb),sb=Pa.a.mark(Eb),ib=Pa.a.mark(vb),cb=Pa.a.mark(yb),lb=Pa.a.mark(Tb),ub=Pa.a.mark(kb),db=Pa.a.mark(Sb),mb=Pa.a.mark(wb);function pb(e){var t,n,a,r,o,s,i,c,l;return Pa.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.courseId,a=t.token,r=t.changeStatus,o=zg(n),u.prev=2,u.next=5,Object(lu.b)(uu,o,a);case 5:if(s=u.sent,console.log("Getting course response",s),!s.data.errors){u.next=9;break}throw new Error("Loading the course failed!");case 9:if(i=s.data.data.course,c=Zg(i),r){u.next=14;break}return u.next=14,Object(lu.e)(A(c,n));case 14:return r&&Object(lu.e)(I(c,a,!0,n,!0)),u.next=17,Object(lu.e)({type:"SET_EDITING"});case 17:return u.next=19,Object(lu.e)(Ce(["Courses","Edit course"]));case 19:u.next=31;break;case 21:return u.prev=21,u.t0=u.catch(2),console.log("Failed to retrieve the course",u.t0),l=ua.t("alerts.course.fetchCourseFail"),u.next=27,Object(lu.e)({type:"FETCH_COURSE_FAIL",message:l});case 27:return u.next=29,Object(lu.c)(3e3);case 29:return u.next=31,Object(lu.e)(Fe());case 31:case"end":return u.stop()}}),tb,null,[[2,21]])}function fb(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E;return Pa.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,n=t.formData,a=t.token,r=t.editing,o=t.courseId,s=t.filesToDelete,i=Xg(n),c=i.regularOfficeHours,l=i.irregularOfficeHours,u=n.courseImage,d="courses/".concat(o,"/thumbnail"),m=Qr(u,d),p=Vg(Object(It.a)(Object(It.a)({},t),{},{regularOfficeHours:c,irregularOfficeHours:l,file:u,key:m})),v.prev=7,v.next=10,Object(lu.b)(uu,p,a);case 10:if(f=v.sent,console.log("Creating or updating course response: ",f),!f.data.errors){v.next=14;break}throw new Error("Creating or updating the course failed");case 14:return v.next=16,Object(lu.e)(xe(0));case 16:return v.next=18,Object(lu.e)(Ce(["Courses","New course"]));case 18:return v.next=20,Object(lu.e)({type:"CANCEL_EDITING"});case 20:return v.next=22,Object(lu.e)(L(a));case 22:v.next=35;break;case 24:return v.prev=24,v.t0=v.catch(7),console.log("Failed to create or update the course",v.t0),g=ua.t("alerts.course.createCourseFail"),v.next=30,Object(lu.e)(R(g));case 30:return v.next=32,Object(lu.c)(3e3);case 32:return v.next=34,Object(lu.e)(Fe());case 34:return v.abrupt("return");case 35:if(b={userType:"all",notification:"updateCourses"},h=r?ua.t("alerts.course.updateCourseSuccess"):ua.t("alerts.course.createCourseSuccess"),!(n.courseImage instanceof File)){v.next=63;break}return v.prev=38,v.next=41,Object(lu.b)(Hr,u,m,a);case 41:eb(b,a),v.next=55;break;case 44:return v.prev=44,v.t1=v.catch(38),console.log("Error uploading course thumbnail: ",v.t1),E=ua.t("alerts.course.uploadThumbnailFail"),v.next=50,Object(lu.e)(R(E));case 50:return v.next=52,Object(lu.c)(3e3);case 52:return v.next=54,Object(lu.e)(Fe());case 54:return v.abrupt("return");case 55:return v.next=57,Object(lu.e)(j(h));case 57:return v.next=59,Object(lu.c)(3e3);case 59:return v.next=61,Object(lu.e)(Fe());case 61:v.next=70;break;case 63:return eb(b,a),v.next=66,Object(lu.e)(j(h));case 66:return v.next=68,Object(lu.c)(3e3);case 68:return v.next=70,Object(lu.e)(Fe());case 70:if(!((s||[]).length>0)){v.next=73;break}return v.next=73,Object(lu.e)(ge(s,a));case 73:case"end":return v.stop()}}),nb,null,[[7,24],[38,44]])}function gb(e){var t,n,a,r,o,s,i,c,l,u,d,m,p;return Pa.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,n=t.courseId,a=t.resources,r=t.filesToDelete,o=t.token,s="courses/".concat(n,"/resources"),i=(a||[]).map((function(e){var t;return t=e.resource instanceof File?Qr(e.resource,s):uo(e.resource),Object(It.a)(Object(It.a)({},e),{},{key:t})})),c="",a.forEach((function(e,t){c+='{ \n                        resource: "'.concat(i[t].key||"",'", \n                        resourceName: "').concat(i[t].resourceName,'",\n                        }')})),l=$g(n,c),f.prev=7,f.next=10,Object(lu.b)(uu,l,o);case 10:if(u=f.sent,console.log("Updating course resources response: ",u),!u.data.errors){f.next=14;break}throw new Error("Updating the course resources failed");case 14:return f.next=16,Object(lu.e)(Ie(o));case 16:f.next=28;break;case 18:return f.prev=18,f.t0=f.catch(7),console.log("Failed to update course resources",f.t0),d=ua.t("alerts.course.updatingResourcesFail"),f.next=24,Object(lu.e)(D(d));case 24:return f.next=26,Object(lu.c)(3e3);case 26:return f.next=28,Object(lu.e)(Fe());case 28:f.prev=28,f.t1=Pa.a.keys(i);case 30:if((f.t2=f.t1()).done){f.next=39;break}if(m=f.t2.value,!i.hasOwnProperty(m)){f.next=37;break}if(!(i[m].resource instanceof File)){f.next=37;break}return f.next=36,Object(lu.b)(Hr,i[m].resource,i[m].key,o);case 36:return f.abrupt("continue",30);case 37:f.next=30;break;case 39:f.next=52;break;case 41:return f.prev=41,f.t3=f.catch(28),console.log("Error uploading course resources: ",f.t3),p=ua.t("alerts.course.uploadingResourcesFail"),f.next=47,Object(lu.e)(D(p));case 47:return f.next=49,Object(lu.c)(3e3);case 49:return f.next=51,Object(lu.e)(Fe());case 51:return f.abrupt("return");case 52:return f.next=54,Object(lu.e)(Ie(o));case 54:return eb({userType:"all",notification:"updateCourses"},o),ua.t("alerts.course.updatingResourcesSuccess"),f.next=59,Object(lu.e)({type:"UPDATE_COURSE_RESOURCES_SUCCESS"});case 59:return f.next=61,Object(lu.c)(3e3);case 61:return f.next=63,Object(lu.e)(Fe());case 63:if(!((r||[]).length>0)){f.next=66;break}return f.next=66,Object(lu.e)(ge(r,o));case 66:case"end":return f.stop()}}),ab,null,[[7,18],[28,41]])}function bb(e){var t,n,a,r,o,s;return Pa.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.courseId,a=t.token,r=Yg(n),i.prev=3,i.next=6,Object(lu.b)(uu,r,a);case 6:if(o=i.sent,console.log("Changing course state response: ",o),!o.data.errors){i.next=10;break}throw new Error("Changing the course state failed");case 10:return i.next=12,Object(lu.e)({type:"TOGGLE_COURSE_STATE_SUCCESS"});case 12:return i.next=14,Object(lu.e)(Ie(a));case 14:return i.next=16,Object(lu.e)({type:"CLOSE_MODAL"});case 16:i.next=28;break;case 18:return i.prev=18,i.t0=i.catch(3),console.log("Failed to change the course state",i.t0),s=ua.t("alerts.course.changeStateFail"),i.next=24,Object(lu.e)({type:"TOGGLE_COURSE_STATE_FAIL",message:s});case 24:return i.next=26,Object(lu.c)(3e3);case 26:return i.next=28,Object(lu.e)(Fe());case 28:case"end":return i.stop()}}),rb,null,[[3,18]])}function hb(e){var t,n,a,r,o,s;return Pa.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.courseId,a=t.token,r=Kg(n),i.prev=3,i.next=6,Object(lu.b)(uu,r,a);case 6:if(o=i.sent,console.log("Deleting course response: ",o),!o.data.errors){i.next=10;break}throw new Error("Deleting the course failed");case 10:return i.next=12,Object(lu.e)({type:"DELETE_COURSE_SUCCESS",message:void 0});case 12:return i.next=14,Object(lu.e)(Ie(a));case 14:return i.next=16,Object(lu.e)(L(a));case 16:return i.next=18,Object(lu.e)({type:"CLOSE_MODAL"});case 18:i.next=30;break;case 20:return i.prev=20,i.t0=i.catch(3),console.log("Failed to delete the course",i.t0),s=ua.t("alerts.course.deleteCourseFail"),i.next=26,Object(lu.e)(N(s));case 26:return i.next=28,Object(lu.c)(3e3);case 28:return i.next=30,Object(lu.e)(Fe());case 30:case"end":return i.stop()}}),ob,null,[[3,20]])}function Eb(e){var t,n,a,r,o,s,i,c,l,u;return Pa.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,console.log("payload: ",t),n=t.courseId,a=t.studentId,r=t.formValues,o=t.suggestedGrade,s=t.passed,i=t.token,c=Jg(n,a,r,o,s),d.prev=4,d.next=7,Object(lu.b)(uu,c,i);case 7:if(l=d.sent,console.log("Grading course response: ",l),!l.data.errors){d.next=11;break}throw new Error("Grading the course failed");case 11:return d.next=13,Object(lu.e)({type:"GRADE_COURSE_SUCCESS",message:void 0});case 13:return d.next=15,Object(lu.e)(Ie(i));case 15:return d.next=17,Object(lu.e)({type:"CLOSE_MODAL"});case 17:d.next=29;break;case 19:return d.prev=19,d.t0=d.catch(4),console.log("Failed to grade the course",d.t0),u=ua.t("alerts.course.gradeCourseFail"),d.next=25,Object(lu.e)(F(u));case 25:return d.next=27,Object(lu.c)(3e3);case 27:return d.next=29,Object(lu.e)(Fe());case 29:case"end":return d.stop()}}),sb,null,[[4,19]])}function vb(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("TOGGLE_COURSE_STATE_START",bb);case 2:case"end":return e.stop()}}),ib)}function yb(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("UPDATE_COURSE_RESOURCES_START",gb);case 2:case"end":return e.stop()}}),cb)}function Tb(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("FETCH_COURSE_START",pb);case 2:case"end":return e.stop()}}),lb)}function kb(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("CREATE_UPDATE_COURSE_START",fb);case 2:case"end":return e.stop()}}),ub)}function Sb(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("DELETE_COURSE_START",hb);case 2:case"end":return e.stop()}}),db)}function wb(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("GRADE_COURSE_START",Eb);case 2:case"end":return e.stop()}}),mb)}var Ob=[Object(lu.d)(Tb),Object(lu.d)(kb),Object(lu.d)(yb),Object(lu.d)(vb),Object(lu.d)(Sb),Object(lu.d)(wb)],Cb=function(e,t,n){return{query:"\n          mutation ".concat(n?"UpdateCategory":"CreateCategory","($courseId: ID!,) {\n            ").concat(n?"updateCategory":"createCategory","(categoryInput: [").concat(t,"], courseId: $courseId)\n          }\n        "),variables:{courseId:e}}},xb=function(e){var t="";return((e||{}).modules||[]).forEach((function(e){var n="",a="",r="",o="";((e||{}).folder||[]).forEach((function(e){"lesson"===e.documentType&&(a+='"'.concat(e.documentId,'",'))})),((e||{}).folder||[]).forEach((function(e){"test"===e.documentType&&(r+='"'.concat(e.documentId,'",'))})),((e||{}).folder||[]).forEach((function(e){"assignment"===e.documentType&&(o+='"'.concat(e.documentId,'",'))})),((e||{}).subjects||[]).forEach((function(e){var t="",a="",r="",o="";((e||{}).folder||[]).forEach((function(e){"lesson"===e.documentType&&(a+='"'.concat(e.documentId,'",'))})),((e||{}).folder||[]).forEach((function(e){"test"===e.documentType&&(r+='"'.concat(e.documentId,'",'))})),((e||{}).folder||[]).forEach((function(e){"assignment"===e.documentType&&(o+='"'.concat(e.documentId,'",'))})),((e||{}).topics||[]).forEach((function(e){var n="",a="",r="";((e||{}).folder||[]).forEach((function(e){"lesson"===e.documentType&&(n+='"'.concat(e.documentId,'",'))})),((e||{}).folder||[]).forEach((function(e){"test"===e.documentType&&(a+='"'.concat(e.documentId,'",'))})),((e||{}).folder||[]).forEach((function(e){"assignment"===e.documentType&&(r+='"'.concat(e.documentId,'",'))})),t+='{ \n              topicName: "'.concat((e||{}).topicName||"",'",\n              _id:"').concat((e||{})._id,'",\n              lessons: [').concat(n,"],\n              tests: [").concat(a,"],\n              assignments: [").concat(r,"],\n              }")})),n+='{ \n            subjectName: "'.concat((e||{}).subjectName||"",'", \n            topics: [').concat(t,'],\n            _id: "').concat((e||{})._id,'", \n            lessons: [').concat(a,"],\n            tests: [").concat(r,"],\n            assignments: [").concat(o,"],\n            }")})),t+='{ \n          moduleName: "'.concat((e||{}).moduleName||"",'", \n          _id: "').concat((e||{})._id,'", \n          subjects: [').concat(n,"],\n          lessons: [").concat(a,"],\n          tests: [").concat(r,"],\n          assignments: [").concat(o,"],\n          }")})),t},Ab=Pa.a.mark(Db),Fb=Pa.a.mark(_b);function Db(e){var t,n,a,r,o,s,i,c,l;return Pa.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.formValues,a=t.token,r=t.editing,o=t.courseId,s=xb(n),i=Cb(o,s,r),u.prev=3,u.next=6,Object(lu.b)(uu,i,a);case 6:if(c=u.sent,console.log("Creating or updating modules response: ",c),!c.data.errors){u.next=10;break}throw new Error("Creating or updating the modules failed");case 10:return u.next=12,Object(lu.e)({type:"MODULES_CHANGE_SUCCESS"});case 12:return u.next=14,Object(lu.e)(Se(o,a));case 14:u.next=26;break;case 16:return u.prev=16,u.t0=u.catch(3),console.log("err",u.t0),l=ua.t("alerts.modules.updateModulesFailed"),u.next=22,Object(lu.e)({type:"MODULES_CHANGE_FAILED",message:l});case 22:return u.next=24,Object(lu.c)(3e3);case 24:return u.next=26,Object(lu.e)(Fe());case 26:case"end":return u.stop()}}),Ab,null,[[3,16]])}function _b(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("MODULES_CHANGE_START",Db);case 2:case"end":return e.stop()}}),Fb)}var Ib=[Object(lu.d)(_b)],jb=function(e,t,n,a,r,o,s,i,c,l,u,d){var m=[parseFloat(e.mcSectionWeight)||null,parseFloat(e.essaySectionWeight)||null,parseFloat(e.speakingSectionWeight)||null,parseFloat(e.fillBlankSectionWeight)||null];return{query:"\n                  mutation ".concat(u?"UpdateTest":"CreateNewTest","(\n                   $testName: String!,\n                   $course:ID!,\n                   $published:Boolean!,\n                   $instructor:ID!,\n                   $testType: String,\n                   $testWeight: Float!,\n                   $passingRequired: Boolean,\n                   $isGradeIncluded: Boolean!,\n                   $passingGrade: Float,\n                   $timer:Int,\n                   $availableOnDate:String,\n                   $dueDate:String,\n                   $gradeReleaseDate:String,\n                   $allowLateSubmission: Boolean,\n                   $latePenalty: Float,\n                   $lateDaysAllowed: Int,\n                   $fillBlankContent:String,\n                   $sectionWeights: [Float]!,\n                   $testSections: [String!]!,\n                   $testId: ID!,\n                   $assignment: Boolean!,\n                   $blockedNotes: Boolean!,\n                   $notes: String,\n                  ){\n                    ").concat(u?"updateTest":"createTest","(\n                     testInput: {\n                       testName: $testName,\n                       course: $course,\n                       published: $published,\n                       instructor: $instructor,\n                       testType: $testType,\n                       testWeight: $testWeight,\n                       passingRequired: $passingRequired,\n                       isGradeIncluded: $isGradeIncluded,\n                       passingGrade: $passingGrade,\n                       timer: $timer,\n                       availableOnDate: $availableOnDate,\n                       dueDate: $dueDate,\n                       gradeReleaseDate: $gradeReleaseDate,\n                       allowLateSubmission: $allowLateSubmission,\n                       latePenalty: $latePenalty,\n                       lateDaysAllowed: $lateDaysAllowed,\n                       sectionWeights: $sectionWeights,\n                       testSections: $testSections,\n                       testId: $testId,\n                       assignment: $assignment,\n                       blockedNotes: $blockedNotes,\n                       notes: $notes,\n                       readingMaterials: [").concat(t,"]\n                       audioMaterials: [").concat(n,"]\n                      }\n                      multipleChoiceQuestionsInput: [").concat(a,"]\n                      essayQuestionsInput: [").concat(r,"]\n                      speakingQuestionsInput: [").concat(o,"]\n                      fillBlankQuestionsInput: {\n                        blanks: [").concat(s,"],\n                        fillBlankContent: $fillBlankContent\n                      }\n                     ) {\n                         _id\n                    }\n                  }\n                "),variables:{testId:i,course:c,published:e.published,isGradeIncluded:e.isGradeIncluded,instructor:l,testName:"test"===d?e.testName:e.assignmentName,testType:e.testType,passingGrade:parseFloat(e.passingGrade),passingRequired:"quiz"!==e.testType&&e.passingRequired,testWeight:"test"===d?e.isGradeIncluded?parseFloat(e.testWeight):0:e.isGradeIncluded?parseFloat(e.assignmentWeight):0,timer:e.timedTest?parseInt(e.testTime):null,availableOnDate:e.availableOnDate,dueDate:e.dueDate,gradeReleaseDate:e.gradeReleaseDate,allowLateSubmission:e.allowLateSubmission||!1,latePenalty:parseFloat(e.latePenalty),lateDaysAllowed:parseInt(e.lateDaysAllowed),sectionWeights:m,testSections:e.testSections,fillBlankContent:((e.fillBlankQuestions||{}).question||"").replace(/"/g,"'"),assignment:"test"!==d,blockedNotes:!!e.blockedNotes,notes:e.notes}}},Rb=function(e,t,n,a,r,o,s,i,c,l,u,d){var m=["multipleChoice","essay","speaking","fillInTheBlanks","test"],p="";(e.mcQuestions||[]).forEach((function(e){e.answers.forEach((function(e){return(e||"").replace(/"/g,"'")})),(e.correctAnswers||[]).forEach((function(e){return(e||"").replace(/"/g,"'")})),p+='{ \n                            question: "'.concat((e.question||"").replace(/"/g,"'"),'",\n                            marks: ').concat(e.marks,",\n                            answerOptions: ").concat(JSON.stringify(e.answers),", \n                            correctAnswers: ").concat(JSON.stringify(e.correctAnswers),', \n                            solution: "').concat((e.solution||"").replace(/"/g,"'").replace(/(\r\n|\n|\r)/gm," "),'" \n                            }')}));var f="";(e.essayQuestions||[]).forEach((function(e){f+='{ \n                            question: "'.concat((e.question||"").replace(/"/g,"'"),'", \n                            solution: "').concat((e.solution||"").replace(/"/g,"'").replace(/(\r\n|\n|\r)/gm," "),'",\n                            marks: ').concat(e.marks,",\n                            }")}));var g="";(e.speakingQuestions||[]).forEach((function(e,r){g+='{\n                              question: "'.concat(t[r]?"":(e.question||"").replace(/"/g,"'"),'", \n                              marks: ').concat(e.marks,",\n                              audio: ").concat(JSON.stringify(a[r]||""),", \n                              questionAudio: ").concat(JSON.stringify(n[r]||""),"\n                            }")}));var b="";((e.fillBlankQuestions||{}).answers||[]).forEach((function(e,t){var n=Object.values((r[t]||{}).answerOptions||{});b+="{ \n                            incorrectAnswers: ".concat(JSON.stringify((r[t]||{}).selectableAnswer?n.map((function(e){return e.trim()})):["","",""]),', \n                            correctAnswer: "').concat((e.answer||"").replace(/"/g,"'").replace(/&nbsp;/g," ").trim(),'", \n                            selectableAnswer: ').concat((r[t]||{}).selectableAnswer,", \n                            audio: ").concat(JSON.stringify(o[t]||""),",\n                            marks: ").concat((r[t]||{}).marks,", \n                            }")}));var h="";(s||[]).forEach((function(e,t){h+='{ \n                        content: "'.concat((c[t]||"").replace(/"/g,"'")||"",'",\n                        fileUpload: ').concat((l[m[t]]||{}).fileUpload||!1,',\n                        section: "').concat(m[t],'",\n                        }')}));var E="";return i.forEach((function(e,t){E+='{ \n                        audio: "'.concat(u[t]||"",'", \n                        fileUpload: ').concat((d[m[t]]||{}).fileUpload||!1,',\n                        section: "').concat(m[t],'",\n                        }')})),{formattedMcQuestions:p,formattedEssayQuestions:f,formattedSpeakingQuestions:g,formattedFillBlankQuestions:b,formattedReadingMaterials:h,formattedAudioMaterials:E}},Nb=function(e){var t=function(t){return(t||[]).map((function(t,n){return(0!==n||e.mcSectionWeight)&&(1!==n||e.essaySectionWeight)&&(2!==n||e.speakingSectionWeight)&&(3!==n||e.fillBlankSectionWeight)?t:null}))},n=e.readingMaterial||{},a=n.multipleChoice||{},r=n.essay||{},o=n.speaking||{},s=n.fillInTheBlanks||{},i=n.test||{},c=t([a.fileUpload?a.file:a.content,r.fileUpload?r.file:r.content,o.fileUpload?o.file:o.content,s.fileUpload?s.file:s.content,i.fileUpload?i.file:i.content]),l=e.audioMaterial||{};return{pdfFilesReadingMaterial:c,audioFilesListeningMaterial:t([(l.multipleChoice||{}).audioFile,(l.essay||{}).audioFile,(l.speaking||{}).audioFile,(l.fillInTheBlanks||{}).audioFile,(l.test||{}).audioFile]),rm:n,am:l,rmMc:a,rmEs:r,rmSp:o,rmFill:s,rmT:i}},Lb=Pa.a.mark(Bb),Pb=Pa.a.mark(Mb);function Bb(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E,v,y,T,k,S,w,O,C,x,A,F,D,_,I,j,R,N,L,P,B,M,q,U,Q,H,G,W,z,$,Y,J,K,Z,X;return Pa.a.wrap((function(ee){for(;;)switch(ee.prev=ee.next){case 0:return t=e.payload,n=t.formData,a=void 0===n?{}:n,r=t.token,o=t.editing,s=t.courseId,i=t.instructorId,c=t.testId,l=t.formType,u=t.filesToDelete,d="courses/".concat(s,"/tests/").concat(c),m=Nb(a),p=m.pdfFilesReadingMaterial,f=m.audioFilesListeningMaterial,g=m.rm,b=m.am,h=m.rmMc,E=m.rmEs,v=m.rmSp,y=m.rmFill,T=m.rmT,k=p.map((function(e,t){var n=e;return(0===t&&h.fileUpload||1===t&&E.fileUpload||2===t&&v.fileUpload||3===t&&y.fileUpload||4===t&&T.fileUpload)&&(n=uo(e)),e instanceof File&&(n=Qr(e,d)),n})),S=f.map((function(e,t){return e instanceof File?Qr(e,d):uo(e)})),w=(a.fillBlankQuestions||{}).answers,O=w.map((function(e,t){var n=e;return n=e.audioFile instanceof File?Qr(e.audioFile,d):uo(e.audioFile),e.audio||(n=null),n})),C=(a.speakingQuestions||[]).map((function(e){return e.audioAnswer})),x=(a.speakingQuestions||[]).map((function(e){return e.audioFile})),A=x.map((function(e,t){var n;return n=e instanceof File?Qr(e,d):uo(e),C[t]||(n=null),n})),F=(a.speakingQuestions||[]).map((function(e){return e.audioQuestion})),D=(a.speakingQuestions||[]).map((function(e){return e.audioFileQuestion})),_=D.map((function(e,t){var n;return n=e instanceof File?Qr(e,d):uo(e),F[t]||(n=null),n})),I=Rb(a,F,_,A,w,O,p,f,k,g,S,b),j=I.formattedAudioMaterials,R=I.formattedReadingMaterials,N=I.formattedMcQuestions,L=I.formattedEssayQuestions,P=I.formattedSpeakingQuestions,B=I.formattedFillBlankQuestions,ee.prev=14,M=jb(a,R,j,N,L,P,B,c,s,i,o,l),ee.next=18,Object(lu.b)(uu,M,r);case 18:if(q=ee.sent,console.log("Create test response: ",q),!q.data.errors){ee.next=22;break}throw new Error("Failed to ".concat(o?"update":"create"," the ").concat("test"===l?"test":"assignment"));case 22:if(!(u.length>0)){ee.next=25;break}return ee.next=25,Object(lu.e)(ge(u,r));case 25:return ee.next=27,Object(lu.e)(Ie(r));case 27:return ee.next=29,Object(lu.e)(xe(0));case 29:return ee.next=31,Object(lu.e)(Ce("test"===l?["Tests","New test","Question bank"]:["Assignments","New assignment","Question bank"]));case 31:return ee.next=33,Object(lu.e)({type:"CANCEL_EDITING"});case 33:return ee.next=35,Object(lu.e)({type:"CREATE_UPDATE_TEST_SUCCESS",message:void 0});case 35:return ee.next=37,Object(lu.c)(3e3);case 37:return ee.next=39,Object(lu.e)(Fe());case 39:ee.next=58;break;case 41:return ee.prev=41,ee.t0=ee.catch(14),console.log("Error ".concat(o?"updating":"creating"," the ").concat("test"===l?"test":"assignment"),ee.t0),ee.next=46,Object(lu.e)(Ce("test"===l?["Tests","New test","Question bank"]:["Assignments","New assignment","Question bank"]));case 46:return ee.next=48,Object(lu.e)(xe(0));case 48:return ee.next=50,Object(lu.e)({type:"CANCEL_EDITING"});case 50:return U=o?ua.t("alerts.test.updatingFail"):ua.t("alerts.test.creatingFail"),ee.next=53,Object(lu.e)(V(U));case 53:return ee.next=55,Object(lu.c)(3e3);case 55:return ee.next=57,Object(lu.e)(Fe());case 57:return ee.abrupt("return");case 58:ee.prev=58,ee.t1=Pa.a.keys(p);case 60:if((ee.t2=ee.t1()).done){ee.next=68;break}if(Q=ee.t2.value,!p.hasOwnProperty(Q)){ee.next=66;break}if(!(p[Q]instanceof File)){ee.next=66;break}return ee.next=66,Object(lu.b)(Hr,p[Q],k[Q],r);case 66:ee.next=60;break;case 68:ee.next=81;break;case 70:return ee.prev=70,ee.t3=ee.catch(58),console.log("error uploading pdf files: ",ee.t3),H=ua.t("alerts.test.uploadingTestResourcesFail"),ee.next=76,Object(lu.e)(V(H));case 76:return ee.next=78,Object(lu.c)(3e3);case 78:return ee.next=80,Object(lu.e)(Fe());case 80:return ee.abrupt("return");case 81:ee.prev=81,ee.t4=Pa.a.keys(f);case 83:if((ee.t5=ee.t4()).done){ee.next=91;break}if(G=ee.t5.value,!f.hasOwnProperty(G)){ee.next=89;break}if(!(f[G]instanceof File)){ee.next=89;break}return ee.next=89,Object(lu.b)(Hr,f[G],S[G],r);case 89:ee.next=83;break;case 91:ee.next=104;break;case 93:return ee.prev=93,ee.t6=ee.catch(81),console.log("error audio material audio files: ",ee.t6),W=ua.t("alerts.test.uploadingAudioResourcesFail"),ee.next=99,Object(lu.e)(V(W));case 99:return ee.next=101,Object(lu.c)(3e3);case 101:return ee.next=103,Object(lu.e)(Fe());case 103:return ee.abrupt("return");case 104:z=w.map((function(e){return e.audio?e.audioFile:null})),ee.prev=105,ee.t7=Pa.a.keys(z);case 107:if((ee.t8=ee.t7()).done){ee.next=115;break}if($=ee.t8.value,!z.hasOwnProperty($)){ee.next=113;break}if(!(z[$]instanceof File)){ee.next=113;break}return ee.next=113,Object(lu.b)(Hr,z[$],O[$],r);case 113:ee.next=107;break;case 115:ee.next=128;break;case 117:return ee.prev=117,ee.t9=ee.catch(105),console.log("Error fill in the blanks section audio files: ",ee.t9),Y=ua.t("alerts.test.uploadingFillblanksAudioFail"),ee.next=123,Object(lu.e)(V(Y));case 123:return ee.next=125,Object(lu.c)(3e3);case 125:return ee.next=127,Object(lu.e)(Fe());case 127:return ee.abrupt("return");case 128:ee.prev=128,ee.t10=Pa.a.keys(x);case 130:if((ee.t11=ee.t10()).done){ee.next=138;break}if(J=ee.t11.value,!x.hasOwnProperty(J)){ee.next=136;break}if(!(x[J]instanceof File)){ee.next=136;break}return ee.next=136,Object(lu.b)(Hr,x[J],A[J],r);case 136:ee.next=130;break;case 138:ee.next=151;break;case 140:return ee.prev=140,ee.t12=ee.catch(128),console.log("error uploading speaking section answer files: ",ee.t12),K=ua.t("alerts.test.uploadingSpeakingAnswerAudioFail"),ee.next=146,Object(lu.e)(V(K));case 146:return ee.next=148,Object(lu.c)(3e3);case 148:return ee.next=150,Object(lu.e)(Fe());case 150:return ee.abrupt("return");case 151:ee.prev=151,ee.t13=Pa.a.keys(D);case 153:if((ee.t14=ee.t13()).done){ee.next=161;break}if(Z=ee.t14.value,!D.hasOwnProperty(Z)){ee.next=159;break}if(!(D[Z]instanceof File)){ee.next=159;break}return ee.next=159,Object(lu.b)(Hr,D[Z],_[Z],r);case 159:ee.next=153;break;case 161:ee.next=174;break;case 163:return ee.prev=163,ee.t15=ee.catch(151),console.log("Error uploading speaking section question files: ",ee.t15),X=ua.t("alerts.test.uploadingSpeakingQuestionAudioFail"),ee.next=169,Object(lu.e)(V(X));case 169:return ee.next=171,Object(lu.c)(3e3);case 171:return ee.next=173,Object(lu.e)(Fe());case 173:return ee.abrupt("return");case 174:case"end":return ee.stop()}}),Lb,null,[[14,41],[58,70],[81,93],[105,117],[128,140],[151,163]])}function Mb(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("CREATE_UPDATE_TEST_START",Bb);case 2:case"end":return e.stop()}}),Pb)}var qb=[Object(lu.d)(Mb)],Ub=function(e){return{query:'\n            mutation {\n              deleteTest(id: "'.concat(e,'")\n            }\n          ')}},Qb=Pa.a.mark(Gb),Hb=Pa.a.mark(Wb);function Gb(e){var t,n,a,r,o,s,i;return Pa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.testId,a=t.token,r=Ub(n),c.prev=3,c.next=6,Object(lu.b)(uu,r,a);case 6:if(o=c.sent,console.log("Deleting test response: ",o),!o.data.errors){c.next=10;break}throw new Error("Deleting the test failed");case 10:return s=ua.t("alerts.test.testDeleteSuccess"),c.next=13,Object(lu.e)({type:"DELETE_TEST_SUCCESS",message:s});case 13:return c.next=15,Object(lu.e)(Ie(a));case 15:return c.next=17,Object(lu.e)({type:"CLOSE_MODAL"});case 17:return c.next=19,Object(lu.e)(ye(a));case 19:return c.next=21,Object(lu.c)(3e3);case 21:return c.next=23,Object(lu.e)(Fe());case 23:c.next=35;break;case 25:return c.prev=25,c.t0=c.catch(3),console.log("err",c.t0),i=ua.t("alerts.test.testDeleteFail"),c.next=31,Object(lu.e)(Y(i));case 31:return c.next=33,Object(lu.c)(3e3);case 33:return c.next=35,Object(lu.e)(Fe());case 35:case"end":return c.stop()}}),Qb,null,[[3,25]])}function Wb(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("DELETE_TEST_START",Gb);case 2:case"end":return e.stop()}}),Hb)}var zb=[Object(lu.d)(Wb)],Vb=function(e,t,n){return{query:"\n          mutation ResetTest($testId: ID!,$studentId: ID,$message: String) {\n            resetTest(testId: $testId,studentId: $studentId,message: $message)\n          }\n        ",variables:{testId:e,studentId:t,message:n}}},$b=Pa.a.mark(Jb),Yb=Pa.a.mark(Kb);function Jb(e){var t,n,a,r,o,s,i,c,l,u;return Pa.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,n=t.testId,a=t.token,r=t.studentId,o=t.courseId,s=t.message,i=Vb(n,r,s),d.prev=3,d.next=6,Object(lu.b)(uu,i,a);case 6:if(c=d.sent,console.log("Reseting test response: ",c),!c.data.errors){d.next=10;break}throw new Error("Reseting the test failed");case 10:return l=ua.t("alerts.test.testResetSuccess"),d.next=13,Object(lu.e)(J(l));case 13:return d.next=15,Object(lu.e)(Ie(a));case 15:return d.next=17,Object(lu.e)(Ne(o,a));case 17:return d.next=19,Object(lu.e)({type:"CLOSE_MODAL"});case 19:return d.next=21,Object(lu.e)(ye(a));case 21:return d.next=23,Object(lu.c)(3e3);case 23:return d.next=25,Object(lu.e)(Fe());case 25:d.next=37;break;case 27:return d.prev=27,d.t0=d.catch(3),console.log("err",d.t0),u=ua.t("alerts.test.testResetFail"),d.next=33,Object(lu.e)(K(u));case 33:return d.next=35,Object(lu.c)(3e3);case 35:return d.next=37,Object(lu.e)(Fe());case 37:case"end":return d.stop()}}),$b,null,[[3,27]])}function Kb(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("RESET_TEST_START",Jb);case 2:case"end":return e.stop()}}),Yb)}var Zb=[Object(lu.d)(Kb)],Xb=function(e,t,n,a,r,o,s,i,c,l,u,d){return{query:"\n                mutation GradeTest(\n                  $studentId: ID!, \n                  $testId:ID!,\n                  $testClosed:Boolean!,\n                  $graded:Boolean!,\n                  $grade:Float!,\n                  $gradeOverride:Boolean!,\n                  $gradeAdjustmentExplanation:String,\n                  $gradingInProgress:Boolean!,\n                  $marking:Boolean!,\n                  $latePenalty:Float,\n                  $sectionGrades:[Float]\n                  ) {       \n                  submitTest(\n                    studentId:$studentId,\n                    testId:$testId,\n                    testClosed: $testClosed,\n                    graded: $graded,\n                    grade: $grade,\n                    gradeOverride: $gradeOverride,\n                    gradeAdjustmentExplanation: $gradeAdjustmentExplanation,\n                    gradingInProgress: $gradingInProgress,\n                    marking: $marking,\n                    latePenalty: $latePenalty,\n                    sectionGrades: $sectionGrades,\n                    multipleChoiceAnswersInput: [".concat(t,"],\n                    essayAnswersInput: [").concat(n,"],\n                    speakingAnswersInput: [").concat(a,"],\n                    fillBlankAnswersInput: [").concat(r,"],\n                    )\n                }\n              "),variables:{testId:o,studentId:s,testClosed:!0,marking:i,grade:e.gradeOverride?parseFloat(parseFloat(e.gradeAdjusted).toFixed(2)):c>0?parseFloat(parseFloat(c).toFixed(2)):0,gradeOverride:e.gradeOverride||!1,gradeAdjustmentExplanation:e.gradeAdjustmentExplanation,graded:l,gradingInProgress:u,latePenalty:parseFloat(e.latePenalty),sectionGrades:(d||[]).map((function(e){return parseFloat(e.toFixed(2))}))}}},eh=function(e){return((e||{}).additionalNotes||"").replace(/"/g,"'").replace(/(\r\n|\n|\r)/gm," ")},th=function(e){return parseFloat((e||{}).marks||0).toFixed(2)},nh=function(e,t){var n="";((e||{}).mcSection||[]).forEach((function(e){n+="{ \n              marks: ".concat(th(e),', \n              additionalNotes: "').concat(eh(e),'" }')}));var a="";((e||{}).essaySection||[]).forEach((function(e){a+="{ \n                marks: ".concat(th(e),' , \n                additionalNotes: "').concat(eh(e),'", \n                instructorCorrection: "').concat(((e||{}).instructorCorrection||"").replace(/"/g,"'"),'",\n                allowCorrection: ').concat((e||{}).allowCorrection||!1,"\n               }")}));var r="";((e||{}).speakingSection||[]).forEach((function(e,n){r+="{ \n                marks: ".concat(th(e),', \n                additionalNotes: "').concat(eh(e),'",  \n                feedbackAudio: ').concat(JSON.stringify(t[n]||"")," \n              }")}));var o="";return((e||{}).fillInBlankSection||[]).forEach((function(e){o+="{ \n            marks: ".concat(th(e),', \n            additionalNotes: "').concat(eh(e),'" }')})),{formattedMultipleChoiceResults:n,formattedEssayResults:a,formattedSpeakingResults:r,formattedFillBlankResults:o}},ah=Pa.a.mark(oh),rh=Pa.a.mark(sh);function oh(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b,h,E,v,y,T,k,S,w,O;return Pa.a.wrap((function(C){for(;;)switch(C.prev=C.next){case 0:return t=e.payload,n=t.formValues,a=t.token,r=t.studentId,o=t.test,s=t.graded,i=t.marking,c=t.sectionGrades,l=t.gradingInProgress,u=t.grade,d=t.filesToDelete,m=t.filePath,p=((n||{}).speakingSection||[]).map((function(e){return(e||{}).audioFile})),f=p.map((function(e,t){var n;return n=e instanceof File?Qr(e,m):uo(e),e||(n=null),n})),g=nh(n,f),b=g.formattedMultipleChoiceResults,h=g.formattedEssayResults,E=g.formattedSpeakingResults,v=g.formattedFillBlankResults,y=Xb(n,b,h,E,v,o._id,r,i,u,s,l,c),C.prev=5,C.next=8,Object(lu.b)(uu,y,a);case 8:if(T=C.sent,console.log("Grade test response",T),!T.data.errors){C.next=12;break}throw new Error("Failed to ".concat(s?"post":"save"," the grades"));case 12:C.next=25;break;case 14:return C.prev=14,C.t0=C.catch(5),console.log("Failed to post or save the grades",C.t0),k=s?ua.t("alerts.test.postGradesFail"):ua.t("alerts.test.saveGradesFail"),C.next=20,Object(lu.e)(Z(k));case 20:return C.next=22,Object(lu.c)(3e3);case 22:return C.next=24,Object(lu.e)(Fe());case 24:return C.abrupt("return");case 25:C.prev=25,C.t1=Pa.a.keys(p);case 27:if((C.t2=C.t1()).done){C.next=35;break}if(S=C.t2.value,!p.hasOwnProperty(S)){C.next=33;break}if(!(p[S]instanceof File)){C.next=33;break}return C.next=33,Object(lu.b)(Hr,p[S],f[S],a);case 33:C.next=27;break;case 35:C.next=48;break;case 37:return C.prev=37,C.t3=C.catch(25),console.log("Error uploading feedback audio file: ",C.t3),w=ua.t("alerts.test.uploadFeedbackAudioFail"),C.next=43,Object(lu.e)(Z(w));case 43:return C.next=45,Object(lu.c)(3e3);case 45:return C.next=47,Object(lu.e)(Fe());case 47:return C.abrupt("return");case 48:if(O=s?ua.t("alerts.test.postGradesSuccess"):ua.t("alerts.test.saveGradesSuccess"),!((d||[]).length>0)){C.next=52;break}return C.next=52,Object(lu.e)(ge(d,a));case 52:return C.next=54,Object(lu.e)(Ne(o.course,a));case 54:return C.next=56,Object(lu.e)(Ie(a));case 56:return C.next=58,Object(lu.e)({type:"CLOSE_MODAL"});case 58:return C.next=60,Object(lu.e)({type:"GRADE_TEST_SUCCESS",message:O});case 60:return C.next=62,Object(lu.e)({type:"CLEAR_LOADED_INSTRUCTOR_DATA"});case 62:return console.log("after clear data action sent"),C.next=65,Object(lu.c)(3e3);case 65:return C.next=67,Object(lu.e)(Fe());case 67:case"end":return C.stop()}}),ah,null,[[5,14],[25,37]])}function sh(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("GRADE_TEST_START",oh);case 2:case"end":return e.stop()}}),rh)}var ih=[Object(lu.d)(sh)],ch=function(e,t,n){return{query:'\n            mutation CloseTest {\n              closeTest(test: "'.concat(e,'",student: "').concat(t,'",isExcused: ').concat(n,")\n             {   \n              _id\n              test\n              closed\n              latePenalty\n              graded\n              gradingInProgress\n              grade\n              gradeOverride\n              isExcused\n              gradeAdjustmentExplanation\n              multiplechoiceSection {\n                grade\n                answers {\n                  questionNumber\n                  answers\n                  additionalNotes\n                  marks\n                }\n              }\n              essaySection {\n                grade\n                answers {\n                  questionNumber\n                  answer\n                  additionalNotes\n                  marks\n                  instructorCorrection\n                  allowCorrection\n                }\n              }\n              speakingSection {\n                grade\n                answers {\n                  questionNumber\n                  answer\n                  additionalNotes\n                  marks\n                  feedbackAudio\n                }\n              }\n              fillInBlanksSection {\n                grade\n                answers {\n                  questionNumber\n                  answer\n                  additionalNotes\n                  marks\n                }\n              }\n            }\n          }\n          ")}},lh=Pa.a.mark(dh),uh=Pa.a.mark(mh);function dh(e){var t,n,a,r,o,s,i,c,l,u,d;return Pa.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,n=t.testId,a=t.studentId,r=t.token,o=t.instructorTest,s=t.isExcused,i=ch(n,a,s),m.prev=2,m.next=5,Object(lu.b)(uu,i,r);case 5:if(c=m.sent,console.log("Closing test resonse: ",c),!c.data.errors){m.next=9;break}throw new Error("Closing the test failed!");case 9:return l=c.data.data.closeTest,m.next=12,Object(lu.e)({type:"CLOSE_TEST_SUCCESS",test:n,student:a});case 12:if(console.log("response.data.data",c.data.data),s){m.next=21;break}return m.next=16,wc({testResult:l},[],o);case 16:return u=m.sent,m.next=19,Object(lu.e)(z(u));case 19:return m.next=21,Object(lu.e)(Ae({results:[{testResult:c.data.data.closeTest,student:{_id:a},test:o}],testId:n,studentId:a},"gradeTest"));case 21:return m.next=23,Object(lu.e)(Ne(o.course,r));case 23:m.next=34;break;case 25:return m.prev=25,m.t0=m.catch(2),d=ua.t("alerts.test.closeTestFail"),m.next=30,Object(lu.e)({type:"CLOSE_TEST_FAIL",message:d});case 30:return m.next=32,Object(lu.c)(3e3);case 32:return m.next=34,Object(lu.e)(Fe());case 34:case"end":return m.stop()}}),lh,null,[[2,25]])}function mh(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("CLOSE_TEST_START",dh);case 2:case"end":return e.stop()}}),uh)}var ph=[Object(lu.d)(mh)],fh=Pa.a.mark(bh),gh=Pa.a.mark(hh);function bh(e){var t,n,a,r,o;return Pa.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.token,a={query:"\n               query FetchInstructors  {\n                 instructors {\n                   _id\n                   firstName\n                   lastName\n                   email\n                   coursesTeaching {\n                     _id\n                     courseName\n                   }\n                 }\n               }\n             "},s.prev=3,s.next=6,Object(lu.b)(uu,a,n);case 6:if(r=s.sent,console.log("Fetching instructors response: ",r),!r.data.errors){s.next=10;break}throw new Error("Getting instructors failed");case 10:return s.next=12,Object(lu.e)({type:"FETCH_INSTRUCTORS_SUCCESS",instructors:r.data.data.instructors});case 12:return s.next=14,Object(lu.c)(3e3);case 14:return s.next=16,Object(lu.e)(Fe());case 16:s.next=28;break;case 18:return s.prev=18,s.t0=s.catch(3),console.log("Fetching instructors error: ",s.t0),o=ua.t("alerts.instructor.retrieveInstructorsFail"),s.next=24,Object(lu.e)({type:"FETCH_INSTRUCTORS_FAIL",message:o});case 24:return s.next=26,Object(lu.c)(3e3);case 26:return s.next=28,Object(lu.e)(Fe());case 28:case"end":return s.stop()}}),fh,null,[[3,18]])}function hh(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("FETCH_INSTRUCTORS_START",bh);case 2:case"end":return e.stop()}}),gh)}var Eh=[Object(lu.d)(hh)],vh=function(e){var t=e.map((function(e){var t=[];((e||{}).lessons||{}).forEach((function(e){t.push({documentType:"lesson",documentId:e})})),((e||{}).tests||[]).forEach((function(e){t.push({documentType:"test",documentId:e})})),((e||{}).assignments||[]).forEach((function(e){t.push({documentType:"assignment",documentId:e})}));var n=((e||{}).subjects||[]).map((function(e){var t=[];((e||{}).lessons||{}).forEach((function(e){t.push({documentType:"lesson",documentId:e})})),((e||{}).tests||[]).forEach((function(e){t.push({documentType:"test",documentId:e})})),((e||{}).assignments||[]).forEach((function(e){t.push({documentType:"assignment",documentId:e})}));var n=((e||{}).topics||[]).map((function(e){var t=[];return((e||{}).lessons||{}).forEach((function(e){t.push({documentType:"lesson",documentId:e})})),((e||{}).tests||[]).forEach((function(e){t.push({documentType:"test",documentId:e})})),((e||{}).assignments||[]).forEach((function(e){t.push({documentType:"assignment",documentId:e})})),Object(It.a)(Object(It.a)({},e),{},{folder:t})}));return Object(It.a)(Object(It.a)({},e),{},{folder:t,topics:n})}));return Object(It.a)(Object(It.a)({},e),{},{folder:t,subjects:n})}));return 0===t.length?[{subjects:[],lessons:[],tests:[],assignments:[],moduleName:"",isDisabled:!0}]:t},yh=function(e){return{query:"query FetchCategory($courseId: ID!) {\n          category(courseId: $courseId) {\n            _id\n            modules {\n            _id\n            moduleName\n            lessons\n            tests\n            assignments\n            subjects {\n              _id\n              subjectName\n              lessons\n              tests\n              assignments\n              topics {\n                _id\n                topicName\n                lessons\n                tests\n                assignments\n              }\n            }\n          }\n        }\n      } \n      ",variables:{courseId:e}}},Th=Pa.a.mark(Sh),kh=Pa.a.mark(wh);function Sh(e){var t,n,a,r,o,s,i,c,l;return Pa.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.courseId,a=t.token,r=yh(n),u.prev=2,u.next=5,Object(lu.b)(uu,r,a);case 5:if(o=u.sent,console.log("Getting modules response: ",o),!o.data.errors){u.next=9;break}throw new Error("Getting modules failed");case 9:return s=(o.data.data.category||{}).modules||[],i=vh(s),c=(o.data.data.category||{})._id,u.next=14,Object(lu.e)(we({modules:i,_id:c}));case 14:u.next=26;break;case 16:return u.prev=16,u.t0=u.catch(2),console.log("Failed to retrieve modules",u.t0),l=ua.t("alerts.modules.retrieveModulesFailed"),u.next=22,Object(lu.e)({type:"FETCH_MODULES_FAIL",message:l});case 22:return u.next=24,Object(lu.c)(3e3);case 24:return u.next=26,Object(lu.e)(Fe());case 26:case"end":return u.stop()}}),Th,null,[[2,16]])}function wh(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("FETCH_MODULES_START",Sh);case 2:case"end":return e.stop()}}),kh)}var Oh=[Object(lu.d)(wh)],Ch=function(e){return{query:"\n           query FetchStudents($courseId: ID!)  {\n             students(courseId: $courseId) {\n               _id\n               firstName\n               lastName\n               email\n               profilePicture\n               dob\n               completedCourses\n               lastLogin\n               documents {\n                 document\n                 documentType\n               }\n               testInSession {\n                test\n                startTime\n                endTime\n               }\n               testResults {\n                _id\n                closed\n                test\n                student\n                course\n                latePenalty\n                graded\n                gradingInProgress\n                grade\n                gradeOverride\n                gradeAdjustmentExplanation\n                isExcused\n                submittedOn\n                lastSavedOn\n                multiplechoiceSection {\n                  grade\n                  answers {\n                    questionNumber\n                    answers\n                    additionalNotes\n                    marks\n                  }\n                }\n                essaySection {\n                  grade\n                  answers {\n                    questionNumber\n                    answer\n                    additionalNotes\n                    marks\n                    instructorCorrection\n                    allowCorrection\n                  }\n                }\n                speakingSection {\n                  grade\n                  answers {\n                    questionNumber\n                    answer\n                    additionalNotes\n                    marks\n                    feedbackAudio\n                  }\n                }\n                fillInBlanksSection {\n                  grade\n                  answers {\n                    questionNumber\n                    answer\n                    additionalNotes\n                    marks\n                  }\n                }\n               }\n             }\n           }\n         ",variables:{courseId:e}}},xh=Pa.a.mark(Fh),Ah=Pa.a.mark(Dh);function Fh(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b;return Pa.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.courseId,a=t.token,r=t.action,o=void 0===r?{}:r,s=Ch(n),h.prev=2,h.next=5,Object(lu.b)(uu,s,a);case 5:if(i=h.sent,console.log("Getting students response: ",i),!i.data.errors){h.next=9;break}throw new Error("Failed to get students");case 9:return c=i.data.data.students,h.next=12,Object(lu.e)(Le(c));case 12:if("openSubmittedTest"!==(o||{}).actionType){h.next=26;break}return l=o.payload.notification,u=(o||{}).payload.test,d=(c||[]).find((function(e){return e._id===l.fromUser}))||{},m=(d.testResults||[]).map((function(e){return{testResult:e,student:d,test:e.test===u._id?u:{}}}))||[],p={results:m,testId:l.documentId,studentId:l.fromUser},f=m.find((function(e){if(e.student._id===l.fromUser&&e.test._id===l.documentId)return e}))||{},h.next=21,Object(lu.e)(Ae(p,"gradeTest"));case 21:return h.next=23,wc(f,m);case 23:return g=h.sent,h.next=26,Object(lu.e)(z(g));case 26:h.next=38;break;case 28:return h.prev=28,h.t0=h.catch(2),console.log("Failed to retrieve students",h.t0),b=ua.t("alerts.student.retrieveStudentsFail"),h.next=34,Object(lu.e)({type:"FETCH_STUDENTS_FAIL",message:b});case 34:return h.next=36,Object(lu.c)(3e3);case 36:return h.next=38,Object(lu.e)(Fe());case 38:case"end":return h.stop()}}),xh,null,[[2,28]])}function Dh(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("FETCH_STUDENTS_START",Fh);case 2:case"end":return e.stop()}}),Ah)}var _h=[Object(lu.d)(Dh)],Ih=Pa.a.mark(Rh),jh=Pa.a.mark(Nh);function Rh(e){var t,n,a,r,o,s,i,c,l,u;return Pa.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,n=t.token,a={query:"\n                  query FetchAvailableCourses  {\n                    courses {\n                      _id\n                      courseName\n                      courseInstructor {\n                        _id\n                        firstName\n                        lastName\n                        profilePicture\n                        email\n                      }\n                      enrollmentStartDate\n                      enrollmentEndDate\n                      courseStartDate\n                      enrolled\n                      droppedOut\n                      grade\n                      passed\n                      numberOfStudents\n                      \n                      accessDenied\n                      enrollmentRequested\n                      courseEndDate\n                      courseDropDeadline\n                      resources {\n                        _id\n                        resourceName\n                        resource\n                      }\n                      studentGrades {\n                        student\n                        grade\n                        passed\n                        gradeOverride\n                        gradeAdjustmentExplanation\n                      }\n                      studentsEnrollRequests {\n                        approved\n                        denied\n                        deniedReason\n                        droppedOut\n                        resubmissionAllowed\n                        student {\n                          _id\n                          firstName\n                          lastName\n                          email\n                          lastLogin\n                          dob\n                          \n                          coursesEnrolled\n                          profilePicture\n                          documents {\n                            documentType\n                            document\n                          }\n                          testResults {\n                            _id\n                            student\n                            test\n                            course\n                            grade\n                            graded\n                            closed\n                            isExcused\n                          }\n                        }\n                      }\n                      syllabus\n                      courseImage\n                      courseActive\n                      studentCapacity\n                      language\n                      completed\n                      totalIncludedTests\n                      prerequisites {\n                        _id\n                        courseName\n                      }\n                      regularOfficeHours {\n                        _id\n                        day\n                        startTime\n                        endTime\n                        timezoneRegion\n                      }\n                      irregularOfficeHours {\n                       _id\n                       date\n                       startTime\n                       endTime\n                       timezoneRegion\n                      }\n                      tests {\n                        _id\n                        testName\n                        course\n                        published\n                        testType\n                        weight\n                        timer\n                        createdAt\n                        passingGrade\n                        passingRequired\n                        availableOnDate\n                        dueDate\n                        isGradeIncluded\n                        gradeReleaseDate\n                        lateDaysAllowed\n                        allowLateSubmission\n                        latePenalty\n                        assignment\n                        blockedNotes\n                        notes\n                        classAverage\n                        completed\n                        sectionWeights {\n                          mcSection\n                          essaySection\n                          fillBlankSection\n                          speakingSection\n                        }\n                        multipleChoiceQuestions {\n                          _id\n                          question\n                          marks\n                          correctAnswers\n                          answerOptions\n                          solution\n                        }\n                        essayQuestions {\n                          _id\n                          question\n                          marks\n                          solution\n                        }\n                        speakingQuestions {\n                         _id\n                         question\n                         marks\n                         questionAudio\n                         audio\n                        }\n                        fillInBlanksQuestions {\n                          text\n                          blanks {\n                            _id\n                            incorrectAnswers\n                            correctAnswer\n                            marks\n                            selectableAnswer\n                            audio\n                            answerOptions\n                          }\n                        }\n                        readingMaterials {\n                          content\n                          section\n                          fileUpload\n                        }\n                        audioMaterials {\n                          audio\n                          section\n                          fileUpload\n                        }\n                      }\n                      lessons {\n                        _id\n                        lessonName\n                        availableOnDate\n                        published\n                        lessonSlides {\n                          seen\n                          studentsSeen\n                          slideContent\n                          audio\n                          video\n                        }\n                      }\n                      \n                    }\n                  }\n                "},d.prev=3,d.next=6,Object(lu.b)(uu,a,n);case 6:if(!(r=d.sent).data.errors){d.next=9;break}throw new Error("Failed to get te courses");case 9:return o=r.data.data.courses,s=o.map((function(e){return Object(It.a)(Object(It.a)({},e),{},{resources:e.resources.map((function(e){return{_id:e._id,resourceName:e.resourceName,resource:is(e.resource),loadedResource:e.resource}}))})})),d.next=13,Object(lu.e)(je(s));case 13:if(i=Je.location.pathname,!(c=(i.split("course/")[1]||"").split("/")[0])){d.next=19;break}return l=o.find((function(e){return e._id===c})),d.next=19,Object(lu.e)(_e(l));case 19:d.next=31;break;case 21:return d.prev=21,d.t0=d.catch(3),console.log("Failed to get the courses",d.t0),u=ua.t("alerts.course.fetchCoursesFail"),d.next=27,Object(lu.e)({type:"FETCH_COURSES_FAIL",message:u});case 27:return d.next=29,Object(lu.c)(3e3);case 29:return d.next=31,Object(lu.e)(Fe());case 31:case"end":return d.stop()}}),Ih,null,[[3,21]])}function Nh(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("FETCH_COURSES_START",Rh);case 2:case"end":return e.stop()}}),jh)}var Lh=[Object(lu.d)(Nh)],Ph=Pa.a.mark(Uh),Bh=Pa.a.mark(Qh),Mh=Pa.a.mark(Hh),qh=Pa.a.mark(Gh);function Uh(e){var t,n,a,r,o,s;return Pa.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.file,a=t.key,r=t.type,o=t.token,i.prev=2,i.next=5,Object(lu.b)(Hr,n,a,o,r);case 5:return i.next=7,Object(lu.e)({type:"UPLOAD_FILE_SUCCESS"});case 7:i.next=19;break;case 9:return i.prev=9,i.t0=i.catch(2),console.log("err",i.t0),s=ua.t("alerts.files.uploadFileFailed"),i.next=15,Object(lu.e)({type:"UPLOAD_FILE_FAIL",message:s});case 15:return i.next=17,Object(lu.c)(3e3);case 17:return i.next=19,Object(lu.e)(Fe());case 19:case"end":return i.stop()}}),Ph,null,[[2,9]])}function Qh(e){var t,n,a,r,o,s,i,c;return Pa.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.payload,n=t.fileUrls,a=t.token,r=(n||[]).filter((function(e){return"string"===typeof e})).map((function(e){return e.replace("https://e-learn-bucket.s3.ca-central-1.amazonaws.com/","")})),n&&n.length>0&&r.length>0){l.next=7;break}return l.next=6,Object(lu.e)({type:"DELETE_FILES_SUCCESS"});case 6:return l.abrupt("return");case 7:return o=new FormData,r.forEach((function(e){o.append("url",e)})),l.prev=9,s={url:"".concat("https://mernstackelearn.herokuapp.com/","delete-files"),method:"PUT",headers:{Authorization:"Bearer "+a},data:o},l.next=13,Object(lu.b)(Rr.a,s);case 13:if(i=l.sent,console.log("Deleting files response: ",i),!i.data.errors){l.next=17;break}throw new Error("Deleting the files failed");case 17:return l.next=19,Object(lu.e)({type:"DELETE_FILES_SUCCESS"});case 19:l.next=31;break;case 21:return l.prev=21,l.t0=l.catch(9),console.log("err",l.t0),c=ua.t("alerts.files.deleteFilesFailed"),l.next=27,Object(lu.e)({type:"DELETE_FILES_FAIL",message:c});case 27:return l.next=29,Object(lu.c)(3e3);case 29:return l.next=31,Object(lu.e)(Fe());case 31:case"end":return l.stop()}}),Bh,null,[[9,21]])}function Hh(){var e;return Pa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(lu.f)("UPLOAD_FILE_START");case 3:return e=t.sent,t.next=6,Object(lu.b)(Uh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}}),Mh)}function Gh(){var e;return Pa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(lu.f)("DELETE_FILES_START");case 3:return e=t.sent,t.next=6,Object(lu.b)(Qh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}}),qh)}var Wh=[Object(lu.d)(Gh),Object(lu.d)(Hh)],zh=function(e,t){return{query:"mutation FetchTest($testId:ID!,$password:String) {       \n                        fetchTest(testId:$testId,password:$password) {\n                          test{\n                          _id\n                          course\n                          testName\n                          published\n                          testType\n                          weight\n                          createdAt\n                          timer\n                          passingGrade\n                          passingRequired\n                          availableOnDate\n                          dueDate\n                          gradeReleaseDate\n                          allowLateSubmission\n                          lateDaysAllowed\n                          isGradeIncluded\n                          latePenalty\n                          blockedNotes\n                          assignment\n                          startTime\n                          endTime\n                          notes\n                          readingMaterials {\n                            content\n                            section\n                            fileUpload\n                          }\n                          audioMaterials {\n                            audio\n                            section\n                            fileUpload\n                          }\n                          sectionWeights {\n                            mcSection\n                            essaySection\n                            fillBlankSection\n                            speakingSection\n                          }\n                          essayQuestions {\n                            _id\n                            question\n                            marks\n                            solution\n                          }\n                          speakingQuestions {\n                           _id\n                           question\n                           marks\n                           questionAudio\n                           audio\n                         }\n                          multipleChoiceQuestions {\n                           _id\n                           question\n                           marks\n                           correctAnswers\n                           answerOptions\n                           solution\n                          }\n                          fillInBlanksQuestions {\n                            text\n                            blanks {\n                              _id\n                              incorrectAnswers\n                              correctAnswer\n                              marks\n                              selectableAnswer\n                              audio\n                              answerOptions\n                            }\n                          }\n                        }\n                        result {\n                          _id\n                          multiplechoiceSection {\n                            grade\n                            answers {\n                              questionNumber\n                              answers\n                              additionalNotes\n                              marks\n                            }\n                          }\n                          essaySection {\n                            grade\n                            answers {\n                              questionNumber\n                              answer\n                              additionalNotes\n                              marks\n                              instructorCorrection\n                              allowCorrection\n                            }\n                          }\n                          speakingSection {\n                            grade\n                            answers {\n                              questionNumber\n                              answer\n                              additionalNotes\n                              marks\n                              feedbackAudio\n                            }\n                          }\n                          fillInBlanksSection {\n                            grade\n                            answers {\n                              questionNumber\n                              answer\n                              additionalNotes\n                              marks\n                            }\n                          }\n                        }\n                      }\n                    }\n                    ",variables:{testId:e,password:t}}},Vh=function(e,t){return{_id:t._id,course:e.course,test:e._id,mcQuestions:(e.multipleChoiceQuestions||[]).map((function(e,n){var a=((t.multiplechoiceSection||{}).answers||[]).find((function(e){return e.questionNumber===n+1}));return a?a.answers:[]})),essayQuestions:(e.essayQuestions||[]).map((function(e,n){var a=((t.essaySection||{}).answers||[]).find((function(e){return e.questionNumber===n+1}));return a?a.answer:""})),speakingQuestions:(e.speakingQuestions||[]).map((function(e,n){var a=((t.speakingSection||{}).answers||[]).find((function(e){return e.questionNumber===n+1}));return a?{recordedBlob:(a||{}).answer&&""!==(a||{}).answer?a.answer:"",audioFile:(a||{}).answer||""}:{recordedBlob:"",audioFile:""}})),fillBlankQuestions:{answers:((e.fillInBlanksQuestions||{}).blanks||[]).map((function(e,n){var a=((t.fillInBlanksSection||{}).answers||[]).find((function(e){return e.questionNumber===n+1}));return a?a.answer:""}))},readingMaterials:e.readingMaterials,audioMaterials:e.audioMaterials}},$h=function(e){var t,n=[];e.sectionWeights.mcSection>0&&n.push("mc"),e.sectionWeights.essaySection>0&&n.push("essay"),e.sectionWeights.speakingSection>0&&n.push("speaking"),e.sectionWeights.fillBlankSection>0&&n.push("fillblanks");var a=(e.readingMaterials||[]).map((function(e){return{file:e.fileUpload?is(e.content):"",fileUpload:e.fileUpload,loadedPDF:e.fileUpload?e.content:"",content:e.fileUpload?"":e.content}})),r=(e.audioMaterials||[]).map((function(e){return{audioFile:e.audio,fileUpload:e.fileUpload,recordedBlob:e.audio?e.audio:null}})),o={multipleChoice:a[0],essay:a[1],speaking:a[2],fillInTheBlanks:a[3],test:a[4]},s={multipleChoice:r[0],essay:r[1],speaking:r[2],fillInTheBlanks:r[3],test:r[4]},i=(e.multipleChoiceQuestions||[]).map((function(e){return{question:e.question,marks:e.marks,solution:e.solution,correctAnswers:e.correctAnswers,answers:e.answerOptions}})),c=(e.speakingQuestions||[]).map((function(e){return{question:e.question,marks:e.marks,audioAnswer:!!e.audio,recordedBlob:e.audio&&""!==e.audio?e.audio:null,audioFile:e.audio,audioQuestion:!!e.questionAudio,questionRecordedBlob:e.questionAudio&&""!==e.questionAudio?e.questionAudio:null,audioFileQuestion:e.questionAudio}})),l=((e.fillInBlanksQuestions||{}).blanks||[]).map((function(e){return e.correctAnswer})),u=((e.fillInBlanksQuestions||{}).blanks||[]).map((function(e){var t=(e.incorrectAnswers||[]).filter((function(e){return e})).reduce((function(e,t,n){var a;return 0===n&&(a="One"),1===n&&(a="Two"),2===n&&(a="Three"),e["incorrectAnswer".concat(a)]=t,e}),{});return{answer:e.correctAnswer,marks:e.marks,selectableAnswer:e.selectableAnswer,answerOptions:t,browserAudioFile:""!==e.audio&&e.audio?e.audio:"",audioFile:""!==e.audio&&e.audio?e.audio:"",audio:!(""===e.audio||!e.audio)}})),d={question:(e.fillInBlanksQuestions||{}).text,answers:u,correctAnswers:l};return t={_id:e._id,editing:!0,assignment:e.assignment,published:e.published,isGradeIncluded:e.isGradeIncluded,passingRequired:e.passingRequired,passingGrade:e.passingGrade,createdAt:e.createdAt?new Date(parseInt(e.createdAt)):null},Object(yo.a)(t,e.assignment?"assignmentName":"testName",e.testName),Object(yo.a)(t,"testType",e.testType),Object(yo.a)(t,e.assignment?"assignmentWeight":"testWeight",e.weight),Object(yo.a)(t,"latePenalty",e.allowLateSubmission?e.latePenalty.toString():null),Object(yo.a)(t,"lateDaysAllowed",e.allowLateSubmission?e.lateDaysAllowed.toString():null),Object(yo.a)(t,"allowLateSubmission",!!e.allowLateSubmission),Object(yo.a)(t,"timedTest",!!e.timer),Object(yo.a)(t,"testTime",e.timer?e.timer.toString():null),Object(yo.a)(t,"blockedNotes",e.blockedNotes),Object(yo.a)(t,"notes",e.notes),Object(yo.a)(t,"availableOnDate",e.availableOnDate?new Date(parseInt(e.availableOnDate)):null),Object(yo.a)(t,"dueDate",e.dueDate?new Date(parseInt(e.dueDate)):null),Object(yo.a)(t,"gradeReleaseDate",e.gradeReleaseDate?new Date(parseInt(e.gradeReleaseDate)):null),Object(yo.a)(t,"testSections",n),Object(yo.a)(t,"mcSectionWeight",e.sectionWeights.mcSection),Object(yo.a)(t,"essaySectionWeight",e.sectionWeights.essaySection),Object(yo.a)(t,"speakingSectionWeight",e.sectionWeights.speakingSection),Object(yo.a)(t,"fillBlankSectionWeight",e.sectionWeights.fillBlankSection),Object(yo.a)(t,"speakingQuestions",c&&(c||[]).length>0?c:[{marks:1}]),Object(yo.a)(t,"essayQuestions",e.essayQuestions&&(e.essayQuestions||[]).length>0?e.essayQuestions:[{marks:1}]),Object(yo.a)(t,"mcQuestions",i&&(i||[]).length>0?i:[{marks:1,answers:["".concat(ua.t("testForm.fields.option")," 1"),"".concat(ua.t("testForm.fields.option")," 2")],correctAnswers:["1"]}]),Object(yo.a)(t,"fillBlankQuestions",d),Object(yo.a)(t,"readingMaterial",o),Object(yo.a)(t,"audioMaterial",s),t},Yh=Pa.a.mark(Kh),Jh=Pa.a.mark(Zh);function Kh(e){var t,n,a,r,o,s,i,c,l,u,d,m,p,f,g,b;return Pa.a.wrap((function(E){for(;;)switch(E.prev=E.next){case 0:return t=e.payload,n=t.testId,a=t.isStudent,r=t.token,o=t.testDataInProgress,s=t.studentResult,i=t.password,c=zh(n,i),console.log("testDataInProgress",o),E.prev=3,E.next=6,Object(lu.b)(uu,c,r);case 6:if(l=E.sent,console.log("Fetching test response",l),(d=l.data.errors)&&(u=d[0].message),!d||"wrongPassword"!==u){E.next=16;break}return E.next=13,Object(lu.e)(Object(Bt.e)("takeTestConfirmation",{password:ua.t("auth.errors.wrongPassword")}));case 13:return E.next=15,Object(lu.e)(Me());case 15:return E.abrupt("return");case 16:if(!l.data.errors){E.next=18;break}throw new Error("Fetching the test failed!");case 18:if(m=l.data.data,!a){E.next=48;break}return E.next=22,Object(lu.e)({type:"CLEAR_TEST_IN_PROGRESS"});case 22:if(403!==((l.data.errors||[])[0]||{}).status){E.next=25;break}return E.next=25,Object(lu.e)(h(r));case 25:if(p=(m.fetchTest||{}).test||{},f=(m.fetchTest||{}).result||{},!s){E.next=33;break}return E.next=30,Object(lu.e)(Be(null,null));case 30:return E.next=32,Object(lu.e)(Ae({test:{testResult:s,instructorTest:p}},"testReview"));case 32:return E.abrupt("return");case 33:if(p.assignment){E.next=41;break}return E.next=36,Object(lu.e)({type:"START_TEST",test:p});case 36:return E.next=38,Object(lu.e)(Re("testSession"));case 38:return E.next=40,Object(lu.e)({type:"CLOSE_MODAL"});case 40:Je.push("/student-panel/test-session");case 41:if(!p.assignment){E.next=44;break}return E.next=44,Object(lu.e)({type:"START_ASSIGNMENT",assignment:Object(It.a)(Object(It.a)({},p),{},{course:p.course})});case 44:return E.next=46,Object(lu.e)(Be(p,Vh(p,f)));case 46:return E.next=48,Object(lu.e)({type:"SELECT_COURSE",courseId:p.course});case 48:if(a){E.next=56;break}return g=l.data.data.fetchTest.test||{},E.next=52,Object(lu.e)(Be(n,$h(g)));case 52:return E.next=54,Object(lu.e)(xe(1));case 54:return E.next=56,Object(lu.e)(Ce(g.assignment?["Assignments","Edit assignment","Question bank"]:["Tests","Edit test","Question bank"]));case 56:E.next=71;break;case 58:return E.prev=58,E.t0=E.catch(3),console.log("Failed to retrieve test",E.t0),E.next=63,Object(lu.e)({type:"CANCEL_EDITING"});case 63:return b=ua.t("alerts.test.retrieveTestFail"),403===l.data.errors[0].status&&(b="retrieveTestFailDatePassed"===l.data.errors[0].message?ua.t("alerts.test.retrieveTestFailDatePassed"):l.data.errors[0].message),E.next=67,Object(lu.e)(Me(b));case 67:return E.next=69,Object(lu.c)(5e3);case 69:return E.next=71,Object(lu.e)(Fe());case 71:case"end":return E.stop()}}),Yh,null,[[3,58]])}function Zh(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("FETCH_TEST_START",Kh);case 2:case"end":return e.stop()}}),Jh)}var Xh=[Object(lu.d)(Zh)],eE=function(e){return{query:"\n        mutation MarkAsSeen(\n          $notificationId: ID!, \n          )  {       \n          markAsSeen(\n            notificationId:$notificationId,\n            )\n        }\n      ",variables:{notificationId:e}}},tE=Pa.a.mark(oE),nE=Pa.a.mark(sE),aE=Pa.a.mark(iE),rE=Pa.a.mark(cE);function oE(e){var t,n,a,r,o;return Pa.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.token,a={query:"\n                  query FetchNotifications  {\n                    notifications {\n                      _id\n                      content\n                      toSpecificUser\n                      toUserType\n                      fromUser\n                      senderFirstName\n                      senderLastName\n                      avatar\n                      documentType\n                      documentId\n                      course\n                      seen\n                      message\n                    }\n                  }\n                "},s.prev=3,s.next=6,Object(lu.b)(uu,a,n);case 6:return r=s.sent,console.log("Fetch notifications response: ",r),o=r.data.data.notifications,s.next=11,Object(lu.e)(Te(o));case 11:s.next=23;break;case 13:return s.prev=13,s.t0=s.catch(3),console.log("Failed to retrieve the notifications",s.t0),ua.t("alerts.notifications.retrieveNotificationsFail"),s.next=19,Object(lu.e)({type:"FETCH_NOTIFICATIONS_FAIL"});case 19:return s.next=21,Object(lu.c)(3e3);case 21:return s.next=23,Object(lu.e)(Fe());case 23:case"end":return s.stop()}}),tE,null,[[3,13]])}function sE(e){var t,n,a,r,o;return Pa.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.token,a=t.notificationId,r=eE(a),s.prev=2,s.next=5,Object(lu.b)(uu,r,n);case 5:return o=s.sent,console.log("Mark as seen response: ",o),s.next=9,Object(lu.e)({type:"MARK_AS_SEEN_SUCCESS"});case 9:return s.next=11,Object(lu.e)(ye(n));case 11:s.next=23;break;case 13:return s.prev=13,s.t0=s.catch(2),console.log("Failed to mark notification as seen",s.t0),ua.t("alerts.notifications.markNotificationsFail"),s.next=19,Object(lu.e)({type:"MARK_AS_SEEN_FAIL"});case 19:return s.next=21,Object(lu.c)(3e3);case 21:return s.next=23,Object(lu.e)(Fe());case 23:case"end":return s.stop()}}),nE,null,[[2,13]])}function iE(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("MARK_AS_SEEN_START",sE);case 2:case"end":return e.stop()}}),aE)}function cE(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.g)("FETCH_NOTIFICATIONS_START",oE);case 2:case"end":return e.stop()}}),rE)}var lE=[Object(lu.d)(cE),Object(lu.d)(iE)],uE=Pa.a.mark(mE),dE=Pa.a.mark(pE);function mE(e){var t,n,a,r,o;return Pa.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.payload,n=t.token,a=t.userId,r=t.activity,"/authentication"!==window.location.pathname){s.next=4;break}return s.abrupt("return");case 4:if(o=$e()("https://mernstackelearn.herokuapp.com/",{query:{token:n}}),"active"!==r){s.next=9;break}return o.emit("active",{user:a}),s.next=9,Object(lu.e)(me(n));case 9:"idle"===r&&o.emit("idle",{user:a});case 10:case"end":return s.stop()}}),uE)}function pE(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.h)("UPDATE_ACTIVITY_START",mE);case 2:case"end":return e.stop()}}),dE)}var fE=[Object(lu.d)(pE)],gE=Pa.a.mark(bE);function bE(){return Pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(lu.a)([].concat(Object(Vr.a)(Oh),Object(Vr.a)(_h),Object(Vr.a)(Lh),Object(Vr.a)(Xh),Object(Vr.a)(Cf),Object(Vr.a)(Wg),Object(Vr.a)(Ob),Object(Vr.a)(qb),Object(Vr.a)(zb),Object(Vr.a)(Zb),Object(Vr.a)(ih),Object(Vr.a)(ph),Object(Vr.a)(gg),Object(Vr.a)(kg),Object(Vr.a)(Ag),Object(Vr.a)(Ib),Object(Vr.a)(Eh),Object(Vr.a)(zf),Object(Vr.a)(ag),Object(Vr.a)(lg),Object(Vr.a)(Wh),Object(Vr.a)(lE),Object(Vr.a)(yu),Object(Vr.a)(fE)));case 2:case"end":return e.stop()}}),gE)}var hE={loading:!1,successMessage:null,failMessage:null},EE=function(e){return Lr(e,{loading:!1,successMessage:null,failMessage:null})},vE=function(e){return Lr(e,{loading:!0})},yE=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},TE=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},kE=function(e){return Lr(e,{loading:!0})},SE=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},wE=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},OE=function(e){return Lr(e,{loading:!0})},CE=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},xE=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},AE=function(e){return Lr(e,{loading:!0})},FE=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},DE=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},_E=function(e,t){return Lr(e,{loading:!1,courseDetailId:t.courseId,lessonDetail:!0})},IE=function(e,t){return Lr(e,{loading:!1,courseDetailId:t.courseId})},jE=function(e){return Lr(e,{assignmentDetail:!1,testDetail:!1,lessonDetail:!1,gradeDetail:!1})},RE=function(e){return Lr(e,{successMessage:null,failMessage:null})},NE=function(e,t){return Lr(e,{loading:"noSpinner"!==t.payload.spinner})},LE=function(e,t){return Lr(e,{loading:!1})},PE=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},BE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hE,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_COURSES_START":return NE(e,t);case"FETCH_COURSES_SUCCESS":return LE(e);case"FETCH_COURSES_FAIL":return PE(e,t);case"ENROLL_COURSE_START":return kE(e);case"ENROLL_COURSE_SUCCESS":return SE(e,t);case"ENROLL_COURSE_FAIL":return wE(e,t);case"ENROLL_REQUEST_START":return vE(e);case"ENROLL_REQUEST_SUCCESS":return yE(e,t);case"ENROLL_REQUEST_FAIL":return TE(e,t);case"ENROLL_DENY_START":return OE(e);case"ENROLL_DENY_SUCCESS":return CE(e,t);case"ENROLL_DENY_FAIL":return xE(e,t);case"DROP_COURSE_START":return AE(e);case"DROP_COURSE_SUCCESS":return FE(e,t);case"DROP_COURSE_FAIL":return DE(e,t);case"SHOW_STUDENT_COURSE_DETAILS":return _E(e,t);case"SELECT_COURSE":return IE(e,t);case"RETURN_TO_COURSES":return jE(e);case b:return RE(e);case g:return EE(e);default:return e}},ME={selectedLesson:null,loading:!1,successMessage:null,failMessage:null},qE=function(e){return Lr(e,{loading:!0})},UE=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},QE=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},HE=function(e){return Lr(e,{selectedLesson:null})},GE=function(e,t){return Lr(e,{selectedLesson:t.lesson})},WE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ME,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_STUDENT_LESSON":return GE(e,t);case"MARK_SLIDE_AS_SEEN_START":return qE(e);case"MARK_SLIDE_AS_SEEN_SUCCESS":return UE(e,t);case"MARK_SLIDE_AS_SEEN_FAIL":return QE(e,t);case g:return HE(e);default:return e}},zE={testReviewing:null,testInSession:null,assignmentInSession:null,testResults:null,loading:!1,successMessage:null,failMessage:null},VE=function(e){return Lr(e,{testReviewing:null,testInSession:null,assignmentInSession:null,testResults:null,loading:!1,successMessage:null,failMessage:null})},$E=function(e,t){return Lr(e,{testInSession:t.test})},YE=function(e,t){return Lr(e,{assignmentInSession:t.assignment})},JE=function(e){return Lr(e,{loadedTestDataInProgress:null})},KE=function(e){return Lr(e,{loading:!0})},ZE=function(e,t){return(t.test||{}).testResult?Lr(e,{testReviewing:t.test,loading:!1}):Lr(e,{loadedTestDataInProgress:t.formData,loading:!1})},XE=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},ev=function(e,t){return Lr(e,{loading:"noSpinner"===t.spinner})},tv=function(e,t){return Lr(e,{testResults:t.testResults,loading:!1})},nv=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},av=function(e){return Lr(e,{loading:!0})},rv=function(e,t){return t.testClosed?Lr(e,{loading:!1,testInSession:null,assignmentInSession:null,loadedTestDataInProgress:null,successMessage:t.message}):Lr(e,{loading:!1,successMessage:t.message})},ov=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},sv=function(e,t){return Lr(e,{testResults:t.testResults})},iv=function(e){return Lr(e,{assignmentInSession:null,loadedTestDataInProgress:null})},cv=function(e){return Lr(e,{loadedTestDataInProgress:null})},lv=function(e){return Lr(e,{successMessage:null,failMessage:null})},uv=function(e){return Lr(e,{testInSession:null,assignmentInSession:null,loadedTestDataInProgress:null})},dv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zE,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TEST_START":return KE(e);case"FETCH_TEST_SUCCESS":return ZE(e,t);case"FETCH_TEST_FAIL":return XE(e,t);case"FETCH_TEST_RESULTS_START":return ev(e,t);case"FETCH_TEST_RESULTS_SUCCESS":return tv(e,t);case"FETCH_TEST_RESULTS_FAIL":return nv(e,t);case"SUBMIT_TEST_START":return av(e);case"SUBMIT_TEST_SUCCESS":return rv(e,t);case"SUBMIT_TEST_FAIL":return ov(e,t);case"START_TEST":return $E(e,t);case"START_ASSIGNMENT":return YE(e,t);case"EXIT_ASSIGNMENT":return iv(e);case"CLEAR_TEST_IN_PROGRESS":return JE(e);case"FETCH_TEST_RESULTS":return sv(e,t);case"CLEAR_LOADED_STUDENT_DATA":return cv(e);case g:return VE(e);case"RETURN_TO_COURSES":return uv(e);case b:return lv(e);default:return e}},mv={loadedCourseFormData:null,instructors:null,courseFormPage:1,loading:!1,successMessage:null,failMessage:null},pv=function(e){return Lr(e,{loadedCourseFormData:null,instructors:null,courseFormPage:1,loading:!1,successMessage:null,failMessage:null})},fv=function(e){return Lr(e,{loading:!0})},gv=function(e,t){return Lr(e,{loading:!1,courseFormPage:1,loadedCourseFormData:null})},bv=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},hv=function(e){return Lr(e,{loading:!0})},Ev=function(e){return Lr(e,{loading:!1})},vv=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},yv=function(e){return Lr(e,{loading:!0})},Tv=function(e){return Lr(e,{loading:!1})},kv=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},Sv=function(e){return Lr(e,{loading:!0})},wv=function(e,t){return Lr(e,{loading:!1})},Ov=function(e,t){return Lr(e,{loading:!1})},Cv=function(e){return Lr(e,{loading:!0})},xv=function(e,t){return Lr(e,{instructors:t.instructors,loading:!1})},Av=function(e,t){return Lr(e,{loading:!1})},Fv=function(e){return Lr(e,{loading:!0})},Dv=function(e,t){return Lr(e,{successMessage:t.message,loading:!1})},_v=function(e,t){return Lr(e,{failMessage:t.message,loading:!1})},Iv=function(e,t){return Lr(e,{loading:"noSpinner"===t.spinner})},jv=function(e,t){return Lr(e,{loadedCourseFormData:t.formData,loading:!1})},Rv=function(e,t){return Lr(e,{loading:!1})},Nv=function(e,t){return Lr(e,{courseDetailId:t.courseId})},Lv=function(e){return Lr(e,{courseDetailId:null,loadedCategoryFormData:null})},Pv=function(e){return Lr(e,{courseDetailId:null,loadedCategoryFormData:null})},Bv=function(e,t){return Lr(e,{courseFormPage:t.page})},Mv=function(e){return Lr(e,{loadedCourseFormData:{}})},qv=function(e){return Lr(e,{loadedCourseFormData:null})},Uv=function(e){return Lr(e,{confirmingDeletingCourse:null})},Qv=function(e){return Lr(e,{successMessage:null,failMessage:null})},Hv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mv,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_INSTRUCTORS_START":return Cv(e);case"FETCH_INSTRUCTORS_SUCCESS":return xv(e,t);case"FETCH_INSTRUCTORS_FAIL":return Av(e);case"FETCH_COURSE_START":return Iv(e,t);case"FETCH_COURSE_SUCCESS":return jv(e,t);case"FETCH_COURSE_FAIL":return Rv(e);case"GRADE_COURSE_START":return Fv(e);case"GRADE_COURSE_SUCCESS":return Dv(e,t);case"GRADE_COURSE_FAIL":return _v(e,t);case"CREATE_UPDATE_COURSE_START":return fv(e);case"CREATE_UPDATE_COURSE_SUCCESS":return gv(e);case"CREATE_UPDATE_COURSE_FAIL":return bv(e,t);case"UPDATE_COURSE_RESOURCES_START":return hv(e);case"UPDATE_COURSE_RESOURCES_SUCCESS":return Ev(e);case"UPDATE_COURSE_RESOURCES_FAIL":return vv(e,t);case"TOGGLE_COURSE_STATE_START":return yv(e);case"TOGGLE_COURSE_STATE_SUCCESS":return Tv(e);case"TOGGLE_COURSE_STATE_FAIL":return kv(e,t);case"DELETE_COURSE_START":return Sv(e);case"DELETE_COURSE_SUCCESS":return wv(e);case"DELETE_COURSE_FAIL":return Ov(e);case"SHOW_COURSE_DETAILS":return Nv(e,t);case"HIDE_COURSE_DETAILS":return Lv(e);case"RETURN_TO_COURSES":return Pv(e);case"CLEAR_LOADED_INSTRUCTOR_DATA":return qv(e);case"SET_COURSE_FORM_PAGE":return Bv(e,t);case"SET_CREATE_COURSE_FORM":return Mv(e);case"CLEAR_INSTRUCTOR_MODAL_STATES":return Uv(e);case b:return Qv(e);case g:return pv(e);default:return e}},Gv={loadedLessonFormData:null,loading:!1,successMessage:null,failMessage:null},Wv=function(e){return Lr(e,{loadedLessonFormData:null,loading:!1,successMessage:null,failMessage:null})},zv=function(e){return Lr(e,{loading:!0})},Vv=function(e,t){return Lr(e,{loading:!1,loadedLessonFormData:t.formData})},$v=function(e,t){return Lr(e,{loading:!1})},Yv=function(e){return Lr(e,{loading:!0})},Jv=function(e,t){return Lr(e,{loading:!1,loadedLessonFormData:null})},Kv=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},Zv=function(e){return Lr(e,{loading:!0})},Xv=function(e,t){return Lr(e,{loading:!1})},ey=function(e,t){return Lr(e,{loading:!1})},ty=function(e,t){return Lr(e,{loadedLessonFormData:t.initialValues})},ny=function(e){return Lr(e,{successMessage:null,failMessage:null})},ay=function(e){return Lr(e,{loadedLessonFormData:null})},ry=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gv,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_LESSON_START":return zv(e);case"FETCH_LESSON_SUCCESS":return Vv(e,t);case"FETCH_LESSON_FAIL":return $v(e);case"CREATE_LESSON_START":return Yv(e);case"CREATE_LESSON_SUCCESS":return Jv(e);case"CREATE_LESSON_FAIL":return Kv(e,t);case"DELETE_LESSON_START":return Zv(e);case"DELETE_LESSON_SUCCESS":return Xv(e);case"DELETE_LESSON_FAIL":return ey(e);case"SET_CREATE_LESSON_FORM":return ty(e,t);case b:return ny(e);case"CLEAR_LOADED_INSTRUCTOR_DATA":return ay(e);case g:return Wv(e);default:return e}},oy={openFolderPath:null,loading:!1,successMessage:null,failMessage:null},sy=function(e){return Lr(e,{openFolderPath:null,loading:!1,successMessage:null,failMessage:null})},iy=function(e){return Lr(e,{loading:!0})},cy=function(e){return Lr(e,{loading:!1})},ly=function(e,t){return Lr(e,{loading:!1})},uy=function(e,t){return Lr(e,{openFolderPath:t.folder})},dy=function(e){return Lr(e,{successMessage:null,failMessage:null})},my=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oy,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODULES_CHANGE_START":return iy(e);case"MODULES_CHANGE_SUCCESS":return cy(e);case"MODULES_CHANGE_FAILED":return ly(e);case"SET_INSTRUCTOR_FOLDER":return uy(e,t);case g:return sy(e);case b:return dy(e);default:return e}},py={loadedTestFormData:null,testFormSection:null,testGrading:null,studentGrading:null,initialGradeValues:null,testSection:null,testFormPage:1,loading:!1,successMessage:null,failMessage:null},fy=function(e){return Lr(e,{loadedTestFormData:null,testFormSection:null,testGrading:null,studentGrading:null,initialGradeValues:null,testSection:null,testFormPage:1,loading:!1,successMessage:null,failMessage:null})},gy=function(e,t){return Lr(e,{testSection:t.section})},by=function(e){return Lr(e,{loading:!0})},hy=function(e,t){return Lr(e,{loadedTestFormData:t.formData,loading:!1})},Ey=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},vy=function(e){return Lr(e,{loading:!0})},yy=function(e,t){return Lr(e,{loadedTestFormData:null,loading:!1,successMessage:t.message})},Ty=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},ky=function(e){return Lr(e,{loading:!0})},Sy=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},wy=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},Oy=function(e){return Lr(e,{loading:!0})},Cy=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},xy=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},Ay=function(e){return Lr(e,{loading:!0})},Fy=function(e,t){return Lr(e,{loading:!1,testGrading:t.test,studentGrading:t.student})},Dy=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},_y=function(e){return Lr(e,{loading:!0})},Iy=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},jy=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},Ry=function(e,t){return Lr(e,{testFormSection:t.testSection})},Ny=function(e,t){return Lr(e,{testGrading:t.test,studentGrading:t.student})},Ly=function(e,t){return Lr(e,{initialGradeValues:t.gradeValues})},Py=function(e){return Lr(e,{testGrading:null,studentGrading:null})},By=function(e){return Lr(e,{initialGradeValues:null,loadedTestFormData:null,testFormPage:1})},My=function(e){return Lr(e,{successMessage:null,failMessage:null})},qy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:py,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_UPDATE_TEST_START":return vy(e);case"CREATE_UPDATE_TEST_SUCCESS":return yy(e,t);case"CREATE_UPDATE_TEST_FAIL":return Ty(e,t);case"FETCH_TEST_START":return by(e);case"FETCH_TEST_SUCCESS":return hy(e,t);case"FETCH_TEST_FAIL":return Ey(e,t);case"DELETE_TEST_START":return ky(e);case"DELETE_TEST_SUCCESS":return Sy(e,t);case"DELETE_TEST_FAIL":return wy(e,t);case"RESET_TEST_START":return Oy(e);case"RESET_TEST_SUCCESS":return Cy(e,t);case"RESET_TEST_FAIL":return xy(e,t);case"GRADE_TEST_START":return _y(e);case"GRADE_TEST_SUCCESS":return Iy(e,t);case"GRADE_TEST_FAIL":return jy(e,t);case"CLOSE_TEST_START":return Ay(e);case"CLOSE_TEST_SUCCESS":return Fy(e,t);case"CLOSE_TEST_FAIL":return Dy(e,t);case"SET_TEST_FORM_SECTION":return Ry(e,t);case"SET_TEST_TO_GRADE":return Ny(e,t);case"SET_INITIAL_GRADE_VALUES":return Ly(e,t);case"CLEAR_TEST_TO_GRADE":return Py(e);case"CLEAR_LOADED_INSTRUCTOR_DATA":return By(e);case"SET_INSTRUCTOR_TEST_SECTION":return gy(e,t);case b:return My(e);case g:return fy(e);default:return e}},Uy={loadedQuestionFormData:null,questionBank:null,questionEditing:null,creatingQuestionType:null,loading:!1,successMessage:null,failMessage:null},Qy=function(e){return Lr(e,{loadedQuestionFormData:null,questionBank:null,questionEditing:null,creatingQuestionType:null,loading:!1,successMessage:null,failMessage:null})},Hy=function(e){return Lr(e,{loading:!0})},Gy=function(e,t){return Lr(e,{loading:!1,questionBank:t.questions})},Wy=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},zy=function(e){return Lr(e,{loading:!0})},Vy=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},$y=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},Yy=function(e){return Lr(e,{loading:!0})},Jy=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},Ky=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},Zy=function(e,t){return Lr(e,{questionEditing:t.question})},Xy=function(e,t){return Lr(e,{creatingQuestionType:t.questionType,loadedQuestionFormData:t.questionFormData})},eT=function(e){return Lr(e,{questionBank:null})},tT=function(e){return Lr(e,{loadedQuestionFormData:null,questionEditing:null,creatingQuestionType:null})},nT=function(e){return Lr(e,{successMessage:null,failMessage:null})},aT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uy,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_UPDATE_QUESTION_START":return zy(e);case"CREATE_UPDATE_QUESTION_SUCCESS":return Vy(e,t);case"CREATE_UPDATE_QUESTION_FAIL":return $y(e,t);case"FETCH_QUESTION_BANK_START":return Hy(e);case"FETCH_QUESTION_BANK_SUCCESS":return Gy(e,t);case"FETCH_QUESTION_BANK_FAIL":return Wy(e,t);case"DELETE_QUESTION_START":return Yy(e);case"DELETE_QUESTION_SUCCESS":return Jy(e,t);case"DELETE_QUESTION_FAIL":return Ky(e,t);case"CLEAR_LOADED_INSTRUCTOR_DATA":return tT(e);case"SET_QUESTION_FORM":return Xy(e,t);case"SET_QUESTION_EDITING":return Zy(e,t);case"RETURN_TO_COURSES":return eT(e);case b:return nT(e);case g:return Qy(e);default:return e}},rT={token:null,userId:null,error:null,loading:!1,authRedirectPath:"/",instructorLoggedIn:!1,studentLoggedIn:!1,adminLoggedIn:!1,formIsSignup:!1,formIsForgotPassword:!1,activeForm:null,loadedUser:null,userFirstName:null,userLastName:null,profilePicture:null,signupFormPage:1,successMessage:null,failMessage:null,sessionExpiration:null,refreshTokenExpiration:null,initialPath:null},oT=function(e,t){return Lr(e,{formIsSignup:"signin"!==t.form&&!e.formIsSignup,formIsForgotPassword:!1})},sT=function(e){return Lr(e,{formIsForgotPassword:!e.formIsForgotPassword})},iT=function(e){return Lr(e,{loading:!0})},cT=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},lT=function(e,t){return Lr(e,{failMessage:t.message,loading:!1})},uT=function(e){return Lr(e,{loading:!0})},dT=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},mT=function(e,t){return Lr(e,{failMessage:t.message,loading:!1})},pT=function(e){return Lr(e,{loading:!0})},fT=function(e,t){return Lr(e,{loading:!1,loadedUser:t.user})},gT=function(e,t){return Lr(e,{failMessage:t.message,loading:!1})},bT=function(e){return Lr(e,{loading:!0})},hT=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},ET=function(e,t){return Lr(e,{failMessage:t.message,loading:!1})},vT=function(e){return Lr(e,{loading:!0})},yT=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},TT=function(e,t){return Lr(e,{failMessage:t.message,loading:!1})},kT=function(e){return Lr(e,{loading:!0})},ST=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},wT=function(e,t){return Lr(e,{failMessage:t.message,loading:!1})},OT=function(e){return Lr(e,{loading:!0})},CT=function(e,t){return Lr(e,{loading:!1,successMessage:t.message})},xT=function(e,t){return Lr(e,{failMessage:t.message,loading:!1})},AT=function(e){return Lr(e,{})},FT=function(e,t){var n=t.authData,a=new Date(Date.now()+1e3*n.expirationDate);return n.token?(localStorage.setItem("token",n.token),localStorage.setItem("expirationDate",a),Lr(e,{successMessage:t.message,sessionExpiration:a||new Date(localStorage.getItem("expirationDate")),token:n.token?n.token:localStorage.getItem("token")})):Lr(e,{successMessage:t.message})},DT=function(e,t){return Lr(e,{failMessage:t.message})},_T=function(e){return Lr(e,{error:null,loading:!0})},IT=function(e,t){var n,a,r=t.authData;return a=r.expirationDate instanceof Date?r.expirationDate:new Date(Date.now()+1e3*r.expirationDate),localStorage.setItem("expirationDate",a),Lr(e,(n={studentLoggedIn:"student"===r.userType,instructorLoggedIn:"instructor"===r.userType,adminLoggedIn:"admin"===r.userType,error:null,loading:!1,token:r.token,userId:r.userId,userFirstName:r.firstName,userLastName:r.lastName,profilePicture:r.profilePicture},Object(yo.a)(n,"error",null),Object(yo.a)(n,"loading",!1),Object(yo.a)(n,"initialPath",e.initialPath?e.initialPath:r.initialPath),Object(yo.a)(n,"sessionExpiration",a),Object(yo.a)(n,"refreshTokenExpiration",parseInt(localStorage.getItem("refreshTokenExpiration")||r.refreshTokenExpiration)),n))},jT=function(e,t){return Lr(e,{error:t.error,loading:!1,failMessage:t.message})},RT=function(e){return localStorage.removeItem("userFirstName"),localStorage.removeItem("userLastName"),localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),localStorage.removeItem("userType"),localStorage.removeItem("profilePicture"),localStorage.removeItem("refreshTokenExpiration"),Lr(e,{token:null,userId:null,instructorLoggedIn:!1,studentLoggedIn:!1,adminLoggedIn:!1,userFirstName:null,userLastName:null,profilePicture:null,refreshTokenExpiration:null,loadedUser:null,sessionExpiration:null})},NT=function(e,t){return Lr(e,{error:null,signupFormPage:t.page})},LT=function(e){return Lr(e,{successMessage:null,failMessage:null})},PT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rT,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_FORM":return oT(e,t);case"CREATE_ACCOUNT_START":return iT(e);case"CREATE_ACCOUNT_SUCCESS":return cT(e,t);case"CREATE_ACCOUNT_FAIL":return lT(e,t);case"UPDATE_ACCOUNT_START":return uT(e);case"UPDATE_ACCOUNT_SUCCESS":return dT(e,t);case"UPDATE_ACCOUNT_FAIL":return mT(e,t);case"AUTHENTICATION_START":return _T(e);case"AUTHENTICATION_SUCCESS":return IT(e,t);case"AUTHENTICATION_FAIL":return jT(e,t);case"FETCH_USER_START":return pT(e);case"FETCH_USER_SUCCESS":return fT(e,t);case"FETCH_USER_FAIL":return gT(e,t);case"CHANGE_PASSWORD_START":return bT(e);case"CHANGE_PASSWORD_SUCCESS":return hT(e,t);case"CHANGE_PASSWORD_FAIL":return ET(e,t);case"PASSWORD_RESET_LINK_START":return vT(e);case"PASSWORD_RESET_LINK_SUCCESS":return yT(e,t);case"PASSWORD_RESET_LINK_FAIL":return TT(e,t);case"ACCOUNT_VERIFICATION_START":return kT(e);case"ACCOUNT_VERIFICATION_SUCCESS":return ST(e,t);case"ACCOUNT_VERIFICATION_FAIL":return wT(e,t);case"RESEND_EMAIL_VERIFICATION_START":return OT(e);case"RESEND_EMAIL_VERIFICATION_SUCCESS":return CT(e,t);case"RESEND_EMAIL_VERIFICATION_FAIL":return xT(e,t);case"REFRESH_TOKEN_START":return AT(e);case"REFRESH_TOKEN_SUCCESS":return FT(e,t);case"REFRESH_TOKEN_FAIL":return DT(e,t);case g:return RT(e);case"SET_SIGNUP_FORM_PAGE":return NT(e,t);case"FORGOT_PASSWORD_PAGE":return sT(e);case b:return LT(e);default:return e}},BT={selectedChatUser:null,loading:!1,editing:!1,successMessage:null,failMessage:null,students:null,notification:null,notificationTimeout:null,selectedCourse:null,tabLabels:[],tab:0,coursePanel:"modules",courses:null,modules:null,isModal:!1,modalDocument:null,modalType:null,notifications:null,width:600,sessionAlert:!1,configuration:{},uploading:!1,isDarkTheme:!1},MT=function(e){return Lr(e,{selectedChatUser:null,loading:!1,editing:!1,successMessage:null,failMessage:null,students:null,notification:null,notificationTimeout:null,selectedCourse:null,tabLabels:[],tab:0,coursePanel:"modules",courses:null,modules:null,isModal:!1,modalDocument:null,modalType:null,notifications:null,width:600,sessionAlert:!1,configuration:{},uploading:!1,isDarkTheme:!1})},qT=function(e,t){return"dark"===t.theme?localStorage.setItem("theme","dark"):localStorage.setItem("theme","light"),Lr(e,{isDarkTheme:"dark"===t.theme})},UT=function(e,t){return Lr(e,{width:t.width})},QT=function(e,t){return Lr(e,{loading:t.loading})},HT=function(e,t){return Lr(e,{successMessage:t.message})},GT=function(e,t){return Lr(e,{failMessage:t.message})},WT=function(e,t){return Lr(e,{loading:"noSpinner"!==t.payload.spinner})},zT=function(e,t){return Lr(e,{courses:t.courses,loading:!1})},VT=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},$T=function(e){return Lr(e,{})},YT=function(e,t){return Lr(e,{notifications:t.notifications})},JT=function(e){return Lr(e,{})},KT=function(e){return Lr(e,{loading:!0})},ZT=function(e,t){return Lr(e,{configuration:t.configuration,loading:!1})},XT=function(e){return Lr(e,{loading:!1})},ek=function(e){return Lr(e,{loading:!0})},tk=function(e,t){return Lr(e,{successMessage:t.message,loading:!1})},nk=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},ak=function(e){return Lr(e,{})},rk=function(e){return Lr(e,{})},ok=function(e){return Lr(e,{})},sk=function(e){return Lr(e,{})},ik=function(e){return Lr(e,{})},ck=function(e){return Lr(e,{})},lk=function(e,t){return Lr(e,{selectedCourse:t.course})},uk=function(e,t){return Lr(e,{courses:t.courses})},dk=function(e,t){return Lr(e,{selectedChatUser:t.user})},mk=function(e,t){return Lr(e,{loading:!0})},pk=function(e,t){return Lr(e,{students:t.students,loading:!1})},fk=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},gk=function(e,t){return Lr(e,{loading:!0})},bk=function(e,t){return Lr(e,{loading:!1,modules:t.modules})},hk=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},Ek=function(e){return Lr(e,{loading:!1,uploading:!0})},vk=function(e){return Lr(e,{loading:!1,uploading:!1})},yk=function(e,t){return Lr(e,{loading:!1,failMessage:t.message,uploading:!1})},Tk=function(e){return Lr(e,{loading:!1})},kk=function(e){return Lr(e,{loading:!1})},Sk=function(e,t){return Lr(e,{loading:!1,failMessage:t.message})},wk=function(e,t){return clearTimeout(e.notificationTimeout),Lr(e,{notification:t.notification,notificationTimeout:t.timeoutId})},Ok=function(e,t){return Lr(e,{tabLabels:t.tabLabels})},Ck=function(e,t){return Lr(e,{tab:0,editing:!1,selectedCourse:null,modules:null,students:null,selectedChatUser:null,modalType:null,modalDocument:null,isModal:!1})},xk=function(e,t){return Lr(e,{tab:t.tab})},Ak=function(e,t){return Lr(e,{modules:null})},Fk=function(e){return Lr(e,{editing:!0})},Dk=function(e){return Lr(e,{editing:!1})},_k=function(e,t){return Lr(e,{isModal:!0,modalDocument:t.modalDocument,modalType:t.modalType})},Ik=function(e){return Lr(e,{isModal:!1,modalDocument:null,modalType:null})},jk=function(e){return Lr(e,{successMessage:null,failMessage:null})},Rk=function(e,t){return Lr(e,{coursePanel:t.panel})},Nk=function(e,t){return Lr(e,{sessionAlert:"on"===t.alert})},Lk=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BT,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WIDTH":return UT(e,t);case"SET_CHAT_USER":return dk(e,t);case"SET_NOTIFICATION":return wk(e,t);case"FETCH_COURSES_START":return WT(e,t);case"FETCH_COURSES_SUCCESS":return zT(e,t);case"FETCH_COURSES_FAIL":return VT(e,t);case"FETCH_NOTIFICATIONS_START":return $T(e);case"FETCH_NOTIFICATIONS_SUCCESS":return YT(e,t);case"FETCH_NOTIFICATIONS_FAIL":return JT(e);case"MARK_AS_SEEN_START":return ak(e);case"MARK_AS_SEEN_SUCCESS":return rk(e);case"MARK_AS_SEEN_FAIL":return ok(e);case"UPDATE_ACTIVITY_START":return sk(e);case"UPDATE_ACTIVITY_SUCCESS":return ik(e);case"UPDATE_ACTIVITY_FAIL":return ck(e);case"FETCH_CONFIG_START":return KT(e);case"FETCH_CONFIG_SUCCESS":return ZT(e,t);case"FETCH_CONFIG_FAIL":return XT(e);case"UPDATE_CONFIG_START":return ek(e);case"UPDATE_CONFIG_SUCCESS":return tk(e,t);case"UPDATE_CONFIG_FAIL":return nk(e,t);case"FETCH_STUDENTS_START":return mk(e);case"FETCH_STUDENTS_SUCCESS":return pk(e,t);case"FETCH_STUDENTS_FAIL":return fk(e,t);case"FETCH_MODULES_START":return gk(e);case"FETCH_MODULES_SUCCESS":return bk(e,t);case"FETCH_MODULES_FAIL":return hk(e,t);case"UPLOAD_FILE_START":return Ek(e);case"UPLOAD_FILE_SUCCESS":return vk(e);case"UPLOAD_FILE_FAIL":return yk(e,t);case"DELETE_FILES_START":return Tk(e);case"DELETE_FILES_SUCCESS":return kk(e);case"DELETE_FILES_FAIL":return Sk(e,t);case"SET_COURSE":return lk(e,t);case"SET_COURSES":return uk(e,t);case"SET_TAB_LABELS":return Ok(e,t);case"SET_COURSE_PANEL":return Rk(e,t);case"SET_TAB":return xk(e,t);case"SET_LOADING":return QT(e,t);case"SET_SUCCESS_MESSAGE":return HT(e,t);case"SET_FAIL_MESSAGE":return GT(e,t);case g:return MT(e);case"RETURN_TO_COURSES":return Ck(e);case"HIDE_COURSE_DETAILS":return Ak(e);case"SET_EDITING":return Fk(e);case"CANCEL_EDITING":return Dk(e);case"OPEN_MODAL":return _k(e,t);case"CLOSE_MODAL":return Ik(e);case"SET_SESSION_ALERT":return Nk(e,t);case"SET_THEME":return qT(e,t);case b:return jk(e);default:return e}},Pk=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,Bk=Object(u.a)(),Mk=Object(l.c)({studentCourse:BE,studentLesson:WE,studentTest:dv,instructorCourse:Hv,instructorLesson:ry,instructorModules:my,instructorTest:qy,instructorQuestion:aT,authentication:PT,common:Lk,form:_p.a}),qk=Object(l.e)(Mk,Pk(Object(l.a)(Bk)));Bk.run(bE);var Uk=r.a.createElement(c.a,{store:qk},r.a.createElement(i.a,null,r.a.createElement(Ap,null)));s.a.render(Uk,document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Fp?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Dp(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Dp(t,e)}))}}()},121:function(e,t,n){e.exports={TextEditor:"QuestionForm_TextEditor__u_r-v",AudioAlignment:"QuestionForm_AudioAlignment__3BWyX",TextField:"QuestionForm_TextField__2Sda1",flexPositioningEven:"QuestionForm_flexPositioningEven__2KLVv",QuestionCustomizationContainer:"QuestionForm_QuestionCustomizationContainer__22hEj",questionFormList:"QuestionForm_questionFormList__1M4KE",PreviewContainer:"QuestionForm_PreviewContainer__2wPZw",CorrectAnswer:"QuestionForm_CorrectAnswer__2C-Al",button:"QuestionForm_button__8Jwdx",FullWidthImg:"QuestionForm_FullWidthImg__2mnOy",Inline:"QuestionForm_Inline__FRbqS",center:"QuestionForm_center__28Lc8",TestTypeRadio:"QuestionForm_TestTypeRadio__1ecGu",ListHorizontalDisplay:"QuestionForm_ListHorizontalDisplay__w7l8y",TestFormList:"QuestionForm_TestFormList__3N75r",greenIcon:"QuestionForm_greenIcon__3WzQM",redIcon:"QuestionForm_redIcon__2Ywa9",CorrectAnswerHighlight:"QuestionForm_CorrectAnswerHighlight__6kSke",BlankPreview:"QuestionForm_BlankPreview__3ZErm",InputField:"QuestionForm_InputField__2KEI9",FullWidth:"QuestionForm_FullWidth__xmZJy",InputFieldBottomMargin:"QuestionForm_InputFieldBottomMargin__g_527",SelectField:"QuestionForm_SelectField__16Pop",Pointer:"QuestionForm_Pointer__3kPMX",audioPlayerPreview:"QuestionForm_audioPlayerPreview__3tdXT",Editor:"QuestionForm_Editor__fcayJ"}},134:function(e,t,n){e.exports={button:"Details_button__H1dJe",GreenText:"Details_GreenText__29PXB",RedText:"Details_RedText__dpBJZ",Inline:"Details_Inline__1KejH",center:"Details_center__Qicvc",TestTypeRadio:"Details_TestTypeRadio__1TUd1",ListHorizontalDisplay:"Details_ListHorizontalDisplay__1FpWz",TestFormList:"Details_TestFormList__1ZZlk",Editor:"Details_Editor__35mGQ",greenIcon:"Details_greenIcon__3BewG",redIcon:"Details_redIcon__28pog",CorrectAnswerHighlight:"Details_CorrectAnswerHighlight__2DKso",BlankPreview:"Details_BlankPreview__2KqKr",InputField:"Details_InputField__3mdUP",FullWidth:"Details_FullWidth__3xqK9",InputFieldBottomMargin:"Details_InputFieldBottomMargin__tkSTv",SelectField:"Details_SelectField__PZG1J",Pointer:"Details_Pointer__2VEup",audioPlayerPreview:"Details_audioPlayerPreview__13OGC",SlideBackground:"Details_SlideBackground__31hdt"}},151:function(e,t,n){e.exports={Button:"Button_Button__3kAHe",HalfWidth:"Button_HalfWidth__1ZGYD",FullWidth:"Button_FullWidth__28dxb",Success:"Button_Success__q8Jxu",Danger:"Button_Danger__3tneE",Error:"Button_Error__1GeJ2",SubmitForm:"Button_SubmitForm__34uhs",ModalButton:"Button_ModalButton__3yerH",ModalError:"Button_ModalError__2CEj1",darkBackground:"Button_darkBackground__1x8Lj",lightBackground:"Button_lightBackground__TIVM9"}},163:function(e,t,n){e.exports={Modal:"Modal_Modal__368lP",ModalBackgroundLight:"Modal_ModalBackgroundLight__3S_My",ModalBackgroundDark:"Modal_ModalBackgroundDark__3lb0z",Header:"Modal_Header__1OeOH",HeaderDark:"Modal_HeaderDark__2fHCm",Main:"Modal_Main__apcqF",Large:"Modal_Large__3ueMt",Regular:"Modal_Regular__2CAei"}},197:function(e,t,n){e.exports={Inline:"Switch_Inline__RQ38f",Margin:"Switch_Margin__utN1S",MarginNoLabel:"Switch_MarginNoLabel__2O171",noMargin:"Switch_noMargin__122ck"}},231:function(e,t,n){e.exports={SlideCustomizationContainer:"LessonForm_SlideCustomizationContainer__1urpL",TextEditor:"LessonForm_TextEditor__YGRGl",FormList:"LessonForm_FormList__rwmsr"}},232:function(e,t,n){e.exports={alert:"Alert_alert__1Yf1Y",withDrawer:"Alert_withDrawer__15icv",noDrawer:"Alert_noDrawer__2YNGS",success:"Alert_success__2W1VH",fail:"Alert_fail__qUkBJ"}},262:function(e,t,n){e.exports={pdfCanvas:"PdfViewer_pdfCanvas__2nu4D",flexPositioningEven:"PdfViewer_flexPositioningEven__1Lffj",pageNumberDisplay:"PdfViewer_pageNumberDisplay__qHBe7"}},264:function(e,t,n){},296:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=296},330:function(e,t,n){e.exports={Loader:"Spinner_Loader__11uV7",load2:"Spinner_load2__1AAoL",loader:"Spinner_loader__1LFws",load1:"Spinner_load1__3vMtP",ldsGrid:"Spinner_ldsGrid__Wy-QV",Backdrop:"Spinner_Backdrop__1jzmB"}},332:function(e,t,n){e.exports={editor:"Editor_editor__3QZEV",options:"Editor_options__RJriu",textLabel:"Editor_textLabel__12kzt",errorText:"Editor_errorText__2LjDS",yellowBorder:"Editor_yellowBorder__1w6Gr"}},333:function(e,t,n){e.exports={NavigationItem:"NavigationItem_NavigationItem__3vFow",NavigationItemDark:"NavigationItem_NavigationItemDark__3C4y7",active:"NavigationItem_active__1mqXe"}},37:function(e,t,n){e.exports={PositionIcon:"ReviewTest_PositionIcon__2yKoz",QuestionContainer:"ReviewTest_QuestionContainer__2Dj8X",QuestionContainerDark:"ReviewTest_QuestionContainerDark__3RaVX",QuestionBorderCorrect:"ReviewTest_QuestionBorderCorrect__2edHg",QuestionBorderInCorrect:"ReviewTest_QuestionBorderInCorrect__3h2ek",SummaryContainer:"ReviewTest_SummaryContainer__1EKrv",SummaryContainerDark:"ReviewTest_SummaryContainerDark__2GpnD",SectionMarks:"ReviewTest_SectionMarks__3W6wL",GreenText:"ReviewTest_GreenText__3WqYk",RedText:"ReviewTest_RedText__1brV_",YellowText:"ReviewTest_YellowText__BW_KK",YellowBackground:"ReviewTest_YellowBackground__1R_fT",button:"ReviewTest_button__1xHQ9",Inline:"ReviewTest_Inline__2v8Ui",center:"ReviewTest_center__3x7XD",TestTypeRadio:"ReviewTest_TestTypeRadio__TSExH",ListHorizontalDisplay:"ReviewTest_ListHorizontalDisplay__ubm4C",TestFormList:"ReviewTest_TestFormList__3PY1j",Editor:"ReviewTest_Editor__3cif7",greenIcon:"ReviewTest_greenIcon__34rvW",redIcon:"ReviewTest_redIcon__1u5c6",CorrectAnswerHighlight:"ReviewTest_CorrectAnswerHighlight__14Pn4",BlankPreview:"ReviewTest_BlankPreview__nyrjb",InputField:"ReviewTest_InputField__3rkhx",FullWidth:"ReviewTest_FullWidth__1pczB",InputFieldBottomMargin:"ReviewTest_InputFieldBottomMargin__B2y0C",SelectField:"ReviewTest_SelectField__3A-jb",Pointer:"ReviewTest_Pointer__1XBXl",audioPlayerPreview:"ReviewTest_audioPlayerPreview__uLkPN",SlideBackground:"ReviewTest_SlideBackground__3g0ji"}},392:function(e,t,n){e.exports={notification:"Notification_notification__ipYkd",withDrawer:"Notification_withDrawer__29NLM",noDrawer:"Notification_noDrawer__WZVKG",success:"Notification_success__1-5eR",chat:"Notification_chat__1_4NL",fail:"Notification_fail__3kH7Z"}},403:function(e,t,n){e.exports={Auth:"PasswordReset_Auth__L_g1D",errorMessage:"PasswordReset_errorMessage__CWI2X",ButtonContainer:"PasswordReset_ButtonContainer__1Oubf"}},404:function(e,t,n){e.exports={Auth:"AccountVerification_Auth__2_bn0",errorMessage:"AccountVerification_errorMessage__23fiL",ButtonContainer:"AccountVerification_ButtonContainer__3n6ZC"}},405:function(e,t,n){e.exports={spacing:"TagInput_spacing__1d-u8",inputContainer:"TagInput_inputContainer__1rikX"}},406:function(e,t,n){e.exports={alert:"RefreshSessionAlert_alert__32i4H",refreshBlocked:"RefreshSessionAlert_refreshBlocked__2D5rP"}},44:function(e){e.exports=JSON.parse('{"es":{"languages":{"english":"Ingl\xe9s","spanish":"Espa\xf1ol","russian":"Ruso","arabic":"\xc1rabe","italian":"Italiano","french":"Franc\xe9s"}}}')},45:function(e){e.exports=JSON.parse('{"en":{"languages":{"english":"English","spanish":"Spanish","russian":"Russian","arabic":"Arabic","italian":"Italian","french":"French"}}}')},47:function(e,t,n){e.exports={PositionIcon:"GradeTestForm_PositionIcon__3tEUX",QuestionContainer:"GradeTestForm_QuestionContainer__1QBii",SectionMarks:"GradeTestForm_SectionMarks__2v940",GreenText:"GradeTestForm_GreenText__3bK8t",RedText:"GradeTestForm_RedText__2WSx3",YellowBackground:"GradeTestForm_YellowBackground__5V6jI",button:"GradeTestForm_button__3-Rp9",Inline:"GradeTestForm_Inline__EzUF6",center:"GradeTestForm_center__GfdOG",TestTypeRadio:"GradeTestForm_TestTypeRadio__3fFY5",ListHorizontalDisplay:"GradeTestForm_ListHorizontalDisplay__3D7Ps",TestFormList:"GradeTestForm_TestFormList__1zXu0",Editor:"GradeTestForm_Editor__MFD0s",greenIcon:"GradeTestForm_greenIcon__2fEJa",redIcon:"GradeTestForm_redIcon__30O2n",CorrectAnswerHighlight:"GradeTestForm_CorrectAnswerHighlight__27prd",BlankPreview:"GradeTestForm_BlankPreview__2TjaK",InputField:"GradeTestForm_InputField__V0OKB",FullWidth:"GradeTestForm_FullWidth__24idF",InputFieldBottomMargin:"GradeTestForm_InputFieldBottomMargin__fauyA",SelectField:"GradeTestForm_SelectField__GIrnf",Pointer:"GradeTestForm_Pointer__3GN8X",audioPlayerPreview:"GradeTestForm_audioPlayerPreview__1R4w3",SlideBackground:"GradeTestForm_SlideBackground__oek-M"}},497:function(e,t,n){},50:function(e,t,n){e.exports={QuestionCustomizationContainer:"TestForm_QuestionCustomizationContainer__1B5i8",flexPositioningSpaceBetween:"TestForm_flexPositioningSpaceBetween__kdtqw",flexPositioningEnd:"TestForm_flexPositioningEnd__39gfc",AudioAlignment:"TestForm_AudioAlignment__2xVul",TextField:"TestForm_TextField__DjIDS",TextEditor:"TestForm_TextEditor__1VHzk",PreviewContainer:"TestForm_PreviewContainer__1YEM_",CorrectAnswer:"TestForm_CorrectAnswer__25di7",button:"TestForm_button__1y61_",FullWidthImg:"TestForm_FullWidthImg__1kaKf",Inline:"TestForm_Inline__MsvQq",center:"TestForm_center__1TCAd",TestTypeRadio:"TestForm_TestTypeRadio__2Hne_",ListHorizontalDisplay:"TestForm_ListHorizontalDisplay__-8t6U",TestFormList:"TestForm_TestFormList__3NFzO",greenIcon:"TestForm_greenIcon__JFFFl",redIcon:"TestForm_redIcon__1BnKX",CorrectAnswerHighlight:"TestForm_CorrectAnswerHighlight__3vZHd",BlankPreview:"TestForm_BlankPreview__3XprO",InputField:"TestForm_InputField__2kwvJ",FullWidth:"TestForm_FullWidth__1FYZJ",InputFieldBottomMargin:"TestForm_InputFieldBottomMargin__1OX1E",SelectField:"TestForm_SelectField__1FMX6",Pointer:"TestForm_Pointer__36bgT",audioPlayerPreview:"TestForm_audioPlayerPreview__2N6du",errorText:"TestForm_errorText__1QR7G",Editor:"TestForm_Editor__3WwHp"}},541:function(e,t,n){e.exports=n.p+"static/media/course-icon.adaad8da.png"},546:function(e){e.exports=JSON.parse('{"es":{"drawer":{"courses":"Cursos","account":"Cuenta","logout":"Cerrar sesi\xf3n","modules":"Modulos","lessons":"Lecciones","assignments":"Tareas","tests":"Pruebas","grades":"Calificar","chat":"Mensajes","students":"Estudiantes","progressReport":"Informe de progreso","test":"Prueba","resources":"Recursos","config":"Configuraci\xf3n"},"tabBar":{"courses":"Cursos","newcourse":"Nuevo curso","editcourse":"Editar curso","yourcourses":"Sus courses","allcourses":"Todos los cursos","lessons":"Lecciones","newlesson":"Nueva lecci\xf3n","editlesson":"Editar lecci\xf3n","assignments":"Tareas","newassignment":"Nueva tarea","editassignment":"Editar tarea","completedassignments":"Tareas completadas","tests":"Pruebas","newtest":"Nueva prueba","edittest":"Editar prueba","completedtests":"Pruebas completadas","questionbank":"Preguntas","contacts":"Contactos","chat":"Chat","students":"Estudiantes","enrollmentrequests":"Solicitudes de inscripci\xf3n"}}}')},547:function(e){e.exports=JSON.parse('{"en":{"drawer":{"courses":"Courses","account":"Account","logout":"Logout","modules":"Modules","lessons":"Lessons","assignments":"Assignments","tests":"Tests","grades":"Grade","chat":"Chat","students":"Students","progressReport":"Progress report","test":"Test","resources":"Resources","config":"Settings"},"tabBar":{"courses":"Courses","newcourse":"New course","editcourse":"Edit course","yourcourses":"Your courses","allcourses":"All courses","lessons":"Lessons","newlesson":"New lesson","editlesson":"Edit lesson","assignments":"Assignments","newassignment":"New assignment","editassignment":"Edit assignment","completedassignments":"Completed assignments","tests":"Tests","newtest":"New test","edittest":"Edit test","completedtests":"Completed tests","questionbank":"Question bank","contacts":"Contacts","chat":"Chat","students":"Students","enrollmentrequests":"Enrollment requests"}}}')},548:function(e){e.exports=JSON.parse('{"es":{"assignments":"Tareas","lessons":"Lecciones","tests":"Pruebas","modules":"Modulos","subjects":"Sujetos","topics":"Temas","module":"Modulo","subject":"Sujeto","topic":"Tema","buttons":{"addmodule":"A\xf1adir modulo","addsubject":"A\xf1adir sujeto","addtopic":"A\xf1adir tema"}}}')},549:function(e){e.exports=JSON.parse('{"en":{"assignments":"Assignments","lessons":"Lessons","tests":"Tests","modules":"Modules","subjects":"Subjects","topics":"Topics","module":"Module","subject":"Subject","topic":"Topic","buttons":{"addmodule":"Add module","addsubject":"Add subject","addtopic":"Add topic"}}}')},550:function(e){e.exports=JSON.parse('{"es":{"module":"Modulo","topics":"Temas","subjects":"Sujetos","lessons":"Lessons","tests":"Pruebas","assignments":"Tareas","quiz":"Mini test","midterm":"Examen de mitad de per\xedodo","final":"Examen final"}}')},551:function(e){e.exports=JSON.parse('{"en":{"module":"Module","topics":"Topics","subjects":"Subjects","lessons":"Lessons","tests":"Tests","assignments":"Assignments","quiz":"Quiz","midterm":"Midterm","final":"Final"}}')},552:function(e){e.exports=JSON.parse('{"es":{"signIn":"Iniciar sesi\xf3n","signUp":"Registrarse","email":"Correo electr\xf3nico","password":"Contrase\xf1a","confirmPassword":"Confirmar contrase\xf1a","accountType":"Tipo de cuenta","dob":"Fecha de nacimiento","language":"Idioma","firstName":"Nombre","lastName":"Apellido","forgotPassword":"\xbfHa olvidado su contrase\xf1a?","enterEmailToResetPassword":"Ingrese el correo electr\xf3nico asociado con la cuenta, se enviar\xe1 un enlace para restablecer su contrase\xf1a a su correo electr\xf3nico.","resetPassword":"Restablecer la contrase\xf1a","student":"Estudiante","instructor":"Profesor","accountVerification":"Verificaci\xf3n de la cuenta","alreadyVerified":"La cuenta ya est\xe1 verificada, puede iniciar sesi\xf3n","errors":{"makeSelection":"Debe hacer una selecci\xf3n","required":"Requerido","enterFirstName":"Debe ingresar su nombre","enterLastName":"Debe ingresar su apellido","enterFirstNameOnlyAlpha":"Su nombre solo debe contener letras y espacios","enterLastNameOnlyAlpha":"Su apellido solo debe contener letras y espacios","passwordMismatched":"Las contrase\xf1as no coinciden","passwordConditions":"La contrase\xf1a debe contener al menos 8 caracteres y debe contener al menos 1 de los siguientes caracteres: 1 may\xfascula, 1 min\xfascula, 1 car\xe1cter especial (!, @, #, $,%, ^, &, *) y 1 car\xe1cter num\xe9rico","enterDateOfBirth":"Debe ingresar su fecha de nacimiento","enterValidEmail":"Debe ingresar un correo electr\xf3nico v\xe1lido","studentNoAccount":"No se encontr\xf3 una cuenta de estudiante con este correo electr\xf3nico","instructorNoAccount":"No se encontr\xf3 una cuenta de profesor con este correo electr\xf3nico","notVerifiedCheckEmail":"Su cuenta a\xfan no ha sido verificada, revise su correo electr\xf3nico","wrongPassword":"Contrase\xf1a incorrecta","alreadyVerified":"Su cuenta ya est\xe1 verificada, puede iniciar la sesi\xf3n","emailTaken":"Este correo electr\xf3nico ya est\xe1 en uso"},"buttons":{"next":"Siguiente","back":"Atr\xe1s","submit":"Enviar","switchToSignIn":"Cambiar para iniciar sesi\xf3n","switchToSignUp":"Cambiar para registrarse","resendEmail":"Reenviar correo electr\xf3nico de verificaci\xf3n de cuenta","returnToSignIn":"Volver para iniciar sesi\xf3n","sendLink":"Enviar enlace","verifyAccount":"Verificar Cuenta"}}}')},553:function(e){e.exports=JSON.parse('{"en":{"signIn":"Sign in","signUp":"Sign up","email":"E-mail","password":"Password","confirmPassword":"Confirm Password","accountType":"Account type","dob":"Date of birth","language":"Language","firstName":"First name","lastName":"Last name","forgotPassword":"Forgot password?","resetPassword":"Reset password","student":"Student","instructor":"Instructor","accountVerification":"Account verification","alreadyVerified":"The account is already verified, you can login","enterEmailToResetPassword":"Enter the email associated with the account, a link to reset your password will be sent to your email.","errors":{"makeSelection":"You must make a selection","required":"Required","enterFirstName":"You must enter your first name","enterLastName":"You must enter your last name","enterFirstNameOnlyAlpha":"Your first name must only contain letters and spaces","enterLastNameOnlyAlpha":"Your last name must only contain letters and spaces","passwordMismatched":"Password mismatched","passwordConditions":"Password must contain atleast 8 characters and must contain atleast 1 of the following characters: 1 uppercase, 1 lowercase, 1 special character(!,@,#,$,%,^,&,*), and 1 numeric character","enterDateOfBirth":"You must enter your date of birth\'","enterValidEmail":"Enter a valid e-mail","studentNoAccount":"No student account found with this e-mail","instructorNoAccount":"No instructor account found with this e-mail","notVerifiedCheckEmail":"Your account has not yet been verified, check your e-mail","wrongPassword":"Wrong password","alreadyVerified":"Your account is already verified, you can sign in","emailTaken":"This e-mail is already taken"},"buttons":{"next":"Next","back":"Back","submit":"Submit","switchToSignIn":"Switch to sign in","switchToSignUp":"Switch to sign up","resendEmail":"Resend account verification e-mail","returnToSignIn":"Return to sign in","sendLink":"Send link","verifyAccount":"Verify account"}}}')},554:function(e){e.exports=JSON.parse('{"es":{"firstName":"Nombre","lastName":"Apellido","email":"Correo electr\xf3nico","dob":"Fecha de nacimiento","id":"Identificaci\xf3n","password":"Contrase\xf1a","currentPassword":"Contrase\xf1a actual","newPassword":"Nueva contrase\xf1a","confirmPassword":"Confirma la nueva contrase\xf1a","documentType":"Tipo de documento","governmentId":"Identificaci\xf3n de gobierno","birthCertificate":"Certificado de nacimiento","transcript":"Boleta de calificaciones","proofLegalStatus":"Prueba de estatus legal","cv":"Curriculum vitae (cv)","proofTestScores":"Prueba de puntajes de ex\xe1menes","letterReference":"Carta de referencia","statementPurpose":"Declaraci\xf3n de prop\xf3sito","other":"Otra","accountType":"Tipo de cuenta","forgotPassword":"\xbfHa olvidado su contrase\xf1a?","enterEmailToResetPassword":"Ingrese el correo electr\xf3nico asociado con la cuenta, se enviar\xe1 un enlace para restablecer su contrase\xf1a a su correo electr\xf3nico.","resetPassword":"Restablecer la contrase\xf1a","passwordReset":"Restablecimiento de contrase\xf1a","student":"Estudiante","instructor":"Profesor","errors":{"required":"Requerido","enterFirstName":"Debe ingresar su nombre","enterLastName":"Debe ingresar su apellido","enterFirstNameOnlyAlpha":"Su nombre solo debe contener letras y espacios","enterLastNameOnlyAlpha":"Su apellido solo debe contener letras y espacios","enterDateOfBirth":"Debe ingresar su fecha de nacimiento","makeSelection":"Debe hacer una selecci\xf3n","enterValidEmail":"Debe ingresar un correo electr\xf3nico v\xe1lido","requiredOrSelectKeepPassword":"Requerido o seleccione mantener la contrase\xf1a actual","passwordConditions":"La contrase\xf1a debe contener al menos 8 caracteres y debe contener al menos 1 de los siguientes caracteres: 1 may\xfascula, 1 min\xfascula, 1 car\xe1cter especial (!, @, #, $,%, ^, &, *) y 1 car\xe1cter num\xe9rico","passwordMismatched":"Las contrase\xf1as no coinciden","selectDocAndType":"Seleccione un documento y un tipo o haga clic en eliminar documento","selectPdfWordJpg":"Seleccione un archivo pdf, documento de Word o imagen jpeg para cargar o haga clic en eliminar documento","docMustBeLessThan":"El documento seleccionado debe tener menos de","mustSelectDocType":"Debe seleccionar un tipo de documento","correctTheFormAtDocument":"Corrija el formulario en el documento","selectDocTypeAndDoNotExceed":"seleccione un documento y un tipo y aseg\xfarese de que el tama\xf1o del archivo no exceda {{size}} MB","correctForm":"Corrija el formulario para continuar"},"buttons":{"uploadProfilePicture":"Subir foto de perfil","updateProfilePicture":"Actualizar foto de perfil","clearProfilePicture":"Eliminar foto de perfil","documents":"Documentos","saveChanges":"Guardar cambios","edit":"Editar","next":"Siguiente","back":"Atr\xe1s","uploadDocument":"Subir documento","updateDocument":"Actualizar documento","addDocument":"A\xf1adir documento","removeDocument":"Eliminar documento","keepPassword":"Mantener la contrase\xf1a actual","setNewPassword":"Establecer nueva contrase\xf1a"}}}')},555:function(e){e.exports=JSON.parse('{"en":{"firstName":"First name","lastName":"Last name","email":"E-mail","dob":"Date of birth","password":"Password","currentPassword":"Current password","newPassword":"New password","confirmPassword":"Confirm new password","id":"ID","documentType":"Document type","governmentId":"Government issued ID","birthCertificate":"Birth certificate","transcript":"Transcript","proofLegalStatus":"Proof of legal status","cv":"Curriculum vitae (cv)","proofTestScores":"Proof of test scores","letterReference":"Letter of reference","statementPurpose":"Statement of purpose","other":"Other","accountType":"Account type","forgotPassword":"Forgot password?","resetPassword":"Reset password","passwordReset":"Password reset","student":"Student","instructor":"Instructor","enterEmailToResetPassword":"Enter the email associated with the account, a link to reset your password will be sent to your email.","errors":{"required":"Required","enterFirstNameOnlyAlpha":"Your first name must only contain letters and spaces","enterLastNameOnlyAlpha":"Your last name must only contain letters and spaces","enterFirstName":"You must enter your first name","enterLastName":"You must enter your last name","makeSelection":"You must make a selection","enterDateOfBirth":"You must enter your date of birth\'","enterValidEmail":"Enter a valid e-mail","requiredOrSelectKeepPassword":"Required or select keep current password","passwordMismatched":"Password mismatched","passwordConditions":"Password must contain atleast 8 characters and must contain atleast 1 of the following characters: 1 uppercase, 1 lowercase, 1 special character(!,@,#,$,%,^,&,*), and 1 numeric character","selectDocAndType":"Select a document and a type or click on remove document","selectPdfWordJpg":"Select a pdf file, word document or jpeg image to upload or click on remove document","docMustBeLessThan":"The selected document must be less than","mustSelectDocType":"You must select a document type","correctTheFormAtDocument":"Correct the form at document","selectDocTypeAndDoNotExceed":"select a document and a type and make sure that the file size does not exceed {{size}} MB","correctForm":"Correct the form to continue"},"buttons":{"uploadProfilePicture":"Upload profile picture","updateProfilePicture":"Update profile picture","clearProfilePicture":"Clear profile picture","documents":"Documents","saveChanges":"Save changes","next":"Next","back":"Back","edit":"Edit","uploadDocument":"Upload document","updateDocument":"Update document","addDocument":"Add document","removeDocument":"Remove document","keepPassword":"Keep current password","setNewPassword":"Set new password"}}}')},556:function(e){e.exports=JSON.parse('{"es":{"courseCustomization":"Personalizaci\xf3n del curso","courseThumbnail":"Miniatura del curso","importantDates":"Fechas importantes","weeklyOfficeHours":"Horas de oficina semanales","specificDateOfficeHours":"Horas de oficina en fechas espec\xedficas","coursePrerequisites":"Cursos de requisitos previos","courseSyllabus":"Programa del curso","instructor":"Profesor","errors":{"required":"Requerido","noDuplicateNames":"Ya tienes un curso con ese nombre","enterCourseName":"Debes ingresar un nombre de curso","studentCapacityGreaterThanZero":"La capacidad de los estudiantes debe ser superior a 0","studentCapacityInteger":"La capacidad de los estudiantes debe ser un n\xfamero entero","studentCapacityGreaterThanOrEqualTo":"La capacidad de los estudiantes debe ser mayor o igual a la cantidad de estudiantes inscritos.","laterDate":"Debe ser una fecha o hora posterior","startDateNotBeforeEndDate":"La fecha de finalizaci\xf3n debe ser posterior a la fecha de inicio","courseStartDateNotBeforeEnrollmentStartDate":"El curso no puede comenzar antes de la fecha de inicio de la inscripci\xf3n","courseDropDateNotBeforeEnrollmentStartDate":"La fecha de abandono del curso no puede ser anterior a la fecha de inicio de la inscripci\xf3n","courseDropDateNotAfterCourseEndDate":"La fecha de abandono del curso no puede ser posterior a la fecha de finalizaci\xf3n del curso","enrollmentStartAndEndDateNotAfterCourseEndDate":"La fecha de inicio y finalizaci\xf3n de la inscripci\xf3n no puede ser posterior a la fecha de finalizaci\xf3n del curso","testsHasAvailableOnDate":"Una de las pruebas o tareas de este curso tiene una fecha disponible el","testsHasDueDate":"Una de las pruebas o tareas de este curso tiene una fecha de vencimiento el","testsHasGradeReleaseDate":"Una de las pruebas o tareas de este curso tiene una fecha de publicaci\xf3n de calificaciones el","lessonsHasAvailableOnDate":"Una de las lecciones de este curso tiene fecha disponible el","fallsOutsideCourseDuration":" que est\xe1 fuera de la duraci\xf3n del curso","isBeforeStartDateOfCourse":" que es anterior a la fecha de inicio del curso","enterDateOrRemove":"Ingrese una fecha o elimine la fecha","enterDateBeforeCourseEndDate":"Ingrese una fecha anterior a la fecha de finalizaci\xf3n del curso","enterDateAfterCourseStartDate":"Ingrese una fecha posterior a la fecha de inicio del curso","startTimeEndTimeCannotBeSame":"La hora de inicio y la hora de finalizaci\xf3n no pueden ser iguales","startTimeCannotBeAfterEndTime":"La hora de inicio no puede ser posterior a la hora de finalizaci\xf3n","enterCompleteTimeInterval":"Ingrese un intervalo de tiempo completo","enterTimeIntervalOrUncheck":"Ingrese un intervalo de tiempo o desmarque","correctForm":"Corrija el formulario para continuar"},"buttons":{"update":"Actualizar","publish":"Publicar","clearImage":"Elimina imagen","addDate":"A\xf1adir fecha","removeDate":"Eliminar fecha","next":"Siguiente","back":"Atr\xe1s"},"fields":{"courseName":"Nombre del curso","courseActive":"Curso activo","taughtIn":"Se imparte en","maxStudents":"Max estudiantes","enrollmentPeriod":"Per\xedodo de inscripci\xf3n","courseDuration":"Duraci\xf3n del curso","deadlineToDrop":"Fecha l\xedmite para abandonar el curso","date":"Fecha","timeRange":"Intervalo de tiempo","daysOfWeek":"D\xedas de la semana","chooseImage":"Elige imagen","officeHours":"Hourario de officina","weeklyOfficeHours":{"mondayOfficeHours":"Horario de oficina lunes","tuesdayOfficeHours":"Horario de oficina martes","wednesdayOfficeHours":"Horario de oficina mi\xe9rcoles","thursdayOfficeHours":"Horario de oficina jueves","fridayOfficeHours":"Horario de oficina viernes","saturdayOfficeHours":"Horario de oficina s\xe1bado","sundayOfficeHours":"Horario de oficina domingo"}},"days":{"monday":"Lunes","tuesday":"Martes","wednesday":"Mi\xe9rcoles","thursday":"Jueves","friday":"Viernes","saturday":"S\xe1bado","sunday":"Domingo"}}}')},557:function(e){e.exports=JSON.parse('{"en":{"courseCustomization":"Course customization","courseThumbnail":"Course thumbnail","importantDates":"Important dates","weeklyOfficeHours":"Weekly office hours","specificDateOfficeHours":"Office hours on specific dates","coursePrerequisites":"Course prerequisites","courseSyllabus":"Course syllabus","instructor":"Instructor","errors":{"required":"required","noDuplicateNames":"You already have a course with that name","enterCourseName":"You must enter a course name","studentCapacityGreaterThanZero":"Student capacity must be greater than 0","studentCapacityInteger":"Student capacity must be an integer","studentCapacityGreaterThanOrEqualTo":"Student capacity must be greater than or equal to the number of students enrolled","laterDate":"Must be a later date or time","startDateNotBeforeEndDate":"End date must be after start date","courseStartDateNotBeforeEnrollmentStartDate":"Course cannot start before enrollment start date","courseDropDateNotBeforeEnrollmentStartDate":"Course drop date cannot be before enrollment start date","courseDropDateNotAfterCourseEndDate":"Course drop date cannot be after course end date","enrollmentStartAndEndDateNotAfterCourseEndDate":"Enrollment start and end date cannot be after course end date","testsHasAvailableOnDate":"One of the tests or assignments in this course has an available on date on","testsHasDueDate":"One of the tests or assignments in this course has a due date on","testsHasGradeReleaseDate":"One of the tests or assignments in this course has a grade release date on","lessonsHasAvailableOnDate":"One of the lessons in this course has an available on date on","fallsOutsideCourseDuration":" which falls outside the course duration","isBeforeStartDateOfCourse":" which is before the start date of the course","enterDateOrRemove":"Enter a date or remove date","enterDateBeforeCourseEndDate":"Enter a date that is before the course end date","enterDateAfterCourseStartDate":"Enter a date that is after the course start date","startTimeEndTimeCannotBeSame":"Start time and end time can\'t be the same","startTimeCannotBeAfterEndTime":"Start time cannot be after end time","enterCompleteTimeInterval":"You didn\'t enter a complete time interval","enterTimeIntervalOrUncheck":"Enter a time interval or uncheck","correctForm":"Correct the form to continue"},"buttons":{"update":"Update","publish":"Publish","clearImage":"Clear image","addDate":"Add date","removeDate":"Remove date","next":"Next","back":"Back"},"fields":{"courseName":"Course name","courseActive":"Course active","taughtIn":"Taught in","maxStudents":"Student capacity","enrollmentPeriod":"Enrollment period","courseDuration":"Course duration","deadlineToDrop":"Deadline to drop course","date":"Date","timeRange":"Time interval","daysOfWeek":"Days of the week","chooseImage":"Choose image","weeklyOfficeHours":{"mondayOfficeHours":"Monday office hours","tuesdayOfficeHours":"Tuesday office hours","wednesdayOfficeHours":"Wednesday office hours","thursdayOfficeHours":"Thursday office hours","fridayOfficeHours":"Friday office hours","saturdayOfficeHours":"Saturday office hours","sundayOfficeHours":"Sunday office hours"}},"days":{"monday":"Monday","tuesday":"Tuesday","wednesday":"Wednesday","thursday":"Thursday","friday":"Friday","saturday":"Saturday","sunday":"Sunday"}}}')},558:function(e){e.exports=JSON.parse('{"es":{"assignment":"Tarea","test":"Prueba","testCustomization":"Personalizaci\xf3n de prueba","assignmentCustomization":"Personalizaci\xf3n de tarea","otherTestsWeights":"Evaluaci\xf3n del curso (otras pruebas y tareas)","points":"puntos","importantDates":"Fechas importantes","marksDistribution":"Distribuci\xf3n de marcas","assignmentResources":"Recursos de tarea","testResources":"Recursos de prueba","text":"Escrito","fillblanksText":"Escritura","audio":"Audio","question":"Pregunta","answer":"Respuesta","blank":"Vac\xedo","writeAnswers":"Escribe algunas respuestas correctas y incorrectas a la pregunta.","selectCorrectAnswers":"Seleccione las respuestas correctas","selectQuestion":"Seleccione una pregunta preestablecida","textFromQuestionbank":"Obtenga escritura de preguntas preestablecidas","preview":"Avance","customizeAnswers":"Personaliza sus respuestas","correctAnswer":"Respuesta correcta","incorrectOption":"Opci\xf3n incorrecta","incorrectAnswerOptions":"Opciones de respuesta incorrectas","worthXOfTheCourse":"Vale {{weight}}% del curso","currentTest":"Prueba actual","currentAssignment":"Tarea actual","others":"Otras","mcSection":"Secci\xf3n opci\xf3n multiple","essaySection":"Secci\xf3n ensayo","speakingSection":"Secci\xf3n oral","fillblanksSection":"Secci\xf3n llenar los espacios vac\xedos","fillblanksSectionDefaultText":"<p>Resalta un <mark class=\'marker-yellow\'>fragmento de texto</mark> para crear un vac\xedo.</p>","errors":{"required":"Requerido","noDuplicateTestNames":"Ya existe una prueba con este nombre en este curso","noDuplicateAssignmentNames":"Ya existe una tarea con este nombre en este curso","correctForm":"Corrija el formulario para continuar","mustBeBetweenZeroAndThousand":"Debe ser un n\xfamero mayor que 0 y menor o igual que 1000","mustBeGreaterThanZeroAndLessThanHundred":"Debe ser un n\xfamero mayor que 0 y menor que 100","mustBeBetweenOneAndHundred":"Debe ser un n\xfamero mayor o igual a 1 y menor o igual que 100","mustBeGreaterThanOrEqualToOneAndLessThanHundred":"Debe ser un n\xfamero mayor o igual a 1 y menor que 100","specifyPassGrade":"Especifique una calificaci\xf3n aprobatoria o apague la aprobaci\xf3n requerida","intGreaterThanZero":"Debe ingresar un n\xfamero entero mayor que 0","requiredOrDisableTimedTest":"Requerido o desactiva prueba cronometrada","onlyOneFinal":"Solo puede haber 1 examen final","greaterThanZero":"Debe ser mayor que 0","addToHundred":"Las porcentajes de las secciones deben sumar 100 o permite una distribuci\xf3n igual de porcentajes","selectSections":"Seleccione una o m\xe1s secciones","laterDate":"Debe ser una fecha o hora posterior","disableLateSubmission":"Requerido o desactiva el env\xedo tard\xedo","availableOnDateInCourseDuration":"La fecha disponible debe estar dentro de la duraci\xf3n del curso","dueDateInCourseDuration":"La fecha de vencimiento debe estar dentro de la duraci\xf3n del curso","gradeReleaseDateAfterCourseStart":"La fecha de publicaci\xf3n de la calificaci\xf3n debe ser posterior a la fecha de inicio del curso.","availableOnDateBeforeDueDate":"La fecha de disponibilidad debe ser anterior a la fecha de vencimiento","availableOnDateBeforeCloseDate":"La fecha de disponibilidad debe ser anterior a la fecha de cierre","dueDateAfterAvailableOnDate":"La fecha de vencimiento debe ser posterior a la fecha de disponibilidad","gradeReleaseDateAfterAvailableOnDate":"La fecha de publicaci\xf3n de la calificaci\xf3n debe ser posterior a la fecha de disponibilidad","availableOnDateBeforeGradeReleaseDate":"La fecha de disponibilidad debe ser anterior a la fecha de publicaci\xf3n de la calificaci\xf3n","gradeReleaseDateAfterDueDate":"La fecha de publicaci\xf3n de calificaciones debe ser posterior a la fecha l\xedmite","gradeReleaseDateAfterDueDatePlusLateDays":"La fecha de publicaci\xf3n de calificaciones debe ser posterior a la fecha l\xedmite mas los d\xedas de retraso permitidos","gradeReleaseDateAfterCloseDate":"La fecha de publicaci\xf3n de calificaciones debe ser posterior a la fecha de cierre","dueDateBeforeGradeReleaseDate":"La fecha de vencimiento debe ser anterior a la fecha de publicaci\xf3n de calificaciones","dueDatePlusLateDaysBeforeGradeReleaseDate":"La fecha de vencimiento mas los d\xedas de retraso permitidos debe ser anterior a la fecha de publicaci\xf3n de calificaciones","closeDateBeforeGradeReleaseDate":"La fecha de cierre debe ser anterior a la fecha de publicaci\xf3n de calificaciones","docCannotExceed":"El documento no puede exceder","audioCannotExceed":"El tama\xf1o del archivo de audio no puede exceder","answersCantBeEmpty":"Los campos de respuesta no pueden estar vac\xedos","atleastTwoAnswers":"Se requieren al menos 2 respuestas","atleastOneUnchecked":"Al menos 1 respuesta debe permanecer sin marcar","selectAtleastOneAnswer":"Seleccione al menos 1 respuesta correcta","answersDifferent":"Sus respuestas deben ser todas diferentes","requiredOrMakeAudioQuestion":"Requerido o haz una pregunta de audio","requiredOrMakeTextQuestion":"Requerido o haz una pregunta escrito","requiredOrDisableAudioAnswer":"Requerido o desactiva respuesta de audio","incorrectAnswersCantBeSameAsCorrectAnswer":"Las respuestas incorrectas no pueden ser iguales a la respuesta correcta","atLeastOneIncorrectAnswer":"Proporcione al menos 1 opci\xf3n incorrecta o desactive las respuestas seleccionables","noDuplicateIncorrectAnswers":"Hay respuestas incorrectas duplicadas","requiredAudioOrDisableAudio":"Grabe o cargue un audio o desactiva el audio","blankIsReserved":"-BLANK- es una palabra clave reservada y no se puede utilizar","createAtleastOneBlank":"Crea al menos 1 vac\xedo","studentTakingTest":"Un estudiante ha comenzado a tomar la prueba, debe salir del formulario y restablecer la prueba para realizar cambios.","studentTakingAssignment":"Un estudiante ha comenzado a tomar la tarea, debe salir del formulario y restablecer la prueba para realizar cambios.","resetTestToMakeChanges":"Restablece la prueba para realizar cambios. Ya lo han intentado 1 o m\xe1s estudiantes","resetAssignmentToMakeChanges":"Restablece la tarea para realizar cambios. Ya lo han intentado 1 o m\xe1s estudiantes"},"buttons":{"publish":"Publicar","update":"Actualizar","addAnswer":"Agregar respuesta","addQuestion":"Agregar pregunta","removeQuestion":"Eliminar pregunta","selectAudioFile":"Seleccionar archivo de audio","selectDoc":"Seleccionar un documento"},"fields":{"testName":"Nombre de la prueba","assignmentName":"Nombre de la tarea","publish":"Publicar","includeGrade":"Incluir calificaci\xf3n en el c\xe1lculo de la calificaci\xf3n final","testWeight":"Porcentaje de la prueba","assignmentWeight":"Porcentaje de la tarea","blockLessons":"Bloque lecciones del curso","timedTest":"Prueba cronometrada","testTime":"Tiempo de prueba (minutos)","testType":"Tipo de prueba","quiz":"Test","midterm":"Examen de mitad de per\xedodo","final":"Examen final","notes":"Notas para el estudiante","notesPlaceholder":"Por ejemplo temas de la prueba, libros y paginas que tienen que leer..","passingRequired":"Aprobaci\xf3n requerida para completar el curso","passingGrade":"Nota aprobatoria (%)","allowLateSubmission":"Permitir env\xedo tard\xedo","dailyPenalty":"Penalizaci\xf3n diaria por retraso (%)","lateDaysAllowed":"D\xedas retrasados permitidos","assignmentSections":"Secciones de tarea","testSections":"Secciones de prueba","mc":"Opci\xf3n multiple","essay":"Ensayo","speaking":"Oral","fillblanks":"Llenar los espacios vac\xedos","equallyDistributeMarks":"Distribuya equitativamente las marcas en las secciones","sectionWeights":"Porcentaje de cada secci\xf3n (%)","availableOnDate":"Fecha de disponibilidad","gradeReleaseDate":"Fecha de publicaci\xf3n de calificaciones","dueDate":"Fecha de vencimiento","closeDate":"Fecha de cierre","section":"Secci\xf3n","atBeginningOfAssignment":"Al comienzo de la tarea","atBeginningOfTest":"Al comienzo de la prueba","useUploadDoc":"Usar documento cargado (pdf, word, o jpeg)","useUploadAudio":"Usar audio cargado","selectCorrectAnswer":"Seleccione las respuestas correcta(s)","selectCorrectAnswerInline":"Seleccione la respuesta","option":"opci\xf3n","solution":"Soluci\xf3n","marks":"Marcas","selectableAnswer":"Respuesta seleccionable","audioQuestion":"Pregunta audio","audioAnswer":"Respuesta audio"}}}')},559:function(e){e.exports=JSON.parse('{"en":{"assignment":"Assignment","test":"Test","testCustomization":"Test customization","assignmentCustomization":"Assignment customization","otherTestsWeights":"Weight distribution of other tests and assignments","points":"points","importantDates":"Important dates","marksDistribution":"Marks distribution","assignmentResources":"Assignment resources","testResources":"Test resources","text":"Text","fillblanksText":"Text","audio":"Audio","question":"Question","answer":"answer","blank":"Blank","writeAnswers":"Write some correct and incorrect answers to the question","selectCorrectAnswers":"Select the correct answer(s)","selectQuestion":"Select a pre-made question","textFromQuestionbank":"Get text from question bank","preview":"Preview","customizeAnswers":"Customize your answers","correctAnswer":"Correct answer","incorrectAnswerOptions":"Incorrect answer options","incorrectOption":"Incorrect option","worthXOfTheCourse":"Worth {{weight}}% of the course","currentTest":"Current test","currentAssignment":"Current assignment","others":"Others","mcSection":"Multiple-choice section","essaySection":"Essay section","speakingSection":"Speaking section","fillblanksSection":"Fill-in-the-blanks section","fillblanksSectionDefaultText":"<p>Highlight a <mark class=\'marker-yellow\'>piece of text</mark> to create a blank.</p>","errors":{"required":"Required","noDuplicateTestNames":"There is already a test with this name in this course","noDuplicateAssignmentNames":"There is already an assignment with this name in this course","correctForm":"Correct the form to continue","mustBeBetweenZeroAndThousand":"Must be a number greater than 0 and less than or equal to 1000","mustBeGreaterThanZeroAndLessThanHundred":"Must be a number greater than 0 and less than 100","mustBeBetweenZeroAndHundred":"Must be a number greater than 0 and less than or equal to 100","mustBeGreaterThanZeroAndLessThanThousand":"Must be a number greater than 0 and less than 1000","mustBeBetweenOneAndHundred":"Must be a number greater than or equal to 1 and less than or equal to 100","mustBeGreaterThanOnendLessThanHundred":"Must be a number greater than or equal to 1 and less than 100","specifyPassGrade":"Specify a passing grade or switch off passing required","intGreaterThanZero":"Must enter an integer greater than 0","requiredOrDisableTimedTest":"Required or disable timed test","onlyOneFinal":"There can only be 1 final exam","greaterThanZero":"Must be greater than 0","addToHundred":"Section weights must add up to 100 or enable equal weight distribution","selectSections":"Select one or more sections","laterDate":"Must be a later date or time","disableLateSubmission":"Required or disable late submission","availableOnDateInCourseDuration":"The available on date must be within the course duration","dueDateInCourseDuration":"The due date must be within the course duration","gradeReleaseDateAfterCourseStart":"The grade release date must be after the course start date","availableOnDateBeforeDueDate":"The available on date must be before the due date","availableOnDateBeforeCloseDate":"The available on date must be before the close date","dueDateAfterAvailableOnDate":"The due date must be after the available on date","gradeReleaseDateAfterAvailableOnDate":"The grade release date must be after the available on date","availableOnDateBeforeGradeReleaseDate":"The available on date must be before the grade release date","gradeReleaseDateAfterDueDate":"The grade release date must be after the due date","gradeReleaseDateAfterDueDatePlusLateDays":"The grade release date must be after the due date plus the number of late days","gradeReleaseDateAfterCloseDate":"The grade release date must be after the close date","dueDateBeforeGradeReleaseDate":"The due date must be before the grade release date","dueDatePlusLateDaysBeforeGradeReleaseDate":"The due date plus the late days allowed must be before the grade release date","closeDateBeforeGradeReleaseDate":"The close date must be before the grade release date","docCannotExceed":"The document cannot exceed","audioCannotExceed":"The audio file size cannot exceed","answersCantBeEmpty":"Answer fields can\'t be empty","atleastTwoAnswers":"At least 2 answers are required","atleastOneUnchecked":"At least 1 answer must remain unchecked","selectAtleastOneAnswer":"Select at least 1 correct answer","answersDifferent":"Your answers must all be different","requiredOrMakeAudioQuestion":"Required or make an audio question","requiredOrMakeTextQuestion":"Required or make a text question instead","requiredOrDisableAudioAnswer":"Required or disable audio answer","incorrectAnswersCantBeSameAsCorrectAnswer":"Incorrect answers cannot be the same as the correct answer","atLeastOneIncorrectAnswer":"Provide at least 1 incorrect option or disable selectable answers","noDuplicateIncorrectAnswers":"There are duplicate incorrect answers","requiredAudioOrDisableAudio":"Record or upload an audio or disable audio","blankIsReserved":"-BLANK- is a reserved keyword and cannot be used","createAtleastOneBlank":"Create at least 1 blank","studentTakingTest":"A student has has started to take the test you must exit the form and reset the test to make any changes","studentTakingAssignment":"A student has has started to take the test you must exit the form and reset the assignment to make any changes","resetTestToMakeChanges":"Reset the test to make changes, it has already been attempted by 1 or more students","resetAssignmentToMakeChanges":"Reset the assignment to make changes, it has already been attempted by 1 or more students"},"buttons":{"publish":"Publish","update":"Update","addAnswer":"Add answer","addQuestion":"Add question","removeQuestion":"Remove question","selectAudioFile":"Select audio file","selectDoc":"Select a document"},"fields":{"testName":"Test name","assignmentName":"Assignment name","publish":"Publish","includeGrade":"Include grade in final grade calculation","testWeight":"Test weight","assignmentWeight":"Assignment weight","blockLessons":"Block lessons during test","timedTest":"Timed test","testTime":"Test time (minutes)","testType":"Test type","quiz":"Quiz","midterm":"Midterm exam","final":"Final exam","notes":"Notes for the student","notesPlaceholder":"For example topics that will be on the test, books/pages that are required to be read..","passingRequired":"Passing required to complete course","passingGrade":"Passing grade (%)","allowLateSubmission":"Allow late submission","dailyPenalty":"Daily penalty (%)","lateDaysAllowed":"Late days allowed","assignmentSections":"Assignment sections","testSections":"Test sections","mc":"Multiple-choice","essay":"Essay","speaking":"Speaking","fillblanks":"Fill-in-the-blanks","equallyDistributeMarks":"Equally distribute marks across sections","sectionWeights":"Section weights (%)","availableOnDate":"Available on date","gradeReleaseDate":"Grade release date","dueDate":"Due date","closeDate":"Close date","section":"Section","atBeginningOfAssignment":"At beginning of assignment","atBeginningOfTest":"At beginning of test","useUploadDoc":"Use uploaded document (pdf, word, or jpeg)","useUploadAudio":"Use uploaded audio","selectCorrectAnswer":"Select the correct answer(s)","option":"option","solution":"Solution","marks":"Marks","selectableAnswer":"Selectable answer","audioQuestion":"Audio question","audioAnswer":"Audio answer","selectCorrectAnswerInline":"Select the correct answer"}}}')},560:function(e){e.exports=JSON.parse('{"es":{"question":"Pregunta","writeAnswers":"Escribe algunas respuestas correctas y incorrectas a la pregunta.","selectCorrectAnswers":"Seleccione las respuestas correcta(s)","option":"opci\xf3n","fillblanksSectionDefaultText":"<p>Resalta un <mark class=\'marker-yellow\'>fragmento de texto</mark> para crear un vac\xedo.</p>","pieceOfText":"fragmento de texto","english":"ingl\xe9s","errors":{"required":"Requerido","answersCantBeEmpty":"Los campos de respuesta no pueden estar vac\xedos","atleastTwoAnswers":"Se requieren al menos 2 respuestas","atleastOneUnchecked":"Al menos 1 respuesta debe permanecer sin marcar","selectAtleastOneAnswer":"Seleccione al menos 1 respuesta correcta","answersDifferent":"Sus respuestas deben ser todas diferentes","requiredOrMakeAudioQuestion":"Requerido o haz una pregunta de audio","requiredOrMakeTextQuestion":"Requerido o haz una pregunta escrito","audioCannotExceed":"El tama\xf1o del archivo de audio no puede exceder","requiredOrDisableAudioAnswer":"Requerido o desactiva respuesta de audio","correctForm":"Corrija el formulario para continuar"},"buttons":{"updateQuestion":"Actualizar la pregunta","saveQuestion":"Guardar la pregunta","addAnswer":"Agregar respuesta","removeQuestion":"Eliminar pregunta"},"fields":{"difficulty":"Dificultad","language":"Idioma","tags":"Etiquetas","easy":"Facil","medium":"Media","hard":"Dif\xedcil","audioQuestion":"Pregunta audio","audioAnswer":"Respuesta audio","solution":"Soluci\xf3n"}}}')},561:function(e){e.exports=JSON.parse('{"en":{"question":"Question","writeAnswers":"Write some correct and incorrect answers to the question","selectCorrectAnswers":"Select the correct answer(s)","option":"option","fillblanksSectionDefaultText":"<p>Highlight a <mark class=\'marker-yellow\'>piece of text</mark> to create a blank.</p>","pieceOfText":"piece of text","english":"english","errors":{"required":"Required","answersCantBeEmpty":"Answer fields can\'t be empty","atleastTwoAnswers":"At least 2 answers are required","atleastOneUnchecked":"At least 1 answer must remain unchecked","selectAtleastOneAnswer":"Select at least 1 correct answer","answersDifferent":"Your answers must all be different","requiredOrMakeAudioQuestion":"Required or make an audio question","requiredOrMakeTextQuestion":"Required or make a text question instead","audioCannotExceed":"The audio file size cannot exceed","requiredOrDisableAudioAnswer":"Required or disable audio answer","correctForm":"Correct the form to continue"},"buttons":{"updateQuestion":"Update question","saveQuestion":"Save question","addAnswer":"Add answer","removeQuestion":"Remove question"},"fields":{"difficulty":"Difficulty","language":"Language","tags":"Tags","easy":"Easy","medium":"Medium","hard":"Hard","audioQuestion":"Audio question","audioAnswer":"Audio answer","solution":"Solution"}}}')},562:function(e){e.exports=JSON.parse('{"es":{"assignmentResources":"Recursos de tarea","testResources":"Recursos de prueba","assignmentgrade":"Calificacione de la tarea","testgrade":"Calificacione de la prueba","sectionResources":"Recursos de la secci\xf3n","sectionWorth":"Esta secci\xf3n vale ","multiplechoicesection":"Secci\xf3n opci\xf3n multiple","essaysection":"Secci\xf3n ensayo","speakingsection":"Secci\xf3n oral","fillintheblankssection":"Secci\xf3n llenar los espacios vac\xedos","multipleChoice":"Opci\xf3n multiple","essay":"Ensayo","speaking":"Oral","fillInBlanks":"Llenar los espacios vac\xedos","question":"Pregunta","blank":"Vac\xedo","studentAnsweredCorrectly":"Respondi\xf3  correctamente","correctAnswer":"Respuesta correcta","correctAnswerPlural":"Respuesta correctas","studentAnswer":"Respuesta del estudiante","solution":"Soluci\xf3n","latePenalty":"Penalizaci\xf3n por retraso","passed":"Aprobada","failed":"Fall\xf3","summary":"Resumen","dayLateSingular":"d\xeda retrasado","dayLatePlural":"d\xedas retrasados","assignmentGrade":"Calificacione de la tarea","testGrade":"Calificacione de la prueba","gradeAdjustedForWeights":"Las calificaciones se ajustan seg\xfan las porcentajes de las secciones.","gradeAdjustedForWeightsAndLatePenalty":"Las calificaciones se ajustan seg\xfan las porcentajes de las secciones y la penalizaci\xf3n por retraso.","noGradeReleaseDateWarning":"Dado que no ha especificado una fecha de publicaci\xf3n de calificaciones, el estudiante podr\xe1 ver las calificaciones inmediatamente despu\xe9s de publicarlas.","gradeRelaseDatePassedWarning":"Dado que la fecha de publicaci\xf3n de calificaciones ha pasado, el estudiante podr\xe1 ver sus calificaciones inmediatamente despu\xe9s de que las publique.","gradeReleaseDateNotYetPassedWarning":"Una vez que se publican las calificaciones, el estudiante podr\xe1 ver las calificaciones y revisar las respuestas el .","oneAnswerIncorrect":"1 respuesta fue seleccionada incorrectamente","oneAnswerMissing":"Se deber\xeda haber seleccionado 1 respuesta correcta pero no fue","xAnswersSelectedIncorrectly":"2 respuestas fueron seleccionadas incorrectamente","xAnswersMissing":"2 respuestas deber\xedan haber sido seleccionadas pero no fueron","noAnswerProvided":"El estudiante no respondi\xf3","studentSelected":"seleccion\xf3","incorrectOptionOne":"Opci\xf3n incorrecta 1","errors":{"required":"Requerido","finalGradeBetweenZeroAndHundred":"La calificaci\xf3n final debe estar entre 0 y 100","latePenaltyBetweenZeroAndHundred":"Penalizaci\xf3n por retraso debe estar entre 0 y 100","valueCantBeNegative":"El valor no puede ser negativo","valueCantBeGreaterThan":"El valor no puede ser mayor que ","correctForm":"Corrija el formulario para continuar","provideGrade":"Proporcionar una calificaci\xf3n o desactiva el cambio de calificaci\xf3n"},"buttons":{"playStudentsAnswer":"Escuche la respuesta del estudiante","playQuestion":"Escuche la pregunta","playSolution":"Escuche la soluci\xf3n","recordFeedback":"Grabar comentario","saveGradesExit":"Guardar calificaciones y salir","postGrades":"Publicar calificaciones","updateGrades":"Actualizar calificaciones"},"fields":{"correctUsingTextEditor":"Corregir usando el editor de texto","marks":"Marcas","feedback":"Comentario","additionalNotesForStudent":"Comentario","overrideGrade":"Cambiar calificacione","gradeAdjustment":"Ajuste de calificacione","gradeAdjustmentExplanation":"Explicaci\xf3n del ajuste de calificaci\xf3n","agree":"Estoy de acuerdo"}}}')},563:function(e){e.exports=JSON.parse('{"en":{"assignmentResources":"Assignment resources","testResources":"Test resources","assignmentgrade":"Assignment grade","testgrade":"Test grade","sectionResources":"Section resources","multiplechoicesection":"Multiple-choice section","essaysection":"Essay section","speakingsection":"Speaking section","fillintheblankssection":"Fill-in-the-blanks section","multipleChoice":"Multiple-choice","essay":"Essay","speaking":"Speaking","fillInBlanks":"Fill-in-the-blanks","sectionWorth":"This section is worth ","question":"Question","blank":"Blank","correctAnswer":"Correct answer","correctAnswerPlural":"Correct answers","studentAnswer":"Student answer","studentAnsweredCorrectly":"Answered correctly","solution":"Solution","latePenalty":"Late penalty","passed":"Passed","failed":"Failed","summary":"Summary","dayLateSingular":"day late","dayLatePlural":"days late","assignmentGrade":"Assignment grade","testGrade":"Test grade","gradeAdjustedForWeights":"Grade adjusted for section weights","gradeAdjustedForWeightsAndLatePenalty":"Grade adjusted for section weights and late penalty","noGradeReleaseDateWarning":"Since you have not specified a grade release date, the student will be able to see the grades immediatly after you post them.","gradeRelaseDatePassedWarning":"Since the grade release date has passed, the student will be able to see his or her grades immediately after you post them.","gradeReleaseDateNotYetPassedWarning":"Once the grades are posted, the student will able to see the grades and review the answers on","oneAnswerIncorrect":"1 answer was selected incorrectly","oneAnswerMissing":"1 correct answer should have been selected but wasn\'t","xAnswersSelectedIncorrectly":"answers were selected incorrectly","xAnswersMissing":"answers should have been selected but weren\'t","noAnswerProvided":"No answer was provided by the student","studentSelected":"student selected","incorrectOptionOne":"Incorrect Option 1","errors":{"required":"Required","finalGradeBetweenZeroAndHundred":"Final grade must be between 0 and 100","latePenaltyBetweenZeroAndHundred":"Late penalty must be between 0 and 100","valueCantBeNegative":"Value can\'t be negative","valueCantBeGreaterThan":"Value can\'t be greater than","provideGrade":"Provide a grade or disable grade override","correctForm":"Correct the form to continue"},"buttons":{"playStudentsAnswer":"Play student\'s answer","playQuestion":"Play question","playSolution":"Play solution","recordFeedback":"Record feedback","saveGradesExit":"Save grades and exit","postGrades":"Post grades","updateGrades":"Update grades"},"fields":{"correctUsingTextEditor":"Correct using text editor","marks":"Marks","feedback":"Feedback","additionalNotesForStudent":"Additional notes for student","overrideGrade":"Override grade","gradeAdjustment":"Grade adjustment","gradeAdjustmentExplanation":"Grade adjustment explanation","agree":"I agree"}}}')},564:function(e){e.exports=JSON.parse('{"es":{"slide":"Diapositivo","errors":{"required":"Requerido","noDuplicateLessonNames":"Ya existe una lecci\xf3n con este nombre en este curso","availableOnDateInCourseDuration":"La fecha disponible debe estar dentro de la duraci\xf3n del curso","uploadOrDisable":"Sube un video o desactiva video diapositivo","correctForm":"Corrija el formulario para continuar","audioCannotExceed":"El tama\xf1o del archivo de audio no puede exceder","videoCannotExceed":"El tama\xf1o del archivo de video no puede exceder"},"buttons":{"publish":"Publicar","update":"Actualizar","addSlide":"A\xf1adir diapositivo","removeSlide":"Eliminar diapositivo","selectAudioFile":"Seleccionar archivo de audio","selectVideoFile":"Seleccionar archivo de video"},"fields":{"lessonName":"Nombre de la lecci\xf3n","publish":"Publicar","availableOnDate":"Fecha de disponibilidad","videoContent":"Video diapositivo","audioFromFile":"Audio de un archivo"}}}')},565:function(e){e.exports=JSON.parse('{"en":{"slide":"Slide","errors":{"required":"Required","noDuplicateLessonNames":"There is already a lesson with this name in this course","availableOnDateInCourseDuration":"The available on date must be within the course duration","audioCannotExceed":"The audio file size cannot exceed","videoCannotExceed":"The video file size cannot exceed","uploadOrDisable":"Upload a video or disable video content","correctForm":"Correct the form to continue"},"buttons":{"publish":"Publish","update":"Update","addSlide":"Add slide","removeSlide":"Remove slide","selectAudioFile":"Select audio file","selectVideoFile":"Select video file"},"fields":{"lessonName":"Lesson name","publish":"Publish","availableOnDate":"Available on date","videoContent":"Video from file","audioFromFile":"Audio from file"}}}')},566:function(e){e.exports=JSON.parse('{"en":{"multiplechoicesection":"Multiple-choice section","essaysection":"Essay section","speakingsection":"Speaking section","fillintheblankssection":"Fill-in-the-blanks section","assignmentResources":"Assignment resources","testResources":"Test resources","question":"Question","lessThanFiveMin":"Less than 5 minutes left, go over your answers and save your test","lessThanOneMin":"Less than 1 minute left, save your test","testClosesAt":"Test closes at {{time}}","errors":{"questionsUnanswered":"You have left some questions unanswered","playQuestion":"Play question"},"buttons":{"save":"Save","exit":"Exit","submit":"submit","submitAnyway":"Submit Anyway","questions":"Questions","nextSection":"Next section","previousSection":"Previous section","recordAnswer":"Record answer","playQuestion":"Play question"},"fields":{"selectAnswer":"Select the correct answer"}}}')},567:function(e){e.exports=JSON.parse('{"es":{"multiplechoicesection":"Secci\xf3n opci\xf3n multiple","essaysection":"Secci\xf3n ensayo","speakingsection":"Secci\xf3n oral","fillintheblankssection":"Secci\xf3n llenar los espacios vac\xedos","assignmentResources":"Recursos de tarea","testResources":"Recursos de prueba","question":"Pregunta","lessThanFiveMin":"Quedan menos de 5 minutos, repase sus respuestas y guarde su prueba","lessThanOneMin":"Queda menos de 1 minuto, guarde su prueba","testClosesAt":"La prueba cierra a {{laOrLas}} {{time}}","errors":{"questionsUnanswered":"Has dejado algunas preguntas sin respuesta","playQuestion":"Escuchar pregunta"},"buttons":{"save":"Guardar","exit":"Salir","submit":"Enviar","submitAnyway":"Enviar de todos modos","questions":"Preguntas","nextSection":"Siguiente secci\xf3n","previousSection":"Secci\xf3n previa","recordAnswer":"Grabar respuesta","playQuestion":"Escuchar pregunta"},"fields":{"selectAnswer":"Selecciona la respuesta correcta"}}}')},568:function(e){e.exports=JSON.parse('{"es":{"sectionWorth":"Esta secci\xf3n vale ","testResources":"Recursos de prueba","assignmentResources":"Recursos de tarea","sectionResources":"Recursos de la secci\xf3n","multiplechoicesection":"Secci\xf3n opci\xf3n multiple","essaysection":"Secci\xf3n ensayo","speakingsection":"Secci\xf3n oral","fillintheblankssection":"Secci\xf3n llenar los espacios vac\xedos","question":"Pregunta","blank":"Vac\xedo","correctAnswer":"Respuesta correcta","correctAnswerPlural":"Respuesta correctas","oneAnswerMissing":"Se deber\xeda haber seleccionado 1 respuesta correcta pero no fue","xAnswersSelectedIncorrectly":"2 respuestas fueron seleccionadas incorrectamente","xAnswersMissing":"2 respuestas deber\xedan haber sido seleccionadas pero no fueron","noAnswerProvided":"No respondi\xf3","marks":"Marcas","feedback":"Comentario","solution":"Soluci\xf3n","yourAnswer":"Su respuesta","latePenalty":"Penalizaci\xf3n por retraso","passed":"Aprobada","failed":"Fall\xf3","summary":"Resumen","gradeAdjustedForWeights":"Las calificaciones se ajustan seg\xfan las porcentajes de las secciones.","gradeAdjustedForWeightsAndLatePenalty":"Las calificaciones se ajustan seg\xfan las porcentajes de las secciones y la penalizaci\xf3n por retraso.","instructorAdjustedGrade":"La calificaci\xf3n fue ajustada","gradeAdjustmentExplanation":"Explicaci\xf3n del ajuste de calificaci\xf3n","assignmentgrade":"La calificaci\xf3n de la tarea","testGrade:":"La calificaci\xf3n de la prueba","selectCorrectAnswer":"Selecciona la respuesta correcta","buttons":{"playFeedback":"Escuchar comentarios","playAnswer":"Escuchar la respuesta correcta","playQuestion":"Escuchar pregunta","noAnswer":"Sin respuesta","playYourAnswer":"Escuchar su respuesta","next":"Siguiente","back":"Atr\xe1s"}}}')},569:function(e){e.exports=JSON.parse('{"en":{"sectionWorth":"This section is worth ","testResources":"Test resources","assignmentResources":"Assignment resources","sectionResources":"Section resources","multiplechoicesection":"Multiple-choice section","essaysection":"Essay section","speakingsection":"Speaking section","fillintheblankssection":"Fill-in-the-blanks section","question":"Question","blank":"Blank","correctAnswer":"Correct answer","correctAnswerPlural":"Correct answers","oneAnswerMissing":"1 correct answer should have been selected but wasn\'t","xAnswersSelectedIncorrectly":"answers were selected incorrectly","xAnswersMissing":"answers should have been selected but weren\'t","noAnswerProvided":"No answer was provided","marks":"Marks","feedback":"Feedback","solution":"Solution","yourAnswer":"Your answer","latePenalty":"Late penalty","passed":"Passed","failed":"Failed","summary":"Summary","gradeAdjustedForWeights":"Grade adjusted for section weights","gradeAdjustedForWeightsAndLatePenalty":"Grade adjusted for section weights and late penalty","instructorAdjustedGrade":"The instructor adjusted the final grade","gradeAdjustmentExplanation":"Grade adjustment explanation","assignmentgrade":"Assignment grade","testGrade:":"Test grade","selectCorrectAnswer":"Select the correct answer","buttons":{"playFeedback":"Play feedback","playAnswer":"Play the correct answer","noAnswer":"No answer","playYourAnswer":"Play your answer","playQuestion":"Play question","next":"Next","back":"Back"}}}')},570:function(e){e.exports=JSON.parse('{"es":{"errors":{"micBlocked":"Su micr\xf3fono est\xe1 bloqueado en el navegador"},"buttons":{"clearAudio":"Eliminar audio","record":"Grabar","stop":"Terminar","preview":"Escuchar"}}}')},571:function(e){e.exports=JSON.parse('{"en":{"errors":{"micBlocked":"Your microphone is blocked in the browser"},"buttons":{"clearAudio":"Clear audio","record":"Record","stop":"Stop","preview":"Preview"}}}')},572:function(e){e.exports=JSON.parse('{"en":{"buttons":{"clearVideo":"Clear video","upload":"Upload"}}}')},573:function(e){e.exports=JSON.parse('{"es":{"buttons":{"clearVideo":"Eliminar video","upload":"Subir"}}}')},574:function(e){e.exports=JSON.parse('{"en":{"from":"from","reason":"Reason","passed":"passed","failed":"failed","test":"test","assignment":"assignment","officeHoursUpdated":"Office hours updated for {{courseName}}","courseDropDeadline":"The deadline to drop the course has changed for {{courseName}} ","courseEnrollRequest":"{{firstName}} {{lastName}} has requested to enroll in {{courseName}}","courseEnrollApprove":"The instructor has accepted your request to enroll in {{courseName}}","courseEnrollDeny":"The instructor has denied you access to {{courseName}}.","allowResubmission":"You are allowed to resubmit the request after you complete the requirements.","courseDrop":"{{firstName}} {{lastName}} dropped out of {{courseName}}","gradeCourse":"You {{passOrFail}} {{courseName}} with a grade of {{grade}}%","adjustGradeCourse":"The instructor adjusted your grade for {{courseName}}. You {{passOrFail}} with a grade of {{grade}}%","newLesson":"A new lesson was posted","newLessonLaterDate":"A new lesson was posted which you can access after {{date}}","lessonUpdated":"The lesson {{lessonName}} was updated","lessonUpdatedDateChanged":"The lesson {{lessonName}} was updated and can now be accessed after {{date}}","workSubmitted":"{{firstName}} submitted {{aOrAn}} {{testOrAssignment}}","workExcused":"Your {{testOrAssignment}} {{testName}} has been excused and will not be included in the final grade.","workGraded":"Your {{testOrAssignment}} {{testName}} has been graded {{grade}}% {{passOrFail}}","workReviewed":"Your {{testOrAssignment}} {{testName}} has been reviewed","workReviewedGradeChanged":"The {{testOrAssignment}} {{testName}} has been reviewed {{grade}}% {{passOrFail}}","workGradeChanged":"The {{testOrAssignment}} {{testName}} grade has been adjusted to {{grade}}% {{passOrFail}}","workGradedLaterDate":"The {{testOrAssignment}} {{testName}} has been graded, you will be able to see your grade on {{gradeReleaseDate}}","newWorkPosted":"A new {{testOrAssignment}} was posted","changeWorkDueDate":"The {{testOrAssignment}} {{testName}} {{dueDateOrCloseDate}} changed to {{dueDate}}","removeWorkDueDate":"The {{testOrAssignment}} {{dueDateOrCloseDate}} was removed, it can now be submitted at any time","changeWorkAvailableOnDate":"The {{testOrAssignment}} available on date was changed to {{availableOnDate}}","removeWorkAvailableOnDate":"The {{testOrAssignment}} is now accessible at any time.","assignmentLateSubmissionRemoved":"The instructor does not allow late submission of the assignment anymore.","assignmentLateSubmissionAllowed":"The instructor has allowed late submission of the assignment with a daily penalty of {{latePenalty}}% for a maximum of {{lateDaysAllowed}} days.","assignmentMaxLateDaysChanged":"The maximum late days allowed for the assignment has changed to {{lateDaysAllowed}} days.","assignmentDailyPenaltyChanged":"The daily penalty for submitting the assignment late has changed to {{latePenalty}}% per day.","workReset":"The instructor reset the {{testOrAssignment}} {{testName}}. {{message}}","workResetCanTakeAgain":"The instructor reset the {{testOrAssignment}} {{testName}}. The progress or grade has been deleted and you can take it again."}}')},575:function(e){e.exports=JSON.parse('{"es":{"from":"de","reason":"Raz\xf3n","passed":"pas\xf3","failed":"fall\xf3","test":"prueba","assignment":"tarea","officeHoursUpdated":"Los horarios de oficina se ha actualizado para {{courseName}}","courseDropDeadline":"La fecha l\xedmite para abandonar el curso ha cambiado para {{courseName}} ","courseEnrollRequest":"{{firstName}} {{lastName}} ha solicitado inscribirse en {{courseName}}","courseEnrollApprove":"El profesor ha aceptado su solicitud para inscribirse en {{courseName}}","courseEnrollDeny":"El profesor le ha negado el acceso a {{courseName}}.","allowResubmission":"Se le permite enviar la solicitud nuevamente despu\xe9s de completar los requisitos.","courseDrop":"{{firstName}} {{lastName}} abandon\xf3 el curso {{courseName}}","gradeCourse":"Usted {{passOrFail}} {{courseName}} con una calificaci\xf3n de {{grade}}%","adjustGradeCourse":"El profesor ajust\xf3 su calificaci\xf3n para {{courseName}}. Usted {{passOrFail}} con una calificaci\xf3n de {{grade}}%","newLesson":"Se public\xf3 una nueva lecci\xf3n","newLessonLaterDate":"Se public\xf3 una nueva lecci\xf3n a la que puede acceder despu\xe9s de {{date}}","lessonUpdated":"La lecci\xf3n {{lessonName}} fue actualizada","lessonUpdatedDateChanged":"La lecci\xf3n {{lessonName}} fue actualizada y ahora se puede acceder despu\xe9s de {{date}}","workSubmitted":"{{firstName}} present\xf3 una {{testOrAssignment}}","workExcused":"Su {{testOrAssignment}} {{testName}} ha sido perdonada y no se incluir\xe1 en la calificaci\xf3n final.","workGraded":"Su {{testOrAssignment}} {{testName}} ha sido calificada {{grade}}% {{passOrFail}}","workReviewed":"Su {{testOrAssignment}} {{testName}} ha sido revisada","workReviewedGradeChanged":"Su {{testOrAssignment}} {{testName}} ha sido revisada {{grade}}% {{passOrFail}}","workGradeChanged":"La calificaci\xf3n de su {{testOrAssignment}} {{testName}} ha sido ajustada {{grade}}% {{passOrFail}}","workGradedLaterDate":"La {{testOrAssignment}} {{testName}} ha sido calificada, su calificaci\xf3n se publicar\xe1 en {{gradeReleaseDate}}","newWorkPosted":"Se public\xf3 una nueva {{testOrAssignment}}","changeWorkDueDate":"La fecha de vencimiento de la {{testOrAssignment}} {{testName}} se cambi\xf3 a {{dueDate}}","removeWorkDueDate":"La fecha de vencimiento de la {{testOrAssignment}} se elimin\xf3, se puede enviar en cualquier momento","changeWorkAvailableOnDate":"La fecha de disponibilidad de la {{testOrAssignment}} en se cambi\xf3 a {{availableOnDate}}","removeWorkAvailableOnDate":"La {{testOrAssignment}} ya est\xe1 disponible en cualquier momento","assignmentLateSubmissionRemoved":"El profesor ya no permite que la tarea se presente tarde.","assignmentLateSubmissionAllowed":"El profesor ha permitido la presentaci\xf3n tard\xeda de la tarea con una penalizaci\xf3n diaria de {{latePenalty}}% por un maxiumum {{lateDaysAllowed}} d\xedas.","assignmentMaxLateDaysChanged":"El m\xe1ximo de d\xedas de retraso permitidos para la tarea tarde ha cambiado a {{lateDaysAllowed}} d\xedas.","assignmentDailyPenaltyChanged":"La penalizaci\xf3n diaria por enviar la tarea tarde ha cambiado a {{latePenalty}}% por d\xeda.","workReset":"El profesor reinici\xf3 la {{testOrAssignment}} {{testName}}. {{message}}","workResetCanTakeAgain":"El profesor reinici\xf3 {{testOrAssignment}} {{testName}}. El progreso o la calificaci\xf3n se ha eliminado y puede volver a tomarlo"}}')},576:function(e){e.exports=JSON.parse('{"en":{"assignment":"assignment","final":"final exam","midterm":"midterm exam","quiz":"quiz","ofTheassignment":"of the assignment","ofThefinal":"of the final exam","ofThemidterm":"of the midterm exam","ofTheQuiz":"of the quiz","officehours":"Office hours from {{start}} to {{end}}","dropDeadline":"Deadline to drop out of {{courseName}} without penalty","testAvailableOnDate":"The {{testType}} {{testName}} will be available","testDueDate":"The {{testType}} {{testName}} will be due","testGradeReleaseDateStudent":"The {{testType}} {{testName}} grades will be released","lessonAvailableOnDate":"The lesson {{lessonName}} will be available","testGradeReleaseDateInstructor":"The {{testType}} {{testName}} grades will be due"}}')},577:function(e){e.exports=JSON.parse('{"es":{"assignment":"tarea","final":"examen final","midterm":"examen de mitad de per\xedodo","quiz":"test","ofTheassignment":"de la tarea","ofThefinal":"del examen final","ofThemidterm":"del examen de mitad de per\xedodo","ofThequiz":"del test","officehours":"Horas de oficina de {{start}} a {{end}}","dropDeadline":"Fecha l\xedmite para abandonar {{courseName}} sin penalizaci\xf3n","testAvailableOnDate":"La {{testType}} {{testName}} estar\xe1 disponible","testDueDate":"La {{testType}} {{testName}} vencer\xe1","testGradeReleaseDateStudent":"Las calificaciones {{ofTheTestType}} {{testName}} ser\xe1n publicadas","lessonAvailableOnDate":"La lecci\xf3n {{lessonName}} estar\xe1 disponible","testGradeReleaseDateInstructor":"Las calificaciones {{ofTheTestType}} {{testName}} se vencer\xe1n"}}')},578:function(e){e.exports=JSON.parse('{"en":{"auth":{"loginFail":"Login failed","fetchUserFail":"Fetch user failed","accountCreatedSuccess":"Account created, check your e-mail for a verification link","accountCreatedFail":"Creating account failed","updatedAccountSuccess":"Account updated","updatedAccountFail":"Updating account failed","uploadingPictureFail":"Uploading profile picture failed","uploadingDocumentsFail":"Uploading account documents failed","accountVerifySuccess":"Account verified","accountVerifyFail":"Account verification failed","verificationLinkSentSuccess":"A verification link was sent to your e-mail","verificationLinkSentFail":"Failed to send a verification link to your e-mail","passwordResetLinkSentSuccess":"A password reset link was sent to your e-mail","passwordResetLinkSentFail":"Failed to send a password reset link to your e-mail","passwordChangeSuccess":"Password changed","passwordChangeFail":"Changing the password failed","extendingSessionFail":"Extending the session failed"},"course":{"fetchCoursesFail":"Failed to retrieve courses","requestSentSuccess":"Your request has been sent","requestSentFailed":"Failed to send enrollment request","enrollmentApproveFail":"Approving enrollment of the student failed","studentDenySuccess":"Access has been denied for the student","studentDenyFail":"Failed to deny access","courseDropSuccess":"Course dropped","courseDropFail":"Failed to drop course","fetchCourseFail":"Failed to retrieve course","createCourseSuccess":"Course created successfully","updateCourseSuccess":"Course updated","createCourseFail":"Creating or updating the course failed","uploadThumbnailFail":"Uploading the course thumbnail failed","changeStateFail":"Failed to change course state","deleteCourseFail":"Failed to delete the course","gradeCourseFail":"Failed to grade the course","updatingResourcesSuccess":"Resources updated","updatingResourcesFail":"Updating resources failed","uploadingResourcesFail":"Uploading resource file failed"},"test":{"retrieveTestFail":"Failed to retrieve test or assignment","retrieveTestFailDatePassed":"The test that was in progress has closed and has been submitted","fetchTestResultsFail":"Failed to get test results","uploadAudioFail":"Uploading audio file failed","studentTestSavedSuccess":"Saved","studentTestSubmittedSuccess":"Submitted","creatingFail":"Failed to created","updatingFail":"Failed to update","uploadingTestResourcesFail":"Uploading text resource file failed","uploadingAudioResourcesFail":"Uploading audio resource file failed","uploadingFillblanksAudioFail":"Uploading fill-in-the-blanks audio file failed","uploadingSpeakingQuestionAudioFail":"Uploading speaking question audio file failed","uploadingSpeakingAnswerAudioFail":"Uploading speaking answer audio file failed","testDeleteSuccess":"Test deleted","testDeleteFail":"Failed to delete the test","closeTestFail":"Closing the test failed","testResetSuccess":"The test was reset","testResetFail":"Resetting the test failed","saveGradesSuccess":"Grade saved","postGradesSuccess":"Grade posted","saveGradesFail":"Failed to save the grade","postGradesFail":"Failed to post the grade","uploadFeedbackAudioFail":"Failed to upload feedback audiofile"},"question":{"fetchQuestionBankFail":"Retrieving the question bank failed","createQuestionFail":"Creating the question failed","updateQuestionFail":"Updating the question failed","uploadingFillblanksAudioFail":"Uploading fill-in-the-blanks audio file failed","uploadingSpeakingQuestionAudioFail":"Uploading speaking question audio file failed","uploadingSpeakingAnswerAudioFail":"Uploading speaking answer audio file failed`","deleteQuestionSuccess":"Question deleted","deleteQuestionFail":"Deleting the question failed"},"lesson":{"markSlideFail":"Failed to mark slide as seen","lessonCreatedFail":"Creating the lesson failed","lessonUpdatedFail":"Updating the lesson failed","uploadingAudioFail":"Uploading audio file failed","uploadingVideoFail":"Uploading video file failed","lessonRetrieveFail":"Retrieving the lesson failed","lessonDeleteSuccess":"Lesson deleted","lessonDeleteFail":"Deleting the lesson failed"},"modules":{"retrieveModulesFailed":"Failed to retrieve modules","updateModulesFailed":"Creating or updating the modules failed"},"notifications":{"retrieveNotificationsFail":"Failed to retrieve the notifications","markNotificationsFail":"Failed to mark notification as seen"},"config":{"fetchConfigFail":"Failed to retrieve configuration","updatedConfigFail":"Failed to update the configuration","updatedConfigSuccess":"The configuration was updated"},"files":{"deleteFilesFailed":"Failed to delete the files"},"student":{"retrieveStudentsFail":"Failed to retrieve students"},"instructor":{"retrieveInstructorsFail":"Failed to get instructors"}}}')},579:function(e){e.exports=JSON.parse('{"es":{"auth":{"loginFail":"Error de inicio de sesion","fetchUserFail":"Error al recuperar usuario","accountCreatedSuccess":"Cuenta creada, revise su correo electr\xf3nico para un enlace de verificaci\xf3n","accountCreatedFail":"No se pudo crear la cuenta","updatedAccountSuccess":"Se actualiz\xf3 la cuenta","updatedAccountFail":"No se pudo actualizar la cuenta","uploadingPictureFail":"Error en subir la foto de perfil","uploadingDocumentsFail":"Error en subir documentos","accountVerifySuccess":"Cuenta verificada","accountVerifyFail":"Error de verificaci\xf3n de cuenta","verificationLinkSentSuccess":"Se envi\xf3 un enlace de verificaci\xf3n a su correo electr\xf3nico","verificationLinkSentFail":"Error al enviar un enlace de verificaci\xf3n a su correo electr\xf3nico","passwordResetLinkSentSuccess":"Se envi\xf3 un enlace a su correo electr\xf3nico para restablecer la contrase\xf1a","passwordResetLinkSentFail":"Error al enviar un enlace de restablecimiento de contrase\xf1a a su correo electr\xf3nico","passwordChangeSuccess":"Contrase\xf1a cambiada","passwordChangeFail":"No se pudo cambiar la contrase\xf1a","extendingSessionFail":"No se pudo extender la sesi\xf3n"},"course":{"fetchCoursesFail":"Error al recuperar cursos","requestSentSuccess":"Tu solicitud ha sido enviada","requestSentFailed":"No se pudo enviar la solicitud de inscripci\xf3n","enrollmentApproveFail":"Aprobar la inscripci\xf3n del estudiante fall\xf3","studentDenySuccess":"Se le ha denegado el acceso al estudiante","studentDenyFail":"No se pudo denegar el acceso","courseDropSuccess":"El curso fue abandonado","courseDropFail":"No se pudo abandonar el curso","fetchCourseFail":"No se pudo recuperar el curso","createCourseSuccess":"El curso fue creado","updateCourseSuccess":"El curso fue actualizado","createCourseFail":"Error al crear o actualizar el curso","uploadThumbnailFail":"Error en subir la miniatura del curso","changeStateFail":"No se pudo cambiar el estado del curso","deleteCourseFail":"No se pudo borrar el curso","gradeCourseFail":"No se pudo calificar el curso","updatingResourcesSuccess":"Los recursos fueron actualizados","updatingResourcesFail":"Error en actualizar los recursos","uploadingResourcesFail":"Error en subir el archivo de recursos"},"test":{"retrieveTestFail":"No se pudo recuperar la prueba o la tarea","retrieveTestFailDatePassed":"La prueba que estaba en progreso se cerr\xf3 y se envi\xf3","fetchTestResultsFail":"No se pud\xf3 obtener los resultados de la prueba","uploadAudioFail":"Error en subir el archivo de audio","studentTestSavedSuccess":"Se guard\xf3","studentTestSubmittedSuccess":"Fue enviado","creatingFail":"No se pudo crear","updatingFail":"No se pudo actualizar","uploadingTestResourcesFail":"Error en subir el archivo de recursos de texto","uploadingAudioResourcesFail":"Error en subir el archivo de recursos de audio","uploadingFillblanksAudioFail":"Error en subir el archivo de audio para llenar los espacios vac\xedos","uploadingSpeakingQuestionAudioFail":"Error en subir el archivo de audio para la pregunta de secci\xf3n oral","uploadingSpeakingAnswerAudioFail":"Error en subir el archivo de audio para la respuesta de secci\xf3n oral","testDeleteSuccess":"Prueba eliminada","testDeleteFail":"No se pudo borrar la prueba","closeTestFail":"No se pudo cerrar la prueba","testResetSuccess":"La prueba se reinici\xf3","testResetFail":"No se pudo restablecer la prueba","saveGradesSuccess":"Se guard\xf3 la calificaci\xf3n","postGradesSuccess":"Se subi\xf3 la calificaci\xf3n","saveGradesFail":"No se pudo guardar la calificaci\xf3n","postGradesFail":"No se pudo subir la calificaci\xf3n","uploadFeedbackAudioFail":"Error en subir el archivo de audio de comentarios"},"question":{"fetchQuestionBankFail":"Error al recuperar el banco de preguntas","createQuestionFail":"No se pudo crear la pregunta","updateQuestionFail":"No se pudo actualizar la pregunta","uploadingFillblanksAudioFail":"Error en subir el archivo de audio para llenar los espacios vac\xedos","uploadingSpeakingQuestionAudioFail":"Error en subir el archivo de audio para la pregunta de secci\xf3n oral","uploadingSpeakingAnswerAudioFail":"Error en subir el archivo de audio para la respuesta de secci\xf3n oral","deleteQuestionSuccess":"Pregunta eliminada","deleteQuestionFail":"No se pudo borrar la pregunta"},"lesson":{"markSlideFail":"Failed to mark slide as seen","lessonCreatedFail":"No se pudo crear la lecci\xf3n","lessonUpdatedFail":"No se pudo actualizar crear la lecci\xf3n","uploadingAudioFail":"Error en subir el archivo de audio","uploadingVideoFail":"Error en subir el archivo de video","lessonRetrieveFail":"Recuperar la lecci\xf3n fall\xf3","lessonDeleteSuccess":"Lecci\xf3n eliminada","lessonDeleteFail":"No se pudo borrar la lecci\xf3n"},"modules":{"retrieveModulesFailed":"No se pudieron recuperar los m\xf3dulos","updateModulesFailed":"Error al crear o actualizar los m\xf3dulos"},"config":{"fetchConfigFail":"No se pudo recuperar la configuraci\xf3n","updatedConfigFail":"No se pudo actualizar la configuraci\xf3n","updatedConfigSuccess":"Se actualiz\xf3 la configuraci\xf3n"},"notifications":{"retrieveNotificationsFail":"No se pudieron recuperar las notificaciones","markNotificationsFail":"No se pudo marcar la notificaci\xf3n como se ve"},"files":{"deleteFilesFailed":"No se pudieron borrar los archivos"},"student":{"retrieveStudentsFail":"No se pudo recuperar los estudiantes"},"instructor":{"retrieveInstructorsFail":"Error en recuperar los profesores"}}}')},580:function(e){e.exports=JSON.parse('{"en":{"students":"Students","instructor":"Instructor","from":"from","to":"to","typeMessage":"Type your message...","chatInstructorOnlyOfficeHours":"Chat with the instructor is only available during office hours","chatStudentOnlyOfficeHours":"Chat with students is only available during office hours."}}')},581:function(e){e.exports=JSON.parse('{"es":{"students":"Estudiantes","instructor":"Profesor","from":"de","to":"a","typeMessage":"Escribe su mensaje...","chatInstructorOnlyOfficeHours":"El chat con el instructor solo est\xe1 disponible durante las horas de oficina","chatStudentOnlyOfficeHours":"El chat con los estudiantes solo est\xe1 disponible durante las horas de oficina"}}')},582:function(e){e.exports=JSON.parse('{"en":{"test":"Test","assignment":"Assignment","yourProgress":"Your progress","studentProgress":"Student progress","grade":"Grade","classAverage":"Class average","assignmentsTests":"Assignments and tests"}}')},583:function(e){e.exports=JSON.parse('{"es":{"test":"Prueba","assignment":"Tarea","yourProgress":"Su progreso","studentProgress":"Progreso del estudiante","grade":"Calificaci\xf3n","classAverage":"Promedio de la clase","assignmentsTests":"Tareas y pruebas"}}')},584:function(e){e.exports=JSON.parse('{"en":{"studentsEnrolled":"Students enrolled","enrollmentRequested":"Enrollment requested","noCourses":"There are no courses at the moment","instructor":"Instructor","enrollmentStart":"Enrollement start date","enrollmentDeadline":"Enrollement deadline","courseNotActivated":"The course has not been activated by the instructor","deniedRequest":"The instructor has denied your request to enroll in this course","completePrereqs":"You must complete the prerequisites to enroll","courseCompleted":"Course completed {{grade}}%","courseFailed":"Course failed {{grade}}%","droppedOut":"Dropped out","buttons":{"edit":"Edit","delete":"Delete","syllabus":"Syllabus","enroll":"Enroll","drop":"Drop"},"fields":{"courseActive":"Course active","courseInactive":"Course inactive"}}}')},585:function(e){e.exports=JSON.parse('{"es":{"studentsEnrolled":"Estudiantes matriculados","enrollmentRequested":"Inscripci\xf3n solicitada","noCourses":"No hay cursos en este momento","instructor":"Profesor","enrollmentStart":"Fecha de inicio de la inscripci\xf3n","enrollmentDeadline":"Fecha de finalizaci\xf3n de la inscripci\xf3n","courseNotActivated":"El curso no ha sido activado por el profesor","deniedRequest":"El instructor ha denegado su solicitud para inscribirse en este curso","completePrereqs":"Debe completar los cursos de prerrequisito para inscribirse","courseCompleted":"Curso completado {{grade}}%","courseFailed":"Curso fall\xf3 {{grade}}%","droppedOut":"Abandon\xf3 el curso","buttons":{"edit":"Editar","delete":"Eliminar","syllabus":"Programa del curso","enroll":"Inscribirse en el curso","drop":"Dejar el curso"},"fields":{"courseActive":"Curso activo","courseInactive":"Curso inactivo"}}}')},586:function(e){e.exports=JSON.parse('{"en":{"multiplechoicequestions":"Multiple-choice questions","essayquestions":"Essay questions","speakingquestions":"Speaking questions","fillintheblanksquestions":"Fill-in-the-blanks questions","filterQuestions":"Filter questions","difficulty":"Difficulty","language":"Language","tag":"Tag","easy":"Easy","medium":"Medium","hard":"Hard","buttons":{"createQuestion":"Create question","resetFilters":"Reset filters"}}}')},587:function(e){e.exports=JSON.parse('{"es":{"multiplechoicequestions":"Preguntas de opci\xf3n m\xfaltiple","essayquestions":"Preguntas de ensayo","speakingquestions":"Preguntas oral","fillintheblanksquestions":"Preguntas para llenar los espacios en blanco","filterQuestions":"Filtrar preguntas","difficulty":"Dificultad","language":"Idioma","tag":"Etiqueta","easy":"Facil","medium":"Media","hard":"Dif\xedcil","buttons":{"createQuestion":"Crear pregunta","resetFilters":"Restablecer filtros"}}}')},588:function(e){e.exports=JSON.parse('{"en":{"hideActiveStatus":"Hide active status","chatAllowedOutsideOfficehours":"Allow chat outside office hours","chatNotifications":"Chat","chat":"Chat","tests":"Test","lessons":"Lesson","assignments":"Assignment","course":"Course update","notificationsHeader":"Notifications","emailsHeader":"E-mails","sendNotificationsHeader":"Notify by notification bell","sendEmailsHeader":"Notify by e-mail","dropCoursePenalty":"Require a minimum course grade","dropCourseGrade":"Minimum course grade","coursePassGrade":"Course pass grade","enrollAllowedAfterDropCourse":"Enroll allowed after course dropped","instructorCoursesLimited":"Limit number of courses per instructor","instructorCoursesLimit":"Courses limit per instructor","approveInstructorAccounts":"Approve instructor accounts prior to access","approveStudentAccounts":"Approve student accounts prior to access","contentBlockedCourseEnd":"Block course content after course ends","studentFileSizeLimit":"Student file upload size limit","instructorFileSizeLimit":"Instructor file upload size limit","passwordRequiredStartTest":"Password required prior to starting test","voiceRecordTimeLimit":"Voice record time limit (seconds)","newInstructorAccountNotifications":"New instructor account","newInstructorAccountEmails":"New instructor account","enrollRequest":"Student requests enrollment","dropCourse":"Student drops out of course","platformConfiguration":"Platform configuration","privacy":"Privacy","allowInstructorAccountDeletion":"Allow instructor account deletion","allowStudentAccountDeletion":"Allow student account deletion","errors":{"required":"Required","intGreaterThanZero":"Must be an integer greater than zero","positiveInt":"Must be an integer","betweenOneAndOneThousand":"Must be a number between 1 and 1000","greaterEqualToZeroLessThanOneHundred":"Must be a number greater than or equal to 0 and less than 100","greaterThanZeroLessThanEqualOneHundred":"Must be a number greater than 0 and less than or equal to 100","intGreaterThanEqualOneLessThanEqualOneHundred":"Must be an integer greater than or equal to 1 and less than or equal to 100","greaterThanEqualPointOneLessThanEqualOneThousand":"Must be a number greater than or equal to 0.1 and less than or equal to 1000","greaterThanEqualOneLessThanEqualOneThousand":"Must be a number greater than or equal to 1 and less than or equal to 1000","dropGradeLessThanPassGrade":"Minimum grade must be less than the pass grade","passGradeMoreThanDropGrade":"Pass grade must be more than the minimum grade"},"buttons":{"updateConfig":"Update configuration"}}}')},589:function(e){e.exports=JSON.parse('{"es":{"hideActiveStatus":"Ocultar estado activo","chatAllowedOutsideOfficehours":"Permitir el chat fuera del horario de oficina","chatNotifications":"Notificaciones del chat","chat":"Chat","tests":"Pruebas","lessons":"Lecciones","assignments":"Tareas","course":"Actualizaci\xf3n del curso","notificationsHeader":"Notificaciones","emailsHeader":"Correos electr\xf3nicos","sendNotificationsHeader":"Enviar notificaciones","sendEmailsHeader":"Enviar correos electr\xf3nicos","dropCoursePenalty":"Requiere una calificaci\xf3n m\xednima de curso","dropCourseGrade":"Calificaci\xf3n m\xednima del curso","coursePassGrade":"Nota aprobatoria del curso","enrollAllowedAfterDropCourse":"Se permite la inscripci\xf3n despu\xe9s de cancelar el curso","instructorCoursesLimited":"Limitar la cantidad de cursos por profesor","instructorCoursesLimit":"L\xedmite de cursos por profesor","approveInstructorAccounts":"Se requiere aprobaci\xf3n para cuentas de profesores","approveStudentAccounts":"Se requiere aprobaci\xf3n para cuentas de estudiantes","contentBlockedCourseEnd":"Bloquear el contenido del curso para estudiantes una vez finalizado el curso","studentFileSizeLimit":"L\xedmite de tama\xf1o de carga de archivos de estudiante","instructorFileSizeLimit":"L\xedmite de tama\xf1o de carga de archivos de profesor","passwordRequiredStartTest":"Se requiere contrase\xf1a para iniciar la prueba","voiceRecordTimeLimit":"L\xedmite de tiempo de grabaci\xf3n de voz (segundos)","newInstructorAccountNotifications":"Cuenta de nuevo profesor","newInstructorAccountEmails":"Cuenta de nuevo profesor","enrollRequest":"El estudiante solicita inscripci\xf3n","dropCourse":"El estudiante abandona el curso","platformConfiguration":"Configuraci\xf3n de la plataforma","privacy":"Privacidad","allowInstructorAccountDeletion":"Permitir la eliminaci\xf3n de la cuenta del profesor","allowStudentAccountDeletion":"Permitir la eliminaci\xf3n de la cuenta del estudiante","errors":{"required":"Requerido","intGreaterThanZero":"Debe ser un n\xfamero entero mayor que 0","positiveInt":"Debe ser un n\xfamero entero","betweenOneAndOneThousand":"Debe ser un n\xfamero entre 1 y 1000","greaterEqualToZeroLessThanOneHundred":"Debe ser un n\xfamero mayor o igual que 0 y menor que 100","greaterThanZeroLessThanEqualOneHundred":"Debe ser un n\xfamero mayor que 0 y menor o igual que 100","intGreaterThanEqualOneLessThanEqualOneHundred":"Debe ser un n\xfamero entero mayor o igual que 1 y menor o igual que 100","greaterThanEqualPointOneLessThanEqualOneThousand":"Debe ser un n\xfamero mayor o igual a 0.1 y menor o igual a 1000","greaterThanEqualOneLessThanEqualOneThousand":"Debe ser un n\xfamero mayor o igual a 1 y menor o igual a 1000","dropGradeLessThanPassGrade":"La calificaci\xf3n m\xednima debe ser menor que la calificaci\xf3n de aprobaci\xf3n","passGradeMoreThanDropGrade":"La calificaci\xf3n de aprobaci\xf3n debe ser mayor que la calificaci\xf3n m\xednima"},"buttons":{"updateConfig":"Actualizar configuraci\xf3n"}}}')},590:function(e){e.exports=JSON.parse('{"en":{"buttons":{"updateResources":"Update resources","select":"Select","addResource":"Add resource","resourceName":"Resource name"},"errors":{"giveResourceName":"Must give the resource a name","selectResource":"You must select a resource or remove the field","fileSize":"The file must be less than or equal to {{size}}"}}}')},591:function(e){e.exports=JSON.parse('{"es":{"buttons":{"updateResources":"Actualizar los recursos","select":"Elegir","addResource":"A\xf1adir recurso","resourceName":"Nombre del recurso"},"errors":{"giveResourceName":"Debe darle un nombre al recurso","selectResource":"Debes seleccionar un recurso o eliminar el campo","fileSize":"El archivo debe ser menor o igual a {{size}}"}}}')},592:function(e){e.exports=JSON.parse('{"en":{"close":"Close"}}')},593:function(e){e.exports=JSON.parse('{"es":{"close":"Cierre"}}')},594:function(e){e.exports=JSON.parse('{"en":{"goToPage":"Go to page","page":"page","of":"of"}}')},595:function(e){e.exports=JSON.parse('{"es":{"goToPage":"Ir a la pagina","page":"Pagina","of":"de"}}')},596:function(e){e.exports=JSON.parse('{"en":{"student":"Student","studentId":"Student ID","test":"Test","assignment":"Assignment","weight":"Weight","lessonsAllowed":"Lessons allowed","timer":"Timer","type":"Type","quiz":"Quiz","midterm":"Midterm","final":"Final","passingRequired":"Passing required to complete course","passingGrade":"Passing grade","availableOnDate":"Available on date","gradeReleaseDate":"Grade release date","dueDate":"Due date","closeDate":"Close date","lateSubmissionAllowed":"Late submission allowed","dailyPenalty":"Daily late penalty","maxLateDaysAllowed":"Late days allowed","yes":"Yes","no":"No","minute":"minute","plural":{"minute":"minutes"}}}')},597:function(e){e.exports=JSON.parse('{"es":{"student":"Estudiante","studentId":"Identificaci\xf3n del Estudiante","test":"Prueba","assignment":"Tarea","weight":"Porcentaje","lessonsAllowed":"Lecciones permitidas","timer":"Cronometrada","type":"Tipo","quiz":"Test","midterm":"Examen de mitad de per\xedodo","final":"Examen final","passingRequired":"Aprobaci\xf3n requerida para completar el curso","passingGrade":"Nota aprobatoria (%)","availableOnDate":"Fecha de disponibilidad","gradeReleaseDate":"Fecha de publicaci\xf3n de calificaciones","dueDate":"Fecha de vencimiento","closeDate":"Fecha de cierre","lateSubmissionAllowed":"Permitir env\xedo tard\xedo","dailyPenalty":"Penalizaci\xf3n diaria por retraso (%)","maxLateDaysAllowed":"D\xedas retrasados permitidos","yes":"S\xed","no":"No","minute":"minuto","plural":{"minute":"minutos"}}}')},598:function(e){e.exports=JSON.parse('{"en":{"useTheFollowingContent":"Use the following content to answer the questions","useTheAudio":"Use the audio to answer the questions"}}')},599:function(e){e.exports=JSON.parse('{"es":{"useTheFollowingContent":"Usa el contenido para responder las preguntas","useTheAudio":"Usa el audio para responder las preguntas"}}')},600:function(e){e.exports=JSON.parse('{"en":{"buttons":{"grade":"Grade","editGrade":"Edit grade","closeAndGrade":"Close and grade","resetTestFor":"Reset test for {{studentName}}","resetAssignmentFor":"Reset assignment for {{studentName}}","excuseTestFor":"Excuse test for {{studentName}}","excuseAssignment":"Excuse assignment for {{studentName}}","excuse":"Excuse","excused":"Excused","reset":"Reset"},"searchBy":"Search by","filterTests":"Filter tests","filterAssignments":"Filter assignments","student":"Student","studentId":"Student ID","test":"Test","assignment":"Assignment","toReview":"To review","graded":"Graded","all":"All","studentName":"Student name","studentDob":"Student dob","submittedOn":"Submitted on","gradeExpectedOn":"Grade expected on","lastSavedOn":"Last saved on","status":"Status","inProgress":"In progress, was not submitted","gradePending":"Grade pending","missed":"Missed","notAttempted":"Not attempted"}}')},601:function(e){e.exports=JSON.parse('{"es":{"buttons":{"grade":"Calificar","editGrade":"Editar calificaci\xf3n","closeAndGrade":"Cerrar y calificar","resetTestFor":"Reiniciar la prueba para {{studentName}}","resetAssignmentFor":"Reiniciar la tarea para {{studentName}}","excuseTestFor":"Perdonar la prueba para {{studentName}}","excuseAssignment":"Perdonar la tarea para {{studentName}}","excuse":"Perdonar","excused":"Fue perdonado","reset":"Reiniciar"},"searchBy":"Buscar por","filterTests":"Filtrar pruebas","filterAssignments":"Filtrar tareas","student":"Estudiante","studentId":"Identificaci\xf3n del estudiante","test":"Prueba","assignment":"Tarea","toReview":"Para revisar","graded":"Calificada","all":"Todas","studentName":"Nombre del estudiante","studentDob":"Fecha de nacimiento","submittedOn":"Enviado el","gradeExpectedOn":"Se espera calificaci\xf3n en","lastSavedOn":"Se guard\xf3 por \xfaltima vez el","status":"Estado ","inProgress":"En curso, no se envi\xf3","gradePending":"Pendiente de calificaci\xf3n","missed":"Se perdi\xf3 la fecha de env\xedo","notAttempted":"No intentado"}}')},602:function(e){e.exports=JSON.parse('{"en":{"pendingRequests":"Pending requests","requestsDenied":"Requests denied","resubmissionAllowed":"Resubmission allowed","droppedOut":"Dropped out","buttons":{"gradebook":"Gradebook"}}}')},603:function(e){e.exports=JSON.parse('{"es":{"pendingRequests":"Solicitudes pendientes","requestsDenied":"Solicitudes denegadas","resubmissionAllowed":"Reenv\xedo permitido","droppedOut":"Abandon\xf3 el curso","buttons":{"gradebook":"Libro de calificaciones"}}}')},604:function(e){e.exports=JSON.parse('{"en":{"deleteCourse":"Delete course","deleteAssignment":"Delete assignment","deleteTest":"Delete test","resetAssignment":"Reset assignment","resetTest":"Reset test","deleteLesson":"Delete lesson","mcQuestion":"Multiple-choice question","essayQuestion":"Essay question","speakingQuestion":"Speaking question","fillblanksQuestion":"Fill-in-the-blanks question","enrollmentRequest":"Enrollment request","dropCourse":"Drop course","syllabus":"Syllabus","assignmentSummary":"Assignment summary","testSummary":"Test summary","lesson":"Lesson","startTest":"Start test","gradeAssignment":"Grade assignment","gradeTest":"Grade test","assignmentReview":"Assignment review","testReview":"Test review","moduleContents":"Module contents","subjectContents":"Subject contents","topicContents":"Topic contents","studentSummary":"Student summary","enrollmentConfirmation":"Enrollment confirmation","documents":"Documents","gradebook":"Gradebook","courseResource":"Course resource"}}')},605:function(e){e.exports=JSON.parse('{"es":{"deleteCourse":"Borrar curso","deleteAssignment":"Borrar tarea","deleteTest":"Borrar prueba","resetAssignment":"Reiniciar tarea","resetTest":"Reiniciar prueba","deleteLesson":"Borrar lecci\xf3n","mcQuestion":"Pregunta de opci\xf3n m\xfaltiple","essayQuestion":"Pregunta de ensayo","speakingQuestion":"Pregunta oral","fillblanksQuestion":"Pregunta de llenar los espacios vac\xedos","enrollmentRequest":"Solicitud de inscripci\xf3n","dropCourse":"Abandonar el curso","syllabus":"Programa del curso","assignmentSummary":"Resumen de tarea","testSummary":"Resumen de prueba","lesson":"Lecci\xf3n","startTest":"Iniciar prueba","gradeAssignment":"Calificar tarea","gradeTest":"Calificar prueba","assignmentReview":"Revisar tarea","testReview":"Revisar prueba","moduleContents":"Contenido del m\xf3dulo","subjectContents":"Contenido del sujeto","topicContents":"Contenido de la tema","studentSummary":"Resumen del estudiante","enrollmentConfirmation":"Confirmaci\xf3n de inscripci\xf3n","documents":"Documentos","gradebook":"Libro de calificaciones","courseResource":"Recurso del curso"}}')},606:function(e){e.exports=JSON.parse('{"en":{"language":"Language of teaching","courseInfo":"Course info","instructor":"Instructor","instructorEmail":"Instructor e-mail","coursePassGrade":"Passing grade","gradeIfCourseDropped":"Grade if course dropped after drop deadline","importantDates":"Important Dates","enrollmentStart":"Enrollement start date","enrollmentDeadline":"Enrollement deadline","courseStartDate":"Course start date","courseEndDate":"Course end date","dropDeadline":"Drop deadline","from":"from","to":"to","coursePrereqs":"Course prerequisites","noCoursePrereqs":"This course has no prerequisites","noOfficeHours":"The instructor has not posted any office hours","weeklyOfficehours":"Weekly office hours","otherOfficehours":"Other office hours","askQuestionsViaChat":"You will be able to ask questions via chat during these times","youAreRequesting":"You are requesting to enroll in ","accessWhenApproved":"You will get access to the course once the instructor approves your request","agree":"I agree","buttons":{"submitRequest":"Submit request"}}}')},607:function(e){e.exports=JSON.parse('{"es":{"language":"El idioma de ense\xf1anza","courseInfo":"Informaci\xf3n del curso","instructor":"Profesor","instructorEmail":"Correo electr\xf3nico del profesor","coursePassGrade":"Calificaci\xf3n aprobatoria","gradeIfCourseDropped":"Calificaci\xf3n si el curso se cancel\xf3 despu\xe9s de la fecha l\xedmite","importantDates":"Fechas importantes","enrollmentStart":"Fecha de inicio de la inscripci\xf3n","enrollmentDeadline":"Fecha de finalizaci\xf3n de la inscripci\xf3n","courseStartDate":"Fecha de inicio del curso","courseEndDate":"Fecha de finalizaci\xf3n del curso","dropDeadline":"Fecha l\xedmite para abandonar","from":"de","to":"a","coursePrereqs":"Prerrequisitos del curso","noCoursePrereqs":"Este curso no tiene prerrequisitos","noOfficeHours":"No hay ning\xfan horario de oficina publicado","weeklyOfficehours":"Horas de oficina semanales","otherOfficehours":"Horas de oficina en fechas espec\xedficas","askQuestionsViaChat":"Podr\xe1 hacer preguntas a trav\xe9s del chat durante estos horarios","youAreRequesting":"Est\xe1 solicitando inscribirse en ","accessWhenApproved":"Tendr\xe1 acceso al curso una vez que el profesor apruebe tu solicitud","agree":"Estoy de acuerdo","buttons":{"submitRequest":"Enviar solicitud"}}}')},608:function(e){e.exports=JSON.parse('{"en":{"firstName":"First name","lastName":"Last name","email":"E-mail","dob":"Date of birth","studentId":"Student ID","lastLogin":"Last login","courseProgress":"Course progress","documents":"Documents","next":"Next","back":"Back","governmentId":"Government issued ID","birthCertificate":"Birth certificate","transcript":"Transcript","proofLegalStatus":"Proof of legal status","cv":"Curriculum vitae (cv)","proofTestScores":"Proof of test scores","letterReference":"Letter of reference","statementPurpose":"Statement of purpose","other":"Other","enrollCourse":{"language":"El idioma de ense\xf1anza"},"enrollConfirm":{"decision":"Decision","allow":"Allow access","deny":"Deny access","allowResubmission":"Allow resubmission","reason":"Reason for denied access","submit":"Submit"},"dropCourse":{"youAreDropping":"You are dropping","deadlineNotYet":"The deadline to drop the course has not yet passed therefore the course will not appear on your transcript, and will not affect your gpa.","deadlinePassed":"The deadline to drop the course has passed, you will be notified when your grade is released. Your grade will consist of the tests and assignments that you submitted.","youCanReenroll":"You can still re-enroll in the course before the enrollment deadline.","youCanNotReenroll":"You will not be able to re-enroll into the course since the enrollment deadline has passed.","agree":"I agree","dropCourse":"Drop course","noEnroll":"You will not be able to re-enroll in the course."},"deleteCourse":{"youAreDeleting":"You are deleting","deletingCourseWillDeleteContent":"Deleting the course will also delete all of its tests, lessons, and assignments","studentsNoAccess":"Students will no longer have access to the course materials","courseRemovedFromRecord":"The course will be removed from students record","agree":"I agree","deleteCourse":"Delete Course","deactivateAlternative":"Alternatively you can de-activate the course","courseRemainsAccessibleToYou":"The course will remain accessible to you but not the students","wontEraseContent":"It will not erase the course content but students will not have access to the course material","deactivate":"De-activate Course"},"deleteTest":{"deleteAssignment":"Delete assignment","deleteTest":"Delete test","assignmentGradeRemoved":"Students who have taken the assignment will have their grade removed","testGradeRemoved":"Students who have taken the test will have their grade removed","questionBankNotAffected":"The question bank will not be affected","agree":"I agree"},"deleteLesson":{"youAreDeleting":"You are deleting","noAccess":"Students will no longer have access to the content in this lesson","deleteLesson":"Delete lesson","agree":"I agree"},"takeTest":{"saveOften":"Save your test often. If you exit the browser, you can still take the test as long as the timer has not expired. Your answers will be restored to the last time you saved the test","startTest":"Start test","agree":"I agree","loginPassword":"Login password","required":"Required","wrongPassword":"Wrong password","mc":"Multiple-choice","mcShort":"Mc","essay":"Essay","speaking":"Speaking","fillblanks":"Fill-in-the-blanks","fillblanksShort":"Fill-blanks"},"resetTest":{"resetingAssignment":"You are reseting assignment","resetingTest":"You are reseting test","willBeAbleTest":"will be able to take the test again","willBeAbleAssignment":"will be able to take the assignment again","gradeWillBeDeleted":"The current grade or progress will be deleted","everyStudentCanRetakeTest":"Every student in the course will be able to re-take the test and you will be able to make changes to the test","everyStudentCanRetakeAssignment":"Every student in the course will be able to re-take the assignment and you will be able to make changes to the assignment","studentsGradeWillBeErased":"The student\'s grade will be erased","resetTest":"Reset test","resetAssignment":"Reset assignment","reason":"Reason","agree":"I agree"}}}')},609:function(e){e.exports=JSON.parse('{"es":{"firstName":"Nombre","lastName":"Apellido","email":"Correo electr\xf3nico","dob":"Fecha de nacimiento","studentId":"Identificaci\xf3n del estudiante","lastLogin":"\xdaltima fecha de inicio de sesi\xf3n","courseProgress":"Progreso del curso","documents":"Documentos","next":"Siguiente","back":"Atr\xe1s","governmentId":"Identificaci\xf3n de gobierno","birthCertificate":"Certificado de nacimiento","transcript":"Boleta de calificaciones","proofLegalStatus":"Prueba de estatus legal","cv":"Curriculum vitae (cv)","proofTestScores":"Prueba de puntajes de ex\xe1menes","letterReference":"Carta de referencia","statementPurpose":"Declaraci\xf3n de prop\xf3sito","other":"Otra","enrollCourse":{"language":"El idioma de ense\xf1anza"},"enrollConfirm":{"decision":"Decisi\xf3n","allow":"Permitir el acceso","deny":"Negar acceso","allowResubmission":"Permitir reenv\xedo","reason":"Raz\xf3n del acceso denegado","submit":"Enviar"},"dropCourse":{"youAreDropping":"Est\xe1 dejando","deadlineNotYet":"La fecha l\xedmite para abandonar el curso no ha pasado. El curso no aparecer\xe1 en su expediente acad\xe9mico","deadlinePassed":"La fecha l\xedmite para abandonar el curso ha pasado, se le notificar\xe1 cuando se publique su calificaci\xf3n. Su calificaci\xf3n consistir\xe1 en las pruebas y tareas que envi\xf3.","youCanReenroll":"Puede volver a inscribirse en el curso antes de la fecha l\xedmite de inscripci\xf3n","youCanNotReenroll":"No podr\xe1 volver a matricularte en el curso ya que ha pasado la fecha l\xedmite de inscripci\xf3n","agree":"Estoy de acuerdo","dropCourse":"Abandonar el curso","noEnroll":"No podr\xe1s volver a matricularte en el curso."},"deleteCourse":{"youAreDeleting":"Est\xe1s borrando","deletingCourseWillDeleteContent":"Eliminar el curso tambi\xe9n eliminar\xe1 todas sus pruebas, lecciones y tareas","studentsNoAccess":"Los estudiantes ya no tendr\xe1n acceso a los materiales del curso","courseRemovedFromRecord":"El curso se eliminar\xe1 del registro de los estudiantes","agree":"Estoy de acuerdo","deleteCourse":"Eliminar curso","deactivateAlternative":"Alternativamente, puede desactivar el curso","courseRemainsAccessibleToYou":"El curso seguir\xe1 siendo accesible para usted, pero no para los estudiantes","wontEraseContent":"No borrar\xe1 el contenido del curso, pero los estudiantes no tendr\xe1n acceso al material del curso","deactivate":"Desactivar curso"},"deleteTest":{"deleteAssignment":"Borrar tarea","deleteTest":"Borrar prueba","assignmentGradeRemoved":"A los estudiantes que hayan realizado la tarea se les quitar\xe1 la calificaci\xf3n","testGradeRemoved":"A los estudiantes que hayan realizado la prueba se les quitar\xe1 la calificaci\xf3n","questionBankNotAffected":"El banco de preguntas no se ver\xe1 afectado","agree":"Estoy de acuerdo"},"deleteLesson":{"youAreDeleting":"Est\xe1s borrando","noAccess":"Los estudiantes ya no tendr\xe1n acceso al contenido de esta lecci\xf3n","deleteLesson":"Borrar lecci\xf3n","agree":"Estoy de acuerdo"},"takeTest":{"saveOften":"Guarde su prueba con frecuencia. Si sale del navegador, a\xfan puede realizar la prueba siempre que el temporizador no haya expirado. Sus respuestas se restaurar\xe1n a la \xfaltima vez que guard\xf3 la prueba","startTest":"Iniciar prueba","agree":"Estoy de acuerdo","loginPassword":"Contrase\xf1a de inicio de sesi\xf3n","required":"Requerido","wrongPassword":"Contrase\xf1a incorrecta","mc":"Opci\xf3n multiple","mcShort":"Opc mult","essay":"Ensayo","speaking":"Oral","fillblanks":"Llenar espacios vac\xedos","fillblanksShort":"Llenar vac\xedos"},"resetTest":{"resetingAssignment":"Est\xe1 reiniciando la tarea","resetingTest":"Est\xe1 reiniciando la prueba","willBeAbleTest":"podr\xe1 volver a realizar la prueba","willBeAbleAssignment":"podr\xe1 volver a realizar la tarea","gradeWillBeDeleted":"Se eliminar\xe1 la calificaci\xf3n o el progreso","everyStudentCanRetakeTest":"Todos los estudiantes del curso podr\xe1n volver a tomar la prueba y usted podr\xe1 realizar cambios en la prueba.","everyStudentCanRetakeAssignment":"Todos los estudiantes del curso podr\xe1n volver a tomar la tarea y usted podr\xe1 realizar cambios en la tarea.","studentsGradeWillBeErased":"Se borrar\xe1 la calificaci\xf3n de los estudiantes","resetTest":"Reiniciar prueba","resetAssignment":"Reiniciar tarea","reason":"Raz\xf3n","agree":"Estoy de acuerdo"}}}')},610:function(e){e.exports=JSON.parse('{"en":{"continueAssignment":"Continue assignment","assignmentIsDueOn":"Assignment is due on","assignmentWasDueOn":"Assignment was due on","assignmentWillOpenOn":"Assignment opens on","assignmentHasOpenedOn":"Assignment opened on","testWillOpenOn":"Test opens on","testHasOpenedOn":"Test opened on","testClosesOn":"Test closes on","testClosedOn":"Test closed on","wasDueOn":"Was due on","DueOn":"Due on","latePenalty":"late penalty per day","closesOn":"Closes on","availableOn":"Available on","missedDeadline":"Missed the deadline to submit","latePenaltyAccumulated":"Late penalty accumulated","startTest":"Start test","startAssignment":"Start assignment","quiz":"Quiz","midterm":"Midterm","final":"Final","excused":"excused","notCompletedTests":"You have not completed any tests","notCompletedAssignments":"You have not completed any assignments","gradesReleaseOn":"Grades will be released on","gradePending":"Grade pending","reviewTest":"Review test","reviewAssignment":"Review assignment","summary":"Summary"}}')},611:function(e){e.exports=JSON.parse('{"es":{"continueAssignment":"Continuar tarea","assignmentIsDueOn":"La tarea vence el","assignmentWasDueOn":"La tarea Venc\xeda el","assignmentWillOpenOn":"La tarea se abre el","assignmentHasOpenedOn":"La tarea se abri\xf3 el","testWillOpenOn":"La prueba se abre el","testHasOpenedOn":"La prueba se abri\xf3 el","testClosesOn":"La prueba se cierra","testClosedOn":"La prueba cerr\xf3 el","wasDueOn":"Venc\xeda el","DueOn":"Vence el","latePenalty":"penalizaci\xf3n por retraso diario","closesOn":"Se cierra","availableOn":"Disponible el","missedDeadline":"Se perdi\xf3 la fecha de env\xedo","latePenaltyAccumulated":"Penalizaci\xf3n tard\xeda acumulada","startTest":"Iniciar prueba","startAssignment":"Iniciar tarea","quiz":"Test","midterm":"Examen de mitad de per\xedodo","final":"Examen final","excused":"Fue perdonado","notCompletedTests":"No ha completado ninguna prueba","notCompletedAssignments":"No ha completado ninguna tarea","gradesReleaseOn":"Las calificaciones se publicar\xe1n el","gradePending":"Pendiente de calificaci\xf3n","reviewTest":"Revisar la prueba","reviewAssignment":"Revisar la prueba","summary":"Resumen"}}')},612:function(e){e.exports=JSON.parse('{"en":{"lesson":"Lesson","lessons":"Lessons","availableOn":"Available on","completed":"Completed","buttons":{"next":"Next","back":"Back"}}}')},613:function(e){e.exports=JSON.parse('{"es":{"lesson":"Lecci\xf3n","lessons":"Lecci\xf3nes","availableOn":"Disponible el","completed":"Completada","buttons":{"next":"Siguiente","back":"Atr\xe1s"}}}')},614:function(e){e.exports=JSON.parse('{"en":{"classAverage":"Class average","courseProgress":"Course progress","weight":"Weight","result":"Result","passingRequired":"Passing required","showProgressReport":"Show progress report","hideProgressReport":"Hide progress report","test":"Test","assignment":"Assignment","tests":"Tests","assignments":"Assignments","passingGrade":"Passing grade","yes":"Yes","no":"No","missedDueDate":"Missed due date","excused":"excused","studentProgress":"Student\'s progress","grade":"Grade","assignmentsTests":"Assignments and tests","finalGrade":"Final grade","passed":"Passed","failed":"Failed","agree":"I agree","overrideGrade":"Override grade","overrideFail":"Override fail","gradeAdjustment":"Grade adjustment","gradeAdjustmentExplanation":"Grade adjustment explanation","requiredTestNotPassed":"One or more tests required to pass the course were not passed or not attempted","warning":"Once the final grade has been posted, the student can no longer do assignments or take tests. Lessons will remain accessible until the course end date","buttons":{"gradebook":"Gradebook","postGrade":"Post final grade","updateFinalGrade":"Update final grade"},"errors":{"required":"Required or disable grade override","finalGrade":"Final grade must be between {{minValue}} and 100"}}}')},615:function(e){e.exports=JSON.parse('{"es":{"classAverage":"Promedio de la clase","courseProgress":"Progreso del curso","weight":"Porcentaje","result":"Resulto","passingRequired":"Aprobaci\xf3n requerida","showProgressReport":"Mostrar informe de progreso","hideProgressReport":"Esconder informe de progreso","test":"Prueba","assignment":"Tarea","tests":"Pruebas","assignments":"Tareas","passingGrade":"Nota aprobatoria","yes":"S\xed","no":"No","missedDueDate":"Se fue la fecha de env\xedo","excused":"fue perdonado","studentProgress":"Progreso del estudiante","grade":"Calificaci\xf3n","assignmentsTests":"Tareas y pruebas","finalGrade":"Calificaci\xf3n final","passed":"Aprobada","failed":"Fall\xf3","agree":"Estoy de acuerdo","overrideGrade":"Cambiar calificacione","overrideFail":"Cambiar aprobaci\xf3n","gradeAdjustment":"Ajuste de calificacione","gradeAdjustmentExplanation":"Explicaci\xf3n del ajuste de calificaci\xf3n","requiredTestNotPassed":"Una o m\xe1s pruebas requeridas para aprobar el curso no se aprobaron o no se intentaron","warning":"Una vez que se ha publicado la calificaci\xf3n final, el estudiante ya no puede realizar tareas ni tomar ex\xe1menes. Las lecciones permanecer\xe1n accesibles hasta la fecha de finalizaci\xf3n del curso","buttons":{"gradebook":"Libro de calificaciones","postGrade":"Publicar calificaci\xf3n final","updateFinalGrade":"Actualizar calificaci\xf3n final"},"errors":{"required":"Requerido o deshabilita el ajuste de grado","finalGrade":"La calificaci\xf3n final debe estar entre {{minValue}} y 100"}}}')},616:function(e){e.exports=JSON.parse('{"en":{"progressReport":"Progress report","increaseCapacity":"Increase student capacity to allow student in the course","buttons":{"submit":"Submit","showReport":"Show progress report","hideReport":"Hide progress report"}}}')},617:function(e){e.exports=JSON.parse('{"es":{"progressReport":"Informe de progreso","increaseCapacity":"Aumenta la capacidad de los estudiantes para permitirles a participar en el curso.","buttons":{"submit":"Enviar","showReport":"Mostrar informe de progreso","hideReport":"Esconder informe de progreso"}}}')},647:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__Zghgy"}},649:function(e,t,n){e.exports={Bold:"CourseSyllabus_Bold__wHvTJ",Contained:"CourseSyllabus_Contained___Xdu5"}},650:function(e,t,n){e.exports={Bold:"DropCourseConfirmation_Bold__1pNqd"}},70:function(e,t,n){e.exports={spacing:"DateTimePicker_spacing__2ajOF",general:"DateTimePicker_general__1-bTu",accountGeneral:"DateTimePicker_accountGeneral__2Ru5p",regularPadding:"DateTimePicker_regularPadding__OaSSx",fullWidth:"DateTimePicker_fullWidth__1RXrK",label:"DateTimePicker_label___WBu7",wrapper:"DateTimePicker_wrapper__3002c",noPaddingWrapper:"DateTimePicker_noPaddingWrapper__3SM05",smallWidth:"DateTimePicker_smallWidth__3ZSkm",timeRangeWrapper:"DateTimePicker_timeRangeWrapper__iLzug",noPaddingBottom:"DateTimePicker_noPaddingBottom__19Jm2",errorText:"DateTimePicker_errorText__IxjFD"}},748:function(e,t,n){e.exports=n(1128)},756:function(e,t,n){},787:function(e,t){},790:function(e,t,n){e.exports=n.p+"static/media/course-default.8bddad59.png"},86:function(e,t,n){e.exports={Auth:"AuthenticationForm_Auth__2M9sO",errorMessage:"AuthenticationForm_errorMessage__3WnqQ",radioGroupAlignment:"AuthenticationForm_radioGroupAlignment__3pc4v",ButtonContainer:"AuthenticationForm_ButtonContainer__2-2x7",ForgotPassword:"AuthenticationForm_ForgotPassword__Tn8W4",ResendVerificationEmail:"AuthenticationForm_ResendVerificationEmail__3XBec",Dob:"AuthenticationForm_Dob__1ird5"}},869:function(e,t,n){},971:function(e,t,n){}},[[748,1,2]]]);
(this["webpackJsonpe-learn"]=this["webpackJsonpe-learn"]||[]).push([[50],{1319:function(n,t,e){"use strict";e.r(t);var o=e(19),c=e(0),u=e.n(c),r=e(30),i=e(4),s=e(38),a=e(154),f=e.n(a),l=e(148),d=e(82);t.default=Object(r.b)((function(n){return{token:n.authentication.token,userId:n.authentication.userId,notification:n.common.notification,selectedCourse:n.common.selectedCourse,courses:n.common.courses,tab:n.common.tab,initialPath:n.authentication.initialPath,loading:n.authentication.loading||n.instructorCourse.loading||n.common.loading,instructorLoggedIn:n.authentication.instructorLoggedIn}}),(function(n){var t;return t={fetchUser:function(t){return n(i.Zb(t))},fetchInstructors:function(t){return n(i.Bb(t))},fetchAllStudents:function(t,e){return n(i.pb(t,e))},fetchQuestionBank:function(t,e){return n(i.Nb(t,e))},fetchStudents:function(t,e){return n(i.Qb(t,e))},fetchConfig:function(t){return n(i.sb(t))},setChatUser:function(t){n(i.Hc(t))},setNotification:function(t,e){return n(i.Oc(t,e))},fetchCourses:function(t,e){return n(i.yb(t,e))},fetchNotifications:function(t,e){n(i.Kb(t,e))}},Object(o.a)(t,"fetchUser",(function(t,e){return n(i.Zb(t,e))})),Object(o.a)(t,"markAsSeen",(function(t,e){n(i.kc(t,e))})),Object(o.a)(t,"logout",(function(t){n(i.ic(t))})),t}))((function(n){var t=n.loading,e=n.token,o=n.fetchUser,r=n.fetchAllStudents,i=n.fetchStudents,a=n.fetchInstructors,h=n.fetchNotifications,p=n.fetchCourses,g=n.fetchConfig,b=n.selectedCourse,m=n.logout,S=Object(d.g)();return Object(c.useEffect)((function(){var n=localStorage.getItem("token"),t=localStorage.getItem("userId");if(n){var e=f()("https://www.boukacademy.com/",{query:{token:n}}),c=function(){e.emit("loggedOut",{user:t})};return window.addEventListener("beforeunload",c),e.open(),e.on("newAccount",(function(t){r(n,"noSpinner"),a(n,"noSpinner"),h(n,"noSpinner")})),e.on("updateCourses",(function(t){"instructor"!==t.userType&&"all"!==t.userType||p(n,"noSpinner"),h(n)})),e.on("updateStudents",(function(e){"instructor"!==e.userType&&"all"!==e.userType||e.userId!==t&&e.courseId!==b||(console.log("fetching courses"),b&&(console.log("fetching students"),i(b,n,"noSpinner")),p(n,"noSpinner")),e.userId===t&&e.fetchNotifications&&h(n,"noSpinner")})),e.on("activateAccount",(function(e){e.userId===t&&(o(n,"noSpinner"),g(n,"noSpinner"),h(n,"noSpinner"),p(n,"noSpinner"),a(n,"noSpinner"))})),e.on("suspendAccount",(function(n){n.userId===t&&m(S)})),e.emit("loggedIn",{user:t}),e.on("alert",(function(t){h(n,"noSpinner")})),function(){e.emit("loggedOut",{user:t}),window.removeEventListener("beforeunload",c),e.disconnect()}}}),[e]),Object(c.useEffect)((function(){if(e){var n=f()("https://www.boukacademy.com/",{query:{token:e}});return n.on("updateConfig",(function(n){"all"===n.userType&&g(e)})),function(){n.disconnect()}}}),[b,e]),u.a.createElement(s.a,null,u.a.createElement(l.a,{active:t,transparent:!0}))}))}}]);
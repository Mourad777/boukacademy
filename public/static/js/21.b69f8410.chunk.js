(this["webpackJsonpe-learn"]=this["webpackJsonpe-learn"]||[]).push([[21],{1027:function(e,t,n){e.exports={TextEditor:"QuestionForm_TextEditor__u_r-v",AudioAlignment:"QuestionForm_AudioAlignment__3BWyX",TextField:"QuestionForm_TextField__2Sda1",flexPositioningEven:"QuestionForm_flexPositioningEven__2KLVv",QuestionCustomizationContainer:"QuestionForm_QuestionCustomizationContainer__22hEj",questionFormList:"QuestionForm_questionFormList__1M4KE",PreviewContainer:"QuestionForm_PreviewContainer__2wPZw",CorrectAnswer:"QuestionForm_CorrectAnswer__2C-Al",button:"QuestionForm_button__8Jwdx",FullWidthImg:"QuestionForm_FullWidthImg__2mnOy",Inline:"QuestionForm_Inline__FRbqS",center:"QuestionForm_center__28Lc8",TestTypeRadio:"QuestionForm_TestTypeRadio__1ecGu",ListHorizontalDisplay:"QuestionForm_ListHorizontalDisplay__w7l8y",TestFormList:"QuestionForm_TestFormList__3N75r",greenIcon:"QuestionForm_greenIcon__3WzQM",redIcon:"QuestionForm_redIcon__2Ywa9",CorrectAnswerHighlight:"QuestionForm_CorrectAnswerHighlight__6kSke",BlankPreview:"QuestionForm_BlankPreview__3ZErm",InputField:"QuestionForm_InputField__2KEI9",FullWidth:"QuestionForm_FullWidth__xmZJy",InputFieldBottomMargin:"QuestionForm_InputFieldBottomMargin__g_527",SelectField:"QuestionForm_SelectField__16Pop",Pointer:"QuestionForm_Pointer__3kPMX",audioPlayerPreview:"QuestionForm_audioPlayerPreview__3tdXT",Editor:"QuestionForm_Editor__fcayJ"}},1028:function(e,t,n){"use strict";var a=n(6),r=n.n(a),o=n(41),i=n(24),s=n(63),c=n(0),u=n.n(c),l=n(847),m=n.n(l),d=n(31),f=n(338),p=n(341),b=n(343),g=n(27),v=n(337),w=n(30),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0,r=t.length-e.length;if(t.length!==e.length){var o={marks:1,incorrectAnswerOptions:{incorrectAnswerOne:"",incorrectAnswerTwo:"",incorrectAnswerThree:""},selectableAnswer:!1,audio:!1,browserAudioFile:null,audioFile:null},s={marks:null,answerOptions:{incorrectAnswerThree:null},browserAudioFile:null};if(e.length<t.length){var c=t.findIndex((function(t,n){return!e.includes(t)}));if(t.length>0){if(0!==c){var u=function(e,t,n){return[].concat(Object(w.a)(e.slice(0,t)),[n],Object(w.a)(e.slice(t)))},l=e.length-1;t.splice.apply(e,[l,0].concat(e));new Array(r);var m=u(n,c,Object(i.a)(Object(i.a)({},o),{},{answer:t[c]})),d=u(a,c,s);return{answersToUpdate:m.map((function(e,n){return Object(i.a)(Object(i.a)({},e),{},{answer:t[n]})})),errorsToUpdate:d}}n.unshift(Object(i.a)(Object(i.a)({},o),{},{answer:t[0]})),a.unshift(s)}}if(e.length>t.length){var f=function(e,t){var n=[];return e.forEach((function(a,r){t.includes(e[r])||n.push(r)})),n},p=f(e,t);if(1===p.length)n.splice(p[0],1),a.splice(p[0],1);else{var b=p[0],g=p.length;n.splice(b,g),a.splice(b,g)}}if(e.length<t.length&&!n){var v=e.length-1;t.splice.apply(e,[v,0].concat(e));var k=new Array(r);n=k.map((function(e){return o})),a=k.map((function(e){return s}))}return{answersToUpdate:n.map((function(e,n){return Object(i.a)(Object(i.a)({},e),{},{answer:t[n]})})),errorsToUpdate:a}}},h=n(149),F=n(199),E=n(198),Q=n(245),y=n(914),O=n(38),_=n(247),q=n(849),j=n.n(q),x=n(875),T=n.n(x),A=n(246),B=n(250),C=n(820),I=n(846),R=function(e){var t=e.blankIndex,n=e.t,a=e.answers,r=e.meta,o=void 0===r?{}:r,i=e.error;return u.a.createElement(O.a,null,u.a.createElement("select",{readOnly:!0,value:"select the correct answer",className:T.a.SelectField},["select the correct answer","Correct option","Incorrect option 1","Incorrect option 2","Incorrect option 3"].map((function(e,r){var o,i=(a[t]||{}).answerOptions||{};return 0===r&&(o=n("testForm.fields.selectCorrectAnswerInline")),1===r&&(o=(a[t]||{}).answer),2===r&&(o=i.incorrectAnswerOne),3===r&&(o=i.incorrectAnswerTwo),4===r&&(o=i.incorrectAnswerThree),u.a.createElement("option",{key:"".concat(e,"[").concat(r,"]"),className:1===r?T.a.CorrectAnswerHighlight:null,disabled:!0,value:e},o)}))),u.a.createElement("div",{className:T.a.flexPositioningEven},u.a.createElement("span",{className:T.a.errorText},(o.error||i)&&o.touched?o.error||i:""," ")))},S=n(935),P=n(936),N=n.n(P),L=n(106),z=(n(1019),n(822)),D=n.n(z),M=n(422),W=Object(v.a)({destroyOnUnmount:!1,forceUnregisterOnUnmount:!1,validate:h.a})((function(e){var t=e.formValues,n=e.updateErrors,a=e.formErrors,l=e.touchField,d=e.changeField,p=e.form,b=e.isModal,g=e.path,v=Object(M.a)("common").t,w=Object(c.useState)([]),q=Object(s.a)(w,2),x=q[0],P=q[1],z=Object(c.useState)([]),W=Object(s.a)(z,2),U=W[0],H=W[1],V=Object(c.useState)([]),X=Object(s.a)(V,2),J=X[0],K=X[1];Object(c.useEffect)((function(){var e=Object(h.a)(t);return n("testForm",e),function(){clearTimeout(J)}}),[]);var Z=(t.fillBlankQuestions||{}).answers,G=(t.fillBlankQuestions||{}).correctAnswers,Y=function(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){t.current=e})),t.current}(G),$=Object(c.useRef)();Object(c.useEffect)((function(){$.current?x&&P(!1):$.current=!0}));var ee=function(e,t,n,a){if(a){var r="fillBlankQuestions.answers";d(p,"".concat(r,".").concat(n,".recordingQuestion"),a),d(p,"".concat(r,".").concat(n,".questionRecorder"),e),d(p,"".concat(r,".").concat(n,".questionRecordingTimeout"),t)}else!function(){clearTimeout(J),H(!0);var e=setTimeout((function(){H(!1)}),5e3);K(e)}()},te=function(e,t,n){var a="fillBlankQuestions.answers";d(p,"".concat(a,".").concat(n,".recordingQuestion"),!1),d(p,"".concat(a,".").concat(n,".browserAudioFile"),e),d(p,"".concat(a,".").concat(n,".audioFile"),t),l(p,"".concat(a,".").concat(n,".browserAudioFile"))},ne=function(e){return(((t.fillBlankQuestions||[]).answers||[])[e]||{}).questionRecorder},ae=function(e){var t="fillBlankQuestions.answers.".concat(e,".answerOptions.incorrectAnswer");["One","Two","Three"].forEach((function(e){l(p,t+e)}))},re=(t.fillBlankQuestions||{}).answers||[],oe=(a.fillBlankQuestions||{}).answers||[];if((Y||[]).findIndex((function(e,t){return e!==G[t]?e:null}))>-1){var ie=(Z||[]).map((function(e,t){return Object(i.a)(Object(i.a)({},e),{},{answer:G[t]})}));d(p,"fillBlankQuestions.answers",ie)}var se=(t.fillBlankQuestions||{}).correctAnswers;if((G||[]).length!==(Y||[]).length&&!x){var ce=k(Y,se,Z,oe),ue=ce.answersToUpdate,le=ce.errorsToUpdate;d(p,"fillBlankQuestions.answers",ue),n(p,Object(i.a)(Object(i.a)({},a),{},{fillBlankQuestions:{question:(a.fillBlankQuestions||{}).question,answers:le}})),G.forEach((function(e,t){var n={fillBlankQuestions:{answers:ue}};e.marks||l("fillBlankQuestions.answers.".concat(t,".marks"));var a=Object(h.a)(n);((a.fillBlankQuestions.answers[t]||{}).answerOptions||{}).incorrectAnswerThree&&ae(t),(a.fillBlankQuestions.answers[t]||{}).browserAudioFile&&l("fillBlankQuestions.answers.".concat(t,".browserAudioFile"))}))}var me=(t.fillBlankQuestions||{}).question||"",de=me.match(/<mark [^>]+>(.*?)<\/mark>/g),fe=j()(me,/<mark [^>]+>(.*?)<\/mark>/g,(function(e,t){var n=t/2-.5,a=((re||[])[n]||{}).answer,r=(re[n]||{}).browserAudioFile,o=((re||[])[n]||{}).selectableAnswer;return!0===o?u.a.createElement(O.a,{key:e+n},u.a.createElement("span",{className:T.a.BlankPreview},n+1," "),(re[n]||{}).audio&&r&&u.a.createElement(S.a,{id:"audio[".concat(n,"]"),source:r}),u.a.createElement(R,{blankIndex:n,answers:re,t:v})):!1===o?u.a.createElement(O.a,{key:e+n},u.a.createElement("span",{className:T.a.Inline},u.a.createElement("span",{className:T.a.BlankPreview},n+1," "),(re[n]||{}).audio&&r&&u.a.createElement(S.a,{id:"audio[".concat(n,"]"),source:r}),u.a.createElement("input",{readOnly:!0,type:"text",className:T.a.InputField,value:"".concat(N()(a))}))):void 0})),pe=[];fe.forEach((function(e,t){"string"===typeof e?pe.push(e):pe.push(m.a.renderToString(e))}));var be=(pe||[]).join("").replace(/<img/g,'<img style="width:100%"'),ge=(de||[]).map((function(e){return e.replace(/<[^>]+>/g,"")}));return Object(c.useEffect)((function(){d(p,"fillBlankQuestions.correctAnswers",ge)}),[t]),u.a.createElement(O.a,null,"testForm"===p&&u.a.createElement(L.a,{variant:"h4",gutterBottom:!0,paragraph:!0},v("testForm.fillblanksSection")),u.a.createElement("div",{className:T.a.TextEditor},u.a.createElement(f.a,{component:_.a,isModal:b,name:"fillBlankQuestions.question",label:v("testForm.fillblanksText"),field:"fillBlankQuestions.question",reduxForm:p,error:(a.fillBlankQuestions||{}).question,path:g,blockFillblankSynchronization:x})),be&&u.a.createElement("div",{className:T.a.PreviewContainer},u.a.createElement(L.a,{paragraph:!0,variant:"h6"},v("testForm.preview")),u.a.createElement("div",{dangerouslySetInnerHTML:{__html:D.a.sanitize(be,{ALLOW_UNKNOWN_PROTOCOLS:!0,ADD_ATTR:["src","onclick"],ADD_TAGS:["audio"]})}})),"testForm"===p&&u.a.createElement(Q.a,{summary:v("testForm.textFromQuestionbank"),index:0},u.a.createElement(y.default,{questionType:"Fill-in-the-blanks questions",selecting:!0,onBlockSync:function(){P(!!!0)}})),re.length>0?u.a.createElement(L.a,{style:{marginTop:20},variant:"h6",gutterBottom:!0,paragraph:!0},v("testForm.customizeAnswers")):"",u.a.createElement("ul",{className:T.a.TestFormList},re.map((function(e,n){var a=u.a.createElement(O.a,null,u.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},u.a.createElement(f.a,{name:"fillBlankQuestions.answers.".concat(n,".audioFile"),component:B.a,uploadButtonText:v("testForm.buttons.selectAudioFile"),index:n,onChangeFile:function(e,t){d(p,"fillBlankQuestions.answers.".concat(t,".browserAudioFile"),e)},mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]})),u.a.createElement(f.a,{component:I.a,name:"fillBlankQuestions.answers.".concat(n,".browserAudioFile"),onStart:function(){var e=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.c)(t,null,n,null,function(){var e=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:a=e.sent,te(a.blob,a.file,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,ee(a.recorder,a.recordingTimeout,n,a.isRecording);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onStop:function(){var e=Object(o.a)(r.a.mark((function e(a){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.d)(a,null,n,(r=n,(((t.fillBlankQuestions||[]).answers||[])[r]||{}).questionRecordingTimeout),ne(n));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:o=e.t0,te(o.blob,o.file,n);case 7:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),onPreview:function(){Object(C.b)("audioQuestion[".concat(n,"]"))},onClear:function(){return te(null,null,n)},id:"audioQuestion[".concat(n,"]"),recordDisabled:(re[n]||{}).recordingQuestion,audioSource:(re[n]||{}).browserAudioFile,isMicAlert:U}));return u.a.createElement("li",{key:"blanks[".concat(n,"]")},u.a.createElement("div",{className:T.a.QuestionCustomizationContainer},u.a.createElement(L.a,{variant:"h6",gutterBottom:!0},"".concat(v("testForm.blank")," ").concat(n+1)),u.a.createElement(L.a,{className:T.a.CorrectAnswer,variant:"body1",gutterBottom:!0,paragraph:!0},"".concat(v("testForm.correctAnswer"),": "),re[n]?re[n].answer.replace(/&nbsp;/g," "):""),u.a.createElement(f.a,{name:"fillBlankQuestions.answers.".concat(n,".selectableAnswer"),options:{checked:!1,label:v("testForm.fields.selectableAnswer")},component:A.a,type:"checkbox"}),u.a.createElement(f.a,{name:"fillBlankQuestions.answers.".concat(n,".audio"),type:"checkbox",options:{checked:!1,label:v("testForm.audio")},component:A.a}),re[n].selectableAnswer&&u.a.createElement(O.a,null,u.a.createElement(L.a,{variant:"body1",gutterBottom:!0,paragraph:!0},v("testForm.incorrectAnswerOptions")),["incorrectAnswerOne","incorrectAnswerTwo","incorrectAnswerThree"].map((function(e,t){return u.a.createElement("div",{key:"".concat(e,"[").concat(t,"]"),className:T.a.TextField},u.a.createElement(f.a,{wait:250,component:F.a,name:"fillBlankQuestions.answers.".concat(n,".answerOptions.").concat(e),label:"".concat(v("testForm.incorrectOption")," ").concat(t+1),margin:"dense",variant:"outlined",size:"small",simple:!0,width:"95%",debounce:!0,onChange:function(){return ae(t)}}))}))),(re[n]||{}).audio?a:null,"testForm"===p&&u.a.createElement("div",{style:{marginTop:15}},u.a.createElement(f.a,{name:"fillBlankQuestions.answers.".concat(n,".marks"),component:E.a,error:(oe[n]||{}).marks,options:{label:v("testForm.fields.marks"),size:"small"}}))))}))))}));t.a=Object(d.b)((function(e,t){var n=t.form;return{formValues:Object(p.a)(n)(e),formErrors:Object(b.a)(n)(e)}}),(function(e){return{touchField:function(t,n){e(Object(g.d)(t,n))},changeField:function(t,n,a){e(Object(g.a)(t,n,a))},updateErrors:function(t,n){e(Object(g.e)(t,n))}}}))(W)},1263:function(e,t,n){e.exports={spacing:"TagInput_spacing__1d-u8",inputContainer:"TagInput_inputContainer__1rikX"}},1354:function(e,t,n){"use strict";n.r(t);var a=n(24),r=n(63),o=n(0),i=n.n(o),s=n(31),c=n(38),u=n(338),l=n(339),m=n(27),d=n(341),f=n(337),p=n(247),b=n(922),g=n(444),v=n(1027),w=n.n(v),k=n(798),h=n(740),F=n(446),E=n(818),Q=n(152),y=n.n(Q),O=n(256),_=n.n(O),q=n(106),j=n(422),x=function(e){var t=e.input,n=e.label,a=e.type,r=e.meta,o=r.touched,s=r.error;return i.a.createElement("div",null,i.a.createElement("label",null,n),i.a.createElement("div",null,i.a.createElement("input",Object.assign({className:[w.a.InputField,w.a.FullWidth].join(" ")},t,{placeholder:n,type:a})),o&&s&&i.a.createElement("span",null,s)))},T=function(e){var t=e.clearAnswers,n=e.fields,a=e.t,r=e.meta.error;return i.a.createElement(c.a,null,i.a.createElement(g.a,{fullWidth:!0,type:"button",color:"primary",onClick:function(){return n.push()},startIcon:i.a.createElement(_.a,null),size:"small"},a("questionForm.buttons.addAnswer")),i.a.createElement(q.a,{variant:"body1",style:{fontSize:"0.8rem"},gutterBottom:!0},a("questionForm.writeAnswers")),i.a.createElement(k.a,null,n.map((function(e,a){return i.a.createElement(h.a,{key:a},i.a.createElement(g.a,{onClick:function(){n.remove(a),t()},color:"secondary",startIcon:i.a.createElement(y.a,null)},""),i.a.createElement(u.a,{name:e,type:"text",component:x,label:""}))})),r&&i.a.createElement(h.a,{className:"error"},r)))},A=Object(f.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.clearAnswers,n=e.touchCheckboxes,a=e.formValues,r=void 0===a?{}:a,o=e.path,s=Object(j.a)().t,m=((r.mcQuestion||{}).answers||[]).map((function(e,t){return{label:"".concat(e||""),value:"".concat(t+1),placement:"start",color:"primary",name:"mcQuestion.correctAnswers"}})),d=i.a.createElement(c.a,null,i.a.createElement(q.a,{variant:"body1",style:{fontSize:"0.8rem"},gutterBottom:!0},s("questionForm.selectCorrectAnswers")),i.a.createElement(u.a,{name:"mcQuestion.correctAnswers",component:b.a,options:m,column:!0,required:!1,onChange:function(){return n("mcQuestion.correctAnswers")}}));return i.a.createElement("div",{className:w.a.QuestionCustomizationContainer},i.a.createElement("div",{className:w.a.TextEditor},i.a.createElement(u.a,{name:"mcQuestion.question",component:p.a,reduxForm:"questionForm",field:"mcQuestion.question",label:s("questionForm.question"),path:o})),d,i.a.createElement(l.a,{name:"mcQuestion.answers",clearAnswers:t,component:T,t:s}),i.a.createElement(u.a,{name:"mcQuestion.solution",component:E.a,label:s("questionForm.fields.solution"),options:{multiline:!0,rows:3,variant:F.a},textLabel:!0}))})),B=Object(s.b)((function(e){return{formValues:Object(d.a)("questionForm")(e)}}),(function(e){return{updateTags:function(t){e(Object(m.a)("questionForm","tags",t))},clearAnswers:function(){e(Object(m.a)("questionForm","mcQuestion.correctAnswers]",[]))},touchCheckboxes:function(t){e(Object(m.d)("questionForm",t))}}}))(A),C=Object(f.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.path,n=Object(j.a)().t;return i.a.createElement(c.a,null,i.a.createElement("div",{className:w.a.TextEditor},i.a.createElement(u.a,{name:"essayQuestion.question",component:p.a,reduxForm:"questionForm",field:"essayQuestion.question",label:n("questionForm.question"),path:t})),i.a.createElement(u.a,{name:"essayQuestion.solution",component:E.a,label:n("questionForm.fields.solution"),options:{multiline:!0,rows:3,variant:F.a},textLabel:!0}))})),I=n(6),R=n.n(I),S=n(41),P=n(343),N=n(246),L=n(250),z=n(820),D=n(846),M=Object(f.a)({form:"questionForm",destroyOnUnmount:!0,forceUnregisterOnUnmount:!0})((function(e){var t=e.changeField,n=e.formValues,a=void 0===n?{}:n,s=e.formErrors,l=void 0===s?{}:s,m=e.makeAudioFieldTouched,d=e.path,f=Object(j.a)().t,b=Object(o.useState)(!1),g=Object(r.a)(b,2),v=g[0],k=g[1],h=Object(o.useState)(!1),F=Object(r.a)(h,2),E=F[0],Q=F[1];Object(o.useEffect)((function(){return function(){clearTimeout(E)}}),[]);var y={label:f("questionForm.fields.audioQuestion"),checked:!1},O={label:f("questionForm.fields.audioAnswer"),checked:!1},_=(a.speakingQuestion||[])[0]||{},q=_.recordingTimeout,x=_.questionRecordingTimeout,T=_.recorder,A=_.questionRecorder,B=_.questionRecordedBlob,C=_.recordedBlob,I=_.isRecordingQuestion,P=_.isRecording,M=function(e,n,a,r,o){o?("question"===r&&(t("speakingQuestion.".concat(a,".isRecordingQuestion"),o),t("speakingQuestion.".concat(a,".questionRecorder"),e),t("speakingQuestion.".concat(a,".questionRecordingTimeout"),n)),"answer"===r&&(t("speakingQuestion.".concat(a,".isRecording"),!0),t("speakingQuestion.".concat(a,".recorder"),e),t("speakingQuestion.".concat(a,".recordingTimeout"),n))):function(){clearTimeout(E),k(!0);var e=setTimeout((function(){k(!1)}),5e3);Q(e)}()},W=function(e,n,a,r){"question"===r&&(t("speakingQuestion.".concat(a,".isRecordingQuestion"),!1),t("speakingQuestion.".concat(a,".questionRecordedBlob"),e),t("speakingQuestion.".concat(a,".audioFileQuestion"),n),m("speakingQuestion.".concat(a,".questionRecordedBlob"))),"answer"===r&&(t("speakingQuestion.".concat(a,".isRecording"),!1),t("speakingQuestion.".concat(a,".recordedBlob"),e),t("speakingQuestion.".concat(a,".audioFile"),n),m("speakingQuestion.".concat(a,".recordedBlob")))},U=["question","answer"].map((function(e,t){return i.a.createElement(u.a,{component:D.a,name:"speakingQuestion.".concat(0,".").concat(0===t?"questionRecordedBlob":"recordedBlob"),onStart:function(){var t=Object(S.a)(R.a.mark((function t(n){var a;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(z.c)(n,e,0,null,function(){var t=Object(S.a)(R.a.mark((function t(n){var a;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:a=t.sent,W(a.blob,a.file,0,e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:a=t.t0,M(a.recorder,a.recordingTimeout,0,e,a.isRecording);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onStop:function(){var n=Object(S.a)(R.a.mark((function n(a){var r;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(z.d)(a,null,0,0===t?x:q,0===t?A:T);case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:r=n.t0,W(r.blob,r.file,0,e);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),onPreview:function(){Object(z.b)(0===t?"audioQuestion[".concat(0,"]"):"audioAnswer[".concat(0,"]"))},onClear:function(){return W(null,null,0,e)},id:0===t?"audioQuestion[".concat(0,"]"):"audioAnswer[".concat(0,"]"),recordDisabled:0===t?I:P,audioSource:0===t?B:C,isMicAlert:v})})),H=["question","answer"].map((function(e){return i.a.createElement(u.a,{name:"speakingQuestion.".concat(0,".").concat("question"===e?"audioQuestion":"audioAnswer"),options:"question"===e?y:O,component:N.a,type:"checkbox"})}));return i.a.createElement(c.a,{className:w.a.QuestionCustomizationContainer},i.a.createElement(c.a,null,H[0],_.audioQuestion?i.a.createElement(c.a,null,i.a.createElement("div",{className:w.a.flexPositioningEven},i.a.createElement(u.a,{name:"speakingQuestion.".concat(0,".audioFileQuestion"),index:"q".concat(0),onChangeFile:function(e){t("speakingQuestion.".concat(0,".questionRecordedBlob"),e)},component:L.a,loadedFile:_.questionRecordedBlob,mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]})),U[0]):i.a.createElement("div",{className:w.a.TextEditor},i.a.createElement(u.a,{name:"speakingQuestion.".concat(0,".question"),field:"speakingQuestion.".concat(0,".question"),reduxForm:"questionForm",component:p.a,label:f("questionForm.question"),path:d,error:(l.speakingQuestion||{}).question})),i.a.createElement("div",null,H[1],!0===_.audioAnswer?i.a.createElement(c.a,null,i.a.createElement("div",{className:w.a.flexPositioningEven},i.a.createElement(u.a,{name:"speakingQuestion.".concat(0,".audioFile"),component:L.a,index:"a".concat(0),onChangeFile:function(e){t("speakingQuestion.".concat(0,".recordedBlob"),e)},loadedFile:_.recordedBlob,mimeTypesAllowed:"audio/*",extensionsAllowed:["mp3","wav","wma"]})),U[1]):null)))})),W=Object(s.b)((function(e,t){return{formValues:Object(d.a)("questionForm")(e),formErrors:Object(P.a)("questionForm")(e)}}),(function(e){return{changeField:function(t,n){e(Object(m.a)("questionForm",t,n))},makeAudioFieldTouched:function(t){e(Object(m.d)("questionForm",t))}}}))(M),U=n(1028),H=n(830),V=n(4),X=n(130),J=n(131),K=n(147),Z=n(146),G=n(1262),Y=n.n(G),$=n(1263),ee=n.n($),te=(n(1264),function(e){Object(K.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(X.a)(this,n),t.apply(this,arguments)}return Object(J.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:ee.a.spacing},i.a.createElement("span",null,this.props.label),i.a.createElement("div",{className:ee.a.inputContainer},i.a.createElement(Y.a,{inputProps:{placeholder:""},value:this.props.tagValues,onChange:this.props.onTagChange})))}}]),n}(o.Component)),ne=n(838),ae=n(199),re=n(1235),oe=n(7),ie=function(e){var t={mcQuestion:{},essayQuestion:{},speakingQuestion:[{}],fillBlankQuestions:{}};if(e.mcQuestion){var n,a=e.mcQuestion;e.mcQuestion.question||(t.mcQuestion.question=oe.a.t("questionForm.errors.required")),((a.answers||[]).includes(void 0)||(a.answers||[]).includes(""))&&(a.answers||[]).length>1&&(n=oe.a.t("questionForm.errors.answersCantBeEmpty")),(a.answers||[]).length<2&&(n=oe.a.t("questionForm.errors.atleastTwoAnswers")),(a.answers||[]).length===(a.correctAnswers||[]).length&&(a.answers||[]).length>1&&(n=oe.a.t("questionForm.errors.atleastOneUnchecked")),(!a.correctAnswers||0===(a.correctAnswers||[]).length)&&(a.answers||[]).length>1&&(n=oe.a.t("questionForm.errors.selectAtleastOneAnswer"));var r=(a.answers||[]).map((function(e){return(e||"").trim()})),o=(r||[]).reduce((function(e,t,n,a){return a.indexOf(t)!==n&&e.indexOf(t)<0&&e.push(t),e}),[]);(a.answers||[]).length>1&&(o||[]).length>0&&(n=oe.a.t("questionForm.errors.answersDifferent")),t.mcQuestion.correctAnswers=n,(n||t.mcQuestion.question)&&(t.mcQuestionError=!0)}if(e.essayQuestion&&(e.essayQuestion.question||(t.essayQuestion.question=oe.a.t("questionForm.errors.required"),t.essayQuestionError=!0)),e.speakingQuestion){var i=(e.speakingQuestion||{})[0]||{};i.question||i.audioQuestion||(t.speakingQuestion[0].question=oe.a.t("questionForm.errors.requiredOrMakeAudioQuestion")),!i.questionRecordedBlob&&i.audioQuestion&&(t.speakingQuestion[0].questionRecordedBlob=oe.a.t("questionForm.errors.requiredOrMakeTextQuestion")),i.audioFileQuestion instanceof File&&i.audioFileQuestion.size>1e3*e.instructorFileSizeLimit*1e3&&i.audioQuestion&&(t.speakingQuestion[0].questionRecordedBlob="".concat(oe.a.t("questionForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),i.audioFile instanceof File&&i.audioFile.size>1e3*e.instructorFileSizeLimit*1e3&&i.audioAnswer&&(t.speakingQuestion[0].recordedBlob="".concat(oe.a.t("questionForm.errors.audioCannotExceed")," ").concat(e.instructorFileSizeLimit,"MB")),!i.recordedBlob&&i.audioAnswer&&(t.speakingQuestion[0].recordedBlob=oe.a.t("questionForm.errors.requiredOrDisableAudioAnswer")),(t.speakingQuestion[0].question||t.speakingQuestion[0].questionRecordedBlob||t.speakingQuestion[0].recordedBlob)&&(t.speakingQuestionError=!0)}return t},se=n(74),ce=n(148),ue=n(134),le=n(244),me=n(207),de=function(e,t,n,a,r,o,i,s,c){console.log("---------------------------------------------------------------------------------------------------------close window handler",!n),n||Object(me.a)(e,t,n,a,r,o,i,s,c)},fe=Object(f.a)({form:"questionForm",enableReinitialize:!0,validate:ie})((function(e){var t=e.editing,n=e.formValues,s=void 0===n?{}:n,l=e.formErrors,m=e.course,d=e.selectedCourse,f=e.questions,p=e.submitQuestion,b=e.deleteQuestion,v=e.questionType,w=e.changeField,k=e.touchField,h=e.loadedQuestion,F=e.loading,E=e.deleteImg,Q=e.clearQuestionForm,y=e.setQuestionForm,O=e.fetchQuestionBank,_=e.match,x=(e.history,Object(j.a)().t),T=m.tests,A=Object(o.useState)([]),I=Object(r.a)(A,2),R=I[0],S=I[1],P=Object(o.useState)(!0),N=Object(r.a)(P,2),L=N[0],z=N[1],D=Object(o.useState)(!1),M=Object(r.a)(D,2),V=M[0],X=M[1],J=Object(o.useState)([]),K=Object(r.a)(J,2),Z=K[0],G=K[1],Y=Object(o.useState)([]),$=Object(r.a)(Y,2),ee=$[0],oe=$[1],ie=Object(o.useState)(null),le=Object(r.a)(ie,2),fe=le[0],pe=le[1],be=localStorage.getItem("token"),ge=Object(o.useRef)(),ve=Object(o.useRef)(),we=Object(o.useRef)();we.current=R;var ke=Object(o.useRef)();ke.current=T;var he=Object(o.useRef)();he.current=v,Object(o.useEffect)((function(){return window.addEventListener("beforeunload",(function(e){de(ge.current,we.current,ve.current,be,E,"questionForm",null,ke.current,he.current)})),O(d,be),pe(t?null:(new ue.a.ObjectId).toHexString()),function(){window.removeEventListener("beforeunload",de),console.log("unmounting -------------------------------------------------------------",!ve.current),ve.current||Object(me.a)(ge.current,we.current,ve.current,be,E,"questionForm",null,ke.current,he.current),Q()}}),[]),Object(o.useEffect)((function(){ge.current=s,ve.current=V}),[s,V]),Object(o.useEffect)((function(){var e=_.params.questionId;if(f){var t=_.params.qType;if(t&&y(t,!1,function(e,t){var n=t("questionForm.fillblanksSectionDefaultText"),r={difficulty:"medium",language:t("questionForm.english")};return"mc"===e&&(r=Object(a.a)(Object(a.a)({},r),{},{mcQuestion:{answers:["".concat(t("questionForm.option")," 1"),"".concat(t("questionForm.option")," 2")],correctAnswers:["1"]}})),"essay"===e&&(r=Object(a.a)(Object(a.a)({},r),{},{essayQuestion:{question:""}})),"speaking"===e&&(r=Object(a.a)(Object(a.a)({},r),{},{speakingQuestion:[{audioAnswer:!1,audioQuestion:!1}]})),"fillInBlank"===e&&(r=Object(a.a)(Object(a.a)({},r),{},{fillBlankQuestions:{question:n,answers:[{marks:1,selectableAnswer:!1,answer:t("questionForm.pieceOfText")}],correctAnswers:[t("questionForm.pieceOfText")]}})),r}(t,x)),e){var n=(f||[]).find((function(t){return t._id===e}));n&&y(n.type,!1,function(e){var t=(e||{}).speakingQuestion||{},n=e;"speaking"===(e||{}).type&&(n=Object(a.a)(Object(a.a)({},e),{},{speakingQuestion:[{question:t.question,questionRecordedBlob:t.audioQuestion?t.audioQuestion:"",recordedBlob:t.audio?t.audio:"",audioFileQuestion:t.audioQuestion,audioFile:t.audio,audioAnswer:!(!t.audio||""===t.audio),audioQuestion:!(!t.audioQuestion||""===t.audioQuestion)}]}));var r=(e||{}).fillBlankQuestions||{},o=r.blanks||[];return"fillInBlank"===(e||{}).type&&(n=Object(a.a)(Object(a.a)({},e),{},{fillBlankQuestions:{question:r.question,answers:o.map((function(e){var t=(e.incorrectAnswers||[]).filter((function(e){return e})).reduce((function(e,t,n){var a;return 0===n&&(a="One"),1===n&&(a="Two"),2===n&&(a="Three"),e["incorrectAnswer".concat(a)]=t,e}),{});return{answer:e.correctAnswer,audioFile:e.audio,browserAudioFile:e.audio?e.audio:"",audio:!(!e.audio||""===e.audio),selectableAnswer:e.selectableAnswer,answerOptions:t}})),correctAnswers:o.map((function(e){return e.correctAnswer}))}})),n}(n))}}}),[f]),Object(o.useEffect)((function(){if(V){var e=Object(se.a)(T,"courseTests")||[],n=Object(se.a)(s,"questionForm",v).filter((function(t){return e.includes(t)?null:t})),r=(R||[]).filter((function(e){return n.includes(e)?null:e})).filter((function(t){return e.includes(t)?null:t}));p(t?s:Object(a.a)(Object(a.a)({},s),{},{_id:fe}),be,t,m._id,r,v)}}),[V]);var Fe=[{value:"easy",primaryText:x("questionForm.fields.easy")},{value:"medium",primaryText:x("questionForm.fields.medium")},{value:"hard",primaryText:x("questionForm.fields.hard")}];Object(o.useEffect)((function(){var e=Object(se.a)(h,"questionForm",v);S(e)}),[h]),Object(o.useEffect)((function(){var e=(s.fillBlankQuestions||{}).answers,t=(l.fillBlankQuestions||{}).answers;G(e),oe(t)}),[s,l]);var Ee=function(){if(s.mcQuestion&&(k("mcQuestion.question"),k("mcQuestion.correctAnswers")),s.essayQuestion&&k("essayQuestion.question"),s.speakingQuestion&&(k("speakingQuestion.0.question"),k("speakingQuestion.0.recordedBlob"),k("speakingQuestion.0.questionRecordedBlob")),s.fillBlankQuestions&&Array.from(Z).forEach((function(e,t){k("fillBlankQuestions.answers.".concat(t,".browserAudioFile")),k("fillBlankQuestions.answers.".concat(t,".answerOptions.incorrectAnswerThree"))})),s.mcQuestion&&l.mcQuestionError)return!1;if(s.essayQuestion&&l.essayQuestionError)return!1;if(s.speakingQuestion&&l.speakingQuestionError)return!1;if(s.fillBlankQuestions){var e=Z.map((function(e,t){return(((ee||[])[t]||{}).answerOptions||{}).incorrectAnswerThree||((ee||[])[t]||{}).browserAudioFile?"error":null})),t=(l.fillBlankQuestions||{}).question;if(e.includes("error")||t)return!1}return!0},Qe=t?s._id:fe,ye="courses/".concat(m._id,"/questions/").concat(Qe);return(m||{})._id&&Qe?i.a.createElement(c.a,null,i.a.createElement(ce.a,{active:F,transparent:!0}),"mc"===v&&i.a.createElement(B,{path:ye,question:v}),"essay"===v&&i.a.createElement(C,{path:ye,question:v}),"speaking"===v&&i.a.createElement(W,{path:ye,question:v}),"fillInBlank"===v&&i.a.createElement(U.a,{path:ye,isModal:!0,form:"questionForm",question:v}),i.a.createElement(re.a,null),i.a.createElement("div",{style:{display:"flex",marginTop:10}},i.a.createElement(u.a,{name:"difficulty",simple:!0,component:ne.a,options:Fe,textLabel:x("questionForm.fields.difficulty"),defaultValue:"medium"}),i.a.createElement(u.a,{component:ae.a,name:"language",label:x("questionForm.fields.language"),simple:!0,textLabel:!0,language:!0,fullWidth:!0})),i.a.createElement(u.a,{name:"tags",label:x("questionForm.fields.tags"),component:te,onTagChange:function(e){w("tags",e)},tagValues:(s||{}).tags||[]}),i.a.createElement(re.a,null),!L&&!Ee()&&i.a.createElement(q.a,{style:{textAlign:"center",marginBottom:"20px"},gutterBottom:!0,color:"error"},x("questionForm.errors.correctForm")),i.a.createElement(H.a,{isError:!(L||Ee()),clicked:function(){Ee()?X(!0):z(!1)}},x(t?"questionForm.buttons.updateQuestion":"questionForm.buttons.saveQuestion")),t&&i.a.createElement(g.a,{fullWidth:!0,color:"secondary",onClick:function(){return b((s||{})._id,be,m._id)}},x("questionForm.buttons.removeQuestion"))):null}));t.default=Object(s.b)((function(e){var t=e.common.configuration.instructorFileSizeLimit,n=Object(le.a)(e.common.courses,e.common.selectedCourse);return{formValues:Object(d.a)("questionForm")(e),formErrors:Object(P.a)("questionForm")(e),token:e.authentication.token,selectedCourse:e.common.selectedCourse,course:n,questionType:e.instructorQuestion.creatingQuestionType,initialValues:Object(a.a)(Object(a.a)({},e.instructorQuestion.loadedQuestionFormData),{},{instructorFileSizeLimit:t}),loading:e.instructorQuestion.loading,loadedQuestion:e.instructorQuestion.loadedQuestionFormData,questions:e.instructorQuestion.questionBank}}),(function(e){return{changeField:function(t,n){e(Object(m.a)("questionForm",t,n))},touchField:function(t){e(Object(m.d)("questionForm",t))},submitQuestion:function(t,n,a,r,o,i){e(V.I(t,i,n,a,r,o))},deleteQuestion:function(t,n,a){e(V.X(t,n,a))},deleteImg:function(t,n){e(V.R(t),n)},clearQuestionForm:function(){return e(V.q())},setQuestionForm:function(t,n,a){e(V.bd(t,!!n,a))},fetchQuestionBank:function(t,n){return e(V.Qb(t,n))}}}))(fe)},818:function(e,t,n){"use strict";var a=n(19),r=n(0),o=n.n(r),i=n(31),s=n(736),c=n(438),u=Object(c.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},textField:{width:"100%",borderRadius:"1px",margin:"0 auto 5px"},textLabel:{margin:"0 3px 10px 3px"},marginTop:{marginTop:"5px"},darkBackground:{background:"#424242",color:"white"},lightBackground:{background:"white"}}}));t.a=Object(i.b)((function(e){return{isDarkTheme:e.common.isDarkTheme}}))((function(e){var t,n=e.input,i=e.label,c=(e.meta,e.options),l=void 0===c?{}:c,m=e.placeholder,d=e.textLabel,f=e.isDarkTheme,p=u();return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:[p.root,l.marginTop?p.marginTop:null].join(" ")},d?o.a.createElement("div",{className:p.textLabel},"".concat(i,":")):null,o.a.createElement(s.a,Object.assign({className:[p.textField,f?p.darkBackground:p.lightBackground].join(" "),autoComplete:"off"},n,(t={rows:l.rows,variant:l.variant,multiline:!0},Object(a.a)(t,"variant","outlined"),Object(a.a)(t,"placeholder",m),Object(a.a)(t,"InputProps",{readOnly:l.readOnly}),Object(a.a)(t,"disabled",l.disabled),t)))))}))},820:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return g}));var a=n(6),r=n.n(a),o=n(63),i=n(41),s=n(912),c=n.n(s),u=n(455),l=n(913),m=n.n(l),d=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,i){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("saving"),s=new c.a({bitRate:128}),(i||{}).lameEncoder&&(s=i),(t||{}).lameEncoder&&(s=t),console.log("is recorder: ",s),!s){e.next=9;break}return e.next=8,s.stop().getMp3().then((function(e){var t=Object(o.a)(e,2),r=t[0],i=t[1];return{blob:URL.createObjectURL(i),file:new File(r,n?"".concat(a,"-[").concat(n,"]recording.mp3"):"".concat(a,"-recording.mp3"),{type:i.type,lastModified:Date.now()}),index:a}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),f=function(e,t,n,a,r){if(e){e.preventDefault();var o=d(null,t,n,r);return clearTimeout(a),o}},p=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,o,i){var s,l,m,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=new c.a({bitRate:128}),t){e.next=3;break}return e.abrupt("return");case 3:return t.preventDefault(),e.prev=4,e.next=7,s.start();case 7:return l=u.store.getState(),m=l.common.configuration.voiceRecordTimeLimit||60,f=setTimeout((function(){var e=d(s,n,a);i(e)}),1e3*m),e.abrupt("return",{recordingTimeout:f,isRecording:!0,recorder:s,index:a});case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",{isRecording:!1});case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),b=function(e){var t=document.getElementById(e);t&&t.play()},g=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 3:a=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("e: ",e.t0);case 9:return o=m()(a,{type:"video",mimeType:"video/webm;codecs=h264",canvas:{width:640,height:480}}),t({recorder:o,stream:a}),o.startRecording(),s=function(e){return new Promise((function(t){return setTimeout(t,e)}))},6e4,e.next=16,s(6e4);case 16:o.stopRecording(Object(i.a)(r.a.mark((function e(){var i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=o.getBlob(),s=new File([i],"video-recording.webm",{type:"video/webm"}),n(s),t({recorder:null,stream:null}),a.stop();case 5:case"end":return e.stop()}}),e)}))));case 17:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},823:function(e,t,n){e.exports={greenIcon:"AudioPlayer_greenIcon__knaj_",redIcon:"AudioPlayer_redIcon__VtpzN",flexPositioningEven:"AudioPlayer_flexPositioningEven__mBu5R",AudioAlignment:"AudioPlayer_AudioAlignment__1RjTd",Pointer:"AudioPlayer_Pointer__3IoHf",errorText:"AudioPlayer_errorText__1KeLa",advancedAudioPlayer:"AudioPlayer_advancedAudioPlayer__2hxRe","audio-player":"AudioPlayer_audio-player__q667P"}},830:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(438),i=n(869),s=n(444),c=Object(o.a)((function(e){return{SuccessButton:{background:"#4caf50","&:hover":{backgroundColor:"#388e3c",color:"#FFF"}},ErrorButton:{background:"#c62828","&:hover":{backgroundColor:"#b71c1c",color:"#FFF"}}}})),u=Object(i.a)(s.a)({border:0,borderRadius:3,color:"white",height:48,padding:"0 30px"});t.a=function(e){var t=e.isError,n=e.children,o=e.clicked,i=e.disabled,s=c();return r.a.createElement(a.Fragment,null,r.a.createElement(u,{disabled:i,onClick:o,fullWidth:!0,className:t?s.ErrorButton:s.SuccessButton},n))}},838:function(e,t,n){"use strict";var a=n(63),r=n(0),o=n.n(r),i=n(31),s=n(748),c=n(442),u=n(443),l=n(441),m=n(438),d=Object(m.a)((function(e){return{formControl:{minWidth:80,width:"100%",marginBottom:"20px"},textLabel:{margin:"0 3px 10px 3px"},SelectField:{boxSizing:"border-box",border:"1px solid #C2C2C2",borderRadius:"3px",padding:"7px",outline:"none",margin:"0 3px 0 0",cursor:"pointer"},SelectFieldDark:{background:"transparent",color:"white"}}}));t.a=Object(i.b)((function(e){return{isDarkTheme:e.common.isDarkTheme}}))((function(e){var t=e.input,n=e.meta,r=void 0===n?{}:n,i=e.options,m=e.label,f=e.fullWidth,p=e.simple,b=e.textLabel,g=e.error,v=e.disabled,w=e.isDarkTheme,k=d(),h=i.map((function(e){return o.a.createElement("option",{style:w?{background:"#424242",color:"white"}:{},key:e.primaryText,value:e.value},e.primaryText)})),F=o.a.useRef(null),E=o.a.useState(0),Q=Object(a.a)(E,2),y=Q[0],O=Q[1];o.a.useEffect((function(){O((F.current||200).offsetWidth)}),[]);var _=o.a.createElement(l.a,{variant:"outlined",className:k.formControl},o.a.createElement(c.a,{ref:F},m),o.a.createElement(s.a,Object.assign({disabled:v,native:!0,renderValue:function(){return t.value},labelWidth:y,className:k.cssOutlinedInput},t),h),o.a.createElement(u.a,null,(r.error||g)&&r.touched?r.error||g:""));return p&&(_=o.a.createElement("div",null,b&&o.a.createElement("div",{className:k.textLabel},"".concat(b)),o.a.createElement("select",Object.assign({value:b?"":m,className:[k.SelectField,w?k.SelectFieldDark:""].join(" "),style:f?{width:"95%"}:null},t),!b&&o.a.createElement("option",{style:w?{background:"#424242",color:"white"}:{},hidden:!0,key:-1,value:m},m),h),r.error&&r.touched&&o.a.createElement("span",{style:{color:"#E91313",fontSize:"0.7em",display:"block"}},r.error))),_}))},846:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return v}));var a=n(0),r=n.n(a),o=n(444),i=n(858),s=n.n(i),c=n(859),u=n.n(c),l=n(823),m=n.n(l),d=n(38),f=n(106),p=n(422),b=function(e){var t=e.onPreview,n=e.audioSource,a=e.id,i=e.previewType,s=e.previewText,c=e.disabled,u=e.fullWidth,l=Object(p.a)().t;return r.a.createElement(d.a,null,"button"===i?r.a.createElement(d.a,null,r.a.createElement("audio",{id:a,src:n}),r.a.createElement(o.a,{fullWidth:u,onClick:t,color:"primary",disabled:!n||""===n||c},s||l("audioRecorder.buttons.preview"))):r.a.createElement("div",{className:m.a.AudioAlignment},r.a.createElement("audio",{id:a,src:n}),r.a.createElement("span",{className:m.a.Pointer,onClick:t},r.a.createElement("i",{className:"fa fa-volume-down fa-2x ".concat(n?m.a.greenIcon:m.a.redIcon)}))))},g=function(e){var t=e.onClear,n=e.clearDisabled,a=Object(p.a)().t;return r.a.createElement("div",{className:m.a.flexPositioningEven},r.a.createElement(o.a,{color:"secondary",onClick:t,disabled:n},a("audioRecorder.buttons.clearAudio")))},v=function(e){var t=e.onStart,n=e.onStop,a=e.onPreview,i=e.recordDisabled,c=e.audioSource,l=e.id,v=e.meta,w=void 0===v?{}:v,k=e.error,h=e.onClear,F=e.clearDisabled,E=(e.playerDisabled,e.recordButtonText),Q=e.previewType,y=e.isMicAlert,O=(e.chatRecorder,e.token,Object(p.a)().t);return r.a.createElement(d.a,null,"button"===Q&&r.a.createElement("div",{className:m.a.flexPositioningEven},r.a.createElement(o.a,{onClick:t,disabled:i||y,startIcon:r.a.createElement(s.a,null),fullWidth:!0},E||O("audioRecorder.buttons.record"))),r.a.createElement("div",{style:{margin:"auto",display:"block",width:"60%"}},y&&r.a.createElement(f.a,{style:{textAlign:"center"},variant:"caption",color:"error"},O("audioRecorder.errors.micBlocked"))),r.a.createElement("div",{className:m.a.flexPositioningEven},"button"!==Q&&r.a.createElement(o.a,{onClick:t,disabled:i||y,startIcon:r.a.createElement(s.a,null)},E||O("audioRecorder.buttons.record")),r.a.createElement(o.a,{onClick:n,disabled:!i||y,startIcon:r.a.createElement(u.a,null)},O("audioRecorder.buttons.stop")),r.a.createElement(b,{onPreview:c?a:null,audioSource:c,id:l,previewType:Q})),r.a.createElement("div",{className:m.a.flexPositioningEven},r.a.createElement("span",{className:m.a.errorText},(w.error||k)&&w.touched?w.error||k:""," ")),r.a.createElement("div",{className:m.a.flexPositioningEven},r.a.createElement(g,{onClear:h,clearDisabled:F})))}},875:function(e,t,n){e.exports={QuestionCustomizationContainer:"TestForm_QuestionCustomizationContainer__1B5i8",AudioAlignment:"TestForm_AudioAlignment__2xVul",TextField:"TestForm_TextField__DjIDS",TextEditor:"TestForm_TextEditor__1VHzk",PreviewContainer:"TestForm_PreviewContainer__1YEM_",CorrectAnswer:"TestForm_CorrectAnswer__25di7",button:"TestForm_button__1y61_",FullWidthImg:"TestForm_FullWidthImg__1kaKf",Inline:"TestForm_Inline__MsvQq",center:"TestForm_center__1TCAd",TestTypeRadio:"TestForm_TestTypeRadio__2Hne_",ListHorizontalDisplay:"TestForm_ListHorizontalDisplay__-8t6U",TestFormList:"TestForm_TestFormList__3NFzO",greenIcon:"TestForm_greenIcon__JFFFl",redIcon:"TestForm_redIcon__1BnKX",CorrectAnswerHighlight:"TestForm_CorrectAnswerHighlight__3vZHd",BlankPreview:"TestForm_BlankPreview__3XprO",InputField:"TestForm_InputField__2kwvJ",FullWidth:"TestForm_FullWidth__1FYZJ",InputFieldBottomMargin:"TestForm_InputFieldBottomMargin__1OX1E",SelectField:"TestForm_SelectField__1FMX6",Pointer:"TestForm_Pointer__36bgT",audioPlayerPreview:"TestForm_audioPlayerPreview__2N6du",errorText:"TestForm_errorText__1QR7G",Editor:"TestForm_Editor__3WwHp"}},914:function(e,t,n){"use strict";n.r(t);var a=n(30),r=n(63),o=n(0),i=n.n(o),s=n(31),c=n(27),u=n(38),l=n(838),m=n(199),d=n(798),f=n(740),p=n(882),b=n(801),g=n(821),v=n.n(g),w=n(106),k=n(444),h=n(256),F=n.n(h),E=n(438),Q=n(4),y=n(24),O=n(422),_=n(83),q=Object(E.a)((function(e){return{root:{width:"100%",marginBottom:"20px"},heading:{fontSize:e.typography.pxToRem(15),flexShrink:0},headingModules:{fontSize:e.typography.pxToRem(18),flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,marginLeft:"10px"},flex:{display:"flex",marginTop:10,justifyContent:"space-between"},searchItem:{flexGrow:1,width:"98%"},createButton:{margin:"20px 0 20px 0"}}}));t.default=Object(s.b)((function(e){return{course:e.common.selectedCourse,questions:e.instructorQuestion.questionBank,questionEditing:e.instructorQuestion.questionEditing,editing:e.common.editing,creatingQuestionType:e.instructorQuestion.creatingQuestionType}}),(function(e){return{addQToTest:function(t,n){e(Object(c.a)("testForm",t,n))},setQuestionForm:function(t,n,a){e(Q.bd(t,!!n,a))},setEditing:function(){return e(Q.Yc())}}}))((function(e){var t=e.questions,n=e.selecting,o=e.questionType,s=e.indexToAdd,c=e.onBlockSync,g=e.addQToTest,h=e.course,E=e.isTest,Q=Object(_.g)(),j=Object(O.a)().t,x=q(),T=i.a.useState(""),A=Object(r.a)(T,2),B=A[0],C=A[1],I=i.a.useState(""),R=Object(r.a)(I,2),S=R[0],P=R[1],N=i.a.useState(""),L=Object(r.a)(N,2),z=L[0],D=L[1],M=[{value:"",primaryText:""},{value:"easy",primaryText:j("questions.easy")},{value:"medium",primaryText:j("questions.medium")},{value:"hard",primaryText:j("questions.hard")}],W=(t||[]).filter((function(e){return""!==e.language||null!==e.language})).reduce((function(e,t){return e.map((function(e){return e.language})).indexOf(t.language)<0&&e.push(t),e}),[]).map((function(e){return{value:e.language,primaryText:e.language}})),U=0,H=0,V=0,X=0;return i.a.createElement(u.a,null,!n&&i.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},i.a.createElement(k.a,{color:"primary",className:x.createButton,onClick:function(e){var t;e.stopPropagation(),"Multiple-choice questions"===o&&(t="mc"),"Essay questions"===o&&(t="essay"),"Speaking questions"===o&&(t="speaking"),"Fill-in-the-blanks questions"===o&&(t="fillInBlank"),Q.push("/instructor-panel/course/".concat(h,"/").concat(E?"tests":"assignments","/question-bank/new/").concat(t))}},j("questions.buttons.createQuestion"))),i.a.createElement(w.a,{variant:"subtitle1"},j("questions.filterQuestions")),i.a.createElement("div",{className:x.flex},i.a.createElement("div",{className:x.searchItem},i.a.createElement(l.a,{fullWidth:!0,simple:!0,textLabel:j("questions.difficulty"),label:"difficulty",options:M,input:{onChange:function(e){C(e.target.value)},value:B}})),i.a.createElement("div",{className:x.searchItem}," ",i.a.createElement(l.a,{fullWidth:!0,simple:!0,textLabel:j("questions.language"),label:"language",options:[{primaryText:"",value:""}].concat(Object(a.a)(W)),input:{onChange:function(e){D(e.target.value)},value:z}})),i.a.createElement("div",{className:x.searchItem}," ",i.a.createElement(m.a,{label:"Tag",width:"97.5%",simple:!0,textLabel:j("questions.tag"),input:{onChange:function(e){P(e.target.value)},value:S}}))),i.a.createElement(k.a,{fullWidth:!0,color:"secondary",size:"small",onClick:function(){C(""),P(""),D("")},style:{margin:"5px 0 0 0"}},j("questions.buttons.resetFilters")),(t||[]).filter((function(e){if(""===z||e.language===z)return e})).filter((function(e){if(""===B||e.difficulty===B)return e})).filter((function(e){if((e.tags||[]).find((function(e){if(e.toLowerCase().includes(S.toLowerCase()))return e}))||""===S)return e})).map((function(e,a){var r;if("mc"===e.type&&(U+=1),"essay"===e.type&&(H+=1),"speaking"===e.type&&(V+=1),"fillInBlank"===e.type&&(X+=1),"Multiple-choice questions"===o&&(r="mc"),"Essay questions"===o&&(r="essay"),"Speaking questions"===o&&(r="speaking"),"Fill-in-the-blanks questions"===o&&(r="fillInBlank"),e.type===r)return i.a.createElement(d.a,{key:e._id},i.a.createElement(f.a,{dense:!0,button:!0,onClick:function(a){var r;n?(a.stopPropagation(),function(e,t,n,a){if("mc"===e.type&&n("mcQuestions.".concat(t),Object(y.a)(Object(y.a)({},e.mcQuestion),{},{marks:1})),"essay"===e.type&&n("essayQuestions.".concat(t),Object(y.a)(Object(y.a)({},e.essayQuestion),{},{marks:1})),"speaking"===e.type){var r={questionRecordedBlob:(e.speakingQuestion||{}).audioQuestion&&""!==(e.speakingQuestion||{}).audioQuestion?(e.speakingQuestion||{}).audioQuestion:"",recordedBlob:(e.speakingQuestion||{}).audio&&""!==(e.speakingQuestion||{}).audio?(e.speakingQuestion||{}).audio:"",question:(e.speakingQuestion||{}).question,audioAnswer:!!(e.speakingQuestion||{}).audio,audioQuestion:!!(e.speakingQuestion||{}).audioQuestion,audioFile:(e.speakingQuestion||{}).audio,audioFileQuestion:(e.speakingQuestion||{}).audioQuestion,marks:1};n("speakingQuestions.".concat(t),r)}"fillInBlank"===e.type&&(n("fillBlankQuestions",function(e){var t=(e.fillBlankQuestions||{}).blanks||[],n=t.map((function(e,t){var n=e.audio&&""!==e.audio,a=(e.incorrectAnswers||[]).filter((function(e){return e})).reduce((function(e,t,n){var a;return 0===n&&(a="One"),1===n&&(a="Two"),2===n&&(a="Three"),e["incorrectAnswer".concat(a)]=t,e}),{});return{answer:e.correctAnswer,selectableAnswer:e.selectableAnswer,answerOptions:a,marks:1,audio:n,browserAudioFile:n?e.audio:"",audioFile:n?e.audio:null}}));return{question:(e.fillBlankQuestions||{}).question,answers:n,correctAnswers:t.map((function(e){return e.correctAnswer}))}}(e)),a())}((r=e._id,(t||[]).find((function(e){return r===e._id}))),s,(function(e,t){g(e,t)}),c)):Q.push("/instructor-panel/course/".concat(h,"/").concat(E?"tests":"assignments","/question-bank/edit/").concat(e._id))}},n?i.a.createElement(p.a,null,i.a.createElement(F.a,null)):i.a.createElement(p.a,null,i.a.createElement(v.a,null)),"mc"===e.type&&i.a.createElement(b.a,{primary:U+" "+((e.mcQuestion||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."}),"essay"===e.type&&i.a.createElement(b.a,{primary:H+" "+((e.essayQuestion||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."}),"speaking"===e.type&&i.a.createElement(b.a,{primary:(V+" "+(e.speakingQuestion||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."}),"fillInBlank"===e.type&&i.a.createElement(b.a,{primary:(X+" "+(e.fillBlankQuestions||{}).question||"").replace(/<[^>]+>/g,"").slice(0,25)+"..."})))})))}))},922:function(e,t,n){"use strict";var a=n(30),r=n(130),o=n(131),i=n(147),s=n(146),c=n(0),u=n.n(c),l=n(338),m=n(13),d=n(991),f=n(734),p=n(441),b=n(443),g=n(811),v=n(106),w=(n(38),function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).field=function(t){var n=t.input,r=t.meta,o=t.options,i=t.classes,s=t.column,c=t.error,l=(n.name,n.onChange),m=n.value,w=o.map((function(t,n){var r=t.label,o=t.value,i=t.name,s=m.includes(o);return u.a.createElement("div",{key:r+n,style:{display:"flex",alignItems:"center"}},e.props.numbered&&u.a.createElement(v.a,{style:{marginRight:10},variant:"subtitle1"},n+1),u.a.createElement(f.a,{key:"checkbox-".concat(n),control:u.a.createElement(g.a,{name:"".concat(i,"[").concat(n,"]"),value:o,checked:s,onChange:function(e){var t=Object(a.a)(m);return e.target.checked?t.push(o):t.splice(t.indexOf(o),1),l(t)}}),label:r}))}));return u.a.createElement(p.a,{component:"fieldset"},u.a.createElement(v.a,{variant:"h6"},e.props.title),u.a.createElement(d.a,{row:!s,className:i.Margin},w),u.a.createElement(b.a,null,(r.error||c)&&r.touched?c||r.error:""))},e}return Object(o.a)(n,[{key:"render",value:function(){return u.a.createElement(l.a,Object.assign({name:"checkbox"},this.props,{type:"checkbox",component:this.field}))}}]),n}(c.Component));t.a=Object(m.a)((function(){return{MuiFormLabel:{fontSize:"1.2em"},Margin:{marginBottom:"15px"}}}))(w)},935:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(823),i=n.n(o);t.a=function(e){var t=e.source,n=e.id;return r.a.createElement("td",{dangerouslySetInnerHTML:{__html:'\n        <audio id="'.concat(n,'" src="').concat(t,'">\n        </audio>\n        <span class="').concat(i.a.Pointer,'" onClick="(function(){\n        const audio = document.getElementById(\'').concat(n,'\');\n        audio.play()\n        return false;\n        })();return false;" >\n        <i class="fa fa-volume-down"></i>\n        </span>\n        ')}})}},961:function(e,t){}}]);
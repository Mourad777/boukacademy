(this["webpackJsonpe-learn"]=this["webpackJsonpe-learn"]||[]).push([[23],{1069:function(e,t,a){"use strict";a.r(t);var n=a(19),r=a(24),o=a(63),i=a(0),l=a.n(i),c=a(31),s=a(338),u=a(337),m=a(341),d=a(106),f=a(4),p=a(910),g=a(818),b=a(246),v=a(446),E=a(69),h=a.n(E),y=a(444),x=a(804),k=a(64),j=a(856),P=a.n(j),O=a(857),N=a.n(O),T=a(253),w=a.n(T),S=a(832),_=a(95),C=a(842),D=a(843),L=a(845),R=a(844),I=a(911),M=a(422),z=a(244),B=Object(u.a)({form:"processEnrollmentRequestForm",enableReinitialize:!0,destroyOnUnmount:!0})((function(e){var t,a=e.token,c=e.student,u=void 0===c?{}:c,m=e.enroll,f=e.deny,E=e.course,j=e.markAsSeen,O=e.notifications,T=e.formValues,z=void 0===T?{}:T,B=e.isDarkTheme,F=e.history,Y=Object(M.a)().t,q=l.a.useState(0),V=Object(o.a)(q,2),A=V[0],H=V[1];Object(i.useEffect)((function(){var e=[];(O||[]).forEach((function(t){"courseEnrollRequest"!==t.documentType&&"courseDrop"!==t.documentType||t.fromUser!==u._id||e.push(t)})),e.forEach((function(e){j(e._id,a)}))}),[]);var U=Object(k.a)(),W=(E.studentsEnrollRequests||[]).find((function(e){return e.student._id===u._id}))||{};if(!u)return null;var J=[{label:Y("confirmations.enrollConfirm.allow"),value:"approve",placement:"end",color:"primary"},{label:Y("confirmations.enrollConfirm.deny"),value:"deny",placement:"end",color:"primary"}],K={label:Y("confirmations.enrollConfirm.allowResubmission"),checked:!1},G=[{value:"",primaryText:""},{value:"governmentId",primaryText:Y("confirmations.governmentId")},{value:"birthCertificate",primaryText:Y("confirmations.birthCertificate")},{value:"transcript",primaryText:Y("confirmations.transcript")},{value:"legalStatusProof",primaryText:Y("confirmations.proofLegalStatus")},{value:"cv",primaryText:Y("confirmations.cv")},{value:"testScoresProof",primaryText:Y("confirmations.proofTestScores")},{value:"referenceLetter",primaryText:Y("confirmations.letterReference")},{value:"statementPurpose",primaryText:Y("confirmations.statementPurpose")},{value:"other",primaryText:Y("confirmations.other")}],Q=(u.documents||[]).length,X={backgroundColor:B?"":"white",padding:10,margin:"10px auto 10px auto"},Z=[[Y("confirmations.firstName"),u.firstName],[Y("confirmations.lastName"),u.lastName],[Y("confirmations.studentId"),(u._id||"").replace(/\D/g,"")],[Y("confirmations.dob"),h()(new Date(u.dob).getTime()).locale(localStorage.getItem("i18nextLng")).format("MMMM DD YYYY")],[Y("confirmations.email"),u.email],[Y("confirmations.lastLogin"),h()(new Date(parseInt(u.lastLogin)).getTime()).locale(localStorage.getItem("i18nextLng")).format("dddd, MMMM DD YYYY, HH:mm")],[Y("confirmations.courseProgress"),"".concat(Object(I.a)(E,u),"%")]];return l.a.createElement("div",null,l.a.createElement("div",{style:Object(r.a)({backgroundImage:'url("'.concat(u.profilePicture,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"200px",borderRadius:"50%",maxWidth:"200px",width:"100%"},X)}),l.a.createElement("div",{style:X},l.a.createElement(C.a,{"aria-label":"simple table"},l.a.createElement(D.a,null,Z.map((function(e){return l.a.createElement(R.a,{key:e[0]},l.a.createElement(L.a,{component:"th",scope:"row"},e[0]),l.a.createElement(L.a,{align:"right"},e[1]))}))))),Q>0&&l.a.createElement("div",{style:X},l.a.createElement(d.a,{paragraph:!0,variant:"h6",gutterBottom:!0},Y("confirmations.documents")),Q>0&&l.a.createElement(x.a,{steps:Q,position:"static",variant:"text",activeStep:A,nextButton:l.a.createElement(y.a,{size:"small",onClick:function(){H((function(e){return e+1}))},disabled:A===Q-1},Y("confirmations.next"),"rtl"===U.direction?l.a.createElement(P.a,null):l.a.createElement(N.a,null)),backButton:l.a.createElement(y.a,{size:"small",onClick:function(){H((function(e){return e-1}))},disabled:0===A},"rtl"===U.direction?l.a.createElement(N.a,null):l.a.createElement(P.a,null),Y("confirmations.back"))}),(u.documents||[]).map((function(e,t){if(t!==A)return null;var a=(Object(_.a)(e.document)||"").split(".").pop(),n=e.document,r=G.find((function(t){return t.value===e.documentType})).primaryText;return l.a.createElement("div",{key:e.document+t},l.a.createElement(d.a,{paragraph:!0,variant:"h6",gutterBottom:!0},r),("jpeg"===a||"jpg"===a||"jfif"===a)&&l.a.createElement("div",{style:{backgroundImage:'url("'.concat(n,'")'),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"300px",borderRadius:"3px",width:"100%",margin:"auto"}}),("docx"===a||"doc"===a)&&l.a.createElement(w.a,{fileType:a,filePath:n}),"pdf"===a&&l.a.createElement(S.a,{url:n,index:t}))}))),!W.denied&&!W.approved&&!W.droppedOut&&l.a.createElement("div",{style:X},l.a.createElement(s.a,{component:p.a,name:"decision",title:"Decision",required:!0,label:"Test Type",options:J,orientation:"horizontal"}),l.a.createElement(s.a,{name:"reason",component:g.a,label:Y("confirmations.enrollConfirm.reason"),options:{multiline:!0,rows:3,variant:v.a,disabled:"approve"===z.decision||!z.decision},textLabel:!0}),"deny"===z.decision&&l.a.createElement(s.a,{name:"allowResubmission",options:K,component:b.a}),l.a.createElement(y.a,(t={disabled:!z.decision},Object(n.a)(t,"disabled",!z.decision),Object(n.a)(t,"color","deny"===z.decision?"secondary":"primary"),Object(n.a)(t,"onClick",(function(){var e=z.decision,t=z.reason,n=z.allowResubmission;"approve"===e&&m(u._id,E._id,a,F),"deny"===e&&f(u._id,E._id,a,t,n,F)})),t),Y("confirmations.enrollConfirm.submit"))))}));t.default=Object(c.b)((function(e,t){var a=t.match.params.studentId,n=Object(z.a)(e.common.courses,e.common.selectedCourse),r=((n.studentsEnrollRequests||[]).find((function(e){return e.student._id===a}))||{}).student;return{token:e.authentication.token,student:r,notifications:e.common.notifications,course:n,isDarkTheme:e.common.isDarkTheme,initialValues:{allowResubmission:!1},formValues:Object(m.a)("processEnrollmentRequestForm")(e)}}),(function(e){return{markAsSeen:function(t,a){e(f.tc(t,a))},enroll:function(t,a,n,r){e(f.gb(t,a,n,r))},deny:function(t,a,n,r,o,i){e(f.jb(t,a,n,r,o,i))}}}))(B)},818:function(e,t,a){"use strict";var n=a(19),r=a(0),o=a.n(r),i=a(31),l=a(736),c=a(438),s=Object(c.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},textField:{width:"100%",borderRadius:"1px",margin:"0 auto 5px"},textLabel:{margin:"0 3px 10px 3px"},marginTop:{marginTop:"5px"},darkBackground:{background:"#424242",color:"white"},lightBackground:{background:"white"}}}));t.a=Object(i.b)((function(e){return{isDarkTheme:e.common.isDarkTheme}}))((function(e){var t,a=e.input,i=e.label,c=(e.meta,e.options),u=void 0===c?{}:c,m=e.placeholder,d=e.textLabel,f=e.isDarkTheme,p=s();return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:[p.root,u.marginTop?p.marginTop:null].join(" ")},d?o.a.createElement("div",{className:p.textLabel},"".concat(i,":")):null,o.a.createElement(l.a,Object.assign({className:[p.textField,f?p.darkBackground:p.lightBackground].join(" "),autoComplete:"off"},a,(t={rows:u.rows,variant:u.variant,multiline:!0},Object(n.a)(t,"variant","outlined"),Object(n.a)(t,"placeholder",m),Object(n.a)(t,"InputProps",{readOnly:u.readOnly}),Object(n.a)(t,"disabled",u.disabled),t)))))}))},832:function(e,t,a){"use strict";var n=a(130),r=a(131),o=a(147),i=a(146),l=a(0),c=a.n(l),s=a(836),u=a.n(s),m=a(899),d=a(252),f=a.n(d),p=a(251),g=a.n(p),b=a(444),v=a(243),E=a(907),h=a.n(E),y=a(906),x=a.n(y),k=a(198),j=a(739);m.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(m.pdfjs.version,"/pdf.worker.js");var P=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={numPages:null,pageNumber:1,scale:.6},e.onDocumentLoadSuccess=function(t){var a=t.numPages;e.setState({numPages:a,pageNumber:1})},e.previousPdfPage=function(){e.state.pageNumber>1&&e.setState({pageNumber:e.state.pageNumber-1})},e.nextPdfPage=function(){e.state.pageNumber<e.state.numPages&&e.setState({pageNumber:e.state.pageNumber+1})},e.setPdfPage=function(t){var a=parseInt(t.target.value),n=a;a>e.state.numPages&&(n=e.state.numPages),a<1&&(n=1),NaN!==a&&a||(n=1),e.setState({pageNumber:parseInt(n)})},e.handleScale=function(t){"in"===t&&e.setState((function(e){return{scale:e.scale+.2}})),"out"===t&&e.setState((function(e){return{scale:e.scale-.2}}))},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.pageNumber,n=t.numPages,r=t.scale,o=this.props,i=o.url,l=o.t,s={label:l("pdf.goToPage"),size:"small"};return c.a.createElement("div",null,c.a.createElement("p",{className:u.a.pageNumberDisplay},l("pdf.page")," ",a," ",l("pdf.of")," ",n),c.a.createElement("div",{className:u.a.flexPositioningEven},c.a.createElement(b.a,{disabled:1===a,color:"default",onClick:this.previousPdfPage,startIcon:c.a.createElement(g.a,null),size:"small"},l("pdf.page")," ",1===a?1:a-1),c.a.createElement(b.a,{disabled:a===n,onClick:this.nextPdfPage,color:"default",endIcon:c.a.createElement(f.a,null),size:"small"},l("pdf.page")," ",a===n?n:a+1)),c.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},c.a.createElement(k.a,{options:s,input:{onChange:this.setPdfPage}})),c.a.createElement("div",{style:{overflow:"scroll",maxHeight:"450px"}},c.a.createElement(m.Document,{className:u.a.pdfCanvas,file:i,onLoadSuccess:this.onDocumentLoadSuccess,onLoadError:function(e){return console.log(e)},renderMode:"svg"},c.a.createElement(m.Page,{scale:r,pageNumber:a}))),c.a.createElement("div",{className:u.a.flexPositioningEven},c.a.createElement(v.a,{onClick:function(){e.state.scale>=0&&e.handleScale("out")},color:"primary",component:"span"},c.a.createElement(x.a,null)),c.a.createElement(v.a,{onClick:function(){e.handleScale("in")},color:"primary",component:"span"},c.a.createElement(h.a,null))))}}]),a}(l.Component);t.a=Object(j.a)("common")(P)},836:function(e,t,a){e.exports={pdfCanvas:"PdfViewer_pdfCanvas__2nu4D",flexPositioningEven:"PdfViewer_flexPositioningEven__1Lffj",pageNumberDisplay:"PdfViewer_pageNumberDisplay__qHBe7"}},856:function(e,t,a){"use strict";var n=a(91);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),o=(0,n(a(107)).default)(r.default.createElement("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeft");t.default=o},857:function(e,t,a){"use strict";var n=a(91);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),o=(0,n(a(107)).default)(r.default.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight");t.default=o},863:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=863},900:function(e,t){},901:function(e,t){},902:function(e,t){},903:function(e,t){},904:function(e,t){},910:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(1082),i=a(1070),l=a(734),c=a(441),s=a(733),u=a(438),m=Object(u.a)((function(e){return{margin:{marginBottom:"15px"},MuiFormLabel:{fontSize:"1.2em"},errorText:{color:"#e91313",fontFamily:"Helvetica",fontSize:"0.75rem"},font:{fontSize:"0.7em !important"}}}));t.a=function(e){var t=e.input,a=e.meta,n=void 0===a?{}:a,u=e.options,d=e.title,f=e.error,p=e.row,g=void 0!==p&&p,b=m(),v=n.touched&&(n.error||f),E=u.map((function(e){return r.a.createElement(l.a,Object.assign({key:e.label},t,{value:e.value,control:r.a.createElement(o.a,{color:e.color}),label:e.label,labelPlacement:e.placement,checked:e.checked,className:b.font}))}));return r.a.createElement("div",{className:b.margin},r.a.createElement(c.a,{margin:"dense",component:"fieldset"},r.a.createElement(s.a,{className:b.MuiFormLabel},d),r.a.createElement(i.a,{row:g,value:t.value,"aria-label":"gender"},E),r.a.createElement("span",{className:b.errorText},v?n.error||f:""," ")))}},911:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e,t,a){var n=a||t.testResults;if(n&&e.tests){var r=(e.lessons||[]).reduce((function(e,t){return e+t.lessonSlides.length}),0),o=(e.lessons||[]).reduce((function(e,a){return a.lessonSlides.filter((function(e){return e.studentsSeen.includes(t._id)})).length+e}),0),i=(n||[]).filter((function(t){return t.isExcused&&t.course===e._id})).length,l=e.tests.length-i,c=e.tests.filter((function(e){return(n||[]).findIndex((function(t){return e._id===t.test&&t.closed&&!t.isExcused}))>-1})).length+o,s=r+l;return isNaN(parseInt(c/s*100))?0:parseInt(c/s*100)}}}}]);